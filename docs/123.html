<!DOCTYPE html>
<meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin">
  <meta http-equiv="Cross-Origin-Embedder-Policy" content="require-corp">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GBA DCI Filter Demo</title>
  <style>
    body {
      background: #222;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    img {
      width: 240px;
      height: auto;
      image-rendering: crisp-edges;
      image-rendering: pixelated;
    }
    .ads {
        filter: url(#gba-dci-filter-full);
    }
  </style>
</head>
<body>

<svg width="0" height="0">
  <filter id="gba-dci-filter-full" color-interpolation-filters="sRGB">
    <!-- Step 1: Gamma encode input (pow(x, 2.3)) -->
    <feComponentTransfer result="gamma-correct">
      <feFuncR type="gamma" amplitude="1" exponent="5" offset="0"/>
      <feFuncG type="gamma" amplitude="1" exponent="5" offset="0"/>
      <feFuncB type="gamma" amplitude="1" exponent="5" offset="0"/>
    </feComponentTransfer>

    <!-- Step 2: Apply luminance factor (lum = 0.975) -->
    <feComponentTransfer in="gamma-correct" result="lum-applied">
      <feFuncR type="linear" slope="0.975"/>
      <feFuncG type="linear" slope="0.975"/>
      <feFuncB type="linear" slope="0.975"/>
    </feComponentTransfer>

    <!-- Step 3: Apply GBA_DCI color matrix -->
    <feColorMatrix in="lum-applied" type="matrix" result="color-matrix" values="
    0.685 0.16  0.20  0 0
    0.34  0.629 0.19  0 0
   -0.025 0.211 0.61  0 0
    0     0     0     0.975 0
  "/>

    <!-- Step 4: Gamma decode output (pow(x, 1/2.0)) -->
    <feComponentTransfer in="color-matrix">
      <feFuncR type="gamma" amplitude="1" exponent="0.5" offset="0"/>
      <feFuncG type="gamma" amplitude="1" exponent="0.5" offset="0"/>
      <feFuncB type="gamma" amplitude="1" exponent="0.5" offset="0"/>
    </feComponentTransfer>
  </filter>
</svg>

<!-- Replace this with your own image -->
<img class="ads" src="https://cdn.mobygames.com/screenshots/15638982-fire-emblem-game-boy-advance-the-beginning-of-a-complex-later-ga.png" alt="Demo Image"/>
<img src="https://cdn.mobygames.com/screenshots/15638982-fire-emblem-game-boy-advance-the-beginning-of-a-complex-later-ga.png" alt=""/>

</body>
</html>
