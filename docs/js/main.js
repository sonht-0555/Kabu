const a0_0x41431b=a0_0x1f73;(function(_0x556424,_0x4fc44b){const _0x496780=a0_0x1f73,_0x5ce71d=_0x556424();while(!![]){try{const _0x15c108=parseInt(_0x496780(0x1f6))/0x1*(parseInt(_0x496780(0x21c))/0x2)+parseInt(_0x496780(0x22d))/0x3+-parseInt(_0x496780(0x244))/0x4*(parseInt(_0x496780(0x1f3))/0x5)+-parseInt(_0x496780(0x23e))/0x6+-parseInt(_0x496780(0x1f7))/0x7+-parseInt(_0x496780(0x1f0))/0x8+-parseInt(_0x496780(0x203))/0x9;if(_0x15c108===_0x4fc44b)break;else _0x5ce71d['push'](_0x5ce71d['shift']());}catch(_0xecd002){_0x5ce71d['push'](_0x5ce71d['shift']());}}}(a0_0x5964,0x3648b));import a0_0x43c1a6 from'../core/mgba.js';import*as a0_0x4130b0 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document['getElementById'](a0_0x41431b(0x1fb))};function initializeCore(_0x1a59c8,_0x61bfd6){const _0x1bb903=a0_0x41431b;_0x1a59c8(_0x61bfd6)[_0x1bb903(0x1ef)](function(_0x42fdaf){const _0x575dd8=_0x1bb903;_0x42fdaf[_0x575dd8(0x1ea)]();});}initializeCore(a0_0x43c1a6,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x41431b(0x221)](a0_0x41431b(0x1fb)),savedTurboState=localStorage[a0_0x41431b(0x20e)](a0_0x41431b(0x1ff)),controlSetting=document[a0_0x41431b(0x221)](a0_0x41431b(0x1fe));function handleVisibilityChange(_0xdff3){const _0x56811a=a0_0x41431b;document[_0x56811a(0x22f)]==='hidden'||_0xdff3?.[_0x56811a(0x205)]===_0x56811a(0x222)||_0xdff3?.[_0x56811a(0x230)]?(pauseGame(),canvas['classList']['add'](_0x56811a(0x20f))):(setTimeout(()=>{const _0x381fca=_0x56811a;canvas[_0x381fca(0x1f4)][_0x381fca(0x1e4)](_0x381fca(0x20f));},0x258),controlSetting[_0x56811a(0x1f4)][_0x56811a(0x226)](_0x56811a(0x20f))&&resumeGame());}async function statusShow(){const _0x346aa9=a0_0x41431b;document[_0x346aa9(0x234)]('pagehide',handleVisibilityChange),document[_0x346aa9(0x234)](_0x346aa9(0x246),handleVisibilityChange),window[_0x346aa9(0x234)](_0x346aa9(0x222),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x4130b0[_0x346aa9(0x237)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x346aa9(0x20e)](_0x346aa9(0x242)))),await notiMessage(gameVer,0x3e8);}function reName(_0x978a03,_0x3794fa){const _0x141276=a0_0x41431b;localStorage[_0x141276(0x21e)]('gameName',_0x978a03);const _0x36a6c7=_0x978a03['replace'](/\.(gba|gbc|gb)$/,_0x3794fa);return _0x36a6c7;}async function saveStatePeriodically(){const _0x2e32a4=a0_0x41431b;await ledSave(_0x2e32a4(0x217)),await Module['saveState'](0x0),await Module[_0x2e32a4(0x22c)](),await screenShot(0x0),console[_0x2e32a4(0x201)]('Auto\x20save\x20'+ ++countAutoSave+_0x2e32a4(0x1f2));}async function saveStateInCloud(){const _0x41671f=a0_0x41431b,_0x1e722e=localStorage[_0x41671f(0x20e)](_0x41671f(0x224)),_0x30af98=_0x1e722e['replace']('.gba',_0x41671f(0x227)),_0x5db3ea=localStorage['getItem'](_0x41671f(0x1fd)),_0x5acdca=localStorage['getItem'](_0x1e722e+_0x41671f(0x1eb)),_0x7a95f1=localStorage[_0x41671f(0x20e)](_0x1e722e+'_dateState0');if(navigator[_0x41671f(0x228)]){if(_0x5db3ea){await ledSave(_0x41671f(0x219)),await delay(0x3e8),await dpUploadFile(_0x30af98,Module['downloadFile'](_0x41671f(0x233)+_0x30af98));if(_0x5acdca!==null){const _0x28d66d=_0x5acdca+'\x0a\x0a'+_0x7a95f1,_0x2f7f36=new Blob([_0x28d66d],{'type':_0x41671f(0x247)});await dpUploadFile(_0x1e722e+_0x41671f(0x1e5),_0x2f7f36);}else console[_0x41671f(0x201)](_0x41671f(0x20c));await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x41671f(0x1f2),0x7d0);}else console['log'](_0x41671f(0x214));}else console['log'](_0x41671f(0x1e7));}function startTimer(){let [_0x294dbc,_0x3716c8,_0x747f40,_0x14e308,_0x57345b]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x5d98b3=a0_0x1f73;_0x747f40++,_0x14e308++,_0x57345b++;if(_0x747f40===0x3c)[_0x747f40,_0x3716c8]=[0x0,_0x3716c8+0x1];if(_0x3716c8===0x3c)[_0x3716c8,_0x294dbc]=[0x0,_0x294dbc+0x1];document[_0x5d98b3(0x221)](_0x5d98b3(0x236))['textContent']=_0x294dbc+'h'+_0x3716c8['toString']()[_0x5d98b3(0x1f8)](0x2,'0')+'.'+_0x747f40[_0x5d98b3(0x216)]()[_0x5d98b3(0x1f8)](0x2,'0');_0x14e308===0x3c&&(saveStatePeriodically(),_0x14e308=0x0);;_0x14e308===0xe10&&(saveStateInCloud(),_0x57345b=0x0);;},0x3e8);}function a0_0x5964(){const _0x11c052=['/data/screenshots/','pauseGame','createElement','listCheats','gbc','515850rzJdmU','Cheat\x20Enabled!','click','setFastForwardMultiplier','slotStateSaved','listGames','7468xJLdeq','listStates','visibilitychange','text/plain','_dateState','listSaves','0,0,','body','remove','_slot0.txt','uploadGame','Online!','/data/games/','buttonPress','FSInit','_imageState0','screenSize','buttonUnpress','revokeObjectURL','then','988880uflIRy','.png','\x20time(s)','290GLzswH','classList','textContent','17kMpOUk','1540126XTHAZI','padStart','error','add','canvas','disable','uId','control-setting','turboState','createObjectURL','log','uploadSaveOrSaveState','356544wItlQC','Paused!','type','includes','screenshot','_savedCheats','files','SDL2','editFileName','No\x20screenshot!','now','getItem','visible','uploadCheats','innerWidth','Resumed!','loadGame','Unable\x20to\x20upload\x20to\x20Cloud!','fileSize','toString','#20A5A6','listScreenshots','#E0C068','Do\x20you\x20want\x20to\x20load\x20save\x20state?','Save/State\x20uploaded\x20successfully:','44518cQjClB','Error\x20uploadCheat:','setItem','Error\x20uploadSavSta:','name','getElementById','beforeunload','resumeGame','gameName','autoLoadCheats','contains','.ss0','onLine','deleteFile','downloadFile','appendChild','FSSync','1264347uITYDx','download','visibilityState','persisted','loadState','href','/data/states/','addEventListener','saveState','timer','turboF','gbc1'];a0_0x5964=function(){return _0x11c052;};return a0_0x5964();}export async function uploadGame(_0x55ecec){const _0x31bfa1=a0_0x41431b,_0x4a3587=_0x55ecec['files'][0x0];Module[_0x31bfa1(0x1e6)](_0x4a3587,()=>{const _0x11453e=_0x31bfa1;Module[_0x11453e(0x22c)]();});}export async function loadGame(_0x492e78){const _0x531672=a0_0x41431b,_0x30974e=reName(_0x492e78,'.ss0'),_0x356b40=Module[_0x531672(0x245)]();intro[_0x531672(0x1f4)]['add'](_0x531672(0x1fc)),ingame[_0x531672(0x1f4)]['remove'](_0x531672(0x1fc)),_0x492e78['endsWith']('.gbc')||_0x492e78['endsWith']('.gb')?(canvas['classList'][_0x531672(0x1fa)](_0x531672(0x23d)),areaTrans[_0x531672(0x1f4)]['add'](_0x531672(0x238)),localStorage[_0x531672(0x21e)](_0x531672(0x1ec),'0,0,'+(window[_0x531672(0x211)]-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage['setItem'](_0x531672(0x1ec),_0x531672(0x1e2)+(window[_0x531672(0x211)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x356b40[_0x531672(0x206)](_0x30974e)?(await Module[_0x531672(0x213)](_0x531672(0x1e8)+_0x492e78),confirm(_0x531672(0x21a))&&await Module[_0x531672(0x231)](0x0)):await Module[_0x531672(0x213)](_0x531672(0x1e8)+_0x492e78),await statusShow();}export async function saveState(_0x1d96fe){const _0x2f0686=a0_0x41431b;await Module[_0x2f0686(0x235)](_0x1d96fe),await Module[_0x2f0686(0x22c)]();}export async function loadState(_0x37bc3f){await Module['loadState'](_0x37bc3f);}export async function downloadFile(_0x1e2ad8,_0x431b60){const _0x4829f8=a0_0x41431b,_0x55a26b=Module[_0x4829f8(0x22a)](_0x1e2ad8),_0x2bc958=document[_0x4829f8(0x23b)]('a');document[_0x4829f8(0x1e3)][_0x4829f8(0x22b)](_0x2bc958),_0x2bc958[_0x4829f8(0x22e)]=_0x431b60;const _0x1e7acd=new Blob([_0x55a26b],{'type':'application/octet-stream'});_0x2bc958[_0x4829f8(0x232)]=URL[_0x4829f8(0x200)](_0x1e7acd),_0x2bc958[_0x4829f8(0x240)](),URL[_0x4829f8(0x1ee)](_0x1e7acd),_0x2bc958['remove']();}export function downloadFileInCloud(_0x23278c){const _0x2dedad=a0_0x41431b,_0x633d22=Module[_0x2dedad(0x22a)](_0x23278c);return _0x633d22;}export async function uploadFile(_0x1fb006){const _0x24f5b1=a0_0x41431b,_0x1fbacb=_0x1fb006[_0x24f5b1(0x209)][0x0];Module[_0x24f5b1(0x202)](_0x1fbacb,()=>{const _0x4d4884=_0x24f5b1;Module[_0x4d4884(0x22c)]();});}export async function editFile(_0x4f5fd6,_0x2abb84,_0x24a55d){const _0x58a0f5=a0_0x41431b;await Module[_0x58a0f5(0x20b)](_0x4f5fd6,_0x2abb84,_0x24a55d),await Module[_0x58a0f5(0x22c)]();}export async function deleteFile(_0x5cf738){const _0x1874b4=a0_0x41431b;await Module[_0x1874b4(0x229)](_0x5cf738),await Module[_0x1874b4(0x22c)]();}export function listGame(){const _0x1388d9=a0_0x41431b,_0x3fb2b6=Module[_0x1388d9(0x243)]();return _0x3fb2b6;}export function listSave(){const _0x508166=a0_0x41431b,_0x14003a=Module[_0x508166(0x1e1)]();return _0x14003a;}export function listState(){const _0x366079=a0_0x41431b,_0x15879e=Module[_0x366079(0x245)]();return _0x15879e;}export function listCheat(){const _0x470a51=a0_0x41431b,_0x4eae09=Module[_0x470a51(0x23c)]();return _0x4eae09;}export function listScreenshot(){const _0x1a3f29=a0_0x41431b,_0x5a93cf=Module[_0x1a3f29(0x218)]();return _0x5a93cf;}export function fileSize(_0x2923f7){const _0x36cffc=a0_0x41431b,_0x26fec5=Module[_0x36cffc(0x215)](_0x2923f7);return _0x26fec5;}export async function uploadCheat(_0x13a0e6){const _0x3b2692=a0_0x41431b;try{const _0x2a0e78=_0x13a0e6[_0x3b2692(0x209)][0x0];await Module[_0x3b2692(0x210)](_0x2a0e78,()=>{const _0x270c95=_0x3b2692;console['log']('Cheat\x20uploaded\x20successfully:',_0x2a0e78[_0x270c95(0x220)]),localStorageFile(),Module[_0x270c95(0x22c)]();});}catch(_0x33c05d){console[_0x3b2692(0x1f9)](_0x3b2692(0x21d),_0x33c05d);}}export async function uploadSavSta(_0x4489db){const _0x50ea1f=a0_0x41431b;try{const _0x2b06dc=_0x4489db[_0x50ea1f(0x209)][0x0];await Module[_0x50ea1f(0x202)](_0x2b06dc,()=>{const _0x5b15b3=_0x50ea1f;console['log'](_0x5b15b3(0x21b),_0x2b06dc[_0x5b15b3(0x220)]),localStorageFile(),Module[_0x5b15b3(0x22c)]();});}catch(_0x19b125){console['error'](_0x50ea1f(0x21f),_0x19b125);}}export async function uploadSaveOrSaveState(_0x42d5ae){const _0x25e74f=a0_0x41431b;Module[_0x25e74f(0x202)](_0x42d5ae,()=>{const _0x5047f9=_0x25e74f;localStorageFile(),Module[_0x5047f9(0x22c)]();});}export async function resumeGame(){const _0x427d24=a0_0x41431b;Module[_0x427d24(0x223)](),Module['SDL2'](),notiMessage(_0x427d24(0x212),0x7d0);}export async function pauseGame(){const _0xf217ae=a0_0x41431b;Module[_0xf217ae(0x23a)](),Module[_0xf217ae(0x20a)](),notiMessage(_0xf217ae(0x204),0x7d0);}export async function buttonPress(_0xa90789){const _0x18188c=a0_0x41431b;Module[_0x18188c(0x1e9)](_0xa90789);}export async function buttonUnpress(_0x37b834){const _0xcb0e56=a0_0x41431b;Module[_0xcb0e56(0x1ed)](_0x37b834);}export async function screenShot(_0x2d413a){const _0x2761f4=a0_0x41431b,_0x323c0b=localStorage[_0x2761f4(0x20e)](_0x2761f4(0x224)),_0xc0400=reName(_0x323c0b,'_');await Module[_0x2761f4(0x207)](''+_0xc0400+_0x2d413a+_0x2761f4(0x1f1)),await Module[_0x2761f4(0x22c)]();const _0x4a6f85=await fileToBase64(Module['downloadFile'](_0x2761f4(0x239)+_0xc0400+_0x2d413a+_0x2761f4(0x1f1))),_0x19eded=Date[_0x2761f4(0x20d)](),_0x4d5c7e=formatDateTime(_0x19eded);localStorage[_0x2761f4(0x21e)](_0x323c0b+_0x2761f4(0x1e0)+_0x2d413a,_0x4d5c7e),localStorage['setItem'](_0x323c0b+'_imageState'+_0x2d413a,_0x4a6f85);}function a0_0x1f73(_0x2d6de3,_0x52df35){const _0x59648f=a0_0x5964();return a0_0x1f73=function(_0x1f73b1,_0x5f4df8){_0x1f73b1=_0x1f73b1-0x1e0;let _0x2ca2b0=_0x59648f[_0x1f73b1];return _0x2ca2b0;},a0_0x1f73(_0x2d6de3,_0x52df35);}export async function captureOCR(_0x34dcd0){const _0x2afd2d=a0_0x41431b;Module[_0x2afd2d(0x207)](_0x34dcd0);const _0x287550=Module[_0x2afd2d(0x22a)](_0x2afd2d(0x239)+_0x34dcd0);return _0x287550;}export async function setFastForwardMultiplier(_0x2697f1){const _0x3066f8=a0_0x41431b;Module[_0x3066f8(0x241)](_0x2697f1);}export function uploadCheats(_0x20c8f9,_0x43eba1,_0x401fb9,_0x350615,_0x53d1c5){const _0x5c0d3c=a0_0x41431b;Module[_0x5c0d3c(0x210)](_0x20c8f9,()=>{const _0xe4f0d0=_0x5c0d3c;Module[_0xe4f0d0(0x225)](),setTimeout(()=>{const _0x4755d2=_0xe4f0d0;Module[_0x4755d2(0x22c)]();},0x1f4),_0x350615&&(localStorage['setItem'](_0x43eba1+_0xe4f0d0(0x208),_0x401fb9),notiMessage(_0xe4f0d0(0x23f),0x5dc)),_0x53d1c5[_0xe4f0d0(0x1f5)]=localStorage['getItem'](_0x43eba1+'_savedCheats'||'Off');});}