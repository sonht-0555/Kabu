const a0_0x332859=a0_0x4381;(function(_0x58fc6c,_0x34013f){const _0x18b995=a0_0x4381,_0x5a6b57=_0x58fc6c();while(!![]){try{const _0x5a3408=parseInt(_0x18b995(0x128))/0x1+-parseInt(_0x18b995(0x17b))/0x2+parseInt(_0x18b995(0x176))/0x3+-parseInt(_0x18b995(0x15b))/0x4+parseInt(_0x18b995(0x174))/0x5*(-parseInt(_0x18b995(0x172))/0x6)+parseInt(_0x18b995(0x12e))/0x7+parseInt(_0x18b995(0x14d))/0x8;if(_0x5a3408===_0x34013f)break;else _0x5a6b57['push'](_0x5a6b57['shift']());}catch(_0x7d584f){_0x5a6b57['push'](_0x5a6b57['shift']());}}}(a0_0x15a2,0xa239d));var wasmAudioBuf,wasmSaveBuf,gameID,romFileName,drawContext,idata,imgFrameBuffer,scriptProcessor,audioContext;const AUDIO_BLOCK_SIZE=0x400,AUDIO_FIFO_MAXLEN=0x1324;function a0_0x15a2(){const _0xd7605a=['key','onupgradeneeded','gameID','has','length','load\x20done','romFile','_emuLoadROM','/data/states/game.ss1','open','904280JgudCZ','clientX','img','createElement','name','get','webkitAudioContext','classList','Down','_emuResetCpu','/data','getChannelData','put','Start','69820YNQnXT','body','Right','Down-left','_emuGetSymbol','substring','Up-left','/data/states/game.sav','canvas','objectStoreNames','_free','changedTouches','_emuRunFrame','contains','AudioContext','toDataURL','DOMContentLoaded','putImageData','touchstart','resume','FILE_DATA','click','identifier','546366IysDIk','openCursor','5QvvRCd','[id]','536748gmTlGv','target','subarray','HEAPU8','result','2327950CfpEhZ','readAsArrayBuffer','transaction','remove','saveStateButton','loadStateButton','elementFromPoint','appendChild','files','fromCharCode','_emuUpdateSavChangeFlag','Auto\x20saving...','getElementById','destination','1088161FXSFdM','split','readonly','continue','set','Select','3897992KpRTHz','src','addEventListener','running','/data/states/','getContext','objectStore','touchmove','createScriptProcessor','state','log','delete','_malloc','includes','buffer','outputBuffer','touchcancel','touchend','readwrite','onsuccess','toLowerCase'];a0_0x15a2=function(){return _0xd7605a;};return a0_0x15a2();}var audioFifo0=new Int16Array(AUDIO_FIFO_MAXLEN),audioFifo1=new Int16Array(AUDIO_FIFO_MAXLEN),romBuffer=-0x1,isRunning=![];const wasmSaveBufLen=0x20000+0x2000;var tmpSaveBuf=new Uint8Array(wasmSaveBufLen),audioFifoHead=0x0,audioFifoCnt=0x0,lastCheckedSaveState=0x0,muteMode=![],fastForwardMode=![];let vkState=0x0;var frameCnt=0x0;const fileInput=document[a0_0x332859(0x126)](a0_0x332859(0x149)),canvas=document[a0_0x332859(0x126)](a0_0x332859(0x163)),saveButton=document[a0_0x332859(0x126)](a0_0x332859(0x11e)),loadButton=document['getElementById'](a0_0x332859(0x11f));function a0_0x4381(_0x4d27a9,_0x5885a2){const _0x15a253=a0_0x15a2();return a0_0x4381=function(_0x438126,_0x429912){_0x438126=_0x438126-0x11d;let _0x5b1c46=_0x15a253[_0x438126];return _0x5b1c46;},a0_0x4381(_0x4d27a9,_0x5885a2);}function processAudio(_0x3b8e2f){const _0x15d1a1=a0_0x332859;var _0x599d92=_0x3b8e2f[_0x15d1a1(0x13d)],_0x2acb69=_0x599d92[_0x15d1a1(0x158)](0x0),_0x479055=_0x599d92['getChannelData'](0x1);if(!isRunning||fastForwardMode||muteMode){for(var _0x4e47e5=0x0;_0x4e47e5<AUDIO_BLOCK_SIZE;_0x4e47e5++){_0x2acb69[_0x4e47e5]=0x0,_0x479055[_0x4e47e5]=0x0;}return;}while(audioFifoCnt<AUDIO_BLOCK_SIZE){emuLoop();}var _0x438d0f=AUDIO_BLOCK_SIZE;audioFifoCnt<_0x438d0f&&(_0x438d0f=audioFifoCnt);for(var _0x4e47e5=0x0;_0x4e47e5<_0x438d0f;_0x4e47e5++){_0x2acb69[_0x4e47e5]=audioFifo0[audioFifoHead]/0x8000,_0x479055[_0x4e47e5]=audioFifo1[audioFifoHead]/0x8000,audioFifoHead=(audioFifoHead+0x1)%AUDIO_FIFO_MAXLEN,audioFifoCnt--;}}function tryInitSound(){const _0x2d0378=a0_0x332859;if(audioContext){audioContext[_0x2d0378(0x137)]!=_0x2d0378(0x131)&&audioContext[_0x2d0378(0x16e)]();return;}try{audioContext=new(window[(_0x2d0378(0x169))]||window[(_0x2d0378(0x153))])({'latencyHint':0.0001,'sampleRate':0xbb80}),scriptProcessor=audioContext[_0x2d0378(0x136)](AUDIO_BLOCK_SIZE,0x0,0x2),scriptProcessor['onaudioprocess']=processAudio,scriptProcessor['connect'](audioContext[_0x2d0378(0x127)]),audioContext['resume']();}catch(_0x381082){console[_0x2d0378(0x138)](_0x381082);}}function writeAudio(_0x2f463c,_0x7d4bd0){const _0x8a3d44=a0_0x332859;if(fastForwardMode)return;!wasmAudioBuf&&(wasmAudioBuf=new Int16Array(Module[_0x8a3d44(0x179)][_0x8a3d44(0x13c)])[_0x8a3d44(0x178)](_0x2f463c/0x2,_0x2f463c/0x2+0x800));var _0x32668a=(audioFifoHead+audioFifoCnt)%AUDIO_FIFO_MAXLEN;if(audioFifoCnt+_0x7d4bd0>=AUDIO_FIFO_MAXLEN)return;for(var _0x19fb50=0x0;_0x19fb50<_0x7d4bd0;_0x19fb50++){audioFifo0[_0x32668a]=wasmAudioBuf[_0x19fb50*0x2],audioFifo1[_0x32668a]=wasmAudioBuf[_0x19fb50*0x2+0x1],_0x32668a=(_0x32668a+0x1)%AUDIO_FIFO_MAXLEN;}audioFifoCnt+=_0x7d4bd0;}function wasmReady(){const _0x390b6b=a0_0x332859;romBuffer=Module['_emuGetSymbol'](0x1);var _0x3b4e4a=Module[_0x390b6b(0x15f)](0x2);wasmSaveBuf=Module['HEAPU8'][_0x390b6b(0x178)](_0x3b4e4a,_0x3b4e4a+wasmSaveBufLen),_0x3b4e4a=Module[_0x390b6b(0x15f)](0x3),imgFrameBuffer=new Uint8ClampedArray(Module[_0x390b6b(0x179)][_0x390b6b(0x13c)])[_0x390b6b(0x178)](_0x3b4e4a,_0x3b4e4a+0xf0*0xa0*0x4),idata=new ImageData(imgFrameBuffer,0xf0,0xa0);}function capture(){const _0x6caa07=a0_0x332859,_0x1d58e9=canvas[_0x6caa07(0x16a)]('image/png'),_0xf9ce3f=document[_0x6caa07(0x150)](_0x6caa07(0x14f));return _0xf9ce3f[_0x6caa07(0x12f)]=_0x1d58e9,document[_0x6caa07(0x15c)][_0x6caa07(0x121)](_0xf9ce3f),_0x1d58e9;}function emuLoop(){const _0x28ee80=a0_0x332859;isRunning&&(frameCnt++,frameCnt%0x78==0x0&&checkSave(),Module[_0x28ee80(0x167)](vkState),drawContext=canvas[_0x28ee80(0x133)]('2d'),drawContext[_0x28ee80(0x16c)](idata,0x0,0x0));}function loop(){emuLoop(),window['requestAnimationFrame'](loop);}function writeToIndexedDB(_0x11d0c1,_0x26debc){const _0x46ee98=a0_0x332859,_0x43b3bd=indexedDB['open'](_0x46ee98(0x157));_0x43b3bd[_0x46ee98(0x141)]=_0x47d82f=>{const _0x1259c4=_0x46ee98,_0x22be9f=_0x47d82f['target'][_0x1259c4(0x17a)],_0x405b41=_0x22be9f[_0x1259c4(0x17d)](_0x1259c4(0x16f),_0x1259c4(0x140)),_0xfaa45b=_0x405b41[_0x1259c4(0x134)](_0x1259c4(0x16f));_0xfaa45b[_0x1259c4(0x159)](_0x26debc,_0x11d0c1);};}function readFromIndexedDB(_0x2c340a){return new Promise(_0x3f9ec5=>{const _0x1a949d=a0_0x4381,_0x2b07d1=indexedDB[_0x1a949d(0x14c)](_0x1a949d(0x157));_0x2b07d1['onsuccess']=_0x2e6fef=>{const _0x973389=_0x1a949d,_0x5e20d8=_0x2e6fef[_0x973389(0x177)][_0x973389(0x17a)],_0x4be542=_0x5e20d8[_0x973389(0x17d)]('FILE_DATA',_0x973389(0x12a)),_0x4c9a5d=_0x4be542['objectStore']('FILE_DATA'),_0xf759f3=_0x4c9a5d['get'](_0x2c340a);_0xf759f3['onsuccess']=_0x5d83e2=>_0x3f9ec5(_0x5d83e2[_0x973389(0x177)]['result']);};});}function loadGameFromInput(){const _0x22e463=a0_0x332859;tryInitSound();var _0x271947=fileInput[_0x22e463(0x122)][0x0];romFileName=_0x271947[_0x22e463(0x151)];var _0x22c5c6=new FileReader();_0x22c5c6['onload']=function(_0x5b2184){const _0x9e0f95=_0x22e463;var _0x47bf76=_0x5b2184[_0x9e0f95(0x177)]['result'],_0x192e99=new Uint8Array(_0x47bf76);gameID='';for(var _0x5a3cc7=0xac;_0x5a3cc7<0xb2;_0x5a3cc7++){gameID+=String[_0x9e0f95(0x123)](_0x192e99[_0x5a3cc7]);}console[_0x9e0f95(0x138)](_0x9e0f95(0x145),gameID),Module[_0x9e0f95(0x179)][_0x9e0f95(0x12c)](_0x192e99,romBuffer),Module[_0x9e0f95(0x14a)](_0x192e99[_0x9e0f95(0x147)]),loadSave(),Module['_emuResetCpu']();},_0x22c5c6[_0x22e463(0x17c)](_0x271947);}async function loadSave(){const _0x4d18a0=a0_0x332859,_0xc8e2a7=await readFromIndexedDB(_0x4d18a0(0x162));_0xc8e2a7&&wasmSaveBuf[_0x4d18a0(0x12c)](_0xc8e2a7),Module[_0x4d18a0(0x156)](),lastCheckedSaveState=0x0,Module[_0x4d18a0(0x124)](),setTimeout(()=>{isRunning=!![];},0x1f4),console[_0x4d18a0(0x138)](_0x4d18a0(0x148));}function checkSave(){const _0x1465aa=a0_0x332859;if(!isRunning)return;const _0x44d461=Module['_emuUpdateSavChangeFlag']();lastCheckedSaveState===0x1&&_0x44d461===0x0&&(tmpSaveBuf[_0x1465aa(0x12c)](wasmSaveBuf),writeToIndexedDB(_0x1465aa(0x162),tmpSaveBuf)),lastCheckedSaveState=_0x44d461,console[_0x1465aa(0x138)](_0x1465aa(0x125));}const keyMask={'a':0x1,'b':0x2,'select':0x4,'start':0x8,'right':0x10,'left':0x20,'up':0x40,'down':0x80,'r':0x100,'l':0x200};function buttonPresss(_0x1aad4a){keyMask[_0x1aad4a]&&(vkState|=keyMask[_0x1aad4a],tryInitSound());}function buttonUnpresss(_0x22bed0){keyMask[_0x22bed0]&&(vkState&=~keyMask[_0x22bed0]);}function buttonPress(_0x185973,_0x21a1a5){const _0x489362=a0_0x332859;if(_0x185973['includes']('-')){const [_0x1d5bfa,_0x17eae0]=_0x185973['toLowerCase']()[_0x489362(0x129)]('-');_0x21a1a5?buttonPresss(_0x1d5bfa):buttonUnpresss(_0x1d5bfa),_0x21a1a5?buttonPresss(_0x17eae0):buttonUnpresss(_0x17eae0);}else _0x21a1a5?buttonPresss(_0x185973[_0x489362(0x142)]()):buttonUnpresss(_0x185973[_0x489362(0x142)]());}document['addEventListener'](a0_0x332859(0x16b),function(){const _0xc8247e=a0_0x332859;loop();const _0x16e780=['Up',_0xc8247e(0x155),'Left',_0xc8247e(0x15d),_0xc8247e(0x161),'Up-right',_0xc8247e(0x15e),'Down-right'],_0xf0a76d=['A','B',_0xc8247e(0x15a),_0xc8247e(0x12d),'L','R'];let _0x1da1ca=new Map(),_0x39e406=new Map();function _0x13393d(_0x67c88,_0x2cf5c7){const _0x42f7fb=_0xc8247e;if(!_0x67c88)return;buttonPress(_0x67c88,_0x2cf5c7);const _0x1c39a5=document[_0x42f7fb(0x126)](_0x67c88);_0x1c39a5&&(_0x2cf5c7?_0x1c39a5[_0x42f7fb(0x154)]['add']('touched'):_0x1c39a5[_0x42f7fb(0x154)][_0x42f7fb(0x11d)]('touched'));}function _0xfe12ed(_0x3636df){const _0x45c4ea=_0xc8247e,_0x531213=document[_0x45c4ea(0x120)](_0x3636df[_0x45c4ea(0x14e)],_0x3636df['clientY']),_0x356006=_0x531213?.['closest'](_0x45c4ea(0x175));return _0x356006?_0x356006['id']:null;}document['addEventListener'](_0xc8247e(0x16d),_0x42ffee=>{const _0x7f76ef=_0xc8247e;for(let _0x53be6c of _0x42ffee[_0x7f76ef(0x166)]){const _0x50cf47=_0xfe12ed(_0x53be6c);if(!_0x50cf47)continue;if(_0x16e780['includes'](_0x50cf47))_0x1da1ca['has'](_0x53be6c[_0x7f76ef(0x171)])&&_0x13393d(_0x1da1ca[_0x7f76ef(0x152)](_0x53be6c[_0x7f76ef(0x171)]),![]),_0x1da1ca['set'](_0x53be6c[_0x7f76ef(0x171)],_0x50cf47),_0x13393d(_0x50cf47,!![]);else _0xf0a76d[_0x7f76ef(0x13b)](_0x50cf47)&&(_0x39e406[_0x7f76ef(0x146)](_0x53be6c['identifier'])&&_0x13393d(_0x39e406[_0x7f76ef(0x152)](_0x53be6c[_0x7f76ef(0x171)]),![]),_0x39e406[_0x7f76ef(0x12c)](_0x53be6c[_0x7f76ef(0x171)],_0x50cf47),_0x13393d(_0x50cf47,!![]));}}),document['addEventListener'](_0xc8247e(0x135),_0x1a4240=>{const _0x1201d3=_0xc8247e;for(let _0x1a5d05 of _0x1a4240[_0x1201d3(0x166)]){const _0x3deb99=_0xfe12ed(_0x1a5d05);if(!_0x3deb99)continue;if(_0x16e780['includes'](_0x3deb99))_0x1da1ca[_0x1201d3(0x146)](_0x1a5d05[_0x1201d3(0x171)])&&_0x1da1ca[_0x1201d3(0x152)](_0x1a5d05[_0x1201d3(0x171)])!==_0x3deb99&&(_0x13393d(_0x1da1ca[_0x1201d3(0x152)](_0x1a5d05[_0x1201d3(0x171)]),![]),_0x1da1ca[_0x1201d3(0x12c)](_0x1a5d05[_0x1201d3(0x171)],_0x3deb99),_0x13393d(_0x3deb99,!![]));else _0xf0a76d[_0x1201d3(0x13b)](_0x3deb99)&&(_0x39e406[_0x1201d3(0x146)](_0x1a5d05['identifier'])&&_0x39e406[_0x1201d3(0x152)](_0x1a5d05['identifier'])!==_0x3deb99&&(_0x13393d(_0x39e406[_0x1201d3(0x152)](_0x1a5d05[_0x1201d3(0x171)]),![]),_0x39e406[_0x1201d3(0x12c)](_0x1a5d05[_0x1201d3(0x171)],_0x3deb99),_0x13393d(_0x3deb99,!![])));}}),document[_0xc8247e(0x130)](_0xc8247e(0x13f),_0x23174e=>{const _0x49352f=_0xc8247e;for(let _0xf77483 of _0x23174e['changedTouches']){_0x1da1ca['has'](_0xf77483['identifier'])&&(_0x13393d(_0x1da1ca[_0x49352f(0x152)](_0xf77483['identifier']),![]),_0x1da1ca[_0x49352f(0x139)](_0xf77483['identifier'])),_0x39e406[_0x49352f(0x146)](_0xf77483[_0x49352f(0x171)])&&(_0x13393d(_0x39e406[_0x49352f(0x152)](_0xf77483['identifier']),![]),_0x39e406[_0x49352f(0x139)](_0xf77483[_0x49352f(0x171)]));}}),document['addEventListener'](_0xc8247e(0x13e),_0x30f623=>{const _0xa3811c=_0xc8247e;for(let _0x5ba028 of _0x30f623['changedTouches']){_0x1da1ca['has'](_0x5ba028[_0xa3811c(0x171)])&&(_0x13393d(_0x1da1ca[_0xa3811c(0x152)](_0x5ba028[_0xa3811c(0x171)]),![]),_0x1da1ca['delete'](_0x5ba028[_0xa3811c(0x171)])),_0x39e406['has'](_0x5ba028[_0xa3811c(0x171)])&&(_0x13393d(_0x39e406['get'](_0x5ba028[_0xa3811c(0x171)]),![]),_0x39e406[_0xa3811c(0x139)](_0x5ba028[_0xa3811c(0x171)]));}});}),saveButton[a0_0x332859(0x130)](a0_0x332859(0x170),function(){const _0x33c84a=a0_0x332859,_0x4150bc=Module[_0x33c84a(0x13a)](0x1e8480),_0xbdb8f=Module['_emuSaveState'](_0x4150bc,0x1e8480),_0x4b0d8a=new Uint8Array(Module[_0x33c84a(0x179)][_0x33c84a(0x13c)],_0x4150bc,_0xbdb8f)['slice']();Module[_0x33c84a(0x165)](_0x4150bc),writeToIndexedDB(_0x33c84a(0x14b),_0x4b0d8a);}),loadButton['addEventListener'](a0_0x332859(0x170),async function(){const _0x4bfa3e=a0_0x332859,_0xc8fc53=await readFromIndexedDB(_0x4bfa3e(0x14b)),_0x201b66=_0xc8fc53[_0x4bfa3e(0x147)],_0x2eae57=Module[_0x4bfa3e(0x13a)](_0x201b66);Module[_0x4bfa3e(0x179)][_0x4bfa3e(0x12c)](_0xc8fc53,_0x2eae57),Module['_emuLoadState'](_0x2eae57,_0x201b66),Module[_0x4bfa3e(0x165)](_0x2eae57);});function loadfile(_0x27b3f8){const _0x329ac8=a0_0x332859,_0x5c53a1=indexedDB[_0x329ac8(0x14c)](_0x329ac8(0x157));_0x5c53a1[_0x329ac8(0x144)]=_0x52452a=>{const _0xb0307e=_0x329ac8,_0x4ffbd0=_0x52452a[_0xb0307e(0x177)][_0xb0307e(0x17a)];!_0x4ffbd0[_0xb0307e(0x164)][_0xb0307e(0x168)](_0xb0307e(0x16f))&&_0x4ffbd0['createObjectStore']('FILE_DATA');},indexedDB[_0x329ac8(0x14c)]('/data')[_0x329ac8(0x141)]=_0x1a30ef=>{const _0x2d0ece=_0x329ac8,_0x5a458b=_0x1a30ef[_0x2d0ece(0x177)]['result'],_0x5d5913=IDBKeyRange['bound'](_0x27b3f8,_0x27b3f8+'￿');_0x5a458b[_0x2d0ece(0x17d)](_0x2d0ece(0x16f),_0x2d0ece(0x12a))['objectStore'](_0x2d0ece(0x16f))[_0x2d0ece(0x173)](_0x5d5913)['onsuccess']=_0x27d3fb=>{const _0x1e9f46=_0x2d0ece,_0x6876db=_0x27d3fb['target'][_0x1e9f46(0x17a)];if(_0x6876db){const _0xc7123b=_0x6876db[_0x1e9f46(0x143)];console[_0x1e9f46(0x138)](_0xc7123b[_0x1e9f46(0x160)](_0xc7123b['lastIndexOf']('/')+0x1)),_0x6876db[_0x1e9f46(0x12b)]();}};};}loadfile(a0_0x332859(0x132));