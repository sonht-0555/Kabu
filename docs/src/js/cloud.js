var a0_0x3c6236=a0_0x5efc;(function(_0x353abb,_0x345bc6){var _0x4befaf=a0_0x5efc,_0xb63dab=_0x353abb();while(!![]){try{var _0x14857f=parseInt(_0x4befaf(0x19b))/0x1+parseInt(_0x4befaf(0x1ff))/0x2*(-parseInt(_0x4befaf(0x1a2))/0x3)+-parseInt(_0x4befaf(0x1bb))/0x4+parseInt(_0x4befaf(0x1b8))/0x5+-parseInt(_0x4befaf(0x1c3))/0x6*(-parseInt(_0x4befaf(0x1de))/0x7)+parseInt(_0x4befaf(0x1f2))/0x8*(-parseInt(_0x4befaf(0x1bf))/0x9)+-parseInt(_0x4befaf(0x19c))/0xa*(-parseInt(_0x4befaf(0x1d0))/0xb);if(_0x14857f===_0x345bc6)break;else _0xb63dab['push'](_0xb63dab['shift']());}catch(_0x39ef05){_0xb63dab['push'](_0xb63dab['shift']());}}}(a0_0x319b,0xe76f2));import*as a0_0x30930c from'./main.js';function a0_0x319b(){var _0x132cc5=['save','stringify','status','Restore\x20canceled\x20by\x20user.','accessToken','Content-Type','nwb3dnfh09rhs31','downloadFileInCloud','&client_secret=','128293NOiTPX','No\x20files\x20found\x20to\x20restore.','https://api.dropboxapi.com/2/files/list_folder','Restoring...','Error\x20while\x20refreshing\x20token:','charAt','overwrite','file','Unable\x20to\x20refresh\x20token','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','Wait\x20a\x20little\x20bit...','authorization_code','&client_id=','log','53011GINohN','access_token','application/octet-stream','list','https://www.dropbox.com/oauth2/authorize?client_id=','slice','https://content.dropboxapi.com/2/files/upload','Download\x20failed,\x20unknown\x20http\x20status:','https://api.dropboxapi.com/oauth2/token','\x20files\x20from\x20Cloud?','refreshToken','https://api.dropboxapi.com/2/files/create_folder_v2','offline','classList','=([^&#]*)','blob','replace','setItem','active','application/x-www-form-urlencoded','32BJVdYp','confirm','&grant_type=','code=','POST','split','entries','addEventListener','Do\x20you\x20want\x20to\x20backup\x20','open','json','refresh_token','location','34RfHPPy','search','error','Do\x20you\x20want\x20to\x20restore\x20','responseText','uId',',\x20status:\x20','alert','Kabu\x20storage\x20↦\x20Cloud\x20◆','1066025kjGqEv','30bGmGlP','https://api.dropbox.com/oauth2/token','Refreshing\x20token...','Authorization\x20Code:','&response_type=','getItem','79683CRIpvQ','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','map','remove','Error\x20creating\x20folder\x20','setRequestHeader','Upload\x20failed,\x20unknown\x20http\x20status:\x20','.tag','click','Bearer\x20','name','Do\x20you\x20want\x20to\x20logout?','&redirect_uri=','toUpperCase','error_description','refresh_token=','knh3uz2mx2hp2eu','Cloud\x20login\x20required!','href','exec','application/json','Failed\x20to\x20upload\x20file\x20','5037955iSnLqh','Download\x20failed\x20for\x20','parse','5655780GycZKt','length','code','screenshot','987057dyInSa','folder','Failed\x20to\x20refresh\x20Dropbox\x20token.','[\x5c?&#]','906tbloOV','&token_access_type=','/data/','state'];a0_0x319b=function(){return _0x132cc5;};return a0_0x319b();}import{localStorageFile}from'./storage.js';var clientId=a0_0x3c6236(0x1b2),clientSecret=a0_0x3c6236(0x1cd);function authorizeWithDropbox(){var _0x42f1b7=a0_0x3c6236,_0x583e77=window[_0x42f1b7(0x1fe)]['href'][_0x42f1b7(0x1f7)]('?')[0x0],_0x2e7a30=_0x42f1b7(0x1bd),_0x585c10=_0x42f1b7(0x1ea),_0x3de2ce=_0x42f1b7(0x1e2)+clientId+_0x42f1b7(0x1a0)+_0x2e7a30+_0x42f1b7(0x1c4)+_0x585c10+'&redirect_uri='+encodeURIComponent(_0x583e77);window[_0x42f1b7(0x1fe)][_0x42f1b7(0x1b4)]=_0x3de2ce;}function handleDropboxCallback(){var _0x1ac370=a0_0x3c6236,_0x5f199c=getUrlParameter(_0x1ac370(0x1bd));_0x5f199c?(getAccessToken(_0x5f199c),console[_0x1ac370(0x1dd)](_0x1ac370(0x19f),_0x5f199c)):console[_0x1ac370(0x1dd)]('Do\x20not\x20receive\x20authorization');}function getUrlParameter(_0x136472){var _0x6aa5b0=a0_0x3c6236;_0x136472=_0x136472['replace'](/[\[]/,'\x5c[')[_0x6aa5b0(0x1ee)](/[\]]/,'\x5c]');var _0x2b362c=new RegExp(_0x6aa5b0(0x1c2)+_0x136472+_0x6aa5b0(0x1ec)),_0x24028a=_0x2b362c[_0x6aa5b0(0x1b5)](location[_0x6aa5b0(0x200)]);return _0x24028a===null?'':decodeURIComponent(_0x24028a[0x1][_0x6aa5b0(0x1ee)](/\+/g,'\x20'));}function getAccessToken(_0x49a7b5){var _0x19ac19=a0_0x3c6236,_0x5cdac2=_0x19ac19(0x1db),_0xf8ed2f=window[_0x19ac19(0x1fe)][_0x19ac19(0x1b4)][_0x19ac19(0x1f7)]('?')[0x0],_0x57d2a2=new XMLHttpRequest();_0x57d2a2[_0x19ac19(0x1fb)](_0x19ac19(0x1f6),_0x19ac19(0x19d)),_0x57d2a2[_0x19ac19(0x1a7)](_0x19ac19(0x1cc),_0x19ac19(0x1f1)),_0x57d2a2['onload']=function(){var _0x9aac7d=_0x19ac19;if(_0x57d2a2[_0x9aac7d(0x1c9)]===0xc8){var _0x1e4d2f=JSON[_0x9aac7d(0x1ba)](_0x57d2a2[_0x9aac7d(0x196)]),_0x82732f=_0x1e4d2f[_0x9aac7d(0x1df)],_0x1057a2=_0x1e4d2f[_0x9aac7d(0x1fd)],_0xd2753c=_0x1e4d2f['uid'];localStorage[_0x9aac7d(0x1ef)](_0x9aac7d(0x1cb),_0x82732f),localStorage[_0x9aac7d(0x1ef)](_0x9aac7d(0x1e8),_0x1057a2),localStorage[_0x9aac7d(0x1ef)](_0x9aac7d(0x197),_0xd2753c);}else console[_0x9aac7d(0x1dd)](_0x9aac7d(0x1d9));},_0x57d2a2['send'](_0x19ac19(0x1f5)+_0x49a7b5+_0x19ac19(0x1f4)+_0x5cdac2+_0x19ac19(0x1dc)+clientId+_0x19ac19(0x1cf)+clientSecret+_0x19ac19(0x1ae)+encodeURIComponent(_0xf8ed2f));}export async function dpCreateFolder(_0x388a7f){var _0x24a1f3=a0_0x3c6236;const _0x71bc99=localStorage[_0x24a1f3(0x1a1)](_0x24a1f3(0x197));let _0x22453e=localStorage[_0x24a1f3(0x1a1)]('accessToken');const _0x587e45='/'+_0x71bc99+'/'+_0x388a7f,_0x2dfde1=JSON[_0x24a1f3(0x1c8)]({'path':_0x587e45,'autorename':![]});for(let _0x8fdff=0x0;_0x8fdff<0x2;_0x8fdff++){try{const _0x14c55d=await fetch(_0x24a1f3(0x1e9),{'method':'POST','headers':{'Authorization':_0x24a1f3(0x1ab)+_0x22453e,'Content-Type':_0x24a1f3(0x1b6)},'body':_0x2dfde1});if(_0x14c55d['status']===0x191){const _0x1006c4=await dpRefreshToken();if(!_0x1006c4)throw new Error(_0x24a1f3(0x1d8));_0x22453e=localStorage[_0x24a1f3(0x1a1)](_0x24a1f3(0x1cb));continue;}if(_0x14c55d[_0x24a1f3(0x1c9)]===0x199)return{'message':'Folder\x20already\x20exists','path':_0x388a7f};if(!_0x14c55d['ok'])throw new Error(_0x24a1f3(0x1a6)+_0x388a7f);const _0x2adff6=await _0x14c55d['json']();return await lockNoti('Folder\x20created','',0xbb8),_0x2adff6;}catch(_0x5dca49){if(_0x8fdff===0x1)throw _0x5dca49;}}return![];}export async function dpRefreshToken(){var _0x1e4046=a0_0x3c6236;if(!localStorage[_0x1e4046(0x1a1)]('refreshToken'))throw'No\x20refresh\x20token';try{const _0x206172=await fetch(_0x1e4046(0x1e6),{'method':'POST','headers':{'Content-Type':_0x1e4046(0x1f1)},'body':_0x1e4046(0x1b1)+localStorage[_0x1e4046(0x1a1)]('refreshToken')+_0x1e4046(0x1a3)}),_0xd1eab0=await _0x206172[_0x1e4046(0x1fc)]();if(!_0xd1eab0[_0x1e4046(0x201)])return localStorage['setItem'](_0x1e4046(0x1cb),_0xd1eab0[_0x1e4046(0x1df)]),await lockNoti(_0x1e4046(0x19e),'',0xbb8),await delay(0x3e8),!![];else alert(_0xd1eab0[_0x1e4046(0x1b0)]||_0x1e4046(0x1c1));}catch(_0x362f30){console['error'](_0x1e4046(0x1d4),_0x362f30);}return![];}export async function dpUploadFile(_0x186790,_0x33522a,_0x415102){var _0x104f26=a0_0x3c6236;const _0x3e9aac=localStorage[_0x104f26(0x1a1)](_0x104f26(0x197));var _0x543c09=JSON[_0x104f26(0x1c8)]({'autorename':!![],'mode':_0x104f26(0x1d6),'mute':!![],'strict_conflict':![],'path':'/'+_0x3e9aac+'/'+_0x415102+'/'+_0x186790}),_0x33277b=new Blob([_0x33522a],{'type':_0x104f26(0x1e0)});for(var _0x1de60b=0x0;_0x1de60b<0x2;_0x1de60b++){var _0x34286c=await fetch(_0x104f26(0x1e4),{'method':'POST','headers':{'Authorization':_0x104f26(0x1ab)+localStorage['getItem'](_0x104f26(0x1cb)),'Dropbox-API-Arg':_0x543c09,'Content-Type':'application/octet-stream'},'body':_0x33277b});if(_0x34286c[_0x104f26(0x1c9)]!=0xc8){if(_0x34286c[_0x104f26(0x1c9)]==0x191){var _0x484016=await dpRefreshToken();if(!_0x484016)throw _0x104f26(0x1d8);continue;}else throw _0x104f26(0x1a8)+_0x34286c[_0x104f26(0x1c9)];}else{var _0x43ef5a=await _0x34286c[_0x104f26(0x1fc)]();return console[_0x104f26(0x1dd)](_0x104f26(0x19a),_0x186790),_0x43ef5a;}}return![];}function a0_0x5efc(_0x23ddf5,_0x535fb0){var _0x319bfd=a0_0x319b();return a0_0x5efc=function(_0x5efcf6,_0x14e59a){_0x5efcf6=_0x5efcf6-0x195;var _0x3aa7fd=_0x319bfd[_0x5efcf6];return _0x3aa7fd;},a0_0x5efc(_0x23ddf5,_0x535fb0);}export async function dpDownloadFile(_0x2b0f73,_0x1ab9b4){var _0x526928=a0_0x3c6236;const _0x116420=localStorage['getItem'](_0x526928(0x197));var _0x283458=JSON['stringify']({'path':'/'+_0x116420+'/'+_0x1ab9b4+'/'+_0x2b0f73});for(var _0x51fd58=0x0;_0x51fd58<0x2;_0x51fd58++){var _0x5692c7=await fetch('https://content.dropboxapi.com/2/files/download',{'method':'POST','headers':{'Authorization':_0x526928(0x1ab)+localStorage[_0x526928(0x1a1)]('accessToken'),'Dropbox-API-Arg':_0x283458}});if(_0x5692c7[_0x526928(0x1c9)]!=0xc8){if(_0x5692c7[_0x526928(0x1c9)]==0x191){var _0xcce30d=await dpRefreshToken();if(!_0xcce30d)throw _0x526928(0x1d8);continue;}else throw _0x526928(0x1e5)+_0x5692c7[_0x526928(0x1c9)];}const _0x381937=new File([await _0x5692c7[_0x526928(0x1ed)]()],_0x2b0f73);return console[_0x526928(0x1dd)]('Cloud\x20↦\x20Kabu\x20storage\x20◆',_0x381937[_0x526928(0x1ac)]),a0_0x30930c['uploadFileInCloud'](_0x381937,()=>{}),_0x381937;}return![];}document[a0_0x3c6236(0x1f9)]('DOMContentLoaded',function(){var _0xca6621=a0_0x3c6236;dropboxRestore['addEventListener'](_0xca6621(0x1aa),async function(){var _0x5e743c=_0xca6621;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x55c107=localStorage[_0x5e743c(0x1a1)]('uId'),_0x200db1=[_0x5e743c(0x1c6),_0x5e743c(0x1c7),_0x5e743c(0x1be)];if(!_0x55c107){window[_0x5e743c(0x199)]('Cloud\x20login\x20required!');return;}let _0x4d0b83=[];for(const _0x13b62a of _0x200db1){let _0x572acd={'path':'/'+_0x55c107+'/'+_0x13b62a};for(let _0x6bd114=0x0;_0x6bd114<0x2;_0x6bd114++){let _0x11ad62=await fetch(_0x5e743c(0x1d2),{'method':_0x5e743c(0x1f6),'headers':{'Authorization':_0x5e743c(0x1ab)+localStorage[_0x5e743c(0x1a1)](_0x5e743c(0x1cb)),'Content-Type':_0x5e743c(0x1b6)},'body':JSON[_0x5e743c(0x1c8)](_0x572acd)});if(_0x11ad62[_0x5e743c(0x1c9)]===0xc8){let _0x57ed7c=await _0x11ad62[_0x5e743c(0x1fc)](),_0x587e95=_0x57ed7c[_0x5e743c(0x1f8)]['filter'](_0x98ca82=>_0x98ca82[_0x5e743c(0x1a9)]===_0x5e743c(0x1d7));_0x587e95[_0x5e743c(0x1bc)]>0x0&&_0x4d0b83['push'](..._0x587e95[_0x5e743c(0x1a4)](_0x36ba7d=>({'name':_0x36ba7d[_0x5e743c(0x1ac)],'folder':_0x13b62a})));break;}else{if(_0x11ad62[_0x5e743c(0x1c9)]===0x191){let _0x20651a=await dpRefreshToken();if(!_0x20651a)throw _0x5e743c(0x1d8);}else{console[_0x5e743c(0x201)](_0x5e743c(0x1b9)+_0x13b62a+_0x5e743c(0x198)+_0x11ad62[_0x5e743c(0x1c9)]);break;}}}}if(_0x4d0b83['length']>0x0){const _0x4eddfb=_0x5e743c(0x195)+_0x4d0b83[_0x5e743c(0x1bc)]+_0x5e743c(0x1e7);if(window[_0x5e743c(0x1f3)](_0x4eddfb))for(const _0x1de74a of _0x4d0b83){await lockNoti(_0x5e743c(0x1d3),_0x1de74a['name'],0xbb8),await dpDownloadFile(_0x1de74a[_0x5e743c(0x1ac)],_0x1de74a[_0x5e743c(0x1c0)]);}else console['log'](_0x5e743c(0x1ca));}else console[_0x5e743c(0x1dd)](_0x5e743c(0x1d1));}),dropboxBackup[_0xca6621(0x1f9)]('click',async function(){var _0x5dd54b=_0xca6621;await lockNoti(_0x5dd54b(0x1da),'',0x1388);const _0x52c922=localStorage['getItem'](_0x5dd54b(0x197));if(_0x52c922===null||_0x52c922==='')window[_0x5dd54b(0x199)](_0x5dd54b(0x1b3));else{const _0x45a56c=['state','save',_0x5dd54b(0x1be)];for(const _0x22669c of _0x45a56c){await dpCreateFolder(_0x22669c);}let _0x654008=0x0;for(const _0x1c73a9 of _0x45a56c){const _0x365b1d=a0_0x30930c[_0x5dd54b(0x1e1)+(_0x1c73a9[_0x5dd54b(0x1d5)](0x0)[_0x5dd54b(0x1af)]()+_0x1c73a9[_0x5dd54b(0x1e3)](0x1))]();_0x654008+=_0x365b1d[_0x5dd54b(0x1bc)];}if(window[_0x5dd54b(0x1f3)](_0x5dd54b(0x1fa)+_0x654008+'\x20files\x20in\x20Kabu?'))for(const _0x48494f of _0x45a56c){const _0x5cf951=a0_0x30930c[_0x5dd54b(0x1e1)+(_0x48494f['charAt'](0x0)[_0x5dd54b(0x1af)]()+_0x48494f[_0x5dd54b(0x1e3)](0x1))]();for(const _0x439410 of _0x5cf951){const _0x451a74=await a0_0x30930c[_0x5dd54b(0x1ce)](_0x5dd54b(0x1c5)+_0x48494f+'s/'+_0x439410);try{await lockNoti('Backing\x20up...',_0x439410,0xbb8),await dpUploadFile(_0x439410,_0x451a74,_0x48494f);}catch(_0x82d346){console[_0x5dd54b(0x201)](_0x5dd54b(0x1b7)+_0x439410+':',_0x82d346);}}}else console[_0x5dd54b(0x1dd)](_0x5dd54b(0x1ca));}}),dropboxCloud['addEventListener']('click',function(){var _0x4b773c=_0xca6621;const _0x4d4db9=localStorage['getItem'](_0x4b773c(0x197));_0x4d4db9===null||_0x4d4db9===''?authorizeWithDropbox():window['confirm'](_0x4b773c(0x1ad))&&(localStorage['setItem'](_0x4b773c(0x197),''),dropboxRestore[_0x4b773c(0x1eb)][_0x4b773c(0x1a5)]('active'),dropboxBackup[_0x4b773c(0x1eb)]['remove'](_0x4b773c(0x1f0)),dropboxCloud[_0x4b773c(0x1eb)][_0x4b773c(0x1a5)]('active'));}),handleDropboxCallback();});