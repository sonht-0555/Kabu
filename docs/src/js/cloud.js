var a0_0x3f5dcb=a0_0x255d;(function(_0x8b3340,_0x2c54e9){var _0x5ceaff=a0_0x255d,_0x262736=_0x8b3340();while(!![]){try{var _0x543d53=-parseInt(_0x5ceaff(0xec))/0x1+parseInt(_0x5ceaff(0x101))/0x2+parseInt(_0x5ceaff(0x137))/0x3+parseInt(_0x5ceaff(0x12b))/0x4*(-parseInt(_0x5ceaff(0x12c))/0x5)+-parseInt(_0x5ceaff(0x111))/0x6*(-parseInt(_0x5ceaff(0x148))/0x7)+parseInt(_0x5ceaff(0x107))/0x8*(parseInt(_0x5ceaff(0xf6))/0x9)+-parseInt(_0x5ceaff(0x140))/0xa*(parseInt(_0x5ceaff(0xee))/0xb);if(_0x543d53===_0x2c54e9)break;else _0x262736['push'](_0x262736['shift']());}catch(_0x4cdd48){_0x262736['push'](_0x262736['shift']());}}}(a0_0x2524,0x2c504));import*as a0_0x44aa9a from'./main.js';import{localStorageFile}from'./storage.js';function a0_0x255d(_0x5de27a,_0x37b1cb){var _0x25241b=a0_0x2524();return a0_0x255d=function(_0x255dba,_0x2882c4){_0x255dba=_0x255dba-0xea;var _0x58e953=_0x25241b[_0x255dba];return _0x58e953;},a0_0x255d(_0x5de27a,_0x37b1cb);}function a0_0x2524(){var _0x1813a3=['knh3uz2mx2hp2eu','listFiles','map','No\x20refresh\x20token','DOMContentLoaded','3177730EGBjlp','application/x-www-form-urlencoded','Do\x20not\x20receive\x20authorization','Cloud\x20login\x20required!','accessToken','setRequestHeader','Do\x20you\x20want\x20to\x20restore\x20','Folder\x20created','14mHXWQC','setItem','Error\x20while\x20refreshing\x20token:','[\x5c?&#]','Error\x20creating\x20folder\x20','POST','No\x20files\x20found\x20to\x20restore.','refresh_token','341421LsdDJl','Backing\x20up...','11wkeZWo','remove','/data/','https://www.dropbox.com/oauth2/authorize?client_id=',',\x20status:\x20','save','Failed\x20to\x20upload\x20file\x20','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','2818350qKuFUv','uId','Wait\x20a\x20little\x20bit...','log','\x20files\x20from\x20Cloud?','screenshot','split','Do\x20you\x20want\x20to\x20backup\x20','Download\x20failed,\x20unknown\x20http\x20status:','Upload\x20failed,\x20unknown\x20http\x20status:\x20','confirm','622390sdhZEL','json','Failed\x20to\x20refresh\x20Dropbox\x20token.','classList','refreshToken','onload','8QvAKES','&client_secret=','code','Refreshing\x20token...','alert','https://api.dropboxapi.com/2/files/list_folder','push','access_token','href','error','389106WLxsQx','.tag','file','send','state','click','open','https://api.dropboxapi.com/2/files/create_folder_v2','&client_id=','Restoring...','parse','getItem','status','downloadFileInCloud','https://api.dropbox.com/oauth2/token','Restore\x20canceled\x20by\x20user.','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','Kabu\x20storage\x20↦\x20Cloud\x20◆','nwb3dnfh09rhs31','name','\x20files\x20in\x20Kabu?','https://api.dropboxapi.com/oauth2/token','https://content.dropboxapi.com/2/files/upload','responseText','&redirect_uri=','entries','48QHLtFU','114670sNrEdl','search','Unable\x20to\x20refresh\x20token','addEventListener','length','replace','Authorization\x20Code:','application/json','stringify','active','refresh_token=','1085589ZTKNok','Content-Type','https://content.dropboxapi.com/2/files/download','location'];a0_0x2524=function(){return _0x1813a3;};return a0_0x2524();}var clientId=a0_0x3f5dcb(0x13b),clientSecret=a0_0x3f5dcb(0x123);function authorizeWithDropbox(){var _0x598f2d=a0_0x3f5dcb,_0x697bef=window['location'][_0x598f2d(0x10f)][_0x598f2d(0xfc)]('?')[0x0],_0xf27345=_0x598f2d(0x109),_0x448135='offline',_0x578e0d=_0x598f2d(0xf1)+clientId+'&response_type='+_0xf27345+'&token_access_type='+_0x448135+'&redirect_uri='+encodeURIComponent(_0x697bef);window[_0x598f2d(0x13a)][_0x598f2d(0x10f)]=_0x578e0d;}function handleDropboxCallback(){var _0x411670=a0_0x3f5dcb,_0x4d4046=getUrlParameter('code');_0x4d4046?(getAccessToken(_0x4d4046),console[_0x411670(0xf9)](_0x411670(0x132),_0x4d4046)):console[_0x411670(0xf9)](_0x411670(0x142));}function getUrlParameter(_0x438ac8){var _0x2728fc=a0_0x3f5dcb;_0x438ac8=_0x438ac8[_0x2728fc(0x131)](/[\[]/,'\x5c[')['replace'](/[\]]/,'\x5c]');var _0x576850=new RegExp(_0x2728fc(0x14b)+_0x438ac8+'=([^&#]*)'),_0x2def4d=_0x576850['exec'](location[_0x2728fc(0x12d)]);return _0x2def4d===null?'':decodeURIComponent(_0x2def4d[0x1][_0x2728fc(0x131)](/\+/g,'\x20'));}function getAccessToken(_0x2d2cee){var _0x2c2975=a0_0x3f5dcb,_0x3b0ccd='authorization_code',_0x186d9c=window[_0x2c2975(0x13a)]['href'][_0x2c2975(0xfc)]('?')[0x0],_0x2cebcb=new XMLHttpRequest();_0x2cebcb[_0x2c2975(0x117)]('POST',_0x2c2975(0x11f)),_0x2cebcb[_0x2c2975(0x145)](_0x2c2975(0x138),'application/x-www-form-urlencoded'),_0x2cebcb[_0x2c2975(0x106)]=function(){var _0x45d754=_0x2c2975;if(_0x2cebcb[_0x45d754(0x11d)]===0xc8){var _0xe63ac5=JSON[_0x45d754(0x11b)](_0x2cebcb[_0x45d754(0x128)]),_0x47cd18=_0xe63ac5[_0x45d754(0x10e)],_0x1b1175=_0xe63ac5[_0x45d754(0xeb)],_0x2d4a52=_0xe63ac5['uid'];localStorage[_0x45d754(0x149)](_0x45d754(0x144),_0x47cd18),localStorage[_0x45d754(0x149)](_0x45d754(0x105),_0x1b1175),localStorage[_0x45d754(0x149)](_0x45d754(0xf7),_0x2d4a52);}else console[_0x45d754(0xf9)](_0x45d754(0x121));},_0x2cebcb[_0x2c2975(0x114)]('code='+_0x2d2cee+'&grant_type='+_0x3b0ccd+_0x2c2975(0x119)+clientId+_0x2c2975(0x108)+clientSecret+_0x2c2975(0x129)+encodeURIComponent(_0x186d9c));}export async function dpCreateFolder(_0x58e37f){var _0x29f57f=a0_0x3f5dcb;const _0x1eeb0c=localStorage[_0x29f57f(0x11c)](_0x29f57f(0xf7));let _0x3110dd=localStorage[_0x29f57f(0x11c)]('accessToken');const _0x280a78='/'+_0x1eeb0c+'/'+_0x58e37f,_0x3a1715=JSON['stringify']({'path':_0x280a78,'autorename':![]});for(let _0xc56025=0x0;_0xc56025<0x2;_0xc56025++){try{const _0x497631=await fetch(_0x29f57f(0x118),{'method':'POST','headers':{'Authorization':'Bearer\x20'+_0x3110dd,'Content-Type':_0x29f57f(0x133)},'body':_0x3a1715});if(_0x497631[_0x29f57f(0x11d)]===0x191){const _0x586cb5=await dpRefreshToken();if(!_0x586cb5)throw new Error('Unable\x20to\x20refresh\x20token');_0x3110dd=localStorage[_0x29f57f(0x11c)](_0x29f57f(0x144));continue;}if(_0x497631['status']===0x199)return{'message':'Folder\x20already\x20exists','path':_0x58e37f};if(!_0x497631['ok'])throw new Error(_0x29f57f(0x14c)+_0x58e37f);const _0x22e45c=await _0x497631[_0x29f57f(0x102)]();return await lockNoti(_0x29f57f(0x147),'',0xbb8),_0x22e45c;}catch(_0x551994){if(_0xc56025===0x1)throw _0x551994;}}return![];}export async function dpRefreshToken(){var _0xc04c06=a0_0x3f5dcb;if(!localStorage[_0xc04c06(0x11c)](_0xc04c06(0x105)))throw _0xc04c06(0x13e);try{const _0x455c9d=await fetch(_0xc04c06(0x126),{'method':'POST','headers':{'Content-Type':_0xc04c06(0x141)},'body':_0xc04c06(0x136)+localStorage['getItem'](_0xc04c06(0x105))+_0xc04c06(0xf5)}),_0x1e5a76=await _0x455c9d['json']();if(!_0x1e5a76[_0xc04c06(0x110)])return localStorage[_0xc04c06(0x149)](_0xc04c06(0x144),_0x1e5a76['access_token']),await lockNoti(_0xc04c06(0x10a),'',0xbb8),await delay(0x3e8),!![];else alert(_0x1e5a76['error_description']||_0xc04c06(0x103));}catch(_0x13f0b8){console[_0xc04c06(0x110)](_0xc04c06(0x14a),_0x13f0b8);}return![];}export async function dpUploadFile(_0x566800,_0x45eed2,_0x5b32e5){var _0x2749e3=a0_0x3f5dcb;const _0xdf9d29=localStorage[_0x2749e3(0x11c)](_0x2749e3(0xf7));var _0x343c3a=JSON['stringify']({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0xdf9d29+'/'+_0x5b32e5+'/'+_0x566800}),_0x59a95a=new Blob([_0x45eed2],{'type':'application/octet-stream'});for(var _0x3f542b=0x0;_0x3f542b<0x2;_0x3f542b++){var _0x18a07b=await fetch(_0x2749e3(0x127),{'method':_0x2749e3(0x14d),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x2749e3(0x11c)]('accessToken'),'Dropbox-API-Arg':_0x343c3a,'Content-Type':'application/octet-stream'},'body':_0x59a95a});if(_0x18a07b[_0x2749e3(0x11d)]!=0xc8){if(_0x18a07b[_0x2749e3(0x11d)]==0x191){var _0x469f8c=await dpRefreshToken();if(!_0x469f8c)throw _0x2749e3(0x12e);continue;}else throw _0x2749e3(0xff)+_0x18a07b[_0x2749e3(0x11d)];}else{var _0x11c314=await _0x18a07b[_0x2749e3(0x102)]();return console[_0x2749e3(0xf9)](_0x2749e3(0x122),_0x566800),_0x11c314;}}return![];}export async function dpDownloadFile(_0x52ea4f,_0xdcf252){var _0x232990=a0_0x3f5dcb;const _0x14abc1=localStorage[_0x232990(0x11c)](_0x232990(0xf7));var _0x351dab=JSON[_0x232990(0x134)]({'path':'/'+_0x14abc1+'/'+_0xdcf252+'/'+_0x52ea4f});for(var _0x591895=0x0;_0x591895<0x2;_0x591895++){var _0x14211c=await fetch(_0x232990(0x139),{'method':_0x232990(0x14d),'headers':{'Authorization':'Bearer\x20'+localStorage['getItem']('accessToken'),'Dropbox-API-Arg':_0x351dab}});if(_0x14211c['status']!=0xc8){if(_0x14211c['status']==0x191){var _0x2d0f5b=await dpRefreshToken();if(!_0x2d0f5b)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x232990(0xfe)+_0x14211c[_0x232990(0x11d)];}const _0x58db9c=new File([await _0x14211c['blob']()],_0x52ea4f);return console[_0x232990(0xf9)]('Cloud\x20↦\x20Kabu\x20storage\x20◆',_0x58db9c[_0x232990(0x124)]),a0_0x44aa9a['uploadFileInCloud'](_0x58db9c,()=>{}),_0x58db9c;}return![];}document['addEventListener'](a0_0x3f5dcb(0x13f),function(){var _0x349e29=a0_0x3f5dcb;dropboxRestore[_0x349e29(0x12f)](_0x349e29(0x116),async function(){var _0x59d09b=_0x349e29;await lockNoti(_0x59d09b(0xf8),'',0x1388);const _0x56cf45=localStorage[_0x59d09b(0x11c)](_0x59d09b(0xf7)),_0x260c3a=[_0x59d09b(0x115),_0x59d09b(0xf3),_0x59d09b(0xfb)];if(!_0x56cf45){window[_0x59d09b(0x10b)](_0x59d09b(0x143));return;}let _0x5c8a24=[];for(const _0x49d4c6 of _0x260c3a){let _0x227fc4={'path':'/'+_0x56cf45+'/'+_0x49d4c6};for(let _0x49e177=0x0;_0x49e177<0x2;_0x49e177++){let _0x178dfc=await fetch(_0x59d09b(0x10c),{'method':_0x59d09b(0x14d),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x59d09b(0x11c)]('accessToken'),'Content-Type':_0x59d09b(0x133)},'body':JSON['stringify'](_0x227fc4)});if(_0x178dfc[_0x59d09b(0x11d)]===0xc8){let _0x27804c=await _0x178dfc[_0x59d09b(0x102)](),_0x317d14=_0x27804c[_0x59d09b(0x12a)]['filter'](_0x4ef0d9=>_0x4ef0d9[_0x59d09b(0x112)]===_0x59d09b(0x113));_0x317d14[_0x59d09b(0x130)]>0x0&&_0x5c8a24[_0x59d09b(0x10d)](..._0x317d14[_0x59d09b(0x13d)](_0x2afcc7=>({'name':_0x2afcc7[_0x59d09b(0x124)],'folder':_0x49d4c6})));break;}else{if(_0x178dfc['status']===0x191){let _0x5e2112=await dpRefreshToken();if(!_0x5e2112)throw'Unable\x20to\x20refresh\x20token';}else{console[_0x59d09b(0x110)]('Download\x20failed\x20for\x20'+_0x49d4c6+_0x59d09b(0xf2)+_0x178dfc[_0x59d09b(0x11d)]);break;}}}}if(_0x5c8a24[_0x59d09b(0x130)]>0x0){const _0x540872=_0x59d09b(0x146)+_0x5c8a24[_0x59d09b(0x130)]+_0x59d09b(0xfa);if(window[_0x59d09b(0x100)](_0x540872))for(const _0xc8b3e3 of _0x5c8a24){await lockNoti(_0x59d09b(0x11a),_0xc8b3e3['name'],0xbb8),await dpDownloadFile(_0xc8b3e3[_0x59d09b(0x124)],_0xc8b3e3['folder']);}else console['log'](_0x59d09b(0x120));}else console[_0x59d09b(0xf9)](_0x59d09b(0xea));}),dropboxBackup['addEventListener'](_0x349e29(0x116),async function(){var _0x40b521=_0x349e29;await lockNoti(_0x40b521(0xf8),'',0x1388);const _0x4f9b14=localStorage[_0x40b521(0x11c)](_0x40b521(0xf7));if(_0x4f9b14===null||_0x4f9b14==='')window[_0x40b521(0x10b)](_0x40b521(0x143));else{const _0x435f5d=[_0x40b521(0x115),_0x40b521(0xf3),'screenshot'];for(const _0x19c8bf of _0x435f5d){await dpCreateFolder(_0x19c8bf);}let _0x17c695=0x0;for(const _0x31a104 of _0x435f5d){const _0x577f40=a0_0x44aa9a['listFiles'](_0x31a104+'s');_0x17c695+=_0x577f40['length'];}if(window[_0x40b521(0x100)](_0x40b521(0xfd)+_0x17c695+_0x40b521(0x125)))for(const _0x5cefce of _0x435f5d){const _0x32bafd=a0_0x44aa9a[_0x40b521(0x13c)](_0x5cefce+'s');for(const _0x39c1c1 of _0x32bafd){const _0x183160=await a0_0x44aa9a[_0x40b521(0x11e)](_0x40b521(0xf0)+_0x5cefce+'s/'+_0x39c1c1);try{await lockNoti(_0x40b521(0xed),_0x39c1c1,0xbb8),await dpUploadFile(_0x39c1c1,_0x183160,_0x5cefce);}catch(_0x52e636){console[_0x40b521(0x110)](_0x40b521(0xf4)+_0x39c1c1+':',_0x52e636);}}}else console[_0x40b521(0xf9)](_0x40b521(0x120));}}),dropboxCloud[_0x349e29(0x12f)](_0x349e29(0x116),function(){var _0xa868eb=_0x349e29;const _0x27baa2=localStorage['getItem'](_0xa868eb(0xf7));_0x27baa2===null||_0x27baa2===''?authorizeWithDropbox():window[_0xa868eb(0x100)]('Do\x20you\x20want\x20to\x20logout?')&&(localStorage[_0xa868eb(0x149)](_0xa868eb(0xf7),''),dropboxRestore[_0xa868eb(0x104)][_0xa868eb(0xef)](_0xa868eb(0x135)),dropboxBackup[_0xa868eb(0x104)][_0xa868eb(0xef)](_0xa868eb(0x135)),dropboxCloud['classList'][_0xa868eb(0xef)](_0xa868eb(0x135)));}),handleDropboxCallback();});