var a0_0x1eeae0=a0_0x527f;(function(_0x4dcc49,_0x8b4b52){var _0xdc3a24=a0_0x527f,_0x21fe77=_0x4dcc49();while(!![]){try{var _0x382869=parseInt(_0xdc3a24(0xee))/0x1*(-parseInt(_0xdc3a24(0x13d))/0x2)+-parseInt(_0xdc3a24(0xf8))/0x3*(-parseInt(_0xdc3a24(0x138))/0x4)+-parseInt(_0xdc3a24(0xff))/0x5+parseInt(_0xdc3a24(0x129))/0x6+-parseInt(_0xdc3a24(0xf9))/0x7*(-parseInt(_0xdc3a24(0xeb))/0x8)+-parseInt(_0xdc3a24(0xe1))/0x9+-parseInt(_0xdc3a24(0x102))/0xa*(parseInt(_0xdc3a24(0x115))/0xb);if(_0x382869===_0x8b4b52)break;else _0x21fe77['push'](_0x21fe77['shift']());}catch(_0x49903d){_0x21fe77['push'](_0x21fe77['shift']());}}}(a0_0x309b,0xa81c4));function a0_0x527f(_0xc189be,_0x3550ff){var _0x309bf0=a0_0x309b();return a0_0x527f=function(_0x527fea,_0x135dfb){_0x527fea=_0x527fea-0xe0;var _0x221fde=_0x309bf0[_0x527fea];return _0x221fde;},a0_0x527f(_0xc189be,_0x3550ff);}import*as a0_0x4a36aa from'./main.js';function a0_0x309b(){var _0x13e18a=['POST','alert','&token_access_type=','[\x5c?&#]','error','map','552ajImHc','Refreshing\x20token...','refresh_token=','100262PpWcut','href','downloadFileInCloud','active','https://api.dropboxapi.com/oauth2/token','listFiles','code','&redirect_uri=','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','file','20433iFtFyP','128093HfHaNZ','split','Do\x20you\x20want\x20to\x20backup\x20','classList','json','parse','1032100uzMInD','location','Failed\x20to\x20upload\x20file\x20','10cAWIGU','Kabu\x20storage\x20↦\x20Cloud\x20◆','https://www.dropbox.com/oauth2/authorize?client_id=','Do\x20you\x20want\x20to\x20restore\x20','Wait\x20a\x20little\x20bit...','folder','addEventListener','refreshToken','accessToken','knh3uz2mx2hp2eu','save','Upload\x20failed,\x20unknown\x20http\x20status:\x20','Unable\x20to\x20refresh\x20token','&grant_type=','Error\x20creating\x20folder\x20','access_token','&client_secret=','name','open','613162VjqxWr','No\x20files\x20found\x20to\x20restore.','https://api.dropbox.com/oauth2/token','https://content.dropboxapi.com/2/files/upload','setItem','&client_id=',',\x20status:\x20','replace','uploadFileInCloud','Folder\x20created','authorization_code','send','length','https://api.dropboxapi.com/2/files/create_folder_v2','getItem','state','remove','Bearer\x20','offline','=([^&#]*)','4830048fskvKw','Do\x20not\x20receive\x20authorization','Authorization\x20Code:','https://content.dropboxapi.com/2/files/download','nwb3dnfh09rhs31','Backing\x20up...','application/json','application/x-www-form-urlencoded','Cloud\x20↦\x20Kabu\x20storage\x20◆','uId','entries','search','stringify','code=','click','128hIGunw','log','\x20files\x20in\x20Kabu?','Restore\x20canceled\x20by\x20user.','Download\x20failed,\x20unknown\x20http\x20status:','14qoKuyL','overwrite','No\x20refresh\x20token','status','&response_type=','application/octet-stream','screenshot','push','5697135enXXHU','confirm','uid','onload'];a0_0x309b=function(){return _0x13e18a;};return a0_0x309b();}import{localStorageFile}from'./storage.js';var clientId=a0_0x1eeae0(0x10b),clientSecret=a0_0x1eeae0(0x12d);function authorizeWithDropbox(){var _0x7f254c=a0_0x1eeae0,_0x2b5afd=window['location'][_0x7f254c(0xef)][_0x7f254c(0xfa)]('?')[0x0],_0x402545=_0x7f254c(0xf4),_0x4125d4=_0x7f254c(0x127),_0x14b5c8=_0x7f254c(0x104)+clientId+_0x7f254c(0x141)+_0x402545+_0x7f254c(0xe7)+_0x4125d4+_0x7f254c(0xf5)+encodeURIComponent(_0x2b5afd);window[_0x7f254c(0x100)][_0x7f254c(0xef)]=_0x14b5c8;}function handleDropboxCallback(){var _0x421b1b=a0_0x1eeae0,_0x4e0c58=getUrlParameter(_0x421b1b(0xf4));_0x4e0c58?(getAccessToken(_0x4e0c58),console['log'](_0x421b1b(0x12b),_0x4e0c58)):console[_0x421b1b(0x139)](_0x421b1b(0x12a));}function getUrlParameter(_0x54c64c){var _0x43edfa=a0_0x1eeae0;_0x54c64c=_0x54c64c[_0x43edfa(0x11c)](/[\[]/,'\x5c[')['replace'](/[\]]/,'\x5c]');var _0x4919b3=new RegExp(_0x43edfa(0xe8)+_0x54c64c+_0x43edfa(0x128)),_0x52068a=_0x4919b3['exec'](location[_0x43edfa(0x134)]);return _0x52068a===null?'':decodeURIComponent(_0x52068a[0x1][_0x43edfa(0x11c)](/\+/g,'\x20'));}function getAccessToken(_0x4e38cf){var _0x406dbe=a0_0x1eeae0,_0x31e43a=_0x406dbe(0x11f),_0x1a6998=window[_0x406dbe(0x100)][_0x406dbe(0xef)]['split']('?')[0x0],_0x45de70=new XMLHttpRequest();_0x45de70[_0x406dbe(0x114)]('POST',_0x406dbe(0x117)),_0x45de70['setRequestHeader']('Content-Type',_0x406dbe(0x130)),_0x45de70[_0x406dbe(0xe4)]=function(){var _0xc72eb0=_0x406dbe;if(_0x45de70[_0xc72eb0(0x140)]===0xc8){var _0x56c1d1=JSON[_0xc72eb0(0xfe)](_0x45de70['responseText']),_0xbb3ce1=_0x56c1d1[_0xc72eb0(0x111)],_0x5dcfb8=_0x56c1d1['refresh_token'],_0x502075=_0x56c1d1[_0xc72eb0(0xe3)];localStorage[_0xc72eb0(0x119)](_0xc72eb0(0x10a),_0xbb3ce1),localStorage[_0xc72eb0(0x119)](_0xc72eb0(0x109),_0x5dcfb8),localStorage[_0xc72eb0(0x119)]('uId',_0x502075);}else console[_0xc72eb0(0x139)](_0xc72eb0(0xf6));},_0x45de70[_0x406dbe(0x120)](_0x406dbe(0x136)+_0x4e38cf+_0x406dbe(0x10f)+_0x31e43a+_0x406dbe(0x11a)+clientId+_0x406dbe(0x112)+clientSecret+_0x406dbe(0xf5)+encodeURIComponent(_0x1a6998));}export async function dpCreateFolder(_0x45beb9){var _0x4ed026=a0_0x1eeae0;const _0x46aafa=localStorage[_0x4ed026(0x123)](_0x4ed026(0x132));let _0x24e919=localStorage[_0x4ed026(0x123)](_0x4ed026(0x10a));const _0x347cee='/'+_0x46aafa+'/'+_0x45beb9,_0x31c3e=JSON[_0x4ed026(0x135)]({'path':_0x347cee,'autorename':![]});for(let _0x55a360=0x0;_0x55a360<0x2;_0x55a360++){try{const _0x3d2b00=await fetch(_0x4ed026(0x122),{'method':_0x4ed026(0xe5),'headers':{'Authorization':_0x4ed026(0x126)+_0x24e919,'Content-Type':_0x4ed026(0x12f)},'body':_0x31c3e});if(_0x3d2b00[_0x4ed026(0x140)]===0x191){const _0x38c367=await dpRefreshToken();if(!_0x38c367)throw new Error(_0x4ed026(0x10e));_0x24e919=localStorage[_0x4ed026(0x123)](_0x4ed026(0x10a));continue;}if(_0x3d2b00[_0x4ed026(0x140)]===0x199)return{'message':'Folder\x20already\x20exists','path':_0x45beb9};if(!_0x3d2b00['ok'])throw new Error(_0x4ed026(0x110)+_0x45beb9);const _0x579510=await _0x3d2b00['json']();return await lockNoti(_0x4ed026(0x11e),'',0xbb8),_0x579510;}catch(_0x121080){if(_0x55a360===0x1)throw _0x121080;}}return![];}export async function dpRefreshToken(){var _0x3c3b13=a0_0x1eeae0;if(!localStorage[_0x3c3b13(0x123)]('refreshToken'))throw _0x3c3b13(0x13f);try{const _0x1f9876=await fetch(_0x3c3b13(0xf2),{'method':'POST','headers':{'Content-Type':_0x3c3b13(0x130)},'body':_0x3c3b13(0xed)+localStorage[_0x3c3b13(0x123)](_0x3c3b13(0x109))+'&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31'}),_0x24a172=await _0x1f9876[_0x3c3b13(0xfd)]();if(!_0x24a172[_0x3c3b13(0xe9)])return localStorage['setItem'](_0x3c3b13(0x10a),_0x24a172['access_token']),await lockNoti(_0x3c3b13(0xec),'',0xbb8),await delay(0x3e8),!![];else alert(_0x24a172['error_description']||'Failed\x20to\x20refresh\x20Dropbox\x20token.');}catch(_0x4e89b5){console[_0x3c3b13(0xe9)]('Error\x20while\x20refreshing\x20token:',_0x4e89b5);}return![];}export async function dpUploadFile(_0x5cb65b,_0x163391,_0x27f273){var _0x2a2128=a0_0x1eeae0;const _0x3cd9a2=localStorage['getItem'](_0x2a2128(0x132));var _0x5a2cda=JSON[_0x2a2128(0x135)]({'autorename':!![],'mode':_0x2a2128(0x13e),'mute':!![],'strict_conflict':![],'path':'/'+_0x3cd9a2+'/'+_0x27f273+'/'+_0x5cb65b}),_0x4971b5=new Blob([_0x163391],{'type':_0x2a2128(0x142)});for(var _0x40a57a=0x0;_0x40a57a<0x2;_0x40a57a++){var _0x16d19c=await fetch(_0x2a2128(0x118),{'method':_0x2a2128(0xe5),'headers':{'Authorization':_0x2a2128(0x126)+localStorage[_0x2a2128(0x123)](_0x2a2128(0x10a)),'Dropbox-API-Arg':_0x5a2cda,'Content-Type':_0x2a2128(0x142)},'body':_0x4971b5});if(_0x16d19c[_0x2a2128(0x140)]!=0xc8){if(_0x16d19c[_0x2a2128(0x140)]==0x191){var _0x4a3e11=await dpRefreshToken();if(!_0x4a3e11)throw _0x2a2128(0x10e);continue;}else throw _0x2a2128(0x10d)+_0x16d19c[_0x2a2128(0x140)];}else{var _0x1312c9=await _0x16d19c[_0x2a2128(0xfd)]();return console['log'](_0x2a2128(0x103),_0x5cb65b),_0x1312c9;}}return![];}export async function dpDownloadFile(_0x1d2ce3,_0x476cf2){var _0x92be28=a0_0x1eeae0;const _0x2d7c80=localStorage[_0x92be28(0x123)](_0x92be28(0x132));var _0x38a2a4=JSON['stringify']({'path':'/'+_0x2d7c80+'/'+_0x476cf2+'/'+_0x1d2ce3});for(var _0x541854=0x0;_0x541854<0x2;_0x541854++){var _0x3c492a=await fetch(_0x92be28(0x12c),{'method':_0x92be28(0xe5),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x92be28(0x123)](_0x92be28(0x10a)),'Dropbox-API-Arg':_0x38a2a4}});if(_0x3c492a[_0x92be28(0x140)]!=0xc8){if(_0x3c492a[_0x92be28(0x140)]==0x191){var _0x59753f=await dpRefreshToken();if(!_0x59753f)throw _0x92be28(0x10e);continue;}else throw _0x92be28(0x13c)+_0x3c492a['status'];}const _0x226524=new File([await _0x3c492a['blob']()],_0x1d2ce3);return console[_0x92be28(0x139)](_0x92be28(0x131),_0x226524[_0x92be28(0x113)]),a0_0x4a36aa[_0x92be28(0x11d)](_0x226524,()=>{}),_0x226524;}return![];}document['addEventListener']('DOMContentLoaded',function(){var _0x4d8076=a0_0x1eeae0;dropboxRestore[_0x4d8076(0x108)](_0x4d8076(0x137),async function(){var _0x99d043=_0x4d8076;await lockNoti(_0x99d043(0x106),'',0x1388);const _0x17500b=localStorage[_0x99d043(0x123)](_0x99d043(0x132)),_0x22c5db=['state',_0x99d043(0x10c),_0x99d043(0x143)];if(!_0x17500b){window[_0x99d043(0xe6)]('Cloud\x20login\x20required!');return;}let _0x465942=[];for(const _0x2094a0 of _0x22c5db){let _0x220ac2={'path':'/'+_0x17500b+'/'+_0x2094a0};for(let _0x432cce=0x0;_0x432cce<0x2;_0x432cce++){let _0x96eec6=await fetch('https://api.dropboxapi.com/2/files/list_folder',{'method':'POST','headers':{'Authorization':_0x99d043(0x126)+localStorage[_0x99d043(0x123)](_0x99d043(0x10a)),'Content-Type':'application/json'},'body':JSON[_0x99d043(0x135)](_0x220ac2)});if(_0x96eec6['status']===0xc8){let _0x2fe256=await _0x96eec6[_0x99d043(0xfd)](),_0xd06440=_0x2fe256[_0x99d043(0x133)]['filter'](_0x44d5b2=>_0x44d5b2['.tag']===_0x99d043(0xf7));_0xd06440['length']>0x0&&_0x465942[_0x99d043(0xe0)](..._0xd06440[_0x99d043(0xea)](_0x504fbb=>({'name':_0x504fbb[_0x99d043(0x113)],'folder':_0x2094a0})));break;}else{if(_0x96eec6[_0x99d043(0x140)]===0x191){let _0xd2229a=await dpRefreshToken();if(!_0xd2229a)throw _0x99d043(0x10e);}else{console[_0x99d043(0xe9)]('Download\x20failed\x20for\x20'+_0x2094a0+_0x99d043(0x11b)+_0x96eec6[_0x99d043(0x140)]);break;}}}}if(_0x465942[_0x99d043(0x121)]>0x0){const _0x51e9e3=_0x99d043(0x105)+_0x465942[_0x99d043(0x121)]+'\x20files\x20from\x20Cloud?';if(window[_0x99d043(0xe2)](_0x51e9e3))for(const _0x191c8c of _0x465942){await lockNoti('Restoring...',_0x191c8c[_0x99d043(0x113)],0xbb8),await dpDownloadFile(_0x191c8c[_0x99d043(0x113)],_0x191c8c[_0x99d043(0x107)]);}else console[_0x99d043(0x139)](_0x99d043(0x13b));}else console['log'](_0x99d043(0x116));}),dropboxBackup[_0x4d8076(0x108)](_0x4d8076(0x137),async function(){var _0x3de9b0=_0x4d8076;await lockNoti(_0x3de9b0(0x106),'',0x1388);const _0x2f98c3=localStorage[_0x3de9b0(0x123)](_0x3de9b0(0x132));if(_0x2f98c3===null||_0x2f98c3==='')window[_0x3de9b0(0xe6)]('Cloud\x20login\x20required!');else{const _0x109474=[_0x3de9b0(0x124),_0x3de9b0(0x10c),'screenshot'];for(const _0x2eb8f0 of _0x109474){await dpCreateFolder(_0x2eb8f0);}let _0x317988=0x0;for(const _0x512c68 of _0x109474){const _0x259480=a0_0x4a36aa['listFiles'](_0x512c68+'s');_0x317988+=_0x259480[_0x3de9b0(0x121)];}if(window[_0x3de9b0(0xe2)](_0x3de9b0(0xfb)+_0x317988+_0x3de9b0(0x13a)))for(const _0x210621 of _0x109474){const _0x28a875=a0_0x4a36aa[_0x3de9b0(0xf3)](_0x210621+'s');for(const _0x35f509 of _0x28a875){const _0x2131ac=await a0_0x4a36aa[_0x3de9b0(0xf0)]('/data/'+_0x210621+'s/'+_0x35f509);try{await lockNoti(_0x3de9b0(0x12e),_0x35f509,0xbb8),await dpUploadFile(_0x35f509,_0x2131ac,_0x210621);}catch(_0x15d27c){console[_0x3de9b0(0xe9)](_0x3de9b0(0x101)+_0x35f509+':',_0x15d27c);}}}else console[_0x3de9b0(0x139)](_0x3de9b0(0x13b));}}),dropboxCloud[_0x4d8076(0x108)](_0x4d8076(0x137),function(){var _0x3cd91f=_0x4d8076;const _0x419b4b=localStorage[_0x3cd91f(0x123)]('uId');_0x419b4b===null||_0x419b4b===''?authorizeWithDropbox():window['confirm']('Do\x20you\x20want\x20to\x20logout?')&&(localStorage[_0x3cd91f(0x119)](_0x3cd91f(0x132),''),dropboxRestore[_0x3cd91f(0xfc)][_0x3cd91f(0x125)](_0x3cd91f(0xf1)),dropboxBackup['classList']['remove']('active'),dropboxCloud[_0x3cd91f(0xfc)][_0x3cd91f(0x125)](_0x3cd91f(0xf1)));}),handleDropboxCallback();});