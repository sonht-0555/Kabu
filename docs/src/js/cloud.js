var a0_0x30775b=a0_0x41f8;(function(_0x3f6d6d,_0x2c754b){var _0x4ba970=a0_0x41f8,_0x125265=_0x3f6d6d();while(!![]){try{var _0x43839b=parseInt(_0x4ba970(0x169))/0x1*(-parseInt(_0x4ba970(0x184))/0x2)+-parseInt(_0x4ba970(0x191))/0x3*(-parseInt(_0x4ba970(0x18f))/0x4)+parseInt(_0x4ba970(0x193))/0x5*(parseInt(_0x4ba970(0x14a))/0x6)+-parseInt(_0x4ba970(0x16a))/0x7*(-parseInt(_0x4ba970(0x1aa))/0x8)+-parseInt(_0x4ba970(0x147))/0x9*(-parseInt(_0x4ba970(0x1a3))/0xa)+parseInt(_0x4ba970(0x18c))/0xb*(parseInt(_0x4ba970(0x13d))/0xc)+-parseInt(_0x4ba970(0x15d))/0xd*(parseInt(_0x4ba970(0x160))/0xe);if(_0x43839b===_0x2c754b)break;else _0x125265['push'](_0x125265['shift']());}catch(_0x55afea){_0x125265['push'](_0x125265['shift']());}}}(a0_0x58e8,0xad069));function a0_0x41f8(_0x5c05c2,_0x24649a){var _0x58e863=a0_0x58e8();return a0_0x41f8=function(_0x41f871,_0x49efd4){_0x41f871=_0x41f871-0x13a;var _0x1e7ef9=_0x58e863[_0x41f871];return _0x1e7ef9;},a0_0x41f8(_0x5c05c2,_0x24649a);}import*as a0_0x42c92b from'./main.js';import{localStorageFile}from'./storage.js';var clientId='knh3uz2mx2hp2eu',clientSecret=a0_0x30775b(0x14d);function authorizeWithDropbox(){var _0x357aea=a0_0x30775b,_0x316b88=window[_0x357aea(0x152)][_0x357aea(0x155)]['split']('?')[0x0],_0x410faf='code',_0x5a58cf=_0x357aea(0x15a),_0x3ff062=_0x357aea(0x195)+clientId+_0x357aea(0x1a2)+_0x410faf+_0x357aea(0x149)+_0x5a58cf+_0x357aea(0x146)+encodeURIComponent(_0x316b88);window[_0x357aea(0x152)]['href']=_0x3ff062;}function handleDropboxCallback(){var _0x322451=a0_0x30775b,_0x4fc6c3=getUrlParameter(_0x322451(0x144));_0x4fc6c3?(getAccessToken(_0x4fc6c3),console['log'](_0x322451(0x163),_0x4fc6c3)):console['log'](_0x322451(0x1a0));}function a0_0x58e8(){var _0x1a51b0=['refresh_token','10PRxWNM','json','https://www.dropbox.com/oauth2/authorize?client_id=','\x20files\x20in\x20Cloud?','click','remove','DOMContentLoaded','uId','search','list','classList','Restore\x20canceled\x20by\x20user.','&client_id=','Do\x20not\x20receive\x20authorization','endsWith','&response_type=','30sSyZai','Bearer\x20','overwrite','Download\x20failed,\x20unknown\x20http\x20status:','Do\x20you\x20want\x20to\x20logout?','getItem','_imageState','48bxGtMu','Upload\x20failed,\x20unknown\x20http\x20status:\x20','log','length','https://api.dropboxapi.com/2/files/list_folder','text/plain','Cloud\x20login\x20required!','.ss5','open','authorization_code','confirm','36xClMwl','error','accessToken','\x20files\x20in\x20Kabu?','Restoring...','text','code=','code','Failed\x20to\x20refresh\x20Dropbox\x20token.','&redirect_uri=','2874177WJosVt','&client_secret=','&token_access_type=','2209170OqeOVD','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','blob','nwb3dnfh09rhs31','slice','.tag','.ss1','status:\x20','location','setRequestHeader','Kabu\x20storage\x20↦\x20Cloud\x20◆','href','lastIndexOf','FSSync','refresh_token=','send','offline','Backing\x20up...','https://api.dropbox.com/oauth2/token','26LXGtQA','addEventListener','status','6781110qypexI','split','error_description','Authorization\x20Code:','Error\x20while\x20refreshing\x20token:','filter','active','.ss7','Do\x20you\x20want\x20to\x20backup\x20','4739kbsvOs','620186qRtEjn','toUpperCase','.ss0','Failed\x20to\x20upload\x20file\x20','https://content.dropboxapi.com/2/files/download','downloadFileInCloud','name','Download\x20failed,\x20unknown\x20http\x20status:\x20','gba','application/x-www-form-urlencoded','.ss2','onload','setItem','alert','Do\x20you\x20want\x20to\x20restore\x20','.ss3','application/octet-stream','stringify','https://api.dropboxapi.com/oauth2/token','POST','parse','refreshToken','.gba_dateState','=([^&#]*)','charAt','uploadSaveOrSaveState','578yRARBC','.gba_imageState','state','replace','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','access_token','.gba_slot','file','1520156GaBFaT','No\x20refresh\x20token','Unable\x20to\x20refresh\x20token','4PGOmSP','_dateState','1219167nVeIIv'];a0_0x58e8=function(){return _0x1a51b0;};return a0_0x58e8();}function getUrlParameter(_0x766910){var _0x152cdf=a0_0x30775b;_0x766910=_0x766910['replace'](/[\[]/,'\x5c[')[_0x152cdf(0x187)](/[\]]/,'\x5c]');var _0x567933=new RegExp('[\x5c?&#]'+_0x766910+_0x152cdf(0x181)),_0x44cba3=_0x567933['exec'](location[_0x152cdf(0x19b)]);return _0x44cba3===null?'':decodeURIComponent(_0x44cba3[0x1]['replace'](/\+/g,'\x20'));}function getAccessToken(_0x3f4984){var _0xefb88a=a0_0x30775b,_0xc5f2a9=_0xefb88a(0x13b),_0x2680ed=window[_0xefb88a(0x152)][_0xefb88a(0x155)][_0xefb88a(0x161)]('?')[0x0],_0xd61e48=new XMLHttpRequest();_0xd61e48[_0xefb88a(0x13a)](_0xefb88a(0x17d),_0xefb88a(0x15c)),_0xd61e48[_0xefb88a(0x153)]('Content-Type','application/x-www-form-urlencoded'),_0xd61e48[_0xefb88a(0x175)]=function(){var _0x469a88=_0xefb88a;if(_0xd61e48[_0x469a88(0x15f)]===0xc8){var _0x3882f9=JSON[_0x469a88(0x17e)](_0xd61e48['responseText']),_0x50bcf6=_0x3882f9[_0x469a88(0x189)],_0x1f7bd9=_0x3882f9[_0x469a88(0x192)],_0x4739c=_0x3882f9['uid'];localStorage[_0x469a88(0x176)](_0x469a88(0x13f),_0x50bcf6),localStorage[_0x469a88(0x176)](_0x469a88(0x17f),_0x1f7bd9),localStorage[_0x469a88(0x176)](_0x469a88(0x19a),_0x4739c);}else console[_0x469a88(0x1ac)](_0x469a88(0x188));},_0xd61e48[_0xefb88a(0x159)](_0xefb88a(0x143)+_0x3f4984+'&grant_type='+_0xc5f2a9+_0xefb88a(0x19f)+clientId+_0xefb88a(0x148)+clientSecret+_0xefb88a(0x146)+encodeURIComponent(_0x2680ed));}export async function dpRefreshToken(){var _0x1746cd=a0_0x30775b;if(!localStorage['getItem'](_0x1746cd(0x17f)))throw _0x1746cd(0x18d);try{const _0x1c3cb2=await fetch(_0x1746cd(0x17c),{'method':_0x1746cd(0x17d),'headers':{'Content-Type':_0x1746cd(0x173)},'body':_0x1746cd(0x158)+localStorage[_0x1746cd(0x1a8)](_0x1746cd(0x17f))+_0x1746cd(0x14b)}),_0x4a0929=await _0x1c3cb2[_0x1746cd(0x194)]();if(!_0x4a0929[_0x1746cd(0x13e)])return localStorage[_0x1746cd(0x176)]('accessToken',_0x4a0929['access_token']),await lockNoti('','Refreshing\x20token...',0xbb8),await delay(0x3e8),!![];else alert(_0x4a0929[_0x1746cd(0x162)]||_0x1746cd(0x145));}catch(_0x8cecc6){console[_0x1746cd(0x13e)](_0x1746cd(0x164),_0x8cecc6);}return![];}export async function dpUploadFile(_0x30f77d,_0x53036b){var _0x41675e=a0_0x30775b;const _0x50d6cc=localStorage[_0x41675e(0x1a8)](_0x41675e(0x19a));var _0xcd1469=JSON[_0x41675e(0x17b)]({'autorename':!![],'mode':_0x41675e(0x1a5),'mute':!![],'strict_conflict':![],'path':'/'+_0x50d6cc+'/'+_0x30f77d}),_0x2e1fd7=new Blob([_0x53036b],{'type':_0x41675e(0x17a)});for(var _0x47aeb9=0x0;_0x47aeb9<0x2;_0x47aeb9++){var _0x5b048a=await fetch('https://content.dropboxapi.com/2/files/upload',{'method':_0x41675e(0x17d),'headers':{'Authorization':_0x41675e(0x1a4)+localStorage[_0x41675e(0x1a8)](_0x41675e(0x13f)),'Dropbox-API-Arg':_0xcd1469,'Content-Type':_0x41675e(0x17a)},'body':_0x2e1fd7});if(_0x5b048a['status']!=0xc8){if(_0x5b048a[_0x41675e(0x15f)]==0x191){var _0x4cadb6=await dpRefreshToken();if(!_0x4cadb6)throw _0x41675e(0x18e);continue;}else throw _0x41675e(0x1ab)+_0x5b048a[_0x41675e(0x15f)];}else{var _0x2f2492=await _0x5b048a[_0x41675e(0x194)]();return console['log'](_0x41675e(0x154),_0x30f77d),_0x2f2492;}}return![];}async function dpDownloadFile(_0x51c526){var _0x8c3503=a0_0x30775b;const _0x59daae=localStorage['getItem']('uId');var _0x132ba1=JSON[_0x8c3503(0x17b)]({'path':'/'+_0x59daae+'/'+_0x51c526});for(var _0x209c45=0x0;_0x209c45<0x2;_0x209c45++){var _0x5f577f=await fetch(_0x8c3503(0x16e),{'method':_0x8c3503(0x17d),'headers':{'Authorization':_0x8c3503(0x1a4)+localStorage[_0x8c3503(0x1a8)](_0x8c3503(0x13f)),'Dropbox-API-Arg':_0x132ba1}});if(_0x5f577f[_0x8c3503(0x15f)]!=0xc8){if(_0x5f577f[_0x8c3503(0x15f)]==0x191){var _0x141305=await dpRefreshToken();if(!_0x141305)throw _0x8c3503(0x18e);continue;}else throw _0x8c3503(0x1a6)+_0x5f577f[_0x8c3503(0x15f)];}const _0x3c16e6=new File([await _0x5f577f[_0x8c3503(0x14c)]()],_0x51c526);console[_0x8c3503(0x1ac)]('Cloud\x20↦\x20Kabu\x20storage\x20◆',_0x3c16e6[_0x8c3503(0x170)]);if(_0x51c526[_0x8c3503(0x1a1)]('.txt')){const _0x3e888d=await _0x3c16e6[_0x8c3503(0x142)](),[_0x4a49fc,_0x540c49]=_0x3e888d[_0x8c3503(0x161)]('\x0a\x0a'),_0xc36fe6=_0x51c526['substring'](0x0,_0x51c526[_0x8c3503(0x156)](_0x8c3503(0x172))+0x3),_0x3c1d13=_0x51c526[_0x8c3503(0x182)](_0x51c526[_0x8c3503(0x1ad)]-0x5);localStorage[_0x8c3503(0x176)](_0xc36fe6+_0x8c3503(0x190)+_0x3c1d13,_0x540c49),localStorage[_0x8c3503(0x176)](_0xc36fe6+_0x8c3503(0x1a9)+_0x3c1d13,_0x4a49fc);}else a0_0x42c92b[_0x8c3503(0x183)](_0x3c16e6,()=>{var _0x48e505=_0x8c3503;localStorageFile(),Module[_0x48e505(0x157)]();});return _0x3c16e6;}return![];}document[a0_0x30775b(0x15e)](a0_0x30775b(0x199),function(){var _0x31d84c=a0_0x30775b;dropboxRestore[_0x31d84c(0x15e)](_0x31d84c(0x197),async function(){var _0x23e066=_0x31d84c;const _0x4ce202=localStorage['getItem'](_0x23e066(0x19a));if(_0x4ce202===null||_0x4ce202==='')window[_0x23e066(0x177)]('Cloud\x20login\x20required!');else{var _0x1ba42e={'path':'/'+_0x4ce202};for(var _0x3bfb64=0x0;_0x3bfb64<0x2;_0x3bfb64++){var _0x3a826a=await fetch(_0x23e066(0x1ae),{'method':_0x23e066(0x17d),'headers':{'Authorization':_0x23e066(0x1a4)+localStorage['getItem'](_0x23e066(0x13f)),'Content-Type':'application/json'},'body':JSON[_0x23e066(0x17b)](_0x1ba42e)});console[_0x23e066(0x1ac)](_0x23e066(0x151),_0x3a826a[_0x23e066(0x15f)]);if(_0x3a826a['status']!=0xc8){if(_0x3a826a[_0x23e066(0x15f)]==0x191){var _0x519e66=await dpRefreshToken();if(!_0x519e66)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x23e066(0x171)+_0x3a826a['status'];}else{const _0x1fad26=await _0x3a826a[_0x23e066(0x194)](),_0x66fa50=_0x1fad26['entries'][_0x23e066(0x165)](_0x8ecf96=>_0x8ecf96[_0x23e066(0x14f)]===_0x23e066(0x18b))['length'],_0x5e8da8=_0x23e066(0x178)+_0x66fa50+_0x23e066(0x196);if(window[_0x23e066(0x13c)](_0x5e8da8))for(const _0x911c6f of _0x1fad26['entries']){_0x911c6f[_0x23e066(0x14f)]==='file'&&(await lockNoti(_0x23e066(0x141),_0x911c6f['name'],0xbb8),await dpDownloadFile(_0x911c6f[_0x23e066(0x170)]));}else console[_0x23e066(0x1ac)]('Restore\x20canceled\x20by\x20user.');return!![];}}return![];}}),dropboxBackup[_0x31d84c(0x15e)](_0x31d84c(0x197),async function(){var _0x1c056d=_0x31d84c;const _0x1290b7=localStorage[_0x1c056d(0x1a8)](_0x1c056d(0x19a));if(_0x1290b7===null||_0x1290b7==='')window['alert'](_0x1c056d(0x1b0));else{const _0x17e62f=[_0x1c056d(0x186),'save'];let _0x4c229d=0x0;for(const _0x5dba06 of _0x17e62f){const _0x185fb0=a0_0x42c92b[_0x1c056d(0x19c)+(_0x5dba06[_0x1c056d(0x182)](0x0)[_0x1c056d(0x16b)]()+_0x5dba06[_0x1c056d(0x14e)](0x1))]();_0x4c229d+=_0x185fb0[_0x1c056d(0x1ad)];}if(window[_0x1c056d(0x13c)](_0x1c056d(0x168)+_0x4c229d+_0x1c056d(0x140)))for(const _0x219880 of _0x17e62f){const _0x5dea50=a0_0x42c92b[_0x1c056d(0x19c)+(_0x219880['charAt'](0x0)[_0x1c056d(0x16b)]()+_0x219880['slice'](0x1))]();for(const _0x440ccc of _0x5dea50){const _0x164a6f=await a0_0x42c92b[_0x1c056d(0x16f)]('/data/'+_0x219880+'s/'+_0x440ccc);try{await lockNoti(_0x1c056d(0x15b),_0x440ccc,0xbb8),await dpUploadFile(_0x440ccc,_0x164a6f);if(_0x440ccc['endsWith'](_0x1c056d(0x16c))||_0x440ccc[_0x1c056d(0x1a1)](_0x1c056d(0x150))||_0x440ccc[_0x1c056d(0x1a1)](_0x1c056d(0x174))||_0x440ccc[_0x1c056d(0x1a1)](_0x1c056d(0x179))||_0x440ccc[_0x1c056d(0x1a1)]('.ss4')||_0x440ccc[_0x1c056d(0x1a1)](_0x1c056d(0x1b1))||_0x440ccc[_0x1c056d(0x1a1)]('.ss6')||_0x440ccc[_0x1c056d(0x1a1)](_0x1c056d(0x167))){const _0x50a8b3=_0x440ccc['substring'](0x0,_0x440ccc['lastIndexOf']('.')),_0x12f9fe=_0x440ccc[_0x1c056d(0x182)](_0x440ccc[_0x1c056d(0x1ad)]-0x1),_0xa82f7e=localStorage['getItem'](_0x50a8b3+_0x1c056d(0x185)+_0x12f9fe),_0x23e572=localStorage[_0x1c056d(0x1a8)](_0x50a8b3+_0x1c056d(0x180)+_0x12f9fe);if(_0xa82f7e!==null){const _0x3d9127=_0xa82f7e+'\x0a\x0a'+_0x23e572,_0xd9241c=new Blob([_0x3d9127],{'type':_0x1c056d(0x1af)});await lockNoti(_0x1c056d(0x15b),_0x50a8b3+_0x1c056d(0x18a)+_0x12f9fe+'.txt',0xbb8),await dpUploadFile(_0x50a8b3+_0x1c056d(0x18a)+_0x12f9fe+'.txt',_0xd9241c);}}}catch(_0x287a19){console['error'](_0x1c056d(0x16d)+_0x440ccc+':',_0x287a19);}}}else console[_0x1c056d(0x1ac)](_0x1c056d(0x19e));}}),dropboxCloud[_0x31d84c(0x15e)](_0x31d84c(0x197),function(){var _0x5604c0=_0x31d84c;const _0x5df1f0=localStorage[_0x5604c0(0x1a8)]('uId');_0x5df1f0===null||_0x5df1f0===''?authorizeWithDropbox():window[_0x5604c0(0x13c)](_0x5604c0(0x1a7))&&(localStorage[_0x5604c0(0x176)](_0x5604c0(0x19a),''),dropboxRestore[_0x5604c0(0x19d)][_0x5604c0(0x198)]('active'),dropboxBackup[_0x5604c0(0x19d)][_0x5604c0(0x198)]('active'),dropboxCloud[_0x5604c0(0x19d)][_0x5604c0(0x198)](_0x5604c0(0x166)));}),handleDropboxCallback();});