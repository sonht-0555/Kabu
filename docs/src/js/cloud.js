function a0_0x2dfa(_0x38dace,_0x3a21b8){var _0x5377a5=a0_0x5377();return a0_0x2dfa=function(_0x2dfa3f,_0x830f81){_0x2dfa3f=_0x2dfa3f-0xce;var _0x22d1f7=_0x5377a5[_0x2dfa3f];return _0x22d1f7;},a0_0x2dfa(_0x38dace,_0x3a21b8);}var a0_0x14dde6=a0_0x2dfa;(function(_0x16f4d9,_0x49ee6d){var _0xf9e030=a0_0x2dfa,_0x376c5b=_0x16f4d9();while(!![]){try{var _0x24616e=parseInt(_0xf9e030(0x133))/0x1+-parseInt(_0xf9e030(0xf4))/0x2*(-parseInt(_0xf9e030(0x122))/0x3)+-parseInt(_0xf9e030(0x128))/0x4*(parseInt(_0xf9e030(0x126))/0x5)+-parseInt(_0xf9e030(0xe8))/0x6+-parseInt(_0xf9e030(0x104))/0x7+parseInt(_0xf9e030(0xcf))/0x8+-parseInt(_0xf9e030(0x105))/0x9*(parseInt(_0xf9e030(0x11c))/0xa);if(_0x24616e===_0x49ee6d)break;else _0x376c5b['push'](_0x376c5b['shift']());}catch(_0x375584){_0x376c5b['push'](_0x376c5b['shift']());}}}(a0_0x5377,0xc1fe5));import*as a0_0x21eb3c from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x14dde6(0x12c),clientSecret='nwb3dnfh09rhs31';function authorizeWithDropbox(){var _0x433826=a0_0x14dde6,_0xa57d0=window[_0x433826(0xe4)][_0x433826(0xf0)][_0x433826(0x118)]('?')[0x0],_0x56f137=_0x433826(0x119),_0x4472c0=_0x433826(0xec),_0x4ad831='https://www.dropbox.com/oauth2/authorize?client_id='+clientId+'&response_type='+_0x56f137+_0x433826(0xe1)+_0x4472c0+'&redirect_uri='+encodeURIComponent(_0xa57d0);window[_0x433826(0xe4)][_0x433826(0xf0)]=_0x4ad831;}function handleDropboxCallback(){var _0x27ecb0=a0_0x14dde6,_0x46d26f=getUrlParameter('code');_0x46d26f?(getAccessToken(_0x46d26f),console['log'](_0x27ecb0(0xd4),_0x46d26f)):console['log'](_0x27ecb0(0x11d));}function getUrlParameter(_0x2862b6){var _0x35caa8=a0_0x14dde6;_0x2862b6=_0x2862b6[_0x35caa8(0x106)](/[\[]/,'\x5c[')[_0x35caa8(0x106)](/[\]]/,'\x5c]');var _0x3bb7db=new RegExp(_0x35caa8(0x12a)+_0x2862b6+_0x35caa8(0xd1)),_0x531752=_0x3bb7db[_0x35caa8(0x132)](location['search']);return _0x531752===null?'':decodeURIComponent(_0x531752[0x1]['replace'](/\+/g,'\x20'));}function getAccessToken(_0xa6f17a){var _0x15531c=a0_0x14dde6,_0x1c027b='authorization_code',_0x5692ee=window[_0x15531c(0xe4)][_0x15531c(0xf0)][_0x15531c(0x118)]('?')[0x0],_0x21b48e=new XMLHttpRequest();_0x21b48e[_0x15531c(0xe3)](_0x15531c(0xce),'https://api.dropbox.com/oauth2/token'),_0x21b48e[_0x15531c(0x138)]('Content-Type',_0x15531c(0x11e)),_0x21b48e[_0x15531c(0x127)]=function(){var _0x34f0ed=_0x15531c;if(_0x21b48e[_0x34f0ed(0xd2)]===0xc8){var _0x4af24c=JSON[_0x34f0ed(0xd0)](_0x21b48e[_0x34f0ed(0x112)]),_0x2bec55=_0x4af24c['access_token'],_0x4d614b=_0x4af24c[_0x34f0ed(0xe2)],_0x325c2a=_0x4af24c[_0x34f0ed(0x12f)];localStorage[_0x34f0ed(0x103)](_0x34f0ed(0x10f),_0x2bec55),localStorage[_0x34f0ed(0x103)](_0x34f0ed(0xdc),_0x4d614b),localStorage[_0x34f0ed(0x103)](_0x34f0ed(0x135),_0x325c2a);}else console[_0x34f0ed(0x114)](_0x34f0ed(0x109));},_0x21b48e[_0x15531c(0x125)](_0x15531c(0x124)+_0xa6f17a+_0x15531c(0x111)+_0x1c027b+_0x15531c(0xd5)+clientId+_0x15531c(0xd9)+clientSecret+_0x15531c(0x11f)+encodeURIComponent(_0x5692ee));}export async function dpCreateFolder(_0x47665c){var _0x867386=a0_0x14dde6;const _0x593d3c=localStorage[_0x867386(0xed)](_0x867386(0x135));let _0x1fd500=localStorage[_0x867386(0xed)](_0x867386(0x10f));const _0x5c5ce9='/'+_0x593d3c+'/'+_0x47665c,_0x7cd0cf=JSON[_0x867386(0x10a)]({'path':_0x5c5ce9,'autorename':![]});for(let _0x5e1c10=0x0;_0x5e1c10<0x2;_0x5e1c10++){try{const _0x4d8baf=await fetch(_0x867386(0x101),{'method':_0x867386(0xce),'headers':{'Authorization':_0x867386(0x12d)+_0x1fd500,'Content-Type':'application/json'},'body':_0x7cd0cf});if(_0x4d8baf[_0x867386(0xd2)]===0x191){const _0x5a4bde=await dpRefreshToken();if(!_0x5a4bde)throw new Error(_0x867386(0xdd));_0x1fd500=localStorage[_0x867386(0xed)](_0x867386(0x10f));continue;}if(_0x4d8baf['status']===0x199)return{'message':_0x867386(0xfc),'path':_0x47665c};if(!_0x4d8baf['ok'])throw new Error(_0x867386(0x116)+_0x47665c);const _0xd761b6=await _0x4d8baf[_0x867386(0xee)]();return await lockNoti(_0x867386(0xdb),'',0xbb8),_0xd761b6;}catch(_0x2627ae){if(_0x5e1c10===0x1)throw _0x2627ae;}}return![];}export async function dpRefreshToken(){var _0xed9b8e=a0_0x14dde6;if(!localStorage['getItem'](_0xed9b8e(0xdc)))throw _0xed9b8e(0x108);try{const _0x1a3c0e=await fetch('https://api.dropboxapi.com/oauth2/token',{'method':_0xed9b8e(0xce),'headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0xed9b8e(0x10b)+localStorage[_0xed9b8e(0xed)](_0xed9b8e(0xdc))+_0xed9b8e(0x102)}),_0x8141c0=await _0x1a3c0e[_0xed9b8e(0xee)]();if(!_0x8141c0[_0xed9b8e(0x121)])return localStorage[_0xed9b8e(0x103)](_0xed9b8e(0x10f),_0x8141c0[_0xed9b8e(0x110)]),await lockNoti(_0xed9b8e(0x107),'',0xbb8),await delay(0x3e8),!![];else alert(_0x8141c0[_0xed9b8e(0xd7)]||_0xed9b8e(0xff));}catch(_0x165dc8){console[_0xed9b8e(0x121)]('Error\x20while\x20refreshing\x20token:',_0x165dc8);}return![];}export async function dpUploadFile(_0x435639,_0x2d801b,_0x28899f){var _0x16e11f=a0_0x14dde6;const _0x52fd8b=localStorage['getItem']('uId');var _0x3dd62a=JSON[_0x16e11f(0x10a)]({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x52fd8b+'/'+_0x28899f+'/'+_0x435639}),_0x595cd0=new Blob([_0x2d801b],{'type':_0x16e11f(0xda)});for(var _0x432bad=0x0;_0x432bad<0x2;_0x432bad++){var _0x315a89=await fetch(_0x16e11f(0xfa),{'method':_0x16e11f(0xce),'headers':{'Authorization':_0x16e11f(0x12d)+localStorage[_0x16e11f(0xed)](_0x16e11f(0x10f)),'Dropbox-API-Arg':_0x3dd62a,'Content-Type':_0x16e11f(0xda)},'body':_0x595cd0});if(_0x315a89[_0x16e11f(0xd2)]!=0xc8){if(_0x315a89[_0x16e11f(0xd2)]==0x191){var _0x5d1f85=await dpRefreshToken();if(!_0x5d1f85)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x16e11f(0xe7)+_0x315a89[_0x16e11f(0xd2)];}else{var _0x38b0d2=await _0x315a89[_0x16e11f(0xee)]();return console['log'](_0x16e11f(0xfe),_0x435639),_0x38b0d2;}}return![];}export async function dpDownloadFile(_0x5671e4,_0x4f5861){var _0x41e749=a0_0x14dde6;const _0x32c7d3=localStorage['getItem'](_0x41e749(0x135));var _0x20b6bb=JSON[_0x41e749(0x10a)]({'path':'/'+_0x32c7d3+'/'+_0x4f5861+'/'+_0x5671e4});for(var _0x48f2a9=0x0;_0x48f2a9<0x2;_0x48f2a9++){var _0xab9a1e=await fetch(_0x41e749(0x100),{'method':_0x41e749(0xce),'headers':{'Authorization':_0x41e749(0x12d)+localStorage[_0x41e749(0xed)](_0x41e749(0x10f)),'Dropbox-API-Arg':_0x20b6bb}});if(_0xab9a1e[_0x41e749(0xd2)]!=0xc8){if(_0xab9a1e[_0x41e749(0xd2)]==0x191){var _0x54d4a7=await dpRefreshToken();if(!_0x54d4a7)throw _0x41e749(0xdd);continue;}else throw'Download\x20failed,\x20unknown\x20http\x20status:'+_0xab9a1e[_0x41e749(0xd2)];}const _0x5c031c=new File([await _0xab9a1e[_0x41e749(0xf3)]()],_0x5671e4);return console[_0x41e749(0x114)](_0x41e749(0x12b),_0x5c031c['name']),a0_0x21eb3c[_0x41e749(0x12e)](_0x5c031c,()=>{localStorageFile(),Module['FSSync']();}),_0x5c031c;}return![];}document[a0_0x14dde6(0x117)]('DOMContentLoaded',function(){var _0x516f54=a0_0x14dde6;dropboxRestore[_0x516f54(0x117)](_0x516f54(0x13a),async function(){var _0x5c7067=_0x516f54;await lockNoti(_0x5c7067(0xfd),'',0x1388);const _0x8a22fa=localStorage[_0x5c7067(0xed)]('uId'),_0x1d1059=[_0x5c7067(0x10d),_0x5c7067(0xf2),_0x5c7067(0xe0)];if(!_0x8a22fa){window['alert'](_0x5c7067(0xe9));return;}let _0x426534=[];for(const _0xda65b2 of _0x1d1059){let _0x1a24bf={'path':'/'+_0x8a22fa+'/'+_0xda65b2};for(let _0x478f81=0x0;_0x478f81<0x2;_0x478f81++){let _0x1395cf=await fetch(_0x5c7067(0xd6),{'method':'POST','headers':{'Authorization':_0x5c7067(0x12d)+localStorage['getItem'](_0x5c7067(0x10f)),'Content-Type':_0x5c7067(0x120)},'body':JSON[_0x5c7067(0x10a)](_0x1a24bf)});if(_0x1395cf[_0x5c7067(0xd2)]===0xc8){let _0x4ff374=await _0x1395cf[_0x5c7067(0xee)](),_0x165a6c=_0x4ff374['entries'][_0x5c7067(0xf5)](_0x3d92b1=>_0x3d92b1[_0x5c7067(0x10e)]===_0x5c7067(0xf8));_0x165a6c[_0x5c7067(0x129)]>0x0&&_0x426534[_0x5c7067(0x115)](..._0x165a6c[_0x5c7067(0xf9)](_0x1dbeda=>({'name':_0x1dbeda[_0x5c7067(0x11a)],'folder':_0xda65b2})));break;}else{if(_0x1395cf[_0x5c7067(0xd2)]===0x191){let _0x272712=await dpRefreshToken();if(!_0x272712)throw'Unable\x20to\x20refresh\x20token';}else{console[_0x5c7067(0x121)](_0x5c7067(0xe6)+_0xda65b2+_0x5c7067(0x134)+_0x1395cf['status']);break;}}}}if(_0x426534[_0x5c7067(0x129)]>0x0){const _0x55bd40=_0x5c7067(0x130)+_0x426534[_0x5c7067(0x129)]+_0x5c7067(0xdf);if(window[_0x5c7067(0x131)](_0x55bd40))for(const _0x3def37 of _0x426534){await lockNoti(_0x5c7067(0xeb),_0x3def37[_0x5c7067(0x11a)],0xbb8),await dpDownloadFile(_0x3def37[_0x5c7067(0x11a)],_0x3def37[_0x5c7067(0x113)]);}else console['log'](_0x5c7067(0x123));}else console['log'](_0x5c7067(0x136));}),dropboxBackup['addEventListener'](_0x516f54(0x13a),async function(){var _0xda0e1e=_0x516f54;await lockNoti(_0xda0e1e(0xfd),'',0x1388);const _0xe12128=localStorage[_0xda0e1e(0xed)]('uId');if(_0xe12128===null||_0xe12128==='')window[_0xda0e1e(0xe5)]('Cloud\x20login\x20required!');else{const _0x229286=[_0xda0e1e(0x10d),_0xda0e1e(0xf2),_0xda0e1e(0xe0)];for(const _0x480dc3 of _0x229286){await dpCreateFolder(_0x480dc3);}let _0x4f71a8=0x0;for(const _0x446563 of _0x229286){const _0x18e1ec=a0_0x21eb3c['list'+(_0x446563[_0xda0e1e(0xf1)](0x0)[_0xda0e1e(0x10c)]()+_0x446563[_0xda0e1e(0x137)](0x1))]();_0x4f71a8+=_0x18e1ec[_0xda0e1e(0x129)];}if(window[_0xda0e1e(0x131)]('Do\x20you\x20want\x20to\x20backup\x20'+_0x4f71a8+_0xda0e1e(0xd3)))for(const _0x5f21c9 of _0x229286){const _0x49a823=a0_0x21eb3c[_0xda0e1e(0xde)+(_0x5f21c9[_0xda0e1e(0xf1)](0x0)[_0xda0e1e(0x10c)]()+_0x5f21c9[_0xda0e1e(0x137)](0x1))]();for(const _0x556ceb of _0x49a823){const _0x1040af=await a0_0x21eb3c[_0xda0e1e(0xf7)](_0xda0e1e(0xea)+_0x5f21c9+'s/'+_0x556ceb);try{await lockNoti(_0xda0e1e(0x11b),_0x556ceb,0xbb8),await dpUploadFile(_0x556ceb,_0x1040af,_0x5f21c9);}catch(_0x5d7f24){console[_0xda0e1e(0x121)](_0xda0e1e(0xf6)+_0x556ceb+':',_0x5d7f24);}}}else console['log']('Restore\x20canceled\x20by\x20user.');}}),dropboxCloud[_0x516f54(0x117)](_0x516f54(0x13a),function(){var _0x256267=_0x516f54;const _0x34715b=localStorage[_0x256267(0xed)]('uId');_0x34715b===null||_0x34715b===''?authorizeWithDropbox():window[_0x256267(0x131)](_0x256267(0x139))&&(localStorage[_0x256267(0x103)](_0x256267(0x135),''),dropboxRestore[_0x256267(0xef)][_0x256267(0xfb)](_0x256267(0xd8)),dropboxBackup[_0x256267(0xef)][_0x256267(0xfb)](_0x256267(0xd8)),dropboxCloud[_0x256267(0xef)][_0x256267(0xfb)](_0x256267(0xd8)));}),handleDropboxCallback();});function a0_0x5377(){var _0x3e02ce=['Failed\x20to\x20upload\x20file\x20','downloadFileInCloud','file','map','https://content.dropboxapi.com/2/files/upload','remove','Folder\x20already\x20exists','Wait\x20a\x20little\x20bit...','Kabu\x20storage\x20↦\x20Cloud\x20◆','Failed\x20to\x20refresh\x20Dropbox\x20token.','https://content.dropboxapi.com/2/files/download','https://api.dropboxapi.com/2/files/create_folder_v2','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','setItem','95389uZGSlI','27BycgEC','replace','Refreshing\x20token...','No\x20refresh\x20token','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','stringify','refresh_token=','toUpperCase','state','.tag','accessToken','access_token','&grant_type=','responseText','folder','log','push','Error\x20creating\x20folder\x20','addEventListener','split','code','name','Backing\x20up...','3050110YMnSNm','Do\x20not\x20receive\x20authorization','application/x-www-form-urlencoded','&redirect_uri=','application/json','error','617619mLoUwt','Restore\x20canceled\x20by\x20user.','code=','send','5VgnTqe','onload','4795564KnZfcW','length','[\x5c?&#]','Cloud\x20↦\x20Kabu\x20storage\x20◆','knh3uz2mx2hp2eu','Bearer\x20','uploadFileInCloud','uid','Do\x20you\x20want\x20to\x20restore\x20','confirm','exec','571159SSJGhy',',\x20status:\x20','uId','No\x20files\x20found\x20to\x20restore.','slice','setRequestHeader','Do\x20you\x20want\x20to\x20logout?','click','POST','8498208MpDvIy','parse','=([^&#]*)','status','\x20files\x20in\x20Kabu?','Authorization\x20Code:','&client_id=','https://api.dropboxapi.com/2/files/list_folder','error_description','active','&client_secret=','application/octet-stream','Folder\x20created','refreshToken','Unable\x20to\x20refresh\x20token','list','\x20files\x20from\x20Cloud?','screenshot','&token_access_type=','refresh_token','open','location','alert','Download\x20failed\x20for\x20','Upload\x20failed,\x20unknown\x20http\x20status:\x20','914388MYtAVn','Cloud\x20login\x20required!','/data/','Restoring...','offline','getItem','json','classList','href','charAt','save','blob','14ubUfnY','filter'];a0_0x5377=function(){return _0x3e02ce;};return a0_0x5377();}