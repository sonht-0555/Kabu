var a0_0x1f61c0=a0_0x6911;(function(_0x17ee05,_0x3b45e5){var _0x3c068a=a0_0x6911,_0x499fab=_0x17ee05();while(!![]){try{var _0x272eec=-parseInt(_0x3c068a(0x193))/0x1*(parseInt(_0x3c068a(0x1bf))/0x2)+-parseInt(_0x3c068a(0x19f))/0x3+-parseInt(_0x3c068a(0x1cd))/0x4+parseInt(_0x3c068a(0x1aa))/0x5*(-parseInt(_0x3c068a(0x1de))/0x6)+-parseInt(_0x3c068a(0x1d1))/0x7*(parseInt(_0x3c068a(0x1a8))/0x8)+parseInt(_0x3c068a(0x196))/0x9+parseInt(_0x3c068a(0x1ec))/0xa;if(_0x272eec===_0x3b45e5)break;else _0x499fab['push'](_0x499fab['shift']());}catch(_0x405949){_0x499fab['push'](_0x499fab['shift']());}}}(a0_0x3559,0x7ae71));import*as a0_0x32c9f8 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x1f61c0(0x198),clientSecret=a0_0x1f61c0(0x1c7);function authorizeWithDropbox(){var _0x3bee2b=a0_0x1f61c0,_0x359a99=window[_0x3bee2b(0x1f8)][_0x3bee2b(0x1a3)][_0x3bee2b(0x1c2)]('?')[0x0],_0x1564e8=_0x3bee2b(0x1f2),_0x28f4d7=_0x3bee2b(0x1ab),_0x251deb=_0x3bee2b(0x199)+clientId+'&response_type='+_0x1564e8+_0x3bee2b(0x1da)+_0x28f4d7+_0x3bee2b(0x1b7)+encodeURIComponent(_0x359a99);window['location'][_0x3bee2b(0x1a3)]=_0x251deb;}function handleDropboxCallback(){var _0x571821=a0_0x1f61c0,_0x1a1d1e=getUrlParameter(_0x571821(0x1f2));_0x1a1d1e?(getAccessToken(_0x1a1d1e),console[_0x571821(0x1d9)](_0x571821(0x1f3),_0x1a1d1e)):console[_0x571821(0x1d9)](_0x571821(0x1b4));}function getUrlParameter(_0x517d33){var _0x43c9ec=a0_0x1f61c0;_0x517d33=_0x517d33[_0x43c9ec(0x1f5)](/[\[]/,'\x5c[')[_0x43c9ec(0x1f5)](/[\]]/,'\x5c]');var _0x4ba6c6=new RegExp(_0x43c9ec(0x1d4)+_0x517d33+_0x43c9ec(0x1ae)),_0x253182=_0x4ba6c6[_0x43c9ec(0x1a4)](location['search']);return _0x253182===null?'':decodeURIComponent(_0x253182[0x1]['replace'](/\+/g,'\x20'));}function a0_0x6911(_0x4d016e,_0x45f6ce){var _0x35598a=a0_0x3559();return a0_0x6911=function(_0x691194,_0x4400f8){_0x691194=_0x691194-0x190;var _0x24c755=_0x35598a[_0x691194];return _0x24c755;},a0_0x6911(_0x4d016e,_0x45f6ce);}function getAccessToken(_0x16915b){var _0x297b57=a0_0x1f61c0,_0x31bff8=_0x297b57(0x1e3),_0x3ac208=window[_0x297b57(0x1f8)][_0x297b57(0x1a3)][_0x297b57(0x1c2)]('?')[0x0],_0x17feea=new XMLHttpRequest();_0x17feea[_0x297b57(0x1cf)](_0x297b57(0x192),'https://api.dropbox.com/oauth2/token'),_0x17feea[_0x297b57(0x1f9)]('Content-Type',_0x297b57(0x1c5)),_0x17feea[_0x297b57(0x1ed)]=function(){var _0x4dabf6=_0x297b57;if(_0x17feea['status']===0xc8){var _0x202e32=JSON[_0x4dabf6(0x195)](_0x17feea[_0x4dabf6(0x1c1)]),_0x3c5d18=_0x202e32[_0x4dabf6(0x1b5)],_0x1221f8=_0x202e32[_0x4dabf6(0x1e6)],_0x27ad0c=_0x202e32[_0x4dabf6(0x1f4)];localStorage[_0x4dabf6(0x191)](_0x4dabf6(0x1d5),_0x3c5d18),localStorage[_0x4dabf6(0x191)]('refreshToken',_0x1221f8),localStorage[_0x4dabf6(0x191)]('uId',_0x27ad0c);}else console['log'](_0x4dabf6(0x1cb));},_0x17feea['send'](_0x297b57(0x1ea)+_0x16915b+'&grant_type='+_0x31bff8+_0x297b57(0x1f6)+clientId+_0x297b57(0x1a9)+clientSecret+_0x297b57(0x1b7)+encodeURIComponent(_0x3ac208));}export async function dpCreateFolder(_0x4454a3){var _0x3cc15c=a0_0x1f61c0;const _0x3f2319=localStorage[_0x3cc15c(0x1d7)](_0x3cc15c(0x1a1));let _0xd427c3=localStorage[_0x3cc15c(0x1d7)](_0x3cc15c(0x1d5));const _0x993ea6='/'+_0x3f2319+'/'+_0x4454a3,_0x3d4572=JSON['stringify']({'path':_0x993ea6,'autorename':![]});for(let _0x21e225=0x0;_0x21e225<0x2;_0x21e225++){try{const _0x2a109b=await fetch(_0x3cc15c(0x1f0),{'method':'POST','headers':{'Authorization':_0x3cc15c(0x1db)+_0xd427c3,'Content-Type':_0x3cc15c(0x1a6)},'body':_0x3d4572});if(_0x2a109b['status']===0x191){const _0x2ec8b6=await dpRefreshToken();if(!_0x2ec8b6)throw new Error(_0x3cc15c(0x1c3));_0xd427c3=localStorage[_0x3cc15c(0x1d7)](_0x3cc15c(0x1d5));continue;}if(_0x2a109b[_0x3cc15c(0x1e2)]===0x199)return{'message':_0x3cc15c(0x1ca),'path':_0x4454a3};if(!_0x2a109b['ok'])throw new Error(_0x3cc15c(0x1ad)+_0x4454a3);const _0x3730c6=await _0x2a109b['json']();return await lockNoti('Folder\x20created','',0xbb8),_0x3730c6;}catch(_0x5d23e6){if(_0x21e225===0x1)throw _0x5d23e6;}}return![];}export async function dpRefreshToken(){var _0x3600bc=a0_0x1f61c0;if(!localStorage['getItem'](_0x3600bc(0x19e)))throw'No\x20refresh\x20token';try{const _0x4e0989=await fetch('https://api.dropboxapi.com/oauth2/token',{'method':_0x3600bc(0x192),'headers':{'Content-Type':_0x3600bc(0x1c5)},'body':_0x3600bc(0x1b3)+localStorage[_0x3600bc(0x1d7)](_0x3600bc(0x19e))+_0x3600bc(0x1c4)}),_0x1659df=await _0x4e0989[_0x3600bc(0x1f7)]();if(!_0x1659df['error'])return localStorage['setItem']('accessToken',_0x1659df[_0x3600bc(0x1b5)]),await lockNoti(_0x3600bc(0x1f1),'',0xbb8),await delay(0x3e8),!![];else alert(_0x1659df[_0x3600bc(0x1e7)]||'Failed\x20to\x20refresh\x20Dropbox\x20token.');}catch(_0x1218be){console[_0x3600bc(0x194)](_0x3600bc(0x19a),_0x1218be);}return![];}export async function dpUploadFile(_0x1d3c16,_0xcd9d00,_0x25e977){var _0x550597=a0_0x1f61c0;const _0x165419=localStorage['getItem'](_0x550597(0x1a1));var _0x41e9bb=JSON[_0x550597(0x1b0)]({'autorename':!![],'mode':_0x550597(0x1ba),'mute':!![],'strict_conflict':![],'path':'/'+_0x165419+'/'+_0x25e977+'/'+_0x1d3c16}),_0x1c2e61=new Blob([_0xcd9d00],{'type':_0x550597(0x1a7)});for(var _0x14cf92=0x0;_0x14cf92<0x2;_0x14cf92++){var _0x561e37=await fetch(_0x550597(0x19b),{'method':_0x550597(0x192),'headers':{'Authorization':_0x550597(0x1db)+localStorage[_0x550597(0x1d7)]('accessToken'),'Dropbox-API-Arg':_0x41e9bb,'Content-Type':_0x550597(0x1a7)},'body':_0x1c2e61});if(_0x561e37[_0x550597(0x1e2)]!=0xc8){if(_0x561e37[_0x550597(0x1e2)]==0x191){var _0x3a9b71=await dpRefreshToken();if(!_0x3a9b71)throw _0x550597(0x1c3);continue;}else throw _0x550597(0x1e9)+_0x561e37[_0x550597(0x1e2)];}else{var _0x24734d=await _0x561e37[_0x550597(0x1f7)]();return console[_0x550597(0x1d9)](_0x550597(0x1a5),_0x1d3c16),_0x24734d;}}return![];}export async function dpDownloadFile(_0x55a5b2,_0x52092c){var _0x8a2508=a0_0x1f61c0;const _0x332731=localStorage[_0x8a2508(0x1d7)](_0x8a2508(0x1a1));var _0x510f9c=JSON['stringify']({'path':'/'+_0x332731+'/'+_0x52092c+'/'+_0x55a5b2});for(var _0x151d06=0x0;_0x151d06<0x2;_0x151d06++){var _0x4649ef=await fetch(_0x8a2508(0x1c9),{'method':_0x8a2508(0x192),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x8a2508(0x1d7)](_0x8a2508(0x1d5)),'Dropbox-API-Arg':_0x510f9c}});if(_0x4649ef[_0x8a2508(0x1e2)]!=0xc8){if(_0x4649ef[_0x8a2508(0x1e2)]==0x191){var _0x55547a=await dpRefreshToken();if(!_0x55547a)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x8a2508(0x1b8)+_0x4649ef[_0x8a2508(0x1e2)];}const _0x1296aa=new File([await _0x4649ef[_0x8a2508(0x19c)]()],_0x55a5b2);return console[_0x8a2508(0x1d9)]('Cloud\x20↦\x20Kabu\x20storage\x20◆',_0x1296aa[_0x8a2508(0x1c6)]),a0_0x32c9f8[_0x8a2508(0x1c8)](_0x1296aa,()=>{}),_0x1296aa;}return![];}document[a0_0x1f61c0(0x1b9)](a0_0x1f61c0(0x1e8),function(){var _0x3e6c29=a0_0x1f61c0;dropboxRestore['addEventListener'](_0x3e6c29(0x1cc),async function(){var _0x59b507=_0x3e6c29;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x5da886=localStorage['getItem']('uId'),_0x40c311=[_0x59b507(0x1e1),_0x59b507(0x1bb),_0x59b507(0x1be)];if(!_0x5da886){window[_0x59b507(0x1ce)](_0x59b507(0x1d3));return;}let _0x3e959d=[];for(const _0x100130 of _0x40c311){let _0x3902cd={'path':'/'+_0x5da886+'/'+_0x100130};for(let _0x2523a8=0x0;_0x2523a8<0x2;_0x2523a8++){let _0x2f986e=await fetch(_0x59b507(0x1bd),{'method':'POST','headers':{'Authorization':_0x59b507(0x1db)+localStorage[_0x59b507(0x1d7)]('accessToken'),'Content-Type':_0x59b507(0x1a6)},'body':JSON[_0x59b507(0x1b0)](_0x3902cd)});if(_0x2f986e[_0x59b507(0x1e2)]===0xc8){let _0xf277b2=await _0x2f986e[_0x59b507(0x1f7)](),_0x4bfc5f=_0xf277b2['entries'][_0x59b507(0x1d6)](_0x5d8f9a=>_0x5d8f9a[_0x59b507(0x1e4)]==='file');_0x4bfc5f[_0x59b507(0x197)]>0x0&&_0x3e959d[_0x59b507(0x1dd)](..._0x4bfc5f[_0x59b507(0x1ee)](_0x3d5437=>({'name':_0x3d5437[_0x59b507(0x1c6)],'folder':_0x100130})));break;}else{if(_0x2f986e[_0x59b507(0x1e2)]===0x191){let _0x3c0baa=await dpRefreshToken();if(!_0x3c0baa)throw _0x59b507(0x1c3);}else{console[_0x59b507(0x194)]('Download\x20failed\x20for\x20'+_0x100130+_0x59b507(0x1ef)+_0x2f986e[_0x59b507(0x1e2)]);break;}}}}if(_0x3e959d[_0x59b507(0x197)]>0x0){const _0x1da263=_0x59b507(0x1d2)+_0x3e959d[_0x59b507(0x197)]+_0x59b507(0x190);if(window[_0x59b507(0x1df)](_0x1da263))for(const _0x322d65 of _0x3e959d){await lockNoti(_0x59b507(0x1e5),_0x322d65['name'],0xbb8),await dpDownloadFile(_0x322d65[_0x59b507(0x1c6)],_0x322d65[_0x59b507(0x1eb)]);}else console['log'](_0x59b507(0x1d0));}else console[_0x59b507(0x1d9)](_0x59b507(0x1ac));}),dropboxBackup[_0x3e6c29(0x1b9)](_0x3e6c29(0x1cc),async function(){var _0x112966=_0x3e6c29;await lockNoti(_0x112966(0x1bc),'',0x1388);const _0x33024b=localStorage[_0x112966(0x1d7)](_0x112966(0x1a1));if(_0x33024b===null||_0x33024b==='')window[_0x112966(0x1ce)](_0x112966(0x1d3));else{const _0x2d5eb2=['state',_0x112966(0x1bb),'screenshot'];for(const _0x213151 of _0x2d5eb2){await dpCreateFolder(_0x213151);}let _0x1cb0b8=0x0;for(const _0x2981ea of _0x2d5eb2){const _0x2d1ccc=a0_0x32c9f8[_0x112966(0x1dc)](_0x2981ea+'s');_0x1cb0b8+=_0x2d1ccc[_0x112966(0x197)];}if(window['confirm'](_0x112966(0x19d)+_0x1cb0b8+_0x112966(0x1e0)))for(const _0x27823f of _0x2d5eb2){const _0x5de8cc=a0_0x32c9f8[_0x112966(0x1dc)](_0x27823f+'s');for(const _0x271688 of _0x5de8cc){const _0x2816ac=await a0_0x32c9f8[_0x112966(0x1d8)](_0x112966(0x1c0)+_0x27823f+'s/'+_0x271688);try{await lockNoti(_0x112966(0x1a0),_0x271688,0xbb8),await dpUploadFile(_0x271688,_0x2816ac,_0x27823f);}catch(_0x244151){console[_0x112966(0x194)](_0x112966(0x1a2)+_0x271688+':',_0x244151);}}}else console[_0x112966(0x1d9)](_0x112966(0x1d0));}}),dropboxCloud['addEventListener'](_0x3e6c29(0x1cc),function(){var _0x15d30a=_0x3e6c29;const _0x3301fc=localStorage[_0x15d30a(0x1d7)]('uId');_0x3301fc===null||_0x3301fc===''?authorizeWithDropbox():window['confirm'](_0x15d30a(0x1b1))&&(localStorage[_0x15d30a(0x191)](_0x15d30a(0x1a1),''),dropboxRestore[_0x15d30a(0x1af)][_0x15d30a(0x1b6)](_0x15d30a(0x1b2)),dropboxBackup[_0x15d30a(0x1af)][_0x15d30a(0x1b6)]('active'),dropboxCloud[_0x15d30a(0x1af)][_0x15d30a(0x1b6)](_0x15d30a(0x1b2)));}),handleDropboxCallback();});function a0_0x3559(){var _0x51d8c5=['104915ysZtBL','error','parse','6503031aLOzpD','length','knh3uz2mx2hp2eu','https://www.dropbox.com/oauth2/authorize?client_id=','Error\x20while\x20refreshing\x20token:','https://content.dropboxapi.com/2/files/upload','blob','Do\x20you\x20want\x20to\x20backup\x20','refreshToken','1337850HQUheL','Backing\x20up...','uId','Failed\x20to\x20upload\x20file\x20','href','exec','Kabu\x20storage\x20↦\x20Cloud\x20◆','application/json','application/octet-stream','154840HAaYnO','&client_secret=','950335hgdVzC','offline','No\x20files\x20found\x20to\x20restore.','Error\x20creating\x20folder\x20','=([^&#]*)','classList','stringify','Do\x20you\x20want\x20to\x20logout?','active','refresh_token=','Do\x20not\x20receive\x20authorization','access_token','remove','&redirect_uri=','Download\x20failed,\x20unknown\x20http\x20status:','addEventListener','overwrite','save','Wait\x20a\x20little\x20bit...','https://api.dropboxapi.com/2/files/list_folder','screenshot','2zIEyML','/data/','responseText','split','Unable\x20to\x20refresh\x20token','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','application/x-www-form-urlencoded','name','nwb3dnfh09rhs31','uploadFileInCloud','https://content.dropboxapi.com/2/files/download','Folder\x20already\x20exists','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','click','903352QtXsaO','alert','open','Restore\x20canceled\x20by\x20user.','245dFnhqL','Do\x20you\x20want\x20to\x20restore\x20','Cloud\x20login\x20required!','[\x5c?&#]','accessToken','filter','getItem','downloadFileInCloud','log','&token_access_type=','Bearer\x20','listFiles','push','6AyyvfQ','confirm','\x20files\x20in\x20Kabu?','state','status','authorization_code','.tag','Restoring...','refresh_token','error_description','DOMContentLoaded','Upload\x20failed,\x20unknown\x20http\x20status:\x20','code=','folder','14250450rpklGn','onload','map',',\x20status:\x20','https://api.dropboxapi.com/2/files/create_folder_v2','Refreshing\x20token...','code','Authorization\x20Code:','uid','replace','&client_id=','json','location','setRequestHeader','\x20files\x20from\x20Cloud?','setItem','POST'];a0_0x3559=function(){return _0x51d8c5;};return a0_0x3559();}