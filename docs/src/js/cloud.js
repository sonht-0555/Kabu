var a0_0x4d8e5c=a0_0x5d34;(function(_0x56affd,_0x5da586){var _0x4ae486=a0_0x5d34,_0x23e4ac=_0x56affd();while(!![]){try{var _0xb2ec8b=-parseInt(_0x4ae486(0x1e1))/0x1*(parseInt(_0x4ae486(0x21b))/0x2)+parseInt(_0x4ae486(0x1f0))/0x3+parseInt(_0x4ae486(0x1e5))/0x4+parseInt(_0x4ae486(0x23f))/0x5*(parseInt(_0x4ae486(0x22e))/0x6)+parseInt(_0x4ae486(0x1ef))/0x7*(-parseInt(_0x4ae486(0x202))/0x8)+-parseInt(_0x4ae486(0x22c))/0x9*(-parseInt(_0x4ae486(0x205))/0xa)+parseInt(_0x4ae486(0x207))/0xb*(-parseInt(_0x4ae486(0x22a))/0xc);if(_0xb2ec8b===_0x5da586)break;else _0x23e4ac['push'](_0x23e4ac['shift']());}catch(_0x4591a2){_0x23e4ac['push'](_0x23e4ac['shift']());}}}(a0_0x4bab,0xe9d68));import*as a0_0x4790f0 from'./main.js';function a0_0x5d34(_0x180af2,_0x50a4f6){var _0x4babe1=a0_0x4bab();return a0_0x5d34=function(_0x5d3457,_0x32ec90){_0x5d3457=_0x5d3457-0x1df;var _0x267a5b=_0x4babe1[_0x5d3457];return _0x267a5b;},a0_0x5d34(_0x180af2,_0x50a4f6);}import{localStorageFile}from'./storage.js';var clientId=a0_0x4d8e5c(0x1ee),clientSecret='nwb3dnfh09rhs31';function a0_0x4bab(){var _0x359a5a=['code=','status','64EVzgeZ','code','folder','4230EwKZwp','Upload\x20failed,\x20unknown\x20http\x20status:\x20','11aXEFuu','charAt','Download\x20failed,\x20unknown\x20http\x20status:','refreshToken','Cloud\x20↦\x20Kabu\x20storage\x20◆','&client_id=','=([^&#]*)','active','classList','Folder\x20created','push','href','remove','getItem','screenshot','Unable\x20to\x20refresh\x20token','error','application/json','accessToken','authorization_code','3244588LboZgm','https://api.dropboxapi.com/2/files/create_folder_v2','Download\x20failed\x20for\x20','&redirect_uri=','&response_type=','refresh_token','state','application/x-www-form-urlencoded','parse','blob','location','[\x5c?&#]','Refreshing\x20token...','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','Failed\x20to\x20refresh\x20Dropbox\x20token.','2702136NAXvMp','list','29097lQJLmJ','responseText','12SNeROE','\x20files\x20from\x20Cloud?','json','save','Error\x20while\x20refreshing\x20token:','POST','click','replace','name','length','slice','onload','log','https://api.dropboxapi.com/oauth2/token','send','Cloud\x20login\x20required!','No\x20refresh\x20token','1088735nQxpYT','addEventListener','Restore\x20canceled\x20by\x20user.','Do\x20not\x20receive\x20authorization','Restoring...','Bearer\x20','uid','Error\x20creating\x20folder\x20','Content-Type','\x20files\x20in\x20Kabu?','offline','1uBMlyx','uId','Backing\x20up...','Do\x20you\x20want\x20to\x20logout?','4012364vYbMeV','Kabu\x20storage\x20↦\x20Cloud\x20◆','split','Authorization\x20Code:',',\x20status:\x20','map','application/octet-stream','https://api.dropbox.com/oauth2/token','toUpperCase','knh3uz2mx2hp2eu','731668DUaSkl','2505960KkIBBA','alert','stringify','https://www.dropbox.com/oauth2/authorize?client_id=','setItem','Do\x20you\x20want\x20to\x20restore\x20','Failed\x20to\x20upload\x20file\x20','/data/','Wait\x20a\x20little\x20bit...','&grant_type=','Do\x20you\x20want\x20to\x20backup\x20','confirm','access_token','setRequestHeader','&client_secret=','No\x20files\x20found\x20to\x20restore.'];a0_0x4bab=function(){return _0x359a5a;};return a0_0x4bab();}function authorizeWithDropbox(){var _0xdd3ce6=a0_0x4d8e5c,_0x952643=window['location'][_0xdd3ce6(0x212)][_0xdd3ce6(0x1e7)]('?')[0x0],_0xe62809=_0xdd3ce6(0x203),_0x316f7f=_0xdd3ce6(0x1e0),_0x397097=_0xdd3ce6(0x1f3)+clientId+_0xdd3ce6(0x21f)+_0xe62809+'&token_access_type='+_0x316f7f+'&redirect_uri='+encodeURIComponent(_0x952643);window[_0xdd3ce6(0x225)][_0xdd3ce6(0x212)]=_0x397097;}function handleDropboxCallback(){var _0x13208a=a0_0x4d8e5c,_0x1ab369=getUrlParameter(_0x13208a(0x203));_0x1ab369?(getAccessToken(_0x1ab369),console['log'](_0x13208a(0x1e8),_0x1ab369)):console[_0x13208a(0x23a)](_0x13208a(0x242));}function getUrlParameter(_0x2ef8db){var _0x51781f=a0_0x4d8e5c;_0x2ef8db=_0x2ef8db[_0x51781f(0x235)](/[\[]/,'\x5c[')[_0x51781f(0x235)](/[\]]/,'\x5c]');var _0x5592e9=new RegExp(_0x51781f(0x226)+_0x2ef8db+_0x51781f(0x20d)),_0x5913a0=_0x5592e9['exec'](location['search']);return _0x5913a0===null?'':decodeURIComponent(_0x5913a0[0x1][_0x51781f(0x235)](/\+/g,'\x20'));}function getAccessToken(_0x174fb2){var _0x5f542d=a0_0x4d8e5c,_0x41935c=_0x5f542d(0x21a),_0x3dedf2=window[_0x5f542d(0x225)]['href'][_0x5f542d(0x1e7)]('?')[0x0],_0x4886a9=new XMLHttpRequest();_0x4886a9['open'](_0x5f542d(0x233),_0x5f542d(0x1ec)),_0x4886a9[_0x5f542d(0x1fd)](_0x5f542d(0x247),_0x5f542d(0x222)),_0x4886a9[_0x5f542d(0x239)]=function(){var _0x3b24f4=_0x5f542d;if(_0x4886a9[_0x3b24f4(0x201)]===0xc8){var _0x2130a9=JSON[_0x3b24f4(0x223)](_0x4886a9[_0x3b24f4(0x22d)]),_0x4a6dd6=_0x2130a9['access_token'],_0x58fe32=_0x2130a9[_0x3b24f4(0x220)],_0x47cc4b=_0x2130a9[_0x3b24f4(0x245)];localStorage[_0x3b24f4(0x1f4)](_0x3b24f4(0x219),_0x4a6dd6),localStorage['setItem'](_0x3b24f4(0x20a),_0x58fe32),localStorage[_0x3b24f4(0x1f4)]('uId',_0x47cc4b);}else console['log']('Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token');},_0x4886a9[_0x5f542d(0x23c)](_0x5f542d(0x200)+_0x174fb2+_0x5f542d(0x1f9)+_0x41935c+_0x5f542d(0x20c)+clientId+_0x5f542d(0x1fe)+clientSecret+_0x5f542d(0x21e)+encodeURIComponent(_0x3dedf2));}export async function dpCreateFolder(_0x276f39){var _0x34937e=a0_0x4d8e5c;const _0x27e4c2=localStorage[_0x34937e(0x214)]('uId');let _0x42fe6e=localStorage[_0x34937e(0x214)]('accessToken');const _0x29e8ab='/'+_0x27e4c2+'/'+_0x276f39,_0x5aee4c=JSON[_0x34937e(0x1f2)]({'path':_0x29e8ab,'autorename':![]});for(let _0x94bd13=0x0;_0x94bd13<0x2;_0x94bd13++){try{const _0x2a6c5e=await fetch(_0x34937e(0x21c),{'method':_0x34937e(0x233),'headers':{'Authorization':'Bearer\x20'+_0x42fe6e,'Content-Type':_0x34937e(0x218)},'body':_0x5aee4c});if(_0x2a6c5e[_0x34937e(0x201)]===0x191){const _0x2784db=await dpRefreshToken();if(!_0x2784db)throw new Error(_0x34937e(0x216));_0x42fe6e=localStorage[_0x34937e(0x214)](_0x34937e(0x219));continue;}if(_0x2a6c5e['status']===0x199)return{'message':'Folder\x20already\x20exists','path':_0x276f39};if(!_0x2a6c5e['ok'])throw new Error(_0x34937e(0x246)+_0x276f39);const _0x4953ca=await _0x2a6c5e[_0x34937e(0x230)]();return await lockNoti(_0x34937e(0x210),'',0xbb8),_0x4953ca;}catch(_0x5cef54){if(_0x94bd13===0x1)throw _0x5cef54;}}return![];}export async function dpRefreshToken(){var _0x2bfc2e=a0_0x4d8e5c;if(!localStorage[_0x2bfc2e(0x214)](_0x2bfc2e(0x20a)))throw _0x2bfc2e(0x23e);try{const _0x4a16e5=await fetch(_0x2bfc2e(0x23b),{'method':_0x2bfc2e(0x233),'headers':{'Content-Type':_0x2bfc2e(0x222)},'body':'refresh_token='+localStorage[_0x2bfc2e(0x214)]('refreshToken')+_0x2bfc2e(0x228)}),_0xcf2850=await _0x4a16e5[_0x2bfc2e(0x230)]();if(!_0xcf2850['error'])return localStorage[_0x2bfc2e(0x1f4)](_0x2bfc2e(0x219),_0xcf2850[_0x2bfc2e(0x1fc)]),await lockNoti(_0x2bfc2e(0x227),'',0xbb8),await delay(0x3e8),!![];else alert(_0xcf2850['error_description']||_0x2bfc2e(0x229));}catch(_0x90a9b6){console[_0x2bfc2e(0x217)](_0x2bfc2e(0x232),_0x90a9b6);}return![];}export async function dpUploadFile(_0x18fb28,_0x2d287c,_0x35b503){var _0x4af8b3=a0_0x4d8e5c;const _0x38c79f=localStorage[_0x4af8b3(0x214)](_0x4af8b3(0x1e2));var _0x4c63a8=JSON[_0x4af8b3(0x1f2)]({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x38c79f+'/'+_0x35b503+'/'+_0x18fb28}),_0x326c85=new Blob([_0x2d287c],{'type':'application/octet-stream'});for(var _0x17b77c=0x0;_0x17b77c<0x2;_0x17b77c++){var _0x596eb5=await fetch('https://content.dropboxapi.com/2/files/upload',{'method':_0x4af8b3(0x233),'headers':{'Authorization':_0x4af8b3(0x244)+localStorage[_0x4af8b3(0x214)](_0x4af8b3(0x219)),'Dropbox-API-Arg':_0x4c63a8,'Content-Type':_0x4af8b3(0x1eb)},'body':_0x326c85});if(_0x596eb5[_0x4af8b3(0x201)]!=0xc8){if(_0x596eb5['status']==0x191){var _0x15d741=await dpRefreshToken();if(!_0x15d741)throw _0x4af8b3(0x216);continue;}else throw _0x4af8b3(0x206)+_0x596eb5[_0x4af8b3(0x201)];}else{var _0x1d7676=await _0x596eb5[_0x4af8b3(0x230)]();return console[_0x4af8b3(0x23a)](_0x4af8b3(0x1e6),_0x18fb28),_0x1d7676;}}return![];}export async function dpDownloadFile(_0x12a3ca,_0x3a5fdd){var _0x12e64e=a0_0x4d8e5c;const _0x367d4e=localStorage['getItem']('uId');var _0x4779e8=JSON['stringify']({'path':'/'+_0x367d4e+'/'+_0x3a5fdd+'/'+_0x12a3ca});for(var _0x522f9b=0x0;_0x522f9b<0x2;_0x522f9b++){var _0x56d09f=await fetch('https://content.dropboxapi.com/2/files/download',{'method':'POST','headers':{'Authorization':'Bearer\x20'+localStorage[_0x12e64e(0x214)](_0x12e64e(0x219)),'Dropbox-API-Arg':_0x4779e8}});if(_0x56d09f[_0x12e64e(0x201)]!=0xc8){if(_0x56d09f[_0x12e64e(0x201)]==0x191){var _0x239070=await dpRefreshToken();if(!_0x239070)throw _0x12e64e(0x216);continue;}else throw _0x12e64e(0x209)+_0x56d09f[_0x12e64e(0x201)];}const _0x41bca0=new File([await _0x56d09f[_0x12e64e(0x224)]()],_0x12a3ca);return console[_0x12e64e(0x23a)](_0x12e64e(0x20b),_0x41bca0[_0x12e64e(0x236)]),a0_0x4790f0['uploadFileInCloud'](_0x41bca0,()=>{}),_0x41bca0;}return![];}document[a0_0x4d8e5c(0x240)]('DOMContentLoaded',function(){var _0x44c113=a0_0x4d8e5c;dropboxRestore[_0x44c113(0x240)](_0x44c113(0x234),async function(){var _0xc014fb=_0x44c113;await lockNoti(_0xc014fb(0x1f8),'',0x1388);const _0x527238=localStorage['getItem'](_0xc014fb(0x1e2)),_0x1de3bc=[_0xc014fb(0x221),_0xc014fb(0x231),_0xc014fb(0x215)];if(!_0x527238){window[_0xc014fb(0x1f1)](_0xc014fb(0x23d));return;}let _0x5cfbeb=[];for(const _0x277cd8 of _0x1de3bc){let _0x30ad1f={'path':'/'+_0x527238+'/'+_0x277cd8};for(let _0xa06d3=0x0;_0xa06d3<0x2;_0xa06d3++){let _0x2ffdef=await fetch('https://api.dropboxapi.com/2/files/list_folder',{'method':_0xc014fb(0x233),'headers':{'Authorization':'Bearer\x20'+localStorage[_0xc014fb(0x214)](_0xc014fb(0x219)),'Content-Type':_0xc014fb(0x218)},'body':JSON[_0xc014fb(0x1f2)](_0x30ad1f)});if(_0x2ffdef[_0xc014fb(0x201)]===0xc8){let _0x5897d5=await _0x2ffdef[_0xc014fb(0x230)](),_0x31e1c1=_0x5897d5['entries']['filter'](_0x656047=>_0x656047['.tag']==='file');_0x31e1c1[_0xc014fb(0x237)]>0x0&&_0x5cfbeb[_0xc014fb(0x211)](..._0x31e1c1[_0xc014fb(0x1ea)](_0x5d1853=>({'name':_0x5d1853[_0xc014fb(0x236)],'folder':_0x277cd8})));break;}else{if(_0x2ffdef[_0xc014fb(0x201)]===0x191){let _0x5cd81e=await dpRefreshToken();if(!_0x5cd81e)throw _0xc014fb(0x216);}else{console[_0xc014fb(0x217)](_0xc014fb(0x21d)+_0x277cd8+_0xc014fb(0x1e9)+_0x2ffdef[_0xc014fb(0x201)]);break;}}}}if(_0x5cfbeb[_0xc014fb(0x237)]>0x0){const _0x2e1ea5=_0xc014fb(0x1f5)+_0x5cfbeb[_0xc014fb(0x237)]+_0xc014fb(0x22f);if(window[_0xc014fb(0x1fb)](_0x2e1ea5))for(const _0x19318d of _0x5cfbeb){await lockNoti(_0xc014fb(0x243),_0x19318d[_0xc014fb(0x236)],0xbb8),await dpDownloadFile(_0x19318d[_0xc014fb(0x236)],_0x19318d[_0xc014fb(0x204)]);}else console['log'](_0xc014fb(0x241));}else console[_0xc014fb(0x23a)](_0xc014fb(0x1ff));}),dropboxBackup[_0x44c113(0x240)](_0x44c113(0x234),async function(){var _0x98d727=_0x44c113;await lockNoti(_0x98d727(0x1f8),'',0x1388);const _0x362fa3=localStorage[_0x98d727(0x214)](_0x98d727(0x1e2));if(_0x362fa3===null||_0x362fa3==='')window[_0x98d727(0x1f1)](_0x98d727(0x23d));else{const _0x3f3128=[_0x98d727(0x221),_0x98d727(0x231),_0x98d727(0x215)];for(const _0x471ab3 of _0x3f3128){await dpCreateFolder(_0x471ab3);}let _0x5daf16=0x0;for(const _0x44aae2 of _0x3f3128){const _0x649f72=a0_0x4790f0[_0x98d727(0x22b)+(_0x44aae2[_0x98d727(0x208)](0x0)['toUpperCase']()+_0x44aae2[_0x98d727(0x238)](0x1))]();_0x5daf16+=_0x649f72[_0x98d727(0x237)];}if(window[_0x98d727(0x1fb)](_0x98d727(0x1fa)+_0x5daf16+_0x98d727(0x1df)))for(const _0x576cba of _0x3f3128){const _0x436730=a0_0x4790f0[_0x98d727(0x22b)+(_0x576cba[_0x98d727(0x208)](0x0)[_0x98d727(0x1ed)]()+_0x576cba[_0x98d727(0x238)](0x1))]();for(const _0x43d262 of _0x436730){const _0x237aea=await a0_0x4790f0['downloadFileInCloud'](_0x98d727(0x1f7)+_0x576cba+'s/'+_0x43d262);try{await lockNoti(_0x98d727(0x1e3),_0x43d262,0xbb8),await dpUploadFile(_0x43d262,_0x237aea,_0x576cba);}catch(_0x58df63){console[_0x98d727(0x217)](_0x98d727(0x1f6)+_0x43d262+':',_0x58df63);}}}else console['log'](_0x98d727(0x241));}}),dropboxCloud[_0x44c113(0x240)](_0x44c113(0x234),function(){var _0x2319b6=_0x44c113;const _0x472e7b=localStorage[_0x2319b6(0x214)]('uId');_0x472e7b===null||_0x472e7b===''?authorizeWithDropbox():window[_0x2319b6(0x1fb)](_0x2319b6(0x1e4))&&(localStorage[_0x2319b6(0x1f4)](_0x2319b6(0x1e2),''),dropboxRestore[_0x2319b6(0x20f)]['remove'](_0x2319b6(0x20e)),dropboxBackup[_0x2319b6(0x20f)][_0x2319b6(0x213)]('active'),dropboxCloud['classList'][_0x2319b6(0x213)]('active'));}),handleDropboxCallback();});