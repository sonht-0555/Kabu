var a0_0x6e6ab9=a0_0x4101;(function(_0x347c7f,_0x7f34e4){var _0x1366da=a0_0x4101,_0x271936=_0x347c7f();while(!![]){try{var _0x5e2a19=parseInt(_0x1366da(0x107))/0x1+-parseInt(_0x1366da(0x12e))/0x2*(-parseInt(_0x1366da(0x13a))/0x3)+parseInt(_0x1366da(0xf2))/0x4+parseInt(_0x1366da(0xf0))/0x5*(parseInt(_0x1366da(0x103))/0x6)+-parseInt(_0x1366da(0x14c))/0x7+-parseInt(_0x1366da(0x13b))/0x8*(parseInt(_0x1366da(0x128))/0x9)+-parseInt(_0x1366da(0x146))/0xa;if(_0x5e2a19===_0x7f34e4)break;else _0x271936['push'](_0x271936['shift']());}catch(_0x359709){_0x271936['push'](_0x271936['shift']());}}}(a0_0x1a6a,0xe8036));import*as a0_0x5ef0af from'./main.js';import{localStorageFile}from'./storage.js';function a0_0x1a6a(){var _0xf78e84=['Cloud\x20login\x20required!','setItem','alert','overwrite','charAt','accessToken','json','uId','open','Download\x20failed,\x20unknown\x20http\x20status:','click','.tag','https://content.dropboxapi.com/2/files/download','length','[\x5c?&#]','refresh_token=','code','active','Do\x20you\x20want\x20to\x20restore\x20','https://api.dropbox.com/oauth2/token','https://api.dropboxapi.com/2/files/create_folder_v2','3105972LgdLkL','\x20files\x20in\x20Kabu?','&grant_type=','Kabu\x20storage\x20↦\x20Cloud\x20◆','status','&client_id=','2SBGztz','Bearer\x20','application/octet-stream','Download\x20failed\x20for\x20','https://api.dropboxapi.com/2/files/list_folder','onload','stringify','Content-Type','exec','setRequestHeader','search','file','2428311SsLibD','24IykIOs','refreshToken','name','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','Unable\x20to\x20refresh\x20token','state','Failed\x20to\x20upload\x20file\x20','toUpperCase','application/json','authorization_code','FSSync','18843940xWAvpN','&response_type=','https://api.dropboxapi.com/oauth2/token','folder','Folder\x20created','Wait\x20a\x20little\x20bit...','2025156xbxffK','\x20files\x20from\x20Cloud?','&client_secret=','Backing\x20up...','responseText','nwb3dnfh09rhs31','/data/','Do\x20not\x20receive\x20authorization','Error\x20while\x20refreshing\x20token:','POST','80390PWvRgJ','error','5865392RnZcMz','uploadFileInCloud','&token_access_type=','location','Authorization\x20Code:','list','save','Cloud\x20↦\x20Kabu\x20storage\x20◆','confirm','map','replace','remove','access_token','&redirect_uri=','https://content.dropboxapi.com/2/files/upload','blob','href','42tQlWiX','screenshot','getItem','split','1771021BPrkCY','application/x-www-form-urlencoded','classList','Restoring...','Do\x20you\x20want\x20to\x20logout?','log','refresh_token','addEventListener','code=','Refreshing\x20token...','push','uid'];a0_0x1a6a=function(){return _0xf78e84;};return a0_0x1a6a();}var clientId='knh3uz2mx2hp2eu',clientSecret=a0_0x6e6ab9(0x151);function authorizeWithDropbox(){var _0x112000=a0_0x6e6ab9,_0x16c7c1=window[_0x112000(0xf5)][_0x112000(0x102)]['split']('?')[0x0],_0x2b8b31=_0x112000(0x123),_0x5c60b8='offline',_0x2c0f30='https://www.dropbox.com/oauth2/authorize?client_id='+clientId+_0x112000(0x147)+_0x2b8b31+_0x112000(0xf4)+_0x5c60b8+'&redirect_uri='+encodeURIComponent(_0x16c7c1);window['location'][_0x112000(0x102)]=_0x2c0f30;}function a0_0x4101(_0x1b666f,_0x59009c){var _0x1a6a02=a0_0x1a6a();return a0_0x4101=function(_0x410185,_0x5d21aa){_0x410185=_0x410185-0xef;var _0x2b2e7d=_0x1a6a02[_0x410185];return _0x2b2e7d;},a0_0x4101(_0x1b666f,_0x59009c);}function handleDropboxCallback(){var _0x531308=a0_0x6e6ab9,_0x4aa026=getUrlParameter('code');_0x4aa026?(getAccessToken(_0x4aa026),console[_0x531308(0x10c)](_0x531308(0xf6),_0x4aa026)):console[_0x531308(0x10c)](_0x531308(0x153));}function getUrlParameter(_0x4bb3a6){var _0x1ab86c=a0_0x6e6ab9;_0x4bb3a6=_0x4bb3a6[_0x1ab86c(0xfc)](/[\[]/,'\x5c[')[_0x1ab86c(0xfc)](/[\]]/,'\x5c]');var _0x5c9c40=new RegExp(_0x1ab86c(0x121)+_0x4bb3a6+'=([^&#]*)'),_0x243ca2=_0x5c9c40[_0x1ab86c(0x136)](location[_0x1ab86c(0x138)]);return _0x243ca2===null?'':decodeURIComponent(_0x243ca2[0x1][_0x1ab86c(0xfc)](/\+/g,'\x20'));}function getAccessToken(_0x18fe2d){var _0x14e4b9=a0_0x6e6ab9,_0x429039=_0x14e4b9(0x144),_0x36858b=window[_0x14e4b9(0xf5)]['href'][_0x14e4b9(0x106)]('?')[0x0],_0x412fe2=new XMLHttpRequest();_0x412fe2[_0x14e4b9(0x11b)](_0x14e4b9(0xef),_0x14e4b9(0x126)),_0x412fe2[_0x14e4b9(0x137)](_0x14e4b9(0x135),_0x14e4b9(0x108)),_0x412fe2[_0x14e4b9(0x133)]=function(){var _0x48d170=_0x14e4b9;if(_0x412fe2[_0x48d170(0x12c)]===0xc8){var _0x292f07=JSON['parse'](_0x412fe2[_0x48d170(0x150)]),_0x488e71=_0x292f07[_0x48d170(0xfe)],_0x479961=_0x292f07[_0x48d170(0x10d)],_0x57d436=_0x292f07[_0x48d170(0x112)];localStorage[_0x48d170(0x114)](_0x48d170(0x118),_0x488e71),localStorage[_0x48d170(0x114)]('refreshToken',_0x479961),localStorage[_0x48d170(0x114)](_0x48d170(0x11a),_0x57d436);}else console[_0x48d170(0x10c)](_0x48d170(0x13e));},_0x412fe2['send'](_0x14e4b9(0x10f)+_0x18fe2d+_0x14e4b9(0x12a)+_0x429039+_0x14e4b9(0x12d)+clientId+_0x14e4b9(0x14e)+clientSecret+_0x14e4b9(0xff)+encodeURIComponent(_0x36858b));}export async function dpCreateFolder(_0x91aa62){var _0x4e76f9=a0_0x6e6ab9;const _0x5b6828=localStorage['getItem']('uId');let _0x22fa89=localStorage[_0x4e76f9(0x105)]('accessToken');const _0x395a45='/'+_0x5b6828+'/'+_0x91aa62,_0x36626c=JSON['stringify']({'path':_0x395a45,'autorename':![]});for(let _0x285db8=0x0;_0x285db8<0x2;_0x285db8++){try{const _0x19a433=await fetch(_0x4e76f9(0x127),{'method':_0x4e76f9(0xef),'headers':{'Authorization':_0x4e76f9(0x12f)+_0x22fa89,'Content-Type':_0x4e76f9(0x143)},'body':_0x36626c});if(_0x19a433[_0x4e76f9(0x12c)]===0x191){const _0x1111d5=await dpRefreshToken();if(!_0x1111d5)throw new Error('Unable\x20to\x20refresh\x20token');_0x22fa89=localStorage[_0x4e76f9(0x105)](_0x4e76f9(0x118));continue;}if(_0x19a433['status']===0x199)return{'message':'Folder\x20already\x20exists','path':_0x91aa62};if(!_0x19a433['ok'])throw new Error('Error\x20creating\x20folder\x20'+_0x91aa62);const _0x2f053e=await _0x19a433[_0x4e76f9(0x119)]();return await lockNoti(_0x4e76f9(0x14a),'',0xbb8),_0x2f053e;}catch(_0x32151e){if(_0x285db8===0x1)throw _0x32151e;}}return![];}export async function dpRefreshToken(){var _0x5c78cf=a0_0x6e6ab9;if(!localStorage[_0x5c78cf(0x105)](_0x5c78cf(0x13c)))throw'No\x20refresh\x20token';try{const _0x1e39c1=await fetch(_0x5c78cf(0x148),{'method':_0x5c78cf(0xef),'headers':{'Content-Type':_0x5c78cf(0x108)},'body':_0x5c78cf(0x122)+localStorage[_0x5c78cf(0x105)]('refreshToken')+'&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31'}),_0x5a5c26=await _0x1e39c1[_0x5c78cf(0x119)]();if(!_0x5a5c26[_0x5c78cf(0xf1)])return localStorage['setItem'](_0x5c78cf(0x118),_0x5a5c26['access_token']),await lockNoti(_0x5c78cf(0x110),'',0xbb8),await delay(0x3e8),!![];else alert(_0x5a5c26['error_description']||'Failed\x20to\x20refresh\x20Dropbox\x20token.');}catch(_0xf7a563){console[_0x5c78cf(0xf1)](_0x5c78cf(0x154),_0xf7a563);}return![];}export async function dpUploadFile(_0xb76eaa,_0x48a0ac,_0x55cbd7){var _0x1e4bf9=a0_0x6e6ab9;const _0x3d8b11=localStorage[_0x1e4bf9(0x105)](_0x1e4bf9(0x11a));var _0xd39844=JSON['stringify']({'autorename':!![],'mode':_0x1e4bf9(0x116),'mute':!![],'strict_conflict':![],'path':'/'+_0x3d8b11+'/'+_0x55cbd7+'/'+_0xb76eaa}),_0x42c185=new Blob([_0x48a0ac],{'type':'application/octet-stream'});for(var _0x1d96a0=0x0;_0x1d96a0<0x2;_0x1d96a0++){var _0x3cb0c4=await fetch(_0x1e4bf9(0x100),{'method':_0x1e4bf9(0xef),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x1e4bf9(0x105)](_0x1e4bf9(0x118)),'Dropbox-API-Arg':_0xd39844,'Content-Type':_0x1e4bf9(0x130)},'body':_0x42c185});if(_0x3cb0c4[_0x1e4bf9(0x12c)]!=0xc8){if(_0x3cb0c4['status']==0x191){var _0x261b24=await dpRefreshToken();if(!_0x261b24)throw _0x1e4bf9(0x13f);continue;}else throw'Upload\x20failed,\x20unknown\x20http\x20status:\x20'+_0x3cb0c4[_0x1e4bf9(0x12c)];}else{var _0x66e209=await _0x3cb0c4[_0x1e4bf9(0x119)]();return console[_0x1e4bf9(0x10c)](_0x1e4bf9(0x12b),_0xb76eaa),_0x66e209;}}return![];}export async function dpDownloadFile(_0x59e6e9,_0x206844){var _0x1d70a2=a0_0x6e6ab9;const _0x18b21e=localStorage['getItem'](_0x1d70a2(0x11a));var _0xf705b0=JSON['stringify']({'path':'/'+_0x18b21e+'/'+_0x206844+'/'+_0x59e6e9});for(var _0x15e450=0x0;_0x15e450<0x2;_0x15e450++){var _0x56f19f=await fetch(_0x1d70a2(0x11f),{'method':_0x1d70a2(0xef),'headers':{'Authorization':_0x1d70a2(0x12f)+localStorage['getItem'](_0x1d70a2(0x118)),'Dropbox-API-Arg':_0xf705b0}});if(_0x56f19f[_0x1d70a2(0x12c)]!=0xc8){if(_0x56f19f['status']==0x191){var _0xe7b2d7=await dpRefreshToken();if(!_0xe7b2d7)throw _0x1d70a2(0x13f);continue;}else throw _0x1d70a2(0x11c)+_0x56f19f[_0x1d70a2(0x12c)];}const _0x47f637=new File([await _0x56f19f[_0x1d70a2(0x101)]()],_0x59e6e9);return console[_0x1d70a2(0x10c)](_0x1d70a2(0xf9),_0x47f637[_0x1d70a2(0x13d)]),a0_0x5ef0af[_0x1d70a2(0xf3)](_0x47f637,()=>{var _0x21ba27=_0x1d70a2;localStorageFile(),Module[_0x21ba27(0x145)]();}),_0x47f637;}return![];}document[a0_0x6e6ab9(0x10e)]('DOMContentLoaded',function(){var _0x293fe3=a0_0x6e6ab9;dropboxRestore[_0x293fe3(0x10e)](_0x293fe3(0x11d),async function(){var _0x7da896=_0x293fe3;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x58bf66=localStorage[_0x7da896(0x105)](_0x7da896(0x11a)),_0x258517=[_0x7da896(0x140),_0x7da896(0xf8),_0x7da896(0x104)];if(!_0x58bf66){window[_0x7da896(0x115)](_0x7da896(0x113));return;}let _0x25168e=[];for(const _0x4af46b of _0x258517){let _0x1e92de={'path':'/'+_0x58bf66+'/'+_0x4af46b};for(let _0x41c076=0x0;_0x41c076<0x2;_0x41c076++){let _0x35ebdc=await fetch(_0x7da896(0x132),{'method':_0x7da896(0xef),'headers':{'Authorization':_0x7da896(0x12f)+localStorage[_0x7da896(0x105)](_0x7da896(0x118)),'Content-Type':_0x7da896(0x143)},'body':JSON[_0x7da896(0x134)](_0x1e92de)});if(_0x35ebdc[_0x7da896(0x12c)]===0xc8){let _0x5c7534=await _0x35ebdc[_0x7da896(0x119)](),_0x24f7f6=_0x5c7534['entries']['filter'](_0x49be61=>_0x49be61[_0x7da896(0x11e)]===_0x7da896(0x139));_0x24f7f6[_0x7da896(0x120)]>0x0&&_0x25168e[_0x7da896(0x111)](..._0x24f7f6[_0x7da896(0xfb)](_0x4826df=>({'name':_0x4826df[_0x7da896(0x13d)],'folder':_0x4af46b})));break;}else{if(_0x35ebdc[_0x7da896(0x12c)]===0x191){let _0x66c75c=await dpRefreshToken();if(!_0x66c75c)throw _0x7da896(0x13f);}else{console[_0x7da896(0xf1)](_0x7da896(0x131)+_0x4af46b+',\x20status:\x20'+_0x35ebdc[_0x7da896(0x12c)]);break;}}}}if(_0x25168e[_0x7da896(0x120)]>0x0){const _0x915b8c=_0x7da896(0x125)+_0x25168e[_0x7da896(0x120)]+_0x7da896(0x14d);if(window[_0x7da896(0xfa)](_0x915b8c))for(const _0x1ce929 of _0x25168e){await lockNoti(_0x7da896(0x10a),_0x1ce929[_0x7da896(0x13d)],0xbb8),await dpDownloadFile(_0x1ce929[_0x7da896(0x13d)],_0x1ce929[_0x7da896(0x149)]);}else console[_0x7da896(0x10c)]('Restore\x20canceled\x20by\x20user.');}else console[_0x7da896(0x10c)]('No\x20files\x20found\x20to\x20restore.');}),dropboxBackup[_0x293fe3(0x10e)](_0x293fe3(0x11d),async function(){var _0x4f7ef9=_0x293fe3;await lockNoti(_0x4f7ef9(0x14b),'',0x1388);const _0x5148f7=localStorage['getItem'](_0x4f7ef9(0x11a));if(_0x5148f7===null||_0x5148f7==='')window[_0x4f7ef9(0x115)](_0x4f7ef9(0x113));else{const _0xa89fcd=[_0x4f7ef9(0x140),_0x4f7ef9(0xf8),_0x4f7ef9(0x104)];for(const _0x2167dd of _0xa89fcd){await dpCreateFolder(_0x2167dd);}let _0xb945e=0x0;for(const _0x1dd432 of _0xa89fcd){const _0x16d7c8=a0_0x5ef0af[_0x4f7ef9(0xf7)+(_0x1dd432[_0x4f7ef9(0x117)](0x0)[_0x4f7ef9(0x142)]()+_0x1dd432['slice'](0x1))]();_0xb945e+=_0x16d7c8[_0x4f7ef9(0x120)];}if(window['confirm']('Do\x20you\x20want\x20to\x20backup\x20'+_0xb945e+_0x4f7ef9(0x129)))for(const _0x36852f of _0xa89fcd){const _0x3bf520=a0_0x5ef0af[_0x4f7ef9(0xf7)+(_0x36852f[_0x4f7ef9(0x117)](0x0)[_0x4f7ef9(0x142)]()+_0x36852f['slice'](0x1))]();for(const _0xa52510 of _0x3bf520){const _0x447204=await a0_0x5ef0af['downloadFileInCloud'](_0x4f7ef9(0x152)+_0x36852f+'s/'+_0xa52510);try{await lockNoti(_0x4f7ef9(0x14f),_0xa52510,0xbb8),await dpUploadFile(_0xa52510,_0x447204,_0x36852f);}catch(_0x5cab6e){console[_0x4f7ef9(0xf1)](_0x4f7ef9(0x141)+_0xa52510+':',_0x5cab6e);}}}else console[_0x4f7ef9(0x10c)]('Restore\x20canceled\x20by\x20user.');}}),dropboxCloud[_0x293fe3(0x10e)](_0x293fe3(0x11d),function(){var _0x297f4a=_0x293fe3;const _0x553f0f=localStorage[_0x297f4a(0x105)](_0x297f4a(0x11a));_0x553f0f===null||_0x553f0f===''?authorizeWithDropbox():window['confirm'](_0x297f4a(0x10b))&&(localStorage[_0x297f4a(0x114)](_0x297f4a(0x11a),''),dropboxRestore[_0x297f4a(0x109)]['remove'](_0x297f4a(0x124)),dropboxBackup[_0x297f4a(0x109)][_0x297f4a(0xfd)](_0x297f4a(0x124)),dropboxCloud[_0x297f4a(0x109)][_0x297f4a(0xfd)]('active'));}),handleDropboxCallback();});