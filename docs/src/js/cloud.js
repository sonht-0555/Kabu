function a0_0x256d(_0x19fd1a,_0x31d862){var _0x44ddd0=a0_0x44dd();return a0_0x256d=function(_0x256d13,_0x1d992e){_0x256d13=_0x256d13-0x67;var _0x3b4e26=_0x44ddd0[_0x256d13];return _0x3b4e26;},a0_0x256d(_0x19fd1a,_0x31d862);}var a0_0x4c2918=a0_0x256d;(function(_0x5c815b,_0x32fb84){var _0x5781b1=a0_0x256d,_0x38ab30=_0x5c815b();while(!![]){try{var _0x22fe01=parseInt(_0x5781b1(0x6a))/0x1+-parseInt(_0x5781b1(0xbc))/0x2*(parseInt(_0x5781b1(0xad))/0x3)+parseInt(_0x5781b1(0x96))/0x4+-parseInt(_0x5781b1(0x78))/0x5*(-parseInt(_0x5781b1(0x7b))/0x6)+-parseInt(_0x5781b1(0xc5))/0x7+parseInt(_0x5781b1(0x7c))/0x8*(-parseInt(_0x5781b1(0xb9))/0x9)+parseInt(_0x5781b1(0x8b))/0xa;if(_0x22fe01===_0x32fb84)break;else _0x38ab30['push'](_0x38ab30['shift']());}catch(_0x46622e){_0x38ab30['push'](_0x38ab30['shift']());}}}(a0_0x44dd,0x40124));import*as a0_0x1a94e1 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x4c2918(0x9d),clientSecret=a0_0x4c2918(0x94);function authorizeWithDropbox(){var _0x218b21=a0_0x4c2918,_0x5f1bcd=window[_0x218b21(0x99)][_0x218b21(0xcf)][_0x218b21(0x89)]('?')[0x0],_0x1c0043=_0x218b21(0x77),_0x256a04=_0x218b21(0xcc),_0x33d3f9=_0x218b21(0xbd)+clientId+_0x218b21(0x9b)+_0x1c0043+_0x218b21(0xd1)+_0x256a04+'&redirect_uri='+encodeURIComponent(_0x5f1bcd);window['location'][_0x218b21(0xcf)]=_0x33d3f9;}function handleDropboxCallback(){var _0x8722bb=a0_0x4c2918,_0x4649d6=getUrlParameter('code');_0x4649d6?(getAccessToken(_0x4649d6),console[_0x8722bb(0x97)](_0x8722bb(0xc8),_0x4649d6)):console[_0x8722bb(0x97)](_0x8722bb(0x92));}function getUrlParameter(_0x57ea03){var _0x486a6b=a0_0x4c2918;_0x57ea03=_0x57ea03[_0x486a6b(0x84)](/[\[]/,'\x5c[')[_0x486a6b(0x84)](/[\]]/,'\x5c]');var _0x4cd169=new RegExp(_0x486a6b(0xc1)+_0x57ea03+_0x486a6b(0x82)),_0x5a078e=_0x4cd169[_0x486a6b(0x9a)](location[_0x486a6b(0x68)]);return _0x5a078e===null?'':decodeURIComponent(_0x5a078e[0x1][_0x486a6b(0x84)](/\+/g,'\x20'));}function getAccessToken(_0x2fb0c5){var _0xb17926=a0_0x4c2918,_0x40feb4=_0xb17926(0xc4),_0x1f2754=window[_0xb17926(0x99)][_0xb17926(0xcf)][_0xb17926(0x89)]('?')[0x0],_0x3720f0=new XMLHttpRequest();_0x3720f0[_0xb17926(0x95)]('POST',_0xb17926(0x87)),_0x3720f0['setRequestHeader'](_0xb17926(0xa1),_0xb17926(0x8d)),_0x3720f0[_0xb17926(0xa2)]=function(){var _0x2566cf=_0xb17926;if(_0x3720f0[_0x2566cf(0xae)]===0xc8){var _0x51541b=JSON[_0x2566cf(0x79)](_0x3720f0[_0x2566cf(0xb3)]),_0x360292=_0x51541b[_0x2566cf(0xcb)],_0x1c025d=_0x51541b[_0x2566cf(0xd4)],_0x3e79dc=_0x51541b['uid'];localStorage[_0x2566cf(0xd2)](_0x2566cf(0x6d),_0x360292),localStorage[_0x2566cf(0xd2)](_0x2566cf(0x8e),_0x1c025d),localStorage[_0x2566cf(0xd2)](_0x2566cf(0x7e),_0x3e79dc);}else console[_0x2566cf(0x97)](_0x2566cf(0xac));},_0x3720f0['send'](_0xb17926(0x88)+_0x2fb0c5+_0xb17926(0xbf)+_0x40feb4+_0xb17926(0xba)+clientId+_0xb17926(0xa8)+clientSecret+'&redirect_uri='+encodeURIComponent(_0x1f2754));}export async function dpCreateFolder(_0x3e6945){var _0x2aa71d=a0_0x4c2918;const _0x1bd7ea=localStorage[_0x2aa71d(0xb0)](_0x2aa71d(0x7e));let _0xec0e4=localStorage['getItem']('accessToken');const _0x409c63='/'+_0x1bd7ea+'/'+_0x3e6945,_0x1f59b0=JSON[_0x2aa71d(0x85)]({'path':_0x409c63,'autorename':![]});for(let _0x45769d=0x0;_0x45769d<0x2;_0x45769d++){try{const _0x510da9=await fetch(_0x2aa71d(0xce),{'method':_0x2aa71d(0xa5),'headers':{'Authorization':_0x2aa71d(0x67)+_0xec0e4,'Content-Type':_0x2aa71d(0xa4)},'body':_0x1f59b0});if(_0x510da9[_0x2aa71d(0xae)]===0x191){const _0x4d0e89=await dpRefreshToken();if(!_0x4d0e89)throw new Error(_0x2aa71d(0xb6));_0xec0e4=localStorage[_0x2aa71d(0xb0)](_0x2aa71d(0x6d));continue;}if(_0x510da9[_0x2aa71d(0xae)]===0x199)return{'message':'Folder\x20already\x20exists','path':_0x3e6945};if(!_0x510da9['ok'])throw new Error(_0x2aa71d(0xc6)+_0x3e6945);const _0x37aa67=await _0x510da9[_0x2aa71d(0x7a)]();return await lockNoti(_0x2aa71d(0x70),'',0xbb8),_0x37aa67;}catch(_0x3587f0){if(_0x45769d===0x1)throw _0x3587f0;}}return![];}function a0_0x44dd(){var _0x55dfc6=['https://api.dropboxapi.com/oauth2/token','1671291jpVvER','&client_id=','charAt','562XNGXSJ','https://www.dropbox.com/oauth2/authorize?client_id=','blob','&grant_type=','Kabu\x20storage\x20↦\x20Cloud\x20◆','[\x5c?&#]','addEventListener','file','authorization_code','1778343yVEpsl','Error\x20creating\x20folder\x20','state','Authorization\x20Code:','remove','push','access_token','offline','Do\x20you\x20want\x20to\x20logout?','https://api.dropboxapi.com/2/files/create_folder_v2','href','Wait\x20a\x20little\x20bit...','&token_access_type=','setItem','Download\x20failed,\x20unknown\x20http\x20status:','refresh_token','Bearer\x20','search','Cloud\x20↦\x20Kabu\x20storage\x20◆','266062YvaKwf','No\x20files\x20found\x20to\x20restore.','slice','accessToken','toUpperCase','https://content.dropboxapi.com/2/files/download','Folder\x20created','Restore\x20canceled\x20by\x20user.','overwrite','Refreshing\x20token...','save','\x20files\x20from\x20Cloud?','classList','code','714635JJmENx','parse','json','6Lqzlpr','16muuGIA','Upload\x20failed,\x20unknown\x20http\x20status:\x20','uId','.tag','application/octet-stream','https://content.dropboxapi.com/2/files/upload','=([^&#]*)','Failed\x20to\x20upload\x20file\x20','replace','stringify','Restoring...','https://api.dropbox.com/oauth2/token','code=','split','filter','307580ihQJFN','folder','application/x-www-form-urlencoded','refreshToken','/data/','click','\x20files\x20in\x20Kabu?','Do\x20not\x20receive\x20authorization','downloadFileInCloud','nwb3dnfh09rhs31','open','1973508QLfULG','log','error','location','exec','&response_type=','Failed\x20to\x20refresh\x20Dropbox\x20token.','knh3uz2mx2hp2eu','Cloud\x20login\x20required!','https://api.dropboxapi.com/2/files/list_folder','name','Content-Type','onload','entries','application/json','POST','refresh_token=','list','&client_secret=',',\x20status:\x20','active','error_description','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','483RlLLnL','status','Do\x20you\x20want\x20to\x20restore\x20','getItem','confirm','screenshot','responseText','length','No\x20refresh\x20token','Unable\x20to\x20refresh\x20token','alert'];a0_0x44dd=function(){return _0x55dfc6;};return a0_0x44dd();}export async function dpRefreshToken(){var _0xb43f09=a0_0x4c2918;if(!localStorage[_0xb43f09(0xb0)](_0xb43f09(0x8e)))throw _0xb43f09(0xb5);try{const _0x172b49=await fetch(_0xb43f09(0xb8),{'method':_0xb43f09(0xa5),'headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0xb43f09(0xa6)+localStorage['getItem'](_0xb43f09(0x8e))+'&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31'}),_0x137bbc=await _0x172b49[_0xb43f09(0x7a)]();if(!_0x137bbc[_0xb43f09(0x98)])return localStorage['setItem'](_0xb43f09(0x6d),_0x137bbc[_0xb43f09(0xcb)]),await lockNoti(_0xb43f09(0x73),'',0xbb8),await delay(0x3e8),!![];else alert(_0x137bbc[_0xb43f09(0xab)]||_0xb43f09(0x9c));}catch(_0x15e007){console[_0xb43f09(0x98)]('Error\x20while\x20refreshing\x20token:',_0x15e007);}return![];}export async function dpUploadFile(_0x397bda,_0x4c3981,_0x49d7be){var _0x404dc7=a0_0x4c2918;const _0x45da60=localStorage[_0x404dc7(0xb0)](_0x404dc7(0x7e));var _0x1c2e9a=JSON['stringify']({'autorename':!![],'mode':_0x404dc7(0x72),'mute':!![],'strict_conflict':![],'path':'/'+_0x45da60+'/'+_0x49d7be+'/'+_0x397bda}),_0x37b30f=new Blob([_0x4c3981],{'type':_0x404dc7(0x80)});for(var _0x1854fc=0x0;_0x1854fc<0x2;_0x1854fc++){var _0x50ee4a=await fetch(_0x404dc7(0x81),{'method':_0x404dc7(0xa5),'headers':{'Authorization':_0x404dc7(0x67)+localStorage[_0x404dc7(0xb0)]('accessToken'),'Dropbox-API-Arg':_0x1c2e9a,'Content-Type':_0x404dc7(0x80)},'body':_0x37b30f});if(_0x50ee4a[_0x404dc7(0xae)]!=0xc8){if(_0x50ee4a[_0x404dc7(0xae)]==0x191){var _0x420941=await dpRefreshToken();if(!_0x420941)throw _0x404dc7(0xb6);continue;}else throw _0x404dc7(0x7d)+_0x50ee4a['status'];}else{var _0x49d0f5=await _0x50ee4a['json']();return console['log'](_0x404dc7(0xc0),_0x397bda),_0x49d0f5;}}return![];}export async function dpDownloadFile(_0x28a8a5,_0x4103c4){var _0x4ad455=a0_0x4c2918;const _0x583bc6=localStorage['getItem']('uId');var _0x57ac6d=JSON[_0x4ad455(0x85)]({'path':'/'+_0x583bc6+'/'+_0x4103c4+'/'+_0x28a8a5});for(var _0x570455=0x0;_0x570455<0x2;_0x570455++){var _0x98f6e=await fetch(_0x4ad455(0x6f),{'method':'POST','headers':{'Authorization':_0x4ad455(0x67)+localStorage[_0x4ad455(0xb0)](_0x4ad455(0x6d)),'Dropbox-API-Arg':_0x57ac6d}});if(_0x98f6e[_0x4ad455(0xae)]!=0xc8){if(_0x98f6e[_0x4ad455(0xae)]==0x191){var _0x43b470=await dpRefreshToken();if(!_0x43b470)throw _0x4ad455(0xb6);continue;}else throw _0x4ad455(0xd3)+_0x98f6e[_0x4ad455(0xae)];}const _0x12c6a7=new File([await _0x98f6e[_0x4ad455(0xbe)]()],_0x28a8a5);return console[_0x4ad455(0x97)](_0x4ad455(0x69),_0x12c6a7[_0x4ad455(0xa0)]),a0_0x1a94e1['uploadFileInCloud'](_0x12c6a7,()=>{}),_0x12c6a7;}return![];}document[a0_0x4c2918(0xc2)]('DOMContentLoaded',function(){var _0x5bfdc9=a0_0x4c2918;dropboxRestore['addEventListener'](_0x5bfdc9(0x90),async function(){var _0xe6e8fe=_0x5bfdc9;await lockNoti(_0xe6e8fe(0xd0),'',0x1388);const _0xc76f38=localStorage['getItem'](_0xe6e8fe(0x7e)),_0x5e9b19=['state',_0xe6e8fe(0x74),_0xe6e8fe(0xb2)];if(!_0xc76f38){window['alert'](_0xe6e8fe(0x9e));return;}let _0x2395db=[];for(const _0x4c1f2f of _0x5e9b19){let _0x5021cf={'path':'/'+_0xc76f38+'/'+_0x4c1f2f};for(let _0x2627f2=0x0;_0x2627f2<0x2;_0x2627f2++){let _0x25bfae=await fetch(_0xe6e8fe(0x9f),{'method':'POST','headers':{'Authorization':_0xe6e8fe(0x67)+localStorage[_0xe6e8fe(0xb0)](_0xe6e8fe(0x6d)),'Content-Type':_0xe6e8fe(0xa4)},'body':JSON[_0xe6e8fe(0x85)](_0x5021cf)});if(_0x25bfae[_0xe6e8fe(0xae)]===0xc8){let _0x142545=await _0x25bfae['json'](),_0x585dff=_0x142545[_0xe6e8fe(0xa3)][_0xe6e8fe(0x8a)](_0x27c5be=>_0x27c5be[_0xe6e8fe(0x7f)]===_0xe6e8fe(0xc3));_0x585dff[_0xe6e8fe(0xb4)]>0x0&&_0x2395db[_0xe6e8fe(0xca)](..._0x585dff['map'](_0x5653a0=>({'name':_0x5653a0['name'],'folder':_0x4c1f2f})));break;}else{if(_0x25bfae[_0xe6e8fe(0xae)]===0x191){let _0x4eff28=await dpRefreshToken();if(!_0x4eff28)throw _0xe6e8fe(0xb6);}else{console[_0xe6e8fe(0x98)]('Download\x20failed\x20for\x20'+_0x4c1f2f+_0xe6e8fe(0xa9)+_0x25bfae['status']);break;}}}}if(_0x2395db['length']>0x0){const _0x396202=_0xe6e8fe(0xaf)+_0x2395db[_0xe6e8fe(0xb4)]+_0xe6e8fe(0x75);if(window[_0xe6e8fe(0xb1)](_0x396202))for(const _0x4d92f8 of _0x2395db){await lockNoti(_0xe6e8fe(0x86),_0x4d92f8['name'],0xbb8),await dpDownloadFile(_0x4d92f8[_0xe6e8fe(0xa0)],_0x4d92f8[_0xe6e8fe(0x8c)]);}else console[_0xe6e8fe(0x97)](_0xe6e8fe(0x71));}else console[_0xe6e8fe(0x97)](_0xe6e8fe(0x6b));}),dropboxBackup[_0x5bfdc9(0xc2)](_0x5bfdc9(0x90),async function(){var _0x1a91a2=_0x5bfdc9;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x2aaa51=localStorage['getItem']('uId');if(_0x2aaa51===null||_0x2aaa51==='')window[_0x1a91a2(0xb7)]('Cloud\x20login\x20required!');else{const _0x441c05=[_0x1a91a2(0xc7),_0x1a91a2(0x74),_0x1a91a2(0xb2)];for(const _0x3119b9 of _0x441c05){await dpCreateFolder(_0x3119b9);}let _0x5ae27b=0x0;for(const _0x9476c5 of _0x441c05){const _0x662e85=a0_0x1a94e1[_0x1a91a2(0xa7)+(_0x9476c5['charAt'](0x0)[_0x1a91a2(0x6e)]()+_0x9476c5[_0x1a91a2(0x6c)](0x1))]();_0x5ae27b+=_0x662e85[_0x1a91a2(0xb4)];}if(window[_0x1a91a2(0xb1)]('Do\x20you\x20want\x20to\x20backup\x20'+_0x5ae27b+_0x1a91a2(0x91)))for(const _0xa4a4c9 of _0x441c05){const _0xf65d43=a0_0x1a94e1[_0x1a91a2(0xa7)+(_0xa4a4c9[_0x1a91a2(0xbb)](0x0)[_0x1a91a2(0x6e)]()+_0xa4a4c9[_0x1a91a2(0x6c)](0x1))]();for(const _0x38db69 of _0xf65d43){const _0x16ccff=await a0_0x1a94e1[_0x1a91a2(0x93)](_0x1a91a2(0x8f)+_0xa4a4c9+'s/'+_0x38db69);try{await lockNoti('Backing\x20up...',_0x38db69,0xbb8),await dpUploadFile(_0x38db69,_0x16ccff,_0xa4a4c9);}catch(_0x5ea83e){console[_0x1a91a2(0x98)](_0x1a91a2(0x83)+_0x38db69+':',_0x5ea83e);}}}else console['log'](_0x1a91a2(0x71));}}),dropboxCloud[_0x5bfdc9(0xc2)](_0x5bfdc9(0x90),function(){var _0x1ae48a=_0x5bfdc9;const _0x56e5e6=localStorage[_0x1ae48a(0xb0)]('uId');_0x56e5e6===null||_0x56e5e6===''?authorizeWithDropbox():window[_0x1ae48a(0xb1)](_0x1ae48a(0xcd))&&(localStorage['setItem'](_0x1ae48a(0x7e),''),dropboxRestore[_0x1ae48a(0x76)]['remove'](_0x1ae48a(0xaa)),dropboxBackup[_0x1ae48a(0x76)][_0x1ae48a(0xc9)](_0x1ae48a(0xaa)),dropboxCloud[_0x1ae48a(0x76)][_0x1ae48a(0xc9)](_0x1ae48a(0xaa)));}),handleDropboxCallback();});