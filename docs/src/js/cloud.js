function a0_0x4abf(){var _0x1cfee0=['Do\x20you\x20want\x20to\x20restore\x20','setRequestHeader','refreshToken','blob','https://api.dropboxapi.com/2/files/create_folder_v2','Folder\x20already\x20exists','name','click','Do\x20not\x20receive\x20authorization','folder','file','https://api.dropboxapi.com/oauth2/token','.tag','search','1243917eCExEM','offline','14ITVDtR','save','application/octet-stream','59676pGasPj','Refreshing\x20token...','nwb3dnfh09rhs31','confirm','status','Bearer\x20','4190pAYSwX','253KWmfba','https://api.dropboxapi.com/2/files/list_folder','map','toUpperCase','=([^&#]*)','166JNpCRF','screenshot','DOMContentLoaded','1181496nWxWrT','76RDcWAh','list','120016XhIKVj','accessToken','/data/','application/json','classList','Error\x20while\x20refreshing\x20token:','downloadFileInCloud','Failed\x20to\x20upload\x20file\x20','active','Unable\x20to\x20refresh\x20token','stringify','authorization_code','Download\x20failed,\x20unknown\x20http\x20status:','code=','\x20files\x20from\x20Cloud?','log','entries','json','Error\x20creating\x20folder\x20','access_token','href','Folder\x20created','Failed\x20to\x20refresh\x20Dropbox\x20token.','Do\x20you\x20want\x20to\x20logout?','1747681FMOBpd','Do\x20you\x20want\x20to\x20backup\x20','&redirect_uri=','uploadFileInCloud','setItem','alert','knh3uz2mx2hp2eu','split','5HblHnS','open','Cloud\x20login\x20required!','No\x20refresh\x20token','remove','Restore\x20canceled\x20by\x20user.','&response_type=','&client_id=','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','onload','Wait\x20a\x20little\x20bit...','60wUuQXl','uId','getItem','addEventListener','exec','charAt','Authorization\x20Code:','slice','POST','refresh_token=','refresh_token','Upload\x20failed,\x20unknown\x20http\x20status:\x20','location','\x20files\x20in\x20Kabu?','1630XukxWT','send','Content-Type','application/x-www-form-urlencoded','Backing\x20up...','push','error','code','length','https://www.dropbox.com/oauth2/authorize?client_id=','uid'];a0_0x4abf=function(){return _0x1cfee0;};return a0_0x4abf();}var a0_0x424307=a0_0x1c75;(function(_0x38c6d1,_0xd1e12b){var _0x44ec8c=a0_0x1c75,_0x5bb701=_0x38c6d1();while(!![]){try{var _0xe608e2=parseInt(_0x44ec8c(0x206))/0x1*(parseInt(_0x44ec8c(0x1dc))/0x2)+parseInt(_0x44ec8c(0x1fa))/0x3*(parseInt(_0x44ec8c(0x20a))/0x4)+parseInt(_0x44ec8c(0x1c3))/0x5*(parseInt(_0x44ec8c(0x209))/0x6)+-parseInt(_0x44ec8c(0x1f7))/0x7*(-parseInt(_0x44ec8c(0x20c))/0x8)+parseInt(_0x44ec8c(0x1f5))/0x9+parseInt(_0x44ec8c(0x200))/0xa*(-parseInt(_0x44ec8c(0x201))/0xb)+parseInt(_0x44ec8c(0x1ce))/0xc*(-parseInt(_0x44ec8c(0x1bb))/0xd);if(_0xe608e2===_0xd1e12b)break;else _0x5bb701['push'](_0x5bb701['shift']());}catch(_0x5ba163){_0x5bb701['push'](_0x5bb701['shift']());}}}(a0_0x4abf,0x2ffc5));import*as a0_0xa240e5 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x424307(0x1c1),clientSecret=a0_0x424307(0x1fc);function authorizeWithDropbox(){var _0x20fe47=a0_0x424307,_0x29bfe9=window['location']['href']['split']('?')[0x0],_0x2b93f8=_0x20fe47(0x1e3),_0x2bf741=_0x20fe47(0x1f6),_0x359718=_0x20fe47(0x1e5)+clientId+_0x20fe47(0x1c9)+_0x2b93f8+'&token_access_type='+_0x2bf741+_0x20fe47(0x1bd)+encodeURIComponent(_0x29bfe9);window[_0x20fe47(0x1da)][_0x20fe47(0x1b7)]=_0x359718;}function a0_0x1c75(_0x2a58d3,_0x166c5b){var _0x4abfec=a0_0x4abf();return a0_0x1c75=function(_0x1c75f0,_0x2b2e05){_0x1c75f0=_0x1c75f0-0x1af;var _0x2ec3f3=_0x4abfec[_0x1c75f0];return _0x2ec3f3;},a0_0x1c75(_0x2a58d3,_0x166c5b);}function handleDropboxCallback(){var _0x264f65=a0_0x424307,_0x2fc2f5=getUrlParameter(_0x264f65(0x1e3));_0x2fc2f5?(getAccessToken(_0x2fc2f5),console[_0x264f65(0x1b2)](_0x264f65(0x1d4),_0x2fc2f5)):console[_0x264f65(0x1b2)](_0x264f65(0x1ef));}function getUrlParameter(_0x4778f5){var _0x271168=a0_0x424307;_0x4778f5=_0x4778f5['replace'](/[\[]/,'\x5c[')['replace'](/[\]]/,'\x5c]');var _0x170102=new RegExp('[\x5c?&#]'+_0x4778f5+_0x271168(0x205)),_0x51593a=_0x170102[_0x271168(0x1d2)](location[_0x271168(0x1f4)]);return _0x51593a===null?'':decodeURIComponent(_0x51593a[0x1]['replace'](/\+/g,'\x20'));}function getAccessToken(_0x4c8c81){var _0x29309b=a0_0x424307,_0x4ec631=_0x29309b(0x217),_0x220c40=window[_0x29309b(0x1da)]['href'][_0x29309b(0x1c2)]('?')[0x0],_0x2f330e=new XMLHttpRequest();_0x2f330e[_0x29309b(0x1c4)](_0x29309b(0x1d6),'https://api.dropbox.com/oauth2/token'),_0x2f330e[_0x29309b(0x1e8)](_0x29309b(0x1de),_0x29309b(0x1df)),_0x2f330e[_0x29309b(0x1cc)]=function(){var _0x16f6f9=_0x29309b;if(_0x2f330e[_0x16f6f9(0x1fe)]===0xc8){var _0x57d4b0=JSON['parse'](_0x2f330e['responseText']),_0x33296f=_0x57d4b0[_0x16f6f9(0x1b6)],_0x222a5c=_0x57d4b0[_0x16f6f9(0x1d8)],_0x4c37a8=_0x57d4b0[_0x16f6f9(0x1e6)];localStorage[_0x16f6f9(0x1bf)](_0x16f6f9(0x20d),_0x33296f),localStorage[_0x16f6f9(0x1bf)](_0x16f6f9(0x1e9),_0x222a5c),localStorage[_0x16f6f9(0x1bf)]('uId',_0x4c37a8);}else console[_0x16f6f9(0x1b2)]('Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token');},_0x2f330e[_0x29309b(0x1dd)](_0x29309b(0x1b0)+_0x4c8c81+'&grant_type='+_0x4ec631+_0x29309b(0x1ca)+clientId+'&client_secret='+clientSecret+'&redirect_uri='+encodeURIComponent(_0x220c40));}export async function dpCreateFolder(_0x2a6a85){var _0x2c2200=a0_0x424307;const _0x3dcfae=localStorage[_0x2c2200(0x1d0)](_0x2c2200(0x1cf));let _0x5a2e2a=localStorage[_0x2c2200(0x1d0)](_0x2c2200(0x20d));const _0x196b12='/'+_0x3dcfae+'/'+_0x2a6a85,_0x384fcd=JSON['stringify']({'path':_0x196b12,'autorename':![]});for(let _0x4f5761=0x0;_0x4f5761<0x2;_0x4f5761++){try{const _0x392a4b=await fetch(_0x2c2200(0x1eb),{'method':'POST','headers':{'Authorization':_0x2c2200(0x1ff)+_0x5a2e2a,'Content-Type':'application/json'},'body':_0x384fcd});if(_0x392a4b[_0x2c2200(0x1fe)]===0x191){const _0x23bf01=await dpRefreshToken();if(!_0x23bf01)throw new Error(_0x2c2200(0x215));_0x5a2e2a=localStorage[_0x2c2200(0x1d0)](_0x2c2200(0x20d));continue;}if(_0x392a4b['status']===0x199)return{'message':_0x2c2200(0x1ec),'path':_0x2a6a85};if(!_0x392a4b['ok'])throw new Error(_0x2c2200(0x1b5)+_0x2a6a85);const _0xcc5cc2=await _0x392a4b[_0x2c2200(0x1b4)]();return await lockNoti(_0x2c2200(0x1b8),'',0xbb8),_0xcc5cc2;}catch(_0x24af8b){if(_0x4f5761===0x1)throw _0x24af8b;}}return![];}export async function dpRefreshToken(){var _0x2768dc=a0_0x424307;if(!localStorage[_0x2768dc(0x1d0)](_0x2768dc(0x1e9)))throw _0x2768dc(0x1c6);try{const _0x66d966=await fetch(_0x2768dc(0x1f2),{'method':'POST','headers':{'Content-Type':_0x2768dc(0x1df)},'body':_0x2768dc(0x1d7)+localStorage[_0x2768dc(0x1d0)](_0x2768dc(0x1e9))+_0x2768dc(0x1cb)}),_0x2de915=await _0x66d966[_0x2768dc(0x1b4)]();if(!_0x2de915['error'])return localStorage['setItem'](_0x2768dc(0x20d),_0x2de915[_0x2768dc(0x1b6)]),await lockNoti('',_0x2768dc(0x1fb),0xbb8),await delay(0x3e8),!![];else alert(_0x2de915['error_description']||_0x2768dc(0x1b9));}catch(_0x452312){console[_0x2768dc(0x1e2)](_0x2768dc(0x211),_0x452312);}return![];}export async function dpUploadFile(_0x102ff8,_0x1d5cfa,_0x3a08df){var _0x2e4131=a0_0x424307;const _0x368c47=localStorage[_0x2e4131(0x1d0)](_0x2e4131(0x1cf));var _0x22c540=JSON['stringify']({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x368c47+'/'+_0x3a08df+'/'+_0x102ff8}),_0x53bf49=new Blob([_0x1d5cfa],{'type':'application/octet-stream'});for(var _0x332ec5=0x0;_0x332ec5<0x2;_0x332ec5++){var _0x5d5243=await fetch('https://content.dropboxapi.com/2/files/upload',{'method':'POST','headers':{'Authorization':_0x2e4131(0x1ff)+localStorage[_0x2e4131(0x1d0)]('accessToken'),'Dropbox-API-Arg':_0x22c540,'Content-Type':_0x2e4131(0x1f9)},'body':_0x53bf49});if(_0x5d5243[_0x2e4131(0x1fe)]!=0xc8){if(_0x5d5243[_0x2e4131(0x1fe)]==0x191){var _0x539cf4=await dpRefreshToken();if(!_0x539cf4)throw _0x2e4131(0x215);continue;}else throw _0x2e4131(0x1d9)+_0x5d5243[_0x2e4131(0x1fe)];}else{var _0x59a1e7=await _0x5d5243[_0x2e4131(0x1b4)]();return console[_0x2e4131(0x1b2)]('Kabu\x20storage\x20↦\x20Cloud\x20◆',_0x102ff8),_0x59a1e7;}}return![];}export async function dpDownloadFile(_0x591f9c,_0x131dbe){var _0x46ac12=a0_0x424307;const _0x174d15=localStorage[_0x46ac12(0x1d0)](_0x46ac12(0x1cf));var _0x4abee2=JSON[_0x46ac12(0x216)]({'path':'/'+_0x174d15+'/'+_0x131dbe+'/'+_0x591f9c});for(var _0x6cf9d0=0x0;_0x6cf9d0<0x2;_0x6cf9d0++){var _0x5cdbde=await fetch('https://content.dropboxapi.com/2/files/download',{'method':'POST','headers':{'Authorization':_0x46ac12(0x1ff)+localStorage[_0x46ac12(0x1d0)](_0x46ac12(0x20d)),'Dropbox-API-Arg':_0x4abee2}});if(_0x5cdbde[_0x46ac12(0x1fe)]!=0xc8){if(_0x5cdbde[_0x46ac12(0x1fe)]==0x191){var _0x6e6a3e=await dpRefreshToken();if(!_0x6e6a3e)throw _0x46ac12(0x215);continue;}else throw _0x46ac12(0x1af)+_0x5cdbde[_0x46ac12(0x1fe)];}const _0x1a1813=new File([await _0x5cdbde[_0x46ac12(0x1ea)]()],_0x591f9c);return console['log']('Cloud\x20↦\x20Kabu\x20storage\x20◆',_0x1a1813[_0x46ac12(0x1ed)]),a0_0xa240e5[_0x46ac12(0x1be)](_0x1a1813,()=>{localStorageFile(),Module['FSSync']();}),_0x1a1813;}return![];}document['addEventListener'](a0_0x424307(0x208),function(){var _0x53cc7a=a0_0x424307;dropboxRestore[_0x53cc7a(0x1d1)](_0x53cc7a(0x1ee),async function(){var _0x4276f5=_0x53cc7a;await lockNoti(_0x4276f5(0x1cd),'',0x1388);const _0x28fc9b=localStorage[_0x4276f5(0x1d0)](_0x4276f5(0x1cf)),_0x5d894c=['state',_0x4276f5(0x1f8),'screenshot'];if(!_0x28fc9b){window[_0x4276f5(0x1c0)]('Cloud\x20login\x20required!');return;}let _0x31ea9e=[];for(const _0x282d91 of _0x5d894c){let _0x1225e6={'path':'/'+_0x28fc9b+'/'+_0x282d91};for(let _0x55e89e=0x0;_0x55e89e<0x2;_0x55e89e++){let _0x114fc4=await fetch(_0x4276f5(0x202),{'method':_0x4276f5(0x1d6),'headers':{'Authorization':'Bearer\x20'+localStorage['getItem'](_0x4276f5(0x20d)),'Content-Type':_0x4276f5(0x20f)},'body':JSON[_0x4276f5(0x216)](_0x1225e6)});if(_0x114fc4[_0x4276f5(0x1fe)]===0xc8){let _0x5aed6c=await _0x114fc4['json'](),_0x264b5a=_0x5aed6c[_0x4276f5(0x1b3)]['filter'](_0xc0b07e=>_0xc0b07e[_0x4276f5(0x1f3)]===_0x4276f5(0x1f1));_0x264b5a[_0x4276f5(0x1e4)]>0x0&&_0x31ea9e[_0x4276f5(0x1e1)](..._0x264b5a[_0x4276f5(0x203)](_0x1707d4=>({'name':_0x1707d4[_0x4276f5(0x1ed)],'folder':_0x282d91})));break;}else{if(_0x114fc4[_0x4276f5(0x1fe)]===0x191){let _0x328a7d=await dpRefreshToken();if(!_0x328a7d)throw _0x4276f5(0x215);}else{console[_0x4276f5(0x1e2)]('Download\x20failed\x20for\x20'+_0x282d91+',\x20status:\x20'+_0x114fc4[_0x4276f5(0x1fe)]);break;}}}}if(_0x31ea9e[_0x4276f5(0x1e4)]>0x0){const _0x171475=_0x4276f5(0x1e7)+_0x31ea9e[_0x4276f5(0x1e4)]+_0x4276f5(0x1b1);if(window[_0x4276f5(0x1fd)](_0x171475))for(const _0x501b2d of _0x31ea9e){await lockNoti('Restoring...',_0x501b2d[_0x4276f5(0x1ed)],0xbb8),await dpDownloadFile(_0x501b2d[_0x4276f5(0x1ed)],_0x501b2d[_0x4276f5(0x1f0)]);}else console['log'](_0x4276f5(0x1c8));}else console[_0x4276f5(0x1b2)]('No\x20files\x20found\x20to\x20restore.');}),dropboxBackup[_0x53cc7a(0x1d1)](_0x53cc7a(0x1ee),async function(){var _0x37164e=_0x53cc7a;await lockNoti(_0x37164e(0x1cd),'',0x1388);const _0x3cb5e8=localStorage[_0x37164e(0x1d0)](_0x37164e(0x1cf));if(_0x3cb5e8===null||_0x3cb5e8==='')window['alert'](_0x37164e(0x1c5));else{const _0x502f76=['state',_0x37164e(0x1f8),_0x37164e(0x207)];for(const _0x219107 of _0x502f76){await dpCreateFolder(_0x219107);}let _0x539a4b=0x0;for(const _0x5db5ff of _0x502f76){const _0x886d1e=a0_0xa240e5[_0x37164e(0x20b)+(_0x5db5ff[_0x37164e(0x1d3)](0x0)[_0x37164e(0x204)]()+_0x5db5ff[_0x37164e(0x1d5)](0x1))]();_0x539a4b+=_0x886d1e[_0x37164e(0x1e4)];}if(window[_0x37164e(0x1fd)](_0x37164e(0x1bc)+_0x539a4b+_0x37164e(0x1db)))for(const _0x25aa00 of _0x502f76){const _0x46dc30=a0_0xa240e5[_0x37164e(0x20b)+(_0x25aa00['charAt'](0x0)[_0x37164e(0x204)]()+_0x25aa00['slice'](0x1))]();for(const _0x40cf42 of _0x46dc30){const _0x1fca81=await a0_0xa240e5[_0x37164e(0x212)](_0x37164e(0x20e)+_0x25aa00+'s/'+_0x40cf42);try{await lockNoti(_0x37164e(0x1e0),_0x40cf42,0xbb8),await dpUploadFile(_0x40cf42,_0x1fca81,_0x25aa00);}catch(_0xd6a2b6){console['error'](_0x37164e(0x213)+_0x40cf42+':',_0xd6a2b6);}}}else console['log'](_0x37164e(0x1c8));}}),dropboxCloud[_0x53cc7a(0x1d1)](_0x53cc7a(0x1ee),function(){var _0x42ece2=_0x53cc7a;const _0x543cc3=localStorage['getItem'](_0x42ece2(0x1cf));_0x543cc3===null||_0x543cc3===''?authorizeWithDropbox():window[_0x42ece2(0x1fd)](_0x42ece2(0x1ba))&&(localStorage[_0x42ece2(0x1bf)](_0x42ece2(0x1cf),''),dropboxRestore[_0x42ece2(0x210)][_0x42ece2(0x1c7)](_0x42ece2(0x214)),dropboxBackup[_0x42ece2(0x210)][_0x42ece2(0x1c7)](_0x42ece2(0x214)),dropboxCloud['classList'][_0x42ece2(0x1c7)](_0x42ece2(0x214)));}),handleDropboxCallback();});