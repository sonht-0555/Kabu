var a0_0x4d435c=a0_0x1d16;(function(_0x37afd1,_0x2b1f6a){var _0x14e2f2=a0_0x1d16,_0x28cb7f=_0x37afd1();while(!![]){try{var _0x40601f=-parseInt(_0x14e2f2(0x18a))/0x1*(-parseInt(_0x14e2f2(0x148))/0x2)+-parseInt(_0x14e2f2(0x183))/0x3*(-parseInt(_0x14e2f2(0x15c))/0x4)+parseInt(_0x14e2f2(0x12d))/0x5*(parseInt(_0x14e2f2(0x173))/0x6)+-parseInt(_0x14e2f2(0x139))/0x7+-parseInt(_0x14e2f2(0x12b))/0x8*(parseInt(_0x14e2f2(0x14a))/0x9)+-parseInt(_0x14e2f2(0x190))/0xa*(-parseInt(_0x14e2f2(0x143))/0xb)+-parseInt(_0x14e2f2(0x16b))/0xc*(parseInt(_0x14e2f2(0x164))/0xd);if(_0x40601f===_0x2b1f6a)break;else _0x28cb7f['push'](_0x28cb7f['shift']());}catch(_0x53cf74){_0x28cb7f['push'](_0x28cb7f['shift']());}}}(a0_0x3b54,0x7eeae));import*as a0_0x301d48 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x4d435c(0x159),clientSecret=a0_0x4d435c(0x141);function a0_0x1d16(_0x21776c,_0x17423a){var _0x3b5414=a0_0x3b54();return a0_0x1d16=function(_0x1d16ce,_0x52f4e7){_0x1d16ce=_0x1d16ce-0x126;var _0x3bd747=_0x3b5414[_0x1d16ce];return _0x3bd747;},a0_0x1d16(_0x21776c,_0x17423a);}function authorizeWithDropbox(){var _0x216bf4=a0_0x4d435c,_0x3f2c20=window[_0x216bf4(0x17c)]['href'][_0x216bf4(0x15e)]('?')[0x0],_0x1a5467=_0x216bf4(0x14c),_0x40489e=_0x216bf4(0x177),_0x23f981='https://www.dropbox.com/oauth2/authorize?client_id='+clientId+'&response_type='+_0x1a5467+_0x216bf4(0x168)+_0x40489e+_0x216bf4(0x12c)+encodeURIComponent(_0x3f2c20);window['location'][_0x216bf4(0x180)]=_0x23f981;}function handleDropboxCallback(){var _0x15b3dc=a0_0x4d435c,_0x5ae3bc=getUrlParameter('code');_0x5ae3bc?(getAccessToken(_0x5ae3bc),console[_0x15b3dc(0x185)](_0x15b3dc(0x15b),_0x5ae3bc)):console[_0x15b3dc(0x185)](_0x15b3dc(0x165));}function getUrlParameter(_0x20238c){var _0x1540ad=a0_0x4d435c;_0x20238c=_0x20238c[_0x1540ad(0x17d)](/[\[]/,'\x5c[')[_0x1540ad(0x17d)](/[\]]/,'\x5c]');var _0x56c72c=new RegExp('[\x5c?&#]'+_0x20238c+_0x1540ad(0x12a)),_0x5b7ce1=_0x56c72c['exec'](location[_0x1540ad(0x145)]);return _0x5b7ce1===null?'':decodeURIComponent(_0x5b7ce1[0x1][_0x1540ad(0x17d)](/\+/g,'\x20'));}function getAccessToken(_0x15468a){var _0x5d1565=a0_0x4d435c,_0x4268d6='authorization_code',_0xa95a4e=window['location'][_0x5d1565(0x180)][_0x5d1565(0x15e)]('?')[0x0],_0x4206ef=new XMLHttpRequest();_0x4206ef[_0x5d1565(0x16e)](_0x5d1565(0x186),_0x5d1565(0x13b)),_0x4206ef[_0x5d1565(0x138)](_0x5d1565(0x174),_0x5d1565(0x15f)),_0x4206ef['onload']=function(){var _0x5dab2b=_0x5d1565;if(_0x4206ef[_0x5dab2b(0x161)]===0xc8){var _0x134917=JSON[_0x5dab2b(0x182)](_0x4206ef[_0x5dab2b(0x156)]),_0xad2469=_0x134917[_0x5dab2b(0x129)],_0x3bb7f9=_0x134917[_0x5dab2b(0x127)],_0x231e69=_0x134917[_0x5dab2b(0x189)];localStorage[_0x5dab2b(0x17e)](_0x5dab2b(0x14f),_0xad2469),localStorage['setItem'](_0x5dab2b(0x17b),_0x3bb7f9),localStorage['setItem'](_0x5dab2b(0x14e),_0x231e69);}else console[_0x5dab2b(0x185)]('Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token');},_0x4206ef[_0x5d1565(0x167)]('code='+_0x15468a+_0x5d1565(0x18d)+_0x4268d6+_0x5d1565(0x16f)+clientId+'&client_secret='+clientSecret+_0x5d1565(0x12c)+encodeURIComponent(_0xa95a4e));}function a0_0x3b54(){var _0xe2517a=['Cloud\x20↦\x20Kabu\x20storage\x20◆','186156XZbJKl','folder','code','Folder\x20created','uId','accessToken','active','Error\x20while\x20refreshing\x20token:','error_description','https://api.dropboxapi.com/2/files/create_folder_v2','entries','screenshot','responseText','Restoring...','Kabu\x20storage\x20↦\x20Cloud\x20◆','knh3uz2mx2hp2eu','Bearer\x20','Authorization\x20Code:','10532vaSjCm','No\x20files\x20found\x20to\x20restore.','split','application/x-www-form-urlencoded','error','status','Download\x20failed,\x20unknown\x20http\x20status:','Unable\x20to\x20refresh\x20token','52kAKrrP','Do\x20not\x20receive\x20authorization','application/octet-stream','send','&token_access_type=','remove','classList','3776676glALTP','Cloud\x20login\x20required!','toUpperCase','open','&client_id=','state','alert','overwrite','6uanSvr','Content-Type','json',',\x20status:\x20','offline','Do\x20you\x20want\x20to\x20restore\x20','https://api.dropboxapi.com/2/files/list_folder','.tag','refreshToken','location','replace','setItem','getItem','href','length','parse','1182WhKqKY','Refreshing\x20token...','log','POST','confirm','blob','uid','160019inarcS','Wait\x20a\x20little\x20bit...','save','&grant_type=','list','push','34660NcOFbs','https://content.dropboxapi.com/2/files/upload','refresh_token','Do\x20you\x20want\x20to\x20logout?','access_token','=([^&#]*)','176AHatrp','&redirect_uri=','3427895qJEkLe','Upload\x20failed,\x20unknown\x20http\x20status:\x20','\x20files\x20in\x20Kabu?','Error\x20creating\x20folder\x20','charAt','/data/','Restore\x20canceled\x20by\x20user.','stringify','slice','https://content.dropboxapi.com/2/files/download','Failed\x20to\x20upload\x20file\x20','setRequestHeader','5316444KayCsh','https://api.dropboxapi.com/oauth2/token','https://api.dropbox.com/oauth2/token','name','addEventListener','application/json','downloadFileInCloud','Download\x20failed\x20for\x20','nwb3dnfh09rhs31','click','2508dhukvq','Backing\x20up...','search','No\x20refresh\x20token','filter','6PdCJda'];a0_0x3b54=function(){return _0xe2517a;};return a0_0x3b54();}export async function dpCreateFolder(_0x3394f5){var _0x312160=a0_0x4d435c;const _0x363ffe=localStorage[_0x312160(0x17f)](_0x312160(0x14e));let _0x4e59cd=localStorage['getItem'](_0x312160(0x14f));const _0x31befd='/'+_0x363ffe+'/'+_0x3394f5,_0x14508d=JSON[_0x312160(0x134)]({'path':_0x31befd,'autorename':![]});for(let _0x35d81d=0x0;_0x35d81d<0x2;_0x35d81d++){try{const _0x120934=await fetch(_0x312160(0x153),{'method':_0x312160(0x186),'headers':{'Authorization':_0x312160(0x15a)+_0x4e59cd,'Content-Type':'application/json'},'body':_0x14508d});if(_0x120934['status']===0x191){const _0x488d36=await dpRefreshToken();if(!_0x488d36)throw new Error(_0x312160(0x163));_0x4e59cd=localStorage[_0x312160(0x17f)](_0x312160(0x14f));continue;}if(_0x120934[_0x312160(0x161)]===0x199)return{'message':'Folder\x20already\x20exists','path':_0x3394f5};if(!_0x120934['ok'])throw new Error(_0x312160(0x130)+_0x3394f5);const _0x147029=await _0x120934[_0x312160(0x175)]();return await lockNoti(_0x312160(0x14d),'',0xbb8),_0x147029;}catch(_0x3bd8ac){if(_0x35d81d===0x1)throw _0x3bd8ac;}}return![];}export async function dpRefreshToken(){var _0x29b4cc=a0_0x4d435c;if(!localStorage[_0x29b4cc(0x17f)](_0x29b4cc(0x17b)))throw _0x29b4cc(0x146);try{const _0x110c85=await fetch(_0x29b4cc(0x13a),{'method':_0x29b4cc(0x186),'headers':{'Content-Type':_0x29b4cc(0x15f)},'body':'refresh_token='+localStorage[_0x29b4cc(0x17f)]('refreshToken')+'&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31'}),_0x4ca65d=await _0x110c85[_0x29b4cc(0x175)]();if(!_0x4ca65d[_0x29b4cc(0x160)])return localStorage[_0x29b4cc(0x17e)](_0x29b4cc(0x14f),_0x4ca65d[_0x29b4cc(0x129)]),await lockNoti(_0x29b4cc(0x184),'',0xbb8),await delay(0x3e8),!![];else alert(_0x4ca65d[_0x29b4cc(0x152)]||'Failed\x20to\x20refresh\x20Dropbox\x20token.');}catch(_0x3629c3){console[_0x29b4cc(0x160)](_0x29b4cc(0x151),_0x3629c3);}return![];}export async function dpUploadFile(_0x381968,_0x20d6a1,_0x3422ca){var _0x366920=a0_0x4d435c;const _0x50fb89=localStorage[_0x366920(0x17f)](_0x366920(0x14e));var _0x471cca=JSON[_0x366920(0x134)]({'autorename':!![],'mode':_0x366920(0x172),'mute':!![],'strict_conflict':![],'path':'/'+_0x50fb89+'/'+_0x3422ca+'/'+_0x381968}),_0x16cf9c=new Blob([_0x20d6a1],{'type':_0x366920(0x166)});for(var _0x2ee381=0x0;_0x2ee381<0x2;_0x2ee381++){var _0x5a7056=await fetch(_0x366920(0x126),{'method':_0x366920(0x186),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x366920(0x17f)](_0x366920(0x14f)),'Dropbox-API-Arg':_0x471cca,'Content-Type':'application/octet-stream'},'body':_0x16cf9c});if(_0x5a7056[_0x366920(0x161)]!=0xc8){if(_0x5a7056[_0x366920(0x161)]==0x191){var _0x1d1b90=await dpRefreshToken();if(!_0x1d1b90)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x366920(0x12e)+_0x5a7056[_0x366920(0x161)];}else{var _0x56be35=await _0x5a7056[_0x366920(0x175)]();return console[_0x366920(0x185)](_0x366920(0x158),_0x381968),_0x56be35;}}return![];}export async function dpDownloadFile(_0x772b1f,_0x26abd5){var _0x3ea655=a0_0x4d435c;const _0x332422=localStorage[_0x3ea655(0x17f)](_0x3ea655(0x14e));var _0x5434b5=JSON[_0x3ea655(0x134)]({'path':'/'+_0x332422+'/'+_0x26abd5+'/'+_0x772b1f});for(var _0x5e5d54=0x0;_0x5e5d54<0x2;_0x5e5d54++){var _0x3d7681=await fetch(_0x3ea655(0x136),{'method':_0x3ea655(0x186),'headers':{'Authorization':_0x3ea655(0x15a)+localStorage['getItem'](_0x3ea655(0x14f)),'Dropbox-API-Arg':_0x5434b5}});if(_0x3d7681[_0x3ea655(0x161)]!=0xc8){if(_0x3d7681[_0x3ea655(0x161)]==0x191){var _0x8e9ad9=await dpRefreshToken();if(!_0x8e9ad9)throw _0x3ea655(0x163);continue;}else throw _0x3ea655(0x162)+_0x3d7681[_0x3ea655(0x161)];}const _0x521278=new File([await _0x3d7681[_0x3ea655(0x188)]()],_0x772b1f);return console[_0x3ea655(0x185)](_0x3ea655(0x149),_0x521278[_0x3ea655(0x13c)]),a0_0x301d48['uploadFileInCloud'](_0x521278,()=>{localStorageFile(),Module['FSSync']();}),_0x521278;}return![];}document[a0_0x4d435c(0x13d)]('DOMContentLoaded',function(){var _0x443480=a0_0x4d435c;dropboxRestore[_0x443480(0x13d)](_0x443480(0x142),async function(){var _0x1eee9b=_0x443480;await lockNoti(_0x1eee9b(0x18b),'',0x1388);const _0x5200c6=localStorage[_0x1eee9b(0x17f)]('uId'),_0x35cd2b=['state',_0x1eee9b(0x18c),_0x1eee9b(0x155)];if(!_0x5200c6){window['alert'](_0x1eee9b(0x16c));return;}let _0x3edebe=[];for(const _0x463cee of _0x35cd2b){let _0x369f7d={'path':'/'+_0x5200c6+'/'+_0x463cee};for(let _0x110167=0x0;_0x110167<0x2;_0x110167++){let _0x78fbf0=await fetch(_0x1eee9b(0x179),{'method':_0x1eee9b(0x186),'headers':{'Authorization':_0x1eee9b(0x15a)+localStorage[_0x1eee9b(0x17f)]('accessToken'),'Content-Type':_0x1eee9b(0x13e)},'body':JSON['stringify'](_0x369f7d)});if(_0x78fbf0[_0x1eee9b(0x161)]===0xc8){let _0x5e8883=await _0x78fbf0[_0x1eee9b(0x175)](),_0x16a4c9=_0x5e8883[_0x1eee9b(0x154)][_0x1eee9b(0x147)](_0x54e034=>_0x54e034[_0x1eee9b(0x17a)]==='file');_0x16a4c9[_0x1eee9b(0x181)]>0x0&&_0x3edebe[_0x1eee9b(0x18f)](..._0x16a4c9['map'](_0x4677d9=>({'name':_0x4677d9[_0x1eee9b(0x13c)],'folder':_0x463cee})));break;}else{if(_0x78fbf0[_0x1eee9b(0x161)]===0x191){let _0x4a14f0=await dpRefreshToken();if(!_0x4a14f0)throw _0x1eee9b(0x163);}else{console[_0x1eee9b(0x160)](_0x1eee9b(0x140)+_0x463cee+_0x1eee9b(0x176)+_0x78fbf0['status']);break;}}}}if(_0x3edebe['length']>0x0){const _0x5917bd=_0x1eee9b(0x178)+_0x3edebe[_0x1eee9b(0x181)]+'\x20files\x20from\x20Cloud?';if(window['confirm'](_0x5917bd))for(const _0x1199cf of _0x3edebe){await lockNoti(_0x1eee9b(0x157),_0x1199cf[_0x1eee9b(0x13c)],0xbb8),await dpDownloadFile(_0x1199cf[_0x1eee9b(0x13c)],_0x1199cf[_0x1eee9b(0x14b)]);}else console[_0x1eee9b(0x185)](_0x1eee9b(0x133));}else console[_0x1eee9b(0x185)](_0x1eee9b(0x15d));}),dropboxBackup[_0x443480(0x13d)](_0x443480(0x142),async function(){var _0x38ba01=_0x443480;await lockNoti(_0x38ba01(0x18b),'',0x1388);const _0x41ab09=localStorage['getItem'](_0x38ba01(0x14e));if(_0x41ab09===null||_0x41ab09==='')window[_0x38ba01(0x171)](_0x38ba01(0x16c));else{const _0x51de6f=[_0x38ba01(0x170),_0x38ba01(0x18c),'screenshot'];for(const _0x4240d8 of _0x51de6f){await dpCreateFolder(_0x4240d8);}let _0x33991e=0x0;for(const _0x166f06 of _0x51de6f){const _0x3c0bb5=a0_0x301d48[_0x38ba01(0x18e)+(_0x166f06[_0x38ba01(0x131)](0x0)[_0x38ba01(0x16d)]()+_0x166f06[_0x38ba01(0x135)](0x1))]();_0x33991e+=_0x3c0bb5[_0x38ba01(0x181)];}if(window[_0x38ba01(0x187)]('Do\x20you\x20want\x20to\x20backup\x20'+_0x33991e+_0x38ba01(0x12f)))for(const _0x4f26da of _0x51de6f){const _0x36d382=a0_0x301d48[_0x38ba01(0x18e)+(_0x4f26da[_0x38ba01(0x131)](0x0)['toUpperCase']()+_0x4f26da['slice'](0x1))]();for(const _0x34e3b3 of _0x36d382){const _0x2fd378=await a0_0x301d48[_0x38ba01(0x13f)](_0x38ba01(0x132)+_0x4f26da+'s/'+_0x34e3b3);try{await lockNoti(_0x38ba01(0x144),_0x34e3b3,0xbb8),await dpUploadFile(_0x34e3b3,_0x2fd378,_0x4f26da);}catch(_0x2e8d77){console['error'](_0x38ba01(0x137)+_0x34e3b3+':',_0x2e8d77);}}}else console[_0x38ba01(0x185)](_0x38ba01(0x133));}}),dropboxCloud[_0x443480(0x13d)](_0x443480(0x142),function(){var _0xb6017a=_0x443480;const _0x3c0536=localStorage[_0xb6017a(0x17f)](_0xb6017a(0x14e));_0x3c0536===null||_0x3c0536===''?authorizeWithDropbox():window[_0xb6017a(0x187)](_0xb6017a(0x128))&&(localStorage[_0xb6017a(0x17e)](_0xb6017a(0x14e),''),dropboxRestore[_0xb6017a(0x16a)][_0xb6017a(0x169)](_0xb6017a(0x150)),dropboxBackup['classList'][_0xb6017a(0x169)](_0xb6017a(0x150)),dropboxCloud[_0xb6017a(0x16a)][_0xb6017a(0x169)](_0xb6017a(0x150)));}),handleDropboxCallback();});