function a0_0x1b3e(){var _0x3c705f=['_dateState','log','addEventListener','offline','=([^&#]*)','Restore\x20canceled\x20by\x20user.','.ss7','replace','accessToken','charAt','error','filter','click','location','5943860eoqQDL','https://content.dropboxapi.com/2/files/download','\x20files\x20in\x20Cloud?','&client_id=','Failed\x20to\x20upload\x20file\x20','application/json','uid','onload','refresh_token','href','text','3JikWNe','https://www.dropbox.com/oauth2/authorize?client_id=','Cloud\x20login\x20required!','uId','1684VYfRkx','split','https://api.dropbox.com/oauth2/token','blob','status:\x20','Refreshing\x20token...','refreshToken','Restoring...','gba','1086XXlwXJ','Download\x20failed,\x20unknown\x20http\x20status:\x20','parse','refresh_token=','application/octet-stream','11365pvWzof','https://content.dropboxapi.com/2/files/upload','status','3065284LvDbcz','.ss1','substring','remove','Cloud\x20↦\x20Kabu\x20storage\x20◆','list','Error\x20while\x20refreshing\x20token:','.ss2','alert','getItem','&client_secret=','[\x5c?&#]','send','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','DOMContentLoaded','&redirect_uri=','.ss0','.gba_imageState','exec','.ss6','code=','stringify','confirm','.txt','10594863leyyCd','json','https://api.dropboxapi.com/2/files/list_folder','.gba_dateState','POST','13625447bqiBOC','nwb3dnfh09rhs31','Failed\x20to\x20refresh\x20Dropbox\x20token.','/data/','lastIndexOf','endsWith','entries','Do\x20you\x20want\x20to\x20restore\x20','knh3uz2mx2hp2eu','code','length','Unable\x20to\x20refresh\x20token','.ss4','.tag','Backing\x20up...','Download\x20failed,\x20unknown\x20http\x20status:','setItem','&grant_type=','access_token','text/plain','state','file','2755320tgtjim','toUpperCase','name','application/x-www-form-urlencoded','authorization_code','Bearer\x20','downloadFileInCloud','error_description','open','search','7hzUPwO','uploadSaveOrSaveState','Upload\x20failed,\x20unknown\x20http\x20status:\x20','responseText','_imageState','864iJYWEq','.gba_slot','.ss5','active','Authorization\x20Code:','Content-Type'];a0_0x1b3e=function(){return _0x3c705f;};return a0_0x1b3e();}var a0_0x1b1729=a0_0x4ce3;(function(_0x144b65,_0x443864){var _0x13e012=a0_0x4ce3,_0x381a6a=_0x144b65();while(!![]){try{var _0x15e201=-parseInt(_0x13e012(0x1f0))/0x1*(parseInt(_0x13e012(0x213))/0x2)+-parseInt(_0x13e012(0x20f))/0x3*(-parseInt(_0x13e012(0x1ae))/0x4)+parseInt(_0x13e012(0x1ab))/0x5*(-parseInt(_0x13e012(0x21c))/0x6)+-parseInt(_0x13e012(0x1eb))/0x7*(-parseInt(_0x13e012(0x1e1))/0x8)+-parseInt(_0x13e012(0x1c6))/0x9+parseInt(_0x13e012(0x204))/0xa+parseInt(_0x13e012(0x1cb))/0xb;if(_0x15e201===_0x443864)break;else _0x381a6a['push'](_0x381a6a['shift']());}catch(_0x16da4c){_0x381a6a['push'](_0x381a6a['shift']());}}}(a0_0x1b3e,0x993eb));import*as a0_0x301ec8 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x1b1729(0x1d3),clientSecret=a0_0x1b1729(0x1cc);function authorizeWithDropbox(){var _0x4c5db6=a0_0x1b1729,_0x367a1d=window[_0x4c5db6(0x203)]['href']['split']('?')[0x0],_0x27b63f='code',_0x481d3c=_0x4c5db6(0x1f9),_0xad4d3f=_0x4c5db6(0x210)+clientId+'&response_type='+_0x27b63f+'&token_access_type='+_0x481d3c+_0x4c5db6(0x1bd)+encodeURIComponent(_0x367a1d);window[_0x4c5db6(0x203)]['href']=_0xad4d3f;}function handleDropboxCallback(){var _0x1ae1fc=a0_0x1b1729,_0x18fe24=getUrlParameter(_0x1ae1fc(0x1d4));_0x18fe24?(getAccessToken(_0x18fe24),console[_0x1ae1fc(0x1f7)](_0x1ae1fc(0x1f4),_0x18fe24)):console['log']('Do\x20not\x20receive\x20authorization');}function getUrlParameter(_0x104373){var _0x5733e6=a0_0x1b1729;_0x104373=_0x104373[_0x5733e6(0x1fd)](/[\[]/,'\x5c[')[_0x5733e6(0x1fd)](/[\]]/,'\x5c]');var _0x453fa3=new RegExp(_0x5733e6(0x1b9)+_0x104373+_0x5733e6(0x1fa)),_0x11fb3e=_0x453fa3[_0x5733e6(0x1c0)](location[_0x5733e6(0x1ea)]);return _0x11fb3e===null?'':decodeURIComponent(_0x11fb3e[0x1][_0x5733e6(0x1fd)](/\+/g,'\x20'));}function getAccessToken(_0x2bbfe2){var _0xb7d22f=a0_0x1b1729,_0x1dd6d2=_0xb7d22f(0x1e5),_0x3fbe3f=window[_0xb7d22f(0x203)][_0xb7d22f(0x20d)][_0xb7d22f(0x214)]('?')[0x0],_0x7787f=new XMLHttpRequest();_0x7787f[_0xb7d22f(0x1e9)](_0xb7d22f(0x1ca),_0xb7d22f(0x215)),_0x7787f['setRequestHeader'](_0xb7d22f(0x1f5),_0xb7d22f(0x1e4)),_0x7787f[_0xb7d22f(0x20b)]=function(){var _0x2f6c60=_0xb7d22f;if(_0x7787f[_0x2f6c60(0x1ad)]===0xc8){var _0x20dd47=JSON[_0x2f6c60(0x21e)](_0x7787f[_0x2f6c60(0x1ee)]),_0x68102=_0x20dd47[_0x2f6c60(0x1dd)],_0x53fbd3=_0x20dd47[_0x2f6c60(0x20c)],_0x38f815=_0x20dd47[_0x2f6c60(0x20a)];localStorage['setItem'](_0x2f6c60(0x1fe),_0x68102),localStorage[_0x2f6c60(0x1db)]('refreshToken',_0x53fbd3),localStorage['setItem'](_0x2f6c60(0x212),_0x38f815);}else console[_0x2f6c60(0x1f7)]('Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token');},_0x7787f[_0xb7d22f(0x1ba)](_0xb7d22f(0x1c2)+_0x2bbfe2+_0xb7d22f(0x1dc)+_0x1dd6d2+_0xb7d22f(0x207)+clientId+_0xb7d22f(0x1b8)+clientSecret+_0xb7d22f(0x1bd)+encodeURIComponent(_0x3fbe3f));}export async function dpRefreshToken(){var _0x13e245=a0_0x1b1729;if(!localStorage['getItem'](_0x13e245(0x219)))throw'No\x20refresh\x20token';try{const _0x39f634=await fetch('https://api.dropboxapi.com/oauth2/token',{'method':_0x13e245(0x1ca),'headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0x13e245(0x21f)+localStorage[_0x13e245(0x1b7)]('refreshToken')+_0x13e245(0x1bb)}),_0x4e107f=await _0x39f634['json']();if(!_0x4e107f[_0x13e245(0x200)])return localStorage[_0x13e245(0x1db)](_0x13e245(0x1fe),_0x4e107f[_0x13e245(0x1dd)]),await lockNoti('',_0x13e245(0x218),0xbb8),await delay(0x3e8),!![];else alert(_0x4e107f[_0x13e245(0x1e8)]||_0x13e245(0x1cd));}catch(_0x99e97f){console[_0x13e245(0x200)](_0x13e245(0x1b4),_0x99e97f);}return![];}export async function dpUploadFile(_0x4106aa,_0x333f1a){var _0x418f78=a0_0x1b1729;const _0xf6aff1=localStorage[_0x418f78(0x1b7)](_0x418f78(0x212));var _0x5de5eb=JSON[_0x418f78(0x1c3)]({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0xf6aff1+'/'+_0x4106aa}),_0x4cd4ac=new Blob([_0x333f1a],{'type':_0x418f78(0x220)});for(var _0x36fee9=0x0;_0x36fee9<0x2;_0x36fee9++){var _0x47a0d6=await fetch(_0x418f78(0x1ac),{'method':_0x418f78(0x1ca),'headers':{'Authorization':_0x418f78(0x1e6)+localStorage[_0x418f78(0x1b7)](_0x418f78(0x1fe)),'Dropbox-API-Arg':_0x5de5eb,'Content-Type':_0x418f78(0x220)},'body':_0x4cd4ac});if(_0x47a0d6[_0x418f78(0x1ad)]!=0xc8){if(_0x47a0d6['status']==0x191){var _0x1fafa8=await dpRefreshToken();if(!_0x1fafa8)throw _0x418f78(0x1d6);continue;}else throw _0x418f78(0x1ed)+_0x47a0d6[_0x418f78(0x1ad)];}else{var _0x4a09ab=await _0x47a0d6[_0x418f78(0x1c7)]();return console[_0x418f78(0x1f7)]('Kabu\x20storage\x20↦\x20Cloud\x20◆',_0x4106aa),_0x4a09ab;}}return![];}function a0_0x4ce3(_0xc05162,_0x2509b4){var _0x1b3e68=a0_0x1b3e();return a0_0x4ce3=function(_0x4ce318,_0x3f73bf){_0x4ce318=_0x4ce318-0x1ab;var _0x3eb6e7=_0x1b3e68[_0x4ce318];return _0x3eb6e7;},a0_0x4ce3(_0xc05162,_0x2509b4);}async function dpDownloadFile(_0x211a61){var _0xe97b8a=a0_0x1b1729;const _0x24c717=localStorage[_0xe97b8a(0x1b7)](_0xe97b8a(0x212));var _0x371257=JSON[_0xe97b8a(0x1c3)]({'path':'/'+_0x24c717+'/'+_0x211a61});for(var _0xd510e7=0x0;_0xd510e7<0x2;_0xd510e7++){var _0x344abf=await fetch(_0xe97b8a(0x205),{'method':'POST','headers':{'Authorization':_0xe97b8a(0x1e6)+localStorage[_0xe97b8a(0x1b7)](_0xe97b8a(0x1fe)),'Dropbox-API-Arg':_0x371257}});if(_0x344abf['status']!=0xc8){if(_0x344abf[_0xe97b8a(0x1ad)]==0x191){var _0x4f3686=await dpRefreshToken();if(!_0x4f3686)throw _0xe97b8a(0x1d6);continue;}else throw _0xe97b8a(0x1da)+_0x344abf[_0xe97b8a(0x1ad)];}const _0xb63981=new File([await _0x344abf[_0xe97b8a(0x216)]()],_0x211a61);console['log'](_0xe97b8a(0x1b2),_0xb63981[_0xe97b8a(0x1e3)]);if(_0x211a61[_0xe97b8a(0x1d0)](_0xe97b8a(0x1c5))){const _0x454cca=await _0xb63981[_0xe97b8a(0x20e)](),[_0xd8a121,_0x260015]=_0x454cca[_0xe97b8a(0x214)]('\x0a\x0a'),_0xcbc960=_0x211a61[_0xe97b8a(0x1b0)](0x0,_0x211a61[_0xe97b8a(0x1cf)](_0xe97b8a(0x21b))+0x3),_0x17dfae=_0x211a61['charAt'](_0x211a61[_0xe97b8a(0x1d5)]-0x5);localStorage[_0xe97b8a(0x1db)](_0xcbc960+_0xe97b8a(0x1f6)+_0x17dfae,_0x260015),localStorage[_0xe97b8a(0x1db)](_0xcbc960+_0xe97b8a(0x1ef)+_0x17dfae,_0xd8a121);}else a0_0x301ec8[_0xe97b8a(0x1ec)](_0xb63981,()=>{localStorageFile(),Module['FSSync']();});return _0xb63981;}return![];}document[a0_0x1b1729(0x1f8)](a0_0x1b1729(0x1bc),function(){var _0x57fa85=a0_0x1b1729;dropboxRestore[_0x57fa85(0x1f8)](_0x57fa85(0x202),async function(){var _0x17bae5=_0x57fa85;const _0x523eb5=localStorage['getItem'](_0x17bae5(0x212));if(_0x523eb5===null||_0x523eb5==='')window[_0x17bae5(0x1b6)](_0x17bae5(0x211));else{var _0x8e9890={'path':'/'+_0x523eb5};for(var _0x3fcfdb=0x0;_0x3fcfdb<0x2;_0x3fcfdb++){var _0x358290=await fetch(_0x17bae5(0x1c8),{'method':_0x17bae5(0x1ca),'headers':{'Authorization':_0x17bae5(0x1e6)+localStorage[_0x17bae5(0x1b7)](_0x17bae5(0x1fe)),'Content-Type':_0x17bae5(0x209)},'body':JSON[_0x17bae5(0x1c3)](_0x8e9890)});console['log'](_0x17bae5(0x217),_0x358290[_0x17bae5(0x1ad)]);if(_0x358290[_0x17bae5(0x1ad)]!=0xc8){if(_0x358290[_0x17bae5(0x1ad)]==0x191){var _0x311ef0=await dpRefreshToken();if(!_0x311ef0)throw _0x17bae5(0x1d6);continue;}else throw _0x17bae5(0x21d)+_0x358290[_0x17bae5(0x1ad)];}else{const _0x3ebed3=await _0x358290[_0x17bae5(0x1c7)](),_0xca86c7=_0x3ebed3['entries'][_0x17bae5(0x201)](_0x569df4=>_0x569df4[_0x17bae5(0x1d8)]===_0x17bae5(0x1e0))[_0x17bae5(0x1d5)],_0x2db935=_0x17bae5(0x1d2)+_0xca86c7+_0x17bae5(0x206);if(window[_0x17bae5(0x1c4)](_0x2db935))for(const _0x4a9fd3 of _0x3ebed3[_0x17bae5(0x1d1)]){_0x4a9fd3[_0x17bae5(0x1d8)]===_0x17bae5(0x1e0)&&(await lockNoti(_0x17bae5(0x21a),_0x4a9fd3[_0x17bae5(0x1e3)],0xbb8),await dpDownloadFile(_0x4a9fd3[_0x17bae5(0x1e3)]));}else console[_0x17bae5(0x1f7)](_0x17bae5(0x1fb));return!![];}}return![];}}),dropboxBackup[_0x57fa85(0x1f8)]('click',async function(){var _0x3dc771=_0x57fa85;const _0x3e657f=localStorage['getItem'](_0x3dc771(0x212));if(_0x3e657f===null||_0x3e657f==='')window['alert'](_0x3dc771(0x211));else{const _0x5a3711=[_0x3dc771(0x1df),'save'];let _0x33a613=0x0;for(const _0x6bb826 of _0x5a3711){const _0x3ee074=a0_0x301ec8[_0x3dc771(0x1b3)+(_0x6bb826[_0x3dc771(0x1ff)](0x0)[_0x3dc771(0x1e2)]()+_0x6bb826['slice'](0x1))]();_0x33a613+=_0x3ee074[_0x3dc771(0x1d5)];}if(window[_0x3dc771(0x1c4)]('Do\x20you\x20want\x20to\x20backup\x20'+_0x33a613+'\x20files\x20in\x20Kabu?'))for(const _0x2d36d3 of _0x5a3711){const _0x5e8d2b=a0_0x301ec8['list'+(_0x2d36d3[_0x3dc771(0x1ff)](0x0)[_0x3dc771(0x1e2)]()+_0x2d36d3['slice'](0x1))]();for(const _0x1059b1 of _0x5e8d2b){const _0x2a2b6e=await a0_0x301ec8[_0x3dc771(0x1e7)](_0x3dc771(0x1ce)+_0x2d36d3+'s/'+_0x1059b1);try{await lockNoti(_0x3dc771(0x1d9),_0x1059b1,0xbb8),await dpUploadFile(_0x1059b1,_0x2a2b6e);if(_0x1059b1['endsWith'](_0x3dc771(0x1be))||_0x1059b1[_0x3dc771(0x1d0)](_0x3dc771(0x1af))||_0x1059b1[_0x3dc771(0x1d0)](_0x3dc771(0x1b5))||_0x1059b1[_0x3dc771(0x1d0)]('.ss3')||_0x1059b1['endsWith'](_0x3dc771(0x1d7))||_0x1059b1[_0x3dc771(0x1d0)](_0x3dc771(0x1f2))||_0x1059b1['endsWith'](_0x3dc771(0x1c1))||_0x1059b1[_0x3dc771(0x1d0)](_0x3dc771(0x1fc))){const _0x5479c3=_0x1059b1[_0x3dc771(0x1b0)](0x0,_0x1059b1[_0x3dc771(0x1cf)]('.')),_0x15d827=_0x1059b1[_0x3dc771(0x1ff)](_0x1059b1[_0x3dc771(0x1d5)]-0x1),_0x30446f=localStorage[_0x3dc771(0x1b7)](_0x5479c3+_0x3dc771(0x1bf)+_0x15d827),_0x22f1f0=localStorage[_0x3dc771(0x1b7)](_0x5479c3+_0x3dc771(0x1c9)+_0x15d827);if(_0x30446f!==null){const _0x102d10=_0x30446f+'\x0a\x0a'+_0x22f1f0,_0xc1737=new Blob([_0x102d10],{'type':_0x3dc771(0x1de)});await lockNoti('Backing\x20up...',_0x5479c3+_0x3dc771(0x1f1)+_0x15d827+_0x3dc771(0x1c5),0xbb8),await dpUploadFile(_0x5479c3+_0x3dc771(0x1f1)+_0x15d827+'.txt',_0xc1737);}}}catch(_0x4468ab){console['error'](_0x3dc771(0x208)+_0x1059b1+':',_0x4468ab);}}}else console['log'](_0x3dc771(0x1fb));}}),dropboxCloud[_0x57fa85(0x1f8)]('click',function(){var _0x4fa0f2=_0x57fa85;const _0x220754=localStorage['getItem'](_0x4fa0f2(0x212));_0x220754===null||_0x220754===''?authorizeWithDropbox():window[_0x4fa0f2(0x1c4)]('Do\x20you\x20want\x20to\x20logout?')&&(localStorage[_0x4fa0f2(0x1db)](_0x4fa0f2(0x212),''),dropboxRestore['classList']['remove']('active'),dropboxBackup['classList'][_0x4fa0f2(0x1b1)](_0x4fa0f2(0x1f3)),dropboxCloud['classList'][_0x4fa0f2(0x1b1)](_0x4fa0f2(0x1f3)));}),handleDropboxCallback();});