var a0_0x4496c1=a0_0x3c83;(function(_0xe176e3,_0x198582){var _0x486b08=a0_0x3c83,_0x4717df=_0xe176e3();while(!![]){try{var _0x295744=-parseInt(_0x486b08(0x1d6))/0x1*(-parseInt(_0x486b08(0x1a7))/0x2)+parseInt(_0x486b08(0x1c1))/0x3*(-parseInt(_0x486b08(0x19e))/0x4)+-parseInt(_0x486b08(0x1cc))/0x5*(parseInt(_0x486b08(0x1b0))/0x6)+parseInt(_0x486b08(0x1a0))/0x7+-parseInt(_0x486b08(0x17c))/0x8+-parseInt(_0x486b08(0x198))/0x9*(-parseInt(_0x486b08(0x1b8))/0xa)+parseInt(_0x486b08(0x1ca))/0xb;if(_0x295744===_0x198582)break;else _0x4717df['push'](_0x4717df['shift']());}catch(_0x576e89){_0x4717df['push'](_0x4717df['shift']());}}}(a0_0x805f,0x70a30));import*as a0_0x6b43f5 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x4496c1(0x1ae),clientSecret=a0_0x4496c1(0x195);function authorizeWithDropbox(){var _0x1e454d=a0_0x4496c1,_0xe8d759=window[_0x1e454d(0x1d4)][_0x1e454d(0x1d3)][_0x1e454d(0x1c6)]('?')[0x0],_0x29401c='code',_0x2bd213=_0x1e454d(0x1b4),_0x1a4363=_0x1e454d(0x1af)+clientId+_0x1e454d(0x18e)+_0x29401c+_0x1e454d(0x1a1)+_0x2bd213+_0x1e454d(0x177)+encodeURIComponent(_0xe8d759);window[_0x1e454d(0x1d4)][_0x1e454d(0x1d3)]=_0x1a4363;}function handleDropboxCallback(){var _0x52b2fb=a0_0x4496c1,_0x8b6d5e=getUrlParameter(_0x52b2fb(0x180));_0x8b6d5e?(getAccessToken(_0x8b6d5e),console[_0x52b2fb(0x18c)](_0x52b2fb(0x197),_0x8b6d5e)):console['log'](_0x52b2fb(0x1b1));}function getUrlParameter(_0x36c3fd){var _0x358cbd=a0_0x4496c1;_0x36c3fd=_0x36c3fd[_0x358cbd(0x1a4)](/[\[]/,'\x5c[')[_0x358cbd(0x1a4)](/[\]]/,'\x5c]');var _0x13ad3f=new RegExp(_0x358cbd(0x1d1)+_0x36c3fd+'=([^&#]*)'),_0x2c4442=_0x13ad3f[_0x358cbd(0x1ad)](location[_0x358cbd(0x179)]);return _0x2c4442===null?'':decodeURIComponent(_0x2c4442[0x1][_0x358cbd(0x1a4)](/\+/g,'\x20'));}function getAccessToken(_0x5418cc){var _0x27dde5=a0_0x4496c1,_0x31693a=_0x27dde5(0x1ba),_0x15c61c=window[_0x27dde5(0x1d4)][_0x27dde5(0x1d3)][_0x27dde5(0x1c6)]('?')[0x0],_0x1ee603=new XMLHttpRequest();_0x1ee603['open'](_0x27dde5(0x1aa),_0x27dde5(0x194)),_0x1ee603[_0x27dde5(0x17e)](_0x27dde5(0x188),_0x27dde5(0x187)),_0x1ee603['onload']=function(){var _0x2b0a11=_0x27dde5;if(_0x1ee603[_0x2b0a11(0x1b2)]===0xc8){var _0x3fe635=JSON[_0x2b0a11(0x1d2)](_0x1ee603['responseText']),_0x46c7e7=_0x3fe635['access_token'],_0xac704c=_0x3fe635[_0x2b0a11(0x1da)],_0x2372a9=_0x3fe635['uid'];localStorage[_0x2b0a11(0x1bc)](_0x2b0a11(0x1cb),_0x46c7e7),localStorage[_0x2b0a11(0x1bc)]('refreshToken',_0xac704c),localStorage[_0x2b0a11(0x1bc)]('uId',_0x2372a9);}else console[_0x2b0a11(0x18c)](_0x2b0a11(0x19f));},_0x1ee603[_0x27dde5(0x1c9)](_0x27dde5(0x19b)+_0x5418cc+'&grant_type='+_0x31693a+_0x27dde5(0x186)+clientId+_0x27dde5(0x190)+clientSecret+'&redirect_uri='+encodeURIComponent(_0x15c61c));}export async function dpCreateFolder(_0x614652){var _0x41cf37=a0_0x4496c1;const _0x5a0bcc=localStorage[_0x41cf37(0x189)](_0x41cf37(0x1d9));let _0x5de005=localStorage[_0x41cf37(0x189)]('accessToken');const _0x20dc8d='/'+_0x5a0bcc+'/'+_0x614652,_0x24a212=JSON[_0x41cf37(0x1be)]({'path':_0x20dc8d,'autorename':![]});for(let _0xf4ccfe=0x0;_0xf4ccfe<0x2;_0xf4ccfe++){try{const _0x38d767=await fetch('https://api.dropboxapi.com/2/files/create_folder_v2',{'method':_0x41cf37(0x1aa),'headers':{'Authorization':'Bearer\x20'+_0x5de005,'Content-Type':'application/json'},'body':_0x24a212});if(_0x38d767[_0x41cf37(0x1b2)]===0x191){const _0x110409=await dpRefreshToken();if(!_0x110409)throw new Error(_0x41cf37(0x1bf));_0x5de005=localStorage[_0x41cf37(0x189)](_0x41cf37(0x1cb));continue;}if(_0x38d767['status']===0x199)return{'message':_0x41cf37(0x1ab),'path':_0x614652};if(!_0x38d767['ok'])throw new Error('Error\x20creating\x20folder\x20'+_0x614652);const _0x21a725=await _0x38d767['json']();return await lockNoti(_0x41cf37(0x1c3),'',0xbb8),_0x21a725;}catch(_0xef6b26){if(_0xf4ccfe===0x1)throw _0xef6b26;}}return![];}export async function dpRefreshToken(){var _0x5c5d74=a0_0x4496c1;if(!localStorage[_0x5c5d74(0x189)](_0x5c5d74(0x199)))throw _0x5c5d74(0x1a2);try{const _0x320677=await fetch(_0x5c5d74(0x1ac),{'method':_0x5c5d74(0x1aa),'headers':{'Content-Type':_0x5c5d74(0x187)},'body':'refresh_token='+localStorage[_0x5c5d74(0x189)](_0x5c5d74(0x199))+_0x5c5d74(0x17f)}),_0x1d4a15=await _0x320677[_0x5c5d74(0x1c5)]();if(!_0x1d4a15[_0x5c5d74(0x1a8)])return localStorage[_0x5c5d74(0x1bc)](_0x5c5d74(0x1cb),_0x1d4a15['access_token']),await lockNoti(_0x5c5d74(0x185),'',0xbb8),await delay(0x3e8),!![];else alert(_0x1d4a15[_0x5c5d74(0x1a3)]||'Failed\x20to\x20refresh\x20Dropbox\x20token.');}catch(_0x36ff36){console[_0x5c5d74(0x1a8)](_0x5c5d74(0x17d),_0x36ff36);}return![];}export async function dpUploadFile(_0x54a609,_0x3d64ab,_0x968852){var _0x30c748=a0_0x4496c1;const _0x632ec2=localStorage['getItem']('uId');var _0x3f74ed=JSON['stringify']({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x632ec2+'/'+_0x968852+'/'+_0x54a609}),_0x10f9a2=new Blob([_0x3d64ab],{'type':_0x30c748(0x1d8)});for(var _0x2ea4d1=0x0;_0x2ea4d1<0x2;_0x2ea4d1++){var _0x34337c=await fetch(_0x30c748(0x192),{'method':_0x30c748(0x1aa),'headers':{'Authorization':_0x30c748(0x1b9)+localStorage[_0x30c748(0x189)](_0x30c748(0x1cb)),'Dropbox-API-Arg':_0x3f74ed,'Content-Type':_0x30c748(0x1d8)},'body':_0x10f9a2});if(_0x34337c[_0x30c748(0x1b2)]!=0xc8){if(_0x34337c['status']==0x191){var _0x141b95=await dpRefreshToken();if(!_0x141b95)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x30c748(0x19a)+_0x34337c[_0x30c748(0x1b2)];}else{var _0x41e2f5=await _0x34337c[_0x30c748(0x1c5)]();return console[_0x30c748(0x18c)](_0x30c748(0x19c),_0x54a609),_0x41e2f5;}}return![];}export async function dpDownloadFile(_0x4f957f,_0x3674a0){var _0x53233e=a0_0x4496c1;const _0x166737=localStorage[_0x53233e(0x189)](_0x53233e(0x1d9));var _0x403d43=JSON['stringify']({'path':'/'+_0x166737+'/'+_0x3674a0+'/'+_0x4f957f});for(var _0x55c03c=0x0;_0x55c03c<0x2;_0x55c03c++){var _0x2df67d=await fetch('https://content.dropboxapi.com/2/files/download',{'method':_0x53233e(0x1aa),'headers':{'Authorization':_0x53233e(0x1b9)+localStorage[_0x53233e(0x189)](_0x53233e(0x1cb)),'Dropbox-API-Arg':_0x403d43}});if(_0x2df67d[_0x53233e(0x1b2)]!=0xc8){if(_0x2df67d[_0x53233e(0x1b2)]==0x191){var _0x2e15d7=await dpRefreshToken();if(!_0x2e15d7)throw _0x53233e(0x1bf);continue;}else throw _0x53233e(0x19d)+_0x2df67d[_0x53233e(0x1b2)];}const _0x40bf03=new File([await _0x2df67d[_0x53233e(0x1db)]()],_0x4f957f);return console['log'](_0x53233e(0x1c4),_0x40bf03['name']),a0_0x6b43f5[_0x53233e(0x1d7)](_0x40bf03,()=>{}),_0x40bf03;}return![];}function a0_0x3c83(_0x301720,_0x29bbef){var _0x805fb0=a0_0x805f();return a0_0x3c83=function(_0x3c8357,_0x16e1aa){_0x3c8357=_0x3c8357-0x177;var _0x4e867a=_0x805fb0[_0x3c8357];return _0x4e867a;},a0_0x3c83(_0x301720,_0x29bbef);}document['addEventListener']('DOMContentLoaded',function(){var _0x4d8366=a0_0x4496c1;dropboxRestore[_0x4d8366(0x184)]('click',async function(){var _0x599d4f=_0x4d8366;await lockNoti(_0x599d4f(0x1d0),'',0x1388);const _0x1809e5=localStorage[_0x599d4f(0x189)]('uId'),_0x440620=[_0x599d4f(0x17a),_0x599d4f(0x1c2),_0x599d4f(0x191)];if(!_0x1809e5){window['alert'](_0x599d4f(0x1bd));return;}let _0x50f6ab=[];for(const _0x2815ce of _0x440620){let _0x156d20={'path':'/'+_0x1809e5+'/'+_0x2815ce};for(let _0x15f2ee=0x0;_0x15f2ee<0x2;_0x15f2ee++){let _0x74b956=await fetch(_0x599d4f(0x183),{'method':_0x599d4f(0x1aa),'headers':{'Authorization':_0x599d4f(0x1b9)+localStorage[_0x599d4f(0x189)](_0x599d4f(0x1cb)),'Content-Type':'application/json'},'body':JSON['stringify'](_0x156d20)});if(_0x74b956[_0x599d4f(0x1b2)]===0xc8){let _0x5c6cd3=await _0x74b956[_0x599d4f(0x1c5)](),_0x4066ff=_0x5c6cd3[_0x599d4f(0x18b)][_0x599d4f(0x1dd)](_0x397cad=>_0x397cad[_0x599d4f(0x1cf)]===_0x599d4f(0x178));_0x4066ff[_0x599d4f(0x1dc)]>0x0&&_0x50f6ab[_0x599d4f(0x1b6)](..._0x4066ff['map'](_0x22d718=>({'name':_0x22d718[_0x599d4f(0x196)],'folder':_0x2815ce})));break;}else{if(_0x74b956[_0x599d4f(0x1b2)]===0x191){let _0x5d5bb5=await dpRefreshToken();if(!_0x5d5bb5)throw'Unable\x20to\x20refresh\x20token';}else{console[_0x599d4f(0x1a8)](_0x599d4f(0x18d)+_0x2815ce+_0x599d4f(0x1a5)+_0x74b956[_0x599d4f(0x1b2)]);break;}}}}if(_0x50f6ab[_0x599d4f(0x1dc)]>0x0){const _0x46fc8d='Do\x20you\x20want\x20to\x20restore\x20'+_0x50f6ab[_0x599d4f(0x1dc)]+_0x599d4f(0x182);if(window['confirm'](_0x46fc8d))for(const _0x2b1960 of _0x50f6ab){await lockNoti('Restoring...',_0x2b1960[_0x599d4f(0x196)],0xbb8),await dpDownloadFile(_0x2b1960['name'],_0x2b1960[_0x599d4f(0x18f)]);}else console[_0x599d4f(0x18c)]('Restore\x20canceled\x20by\x20user.');}else console[_0x599d4f(0x18c)](_0x599d4f(0x1d5));}),dropboxBackup[_0x4d8366(0x184)](_0x4d8366(0x1cd),async function(){var _0x4c4660=_0x4d8366;await lockNoti(_0x4c4660(0x1d0),'',0x1388);const _0x1c5c17=localStorage[_0x4c4660(0x189)](_0x4c4660(0x1d9));if(_0x1c5c17===null||_0x1c5c17==='')window[_0x4c4660(0x1a6)]('Cloud\x20login\x20required!');else{const _0x2f9560=[_0x4c4660(0x17a),_0x4c4660(0x1c2),_0x4c4660(0x191)];for(const _0x5817e7 of _0x2f9560){await dpCreateFolder(_0x5817e7);}let _0x5853bf=0x0;for(const _0x2d526e of _0x2f9560){const _0x24b21f=a0_0x6b43f5['list'+(_0x2d526e[_0x4c4660(0x1c8)](0x0)[_0x4c4660(0x1b5)]()+_0x2d526e[_0x4c4660(0x1c0)](0x1))]();_0x5853bf+=_0x24b21f[_0x4c4660(0x1dc)];}if(window[_0x4c4660(0x1a9)]('Do\x20you\x20want\x20to\x20backup\x20'+_0x5853bf+_0x4c4660(0x181)))for(const _0xb669d2 of _0x2f9560){const _0x269290=a0_0x6b43f5['list'+(_0xb669d2['charAt'](0x0)[_0x4c4660(0x1b5)]()+_0xb669d2[_0x4c4660(0x1c0)](0x1))]();for(const _0x3e49e1 of _0x269290){const _0x20969f=await a0_0x6b43f5[_0x4c4660(0x1b3)](_0x4c4660(0x18a)+_0xb669d2+'s/'+_0x3e49e1);try{await lockNoti(_0x4c4660(0x1b7),_0x3e49e1,0xbb8),await dpUploadFile(_0x3e49e1,_0x20969f,_0xb669d2);}catch(_0x7abad9){console[_0x4c4660(0x1a8)](_0x4c4660(0x1bb)+_0x3e49e1+':',_0x7abad9);}}}else console['log'](_0x4c4660(0x17b));}}),dropboxCloud[_0x4d8366(0x184)]('click',function(){var _0x282426=_0x4d8366;const _0x5358de=localStorage[_0x282426(0x189)](_0x282426(0x1d9));_0x5358de===null||_0x5358de===''?authorizeWithDropbox():window[_0x282426(0x1a9)]('Do\x20you\x20want\x20to\x20logout?')&&(localStorage['setItem'](_0x282426(0x1d9),''),dropboxRestore['classList'][_0x282426(0x193)](_0x282426(0x1ce)),dropboxBackup['classList'][_0x282426(0x193)](_0x282426(0x1ce)),dropboxCloud[_0x282426(0x1c7)][_0x282426(0x193)](_0x282426(0x1ce)));}),handleDropboxCallback();});function a0_0x805f(){var _0x47f65c=['parse','href','location','No\x20files\x20found\x20to\x20restore.','195IIsOHg','uploadFileInCloud','application/octet-stream','uId','refresh_token','blob','length','filter','&redirect_uri=','file','search','state','Restore\x20canceled\x20by\x20user.','6599088YqkLPn','Error\x20while\x20refreshing\x20token:','setRequestHeader','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','code','\x20files\x20in\x20Kabu?','\x20files\x20from\x20Cloud?','https://api.dropboxapi.com/2/files/list_folder','addEventListener','Refreshing\x20token...','&client_id=','application/x-www-form-urlencoded','Content-Type','getItem','/data/','entries','log','Download\x20failed\x20for\x20','&response_type=','folder','&client_secret=','screenshot','https://content.dropboxapi.com/2/files/upload','remove','https://api.dropbox.com/oauth2/token','nwb3dnfh09rhs31','name','Authorization\x20Code:','34371WQplsC','refreshToken','Upload\x20failed,\x20unknown\x20http\x20status:\x20','code=','Kabu\x20storage\x20↦\x20Cloud\x20◆','Download\x20failed,\x20unknown\x20http\x20status:','368MhlNRd','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','4810323FqKVdw','&token_access_type=','No\x20refresh\x20token','error_description','replace',',\x20status:\x20','alert','9146uKXvjw','error','confirm','POST','Folder\x20already\x20exists','https://api.dropboxapi.com/oauth2/token','exec','knh3uz2mx2hp2eu','https://www.dropbox.com/oauth2/authorize?client_id=','360ywYLYb','Do\x20not\x20receive\x20authorization','status','downloadFileInCloud','offline','toUpperCase','push','Backing\x20up...','500sNtmVe','Bearer\x20','authorization_code','Failed\x20to\x20upload\x20file\x20','setItem','Cloud\x20login\x20required!','stringify','Unable\x20to\x20refresh\x20token','slice','27903YzVINL','save','Folder\x20created','Cloud\x20↦\x20Kabu\x20storage\x20◆','json','split','classList','charAt','send','12582944wwXjJq','accessToken','64320zZLApI','click','active','.tag','Wait\x20a\x20little\x20bit...','[\x5c?&#]'];a0_0x805f=function(){return _0x47f65c;};return a0_0x805f();}