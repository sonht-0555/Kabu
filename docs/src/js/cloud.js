function a0_0x2e77(){var _0x2fa349=['confirm','list','screenshot','location','toUpperCase','nwb3dnfh09rhs31','error','status','error_description','Folder\x20already\x20exists','code=','map','386615KmEFOt','1248645biwdZS','code','No\x20refresh\x20token','save','https://content.dropboxapi.com/2/files/upload','responseText','Unable\x20to\x20refresh\x20token','setItem','length','FSSync','/data/','https://api.dropboxapi.com/2/files/create_folder_v2','78yqqZfP','alert','Folder\x20created','https://content.dropboxapi.com/2/files/download','setRequestHeader','Download\x20failed\x20for\x20','application/json','.tag','No\x20files\x20found\x20to\x20restore.','filter','onload','folder','Refreshing\x20token...','push','refresh_token=','authorization_code','name','Authorization\x20Code:','json','\x20files\x20in\x20Kabu?','79BJiOvv','7379118DLJQnD','click','https://api.dropboxapi.com/oauth2/token','&client_secret=','offline','active','refreshToken','Content-Type','Wait\x20a\x20little\x20bit...','exec','Failed\x20to\x20refresh\x20Dropbox\x20token.','application/octet-stream','7369836qoaLIS','accessToken','&client_id=','entries','uid','Do\x20you\x20want\x20to\x20backup\x20','Error\x20while\x20refreshing\x20token:','Failed\x20to\x20upload\x20file\x20','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','Do\x20you\x20want\x20to\x20restore\x20','Bearer\x20','access_token','Error\x20creating\x20folder\x20','getItem','DOMContentLoaded','2322936ypxixA','refresh_token','replace','split','log','Kabu\x20storage\x20↦\x20Cloud\x20◆','state','&token_access_type=','Upload\x20failed,\x20unknown\x20http\x20status:\x20','&redirect_uri=','uId','5878dFAynH','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','remove','application/x-www-form-urlencoded','Download\x20failed,\x20unknown\x20http\x20status:','Cloud\x20login\x20required!','https://api.dropboxapi.com/2/files/list_folder','uploadFileInCloud','281888JCmmXo','href','&response_type=','Do\x20not\x20receive\x20authorization','Restore\x20canceled\x20by\x20user.','parse','send','classList','addEventListener','open','knh3uz2mx2hp2eu','POST'];a0_0x2e77=function(){return _0x2fa349;};return a0_0x2e77();}var a0_0x1be2a3=a0_0x2a8d;(function(_0x1dc34b,_0x2caeef){var _0x571338=a0_0x2a8d,_0x1ff5bd=_0x1dc34b();while(!![]){try{var _0xe38cec=parseInt(_0x571338(0x1a6))/0x1*(parseInt(_0x571338(0x1cd))/0x2)+parseInt(_0x571338(0x1ee))/0x3+parseInt(_0x571338(0x1b3))/0x4+parseInt(_0x571338(0x1ed))/0x5*(-parseInt(_0x571338(0x192))/0x6)+parseInt(_0x571338(0x1c2))/0x7+-parseInt(_0x571338(0x1d5))/0x8+-parseInt(_0x571338(0x1a7))/0x9;if(_0xe38cec===_0x2caeef)break;else _0x1ff5bd['push'](_0x1ff5bd['shift']());}catch(_0x387946){_0x1ff5bd['push'](_0x1ff5bd['shift']());}}}(a0_0x2e77,0xeaf3e));import*as a0_0x46b110 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x1be2a3(0x1df),clientSecret=a0_0x1be2a3(0x1e6);function authorizeWithDropbox(){var _0x3e4a86=a0_0x1be2a3,_0x3f8d4f=window[_0x3e4a86(0x1e4)][_0x3e4a86(0x1d6)][_0x3e4a86(0x1c5)]('?')[0x0],_0x4c808d='code',_0xa03f73=_0x3e4a86(0x1ab),_0x285f27='https://www.dropbox.com/oauth2/authorize?client_id='+clientId+_0x3e4a86(0x1d7)+_0x4c808d+_0x3e4a86(0x1c9)+_0xa03f73+_0x3e4a86(0x1cb)+encodeURIComponent(_0x3f8d4f);window['location'][_0x3e4a86(0x1d6)]=_0x285f27;}function handleDropboxCallback(){var _0x199f5c=a0_0x1be2a3,_0x4b8343=getUrlParameter(_0x199f5c(0x187));_0x4b8343?(getAccessToken(_0x4b8343),console[_0x199f5c(0x1c6)](_0x199f5c(0x1a3),_0x4b8343)):console[_0x199f5c(0x1c6)](_0x199f5c(0x1d8));}function getUrlParameter(_0x3d56ba){var _0x44fd79=a0_0x1be2a3;_0x3d56ba=_0x3d56ba[_0x44fd79(0x1c4)](/[\[]/,'\x5c[')['replace'](/[\]]/,'\x5c]');var _0x304db3=new RegExp('[\x5c?&#]'+_0x3d56ba+'=([^&#]*)'),_0x23d9f0=_0x304db3[_0x44fd79(0x1b0)](location['search']);return _0x23d9f0===null?'':decodeURIComponent(_0x23d9f0[0x1][_0x44fd79(0x1c4)](/\+/g,'\x20'));}function getAccessToken(_0x12fa0c){var _0x4535a0=a0_0x1be2a3,_0x4e0a1f=_0x4535a0(0x1a1),_0x557661=window[_0x4535a0(0x1e4)][_0x4535a0(0x1d6)]['split']('?')[0x0],_0x4eabc4=new XMLHttpRequest();_0x4eabc4[_0x4535a0(0x1de)](_0x4535a0(0x1e0),'https://api.dropbox.com/oauth2/token'),_0x4eabc4[_0x4535a0(0x196)](_0x4535a0(0x1ae),_0x4535a0(0x1d0)),_0x4eabc4[_0x4535a0(0x19c)]=function(){var _0x37bef8=_0x4535a0;if(_0x4eabc4[_0x37bef8(0x1e8)]===0xc8){var _0x58adbc=JSON[_0x37bef8(0x1da)](_0x4eabc4[_0x37bef8(0x18b)]),_0x46bc88=_0x58adbc[_0x37bef8(0x1be)],_0xf55119=_0x58adbc[_0x37bef8(0x1c3)],_0x185c71=_0x58adbc[_0x37bef8(0x1b7)];localStorage[_0x37bef8(0x18d)](_0x37bef8(0x1b4),_0x46bc88),localStorage['setItem'](_0x37bef8(0x1ad),_0xf55119),localStorage[_0x37bef8(0x18d)]('uId',_0x185c71);}else console[_0x37bef8(0x1c6)](_0x37bef8(0x1ce));},_0x4eabc4[_0x4535a0(0x1db)](_0x4535a0(0x1eb)+_0x12fa0c+'&grant_type='+_0x4e0a1f+_0x4535a0(0x1b5)+clientId+_0x4535a0(0x1aa)+clientSecret+'&redirect_uri='+encodeURIComponent(_0x557661));}export async function dpCreateFolder(_0x4982a7){var _0x21def3=a0_0x1be2a3;const _0x44d2f8=localStorage['getItem']('uId');let _0xac08bd=localStorage['getItem']('accessToken');const _0x10ca24='/'+_0x44d2f8+'/'+_0x4982a7,_0x29a85b=JSON['stringify']({'path':_0x10ca24,'autorename':![]});for(let _0x459442=0x0;_0x459442<0x2;_0x459442++){try{const _0x20523e=await fetch(_0x21def3(0x191),{'method':_0x21def3(0x1e0),'headers':{'Authorization':_0x21def3(0x1bd)+_0xac08bd,'Content-Type':'application/json'},'body':_0x29a85b});if(_0x20523e[_0x21def3(0x1e8)]===0x191){const _0x210a8e=await dpRefreshToken();if(!_0x210a8e)throw new Error(_0x21def3(0x18c));_0xac08bd=localStorage[_0x21def3(0x1c0)](_0x21def3(0x1b4));continue;}if(_0x20523e[_0x21def3(0x1e8)]===0x199)return{'message':_0x21def3(0x1ea),'path':_0x4982a7};if(!_0x20523e['ok'])throw new Error(_0x21def3(0x1bf)+_0x4982a7);const _0x57a6ea=await _0x20523e[_0x21def3(0x1a4)]();return await lockNoti(_0x21def3(0x194),'',0xbb8),_0x57a6ea;}catch(_0x2ef3c1){if(_0x459442===0x1)throw _0x2ef3c1;}}return![];}export async function dpRefreshToken(){var _0x57d97d=a0_0x1be2a3;if(!localStorage[_0x57d97d(0x1c0)]('refreshToken'))throw _0x57d97d(0x188);try{const _0x924f15=await fetch(_0x57d97d(0x1a9),{'method':_0x57d97d(0x1e0),'headers':{'Content-Type':_0x57d97d(0x1d0)},'body':_0x57d97d(0x1a0)+localStorage[_0x57d97d(0x1c0)](_0x57d97d(0x1ad))+_0x57d97d(0x1bb)}),_0x5ece33=await _0x924f15[_0x57d97d(0x1a4)]();if(!_0x5ece33[_0x57d97d(0x1e7)])return localStorage[_0x57d97d(0x18d)](_0x57d97d(0x1b4),_0x5ece33[_0x57d97d(0x1be)]),await lockNoti(_0x57d97d(0x19e),'',0xbb8),await delay(0x3e8),!![];else alert(_0x5ece33[_0x57d97d(0x1e9)]||_0x57d97d(0x1b1));}catch(_0x2c3acf){console[_0x57d97d(0x1e7)](_0x57d97d(0x1b9),_0x2c3acf);}return![];}function a0_0x2a8d(_0x4e91e6,_0x1dd4e7){var _0x2e77c4=a0_0x2e77();return a0_0x2a8d=function(_0x2a8de6,_0xc03560){_0x2a8de6=_0x2a8de6-0x187;var _0x14b763=_0x2e77c4[_0x2a8de6];return _0x14b763;},a0_0x2a8d(_0x4e91e6,_0x1dd4e7);}export async function dpUploadFile(_0x37ec05,_0x5d9439,_0xdcb205){var _0x2860c7=a0_0x1be2a3;const _0x583e68=localStorage[_0x2860c7(0x1c0)](_0x2860c7(0x1cc));var _0x447195=JSON['stringify']({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x583e68+'/'+_0xdcb205+'/'+_0x37ec05}),_0x45de22=new Blob([_0x5d9439],{'type':'application/octet-stream'});for(var _0x49ed9d=0x0;_0x49ed9d<0x2;_0x49ed9d++){var _0x2fe8de=await fetch(_0x2860c7(0x18a),{'method':_0x2860c7(0x1e0),'headers':{'Authorization':_0x2860c7(0x1bd)+localStorage['getItem'](_0x2860c7(0x1b4)),'Dropbox-API-Arg':_0x447195,'Content-Type':_0x2860c7(0x1b2)},'body':_0x45de22});if(_0x2fe8de[_0x2860c7(0x1e8)]!=0xc8){if(_0x2fe8de[_0x2860c7(0x1e8)]==0x191){var _0xa4a8ce=await dpRefreshToken();if(!_0xa4a8ce)throw _0x2860c7(0x18c);continue;}else throw _0x2860c7(0x1ca)+_0x2fe8de[_0x2860c7(0x1e8)];}else{var _0x240617=await _0x2fe8de[_0x2860c7(0x1a4)]();return console[_0x2860c7(0x1c6)](_0x2860c7(0x1c7),_0x37ec05),_0x240617;}}return![];}export async function dpDownloadFile(_0x2c508e,_0x3b2656){var _0x2155bb=a0_0x1be2a3;const _0x4ff8f5=localStorage['getItem'](_0x2155bb(0x1cc));var _0x386ffd=JSON['stringify']({'path':'/'+_0x4ff8f5+'/'+_0x3b2656+'/'+_0x2c508e});for(var _0x89195b=0x0;_0x89195b<0x2;_0x89195b++){var _0x568486=await fetch(_0x2155bb(0x195),{'method':_0x2155bb(0x1e0),'headers':{'Authorization':_0x2155bb(0x1bd)+localStorage['getItem'](_0x2155bb(0x1b4)),'Dropbox-API-Arg':_0x386ffd}});if(_0x568486[_0x2155bb(0x1e8)]!=0xc8){if(_0x568486[_0x2155bb(0x1e8)]==0x191){var _0x524c56=await dpRefreshToken();if(!_0x524c56)throw _0x2155bb(0x18c);continue;}else throw _0x2155bb(0x1d1)+_0x568486[_0x2155bb(0x1e8)];}const _0x37adff=new File([await _0x568486['blob']()],_0x2c508e);return console['log']('Cloud\x20↦\x20Kabu\x20storage\x20◆',_0x37adff[_0x2155bb(0x1a2)]),a0_0x46b110[_0x2155bb(0x1d4)](_0x37adff,()=>{var _0x12c574=_0x2155bb;localStorageFile(),Module[_0x12c574(0x18f)]();}),_0x37adff;}return![];}document[a0_0x1be2a3(0x1dd)](a0_0x1be2a3(0x1c1),function(){var _0x5ccfce=a0_0x1be2a3;dropboxRestore[_0x5ccfce(0x1dd)](_0x5ccfce(0x1a8),async function(){var _0x53cb93=_0x5ccfce;await lockNoti(_0x53cb93(0x1af),'',0x1388);const _0x2430f7=localStorage[_0x53cb93(0x1c0)](_0x53cb93(0x1cc)),_0x2fec3f=[_0x53cb93(0x1c8),_0x53cb93(0x189),_0x53cb93(0x1e3)];if(!_0x2430f7){window[_0x53cb93(0x193)](_0x53cb93(0x1d2));return;}let _0x8a3804=[];for(const _0x43d36a of _0x2fec3f){let _0x7b65d4={'path':'/'+_0x2430f7+'/'+_0x43d36a};for(let _0x33460a=0x0;_0x33460a<0x2;_0x33460a++){let _0x5a0a39=await fetch(_0x53cb93(0x1d3),{'method':_0x53cb93(0x1e0),'headers':{'Authorization':_0x53cb93(0x1bd)+localStorage[_0x53cb93(0x1c0)](_0x53cb93(0x1b4)),'Content-Type':_0x53cb93(0x198)},'body':JSON['stringify'](_0x7b65d4)});if(_0x5a0a39[_0x53cb93(0x1e8)]===0xc8){let _0x20e925=await _0x5a0a39['json'](),_0x158011=_0x20e925[_0x53cb93(0x1b6)][_0x53cb93(0x19b)](_0x2ac225=>_0x2ac225[_0x53cb93(0x199)]==='file');_0x158011[_0x53cb93(0x18e)]>0x0&&_0x8a3804[_0x53cb93(0x19f)](..._0x158011[_0x53cb93(0x1ec)](_0x37a975=>({'name':_0x37a975[_0x53cb93(0x1a2)],'folder':_0x43d36a})));break;}else{if(_0x5a0a39[_0x53cb93(0x1e8)]===0x191){let _0x9452bc=await dpRefreshToken();if(!_0x9452bc)throw _0x53cb93(0x18c);}else{console[_0x53cb93(0x1e7)](_0x53cb93(0x197)+_0x43d36a+',\x20status:\x20'+_0x5a0a39[_0x53cb93(0x1e8)]);break;}}}}if(_0x8a3804[_0x53cb93(0x18e)]>0x0){const _0x5a8494=_0x53cb93(0x1bc)+_0x8a3804[_0x53cb93(0x18e)]+'\x20files\x20from\x20Cloud?';if(window['confirm'](_0x5a8494))for(const _0x44e075 of _0x8a3804){await lockNoti('Restoring...',_0x44e075['name'],0xbb8),await dpDownloadFile(_0x44e075[_0x53cb93(0x1a2)],_0x44e075[_0x53cb93(0x19d)]);}else console[_0x53cb93(0x1c6)]('Restore\x20canceled\x20by\x20user.');}else console[_0x53cb93(0x1c6)](_0x53cb93(0x19a));}),dropboxBackup[_0x5ccfce(0x1dd)]('click',async function(){var _0x5d26cf=_0x5ccfce;await lockNoti(_0x5d26cf(0x1af),'',0x1388);const _0x2bb697=localStorage['getItem'](_0x5d26cf(0x1cc));if(_0x2bb697===null||_0x2bb697==='')window['alert'](_0x5d26cf(0x1d2));else{const _0xdd7dc1=[_0x5d26cf(0x1c8),_0x5d26cf(0x189),'screenshot'];for(const _0x30d32a of _0xdd7dc1){await dpCreateFolder(_0x30d32a);}let _0x3605e7=0x0;for(const _0x1d3d05 of _0xdd7dc1){const _0x237c18=a0_0x46b110[_0x5d26cf(0x1e2)+(_0x1d3d05['charAt'](0x0)['toUpperCase']()+_0x1d3d05['slice'](0x1))]();_0x3605e7+=_0x237c18['length'];}if(window[_0x5d26cf(0x1e1)](_0x5d26cf(0x1b8)+_0x3605e7+_0x5d26cf(0x1a5)))for(const _0x35e2ac of _0xdd7dc1){const _0xf1b012=a0_0x46b110['list'+(_0x35e2ac['charAt'](0x0)[_0x5d26cf(0x1e5)]()+_0x35e2ac['slice'](0x1))]();for(const _0x598e76 of _0xf1b012){const _0x46c99c=await a0_0x46b110['downloadFileInCloud'](_0x5d26cf(0x190)+_0x35e2ac+'s/'+_0x598e76);try{await lockNoti('Backing\x20up...',_0x598e76,0xbb8),await dpUploadFile(_0x598e76,_0x46c99c,_0x35e2ac);}catch(_0x286df4){console[_0x5d26cf(0x1e7)](_0x5d26cf(0x1ba)+_0x598e76+':',_0x286df4);}}}else console[_0x5d26cf(0x1c6)](_0x5d26cf(0x1d9));}}),dropboxCloud[_0x5ccfce(0x1dd)](_0x5ccfce(0x1a8),function(){var _0x4766b5=_0x5ccfce;const _0xe83788=localStorage[_0x4766b5(0x1c0)]('uId');_0xe83788===null||_0xe83788===''?authorizeWithDropbox():window[_0x4766b5(0x1e1)]('Do\x20you\x20want\x20to\x20logout?')&&(localStorage[_0x4766b5(0x18d)](_0x4766b5(0x1cc),''),dropboxRestore[_0x4766b5(0x1dc)][_0x4766b5(0x1cf)](_0x4766b5(0x1ac)),dropboxBackup[_0x4766b5(0x1dc)][_0x4766b5(0x1cf)](_0x4766b5(0x1ac)),dropboxCloud[_0x4766b5(0x1dc)][_0x4766b5(0x1cf)](_0x4766b5(0x1ac)));}),handleDropboxCallback();});