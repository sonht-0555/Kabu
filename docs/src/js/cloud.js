function a0_0x1df1(_0x4ae635,_0x1748f3){var _0x1c55e8=a0_0x1c55();return a0_0x1df1=function(_0x1df14f,_0x485ce8){_0x1df14f=_0x1df14f-0x15a;var _0x495bea=_0x1c55e8[_0x1df14f];return _0x495bea;},a0_0x1df1(_0x4ae635,_0x1748f3);}var a0_0x552561=a0_0x1df1;(function(_0x3dca78,_0x304b82){var _0x48a7db=a0_0x1df1,_0x53f230=_0x3dca78();while(!![]){try{var _0x33298c=-parseInt(_0x48a7db(0x1b2))/0x1+-parseInt(_0x48a7db(0x176))/0x2*(-parseInt(_0x48a7db(0x18d))/0x3)+-parseInt(_0x48a7db(0x199))/0x4+-parseInt(_0x48a7db(0x1b8))/0x5*(parseInt(_0x48a7db(0x1ab))/0x6)+-parseInt(_0x48a7db(0x18f))/0x7+parseInt(_0x48a7db(0x19b))/0x8*(-parseInt(_0x48a7db(0x1c2))/0x9)+parseInt(_0x48a7db(0x1b9))/0xa*(parseInt(_0x48a7db(0x1af))/0xb);if(_0x33298c===_0x304b82)break;else _0x53f230['push'](_0x53f230['shift']());}catch(_0x7bebea){_0x53f230['push'](_0x53f230['shift']());}}}(a0_0x1c55,0x27080));function a0_0x1c55(){var _0x1ef956=['Refreshing\x20token...','folder','alert','=([^&#]*)','Wait\x20a\x20little\x20bit...','onload','Backing\x20up...','Restoring...','Download\x20failed,\x20unknown\x20http\x20status:','Authorization\x20Code:','&response_type=','refresh_token=','authorization_code','remove','code','refreshToken','stringify','Unable\x20to\x20refresh\x20token','&grant_type=','Do\x20you\x20want\x20to\x20backup\x20','active','file','2091dvngxs','screenshot','2153361BQOhPC','POST','[\x5c?&#]','confirm','code=','click','addEventListener','https://content.dropboxapi.com/2/files/download','/data/','Cloud\x20login\x20required!','120128dQQCXg','No\x20refresh\x20token','28312aUPJWp','filter','location','exec','listFiles','DOMContentLoaded','Content-Type','overwrite','parse','log','split','\x20files\x20from\x20Cloud?','setItem','access_token','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','blob','1578QuERHr','Cloud\x20↦\x20Kabu\x20storage\x20◆','Download\x20failed\x20for\x20','nwb3dnfh09rhs31','7674227ckcgoS','status','.tag','39314iuHTbR','downloadFileInCloud','application/json','classList','https://api.dropbox.com/oauth2/token','href','525NMqbQU','10vmnkVz','\x20files\x20in\x20Kabu?','entries','push','uploadFileInCloud','Kabu\x20storage\x20↦\x20Cloud\x20◆','https://content.dropboxapi.com/2/files/upload','error','open','477vQlisH','Restore\x20canceled\x20by\x20user.','&token_access_type=','getItem','search','name',',\x20status:\x20','https://api.dropboxapi.com/2/files/create_folder_v2','replace','save','Do\x20you\x20want\x20to\x20logout?','Folder\x20already\x20exists','error_description','responseText','length','https://www.dropbox.com/oauth2/authorize?client_id=','state','https://api.dropboxapi.com/2/files/list_folder','application/octet-stream','&client_id=','Bearer\x20','json','&redirect_uri=','Failed\x20to\x20refresh\x20Dropbox\x20token.','Error\x20creating\x20folder\x20','accessToken','offline','application/x-www-form-urlencoded','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','uId','156XDUrBO'];a0_0x1c55=function(){return _0x1ef956;};return a0_0x1c55();}import*as a0_0x440bfc from'./main.js';import{localStorageFile}from'./storage.js';var clientId='knh3uz2mx2hp2eu',clientSecret=a0_0x552561(0x1ae);function authorizeWithDropbox(){var _0x438b1d=a0_0x552561,_0x55a86b=window[_0x438b1d(0x19d)][_0x438b1d(0x1b7)][_0x438b1d(0x1a5)]('?')[0x0],_0x3d3ef8=_0x438b1d(0x185),_0x4e0b2a=_0x438b1d(0x172),_0x3dde3a=_0x438b1d(0x167)+clientId+_0x438b1d(0x181)+_0x3d3ef8+_0x438b1d(0x15a)+_0x4e0b2a+_0x438b1d(0x16e)+encodeURIComponent(_0x55a86b);window[_0x438b1d(0x19d)][_0x438b1d(0x1b7)]=_0x3dde3a;}function handleDropboxCallback(){var _0xf772be=a0_0x552561,_0x450b76=getUrlParameter(_0xf772be(0x185));_0x450b76?(getAccessToken(_0x450b76),console[_0xf772be(0x1a4)](_0xf772be(0x180),_0x450b76)):console[_0xf772be(0x1a4)]('Do\x20not\x20receive\x20authorization');}function getUrlParameter(_0x11ac38){var _0x74e969=a0_0x552561;_0x11ac38=_0x11ac38[_0x74e969(0x160)](/[\[]/,'\x5c[')[_0x74e969(0x160)](/[\]]/,'\x5c]');var _0x52a6d3=new RegExp(_0x74e969(0x191)+_0x11ac38+_0x74e969(0x17a)),_0x4f61aa=_0x52a6d3[_0x74e969(0x19e)](location[_0x74e969(0x15c)]);return _0x4f61aa===null?'':decodeURIComponent(_0x4f61aa[0x1]['replace'](/\+/g,'\x20'));}function getAccessToken(_0x257115){var _0xa5e800=a0_0x552561,_0x4b93a0=_0xa5e800(0x183),_0x55a1a1=window[_0xa5e800(0x19d)][_0xa5e800(0x1b7)][_0xa5e800(0x1a5)]('?')[0x0],_0x2ae12c=new XMLHttpRequest();_0x2ae12c[_0xa5e800(0x1c1)](_0xa5e800(0x190),_0xa5e800(0x1b6)),_0x2ae12c['setRequestHeader'](_0xa5e800(0x1a1),_0xa5e800(0x173)),_0x2ae12c[_0xa5e800(0x17c)]=function(){var _0x3fbf84=_0xa5e800;if(_0x2ae12c[_0x3fbf84(0x1b0)]===0xc8){var _0x2b8c1c=JSON[_0x3fbf84(0x1a3)](_0x2ae12c[_0x3fbf84(0x165)]),_0x3633b4=_0x2b8c1c[_0x3fbf84(0x1a8)],_0x5d0541=_0x2b8c1c['refresh_token'],_0x9b6869=_0x2b8c1c['uid'];localStorage[_0x3fbf84(0x1a7)](_0x3fbf84(0x171),_0x3633b4),localStorage['setItem'](_0x3fbf84(0x186),_0x5d0541),localStorage['setItem'](_0x3fbf84(0x175),_0x9b6869);}else console[_0x3fbf84(0x1a4)](_0x3fbf84(0x174));},_0x2ae12c['send'](_0xa5e800(0x193)+_0x257115+_0xa5e800(0x189)+_0x4b93a0+_0xa5e800(0x16b)+clientId+'&client_secret='+clientSecret+_0xa5e800(0x16e)+encodeURIComponent(_0x55a1a1));}export async function dpCreateFolder(_0x241393){var _0x3e4e94=a0_0x552561;const _0x9e29cd=localStorage['getItem'](_0x3e4e94(0x175));let _0x2e90d3=localStorage[_0x3e4e94(0x15b)](_0x3e4e94(0x171));const _0x229de9='/'+_0x9e29cd+'/'+_0x241393,_0x49ceb6=JSON['stringify']({'path':_0x229de9,'autorename':![]});for(let _0x41e517=0x0;_0x41e517<0x2;_0x41e517++){try{const _0x1ac125=await fetch(_0x3e4e94(0x15f),{'method':_0x3e4e94(0x190),'headers':{'Authorization':'Bearer\x20'+_0x2e90d3,'Content-Type':_0x3e4e94(0x1b4)},'body':_0x49ceb6});if(_0x1ac125[_0x3e4e94(0x1b0)]===0x191){const _0x52d0d2=await dpRefreshToken();if(!_0x52d0d2)throw new Error(_0x3e4e94(0x188));_0x2e90d3=localStorage[_0x3e4e94(0x15b)](_0x3e4e94(0x171));continue;}if(_0x1ac125['status']===0x199)return{'message':_0x3e4e94(0x163),'path':_0x241393};if(!_0x1ac125['ok'])throw new Error(_0x3e4e94(0x170)+_0x241393);const _0x10a9e3=await _0x1ac125['json']();return await lockNoti('Folder\x20created','',0xbb8),_0x10a9e3;}catch(_0x5b6364){if(_0x41e517===0x1)throw _0x5b6364;}}return![];}export async function dpRefreshToken(){var _0x27548d=a0_0x552561;if(!localStorage[_0x27548d(0x15b)](_0x27548d(0x186)))throw _0x27548d(0x19a);try{const _0x17a414=await fetch('https://api.dropboxapi.com/oauth2/token',{'method':_0x27548d(0x190),'headers':{'Content-Type':_0x27548d(0x173)},'body':_0x27548d(0x182)+localStorage[_0x27548d(0x15b)]('refreshToken')+_0x27548d(0x1a9)}),_0x522b31=await _0x17a414['json']();if(!_0x522b31[_0x27548d(0x1c0)])return localStorage[_0x27548d(0x1a7)](_0x27548d(0x171),_0x522b31[_0x27548d(0x1a8)]),await lockNoti(_0x27548d(0x177),'',0xbb8),await delay(0x3e8),!![];else alert(_0x522b31[_0x27548d(0x164)]||_0x27548d(0x16f));}catch(_0x475690){console[_0x27548d(0x1c0)]('Error\x20while\x20refreshing\x20token:',_0x475690);}return![];}export async function dpUploadFile(_0x4ecb76,_0x4d2c7d,_0x36c556){var _0x27225d=a0_0x552561;const _0x2b4eb4=localStorage[_0x27225d(0x15b)](_0x27225d(0x175));var _0x254105=JSON['stringify']({'autorename':!![],'mode':_0x27225d(0x1a2),'mute':!![],'strict_conflict':![],'path':'/'+_0x2b4eb4+'/'+_0x36c556+'/'+_0x4ecb76}),_0x363d1b=new Blob([_0x4d2c7d],{'type':'application/octet-stream'});for(var _0x43234b=0x0;_0x43234b<0x2;_0x43234b++){var _0x5b7286=await fetch(_0x27225d(0x1bf),{'method':_0x27225d(0x190),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x27225d(0x15b)](_0x27225d(0x171)),'Dropbox-API-Arg':_0x254105,'Content-Type':_0x27225d(0x16a)},'body':_0x363d1b});if(_0x5b7286['status']!=0xc8){if(_0x5b7286[_0x27225d(0x1b0)]==0x191){var _0x4e6a50=await dpRefreshToken();if(!_0x4e6a50)throw _0x27225d(0x188);continue;}else throw'Upload\x20failed,\x20unknown\x20http\x20status:\x20'+_0x5b7286[_0x27225d(0x1b0)];}else{var _0x491d78=await _0x5b7286['json']();return console[_0x27225d(0x1a4)](_0x27225d(0x1be),_0x4ecb76),_0x491d78;}}return![];}export async function dpDownloadFile(_0x35cabf,_0x2906e3){var _0x4802dd=a0_0x552561;const _0x2083a5=localStorage[_0x4802dd(0x15b)](_0x4802dd(0x175));var _0xdc3633=JSON[_0x4802dd(0x187)]({'path':'/'+_0x2083a5+'/'+_0x2906e3+'/'+_0x35cabf});for(var _0x21da84=0x0;_0x21da84<0x2;_0x21da84++){var _0x287a1c=await fetch(_0x4802dd(0x196),{'method':_0x4802dd(0x190),'headers':{'Authorization':_0x4802dd(0x16c)+localStorage[_0x4802dd(0x15b)]('accessToken'),'Dropbox-API-Arg':_0xdc3633}});if(_0x287a1c[_0x4802dd(0x1b0)]!=0xc8){if(_0x287a1c[_0x4802dd(0x1b0)]==0x191){var _0x310480=await dpRefreshToken();if(!_0x310480)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x4802dd(0x17f)+_0x287a1c[_0x4802dd(0x1b0)];}const _0x473356=new File([await _0x287a1c[_0x4802dd(0x1aa)]()],_0x35cabf);return console['log'](_0x4802dd(0x1ac),_0x473356[_0x4802dd(0x15d)]),a0_0x440bfc[_0x4802dd(0x1bd)](_0x473356,()=>{}),_0x473356;}return![];}document['addEventListener'](a0_0x552561(0x1a0),function(){var _0x4ad034=a0_0x552561;dropboxRestore[_0x4ad034(0x195)](_0x4ad034(0x194),async function(){var _0x337207=_0x4ad034;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x1f4cd0=localStorage[_0x337207(0x15b)](_0x337207(0x175)),_0x16ef83=['state',_0x337207(0x161),_0x337207(0x18e)];if(!_0x1f4cd0){window['alert'](_0x337207(0x198));return;}let _0x4d1531=[];for(const _0x3d81ca of _0x16ef83){let _0xdb47b8={'path':'/'+_0x1f4cd0+'/'+_0x3d81ca};for(let _0x67f49f=0x0;_0x67f49f<0x2;_0x67f49f++){let _0x37bfd2=await fetch(_0x337207(0x169),{'method':'POST','headers':{'Authorization':'Bearer\x20'+localStorage['getItem'](_0x337207(0x171)),'Content-Type':_0x337207(0x1b4)},'body':JSON[_0x337207(0x187)](_0xdb47b8)});if(_0x37bfd2[_0x337207(0x1b0)]===0xc8){let _0x565c09=await _0x37bfd2[_0x337207(0x16d)](),_0x29a360=_0x565c09[_0x337207(0x1bb)][_0x337207(0x19c)](_0x1f021d=>_0x1f021d[_0x337207(0x1b1)]===_0x337207(0x18c));_0x29a360[_0x337207(0x166)]>0x0&&_0x4d1531[_0x337207(0x1bc)](..._0x29a360['map'](_0x1765a0=>({'name':_0x1765a0['name'],'folder':_0x3d81ca})));break;}else{if(_0x37bfd2[_0x337207(0x1b0)]===0x191){let _0x31ece2=await dpRefreshToken();if(!_0x31ece2)throw _0x337207(0x188);}else{console[_0x337207(0x1c0)](_0x337207(0x1ad)+_0x3d81ca+_0x337207(0x15e)+_0x37bfd2[_0x337207(0x1b0)]);break;}}}}if(_0x4d1531[_0x337207(0x166)]>0x0){const _0x5e1949='Do\x20you\x20want\x20to\x20restore\x20'+_0x4d1531[_0x337207(0x166)]+_0x337207(0x1a6);if(window[_0x337207(0x192)](_0x5e1949))for(const _0x4df378 of _0x4d1531){await lockNoti(_0x337207(0x17e),_0x4df378[_0x337207(0x15d)],0xbb8),await dpDownloadFile(_0x4df378['name'],_0x4df378[_0x337207(0x178)]);}else console[_0x337207(0x1a4)](_0x337207(0x1c3));}else console[_0x337207(0x1a4)]('No\x20files\x20found\x20to\x20restore.');}),dropboxBackup['addEventListener'](_0x4ad034(0x194),async function(){var _0x31839e=_0x4ad034;await lockNoti(_0x31839e(0x17b),'',0x1388);const _0x47dac6=localStorage[_0x31839e(0x15b)](_0x31839e(0x175));if(_0x47dac6===null||_0x47dac6==='')window[_0x31839e(0x179)](_0x31839e(0x198));else{const _0x106289=[_0x31839e(0x168),_0x31839e(0x161),'screenshot'];for(const _0x1894b4 of _0x106289){await dpCreateFolder(_0x1894b4);}let _0x10b0c1=0x0;for(const _0x516979 of _0x106289){const _0x549793=a0_0x440bfc[_0x31839e(0x19f)](_0x516979+'s');_0x10b0c1+=_0x549793[_0x31839e(0x166)];}if(window['confirm'](_0x31839e(0x18a)+_0x10b0c1+_0x31839e(0x1ba)))for(const _0x44225d of _0x106289){const _0x46872a=a0_0x440bfc[_0x31839e(0x19f)](_0x44225d+'s');for(const _0xb8d4f5 of _0x46872a){const _0x1b20dc=await a0_0x440bfc[_0x31839e(0x1b3)](_0x31839e(0x197)+_0x44225d+'s/'+_0xb8d4f5);try{await lockNoti(_0x31839e(0x17d),_0xb8d4f5,0xbb8),await dpUploadFile(_0xb8d4f5,_0x1b20dc,_0x44225d);}catch(_0x5e7636){console[_0x31839e(0x1c0)]('Failed\x20to\x20upload\x20file\x20'+_0xb8d4f5+':',_0x5e7636);}}}else console['log']('Restore\x20canceled\x20by\x20user.');}}),dropboxCloud['addEventListener'](_0x4ad034(0x194),function(){var _0x2e2b45=_0x4ad034;const _0x40a03a=localStorage[_0x2e2b45(0x15b)](_0x2e2b45(0x175));_0x40a03a===null||_0x40a03a===''?authorizeWithDropbox():window[_0x2e2b45(0x192)](_0x2e2b45(0x162))&&(localStorage['setItem'](_0x2e2b45(0x175),''),dropboxRestore[_0x2e2b45(0x1b5)][_0x2e2b45(0x184)](_0x2e2b45(0x18b)),dropboxBackup[_0x2e2b45(0x1b5)]['remove'](_0x2e2b45(0x18b)),dropboxCloud[_0x2e2b45(0x1b5)][_0x2e2b45(0x184)](_0x2e2b45(0x18b)));}),handleDropboxCallback();});