var a0_0x5f28ce=a0_0x125b;(function(_0x53dd01,_0x2a7d82){var _0x1fe102=a0_0x125b,_0x2e0693=_0x53dd01();while(!![]){try{var _0x1013c8=parseInt(_0x1fe102(0x12c))/0x1*(parseInt(_0x1fe102(0x134))/0x2)+-parseInt(_0x1fe102(0x14c))/0x3*(-parseInt(_0x1fe102(0x14e))/0x4)+-parseInt(_0x1fe102(0x17b))/0x5*(-parseInt(_0x1fe102(0x150))/0x6)+parseInt(_0x1fe102(0x193))/0x7+parseInt(_0x1fe102(0x12d))/0x8+parseInt(_0x1fe102(0x12f))/0x9+parseInt(_0x1fe102(0x177))/0xa*(-parseInt(_0x1fe102(0x136))/0xb);if(_0x1013c8===_0x2a7d82)break;else _0x2e0693['push'](_0x2e0693['shift']());}catch(_0x49304c){_0x2e0693['push'](_0x2e0693['shift']());}}}(a0_0x5559,0x3fc36));import*as a0_0x349bf0 from'./main.js';import{localStorageFile}from'./storage.js';function a0_0x5559(){var _0x282db5=['refresh_token','1564155abUOJa','Do\x20not\x20receive\x20authorization','uid','state','onload','14tohprx','https://api.dropboxapi.com/2/files/list_folder','2036474QRLcrD','\x20files\x20from\x20Cloud?','/data/','remove','Refreshing\x20token...','href','Restore\x20canceled\x20by\x20user.','Cloud\x20login\x20required!',',\x20status:\x20','https://api.dropboxapi.com/oauth2/token','setRequestHeader','authorization_code','DOMContentLoaded','folder','.tag','Upload\x20failed,\x20unknown\x20http\x20status:\x20','offline','https://content.dropboxapi.com/2/files/upload','&response_type=','refresh_token=','Folder\x20already\x20exists','filter','3579IYHaOO','No\x20refresh\x20token','268hdAVsv','screenshot','223518CdnRvw','classList','application/x-www-form-urlencoded','search','Do\x20you\x20want\x20to\x20restore\x20','getItem','responseText','No\x20files\x20found\x20to\x20restore.','Download\x20failed\x20for\x20','https://api.dropboxapi.com/2/files/create_folder_v2','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','push','save','downloadFileInCloud','uId','Authorization\x20Code:','error_description','Cloud\x20↦\x20Kabu\x20storage\x20◆','&token_access_type=','Restoring...','&redirect_uri=','error','=([^&#]*)','length','json','Kabu\x20storage\x20↦\x20Cloud\x20◆','https://www.dropbox.com/oauth2/authorize?client_id=','Error\x20while\x20refreshing\x20token:','code=','name','split','POST','stringify','Wait\x20a\x20little\x20bit...','Bearer\x20','refreshToken','Do\x20you\x20want\x20to\x20backup\x20','&client_id=','Folder\x20created','50oLJwEP','&client_secret=','setItem','addEventListener','10kKNbXo','open','nwb3dnfh09rhs31','application/json','Error\x20creating\x20folder\x20','access_token','confirm','send','accessToken','Failed\x20to\x20refresh\x20Dropbox\x20token.','active','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','parse','code','log','alert','exec','https://content.dropboxapi.com/2/files/download','\x20files\x20in\x20Kabu?','application/octet-stream','map','Content-Type','status','location','1644146gZmYXl','replace','file','https://api.dropbox.com/oauth2/token','blob','click','Unable\x20to\x20refresh\x20token','entries','19303lqxlMr','3908904ZeIKII'];a0_0x5559=function(){return _0x282db5;};return a0_0x5559();}var clientId='knh3uz2mx2hp2eu',clientSecret=a0_0x5f28ce(0x17d);function authorizeWithDropbox(){var _0x485e4f=a0_0x5f28ce,_0x112e84=window[_0x485e4f(0x192)][_0x485e4f(0x13b)][_0x485e4f(0x16e)]('?')[0x0],_0x5e5af8=_0x485e4f(0x188),_0x9896c4=_0x485e4f(0x146),_0x4c1ba6=_0x485e4f(0x16a)+clientId+_0x485e4f(0x148)+_0x5e5af8+_0x485e4f(0x162)+_0x9896c4+_0x485e4f(0x164)+encodeURIComponent(_0x112e84);window[_0x485e4f(0x192)][_0x485e4f(0x13b)]=_0x4c1ba6;}function handleDropboxCallback(){var _0x2252bb=a0_0x5f28ce,_0x43c168=getUrlParameter(_0x2252bb(0x188));_0x43c168?(getAccessToken(_0x43c168),console[_0x2252bb(0x189)](_0x2252bb(0x15f),_0x43c168)):console['log'](_0x2252bb(0x130));}function getUrlParameter(_0x42fe38){var _0x17148b=a0_0x5f28ce;_0x42fe38=_0x42fe38[_0x17148b(0x125)](/[\[]/,'\x5c[')['replace'](/[\]]/,'\x5c]');var _0x2414b5=new RegExp('[\x5c?&#]'+_0x42fe38+_0x17148b(0x166)),_0x4a4276=_0x2414b5[_0x17148b(0x18b)](location[_0x17148b(0x153)]);return _0x4a4276===null?'':decodeURIComponent(_0x4a4276[0x1][_0x17148b(0x125)](/\+/g,'\x20'));}function getAccessToken(_0x44953b){var _0x2d52d7=a0_0x5f28ce,_0x2207ef=_0x2d52d7(0x141),_0x284502=window[_0x2d52d7(0x192)][_0x2d52d7(0x13b)][_0x2d52d7(0x16e)]('?')[0x0],_0xa537fa=new XMLHttpRequest();_0xa537fa[_0x2d52d7(0x17c)]('POST',_0x2d52d7(0x127)),_0xa537fa[_0x2d52d7(0x140)](_0x2d52d7(0x190),'application/x-www-form-urlencoded'),_0xa537fa[_0x2d52d7(0x133)]=function(){var _0x28fd58=_0x2d52d7;if(_0xa537fa['status']===0xc8){var _0x2af6ac=JSON[_0x28fd58(0x187)](_0xa537fa[_0x28fd58(0x156)]),_0x331268=_0x2af6ac['access_token'],_0x5893b9=_0x2af6ac[_0x28fd58(0x12e)],_0x550f56=_0x2af6ac[_0x28fd58(0x131)];localStorage[_0x28fd58(0x179)]('accessToken',_0x331268),localStorage[_0x28fd58(0x179)](_0x28fd58(0x173),_0x5893b9),localStorage[_0x28fd58(0x179)](_0x28fd58(0x15e),_0x550f56);}else console[_0x28fd58(0x189)](_0x28fd58(0x15a));},_0xa537fa[_0x2d52d7(0x182)](_0x2d52d7(0x16c)+_0x44953b+'&grant_type='+_0x2207ef+_0x2d52d7(0x175)+clientId+_0x2d52d7(0x178)+clientSecret+'&redirect_uri='+encodeURIComponent(_0x284502));}export async function dpCreateFolder(_0x2e521c){var _0x35689d=a0_0x5f28ce;const _0x533b02=localStorage['getItem']('uId');let _0x1fe653=localStorage[_0x35689d(0x155)](_0x35689d(0x183));const _0x16a324='/'+_0x533b02+'/'+_0x2e521c,_0x3dc598=JSON[_0x35689d(0x170)]({'path':_0x16a324,'autorename':![]});for(let _0x3e69d3=0x0;_0x3e69d3<0x2;_0x3e69d3++){try{const _0x208083=await fetch(_0x35689d(0x159),{'method':_0x35689d(0x16f),'headers':{'Authorization':_0x35689d(0x172)+_0x1fe653,'Content-Type':_0x35689d(0x17e)},'body':_0x3dc598});if(_0x208083['status']===0x191){const _0xd68595=await dpRefreshToken();if(!_0xd68595)throw new Error(_0x35689d(0x12a));_0x1fe653=localStorage[_0x35689d(0x155)]('accessToken');continue;}if(_0x208083[_0x35689d(0x191)]===0x199)return{'message':_0x35689d(0x14a),'path':_0x2e521c};if(!_0x208083['ok'])throw new Error(_0x35689d(0x17f)+_0x2e521c);const _0x2fed15=await _0x208083[_0x35689d(0x168)]();return await lockNoti(_0x35689d(0x176),'',0xbb8),_0x2fed15;}catch(_0x4ff631){if(_0x3e69d3===0x1)throw _0x4ff631;}}return![];}export async function dpRefreshToken(){var _0x130fcf=a0_0x5f28ce;if(!localStorage[_0x130fcf(0x155)]('refreshToken'))throw _0x130fcf(0x14d);try{const _0x2eaf26=await fetch(_0x130fcf(0x13f),{'method':_0x130fcf(0x16f),'headers':{'Content-Type':_0x130fcf(0x152)},'body':_0x130fcf(0x149)+localStorage[_0x130fcf(0x155)]('refreshToken')+_0x130fcf(0x186)}),_0x485a0f=await _0x2eaf26[_0x130fcf(0x168)]();if(!_0x485a0f['error'])return localStorage[_0x130fcf(0x179)](_0x130fcf(0x183),_0x485a0f[_0x130fcf(0x180)]),await lockNoti(_0x130fcf(0x13a),'',0xbb8),await delay(0x3e8),!![];else alert(_0x485a0f[_0x130fcf(0x160)]||_0x130fcf(0x184));}catch(_0x2973a9){console['error'](_0x130fcf(0x16b),_0x2973a9);}return![];}export async function dpUploadFile(_0x465675,_0x3dd89b,_0x6b8d78){var _0x5d3525=a0_0x5f28ce;const _0x3dd16a=localStorage[_0x5d3525(0x155)]('uId');var _0xddb815=JSON[_0x5d3525(0x170)]({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x3dd16a+'/'+_0x6b8d78+'/'+_0x465675}),_0x47bed9=new Blob([_0x3dd89b],{'type':_0x5d3525(0x18e)});for(var _0x3eadb1=0x0;_0x3eadb1<0x2;_0x3eadb1++){var _0x53589e=await fetch(_0x5d3525(0x147),{'method':_0x5d3525(0x16f),'headers':{'Authorization':_0x5d3525(0x172)+localStorage[_0x5d3525(0x155)](_0x5d3525(0x183)),'Dropbox-API-Arg':_0xddb815,'Content-Type':_0x5d3525(0x18e)},'body':_0x47bed9});if(_0x53589e[_0x5d3525(0x191)]!=0xc8){if(_0x53589e[_0x5d3525(0x191)]==0x191){var _0x5d6e9c=await dpRefreshToken();if(!_0x5d6e9c)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x5d3525(0x145)+_0x53589e['status'];}else{var _0x360ebb=await _0x53589e[_0x5d3525(0x168)]();return console[_0x5d3525(0x189)](_0x5d3525(0x169),_0x465675),_0x360ebb;}}return![];}function a0_0x125b(_0x28d961,_0x6241a6){var _0x55590d=a0_0x5559();return a0_0x125b=function(_0x125b22,_0x1b63e9){_0x125b22=_0x125b22-0x125;var _0x30a0d5=_0x55590d[_0x125b22];return _0x30a0d5;},a0_0x125b(_0x28d961,_0x6241a6);}export async function dpDownloadFile(_0x55e178,_0x3b02ea){var _0x522dc9=a0_0x5f28ce;const _0x5475c7=localStorage[_0x522dc9(0x155)](_0x522dc9(0x15e));var _0x5d8c74=JSON[_0x522dc9(0x170)]({'path':'/'+_0x5475c7+'/'+_0x3b02ea+'/'+_0x55e178});for(var _0x268199=0x0;_0x268199<0x2;_0x268199++){var _0x368f69=await fetch(_0x522dc9(0x18c),{'method':_0x522dc9(0x16f),'headers':{'Authorization':_0x522dc9(0x172)+localStorage['getItem'](_0x522dc9(0x183)),'Dropbox-API-Arg':_0x5d8c74}});if(_0x368f69[_0x522dc9(0x191)]!=0xc8){if(_0x368f69[_0x522dc9(0x191)]==0x191){var _0x5413be=await dpRefreshToken();if(!_0x5413be)throw _0x522dc9(0x12a);continue;}else throw'Download\x20failed,\x20unknown\x20http\x20status:'+_0x368f69['status'];}const _0x3a9dd=new File([await _0x368f69[_0x522dc9(0x128)]()],_0x55e178);return console[_0x522dc9(0x189)](_0x522dc9(0x161),_0x3a9dd['name']),a0_0x349bf0['uploadFileInCloud'](_0x3a9dd,()=>{}),_0x3a9dd;}return![];}document[a0_0x5f28ce(0x17a)](a0_0x5f28ce(0x142),function(){var _0x1c7f4d=a0_0x5f28ce;dropboxRestore[_0x1c7f4d(0x17a)](_0x1c7f4d(0x129),async function(){var _0x38fede=_0x1c7f4d;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x3c8c6d=localStorage['getItem'](_0x38fede(0x15e)),_0x2f67a7=[_0x38fede(0x132),'save',_0x38fede(0x14f)];if(!_0x3c8c6d){window['alert'](_0x38fede(0x13d));return;}let _0x272a74=[];for(const _0x23de1a of _0x2f67a7){let _0x1933be={'path':'/'+_0x3c8c6d+'/'+_0x23de1a};for(let _0x389c34=0x0;_0x389c34<0x2;_0x389c34++){let _0xf431c1=await fetch(_0x38fede(0x135),{'method':_0x38fede(0x16f),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x38fede(0x155)](_0x38fede(0x183)),'Content-Type':_0x38fede(0x17e)},'body':JSON[_0x38fede(0x170)](_0x1933be)});if(_0xf431c1[_0x38fede(0x191)]===0xc8){let _0x5e91c3=await _0xf431c1['json'](),_0x49564d=_0x5e91c3[_0x38fede(0x12b)][_0x38fede(0x14b)](_0x3a0beb=>_0x3a0beb[_0x38fede(0x144)]===_0x38fede(0x126));_0x49564d['length']>0x0&&_0x272a74[_0x38fede(0x15b)](..._0x49564d[_0x38fede(0x18f)](_0x402164=>({'name':_0x402164[_0x38fede(0x16d)],'folder':_0x23de1a})));break;}else{if(_0xf431c1[_0x38fede(0x191)]===0x191){let _0x4c50cf=await dpRefreshToken();if(!_0x4c50cf)throw _0x38fede(0x12a);}else{console[_0x38fede(0x165)](_0x38fede(0x158)+_0x23de1a+_0x38fede(0x13e)+_0xf431c1[_0x38fede(0x191)]);break;}}}}if(_0x272a74['length']>0x0){const _0x36fe3f=_0x38fede(0x154)+_0x272a74[_0x38fede(0x167)]+_0x38fede(0x137);if(window['confirm'](_0x36fe3f))for(const _0x2a9039 of _0x272a74){await lockNoti(_0x38fede(0x163),_0x2a9039[_0x38fede(0x16d)],0xbb8),await dpDownloadFile(_0x2a9039[_0x38fede(0x16d)],_0x2a9039[_0x38fede(0x143)]);}else console[_0x38fede(0x189)](_0x38fede(0x13c));}else console[_0x38fede(0x189)](_0x38fede(0x157));}),dropboxBackup[_0x1c7f4d(0x17a)](_0x1c7f4d(0x129),async function(){var _0x372cdc=_0x1c7f4d;await lockNoti(_0x372cdc(0x171),'',0x1388);const _0x7f46b2=localStorage[_0x372cdc(0x155)](_0x372cdc(0x15e));if(_0x7f46b2===null||_0x7f46b2==='')window[_0x372cdc(0x18a)](_0x372cdc(0x13d));else{const _0x1faa79=[_0x372cdc(0x132),_0x372cdc(0x15c),_0x372cdc(0x14f)];for(const _0x7e6fb6 of _0x1faa79){await dpCreateFolder(_0x7e6fb6);}let _0x141cc0=0x0;for(const _0x2693ad of _0x1faa79){const _0x1afad4=a0_0x349bf0['listFiles'](_0x2693ad+'s');_0x141cc0+=_0x1afad4[_0x372cdc(0x167)];}if(window[_0x372cdc(0x181)](_0x372cdc(0x174)+_0x141cc0+_0x372cdc(0x18d)))for(const _0x3e6c8c of _0x1faa79){const _0x3fc826=a0_0x349bf0['listFiles'](_0x3e6c8c+'s');for(const _0x57b20a of _0x3fc826){const _0x4bbbb4=await a0_0x349bf0[_0x372cdc(0x15d)](_0x372cdc(0x138)+_0x3e6c8c+'s/'+_0x57b20a);try{await lockNoti('Backing\x20up...',_0x57b20a,0xbb8),await dpUploadFile(_0x57b20a,_0x4bbbb4,_0x3e6c8c);}catch(_0x368e16){console[_0x372cdc(0x165)]('Failed\x20to\x20upload\x20file\x20'+_0x57b20a+':',_0x368e16);}}}else console['log'](_0x372cdc(0x13c));}}),dropboxCloud[_0x1c7f4d(0x17a)](_0x1c7f4d(0x129),function(){var _0x5873da=_0x1c7f4d;const _0x187637=localStorage[_0x5873da(0x155)]('uId');_0x187637===null||_0x187637===''?authorizeWithDropbox():window[_0x5873da(0x181)]('Do\x20you\x20want\x20to\x20logout?')&&(localStorage[_0x5873da(0x179)](_0x5873da(0x15e),''),dropboxRestore[_0x5873da(0x151)][_0x5873da(0x139)]('active'),dropboxBackup[_0x5873da(0x151)][_0x5873da(0x139)](_0x5873da(0x185)),dropboxCloud[_0x5873da(0x151)][_0x5873da(0x139)](_0x5873da(0x185)));}),handleDropboxCallback();});