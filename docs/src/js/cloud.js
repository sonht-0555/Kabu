var a0_0x200c5f=a0_0x4ff7;(function(_0x3deef5,_0x20b48f){var _0x441fa9=a0_0x4ff7,_0x370387=_0x3deef5();while(!![]){try{var _0x98cf56=parseInt(_0x441fa9(0xbb))/0x1+-parseInt(_0x441fa9(0xd8))/0x2+parseInt(_0x441fa9(0xd9))/0x3*(-parseInt(_0x441fa9(0xb3))/0x4)+-parseInt(_0x441fa9(0xb1))/0x5+parseInt(_0x441fa9(0xb5))/0x6*(parseInt(_0x441fa9(0xac))/0x7)+-parseInt(_0x441fa9(0x7f))/0x8*(parseInt(_0x441fa9(0x9c))/0x9)+-parseInt(_0x441fa9(0x96))/0xa*(-parseInt(_0x441fa9(0x81))/0xb);if(_0x98cf56===_0x20b48f)break;else _0x370387['push'](_0x370387['shift']());}catch(_0x2bcd66){_0x370387['push'](_0x370387['shift']());}}}(a0_0x5e7d,0x8e996));import*as a0_0x4691b1 from'./main.js';import{localStorageFile}from'./storage.js';var clientId='knh3uz2mx2hp2eu',clientSecret=a0_0x200c5f(0x7b);function a0_0x4ff7(_0x2ab5ea,_0x1cca90){var _0x5e7d2e=a0_0x5e7d();return a0_0x4ff7=function(_0x4ff72e,_0x1868c6){_0x4ff72e=_0x4ff72e-0x79;var _0x1ce1d5=_0x5e7d2e[_0x4ff72e];return _0x1ce1d5;},a0_0x4ff7(_0x2ab5ea,_0x1cca90);}function authorizeWithDropbox(){var _0x2adf74=a0_0x200c5f,_0x31f1e5=window[_0x2adf74(0xcc)][_0x2adf74(0xbc)][_0x2adf74(0xca)]('?')[0x0],_0x2426b7=_0x2adf74(0xa4),_0x2e5b36='offline',_0x4e8c6=_0x2adf74(0xd1)+clientId+_0x2adf74(0x89)+_0x2426b7+_0x2adf74(0xd4)+_0x2e5b36+_0x2adf74(0x8c)+encodeURIComponent(_0x31f1e5);window[_0x2adf74(0xcc)]['href']=_0x4e8c6;}function handleDropboxCallback(){var _0x46a523=a0_0x200c5f,_0xeb2b96=getUrlParameter(_0x46a523(0xa4));_0xeb2b96?(getAccessToken(_0xeb2b96),console[_0x46a523(0xc8)]('Authorization\x20Code:',_0xeb2b96)):console['log'](_0x46a523(0xab));}function getUrlParameter(_0x3c994e){var _0x3b40de=a0_0x200c5f;_0x3c994e=_0x3c994e[_0x3b40de(0x9a)](/[\[]/,'\x5c[')[_0x3b40de(0x9a)](/[\]]/,'\x5c]');var _0x54c942=new RegExp(_0x3b40de(0xa8)+_0x3c994e+_0x3b40de(0x7e)),_0x4afeca=_0x54c942[_0x3b40de(0xaf)](location[_0x3b40de(0xb7)]);return _0x4afeca===null?'':decodeURIComponent(_0x4afeca[0x1][_0x3b40de(0x9a)](/\+/g,'\x20'));}function getAccessToken(_0x5ae62c){var _0x3e5592=a0_0x200c5f,_0x59ee9b=_0x3e5592(0xa0),_0x5c202e=window['location'][_0x3e5592(0xbc)][_0x3e5592(0xca)]('?')[0x0],_0xf2e9d8=new XMLHttpRequest();_0xf2e9d8['open'](_0x3e5592(0xc9),_0x3e5592(0x83)),_0xf2e9d8[_0x3e5592(0xd5)](_0x3e5592(0xb4),_0x3e5592(0xb6)),_0xf2e9d8[_0x3e5592(0xa5)]=function(){var _0x15c667=_0x3e5592;if(_0xf2e9d8['status']===0xc8){var _0x3bc761=JSON[_0x15c667(0xdc)](_0xf2e9d8[_0x15c667(0xc7)]),_0x3509df=_0x3bc761['access_token'],_0x59657e=_0x3bc761['refresh_token'],_0x4dd99c=_0x3bc761['uid'];localStorage[_0x15c667(0x91)](_0x15c667(0x8d),_0x3509df),localStorage[_0x15c667(0x91)](_0x15c667(0xc5),_0x59657e),localStorage[_0x15c667(0x91)](_0x15c667(0xbe),_0x4dd99c);}else console[_0x15c667(0xc8)](_0x15c667(0xcf));},_0xf2e9d8['send'](_0x3e5592(0xda)+_0x5ae62c+_0x3e5592(0xae)+_0x59ee9b+'&client_id='+clientId+_0x3e5592(0x99)+clientSecret+_0x3e5592(0x8c)+encodeURIComponent(_0x5c202e));}export async function dpCreateFolder(_0x1f0c32){var _0x1507d3=a0_0x200c5f;const _0x5f138a=localStorage[_0x1507d3(0x88)](_0x1507d3(0xbe));let _0x1e24a9=localStorage[_0x1507d3(0x88)](_0x1507d3(0x8d));const _0x2703db='/'+_0x5f138a+'/'+_0x1f0c32,_0x5b86cd=JSON['stringify']({'path':_0x2703db,'autorename':![]});for(let _0x5eb3b3=0x0;_0x5eb3b3<0x2;_0x5eb3b3++){try{const _0x25c5ed=await fetch(_0x1507d3(0xd0),{'method':_0x1507d3(0xc9),'headers':{'Authorization':_0x1507d3(0x94)+_0x1e24a9,'Content-Type':'application/json'},'body':_0x5b86cd});if(_0x25c5ed[_0x1507d3(0xc0)]===0x191){const _0x3c137a=await dpRefreshToken();if(!_0x3c137a)throw new Error(_0x1507d3(0x82));_0x1e24a9=localStorage['getItem']('accessToken');continue;}if(_0x25c5ed[_0x1507d3(0xc0)]===0x199)return{'message':_0x1507d3(0x8f),'path':_0x1f0c32};if(!_0x25c5ed['ok'])throw new Error(_0x1507d3(0xa6)+_0x1f0c32);const _0x10ddad=await _0x25c5ed[_0x1507d3(0x9b)]();return await lockNoti('Folder\x20created','',0xbb8),_0x10ddad;}catch(_0x20c829){if(_0x5eb3b3===0x1)throw _0x20c829;}}return![];}export async function dpRefreshToken(){var _0x4d71bf=a0_0x200c5f;if(!localStorage[_0x4d71bf(0x88)](_0x4d71bf(0xc5)))throw _0x4d71bf(0xde);try{const _0x39e05b=await fetch(_0x4d71bf(0xd7),{'method':'POST','headers':{'Content-Type':_0x4d71bf(0xb6)},'body':'refresh_token='+localStorage[_0x4d71bf(0x88)](_0x4d71bf(0xc5))+_0x4d71bf(0x98)}),_0x4f3df9=await _0x39e05b[_0x4d71bf(0x9b)]();if(!_0x4f3df9[_0x4d71bf(0x85)])return localStorage[_0x4d71bf(0x91)](_0x4d71bf(0x8d),_0x4f3df9[_0x4d71bf(0xc3)]),await lockNoti(_0x4d71bf(0xa1),'',0xbb8),await delay(0x3e8),!![];else alert(_0x4f3df9['error_description']||_0x4d71bf(0xa3));}catch(_0x3dd92e){console[_0x4d71bf(0x85)](_0x4d71bf(0x9f),_0x3dd92e);}return![];}export async function dpUploadFile(_0x4bcd82,_0x11dc81,_0x1bcc53){var _0x2d8843=a0_0x200c5f;const _0x34511c=localStorage[_0x2d8843(0x88)](_0x2d8843(0xbe));var _0x17771e=JSON[_0x2d8843(0xa7)]({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x34511c+'/'+_0x1bcc53+'/'+_0x4bcd82}),_0x490c06=new Blob([_0x11dc81],{'type':_0x2d8843(0x8e)});for(var _0x218ebb=0x0;_0x218ebb<0x2;_0x218ebb++){var _0x5b2c33=await fetch('https://content.dropboxapi.com/2/files/upload',{'method':_0x2d8843(0xc9),'headers':{'Authorization':_0x2d8843(0x94)+localStorage[_0x2d8843(0x88)](_0x2d8843(0x8d)),'Dropbox-API-Arg':_0x17771e,'Content-Type':_0x2d8843(0x8e)},'body':_0x490c06});if(_0x5b2c33['status']!=0xc8){if(_0x5b2c33[_0x2d8843(0xc0)]==0x191){var _0x1d8fb6=await dpRefreshToken();if(!_0x1d8fb6)throw _0x2d8843(0x82);continue;}else throw _0x2d8843(0x8a)+_0x5b2c33[_0x2d8843(0xc0)];}else{var _0x175d11=await _0x5b2c33[_0x2d8843(0x9b)]();return console['log'](_0x2d8843(0xbf),_0x4bcd82),_0x175d11;}}return![];}export async function dpDownloadFile(_0x27ed0e,_0x4c5a34){var _0x2b7ed6=a0_0x200c5f;const _0x680cc4=localStorage[_0x2b7ed6(0x88)](_0x2b7ed6(0xbe));var _0x84c64c=JSON[_0x2b7ed6(0xa7)]({'path':'/'+_0x680cc4+'/'+_0x4c5a34+'/'+_0x27ed0e});for(var _0x3dc177=0x0;_0x3dc177<0x2;_0x3dc177++){var _0x5a5c91=await fetch('https://content.dropboxapi.com/2/files/download',{'method':_0x2b7ed6(0xc9),'headers':{'Authorization':_0x2b7ed6(0x94)+localStorage['getItem'](_0x2b7ed6(0x8d)),'Dropbox-API-Arg':_0x84c64c}});if(_0x5a5c91[_0x2b7ed6(0xc0)]!=0xc8){if(_0x5a5c91[_0x2b7ed6(0xc0)]==0x191){var _0x53d95f=await dpRefreshToken();if(!_0x53d95f)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x2b7ed6(0xc2)+_0x5a5c91[_0x2b7ed6(0xc0)];}const _0x2e9ac5=new File([await _0x5a5c91['blob']()],_0x27ed0e);return console['log'](_0x2b7ed6(0x9d),_0x2e9ac5['name']),a0_0x4691b1[_0x2b7ed6(0xc1)](_0x2e9ac5,()=>{var _0xb0b18f=_0x2b7ed6;localStorageFile(),Module[_0xb0b18f(0x8b)]();}),_0x2e9ac5;}return![];}document[a0_0x200c5f(0xdd)]('DOMContentLoaded',function(){var _0x5f1944=a0_0x200c5f;dropboxRestore[_0x5f1944(0xdd)](_0x5f1944(0xb0),async function(){var _0x516a1d=_0x5f1944;await lockNoti(_0x516a1d(0x95),'',0x1388);const _0x18451d=localStorage[_0x516a1d(0x88)](_0x516a1d(0xbe)),_0x4620d9=[_0x516a1d(0x7c),_0x516a1d(0x79),_0x516a1d(0xc4)];if(!_0x18451d){window[_0x516a1d(0xbd)](_0x516a1d(0x9e));return;}let _0x2fa83c=[];for(const _0x554702 of _0x4620d9){let _0x18069a={'path':'/'+_0x18451d+'/'+_0x554702};for(let _0x22e5c9=0x0;_0x22e5c9<0x2;_0x22e5c9++){let _0x403588=await fetch(_0x516a1d(0xad),{'method':'POST','headers':{'Authorization':_0x516a1d(0x94)+localStorage[_0x516a1d(0x88)](_0x516a1d(0x8d)),'Content-Type':'application/json'},'body':JSON['stringify'](_0x18069a)});if(_0x403588['status']===0xc8){let _0x51cafb=await _0x403588['json'](),_0x3795b9=_0x51cafb['entries'][_0x516a1d(0xd2)](_0x38d295=>_0x38d295['.tag']===_0x516a1d(0xb9));_0x3795b9['length']>0x0&&_0x2fa83c[_0x516a1d(0x86)](..._0x3795b9[_0x516a1d(0x84)](_0x334516=>({'name':_0x334516[_0x516a1d(0x92)],'folder':_0x554702})));break;}else{if(_0x403588['status']===0x191){let _0x4ada0e=await dpRefreshToken();if(!_0x4ada0e)throw _0x516a1d(0x82);}else{console[_0x516a1d(0x85)](_0x516a1d(0xc6)+_0x554702+_0x516a1d(0xcd)+_0x403588[_0x516a1d(0xc0)]);break;}}}}if(_0x2fa83c[_0x516a1d(0xce)]>0x0){const _0x196b06='Do\x20you\x20want\x20to\x20restore\x20'+_0x2fa83c['length']+_0x516a1d(0x93);if(window[_0x516a1d(0x97)](_0x196b06))for(const _0x3461a8 of _0x2fa83c){await lockNoti(_0x516a1d(0xcb),_0x3461a8[_0x516a1d(0x92)],0xbb8),await dpDownloadFile(_0x3461a8[_0x516a1d(0x92)],_0x3461a8['folder']);}else console['log']('Restore\x20canceled\x20by\x20user.');}else console[_0x516a1d(0xc8)](_0x516a1d(0xb8));}),dropboxBackup[_0x5f1944(0xdd)](_0x5f1944(0xb0),async function(){var _0x5a42f8=_0x5f1944;await lockNoti(_0x5a42f8(0x95),'',0x1388);const _0x13e649=localStorage[_0x5a42f8(0x88)](_0x5a42f8(0xbe));if(_0x13e649===null||_0x13e649==='')window[_0x5a42f8(0xbd)](_0x5a42f8(0x9e));else{const _0x4216d7=[_0x5a42f8(0x7c),_0x5a42f8(0x79),_0x5a42f8(0xc4)];for(const _0x49b905 of _0x4216d7){await dpCreateFolder(_0x49b905);}let _0x40cf87=0x0;for(const _0x15152b of _0x4216d7){const _0x1065b9=a0_0x4691b1[_0x5a42f8(0x7a)+(_0x15152b[_0x5a42f8(0xaa)](0x0)[_0x5a42f8(0xa2)]()+_0x15152b[_0x5a42f8(0x7d)](0x1))]();_0x40cf87+=_0x1065b9['length'];}if(window['confirm'](_0x5a42f8(0xba)+_0x40cf87+'\x20files\x20in\x20Kabu?'))for(const _0x5cd7ef of _0x4216d7){const _0x530f7d=a0_0x4691b1[_0x5a42f8(0x7a)+(_0x5cd7ef[_0x5a42f8(0xaa)](0x0)['toUpperCase']()+_0x5cd7ef[_0x5a42f8(0x7d)](0x1))]();for(const _0x35b54a of _0x530f7d){const _0x545deb=await a0_0x4691b1['downloadFileInCloud'](_0x5a42f8(0xa9)+_0x5cd7ef+'s/'+_0x35b54a);try{await lockNoti(_0x5a42f8(0xd6),_0x35b54a,0xbb8),await dpUploadFile(_0x35b54a,_0x545deb,_0x5cd7ef);}catch(_0x60a4c1){console[_0x5a42f8(0x85)](_0x5a42f8(0xdb)+_0x35b54a+':',_0x60a4c1);}}}else console[_0x5a42f8(0xc8)](_0x5a42f8(0xd3));}}),dropboxCloud[_0x5f1944(0xdd)](_0x5f1944(0xb0),function(){var _0xc16de4=_0x5f1944;const _0x421e22=localStorage[_0xc16de4(0x88)](_0xc16de4(0xbe));_0x421e22===null||_0x421e22===''?authorizeWithDropbox():window['confirm'](_0xc16de4(0x87))&&(localStorage[_0xc16de4(0x91)](_0xc16de4(0xbe),''),dropboxRestore['classList'][_0xc16de4(0x80)](_0xc16de4(0x90)),dropboxBackup['classList'][_0xc16de4(0x80)]('active'),dropboxCloud[_0xc16de4(0xb2)][_0xc16de4(0x80)](_0xc16de4(0x90)));}),handleDropboxCallback();});function a0_0x5e7d(){var _0x1dd9ca=['Do\x20you\x20want\x20to\x20backup\x20','807171hBUDFu','href','alert','uId','Kabu\x20storage\x20↦\x20Cloud\x20◆','status','uploadFileInCloud','Download\x20failed,\x20unknown\x20http\x20status:','access_token','screenshot','refreshToken','Download\x20failed\x20for\x20','responseText','log','POST','split','Restoring...','location',',\x20status:\x20','length','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','https://api.dropboxapi.com/2/files/create_folder_v2','https://www.dropbox.com/oauth2/authorize?client_id=','filter','Restore\x20canceled\x20by\x20user.','&token_access_type=','setRequestHeader','Backing\x20up...','https://api.dropboxapi.com/oauth2/token','223124qzitWH','6tUzDDf','code=','Failed\x20to\x20upload\x20file\x20','parse','addEventListener','No\x20refresh\x20token','save','list','nwb3dnfh09rhs31','state','slice','=([^&#]*)','10192BRMwvN','remove','11cOtZVl','Unable\x20to\x20refresh\x20token','https://api.dropbox.com/oauth2/token','map','error','push','Do\x20you\x20want\x20to\x20logout?','getItem','&response_type=','Upload\x20failed,\x20unknown\x20http\x20status:\x20','FSSync','&redirect_uri=','accessToken','application/octet-stream','Folder\x20already\x20exists','active','setItem','name','\x20files\x20from\x20Cloud?','Bearer\x20','Wait\x20a\x20little\x20bit...','11781940LirNSt','confirm','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','&client_secret=','replace','json','5823xFilYG','Cloud\x20↦\x20Kabu\x20storage\x20◆','Cloud\x20login\x20required!','Error\x20while\x20refreshing\x20token:','authorization_code','Refreshing\x20token...','toUpperCase','Failed\x20to\x20refresh\x20Dropbox\x20token.','code','onload','Error\x20creating\x20folder\x20','stringify','[\x5c?&#]','/data/','charAt','Do\x20not\x20receive\x20authorization','21PmcUzs','https://api.dropboxapi.com/2/files/list_folder','&grant_type=','exec','click','5168425FYacZt','classList','601192WDNQVl','Content-Type','1737684pdLJmL','application/x-www-form-urlencoded','search','No\x20files\x20found\x20to\x20restore.','file'];a0_0x5e7d=function(){return _0x1dd9ca;};return a0_0x5e7d();}