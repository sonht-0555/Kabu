var a0_0x4ee7cb=a0_0xd11b;(function(_0x17d256,_0x600737){var _0x4f5aa0=a0_0xd11b,_0x524796=_0x17d256();while(!![]){try{var _0x3d4b50=-parseInt(_0x4f5aa0(0x1f1))/0x1+-parseInt(_0x4f5aa0(0x1a3))/0x2*(parseInt(_0x4f5aa0(0x1ce))/0x3)+-parseInt(_0x4f5aa0(0x1a8))/0x4+parseInt(_0x4f5aa0(0x1ae))/0x5+-parseInt(_0x4f5aa0(0x1c7))/0x6*(parseInt(_0x4f5aa0(0x1ec))/0x7)+parseInt(_0x4f5aa0(0x1a5))/0x8+-parseInt(_0x4f5aa0(0x18f))/0x9*(-parseInt(_0x4f5aa0(0x197))/0xa);if(_0x3d4b50===_0x600737)break;else _0x524796['push'](_0x524796['shift']());}catch(_0x3b16c6){_0x524796['push'](_0x524796['shift']());}}}(a0_0x5548,0x1aa10));import*as a0_0x501dd9 from'./main.js';import{localStorageFile}from'./storage.js';function a0_0xd11b(_0x790779,_0x5bef5e){var _0x55483a=a0_0x5548();return a0_0xd11b=function(_0xd11b5a,_0x1a1502){_0xd11b5a=_0xd11b5a-0x18d;var _0x350025=_0x55483a[_0xd11b5a];return _0x350025;},a0_0xd11b(_0x790779,_0x5bef5e);}var clientId=a0_0x4ee7cb(0x1c9),clientSecret=a0_0x4ee7cb(0x19d);function authorizeWithDropbox(){var _0x2a7355=a0_0x4ee7cb,_0xcd7c2c=window[_0x2a7355(0x1d2)]['href'][_0x2a7355(0x198)]('?')[0x0],_0xa5abdc=_0x2a7355(0x1a9),_0x57cc92=_0x2a7355(0x1dc),_0xb2d9cf='https://www.dropbox.com/oauth2/authorize?client_id='+clientId+_0x2a7355(0x1a4)+_0xa5abdc+_0x2a7355(0x1c8)+_0x57cc92+_0x2a7355(0x1a7)+encodeURIComponent(_0xcd7c2c);window['location'][_0x2a7355(0x1a0)]=_0xb2d9cf;}function handleDropboxCallback(){var _0xc99418=a0_0x4ee7cb,_0x5b7068=getUrlParameter(_0xc99418(0x1a9));_0x5b7068?(getAccessToken(_0x5b7068),console['log']('Authorization\x20Code:',_0x5b7068)):console[_0xc99418(0x1d9)](_0xc99418(0x1de));}function getUrlParameter(_0x1fd157){var _0x2e7c13=a0_0x4ee7cb;_0x1fd157=_0x1fd157[_0x2e7c13(0x1c3)](/[\[]/,'\x5c[')['replace'](/[\]]/,'\x5c]');var _0x305fb5=new RegExp('[\x5c?&#]'+_0x1fd157+_0x2e7c13(0x1c6)),_0x45f654=_0x305fb5[_0x2e7c13(0x1d3)](location[_0x2e7c13(0x1da)]);return _0x45f654===null?'':decodeURIComponent(_0x45f654[0x1][_0x2e7c13(0x1c3)](/\+/g,'\x20'));}function getAccessToken(_0x557d08){var _0x2808ed=a0_0x4ee7cb,_0x4cf4ca=_0x2808ed(0x1d0),_0xb20dd1=window['location'][_0x2808ed(0x1a0)]['split']('?')[0x0],_0x527c94=new XMLHttpRequest();_0x527c94['open'](_0x2808ed(0x1d1),'https://api.dropbox.com/oauth2/token'),_0x527c94[_0x2808ed(0x1eb)](_0x2808ed(0x1b5),'application/x-www-form-urlencoded'),_0x527c94[_0x2808ed(0x1a1)]=function(){var _0x2f7c09=_0x2808ed;if(_0x527c94[_0x2f7c09(0x19c)]===0xc8){var _0x38e1b5=JSON['parse'](_0x527c94[_0x2f7c09(0x1f3)]),_0x5b630b=_0x38e1b5['access_token'],_0x45aeb0=_0x38e1b5[_0x2f7c09(0x1bb)],_0x4b34a9=_0x38e1b5[_0x2f7c09(0x1a6)];localStorage[_0x2f7c09(0x1ac)](_0x2f7c09(0x1cf),_0x5b630b),localStorage[_0x2f7c09(0x1ac)](_0x2f7c09(0x1a2),_0x45aeb0),localStorage[_0x2f7c09(0x1ac)](_0x2f7c09(0x1f6),_0x4b34a9);}else console[_0x2f7c09(0x1d9)](_0x2f7c09(0x1db));},_0x527c94[_0x2808ed(0x191)](_0x2808ed(0x1df)+_0x557d08+_0x2808ed(0x1ca)+_0x4cf4ca+_0x2808ed(0x1c4)+clientId+_0x2808ed(0x1cb)+clientSecret+_0x2808ed(0x1a7)+encodeURIComponent(_0xb20dd1));}export async function dpCreateFolder(_0x39af1f){var _0x37051b=a0_0x4ee7cb;const _0xeb7533=localStorage[_0x37051b(0x1c5)](_0x37051b(0x1f6));let _0x2f8730=localStorage[_0x37051b(0x1c5)](_0x37051b(0x1cf));const _0x2f9076='/'+_0xeb7533+'/'+_0x39af1f,_0x4e1045=JSON[_0x37051b(0x1d8)]({'path':_0x2f9076,'autorename':![]});for(let _0x4fa72d=0x0;_0x4fa72d<0x2;_0x4fa72d++){try{const _0x2179a8=await fetch(_0x37051b(0x1b1),{'method':'POST','headers':{'Authorization':'Bearer\x20'+_0x2f8730,'Content-Type':'application/json'},'body':_0x4e1045});if(_0x2179a8['status']===0x191){const _0x3e85e3=await dpRefreshToken();if(!_0x3e85e3)throw new Error('Unable\x20to\x20refresh\x20token');_0x2f8730=localStorage[_0x37051b(0x1c5)](_0x37051b(0x1cf));continue;}if(_0x2179a8[_0x37051b(0x19c)]===0x199)return{'message':_0x37051b(0x1e5),'path':_0x39af1f};if(!_0x2179a8['ok'])throw new Error(_0x37051b(0x1be)+_0x39af1f);const _0x542921=await _0x2179a8[_0x37051b(0x1f8)]();return await lockNoti(_0x37051b(0x19e),'',0xbb8),_0x542921;}catch(_0xdfac6a){if(_0x4fa72d===0x1)throw _0xdfac6a;}}return![];}export async function dpRefreshToken(){var _0x48daf1=a0_0x4ee7cb;if(!localStorage[_0x48daf1(0x1c5)](_0x48daf1(0x1a2)))throw _0x48daf1(0x1ee);try{const _0x509e85=await fetch(_0x48daf1(0x1e6),{'method':'POST','headers':{'Content-Type':_0x48daf1(0x1e0)},'body':_0x48daf1(0x1b0)+localStorage[_0x48daf1(0x1c5)](_0x48daf1(0x1a2))+_0x48daf1(0x1bc)}),_0xcc2450=await _0x509e85[_0x48daf1(0x1f8)]();if(!_0xcc2450[_0x48daf1(0x1d6)])return localStorage[_0x48daf1(0x1ac)](_0x48daf1(0x1cf),_0xcc2450[_0x48daf1(0x1cd)]),await lockNoti(_0x48daf1(0x1d4),'',0xbb8),await delay(0x3e8),!![];else alert(_0xcc2450['error_description']||'Failed\x20to\x20refresh\x20Dropbox\x20token.');}catch(_0x5003b7){console[_0x48daf1(0x1d6)]('Error\x20while\x20refreshing\x20token:',_0x5003b7);}return![];}export async function dpUploadFile(_0x149a5f,_0x383c4a,_0x16cc82){var _0x219d4f=a0_0x4ee7cb;const _0x2f8769=localStorage['getItem'](_0x219d4f(0x1f6));var _0x306a8b=JSON[_0x219d4f(0x1d8)]({'autorename':!![],'mode':_0x219d4f(0x19b),'mute':!![],'strict_conflict':![],'path':'/'+_0x2f8769+'/'+_0x16cc82+'/'+_0x149a5f}),_0x34978d=new Blob([_0x383c4a],{'type':_0x219d4f(0x18d)});for(var _0x11c30c=0x0;_0x11c30c<0x2;_0x11c30c++){var _0x1265ee=await fetch(_0x219d4f(0x1f2),{'method':'POST','headers':{'Authorization':'Bearer\x20'+localStorage[_0x219d4f(0x1c5)](_0x219d4f(0x1cf)),'Dropbox-API-Arg':_0x306a8b,'Content-Type':_0x219d4f(0x18d)},'body':_0x34978d});if(_0x1265ee[_0x219d4f(0x19c)]!=0xc8){if(_0x1265ee[_0x219d4f(0x19c)]==0x191){var _0x2919ec=await dpRefreshToken();if(!_0x2919ec)throw _0x219d4f(0x195);continue;}else throw'Upload\x20failed,\x20unknown\x20http\x20status:\x20'+_0x1265ee['status'];}else{var _0x5d1e35=await _0x1265ee[_0x219d4f(0x1f8)]();return console[_0x219d4f(0x1d9)](_0x219d4f(0x1ef),_0x149a5f),_0x5d1e35;}}return![];}function a0_0x5548(){var _0xe3f14=['knh3uz2mx2hp2eu','&grant_type=','&client_secret=','map','access_token','3hQmkas','accessToken','authorization_code','POST','location','exec','Refreshing\x20token...','application/json','error','Failed\x20to\x20upload\x20file\x20','stringify','log','search','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','offline','Download\x20failed,\x20unknown\x20http\x20status:','Do\x20not\x20receive\x20authorization','code=','application/x-www-form-urlencoded','Restoring...','Do\x20you\x20want\x20to\x20logout?','click','\x20files\x20from\x20Cloud?','Folder\x20already\x20exists','https://api.dropboxapi.com/oauth2/token','list','https://api.dropboxapi.com/2/files/list_folder','remove','Backing\x20up...','setRequestHeader','961163QytLtJ','slice','No\x20refresh\x20token','Kabu\x20storage\x20↦\x20Cloud\x20◆','Do\x20you\x20want\x20to\x20backup\x20','89915uwztza','https://content.dropboxapi.com/2/files/upload','responseText','Cloud\x20↦\x20Kabu\x20storage\x20◆','uploadFileInCloud','uId','Cloud\x20login\x20required!','json','active','application/octet-stream',',\x20status:\x20','370773UkBQxu','name','send','.tag','classList','\x20files\x20in\x20Kabu?','Unable\x20to\x20refresh\x20token','DOMContentLoaded','100qrMJFt','split','Do\x20you\x20want\x20to\x20restore\x20','addEventListener','overwrite','status','nwb3dnfh09rhs31','Folder\x20created','filter','href','onload','refreshToken','47822htgaLK','&response_type=','485424nmSenu','uid','&redirect_uri=','730920SjpHsj','code','entries','No\x20files\x20found\x20to\x20restore.','setItem','Download\x20failed\x20for\x20','351445ZXsXmp','/data/','refresh_token=','https://api.dropboxapi.com/2/files/create_folder_v2','folder','toUpperCase','https://content.dropboxapi.com/2/files/download','Content-Type','Restore\x20canceled\x20by\x20user.','screenshot','charAt','length','alert','refresh_token','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','confirm','Error\x20creating\x20folder\x20','save','downloadFileInCloud','push','file','replace','&client_id=','getItem','=([^&#]*)','6gHfAPg','&token_access_type='];a0_0x5548=function(){return _0xe3f14;};return a0_0x5548();}export async function dpDownloadFile(_0x561cbd,_0x4e83a0){var _0x44ab4f=a0_0x4ee7cb;const _0x53abf2=localStorage[_0x44ab4f(0x1c5)](_0x44ab4f(0x1f6));var _0x9d504a=JSON[_0x44ab4f(0x1d8)]({'path':'/'+_0x53abf2+'/'+_0x4e83a0+'/'+_0x561cbd});for(var _0x67b61b=0x0;_0x67b61b<0x2;_0x67b61b++){var _0x1efeda=await fetch(_0x44ab4f(0x1b4),{'method':_0x44ab4f(0x1d1),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x44ab4f(0x1c5)](_0x44ab4f(0x1cf)),'Dropbox-API-Arg':_0x9d504a}});if(_0x1efeda[_0x44ab4f(0x19c)]!=0xc8){if(_0x1efeda[_0x44ab4f(0x19c)]==0x191){var _0x3ce879=await dpRefreshToken();if(!_0x3ce879)throw _0x44ab4f(0x195);continue;}else throw _0x44ab4f(0x1dd)+_0x1efeda[_0x44ab4f(0x19c)];}const _0xb7f93b=new File([await _0x1efeda['blob']()],_0x561cbd);return console[_0x44ab4f(0x1d9)](_0x44ab4f(0x1f4),_0xb7f93b[_0x44ab4f(0x190)]),a0_0x501dd9[_0x44ab4f(0x1f5)](_0xb7f93b,()=>{}),_0xb7f93b;}return![];}document[a0_0x4ee7cb(0x19a)](a0_0x4ee7cb(0x196),function(){var _0x4fda99=a0_0x4ee7cb;dropboxRestore['addEventListener'](_0x4fda99(0x1e3),async function(){var _0x3548d3=_0x4fda99;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x596b5e=localStorage[_0x3548d3(0x1c5)](_0x3548d3(0x1f6)),_0x371935=['state','save',_0x3548d3(0x1b7)];if(!_0x596b5e){window[_0x3548d3(0x1ba)](_0x3548d3(0x1f7));return;}let _0x1a678c=[];for(const _0x3d9363 of _0x371935){let _0x5d7d84={'path':'/'+_0x596b5e+'/'+_0x3d9363};for(let _0x327508=0x0;_0x327508<0x2;_0x327508++){let _0x5da7ab=await fetch(_0x3548d3(0x1e8),{'method':_0x3548d3(0x1d1),'headers':{'Authorization':'Bearer\x20'+localStorage['getItem'](_0x3548d3(0x1cf)),'Content-Type':_0x3548d3(0x1d5)},'body':JSON['stringify'](_0x5d7d84)});if(_0x5da7ab[_0x3548d3(0x19c)]===0xc8){let _0x56b495=await _0x5da7ab[_0x3548d3(0x1f8)](),_0x5f24a4=_0x56b495[_0x3548d3(0x1aa)][_0x3548d3(0x19f)](_0x2d2291=>_0x2d2291[_0x3548d3(0x192)]===_0x3548d3(0x1c2));_0x5f24a4['length']>0x0&&_0x1a678c[_0x3548d3(0x1c1)](..._0x5f24a4[_0x3548d3(0x1cc)](_0x2f4256=>({'name':_0x2f4256[_0x3548d3(0x190)],'folder':_0x3d9363})));break;}else{if(_0x5da7ab[_0x3548d3(0x19c)]===0x191){let _0x2c7a46=await dpRefreshToken();if(!_0x2c7a46)throw _0x3548d3(0x195);}else{console[_0x3548d3(0x1d6)](_0x3548d3(0x1ad)+_0x3d9363+_0x3548d3(0x18e)+_0x5da7ab[_0x3548d3(0x19c)]);break;}}}}if(_0x1a678c['length']>0x0){const _0x793b91=_0x3548d3(0x199)+_0x1a678c[_0x3548d3(0x1b9)]+_0x3548d3(0x1e4);if(window[_0x3548d3(0x1bd)](_0x793b91))for(const _0x441ca3 of _0x1a678c){await lockNoti(_0x3548d3(0x1e1),_0x441ca3[_0x3548d3(0x190)],0xbb8),await dpDownloadFile(_0x441ca3[_0x3548d3(0x190)],_0x441ca3[_0x3548d3(0x1b2)]);}else console['log'](_0x3548d3(0x1b6));}else console['log'](_0x3548d3(0x1ab));}),dropboxBackup['addEventListener'](_0x4fda99(0x1e3),async function(){var _0x23edcf=_0x4fda99;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x4fe00d=localStorage[_0x23edcf(0x1c5)](_0x23edcf(0x1f6));if(_0x4fe00d===null||_0x4fe00d==='')window['alert']('Cloud\x20login\x20required!');else{const _0x435125=['state',_0x23edcf(0x1bf),_0x23edcf(0x1b7)];for(const _0x40d0db of _0x435125){await dpCreateFolder(_0x40d0db);}let _0x41ae22=0x0;for(const _0x10c71b of _0x435125){const _0x22e4b4=a0_0x501dd9[_0x23edcf(0x1e7)+(_0x10c71b[_0x23edcf(0x1b8)](0x0)[_0x23edcf(0x1b3)]()+_0x10c71b['slice'](0x1))]();_0x41ae22+=_0x22e4b4['length'];}if(window[_0x23edcf(0x1bd)](_0x23edcf(0x1f0)+_0x41ae22+_0x23edcf(0x194)))for(const _0x2ed413 of _0x435125){const _0x1ee871=a0_0x501dd9[_0x23edcf(0x1e7)+(_0x2ed413[_0x23edcf(0x1b8)](0x0)[_0x23edcf(0x1b3)]()+_0x2ed413[_0x23edcf(0x1ed)](0x1))]();for(const _0x43163a of _0x1ee871){const _0x55182c=await a0_0x501dd9[_0x23edcf(0x1c0)](_0x23edcf(0x1af)+_0x2ed413+'s/'+_0x43163a);try{await lockNoti(_0x23edcf(0x1ea),_0x43163a,0xbb8),await dpUploadFile(_0x43163a,_0x55182c,_0x2ed413);}catch(_0x412e60){console['error'](_0x23edcf(0x1d7)+_0x43163a+':',_0x412e60);}}}else console[_0x23edcf(0x1d9)](_0x23edcf(0x1b6));}}),dropboxCloud[_0x4fda99(0x19a)]('click',function(){var _0x3bdf27=_0x4fda99;const _0x1d05e2=localStorage[_0x3bdf27(0x1c5)](_0x3bdf27(0x1f6));_0x1d05e2===null||_0x1d05e2===''?authorizeWithDropbox():window[_0x3bdf27(0x1bd)](_0x3bdf27(0x1e2))&&(localStorage[_0x3bdf27(0x1ac)](_0x3bdf27(0x1f6),''),dropboxRestore[_0x3bdf27(0x193)]['remove'](_0x3bdf27(0x1f9)),dropboxBackup[_0x3bdf27(0x193)][_0x3bdf27(0x1e9)](_0x3bdf27(0x1f9)),dropboxCloud[_0x3bdf27(0x193)][_0x3bdf27(0x1e9)]('active'));}),handleDropboxCallback();});