var a0_0x3e3281=a0_0x620f;function a0_0x620f(_0x41564a,_0x222a4d){var _0x5bc6e2=a0_0x5bc6();return a0_0x620f=function(_0x620fc1,_0xcde9b1){_0x620fc1=_0x620fc1-0x19d;var _0x4d4c3b=_0x5bc6e2[_0x620fc1];return _0x4d4c3b;},a0_0x620f(_0x41564a,_0x222a4d);}(function(_0x1e05b5,_0x53c3ce){var _0x1e8d9a=a0_0x620f,_0x4672c5=_0x1e05b5();while(!![]){try{var _0x215bf2=parseInt(_0x1e8d9a(0x1d4))/0x1*(-parseInt(_0x1e8d9a(0x19d))/0x2)+parseInt(_0x1e8d9a(0x1f6))/0x3+parseInt(_0x1e8d9a(0x1db))/0x4+parseInt(_0x1e8d9a(0x1b1))/0x5*(-parseInt(_0x1e8d9a(0x1da))/0x6)+parseInt(_0x1e8d9a(0x1b4))/0x7+-parseInt(_0x1e8d9a(0x1dd))/0x8*(-parseInt(_0x1e8d9a(0x1ea))/0x9)+-parseInt(_0x1e8d9a(0x1c4))/0xa*(parseInt(_0x1e8d9a(0x1e8))/0xb);if(_0x215bf2===_0x53c3ce)break;else _0x4672c5['push'](_0x4672c5['shift']());}catch(_0x1d6de4){_0x4672c5['push'](_0x4672c5['shift']());}}}(a0_0x5bc6,0xcc209));import*as a0_0x5d7425 from'./main.js';import{localStorageFile}from'./storage.js';var clientId='knh3uz2mx2hp2eu',clientSecret=a0_0x3e3281(0x1b0);function a0_0x5bc6(){var _0x16e8a8=['Restoring...','Refreshing\x20token...','alert','&client_secret=','application/x-www-form-urlencoded','4PpxIyg','Cloud\x20login\x20required!','stringify','name',',\x20status:\x20','Do\x20not\x20receive\x20authorization','error','Download\x20failed\x20for\x20','Do\x20you\x20want\x20to\x20backup\x20','Unable\x20to\x20refresh\x20token','refresh_token=','Do\x20you\x20want\x20to\x20restore\x20','https://api.dropbox.com/oauth2/token','code','search','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','authorization_code','classList','Restore\x20canceled\x20by\x20user.','nwb3dnfh09rhs31','415fOKUou','application/json','https://content.dropboxapi.com/2/files/download','920710BXRaKq','replace','Kabu\x20storage\x20↦\x20Cloud\x20◆','&redirect_uri=','list','parse','refreshToken','toUpperCase','uId','Failed\x20to\x20upload\x20file\x20','file','json','Folder\x20created','log','https://api.dropboxapi.com/oauth2/token','downloadFileInCloud','1220VvUyBq','&client_id=','remove','active','Bearer\x20','https://content.dropboxapi.com/2/files/upload','Do\x20you\x20want\x20to\x20logout?','state','entries','=([^&#]*)','location','uploadFileInCloud','Content-Type','application/octet-stream','onload','/data/','652143NpqQYd','https://www.dropbox.com/oauth2/authorize?client_id=','click','[\x5c?&#]','\x20files\x20in\x20Kabu?','Wait\x20a\x20little\x20bit...','24168RVhoTF','4584472qxAifk','overwrite','162584RqTRJJ','https://api.dropboxapi.com/2/files/list_folder','getItem','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','uid','folder','length','.tag','setItem','&grant_type=','Authorization\x20Code:','148082hxawnu','POST','675KRLYsg','open','status','confirm','push','Cloud\x20↦\x20Kabu\x20storage\x20◆','blob','split','accessToken','Failed\x20to\x20refresh\x20Dropbox\x20token.','save','screenshot','3945618MosdXW','href','Backing\x20up...','Error\x20creating\x20folder\x20','Folder\x20already\x20exists','access_token','charAt','addEventListener','slice'];a0_0x5bc6=function(){return _0x16e8a8;};return a0_0x5bc6();}function authorizeWithDropbox(){var _0x3d24a4=a0_0x3e3281,_0x254998=window[_0x3d24a4(0x1ce)][_0x3d24a4(0x1f7)]['split']('?')[0x0],_0x3bdb98=_0x3d24a4(0x1aa),_0x5a1995='offline',_0x4bb12a=_0x3d24a4(0x1d5)+clientId+'&response_type='+_0x3bdb98+'&token_access_type='+_0x5a1995+_0x3d24a4(0x1b7)+encodeURIComponent(_0x254998);window[_0x3d24a4(0x1ce)][_0x3d24a4(0x1f7)]=_0x4bb12a;}function handleDropboxCallback(){var _0x196b5e=a0_0x3e3281,_0x1b8cfc=getUrlParameter('code');_0x1b8cfc?(getAccessToken(_0x1b8cfc),console[_0x196b5e(0x1c1)](_0x196b5e(0x1e7),_0x1b8cfc)):console[_0x196b5e(0x1c1)](_0x196b5e(0x1a2));}function getUrlParameter(_0x5ee55c){var _0x225649=a0_0x3e3281;_0x5ee55c=_0x5ee55c[_0x225649(0x1b5)](/[\[]/,'\x5c[')[_0x225649(0x1b5)](/[\]]/,'\x5c]');var _0x43f6f7=new RegExp(_0x225649(0x1d7)+_0x5ee55c+_0x225649(0x1cd)),_0x46cb8f=_0x43f6f7['exec'](location[_0x225649(0x1ab)]);return _0x46cb8f===null?'':decodeURIComponent(_0x46cb8f[0x1][_0x225649(0x1b5)](/\+/g,'\x20'));}function getAccessToken(_0x8d89f3){var _0x2d0c1b=a0_0x3e3281,_0x452dfb=_0x2d0c1b(0x1ad),_0x287dbc=window[_0x2d0c1b(0x1ce)][_0x2d0c1b(0x1f7)][_0x2d0c1b(0x1f1)]('?')[0x0],_0x3b1c88=new XMLHttpRequest();_0x3b1c88[_0x2d0c1b(0x1eb)]('POST',_0x2d0c1b(0x1a9)),_0x3b1c88['setRequestHeader'](_0x2d0c1b(0x1d0),_0x2d0c1b(0x203)),_0x3b1c88[_0x2d0c1b(0x1d2)]=function(){var _0xb5895a=_0x2d0c1b;if(_0x3b1c88[_0xb5895a(0x1ec)]===0xc8){var _0x4dcbb0=JSON[_0xb5895a(0x1b9)](_0x3b1c88['responseText']),_0x2e8013=_0x4dcbb0[_0xb5895a(0x1fb)],_0x2d7c7e=_0x4dcbb0['refresh_token'],_0x12db07=_0x4dcbb0[_0xb5895a(0x1e1)];localStorage[_0xb5895a(0x1e5)]('accessToken',_0x2e8013),localStorage[_0xb5895a(0x1e5)]('refreshToken',_0x2d7c7e),localStorage['setItem'](_0xb5895a(0x1bc),_0x12db07);}else console[_0xb5895a(0x1c1)](_0xb5895a(0x1ac));},_0x3b1c88['send']('code='+_0x8d89f3+_0x2d0c1b(0x1e6)+_0x452dfb+_0x2d0c1b(0x1c5)+clientId+_0x2d0c1b(0x202)+clientSecret+_0x2d0c1b(0x1b7)+encodeURIComponent(_0x287dbc));}export async function dpCreateFolder(_0x573177){var _0x5b5ac3=a0_0x3e3281;const _0x550c8d=localStorage[_0x5b5ac3(0x1df)](_0x5b5ac3(0x1bc));let _0x35474f=localStorage[_0x5b5ac3(0x1df)](_0x5b5ac3(0x1f2));const _0x4911f3='/'+_0x550c8d+'/'+_0x573177,_0x557488=JSON[_0x5b5ac3(0x19f)]({'path':_0x4911f3,'autorename':![]});for(let _0xff8906=0x0;_0xff8906<0x2;_0xff8906++){try{const _0x571c9f=await fetch('https://api.dropboxapi.com/2/files/create_folder_v2',{'method':'POST','headers':{'Authorization':_0x5b5ac3(0x1c8)+_0x35474f,'Content-Type':_0x5b5ac3(0x1b2)},'body':_0x557488});if(_0x571c9f[_0x5b5ac3(0x1ec)]===0x191){const _0x561346=await dpRefreshToken();if(!_0x561346)throw new Error('Unable\x20to\x20refresh\x20token');_0x35474f=localStorage[_0x5b5ac3(0x1df)](_0x5b5ac3(0x1f2));continue;}if(_0x571c9f[_0x5b5ac3(0x1ec)]===0x199)return{'message':_0x5b5ac3(0x1fa),'path':_0x573177};if(!_0x571c9f['ok'])throw new Error(_0x5b5ac3(0x1f9)+_0x573177);const _0x1c5aaf=await _0x571c9f[_0x5b5ac3(0x1bf)]();return await lockNoti(_0x5b5ac3(0x1c0),'',0xbb8),_0x1c5aaf;}catch(_0x44786b){if(_0xff8906===0x1)throw _0x44786b;}}return![];}export async function dpRefreshToken(){var _0xbb1771=a0_0x3e3281;if(!localStorage['getItem'](_0xbb1771(0x1ba)))throw'No\x20refresh\x20token';try{const _0x53716e=await fetch(_0xbb1771(0x1c2),{'method':'POST','headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0xbb1771(0x1a7)+localStorage[_0xbb1771(0x1df)](_0xbb1771(0x1ba))+_0xbb1771(0x1e0)}),_0x122e75=await _0x53716e[_0xbb1771(0x1bf)]();if(!_0x122e75[_0xbb1771(0x1a3)])return localStorage['setItem']('accessToken',_0x122e75[_0xbb1771(0x1fb)]),await lockNoti(_0xbb1771(0x200),'',0xbb8),await delay(0x3e8),!![];else alert(_0x122e75['error_description']||_0xbb1771(0x1f3));}catch(_0x3d7e7a){console[_0xbb1771(0x1a3)]('Error\x20while\x20refreshing\x20token:',_0x3d7e7a);}return![];}export async function dpUploadFile(_0x4cd844,_0x291486,_0x1f56d1){var _0x4da93e=a0_0x3e3281;const _0x50b50b=localStorage[_0x4da93e(0x1df)](_0x4da93e(0x1bc));var _0xbe1ff6=JSON[_0x4da93e(0x19f)]({'autorename':!![],'mode':_0x4da93e(0x1dc),'mute':!![],'strict_conflict':![],'path':'/'+_0x50b50b+'/'+_0x1f56d1+'/'+_0x4cd844}),_0x58fb46=new Blob([_0x291486],{'type':_0x4da93e(0x1d1)});for(var _0x23e142=0x0;_0x23e142<0x2;_0x23e142++){var _0x1f39c7=await fetch(_0x4da93e(0x1c9),{'method':_0x4da93e(0x1e9),'headers':{'Authorization':'Bearer\x20'+localStorage['getItem'](_0x4da93e(0x1f2)),'Dropbox-API-Arg':_0xbe1ff6,'Content-Type':_0x4da93e(0x1d1)},'body':_0x58fb46});if(_0x1f39c7[_0x4da93e(0x1ec)]!=0xc8){if(_0x1f39c7[_0x4da93e(0x1ec)]==0x191){var _0x5acd5a=await dpRefreshToken();if(!_0x5acd5a)throw _0x4da93e(0x1a6);continue;}else throw'Upload\x20failed,\x20unknown\x20http\x20status:\x20'+_0x1f39c7[_0x4da93e(0x1ec)];}else{var _0x4d6926=await _0x1f39c7[_0x4da93e(0x1bf)]();return console[_0x4da93e(0x1c1)](_0x4da93e(0x1b6),_0x4cd844),_0x4d6926;}}return![];}export async function dpDownloadFile(_0x40b4e5,_0x23c0fc){var _0x1885ed=a0_0x3e3281;const _0x2f24ef=localStorage[_0x1885ed(0x1df)](_0x1885ed(0x1bc));var _0xfc2a55=JSON[_0x1885ed(0x19f)]({'path':'/'+_0x2f24ef+'/'+_0x23c0fc+'/'+_0x40b4e5});for(var _0x51d4e5=0x0;_0x51d4e5<0x2;_0x51d4e5++){var _0x1f7925=await fetch(_0x1885ed(0x1b3),{'method':'POST','headers':{'Authorization':_0x1885ed(0x1c8)+localStorage[_0x1885ed(0x1df)](_0x1885ed(0x1f2)),'Dropbox-API-Arg':_0xfc2a55}});if(_0x1f7925[_0x1885ed(0x1ec)]!=0xc8){if(_0x1f7925[_0x1885ed(0x1ec)]==0x191){var _0x303f30=await dpRefreshToken();if(!_0x303f30)throw _0x1885ed(0x1a6);continue;}else throw'Download\x20failed,\x20unknown\x20http\x20status:'+_0x1f7925[_0x1885ed(0x1ec)];}const _0x3d98a6=new File([await _0x1f7925[_0x1885ed(0x1f0)]()],_0x40b4e5);return console[_0x1885ed(0x1c1)](_0x1885ed(0x1ef),_0x3d98a6[_0x1885ed(0x1a0)]),a0_0x5d7425[_0x1885ed(0x1cf)](_0x3d98a6,()=>{}),_0x3d98a6;}return![];}document[a0_0x3e3281(0x1fd)]('DOMContentLoaded',function(){var _0x1717fb=a0_0x3e3281;dropboxRestore[_0x1717fb(0x1fd)](_0x1717fb(0x1d6),async function(){var _0x47ca2d=_0x1717fb;await lockNoti(_0x47ca2d(0x1d9),'',0x1388);const _0x433bb6=localStorage[_0x47ca2d(0x1df)]('uId'),_0x1e4895=[_0x47ca2d(0x1cb),_0x47ca2d(0x1f4),_0x47ca2d(0x1f5)];if(!_0x433bb6){window['alert'](_0x47ca2d(0x19e));return;}let _0x4f0970=[];for(const _0x1f5e71 of _0x1e4895){let _0x5ddc85={'path':'/'+_0x433bb6+'/'+_0x1f5e71};for(let _0x432020=0x0;_0x432020<0x2;_0x432020++){let _0x52ceaa=await fetch(_0x47ca2d(0x1de),{'method':_0x47ca2d(0x1e9),'headers':{'Authorization':_0x47ca2d(0x1c8)+localStorage['getItem'](_0x47ca2d(0x1f2)),'Content-Type':_0x47ca2d(0x1b2)},'body':JSON['stringify'](_0x5ddc85)});if(_0x52ceaa[_0x47ca2d(0x1ec)]===0xc8){let _0x42c70c=await _0x52ceaa[_0x47ca2d(0x1bf)](),_0x3fa501=_0x42c70c[_0x47ca2d(0x1cc)]['filter'](_0x417072=>_0x417072[_0x47ca2d(0x1e4)]===_0x47ca2d(0x1be));_0x3fa501[_0x47ca2d(0x1e3)]>0x0&&_0x4f0970[_0x47ca2d(0x1ee)](..._0x3fa501['map'](_0x16fee8=>({'name':_0x16fee8[_0x47ca2d(0x1a0)],'folder':_0x1f5e71})));break;}else{if(_0x52ceaa['status']===0x191){let _0x5ba58f=await dpRefreshToken();if(!_0x5ba58f)throw _0x47ca2d(0x1a6);}else{console[_0x47ca2d(0x1a3)](_0x47ca2d(0x1a4)+_0x1f5e71+_0x47ca2d(0x1a1)+_0x52ceaa[_0x47ca2d(0x1ec)]);break;}}}}if(_0x4f0970[_0x47ca2d(0x1e3)]>0x0){const _0xf64fcd=_0x47ca2d(0x1a8)+_0x4f0970['length']+'\x20files\x20from\x20Cloud?';if(window[_0x47ca2d(0x1ed)](_0xf64fcd))for(const _0x2d8ca9 of _0x4f0970){await lockNoti(_0x47ca2d(0x1ff),_0x2d8ca9['name'],0xbb8),await dpDownloadFile(_0x2d8ca9[_0x47ca2d(0x1a0)],_0x2d8ca9[_0x47ca2d(0x1e2)]);}else console['log'](_0x47ca2d(0x1af));}else console[_0x47ca2d(0x1c1)]('No\x20files\x20found\x20to\x20restore.');}),dropboxBackup[_0x1717fb(0x1fd)](_0x1717fb(0x1d6),async function(){var _0x286eb4=_0x1717fb;await lockNoti(_0x286eb4(0x1d9),'',0x1388);const _0x225097=localStorage[_0x286eb4(0x1df)](_0x286eb4(0x1bc));if(_0x225097===null||_0x225097==='')window[_0x286eb4(0x201)]('Cloud\x20login\x20required!');else{const _0x13da56=[_0x286eb4(0x1cb),_0x286eb4(0x1f4),_0x286eb4(0x1f5)];for(const _0x3f8964 of _0x13da56){await dpCreateFolder(_0x3f8964);}let _0x49b0b6=0x0;for(const _0x2eb2bd of _0x13da56){const _0x59b6b7=a0_0x5d7425['list'+(_0x2eb2bd[_0x286eb4(0x1fc)](0x0)[_0x286eb4(0x1bb)]()+_0x2eb2bd[_0x286eb4(0x1fe)](0x1))]();_0x49b0b6+=_0x59b6b7[_0x286eb4(0x1e3)];}if(window[_0x286eb4(0x1ed)](_0x286eb4(0x1a5)+_0x49b0b6+_0x286eb4(0x1d8)))for(const _0x45044b of _0x13da56){const _0x983f1f=a0_0x5d7425[_0x286eb4(0x1b8)+(_0x45044b['charAt'](0x0)[_0x286eb4(0x1bb)]()+_0x45044b[_0x286eb4(0x1fe)](0x1))]();for(const _0x4ff052 of _0x983f1f){const _0x28a5cc=await a0_0x5d7425[_0x286eb4(0x1c3)](_0x286eb4(0x1d3)+_0x45044b+'s/'+_0x4ff052);try{await lockNoti(_0x286eb4(0x1f8),_0x4ff052,0xbb8),await dpUploadFile(_0x4ff052,_0x28a5cc,_0x45044b);}catch(_0x5e7941){console[_0x286eb4(0x1a3)](_0x286eb4(0x1bd)+_0x4ff052+':',_0x5e7941);}}}else console[_0x286eb4(0x1c1)](_0x286eb4(0x1af));}}),dropboxCloud[_0x1717fb(0x1fd)](_0x1717fb(0x1d6),function(){var _0x3625ce=_0x1717fb;const _0xbf1b66=localStorage[_0x3625ce(0x1df)](_0x3625ce(0x1bc));_0xbf1b66===null||_0xbf1b66===''?authorizeWithDropbox():window[_0x3625ce(0x1ed)](_0x3625ce(0x1ca))&&(localStorage['setItem'](_0x3625ce(0x1bc),''),dropboxRestore[_0x3625ce(0x1ae)][_0x3625ce(0x1c6)](_0x3625ce(0x1c7)),dropboxBackup[_0x3625ce(0x1ae)][_0x3625ce(0x1c6)](_0x3625ce(0x1c7)),dropboxCloud[_0x3625ce(0x1ae)]['remove']('active'));}),handleDropboxCallback();});