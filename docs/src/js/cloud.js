var a0_0x46f403=a0_0x55db;(function(_0x5a7f32,_0x4e1f5b){var _0x255a13=a0_0x55db,_0x3ff282=_0x5a7f32();while(!![]){try{var _0x5a0cb5=parseInt(_0x255a13(0x187))/0x1+-parseInt(_0x255a13(0x1d6))/0x2+parseInt(_0x255a13(0x190))/0x3*(parseInt(_0x255a13(0x184))/0x4)+parseInt(_0x255a13(0x1ba))/0x5+parseInt(_0x255a13(0x1b3))/0x6*(parseInt(_0x255a13(0x1be))/0x7)+parseInt(_0x255a13(0x1d1))/0x8*(parseInt(_0x255a13(0x1bd))/0x9)+-parseInt(_0x255a13(0x1d2))/0xa;if(_0x5a0cb5===_0x4e1f5b)break;else _0x3ff282['push'](_0x3ff282['shift']());}catch(_0x57ab07){_0x3ff282['push'](_0x3ff282['shift']());}}}(a0_0x4ac2,0x3c2c2));function a0_0x55db(_0xfa74fa,_0x4fe8cc){var _0x4ac2a2=a0_0x4ac2();return a0_0x55db=function(_0x55db11,_0x800f8){_0x55db11=_0x55db11-0x184;var _0x3e5606=_0x4ac2a2[_0x55db11];return _0x3e5606;},a0_0x55db(_0xfa74fa,_0x4fe8cc);}import*as a0_0x4a89c5 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x46f403(0x1a6),clientSecret='nwb3dnfh09rhs31';function authorizeWithDropbox(){var _0x2c256b=a0_0x46f403,_0x3a0f82=window[_0x2c256b(0x199)][_0x2c256b(0x18e)][_0x2c256b(0x18b)]('?')[0x0],_0x211db9='code',_0xa9c76a=_0x2c256b(0x1d5),_0x448b57=_0x2c256b(0x1db)+clientId+_0x2c256b(0x1e1)+_0x211db9+'&token_access_type='+_0xa9c76a+_0x2c256b(0x1d8)+encodeURIComponent(_0x3a0f82);window[_0x2c256b(0x199)][_0x2c256b(0x18e)]=_0x448b57;}function handleDropboxCallback(){var _0x141433=a0_0x46f403,_0x71217b=getUrlParameter(_0x141433(0x1b9));_0x71217b?(getAccessToken(_0x71217b),console[_0x141433(0x1e8)](_0x141433(0x1ab),_0x71217b)):console[_0x141433(0x1e8)](_0x141433(0x1b0));}function getUrlParameter(_0x436f6f){var _0x30f1f4=a0_0x46f403;_0x436f6f=_0x436f6f[_0x30f1f4(0x1b8)](/[\[]/,'\x5c[')[_0x30f1f4(0x1b8)](/[\]]/,'\x5c]');var _0x591412=new RegExp(_0x30f1f4(0x194)+_0x436f6f+_0x30f1f4(0x185)),_0x18a2f4=_0x591412['exec'](location[_0x30f1f4(0x18f)]);return _0x18a2f4===null?'':decodeURIComponent(_0x18a2f4[0x1]['replace'](/\+/g,'\x20'));}function getAccessToken(_0x481b90){var _0x56d19e=a0_0x46f403,_0xfb6e7a=_0x56d19e(0x1a9),_0xeac10d=window[_0x56d19e(0x199)][_0x56d19e(0x18e)][_0x56d19e(0x18b)]('?')[0x0],_0x272f76=new XMLHttpRequest();_0x272f76['open']('POST',_0x56d19e(0x191)),_0x272f76[_0x56d19e(0x1ae)]('Content-Type','application/x-www-form-urlencoded'),_0x272f76['onload']=function(){var _0xe8fa5b=_0x56d19e;if(_0x272f76['status']===0xc8){var _0x12f552=JSON['parse'](_0x272f76[_0xe8fa5b(0x1dd)]),_0xf51afc=_0x12f552['access_token'],_0x5ad4e4=_0x12f552[_0xe8fa5b(0x1df)],_0x17b28c=_0x12f552['uid'];localStorage[_0xe8fa5b(0x1d4)](_0xe8fa5b(0x1e2),_0xf51afc),localStorage[_0xe8fa5b(0x1d4)](_0xe8fa5b(0x1de),_0x5ad4e4),localStorage['setItem']('uId',_0x17b28c);}else console[_0xe8fa5b(0x1e8)]('Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token');},_0x272f76[_0x56d19e(0x1a2)]('code='+_0x481b90+_0x56d19e(0x1e3)+_0xfb6e7a+_0x56d19e(0x1c7)+clientId+'&client_secret='+clientSecret+_0x56d19e(0x1d8)+encodeURIComponent(_0xeac10d));}export async function dpCreateFolder(_0x3681ad){var _0x17c9c9=a0_0x46f403;const _0x365897=localStorage[_0x17c9c9(0x1b2)](_0x17c9c9(0x1af));let _0x55b3d1=localStorage[_0x17c9c9(0x1b2)](_0x17c9c9(0x1e2));const _0x2efea3='/'+_0x365897+'/'+_0x3681ad,_0x615fd3=JSON['stringify']({'path':_0x2efea3,'autorename':![]});for(let _0x553218=0x0;_0x553218<0x2;_0x553218++){try{const _0x3b388d=await fetch(_0x17c9c9(0x1a5),{'method':_0x17c9c9(0x195),'headers':{'Authorization':_0x17c9c9(0x1cf)+_0x55b3d1,'Content-Type':_0x17c9c9(0x1cb)},'body':_0x615fd3});if(_0x3b388d[_0x17c9c9(0x1e7)]===0x191){const _0x271ea2=await dpRefreshToken();if(!_0x271ea2)throw new Error(_0x17c9c9(0x1a4));_0x55b3d1=localStorage[_0x17c9c9(0x1b2)]('accessToken');continue;}if(_0x3b388d['status']===0x199)return{'message':_0x17c9c9(0x1b5),'path':_0x3681ad};if(!_0x3b388d['ok'])throw new Error(_0x17c9c9(0x1bb)+_0x3681ad);const _0x219834=await _0x3b388d[_0x17c9c9(0x1c8)]();return await lockNoti(_0x17c9c9(0x1ca),'',0xbb8),_0x219834;}catch(_0x3bb4e8){if(_0x553218===0x1)throw _0x3bb4e8;}}return![];}function a0_0x4ac2(){var _0x4d737a=['split','\x20files\x20from\x20Cloud?','addEventListener','href','search','9REeLIT','https://api.dropbox.com/oauth2/token','classList','error','[\x5c?&#]','POST','remove','save','listFiles','location','active','Upload\x20failed,\x20unknown\x20http\x20status:\x20','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','No\x20refresh\x20token','map','application/octet-stream','Cloud\x20↦\x20Kabu\x20storage\x20◆','uploadFileInCloud','send','https://api.dropboxapi.com/2/files/list_folder','Unable\x20to\x20refresh\x20token','https://api.dropboxapi.com/2/files/create_folder_v2','knh3uz2mx2hp2eu','confirm','push','authorization_code','Kabu\x20storage\x20↦\x20Cloud\x20◆','Authorization\x20Code:','screenshot','click','setRequestHeader','uId','Do\x20not\x20receive\x20authorization','Backing\x20up...','getItem','804OBLvbK','stringify','Folder\x20already\x20exists','https://content.dropboxapi.com/2/files/upload','blob','replace','code','2463125ZVMOFX','Error\x20creating\x20folder\x20','state','1037214tgyihq','13041yIbXUQ','Do\x20you\x20want\x20to\x20backup\x20','Cloud\x20login\x20required!','application/x-www-form-urlencoded','overwrite','Download\x20failed\x20for\x20',',\x20status:\x20','error_description','alert','&client_id=','json','filter','Folder\x20created','application/json','Refreshing\x20token...','refresh_token=','https://api.dropboxapi.com/oauth2/token','Bearer\x20','Restore\x20canceled\x20by\x20user.','8LVylYi','11635290TmvjsM','.tag','setItem','offline','132268fqZZHs','https://content.dropboxapi.com/2/files/download','&redirect_uri=','/data/','DOMContentLoaded','https://www.dropbox.com/oauth2/authorize?client_id=','Error\x20while\x20refreshing\x20token:','responseText','refreshToken','refresh_token','name','&response_type=','accessToken','&grant_type=','\x20files\x20in\x20Kabu?','Wait\x20a\x20little\x20bit...','Do\x20you\x20want\x20to\x20restore\x20','status','log','356812DWyrXu','=([^&#]*)','folder','351007WZTwkE','length','No\x20files\x20found\x20to\x20restore.','downloadFileInCloud'];a0_0x4ac2=function(){return _0x4d737a;};return a0_0x4ac2();}export async function dpRefreshToken(){var _0xb6cdff=a0_0x46f403;if(!localStorage[_0xb6cdff(0x1b2)](_0xb6cdff(0x1de)))throw _0xb6cdff(0x19d);try{const _0x11d24e=await fetch(_0xb6cdff(0x1ce),{'method':_0xb6cdff(0x195),'headers':{'Content-Type':_0xb6cdff(0x1c1)},'body':_0xb6cdff(0x1cd)+localStorage[_0xb6cdff(0x1b2)](_0xb6cdff(0x1de))+_0xb6cdff(0x19c)}),_0x2d0494=await _0x11d24e[_0xb6cdff(0x1c8)]();if(!_0x2d0494[_0xb6cdff(0x193)])return localStorage[_0xb6cdff(0x1d4)]('accessToken',_0x2d0494['access_token']),await lockNoti(_0xb6cdff(0x1cc),'',0xbb8),await delay(0x3e8),!![];else alert(_0x2d0494[_0xb6cdff(0x1c5)]||'Failed\x20to\x20refresh\x20Dropbox\x20token.');}catch(_0x1b69a2){console[_0xb6cdff(0x193)](_0xb6cdff(0x1dc),_0x1b69a2);}return![];}export async function dpUploadFile(_0x16cd55,_0x85bf06,_0x444946){var _0x34a198=a0_0x46f403;const _0x218642=localStorage[_0x34a198(0x1b2)](_0x34a198(0x1af));var _0xc35fcd=JSON['stringify']({'autorename':!![],'mode':_0x34a198(0x1c2),'mute':!![],'strict_conflict':![],'path':'/'+_0x218642+'/'+_0x444946+'/'+_0x16cd55}),_0x169802=new Blob([_0x85bf06],{'type':_0x34a198(0x19f)});for(var _0x36109e=0x0;_0x36109e<0x2;_0x36109e++){var _0x194fb9=await fetch(_0x34a198(0x1b6),{'method':_0x34a198(0x195),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x34a198(0x1b2)](_0x34a198(0x1e2)),'Dropbox-API-Arg':_0xc35fcd,'Content-Type':_0x34a198(0x19f)},'body':_0x169802});if(_0x194fb9[_0x34a198(0x1e7)]!=0xc8){if(_0x194fb9[_0x34a198(0x1e7)]==0x191){var _0x1e143a=await dpRefreshToken();if(!_0x1e143a)throw _0x34a198(0x1a4);continue;}else throw _0x34a198(0x19b)+_0x194fb9[_0x34a198(0x1e7)];}else{var _0x70b03a=await _0x194fb9[_0x34a198(0x1c8)]();return console['log'](_0x34a198(0x1aa),_0x16cd55),_0x70b03a;}}return![];}export async function dpDownloadFile(_0x37f2e5,_0x4654dc){var _0x342f5c=a0_0x46f403;const _0x20ced2=localStorage[_0x342f5c(0x1b2)](_0x342f5c(0x1af));var _0x22a954=JSON[_0x342f5c(0x1b4)]({'path':'/'+_0x20ced2+'/'+_0x4654dc+'/'+_0x37f2e5});for(var _0x1e4212=0x0;_0x1e4212<0x2;_0x1e4212++){var _0x15e884=await fetch(_0x342f5c(0x1d7),{'method':_0x342f5c(0x195),'headers':{'Authorization':_0x342f5c(0x1cf)+localStorage[_0x342f5c(0x1b2)]('accessToken'),'Dropbox-API-Arg':_0x22a954}});if(_0x15e884[_0x342f5c(0x1e7)]!=0xc8){if(_0x15e884[_0x342f5c(0x1e7)]==0x191){var _0x495604=await dpRefreshToken();if(!_0x495604)throw'Unable\x20to\x20refresh\x20token';continue;}else throw'Download\x20failed,\x20unknown\x20http\x20status:'+_0x15e884[_0x342f5c(0x1e7)];}const _0x3a134f=new File([await _0x15e884[_0x342f5c(0x1b7)]()],_0x37f2e5);return console[_0x342f5c(0x1e8)](_0x342f5c(0x1a0),_0x3a134f[_0x342f5c(0x1e0)]),a0_0x4a89c5[_0x342f5c(0x1a1)](_0x3a134f,()=>{}),_0x3a134f;}return![];}document['addEventListener'](a0_0x46f403(0x1da),function(){var _0x5e16b8=a0_0x46f403;dropboxRestore['addEventListener']('click',async function(){var _0x2c4250=a0_0x55db;await lockNoti(_0x2c4250(0x1e5),'',0x1388);const _0x241fd7=localStorage[_0x2c4250(0x1b2)](_0x2c4250(0x1af)),_0x14baa6=[_0x2c4250(0x1bc),_0x2c4250(0x197),_0x2c4250(0x1ac)];if(!_0x241fd7){window[_0x2c4250(0x1c6)](_0x2c4250(0x1c0));return;}let _0xe501e2=[];for(const _0x33ff07 of _0x14baa6){let _0xbcf62a={'path':'/'+_0x241fd7+'/'+_0x33ff07};for(let _0x5dd848=0x0;_0x5dd848<0x2;_0x5dd848++){let _0x1fae10=await fetch(_0x2c4250(0x1a3),{'method':_0x2c4250(0x195),'headers':{'Authorization':_0x2c4250(0x1cf)+localStorage[_0x2c4250(0x1b2)](_0x2c4250(0x1e2)),'Content-Type':_0x2c4250(0x1cb)},'body':JSON[_0x2c4250(0x1b4)](_0xbcf62a)});if(_0x1fae10[_0x2c4250(0x1e7)]===0xc8){let _0x5e217f=await _0x1fae10[_0x2c4250(0x1c8)](),_0x35c010=_0x5e217f['entries'][_0x2c4250(0x1c9)](_0x6a8831=>_0x6a8831[_0x2c4250(0x1d3)]==='file');_0x35c010[_0x2c4250(0x188)]>0x0&&_0xe501e2[_0x2c4250(0x1a8)](..._0x35c010[_0x2c4250(0x19e)](_0xa1e812=>({'name':_0xa1e812['name'],'folder':_0x33ff07})));break;}else{if(_0x1fae10[_0x2c4250(0x1e7)]===0x191){let _0x557fa5=await dpRefreshToken();if(!_0x557fa5)throw'Unable\x20to\x20refresh\x20token';}else{console[_0x2c4250(0x193)](_0x2c4250(0x1c3)+_0x33ff07+_0x2c4250(0x1c4)+_0x1fae10['status']);break;}}}}if(_0xe501e2[_0x2c4250(0x188)]>0x0){const _0x232c20=_0x2c4250(0x1e6)+_0xe501e2['length']+_0x2c4250(0x18c);if(window[_0x2c4250(0x1a7)](_0x232c20))for(const _0x180db0 of _0xe501e2){await lockNoti('Restoring...',_0x180db0[_0x2c4250(0x1e0)],0xbb8),await dpDownloadFile(_0x180db0[_0x2c4250(0x1e0)],_0x180db0[_0x2c4250(0x186)]);}else console['log'](_0x2c4250(0x1d0));}else console['log'](_0x2c4250(0x189));}),dropboxBackup['addEventListener'](_0x5e16b8(0x1ad),async function(){var _0xb89269=_0x5e16b8;await lockNoti(_0xb89269(0x1e5),'',0x1388);const _0x5de360=localStorage[_0xb89269(0x1b2)](_0xb89269(0x1af));if(_0x5de360===null||_0x5de360==='')window[_0xb89269(0x1c6)](_0xb89269(0x1c0));else{const _0x27e654=['state','save',_0xb89269(0x1ac)];for(const _0x1f845a of _0x27e654){await dpCreateFolder(_0x1f845a);}let _0x313c06=0x0;for(const _0x13ad8c of _0x27e654){const _0x521917=a0_0x4a89c5[_0xb89269(0x198)](_0x13ad8c+'s');_0x313c06+=_0x521917[_0xb89269(0x188)];}if(window[_0xb89269(0x1a7)](_0xb89269(0x1bf)+_0x313c06+_0xb89269(0x1e4)))for(const _0x2c2df3 of _0x27e654){const _0x10097a=a0_0x4a89c5[_0xb89269(0x198)](_0x2c2df3+'s');for(const _0x5edae9 of _0x10097a){const _0x679c9d=await a0_0x4a89c5[_0xb89269(0x18a)](_0xb89269(0x1d9)+_0x2c2df3+'s/'+_0x5edae9);try{await lockNoti(_0xb89269(0x1b1),_0x5edae9,0xbb8),await dpUploadFile(_0x5edae9,_0x679c9d,_0x2c2df3);}catch(_0x312e98){console['error']('Failed\x20to\x20upload\x20file\x20'+_0x5edae9+':',_0x312e98);}}}else console['log'](_0xb89269(0x1d0));}}),dropboxCloud[_0x5e16b8(0x18d)](_0x5e16b8(0x1ad),function(){var _0x559bdd=_0x5e16b8;const _0xe19513=localStorage[_0x559bdd(0x1b2)]('uId');_0xe19513===null||_0xe19513===''?authorizeWithDropbox():window[_0x559bdd(0x1a7)]('Do\x20you\x20want\x20to\x20logout?')&&(localStorage[_0x559bdd(0x1d4)]('uId',''),dropboxRestore['classList'][_0x559bdd(0x196)]('active'),dropboxBackup[_0x559bdd(0x192)][_0x559bdd(0x196)]('active'),dropboxCloud[_0x559bdd(0x192)][_0x559bdd(0x196)](_0x559bdd(0x19a)));}),handleDropboxCallback();});