var a0_0x5a9c60=a0_0x356c;(function(_0x1629a2,_0x1843e6){var _0x5c8474=a0_0x356c,_0x16eb16=_0x1629a2();while(!![]){try{var _0x59a514=-parseInt(_0x5c8474(0x182))/0x1*(parseInt(_0x5c8474(0x17a))/0x2)+-parseInt(_0x5c8474(0x170))/0x3*(parseInt(_0x5c8474(0x176))/0x4)+-parseInt(_0x5c8474(0x1a6))/0x5*(-parseInt(_0x5c8474(0x183))/0x6)+-parseInt(_0x5c8474(0x1bd))/0x7*(-parseInt(_0x5c8474(0x1b0))/0x8)+-parseInt(_0x5c8474(0x199))/0x9*(-parseInt(_0x5c8474(0x19f))/0xa)+parseInt(_0x5c8474(0x194))/0xb+parseInt(_0x5c8474(0x16e))/0xc*(-parseInt(_0x5c8474(0x1cf))/0xd);if(_0x59a514===_0x1843e6)break;else _0x16eb16['push'](_0x16eb16['shift']());}catch(_0x2a8385){_0x16eb16['push'](_0x16eb16['shift']());}}}(a0_0x1a05,0xab05f));import*as a0_0x43ac6f from'./main.js';import{localStorageFile}from'./storage.js';var clientId='knh3uz2mx2hp2eu',clientSecret=a0_0x5a9c60(0x1b7);function authorizeWithDropbox(){var _0x5b3822=a0_0x5a9c60,_0x5abfe9=window[_0x5b3822(0x188)][_0x5b3822(0x186)]['split']('?')[0x0],_0xfbdec8=_0x5b3822(0x178),_0x2d1689=_0x5b3822(0x1aa),_0x12bfe2=_0x5b3822(0x1c3)+clientId+_0x5b3822(0x1b8)+_0xfbdec8+_0x5b3822(0x16f)+_0x2d1689+_0x5b3822(0x18a)+encodeURIComponent(_0x5abfe9);window[_0x5b3822(0x188)][_0x5b3822(0x186)]=_0x12bfe2;}function handleDropboxCallback(){var _0x48dd5e=a0_0x5a9c60,_0x558cad=getUrlParameter(_0x48dd5e(0x178));_0x558cad?(getAccessToken(_0x558cad),console[_0x48dd5e(0x18c)](_0x48dd5e(0x19d),_0x558cad)):console[_0x48dd5e(0x18c)]('Do\x20not\x20receive\x20authorization');}function a0_0x356c(_0x31769b,_0x2afd00){var _0x1a0563=a0_0x1a05();return a0_0x356c=function(_0x356cae,_0xc76e7d){_0x356cae=_0x356cae-0x16c;var _0x5acd3d=_0x1a0563[_0x356cae];return _0x5acd3d;},a0_0x356c(_0x31769b,_0x2afd00);}function getUrlParameter(_0x10ea92){var _0x3f8de5=a0_0x5a9c60;_0x10ea92=_0x10ea92['replace'](/[\[]/,'\x5c[')['replace'](/[\]]/,'\x5c]');var _0x27d91c=new RegExp(_0x3f8de5(0x1ad)+_0x10ea92+_0x3f8de5(0x1d2)),_0x1e8699=_0x27d91c[_0x3f8de5(0x17c)](location['search']);return _0x1e8699===null?'':decodeURIComponent(_0x1e8699[0x1]['replace'](/\+/g,'\x20'));}function getAccessToken(_0x18285f){var _0x1ce208=a0_0x5a9c60,_0x577e2a='authorization_code',_0x231725=window['location']['href'][_0x1ce208(0x1ba)]('?')[0x0],_0x56ce09=new XMLHttpRequest();_0x56ce09[_0x1ce208(0x1b1)](_0x1ce208(0x175),_0x1ce208(0x1a1)),_0x56ce09[_0x1ce208(0x1c7)](_0x1ce208(0x1af),_0x1ce208(0x177)),_0x56ce09['onload']=function(){var _0x4193ca=_0x1ce208;if(_0x56ce09['status']===0xc8){var _0x58e46d=JSON['parse'](_0x56ce09['responseText']),_0xc54ecb=_0x58e46d[_0x4193ca(0x196)],_0x4defa3=_0x58e46d[_0x4193ca(0x190)],_0x215f7a=_0x58e46d[_0x4193ca(0x1a4)];localStorage['setItem'](_0x4193ca(0x172),_0xc54ecb),localStorage[_0x4193ca(0x1b5)](_0x4193ca(0x1cc),_0x4defa3),localStorage[_0x4193ca(0x1b5)]('uId',_0x215f7a);}else console[_0x4193ca(0x18c)]('Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token');},_0x56ce09[_0x1ce208(0x17b)](_0x1ce208(0x173)+_0x18285f+_0x1ce208(0x19a)+_0x577e2a+_0x1ce208(0x1d3)+clientId+'&client_secret='+clientSecret+_0x1ce208(0x18a)+encodeURIComponent(_0x231725));}export async function dpCreateFolder(_0x3c19ff){var _0x23da72=a0_0x5a9c60;const _0x5162bd=localStorage[_0x23da72(0x1b2)](_0x23da72(0x1a8));let _0x397c33=localStorage[_0x23da72(0x1b2)](_0x23da72(0x172));const _0x1f267d='/'+_0x5162bd+'/'+_0x3c19ff,_0x2d5cce=JSON[_0x23da72(0x17e)]({'path':_0x1f267d,'autorename':![]});for(let _0x2b3786=0x0;_0x2b3786<0x2;_0x2b3786++){try{const _0x360a6f=await fetch(_0x23da72(0x1d0),{'method':'POST','headers':{'Authorization':_0x23da72(0x1a2)+_0x397c33,'Content-Type':_0x23da72(0x198)},'body':_0x2d5cce});if(_0x360a6f[_0x23da72(0x1a9)]===0x191){const _0x66f654=await dpRefreshToken();if(!_0x66f654)throw new Error('Unable\x20to\x20refresh\x20token');_0x397c33=localStorage[_0x23da72(0x1b2)](_0x23da72(0x172));continue;}if(_0x360a6f['status']===0x199)return{'message':_0x23da72(0x16d),'path':_0x3c19ff};if(!_0x360a6f['ok'])throw new Error('Error\x20creating\x20folder\x20'+_0x3c19ff);const _0x1fab41=await _0x360a6f[_0x23da72(0x1c9)]();return await lockNoti(_0x23da72(0x1d1),'',0xbb8),_0x1fab41;}catch(_0x5cd799){if(_0x2b3786===0x1)throw _0x5cd799;}}return![];}export async function dpRefreshToken(){var _0x5e259c=a0_0x5a9c60;if(!localStorage['getItem'](_0x5e259c(0x1cc)))throw _0x5e259c(0x1a3);try{const _0xc0c5c3=await fetch(_0x5e259c(0x18d),{'method':_0x5e259c(0x175),'headers':{'Content-Type':_0x5e259c(0x177)},'body':_0x5e259c(0x1a7)+localStorage[_0x5e259c(0x1b2)](_0x5e259c(0x1cc))+'&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31'}),_0x270460=await _0xc0c5c3[_0x5e259c(0x1c9)]();if(!_0x270460[_0x5e259c(0x185)])return localStorage[_0x5e259c(0x1b5)](_0x5e259c(0x172),_0x270460[_0x5e259c(0x196)]),await lockNoti(_0x5e259c(0x18b),'',0xbb8),await delay(0x3e8),!![];else alert(_0x270460['error_description']||_0x5e259c(0x1b9));}catch(_0x1841a6){console[_0x5e259c(0x185)]('Error\x20while\x20refreshing\x20token:',_0x1841a6);}return![];}export async function dpUploadFile(_0x53633c,_0x26188a,_0x299bed){var _0x1fd02b=a0_0x5a9c60;const _0x2d58cb=localStorage[_0x1fd02b(0x1b2)]('uId');var _0x3ab7f9=JSON['stringify']({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x2d58cb+'/'+_0x299bed+'/'+_0x53633c}),_0x3e7cde=new Blob([_0x26188a],{'type':_0x1fd02b(0x192)});for(var _0x93ae17=0x0;_0x93ae17<0x2;_0x93ae17++){var _0x544435=await fetch(_0x1fd02b(0x1be),{'method':_0x1fd02b(0x175),'headers':{'Authorization':_0x1fd02b(0x1a2)+localStorage[_0x1fd02b(0x1b2)](_0x1fd02b(0x172)),'Dropbox-API-Arg':_0x3ab7f9,'Content-Type':_0x1fd02b(0x192)},'body':_0x3e7cde});if(_0x544435['status']!=0xc8){if(_0x544435[_0x1fd02b(0x1a9)]==0x191){var _0x304563=await dpRefreshToken();if(!_0x304563)throw _0x1fd02b(0x1b4);continue;}else throw _0x1fd02b(0x1a0)+_0x544435[_0x1fd02b(0x1a9)];}else{var _0x5caba7=await _0x544435[_0x1fd02b(0x1c9)]();return console[_0x1fd02b(0x18c)](_0x1fd02b(0x17f),_0x53633c),_0x5caba7;}}return![];}export async function dpDownloadFile(_0x3cc13f,_0x3ae00a){var _0x4bfd91=a0_0x5a9c60;const _0x20e7d6=localStorage[_0x4bfd91(0x1b2)](_0x4bfd91(0x1a8));var _0x57442b=JSON[_0x4bfd91(0x17e)]({'path':'/'+_0x20e7d6+'/'+_0x3ae00a+'/'+_0x3cc13f});for(var _0x49013f=0x0;_0x49013f<0x2;_0x49013f++){var _0x23d23c=await fetch(_0x4bfd91(0x19c),{'method':'POST','headers':{'Authorization':_0x4bfd91(0x1a2)+localStorage['getItem'](_0x4bfd91(0x172)),'Dropbox-API-Arg':_0x57442b}});if(_0x23d23c[_0x4bfd91(0x1a9)]!=0xc8){if(_0x23d23c[_0x4bfd91(0x1a9)]==0x191){var _0x144c2a=await dpRefreshToken();if(!_0x144c2a)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x4bfd91(0x1c8)+_0x23d23c[_0x4bfd91(0x1a9)];}const _0x3fef7e=new File([await _0x23d23c[_0x4bfd91(0x1ab)]()],_0x3cc13f);return console[_0x4bfd91(0x18c)](_0x4bfd91(0x179),_0x3fef7e[_0x4bfd91(0x1c4)]),a0_0x43ac6f[_0x4bfd91(0x187)](_0x3fef7e,()=>{localStorageFile(),Module['FSSync']();}),_0x3fef7e;}return![];}document['addEventListener'](a0_0x5a9c60(0x180),function(){var _0x372929=a0_0x5a9c60;dropboxRestore[_0x372929(0x174)](_0x372929(0x16c),async function(){var _0x576e96=_0x372929;await lockNoti(_0x576e96(0x191),'',0x1388);const _0x823561=localStorage[_0x576e96(0x1b2)]('uId'),_0x39487f=['state',_0x576e96(0x1ae),_0x576e96(0x1c2)];if(!_0x823561){window[_0x576e96(0x171)]('Cloud\x20login\x20required!');return;}let _0x1bab9d=[];for(const _0x57a3f2 of _0x39487f){let _0xac1318={'path':'/'+_0x823561+'/'+_0x57a3f2};for(let _0x110068=0x0;_0x110068<0x2;_0x110068++){let _0x2318cc=await fetch(_0x576e96(0x19b),{'method':_0x576e96(0x175),'headers':{'Authorization':'Bearer\x20'+localStorage['getItem'](_0x576e96(0x172)),'Content-Type':_0x576e96(0x198)},'body':JSON[_0x576e96(0x17e)](_0xac1318)});if(_0x2318cc['status']===0xc8){let _0x3d4468=await _0x2318cc[_0x576e96(0x1c9)](),_0x409bb4=_0x3d4468[_0x576e96(0x18f)][_0x576e96(0x189)](_0x5c1e44=>_0x5c1e44[_0x576e96(0x1c6)]===_0x576e96(0x1d4));_0x409bb4[_0x576e96(0x19e)]>0x0&&_0x1bab9d[_0x576e96(0x1b3)](..._0x409bb4[_0x576e96(0x195)](_0x320533=>({'name':_0x320533[_0x576e96(0x1c4)],'folder':_0x57a3f2})));break;}else{if(_0x2318cc[_0x576e96(0x1a9)]===0x191){let _0x3f1781=await dpRefreshToken();if(!_0x3f1781)throw _0x576e96(0x1b4);}else{console[_0x576e96(0x185)](_0x576e96(0x18e)+_0x57a3f2+',\x20status:\x20'+_0x2318cc['status']);break;}}}}if(_0x1bab9d[_0x576e96(0x19e)]>0x0){const _0x3a60ac=_0x576e96(0x1c1)+_0x1bab9d['length']+'\x20files\x20from\x20Cloud?';if(window[_0x576e96(0x1cb)](_0x3a60ac))for(const _0x4fd4c7 of _0x1bab9d){await lockNoti(_0x576e96(0x1cd),_0x4fd4c7[_0x576e96(0x1c4)],0xbb8),await dpDownloadFile(_0x4fd4c7[_0x576e96(0x1c4)],_0x4fd4c7['folder']);}else console[_0x576e96(0x18c)](_0x576e96(0x184));}else console[_0x576e96(0x18c)](_0x576e96(0x1ac));}),dropboxBackup[_0x372929(0x174)]('click',async function(){var _0x495443=_0x372929;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x1437e0=localStorage[_0x495443(0x1b2)]('uId');if(_0x1437e0===null||_0x1437e0==='')window[_0x495443(0x171)](_0x495443(0x17d));else{const _0x416b28=['state',_0x495443(0x1ae),_0x495443(0x1c2)];for(const _0x339a56 of _0x416b28){await dpCreateFolder(_0x339a56);}let _0x39c9e8=0x0;for(const _0x26644b of _0x416b28){const _0x21ed49=a0_0x43ac6f['list'+(_0x26644b[_0x495443(0x193)](0x0)['toUpperCase']()+_0x26644b[_0x495443(0x197)](0x1))]();_0x39c9e8+=_0x21ed49['length'];}if(window['confirm']('Do\x20you\x20want\x20to\x20backup\x20'+_0x39c9e8+_0x495443(0x1c5)))for(const _0x483c9c of _0x416b28){const _0x1d275c=a0_0x43ac6f[_0x495443(0x181)+(_0x483c9c['charAt'](0x0)['toUpperCase']()+_0x483c9c[_0x495443(0x197)](0x1))]();for(const _0x2d5cdc of _0x1d275c){const _0x4754bd=await a0_0x43ac6f[_0x495443(0x1ca)](_0x495443(0x1b6)+_0x483c9c+'s/'+_0x2d5cdc);try{await lockNoti(_0x495443(0x1ce),_0x2d5cdc,0xbb8),await dpUploadFile(_0x2d5cdc,_0x4754bd,_0x483c9c);}catch(_0x3e2b34){console['error'](_0x495443(0x1c0)+_0x2d5cdc+':',_0x3e2b34);}}}else console[_0x495443(0x18c)](_0x495443(0x184));}}),dropboxCloud[_0x372929(0x174)](_0x372929(0x16c),function(){var _0x3040a5=_0x372929;const _0x402ae9=localStorage[_0x3040a5(0x1b2)](_0x3040a5(0x1a8));_0x402ae9===null||_0x402ae9===''?authorizeWithDropbox():window[_0x3040a5(0x1cb)](_0x3040a5(0x1bc))&&(localStorage[_0x3040a5(0x1b5)](_0x3040a5(0x1a8),''),dropboxRestore[_0x3040a5(0x1bb)][_0x3040a5(0x1a5)](_0x3040a5(0x1bf)),dropboxBackup[_0x3040a5(0x1bb)][_0x3040a5(0x1a5)](_0x3040a5(0x1bf)),dropboxCloud[_0x3040a5(0x1bb)][_0x3040a5(0x1a5)]('active'));}),handleDropboxCallback();});function a0_0x1a05(){var _0x38e04e=['save','Content-Type','108104iQjCqs','open','getItem','push','Unable\x20to\x20refresh\x20token','setItem','/data/','nwb3dnfh09rhs31','&response_type=','Failed\x20to\x20refresh\x20Dropbox\x20token.','split','classList','Do\x20you\x20want\x20to\x20logout?','175TrtvHx','https://content.dropboxapi.com/2/files/upload','active','Failed\x20to\x20upload\x20file\x20','Do\x20you\x20want\x20to\x20restore\x20','screenshot','https://www.dropbox.com/oauth2/authorize?client_id=','name','\x20files\x20in\x20Kabu?','.tag','setRequestHeader','Download\x20failed,\x20unknown\x20http\x20status:','json','downloadFileInCloud','confirm','refreshToken','Restoring...','Backing\x20up...','2509hSEwBs','https://api.dropboxapi.com/2/files/create_folder_v2','Folder\x20created','=([^&#]*)','&client_id=','file','click','Folder\x20already\x20exists','74988CmRPDb','&token_access_type=','249WbCYyK','alert','accessToken','code=','addEventListener','POST','21052xBsOIn','application/x-www-form-urlencoded','code','Cloud\x20↦\x20Kabu\x20storage\x20◆','6uhvRiE','send','exec','Cloud\x20login\x20required!','stringify','Kabu\x20storage\x20↦\x20Cloud\x20◆','DOMContentLoaded','list','20869OZvubw','234Todejq','Restore\x20canceled\x20by\x20user.','error','href','uploadFileInCloud','location','filter','&redirect_uri=','Refreshing\x20token...','log','https://api.dropboxapi.com/oauth2/token','Download\x20failed\x20for\x20','entries','refresh_token','Wait\x20a\x20little\x20bit...','application/octet-stream','charAt','5725896BSAGAN','map','access_token','slice','application/json','567vbIsze','&grant_type=','https://api.dropboxapi.com/2/files/list_folder','https://content.dropboxapi.com/2/files/download','Authorization\x20Code:','length','213690AnXgyw','Upload\x20failed,\x20unknown\x20http\x20status:\x20','https://api.dropbox.com/oauth2/token','Bearer\x20','No\x20refresh\x20token','uid','remove','25820ywbRIn','refresh_token=','uId','status','offline','blob','No\x20files\x20found\x20to\x20restore.','[\x5c?&#]'];a0_0x1a05=function(){return _0x38e04e;};return a0_0x1a05();}