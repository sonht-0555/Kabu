function a0_0x1a86(){var _0x58d2e0=['code=','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','No\x20files\x20found\x20to\x20restore.','8mdSEdQ','https://www.dropbox.com/oauth2/authorize?client_id=','length','save','Failed\x20to\x20upload\x20file\x20','overwrite','replace','knh3uz2mx2hp2eu','&grant_type=','uid','application/x-www-form-urlencoded','refresh_token','onload','FSSync','entries','application/json','Backing\x20up...','status','log','Failed\x20to\x20refresh\x20Dropbox\x20token.','Error\x20creating\x20folder\x20','&token_access_type=','search','accessToken','classList','Unable\x20to\x20refresh\x20token','location','active',',\x20status:\x20','Restore\x20canceled\x20by\x20user.','click','name','parse','Content-Type','Upload\x20failed,\x20unknown\x20http\x20status:\x20','/data/','Cloud\x20login\x20required!','stringify','256aAYbVu','addEventListener','send','filter','href','charAt','&redirect_uri=','list','1241514qMygBw','10345rXMqPg','Authorization\x20Code:','1577607rDlvFF','No\x20refresh\x20token','nwb3dnfh09rhs31','https://content.dropboxapi.com/2/files/download','getItem','\x20files\x20in\x20Kabu?','json','refresh_token=','Folder\x20already\x20exists','error','Download\x20failed,\x20unknown\x20http\x20status:','Do\x20not\x20receive\x20authorization','split','slice','Kabu\x20storage\x20↦\x20Cloud\x20◆','335106bpqfuK','toUpperCase','Bearer\x20','=([^&#]*)','Wait\x20a\x20little\x20bit...','https://api.dropbox.com/oauth2/token','error_description','file','uId','responseText','Do\x20you\x20want\x20to\x20restore\x20','application/octet-stream','2MEfeTv','Do\x20you\x20want\x20to\x20backup\x20','Error\x20while\x20refreshing\x20token:','POST','Cloud\x20↦\x20Kabu\x20storage\x20◆','downloadFileInCloud','confirm','setRequestHeader','open','access_token','https://api.dropboxapi.com/oauth2/token','setItem','exec','refreshToken','Refreshing\x20token...','&client_secret=','288500uHLaZH','1559810RZNsmg','alert','\x20files\x20from\x20Cloud?','6754850amBtYe','Download\x20failed\x20for\x20','remove','https://content.dropboxapi.com/2/files/upload'];a0_0x1a86=function(){return _0x58d2e0;};return a0_0x1a86();}var a0_0x545e06=a0_0x2a41;(function(_0x50d8af,_0x2c613e){var _0x3b5933=a0_0x2a41,_0xfd2c40=_0x50d8af();while(!![]){try{var _0x406c01=parseInt(_0x3b5933(0xfa))/0x1+-parseInt(_0x3b5933(0xea))/0x2*(-parseInt(_0x3b5933(0xcf))/0x3)+parseInt(_0x3b5933(0xc4))/0x4*(-parseInt(_0x3b5933(0xcd))/0x5)+parseInt(_0x3b5933(0xcc))/0x6+parseInt(_0x3b5933(0xfb))/0x7+parseInt(_0x3b5933(0x105))/0x8*(-parseInt(_0x3b5933(0xde))/0x9)+-parseInt(_0x3b5933(0xfe))/0xa;if(_0x406c01===_0x2c613e)break;else _0xfd2c40['push'](_0xfd2c40['shift']());}catch(_0x476c23){_0xfd2c40['push'](_0xfd2c40['shift']());}}}(a0_0x1a86,0x61687));function a0_0x2a41(_0x4e344b,_0x4ced09){var _0x1a8679=a0_0x1a86();return a0_0x2a41=function(_0x2a41c0,_0x25a292){_0x2a41c0=_0x2a41c0-0xae;var _0x3dc07d=_0x1a8679[_0x2a41c0];return _0x3dc07d;},a0_0x2a41(_0x4e344b,_0x4ced09);}import*as a0_0x536139 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x545e06(0x10c),clientSecret=a0_0x545e06(0xd1);function authorizeWithDropbox(){var _0x3898ec=a0_0x545e06,_0x16ab70=window['location']['href'][_0x3898ec(0xdb)]('?')[0x0],_0x2d035e='code',_0x2c9d6e='offline',_0xdd9bb=_0x3898ec(0x106)+clientId+'&response_type='+_0x2d035e+_0x3898ec(0xb3)+_0x2c9d6e+'&redirect_uri='+encodeURIComponent(_0x16ab70);window[_0x3898ec(0xb8)]['href']=_0xdd9bb;}function handleDropboxCallback(){var _0x33959a=a0_0x545e06,_0x1ed06c=getUrlParameter('code');_0x1ed06c?(getAccessToken(_0x1ed06c),console[_0x33959a(0xb0)](_0x33959a(0xce),_0x1ed06c)):console[_0x33959a(0xb0)](_0x33959a(0xda));}function getUrlParameter(_0x57b516){var _0x16c101=a0_0x545e06;_0x57b516=_0x57b516[_0x16c101(0x10b)](/[\[]/,'\x5c[')[_0x16c101(0x10b)](/[\]]/,'\x5c]');var _0x1a685e=new RegExp('[\x5c?&#]'+_0x57b516+_0x16c101(0xe1)),_0x16be09=_0x1a685e[_0x16c101(0xf6)](location[_0x16c101(0xb4)]);return _0x16be09===null?'':decodeURIComponent(_0x16be09[0x1][_0x16c101(0x10b)](/\+/g,'\x20'));}function getAccessToken(_0x48242f){var _0x2c7273=a0_0x545e06,_0x15d01d='authorization_code',_0x31aa25=window[_0x2c7273(0xb8)][_0x2c7273(0xc8)][_0x2c7273(0xdb)]('?')[0x0],_0x31f796=new XMLHttpRequest();_0x31f796[_0x2c7273(0xf2)](_0x2c7273(0xed),_0x2c7273(0xe3)),_0x31f796[_0x2c7273(0xf1)](_0x2c7273(0xbf),_0x2c7273(0x10f)),_0x31f796[_0x2c7273(0x111)]=function(){var _0x4a438f=_0x2c7273;if(_0x31f796['status']===0xc8){var _0x572ef5=JSON[_0x4a438f(0xbe)](_0x31f796[_0x4a438f(0xe7)]),_0xd7c192=_0x572ef5[_0x4a438f(0xf3)],_0x50b4d3=_0x572ef5[_0x4a438f(0x110)],_0x1e3a2c=_0x572ef5[_0x4a438f(0x10e)];localStorage['setItem'](_0x4a438f(0xb5),_0xd7c192),localStorage[_0x4a438f(0xf5)](_0x4a438f(0xf7),_0x50b4d3),localStorage['setItem'](_0x4a438f(0xe6),_0x1e3a2c);}else console[_0x4a438f(0xb0)]('Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token');},_0x31f796[_0x2c7273(0xc6)](_0x2c7273(0x102)+_0x48242f+_0x2c7273(0x10d)+_0x15d01d+'&client_id='+clientId+_0x2c7273(0xf9)+clientSecret+_0x2c7273(0xca)+encodeURIComponent(_0x31aa25));}export async function dpCreateFolder(_0x567f66){var _0x10c252=a0_0x545e06;const _0x3fa1b1=localStorage[_0x10c252(0xd3)](_0x10c252(0xe6));let _0x492ea7=localStorage[_0x10c252(0xd3)]('accessToken');const _0x810e50='/'+_0x3fa1b1+'/'+_0x567f66,_0x4618db=JSON[_0x10c252(0xc3)]({'path':_0x810e50,'autorename':![]});for(let _0x314a90=0x0;_0x314a90<0x2;_0x314a90++){try{const _0x230e57=await fetch('https://api.dropboxapi.com/2/files/create_folder_v2',{'method':'POST','headers':{'Authorization':_0x10c252(0xe0)+_0x492ea7,'Content-Type':_0x10c252(0x114)},'body':_0x4618db});if(_0x230e57[_0x10c252(0xaf)]===0x191){const _0x2e40b6=await dpRefreshToken();if(!_0x2e40b6)throw new Error(_0x10c252(0xb7));_0x492ea7=localStorage[_0x10c252(0xd3)](_0x10c252(0xb5));continue;}if(_0x230e57[_0x10c252(0xaf)]===0x199)return{'message':_0x10c252(0xd7),'path':_0x567f66};if(!_0x230e57['ok'])throw new Error(_0x10c252(0xb2)+_0x567f66);const _0x1e5046=await _0x230e57[_0x10c252(0xd5)]();return await lockNoti('Folder\x20created','',0xbb8),_0x1e5046;}catch(_0x277001){if(_0x314a90===0x1)throw _0x277001;}}return![];}export async function dpRefreshToken(){var _0x524473=a0_0x545e06;if(!localStorage[_0x524473(0xd3)](_0x524473(0xf7)))throw _0x524473(0xd0);try{const _0x2efce1=await fetch(_0x524473(0xf4),{'method':_0x524473(0xed),'headers':{'Content-Type':_0x524473(0x10f)},'body':_0x524473(0xd6)+localStorage[_0x524473(0xd3)]('refreshToken')+_0x524473(0x103)}),_0x33598a=await _0x2efce1[_0x524473(0xd5)]();if(!_0x33598a[_0x524473(0xd8)])return localStorage[_0x524473(0xf5)](_0x524473(0xb5),_0x33598a[_0x524473(0xf3)]),await lockNoti(_0x524473(0xf8),'',0xbb8),await delay(0x3e8),!![];else alert(_0x33598a[_0x524473(0xe4)]||_0x524473(0xb1));}catch(_0x5599c9){console['error'](_0x524473(0xec),_0x5599c9);}return![];}export async function dpUploadFile(_0x11218f,_0x321273,_0x11bec5){var _0xe04738=a0_0x545e06;const _0x31c14d=localStorage['getItem'](_0xe04738(0xe6));var _0x56c354=JSON[_0xe04738(0xc3)]({'autorename':!![],'mode':_0xe04738(0x10a),'mute':!![],'strict_conflict':![],'path':'/'+_0x31c14d+'/'+_0x11bec5+'/'+_0x11218f}),_0x51e830=new Blob([_0x321273],{'type':_0xe04738(0xe9)});for(var _0x4c9f30=0x0;_0x4c9f30<0x2;_0x4c9f30++){var _0x51cd99=await fetch(_0xe04738(0x101),{'method':'POST','headers':{'Authorization':_0xe04738(0xe0)+localStorage[_0xe04738(0xd3)](_0xe04738(0xb5)),'Dropbox-API-Arg':_0x56c354,'Content-Type':_0xe04738(0xe9)},'body':_0x51e830});if(_0x51cd99[_0xe04738(0xaf)]!=0xc8){if(_0x51cd99[_0xe04738(0xaf)]==0x191){var _0x39fa14=await dpRefreshToken();if(!_0x39fa14)throw _0xe04738(0xb7);continue;}else throw _0xe04738(0xc0)+_0x51cd99[_0xe04738(0xaf)];}else{var _0x567aa9=await _0x51cd99[_0xe04738(0xd5)]();return console[_0xe04738(0xb0)](_0xe04738(0xdd),_0x11218f),_0x567aa9;}}return![];}export async function dpDownloadFile(_0x240179,_0x639760){var _0x47345d=a0_0x545e06;const _0xafdb61=localStorage[_0x47345d(0xd3)]('uId');var _0x10fee4=JSON[_0x47345d(0xc3)]({'path':'/'+_0xafdb61+'/'+_0x639760+'/'+_0x240179});for(var _0x5baffa=0x0;_0x5baffa<0x2;_0x5baffa++){var _0x34ecad=await fetch(_0x47345d(0xd2),{'method':_0x47345d(0xed),'headers':{'Authorization':_0x47345d(0xe0)+localStorage[_0x47345d(0xd3)]('accessToken'),'Dropbox-API-Arg':_0x10fee4}});if(_0x34ecad[_0x47345d(0xaf)]!=0xc8){if(_0x34ecad[_0x47345d(0xaf)]==0x191){var _0x267481=await dpRefreshToken();if(!_0x267481)throw _0x47345d(0xb7);continue;}else throw _0x47345d(0xd9)+_0x34ecad[_0x47345d(0xaf)];}const _0x48c543=new File([await _0x34ecad['blob']()],_0x240179);return console['log'](_0x47345d(0xee),_0x48c543[_0x47345d(0xbd)]),a0_0x536139['uploadFileInCloud'](_0x48c543,()=>{var _0x4505cc=_0x47345d;localStorageFile(),Module[_0x4505cc(0x112)]();}),_0x48c543;}return![];}document[a0_0x545e06(0xc5)]('DOMContentLoaded',function(){var _0x19f717=a0_0x545e06;dropboxRestore[_0x19f717(0xc5)](_0x19f717(0xbc),async function(){var _0x3fc0d2=_0x19f717;await lockNoti(_0x3fc0d2(0xe2),'',0x1388);const _0x308426=localStorage[_0x3fc0d2(0xd3)](_0x3fc0d2(0xe6)),_0x1e2b0e=['state',_0x3fc0d2(0x108),'screenshot'];if(!_0x308426){window['alert'](_0x3fc0d2(0xc2));return;}let _0x3ce631=[];for(const _0x4ec925 of _0x1e2b0e){let _0x1def59={'path':'/'+_0x308426+'/'+_0x4ec925};for(let _0x58f1de=0x0;_0x58f1de<0x2;_0x58f1de++){let _0x5c2035=await fetch('https://api.dropboxapi.com/2/files/list_folder',{'method':_0x3fc0d2(0xed),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x3fc0d2(0xd3)]('accessToken'),'Content-Type':_0x3fc0d2(0x114)},'body':JSON[_0x3fc0d2(0xc3)](_0x1def59)});if(_0x5c2035[_0x3fc0d2(0xaf)]===0xc8){let _0xfc3ec3=await _0x5c2035['json'](),_0x5c825f=_0xfc3ec3[_0x3fc0d2(0x113)][_0x3fc0d2(0xc7)](_0x28d242=>_0x28d242['.tag']===_0x3fc0d2(0xe5));_0x5c825f[_0x3fc0d2(0x107)]>0x0&&_0x3ce631['push'](..._0x5c825f['map'](_0x43284d=>({'name':_0x43284d[_0x3fc0d2(0xbd)],'folder':_0x4ec925})));break;}else{if(_0x5c2035['status']===0x191){let _0x449c79=await dpRefreshToken();if(!_0x449c79)throw _0x3fc0d2(0xb7);}else{console[_0x3fc0d2(0xd8)](_0x3fc0d2(0xff)+_0x4ec925+_0x3fc0d2(0xba)+_0x5c2035[_0x3fc0d2(0xaf)]);break;}}}}if(_0x3ce631[_0x3fc0d2(0x107)]>0x0){const _0x1a27be=_0x3fc0d2(0xe8)+_0x3ce631[_0x3fc0d2(0x107)]+_0x3fc0d2(0xfd);if(window[_0x3fc0d2(0xf0)](_0x1a27be))for(const _0x188f93 of _0x3ce631){await lockNoti('Restoring...',_0x188f93['name'],0xbb8),await dpDownloadFile(_0x188f93[_0x3fc0d2(0xbd)],_0x188f93['folder']);}else console[_0x3fc0d2(0xb0)]('Restore\x20canceled\x20by\x20user.');}else console['log'](_0x3fc0d2(0x104));}),dropboxBackup[_0x19f717(0xc5)](_0x19f717(0xbc),async function(){var _0x465de5=_0x19f717;await lockNoti(_0x465de5(0xe2),'',0x1388);const _0x26bbdc=localStorage['getItem'](_0x465de5(0xe6));if(_0x26bbdc===null||_0x26bbdc==='')window[_0x465de5(0xfc)]('Cloud\x20login\x20required!');else{const _0xff7626=['state','save','screenshot'];for(const _0x492266 of _0xff7626){await dpCreateFolder(_0x492266);}let _0x290b53=0x0;for(const _0x4b1023 of _0xff7626){const _0xa4b4a4=a0_0x536139[_0x465de5(0xcb)+(_0x4b1023[_0x465de5(0xc9)](0x0)[_0x465de5(0xdf)]()+_0x4b1023['slice'](0x1))]();_0x290b53+=_0xa4b4a4[_0x465de5(0x107)];}if(window[_0x465de5(0xf0)](_0x465de5(0xeb)+_0x290b53+_0x465de5(0xd4)))for(const _0x2e5341 of _0xff7626){const _0x4a894d=a0_0x536139[_0x465de5(0xcb)+(_0x2e5341['charAt'](0x0)['toUpperCase']()+_0x2e5341[_0x465de5(0xdc)](0x1))]();for(const _0xd1ff18 of _0x4a894d){const _0x4bdc96=await a0_0x536139[_0x465de5(0xef)](_0x465de5(0xc1)+_0x2e5341+'s/'+_0xd1ff18);try{await lockNoti(_0x465de5(0xae),_0xd1ff18,0xbb8),await dpUploadFile(_0xd1ff18,_0x4bdc96,_0x2e5341);}catch(_0x184482){console[_0x465de5(0xd8)](_0x465de5(0x109)+_0xd1ff18+':',_0x184482);}}}else console[_0x465de5(0xb0)](_0x465de5(0xbb));}}),dropboxCloud[_0x19f717(0xc5)]('click',function(){var _0x385108=_0x19f717;const _0x353f15=localStorage[_0x385108(0xd3)](_0x385108(0xe6));_0x353f15===null||_0x353f15===''?authorizeWithDropbox():window[_0x385108(0xf0)]('Do\x20you\x20want\x20to\x20logout?')&&(localStorage[_0x385108(0xf5)](_0x385108(0xe6),''),dropboxRestore[_0x385108(0xb6)][_0x385108(0x100)](_0x385108(0xb9)),dropboxBackup[_0x385108(0xb6)]['remove']('active'),dropboxCloud['classList'][_0x385108(0x100)](_0x385108(0xb9)));}),handleDropboxCallback();});