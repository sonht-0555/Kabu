function a0_0x110d(){var _0x5da502=['Folder\x20already\x20exists','No\x20files\x20found\x20to\x20restore.','entries','accessToken','Cloud\x20login\x20required!','65fzhAYg','Do\x20you\x20want\x20to\x20backup\x20','setRequestHeader','send',',\x20status:\x20','Content-Type','authorization_code','offline','181086MwmcJd','DOMContentLoaded','Download\x20failed,\x20unknown\x20http\x20status:','location','Refreshing\x20token...','setItem','1813385fPNJoY','getItem','state','remove','FSSync','=([^&#]*)','save','&redirect_uri=','length','application/octet-stream','addEventListener','https://content.dropboxapi.com/2/files/upload','&response_type=','charAt','error_description','3634287ppxQia','error','log','Do\x20you\x20want\x20to\x20logout?','list','slice','overwrite','620145rqunRl','application/x-www-form-urlencoded','Folder\x20created','8EXjjMb','uid','json','toUpperCase','Authorization\x20Code:','uploadFileInCloud','href','Kabu\x20storage\x20↦\x20Cloud\x20◆','refreshToken','refresh_token=','click','https://api.dropbox.com/oauth2/token','confirm','Failed\x20to\x20upload\x20file\x20','Download\x20failed\x20for\x20','Bearer\x20','access_token','knh3uz2mx2hp2eu','filter','map','2804KEGAwy','100THJJgO','uId','[\x5c?&#]','https://www.dropbox.com/oauth2/authorize?client_id=','file','POST','Unable\x20to\x20refresh\x20token','name','status','https://api.dropboxapi.com/2/files/list_folder','parse','stringify','code','Do\x20you\x20want\x20to\x20restore\x20','2807893lDUfcP','active','open','&grant_type=','replace','classList','Error\x20creating\x20folder\x20','screenshot','&token_access_type=','Restore\x20canceled\x20by\x20user.','alert','Cloud\x20↦\x20Kabu\x20storage\x20◆','Error\x20while\x20refreshing\x20token:','folder','311ANhIwK','blob','https://api.dropboxapi.com/2/files/create_folder_v2','Wait\x20a\x20little\x20bit...','4176524HXRwno','Do\x20not\x20receive\x20authorization','search','split','refresh_token','exec','Failed\x20to\x20refresh\x20Dropbox\x20token.','&client_secret='];a0_0x110d=function(){return _0x5da502;};return a0_0x110d();}var a0_0x25f9d5=a0_0x52ce;(function(_0x919db8,_0x2d4985){var _0x3e6d04=a0_0x52ce,_0x1bc0e5=_0x919db8();while(!![]){try{var _0x4c1173=parseInt(_0x3e6d04(0xa0))/0x1*(parseInt(_0x3e6d04(0x83))/0x2)+parseInt(_0x3e6d04(0xce))/0x3+-parseInt(_0x3e6d04(0xa4))/0x4+parseInt(_0x3e6d04(0xb1))/0x5*(parseInt(_0x3e6d04(0xb9))/0x6)+parseInt(_0x3e6d04(0xbf))/0x7*(parseInt(_0x3e6d04(0xd8))/0x8)+parseInt(_0x3e6d04(0xd5))/0x9*(-parseInt(_0x3e6d04(0x84))/0xa)+parseInt(_0x3e6d04(0x92))/0xb;if(_0x4c1173===_0x2d4985)break;else _0x1bc0e5['push'](_0x1bc0e5['shift']());}catch(_0xef43d9){_0x1bc0e5['push'](_0x1bc0e5['shift']());}}}(a0_0x110d,0xc86cd));import*as a0_0x2b7825 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x25f9d5(0x80),clientSecret='nwb3dnfh09rhs31';function a0_0x52ce(_0x5b90b0,_0x2787be){var _0x110dfb=a0_0x110d();return a0_0x52ce=function(_0x52ce8f,_0x72b22b){_0x52ce8f=_0x52ce8f-0x7e;var _0x43e432=_0x110dfb[_0x52ce8f];return _0x43e432;},a0_0x52ce(_0x5b90b0,_0x2787be);}function authorizeWithDropbox(){var _0x2592cc=a0_0x25f9d5,_0x4edea5=window[_0x2592cc(0xbc)][_0x2592cc(0xde)][_0x2592cc(0xa7)]('?')[0x0],_0x952bd3='code',_0x112aea=_0x2592cc(0xb8),_0x49fff3=_0x2592cc(0x87)+clientId+_0x2592cc(0xcb)+_0x952bd3+_0x2592cc(0x9a)+_0x112aea+_0x2592cc(0xc6)+encodeURIComponent(_0x4edea5);window['location'][_0x2592cc(0xde)]=_0x49fff3;}function handleDropboxCallback(){var _0x4ffbd7=a0_0x25f9d5,_0xb9e14b=getUrlParameter(_0x4ffbd7(0x90));_0xb9e14b?(getAccessToken(_0xb9e14b),console[_0x4ffbd7(0xd0)](_0x4ffbd7(0xdc),_0xb9e14b)):console[_0x4ffbd7(0xd0)](_0x4ffbd7(0xa5));}function getUrlParameter(_0x5619ba){var _0x802915=a0_0x25f9d5;_0x5619ba=_0x5619ba[_0x802915(0x96)](/[\[]/,'\x5c[')['replace'](/[\]]/,'\x5c]');var _0xaf7e73=new RegExp(_0x802915(0x86)+_0x5619ba+_0x802915(0xc4)),_0x1aa0b5=_0xaf7e73[_0x802915(0xa9)](location[_0x802915(0xa6)]);return _0x1aa0b5===null?'':decodeURIComponent(_0x1aa0b5[0x1][_0x802915(0x96)](/\+/g,'\x20'));}function getAccessToken(_0x24a9cc){var _0x44ecc7=a0_0x25f9d5,_0x236600=_0x44ecc7(0xb7),_0x5b7e8c=window[_0x44ecc7(0xbc)][_0x44ecc7(0xde)][_0x44ecc7(0xa7)]('?')[0x0],_0x5a8aef=new XMLHttpRequest();_0x5a8aef[_0x44ecc7(0x94)](_0x44ecc7(0x89),_0x44ecc7(0xe3)),_0x5a8aef[_0x44ecc7(0xb3)](_0x44ecc7(0xb6),_0x44ecc7(0xd6)),_0x5a8aef['onload']=function(){var _0x2ed385=_0x44ecc7;if(_0x5a8aef[_0x2ed385(0x8c)]===0xc8){var _0x54cf80=JSON[_0x2ed385(0x8e)](_0x5a8aef['responseText']),_0x2d2144=_0x54cf80['access_token'],_0x48e792=_0x54cf80[_0x2ed385(0xa8)],_0x1a4694=_0x54cf80[_0x2ed385(0xd9)];localStorage[_0x2ed385(0xbe)](_0x2ed385(0xaf),_0x2d2144),localStorage[_0x2ed385(0xbe)]('refreshToken',_0x48e792),localStorage[_0x2ed385(0xbe)]('uId',_0x1a4694);}else console['log']('Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token');},_0x5a8aef[_0x44ecc7(0xb4)]('code='+_0x24a9cc+_0x44ecc7(0x95)+_0x236600+'&client_id='+clientId+_0x44ecc7(0xab)+clientSecret+_0x44ecc7(0xc6)+encodeURIComponent(_0x5b7e8c));}export async function dpCreateFolder(_0x4788c5){var _0x2b0639=a0_0x25f9d5;const _0x15a700=localStorage['getItem'](_0x2b0639(0x85));let _0x1b3e2d=localStorage[_0x2b0639(0xc0)](_0x2b0639(0xaf));const _0x1b195a='/'+_0x15a700+'/'+_0x4788c5,_0x11d4aa=JSON[_0x2b0639(0x8f)]({'path':_0x1b195a,'autorename':![]});for(let _0x1c5c12=0x0;_0x1c5c12<0x2;_0x1c5c12++){try{const _0x466ba1=await fetch(_0x2b0639(0xa2),{'method':_0x2b0639(0x89),'headers':{'Authorization':_0x2b0639(0x7e)+_0x1b3e2d,'Content-Type':'application/json'},'body':_0x11d4aa});if(_0x466ba1['status']===0x191){const _0x51d5c6=await dpRefreshToken();if(!_0x51d5c6)throw new Error('Unable\x20to\x20refresh\x20token');_0x1b3e2d=localStorage[_0x2b0639(0xc0)](_0x2b0639(0xaf));continue;}if(_0x466ba1[_0x2b0639(0x8c)]===0x199)return{'message':_0x2b0639(0xac),'path':_0x4788c5};if(!_0x466ba1['ok'])throw new Error(_0x2b0639(0x98)+_0x4788c5);const _0x233530=await _0x466ba1[_0x2b0639(0xda)]();return await lockNoti(_0x2b0639(0xd7),'',0xbb8),_0x233530;}catch(_0x5258e8){if(_0x1c5c12===0x1)throw _0x5258e8;}}return![];}export async function dpRefreshToken(){var _0x250c29=a0_0x25f9d5;if(!localStorage[_0x250c29(0xc0)](_0x250c29(0xe0)))throw'No\x20refresh\x20token';try{const _0x512e31=await fetch('https://api.dropboxapi.com/oauth2/token',{'method':_0x250c29(0x89),'headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0x250c29(0xe1)+localStorage[_0x250c29(0xc0)](_0x250c29(0xe0))+'&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31'}),_0x3158d1=await _0x512e31[_0x250c29(0xda)]();if(!_0x3158d1[_0x250c29(0xcf)])return localStorage[_0x250c29(0xbe)](_0x250c29(0xaf),_0x3158d1[_0x250c29(0x7f)]),await lockNoti(_0x250c29(0xbd),'',0xbb8),await delay(0x3e8),!![];else alert(_0x3158d1[_0x250c29(0xcd)]||_0x250c29(0xaa));}catch(_0x399d56){console[_0x250c29(0xcf)](_0x250c29(0x9e),_0x399d56);}return![];}export async function dpUploadFile(_0x35c0fc,_0x17b7da,_0x381147){var _0xa2880b=a0_0x25f9d5;const _0x54f2a0=localStorage[_0xa2880b(0xc0)](_0xa2880b(0x85));var _0x5e2626=JSON[_0xa2880b(0x8f)]({'autorename':!![],'mode':_0xa2880b(0xd4),'mute':!![],'strict_conflict':![],'path':'/'+_0x54f2a0+'/'+_0x381147+'/'+_0x35c0fc}),_0x7fb707=new Blob([_0x17b7da],{'type':_0xa2880b(0xc8)});for(var _0x841b1c=0x0;_0x841b1c<0x2;_0x841b1c++){var _0x7f7780=await fetch(_0xa2880b(0xca),{'method':_0xa2880b(0x89),'headers':{'Authorization':_0xa2880b(0x7e)+localStorage['getItem'](_0xa2880b(0xaf)),'Dropbox-API-Arg':_0x5e2626,'Content-Type':_0xa2880b(0xc8)},'body':_0x7fb707});if(_0x7f7780['status']!=0xc8){if(_0x7f7780[_0xa2880b(0x8c)]==0x191){var _0x574976=await dpRefreshToken();if(!_0x574976)throw _0xa2880b(0x8a);continue;}else throw'Upload\x20failed,\x20unknown\x20http\x20status:\x20'+_0x7f7780['status'];}else{var _0x34ebf7=await _0x7f7780[_0xa2880b(0xda)]();return console[_0xa2880b(0xd0)](_0xa2880b(0xdf),_0x35c0fc),_0x34ebf7;}}return![];}export async function dpDownloadFile(_0x1954d8,_0x49cd01){var _0x4d7846=a0_0x25f9d5;const _0x5f521d=localStorage[_0x4d7846(0xc0)](_0x4d7846(0x85));var _0x1687f0=JSON[_0x4d7846(0x8f)]({'path':'/'+_0x5f521d+'/'+_0x49cd01+'/'+_0x1954d8});for(var _0x5f5699=0x0;_0x5f5699<0x2;_0x5f5699++){var _0x5832f7=await fetch('https://content.dropboxapi.com/2/files/download',{'method':'POST','headers':{'Authorization':_0x4d7846(0x7e)+localStorage['getItem'](_0x4d7846(0xaf)),'Dropbox-API-Arg':_0x1687f0}});if(_0x5832f7[_0x4d7846(0x8c)]!=0xc8){if(_0x5832f7[_0x4d7846(0x8c)]==0x191){var _0x39a668=await dpRefreshToken();if(!_0x39a668)throw _0x4d7846(0x8a);continue;}else throw _0x4d7846(0xbb)+_0x5832f7[_0x4d7846(0x8c)];}const _0x242c97=new File([await _0x5832f7[_0x4d7846(0xa1)]()],_0x1954d8);return console['log'](_0x4d7846(0x9d),_0x242c97[_0x4d7846(0x8b)]),a0_0x2b7825[_0x4d7846(0xdd)](_0x242c97,()=>{var _0x9d7f7e=_0x4d7846;localStorageFile(),Module[_0x9d7f7e(0xc3)]();}),_0x242c97;}return![];}document[a0_0x25f9d5(0xc9)](a0_0x25f9d5(0xba),function(){var _0x7ea835=a0_0x25f9d5;dropboxRestore[_0x7ea835(0xc9)]('click',async function(){var _0x2ad7ab=_0x7ea835;await lockNoti(_0x2ad7ab(0xa3),'',0x1388);const _0x4842e5=localStorage['getItem'](_0x2ad7ab(0x85)),_0x4059c2=[_0x2ad7ab(0xc1),'save',_0x2ad7ab(0x99)];if(!_0x4842e5){window[_0x2ad7ab(0x9c)](_0x2ad7ab(0xb0));return;}let _0xd86fae=[];for(const _0x4ad101 of _0x4059c2){let _0x1bfff5={'path':'/'+_0x4842e5+'/'+_0x4ad101};for(let _0x302694=0x0;_0x302694<0x2;_0x302694++){let _0x109fc9=await fetch(_0x2ad7ab(0x8d),{'method':_0x2ad7ab(0x89),'headers':{'Authorization':_0x2ad7ab(0x7e)+localStorage['getItem']('accessToken'),'Content-Type':'application/json'},'body':JSON[_0x2ad7ab(0x8f)](_0x1bfff5)});if(_0x109fc9[_0x2ad7ab(0x8c)]===0xc8){let _0x1184a6=await _0x109fc9[_0x2ad7ab(0xda)](),_0x4a36dc=_0x1184a6[_0x2ad7ab(0xae)][_0x2ad7ab(0x81)](_0x4cebe7=>_0x4cebe7['.tag']===_0x2ad7ab(0x88));_0x4a36dc[_0x2ad7ab(0xc7)]>0x0&&_0xd86fae['push'](..._0x4a36dc[_0x2ad7ab(0x82)](_0x3e5e72=>({'name':_0x3e5e72['name'],'folder':_0x4ad101})));break;}else{if(_0x109fc9['status']===0x191){let _0x601755=await dpRefreshToken();if(!_0x601755)throw _0x2ad7ab(0x8a);}else{console[_0x2ad7ab(0xcf)](_0x2ad7ab(0xe6)+_0x4ad101+_0x2ad7ab(0xb5)+_0x109fc9[_0x2ad7ab(0x8c)]);break;}}}}if(_0xd86fae[_0x2ad7ab(0xc7)]>0x0){const _0x1cfa0b=_0x2ad7ab(0x91)+_0xd86fae['length']+'\x20files\x20from\x20Cloud?';if(window['confirm'](_0x1cfa0b))for(const _0x42e420 of _0xd86fae){await lockNoti('Restoring...',_0x42e420[_0x2ad7ab(0x8b)],0xbb8),await dpDownloadFile(_0x42e420['name'],_0x42e420[_0x2ad7ab(0x9f)]);}else console[_0x2ad7ab(0xd0)](_0x2ad7ab(0x9b));}else console[_0x2ad7ab(0xd0)](_0x2ad7ab(0xad));}),dropboxBackup['addEventListener'](_0x7ea835(0xe2),async function(){var _0x2007dc=_0x7ea835;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x1d298f=localStorage['getItem'](_0x2007dc(0x85));if(_0x1d298f===null||_0x1d298f==='')window[_0x2007dc(0x9c)](_0x2007dc(0xb0));else{const _0x2a3d99=['state',_0x2007dc(0xc5),'screenshot'];for(const _0x3cb2a9 of _0x2a3d99){await dpCreateFolder(_0x3cb2a9);}let _0x32b735=0x0;for(const _0x23f7d0 of _0x2a3d99){const _0xbf3f59=a0_0x2b7825[_0x2007dc(0xd2)+(_0x23f7d0['charAt'](0x0)['toUpperCase']()+_0x23f7d0[_0x2007dc(0xd3)](0x1))]();_0x32b735+=_0xbf3f59[_0x2007dc(0xc7)];}if(window[_0x2007dc(0xe4)](_0x2007dc(0xb2)+_0x32b735+'\x20files\x20in\x20Kabu?'))for(const _0x2bf278 of _0x2a3d99){const _0x328def=a0_0x2b7825['list'+(_0x2bf278[_0x2007dc(0xcc)](0x0)[_0x2007dc(0xdb)]()+_0x2bf278['slice'](0x1))]();for(const _0x1130cf of _0x328def){const _0x30d6b4=await a0_0x2b7825['downloadFileInCloud']('/data/'+_0x2bf278+'s/'+_0x1130cf);try{await lockNoti('Backing\x20up...',_0x1130cf,0xbb8),await dpUploadFile(_0x1130cf,_0x30d6b4,_0x2bf278);}catch(_0x47aa18){console[_0x2007dc(0xcf)](_0x2007dc(0xe5)+_0x1130cf+':',_0x47aa18);}}}else console[_0x2007dc(0xd0)](_0x2007dc(0x9b));}}),dropboxCloud[_0x7ea835(0xc9)](_0x7ea835(0xe2),function(){var _0x188f96=_0x7ea835;const _0xcf2760=localStorage['getItem'](_0x188f96(0x85));_0xcf2760===null||_0xcf2760===''?authorizeWithDropbox():window[_0x188f96(0xe4)](_0x188f96(0xd1))&&(localStorage[_0x188f96(0xbe)](_0x188f96(0x85),''),dropboxRestore[_0x188f96(0x97)][_0x188f96(0xc2)](_0x188f96(0x93)),dropboxBackup['classList'][_0x188f96(0xc2)](_0x188f96(0x93)),dropboxCloud['classList'][_0x188f96(0xc2)]('active'));}),handleDropboxCallback();});