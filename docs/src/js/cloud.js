var a0_0x4d8510=a0_0x33ae;(function(_0x31bb98,_0x21a2fa){var _0x495c98=a0_0x33ae,_0x49907c=_0x31bb98();while(!![]){try{var _0x8e91f2=parseInt(_0x495c98(0x1f4))/0x1*(-parseInt(_0x495c98(0x20e))/0x2)+parseInt(_0x495c98(0x205))/0x3*(-parseInt(_0x495c98(0x244))/0x4)+-parseInt(_0x495c98(0x235))/0x5*(-parseInt(_0x495c98(0x204))/0x6)+-parseInt(_0x495c98(0x1ea))/0x7*(-parseInt(_0x495c98(0x22f))/0x8)+parseInt(_0x495c98(0x23a))/0x9*(parseInt(_0x495c98(0x1e9))/0xa)+parseInt(_0x495c98(0x1e4))/0xb+-parseInt(_0x495c98(0x24b))/0xc*(parseInt(_0x495c98(0x1f0))/0xd);if(_0x8e91f2===_0x21a2fa)break;else _0x49907c['push'](_0x49907c['shift']());}catch(_0x2ed7c9){_0x49907c['push'](_0x49907c['shift']());}}}(a0_0x35d7,0x55ed4));import*as a0_0x413c18 from'./main.js';import{localStorageFile}from'./storage.js';function a0_0x35d7(){var _0x26c81a=['application/octet-stream','8iwcFzz','Wait\x20a\x20little\x20bit...','Content-Type','code','exec','Download\x20failed\x20for\x20','60195VkEMlh','&response_type=','&redirect_uri=','entries','https://content.dropboxapi.com/2/files/upload','370449ICrFOy','https://api.dropboxapi.com/2/files/list_folder','Error\x20creating\x20folder\x20','Unable\x20to\x20refresh\x20token','setRequestHeader',',\x20status:\x20','Failed\x20to\x20upload\x20file\x20','Do\x20you\x20want\x20to\x20restore\x20','code=','remove','12qhKzgf','alert','https://api.dropboxapi.com/oauth2/token','split','screenshot','stringify','send','12GaONCS','uId','Bearer\x20','6459090hiSCnK','Authorization\x20Code:','=([^&#]*)','responseText','.tag','110JMZzpO','1529878brlOmL','name','Failed\x20to\x20refresh\x20Dropbox\x20token.','refreshToken','addEventListener','folder','3575351bwpSKV','[\x5c?&#]','Cloud\x20login\x20required!','offline','1RlLMBy','&client_id=','getItem','Upload\x20failed,\x20unknown\x20http\x20status:\x20','Restoring...','Kabu\x20storage\x20↦\x20Cloud\x20◆','POST','classList','refresh_token=','No\x20files\x20found\x20to\x20restore.','save','length','https://api.dropboxapi.com/2/files/create_folder_v2','open','uploadFileInCloud','overwrite','66Bpedhp','203028LuKqMW','search','confirm','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','downloadFileInCloud','href','Do\x20not\x20receive\x20authorization','location','access_token','1121866OGOyed','json','/data/','application/json','Folder\x20created','https://content.dropboxapi.com/2/files/download','\x20files\x20from\x20Cloud?','Refreshing\x20token...','error','status','No\x20refresh\x20token','blob','Cloud\x20↦\x20Kabu\x20storage\x20◆','click','accessToken','map','https://api.dropbox.com/oauth2/token','DOMContentLoaded','active','file','Restore\x20canceled\x20by\x20user.','state','replace','nwb3dnfh09rhs31','Error\x20while\x20refreshing\x20token:','\x20files\x20in\x20Kabu?','setItem','error_description','log','Do\x20you\x20want\x20to\x20logout?','Download\x20failed,\x20unknown\x20http\x20status:','push'];a0_0x35d7=function(){return _0x26c81a;};return a0_0x35d7();}var clientId='knh3uz2mx2hp2eu',clientSecret=a0_0x4d8510(0x225);function authorizeWithDropbox(){var _0xca2345=a0_0x4d8510,_0x11bb4a=window[_0xca2345(0x20c)][_0xca2345(0x20a)][_0xca2345(0x247)]('?')[0x0],_0x357b59=_0xca2345(0x232),_0x6205a0=_0xca2345(0x1f3),_0x354fd3='https://www.dropbox.com/oauth2/authorize?client_id='+clientId+_0xca2345(0x236)+_0x357b59+'&token_access_type='+_0x6205a0+_0xca2345(0x237)+encodeURIComponent(_0x11bb4a);window[_0xca2345(0x20c)][_0xca2345(0x20a)]=_0x354fd3;}function handleDropboxCallback(){var _0x390a4e=a0_0x4d8510,_0xef4aa8=getUrlParameter(_0x390a4e(0x232));_0xef4aa8?(getAccessToken(_0xef4aa8),console[_0x390a4e(0x22a)](_0x390a4e(0x1e5),_0xef4aa8)):console['log'](_0x390a4e(0x20b));}function getUrlParameter(_0x492589){var _0x135beb=a0_0x4d8510;_0x492589=_0x492589[_0x135beb(0x224)](/[\[]/,'\x5c[')[_0x135beb(0x224)](/[\]]/,'\x5c]');var _0x4bd3f9=new RegExp(_0x135beb(0x1f1)+_0x492589+_0x135beb(0x1e6)),_0x4e0a3f=_0x4bd3f9[_0x135beb(0x233)](location[_0x135beb(0x206)]);return _0x4e0a3f===null?'':decodeURIComponent(_0x4e0a3f[0x1]['replace'](/\+/g,'\x20'));}function getAccessToken(_0x11c8cf){var _0x1a39b9=a0_0x4d8510,_0x4758cc='authorization_code',_0x24dc84=window[_0x1a39b9(0x20c)][_0x1a39b9(0x20a)][_0x1a39b9(0x247)]('?')[0x0],_0x2d9ade=new XMLHttpRequest();_0x2d9ade[_0x1a39b9(0x201)]('POST',_0x1a39b9(0x21e)),_0x2d9ade[_0x1a39b9(0x23e)](_0x1a39b9(0x231),'application/x-www-form-urlencoded'),_0x2d9ade['onload']=function(){var _0x373d38=_0x1a39b9;if(_0x2d9ade[_0x373d38(0x217)]===0xc8){var _0x154c69=JSON['parse'](_0x2d9ade[_0x373d38(0x1e7)]),_0x506921=_0x154c69[_0x373d38(0x20d)],_0x48211d=_0x154c69['refresh_token'],_0x3db42e=_0x154c69['uid'];localStorage[_0x373d38(0x228)](_0x373d38(0x21c),_0x506921),localStorage[_0x373d38(0x228)](_0x373d38(0x1ed),_0x48211d),localStorage[_0x373d38(0x228)](_0x373d38(0x24c),_0x3db42e);}else console[_0x373d38(0x22a)]('Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token');},_0x2d9ade[_0x1a39b9(0x24a)](_0x1a39b9(0x242)+_0x11c8cf+'&grant_type='+_0x4758cc+_0x1a39b9(0x1f5)+clientId+'&client_secret='+clientSecret+_0x1a39b9(0x237)+encodeURIComponent(_0x24dc84));}export async function dpCreateFolder(_0x1eb5ed){var _0x2f8550=a0_0x4d8510;const _0x5b8cf0=localStorage[_0x2f8550(0x1f6)](_0x2f8550(0x24c));let _0x24fe51=localStorage[_0x2f8550(0x1f6)](_0x2f8550(0x21c));const _0x7ff2d2='/'+_0x5b8cf0+'/'+_0x1eb5ed,_0x1e997e=JSON[_0x2f8550(0x249)]({'path':_0x7ff2d2,'autorename':![]});for(let _0x191754=0x0;_0x191754<0x2;_0x191754++){try{const _0x35832a=await fetch(_0x2f8550(0x200),{'method':'POST','headers':{'Authorization':_0x2f8550(0x1e3)+_0x24fe51,'Content-Type':_0x2f8550(0x211)},'body':_0x1e997e});if(_0x35832a[_0x2f8550(0x217)]===0x191){const _0x223e65=await dpRefreshToken();if(!_0x223e65)throw new Error('Unable\x20to\x20refresh\x20token');_0x24fe51=localStorage[_0x2f8550(0x1f6)](_0x2f8550(0x21c));continue;}if(_0x35832a[_0x2f8550(0x217)]===0x199)return{'message':'Folder\x20already\x20exists','path':_0x1eb5ed};if(!_0x35832a['ok'])throw new Error(_0x2f8550(0x23c)+_0x1eb5ed);const _0x14f687=await _0x35832a[_0x2f8550(0x20f)]();return await lockNoti(_0x2f8550(0x212),'',0xbb8),_0x14f687;}catch(_0x3114f9){if(_0x191754===0x1)throw _0x3114f9;}}return![];}export async function dpRefreshToken(){var _0x5a259b=a0_0x4d8510;if(!localStorage[_0x5a259b(0x1f6)](_0x5a259b(0x1ed)))throw _0x5a259b(0x218);try{const _0x3a61a0=await fetch(_0x5a259b(0x246),{'method':_0x5a259b(0x1fa),'headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0x5a259b(0x1fc)+localStorage['getItem'](_0x5a259b(0x1ed))+_0x5a259b(0x208)}),_0x3ecc97=await _0x3a61a0['json']();if(!_0x3ecc97[_0x5a259b(0x216)])return localStorage['setItem'](_0x5a259b(0x21c),_0x3ecc97['access_token']),await lockNoti(_0x5a259b(0x215),'',0xbb8),await delay(0x3e8),!![];else alert(_0x3ecc97[_0x5a259b(0x229)]||_0x5a259b(0x1ec));}catch(_0x5707a1){console[_0x5a259b(0x216)](_0x5a259b(0x226),_0x5707a1);}return![];}export async function dpUploadFile(_0xbece93,_0x4d35f3,_0x40fd09){var _0x2dbbbf=a0_0x4d8510;const _0x27dbe7=localStorage[_0x2dbbbf(0x1f6)](_0x2dbbbf(0x24c));var _0x15de9e=JSON[_0x2dbbbf(0x249)]({'autorename':!![],'mode':_0x2dbbbf(0x203),'mute':!![],'strict_conflict':![],'path':'/'+_0x27dbe7+'/'+_0x40fd09+'/'+_0xbece93}),_0x194aa1=new Blob([_0x4d35f3],{'type':_0x2dbbbf(0x22e)});for(var _0x3c9f90=0x0;_0x3c9f90<0x2;_0x3c9f90++){var _0x3bce15=await fetch(_0x2dbbbf(0x239),{'method':_0x2dbbbf(0x1fa),'headers':{'Authorization':_0x2dbbbf(0x1e3)+localStorage[_0x2dbbbf(0x1f6)](_0x2dbbbf(0x21c)),'Dropbox-API-Arg':_0x15de9e,'Content-Type':'application/octet-stream'},'body':_0x194aa1});if(_0x3bce15[_0x2dbbbf(0x217)]!=0xc8){if(_0x3bce15[_0x2dbbbf(0x217)]==0x191){var _0x1e2ab8=await dpRefreshToken();if(!_0x1e2ab8)throw _0x2dbbbf(0x23d);continue;}else throw _0x2dbbbf(0x1f7)+_0x3bce15[_0x2dbbbf(0x217)];}else{var _0x13d0e0=await _0x3bce15[_0x2dbbbf(0x20f)]();return console[_0x2dbbbf(0x22a)](_0x2dbbbf(0x1f9),_0xbece93),_0x13d0e0;}}return![];}function a0_0x33ae(_0x659405,_0x4f970b){var _0x35d792=a0_0x35d7();return a0_0x33ae=function(_0x33ae19,_0x2b1462){_0x33ae19=_0x33ae19-0x1e3;var _0x1093dd=_0x35d792[_0x33ae19];return _0x1093dd;},a0_0x33ae(_0x659405,_0x4f970b);}export async function dpDownloadFile(_0x9360b4,_0x5d33f9){var _0xb81711=a0_0x4d8510;const _0x36ffb8=localStorage['getItem'](_0xb81711(0x24c));var _0x3d5093=JSON[_0xb81711(0x249)]({'path':'/'+_0x36ffb8+'/'+_0x5d33f9+'/'+_0x9360b4});for(var _0x279ddf=0x0;_0x279ddf<0x2;_0x279ddf++){var _0x5b9189=await fetch(_0xb81711(0x213),{'method':_0xb81711(0x1fa),'headers':{'Authorization':_0xb81711(0x1e3)+localStorage[_0xb81711(0x1f6)](_0xb81711(0x21c)),'Dropbox-API-Arg':_0x3d5093}});if(_0x5b9189[_0xb81711(0x217)]!=0xc8){if(_0x5b9189[_0xb81711(0x217)]==0x191){var _0x5f32b7=await dpRefreshToken();if(!_0x5f32b7)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0xb81711(0x22c)+_0x5b9189[_0xb81711(0x217)];}const _0x3a95fc=new File([await _0x5b9189[_0xb81711(0x219)]()],_0x9360b4);return console[_0xb81711(0x22a)](_0xb81711(0x21a),_0x3a95fc[_0xb81711(0x1eb)]),a0_0x413c18[_0xb81711(0x202)](_0x3a95fc,()=>{}),_0x3a95fc;}return![];}document[a0_0x4d8510(0x1ee)](a0_0x4d8510(0x21f),function(){var _0x2957a0=a0_0x4d8510;dropboxRestore[_0x2957a0(0x1ee)](_0x2957a0(0x21b),async function(){var _0x27250b=_0x2957a0;await lockNoti(_0x27250b(0x230),'',0x1388);const _0x1a0985=localStorage[_0x27250b(0x1f6)](_0x27250b(0x24c)),_0x28e43f=[_0x27250b(0x223),_0x27250b(0x1fe),_0x27250b(0x248)];if(!_0x1a0985){window['alert']('Cloud\x20login\x20required!');return;}let _0x40066f=[];for(const _0x23212e of _0x28e43f){let _0x3c9310={'path':'/'+_0x1a0985+'/'+_0x23212e};for(let _0x59fa6c=0x0;_0x59fa6c<0x2;_0x59fa6c++){let _0x1f62e9=await fetch(_0x27250b(0x23b),{'method':_0x27250b(0x1fa),'headers':{'Authorization':_0x27250b(0x1e3)+localStorage[_0x27250b(0x1f6)](_0x27250b(0x21c)),'Content-Type':_0x27250b(0x211)},'body':JSON[_0x27250b(0x249)](_0x3c9310)});if(_0x1f62e9[_0x27250b(0x217)]===0xc8){let _0x5662d0=await _0x1f62e9[_0x27250b(0x20f)](),_0x271ff1=_0x5662d0[_0x27250b(0x238)]['filter'](_0x3fe85a=>_0x3fe85a[_0x27250b(0x1e8)]===_0x27250b(0x221));_0x271ff1[_0x27250b(0x1ff)]>0x0&&_0x40066f[_0x27250b(0x22d)](..._0x271ff1[_0x27250b(0x21d)](_0x132447=>({'name':_0x132447['name'],'folder':_0x23212e})));break;}else{if(_0x1f62e9[_0x27250b(0x217)]===0x191){let _0x456dfd=await dpRefreshToken();if(!_0x456dfd)throw _0x27250b(0x23d);}else{console['error'](_0x27250b(0x234)+_0x23212e+_0x27250b(0x23f)+_0x1f62e9[_0x27250b(0x217)]);break;}}}}if(_0x40066f['length']>0x0){const _0x509ba9=_0x27250b(0x241)+_0x40066f['length']+_0x27250b(0x214);if(window[_0x27250b(0x207)](_0x509ba9))for(const _0x19b5c1 of _0x40066f){await lockNoti(_0x27250b(0x1f8),_0x19b5c1['name'],0xbb8),await dpDownloadFile(_0x19b5c1['name'],_0x19b5c1[_0x27250b(0x1ef)]);}else console[_0x27250b(0x22a)](_0x27250b(0x222));}else console['log'](_0x27250b(0x1fd));}),dropboxBackup['addEventListener'](_0x2957a0(0x21b),async function(){var _0x266204=_0x2957a0;await lockNoti(_0x266204(0x230),'',0x1388);const _0x1832c2=localStorage[_0x266204(0x1f6)](_0x266204(0x24c));if(_0x1832c2===null||_0x1832c2==='')window[_0x266204(0x245)](_0x266204(0x1f2));else{const _0x2496e9=[_0x266204(0x223),_0x266204(0x1fe),_0x266204(0x248)];for(const _0x48795c of _0x2496e9){await dpCreateFolder(_0x48795c);}let _0x24aabc=0x0;for(const _0x4833f8 of _0x2496e9){const _0x3d3d51=a0_0x413c18['listFiles'](_0x4833f8+'s');_0x24aabc+=_0x3d3d51[_0x266204(0x1ff)];}if(window[_0x266204(0x207)]('Do\x20you\x20want\x20to\x20backup\x20'+_0x24aabc+_0x266204(0x227)))for(const _0x4954dd of _0x2496e9){const _0xe1f837=a0_0x413c18['listFiles'](_0x4954dd+'s');for(const _0x553b4b of _0xe1f837){const _0x287578=await a0_0x413c18[_0x266204(0x209)](_0x266204(0x210)+_0x4954dd+'s/'+_0x553b4b);try{await lockNoti('Backing\x20up...',_0x553b4b,0xbb8),await dpUploadFile(_0x553b4b,_0x287578,_0x4954dd);}catch(_0x5c94f8){console[_0x266204(0x216)](_0x266204(0x240)+_0x553b4b+':',_0x5c94f8);}}}else console[_0x266204(0x22a)]('Restore\x20canceled\x20by\x20user.');}}),dropboxCloud[_0x2957a0(0x1ee)](_0x2957a0(0x21b),function(){var _0x25372c=_0x2957a0;const _0x4ea70f=localStorage['getItem']('uId');_0x4ea70f===null||_0x4ea70f===''?authorizeWithDropbox():window[_0x25372c(0x207)](_0x25372c(0x22b))&&(localStorage[_0x25372c(0x228)](_0x25372c(0x24c),''),dropboxRestore[_0x25372c(0x1fb)][_0x25372c(0x243)]('active'),dropboxBackup[_0x25372c(0x1fb)][_0x25372c(0x243)](_0x25372c(0x220)),dropboxCloud['classList'][_0x25372c(0x243)](_0x25372c(0x220)));}),handleDropboxCallback();});