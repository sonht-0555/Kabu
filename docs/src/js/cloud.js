var a0_0xce9477=a0_0x5f54;(function(_0x895426,_0x43b9ff){var _0x1328c8=a0_0x5f54,_0x357d43=_0x895426();while(!![]){try{var _0x531cd9=-parseInt(_0x1328c8(0x206))/0x1*(parseInt(_0x1328c8(0x1ce))/0x2)+-parseInt(_0x1328c8(0x20d))/0x3+-parseInt(_0x1328c8(0x1f7))/0x4*(-parseInt(_0x1328c8(0x205))/0x5)+parseInt(_0x1328c8(0x1d1))/0x6+parseInt(_0x1328c8(0x1ea))/0x7*(parseInt(_0x1328c8(0x1e6))/0x8)+-parseInt(_0x1328c8(0x1c9))/0x9*(-parseInt(_0x1328c8(0x1e8))/0xa)+-parseInt(_0x1328c8(0x216))/0xb;if(_0x531cd9===_0x43b9ff)break;else _0x357d43['push'](_0x357d43['shift']());}catch(_0x4fa174){_0x357d43['push'](_0x357d43['shift']());}}}(a0_0x1db6,0x73a7e));import*as a0_0x360253 from'./main.js';import{localStorageFile}from'./storage.js';function a0_0x5f54(_0x3ebde4,_0x320570){var _0x1db679=a0_0x1db6();return a0_0x5f54=function(_0x5f5443,_0x5c58c1){_0x5f5443=_0x5f5443-0x1b5;var _0x50418e=_0x1db679[_0x5f5443];return _0x50418e;},a0_0x5f54(_0x3ebde4,_0x320570);}var clientId=a0_0xce9477(0x20a),clientSecret='nwb3dnfh09rhs31';function a0_0x1db6(){var _0x1811af=['Error\x20creating\x20folder\x20','Refreshing\x20token...','/data/','map','log','Folder\x20already\x20exists','https://www.dropbox.com/oauth2/authorize?client_id=','639639lAFEYW','length','access_token','json','POST','110OAmXfJ','replace','application/json','4599240BMNGOp','uId','refreshToken','Do\x20you\x20want\x20to\x20restore\x20','error','https://api.dropboxapi.com/oauth2/token','file','status','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','No\x20files\x20found\x20to\x20restore.','&redirect_uri=','Download\x20failed,\x20unknown\x20http\x20status:','open','Do\x20you\x20want\x20to\x20backup\x20','Do\x20you\x20want\x20to\x20logout?','code=','stringify','&token_access_type=','classList','&response_type=','entries','24FUQXtN','uid','130WxWvfq','setItem','251090tsBIXI','Content-Type','listFiles','https://content.dropboxapi.com/2/files/upload','Folder\x20created','split','https://api.dropbox.com/oauth2/token','Error\x20while\x20refreshing\x20token:','click','&client_secret=','accessToken','folder','No\x20refresh\x20token','933700XkMmYL','remove','offline','Unable\x20to\x20refresh\x20token','application/x-www-form-urlencoded','application/octet-stream','responseText','Wait\x20a\x20little\x20bit...','getItem','Authorization\x20Code:','location','Do\x20not\x20receive\x20authorization','send','Download\x20failed\x20for\x20','10croTEd','15149jXFJFe','Upload\x20failed,\x20unknown\x20http\x20status:\x20','&client_id=','DOMContentLoaded','knh3uz2mx2hp2eu','[\x5c?&#]','=([^&#]*)','1932447hsdfsb','\x20files\x20in\x20Kabu?','refresh_token','href','code','blob','Cloud\x20↦\x20Kabu\x20storage\x20◆','Restoring...','screenshot','3452383TiMqUJ','https://api.dropboxapi.com/2/files/list_folder','active','Cloud\x20login\x20required!','Restore\x20canceled\x20by\x20user.','refresh_token=','save','.tag','confirm','alert','addEventListener','&grant_type=','Bearer\x20','name','\x20files\x20from\x20Cloud?'];a0_0x1db6=function(){return _0x1811af;};return a0_0x1db6();}function authorizeWithDropbox(){var _0x1d4682=a0_0xce9477,_0x2864bb=window[_0x1d4682(0x201)][_0x1d4682(0x210)][_0x1d4682(0x1ef)]('?')[0x0],_0xc70d5a='code',_0x29ea5c=_0x1d4682(0x1f9),_0x1987f6=_0x1d4682(0x1c8)+clientId+_0x1d4682(0x1e4)+_0xc70d5a+_0x1d4682(0x1e2)+_0x29ea5c+_0x1d4682(0x1db)+encodeURIComponent(_0x2864bb);window[_0x1d4682(0x201)][_0x1d4682(0x210)]=_0x1987f6;}function handleDropboxCallback(){var _0x4c9233=a0_0xce9477,_0x2a4fa4=getUrlParameter(_0x4c9233(0x211));_0x2a4fa4?(getAccessToken(_0x2a4fa4),console[_0x4c9233(0x1c6)](_0x4c9233(0x200),_0x2a4fa4)):console[_0x4c9233(0x1c6)](_0x4c9233(0x202));}function getUrlParameter(_0x41abb1){var _0x4be525=a0_0xce9477;_0x41abb1=_0x41abb1[_0x4be525(0x1cf)](/[\[]/,'\x5c[')[_0x4be525(0x1cf)](/[\]]/,'\x5c]');var _0x18fe69=new RegExp(_0x4be525(0x20b)+_0x41abb1+_0x4be525(0x20c)),_0x5cf58e=_0x18fe69['exec'](location['search']);return _0x5cf58e===null?'':decodeURIComponent(_0x5cf58e[0x1][_0x4be525(0x1cf)](/\+/g,'\x20'));}function getAccessToken(_0x513a37){var _0x4c5d0c=a0_0xce9477,_0x59b47d='authorization_code',_0x1f1d2f=window[_0x4c5d0c(0x201)][_0x4c5d0c(0x210)][_0x4c5d0c(0x1ef)]('?')[0x0],_0x12cb72=new XMLHttpRequest();_0x12cb72[_0x4c5d0c(0x1dd)]('POST',_0x4c5d0c(0x1f0)),_0x12cb72['setRequestHeader'](_0x4c5d0c(0x1eb),_0x4c5d0c(0x1fb)),_0x12cb72['onload']=function(){var _0x2a511d=_0x4c5d0c;if(_0x12cb72[_0x2a511d(0x1d8)]===0xc8){var _0x2ee4db=JSON['parse'](_0x12cb72[_0x2a511d(0x1fd)]),_0x1114ae=_0x2ee4db[_0x2a511d(0x1cb)],_0x3dd23a=_0x2ee4db[_0x2a511d(0x20f)],_0x4cefe4=_0x2ee4db[_0x2a511d(0x1e7)];localStorage['setItem'](_0x2a511d(0x1f4),_0x1114ae),localStorage[_0x2a511d(0x1e9)](_0x2a511d(0x1d3),_0x3dd23a),localStorage[_0x2a511d(0x1e9)](_0x2a511d(0x1d2),_0x4cefe4);}else console[_0x2a511d(0x1c6)]('Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token');},_0x12cb72[_0x4c5d0c(0x203)](_0x4c5d0c(0x1e0)+_0x513a37+_0x4c5d0c(0x1be)+_0x59b47d+_0x4c5d0c(0x208)+clientId+_0x4c5d0c(0x1f3)+clientSecret+_0x4c5d0c(0x1db)+encodeURIComponent(_0x1f1d2f));}export async function dpCreateFolder(_0x423d0){var _0x409cf9=a0_0xce9477;const _0x4277cf=localStorage[_0x409cf9(0x1ff)](_0x409cf9(0x1d2));let _0x2e8206=localStorage[_0x409cf9(0x1ff)](_0x409cf9(0x1f4));const _0x4e5a26='/'+_0x4277cf+'/'+_0x423d0,_0x4953f8=JSON[_0x409cf9(0x1e1)]({'path':_0x4e5a26,'autorename':![]});for(let _0x6d0e76=0x0;_0x6d0e76<0x2;_0x6d0e76++){try{const _0x5542c9=await fetch('https://api.dropboxapi.com/2/files/create_folder_v2',{'method':_0x409cf9(0x1cd),'headers':{'Authorization':_0x409cf9(0x1bf)+_0x2e8206,'Content-Type':_0x409cf9(0x1d0)},'body':_0x4953f8});if(_0x5542c9[_0x409cf9(0x1d8)]===0x191){const _0x43d447=await dpRefreshToken();if(!_0x43d447)throw new Error(_0x409cf9(0x1fa));_0x2e8206=localStorage[_0x409cf9(0x1ff)](_0x409cf9(0x1f4));continue;}if(_0x5542c9[_0x409cf9(0x1d8)]===0x199)return{'message':_0x409cf9(0x1c7),'path':_0x423d0};if(!_0x5542c9['ok'])throw new Error(_0x409cf9(0x1c2)+_0x423d0);const _0x5f0d63=await _0x5542c9[_0x409cf9(0x1cc)]();return await lockNoti(_0x409cf9(0x1ee),'',0xbb8),_0x5f0d63;}catch(_0x223327){if(_0x6d0e76===0x1)throw _0x223327;}}return![];}export async function dpRefreshToken(){var _0x6e4daf=a0_0xce9477;if(!localStorage[_0x6e4daf(0x1ff)](_0x6e4daf(0x1d3)))throw _0x6e4daf(0x1f6);try{const _0xe4495e=await fetch(_0x6e4daf(0x1d6),{'method':_0x6e4daf(0x1cd),'headers':{'Content-Type':_0x6e4daf(0x1fb)},'body':_0x6e4daf(0x1b8)+localStorage['getItem'](_0x6e4daf(0x1d3))+_0x6e4daf(0x1d9)}),_0xf5e61a=await _0xe4495e['json']();if(!_0xf5e61a['error'])return localStorage[_0x6e4daf(0x1e9)](_0x6e4daf(0x1f4),_0xf5e61a[_0x6e4daf(0x1cb)]),await lockNoti(_0x6e4daf(0x1c3),'',0xbb8),await delay(0x3e8),!![];else alert(_0xf5e61a['error_description']||'Failed\x20to\x20refresh\x20Dropbox\x20token.');}catch(_0x11aa29){console[_0x6e4daf(0x1d5)](_0x6e4daf(0x1f1),_0x11aa29);}return![];}export async function dpUploadFile(_0x3fed5f,_0x104f07,_0x20f004){var _0xc5ca74=a0_0xce9477;const _0x3b44c3=localStorage[_0xc5ca74(0x1ff)](_0xc5ca74(0x1d2));var _0x3c6b5e=JSON[_0xc5ca74(0x1e1)]({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x3b44c3+'/'+_0x20f004+'/'+_0x3fed5f}),_0x3b5d16=new Blob([_0x104f07],{'type':_0xc5ca74(0x1fc)});for(var _0x40b61e=0x0;_0x40b61e<0x2;_0x40b61e++){var _0xf1081f=await fetch(_0xc5ca74(0x1ed),{'method':'POST','headers':{'Authorization':_0xc5ca74(0x1bf)+localStorage['getItem']('accessToken'),'Dropbox-API-Arg':_0x3c6b5e,'Content-Type':'application/octet-stream'},'body':_0x3b5d16});if(_0xf1081f[_0xc5ca74(0x1d8)]!=0xc8){if(_0xf1081f[_0xc5ca74(0x1d8)]==0x191){var _0x17764e=await dpRefreshToken();if(!_0x17764e)throw _0xc5ca74(0x1fa);continue;}else throw _0xc5ca74(0x207)+_0xf1081f[_0xc5ca74(0x1d8)];}else{var _0x3bfdbb=await _0xf1081f[_0xc5ca74(0x1cc)]();return console[_0xc5ca74(0x1c6)]('Kabu\x20storage\x20↦\x20Cloud\x20◆',_0x3fed5f),_0x3bfdbb;}}return![];}export async function dpDownloadFile(_0x2f859c,_0x1175e8){var _0x113899=a0_0xce9477;const _0x35ad6b=localStorage[_0x113899(0x1ff)]('uId');var _0x7db5bf=JSON[_0x113899(0x1e1)]({'path':'/'+_0x35ad6b+'/'+_0x1175e8+'/'+_0x2f859c});for(var _0xaf1c09=0x0;_0xaf1c09<0x2;_0xaf1c09++){var _0x4e60df=await fetch('https://content.dropboxapi.com/2/files/download',{'method':_0x113899(0x1cd),'headers':{'Authorization':_0x113899(0x1bf)+localStorage['getItem']('accessToken'),'Dropbox-API-Arg':_0x7db5bf}});if(_0x4e60df[_0x113899(0x1d8)]!=0xc8){if(_0x4e60df[_0x113899(0x1d8)]==0x191){var _0x133377=await dpRefreshToken();if(!_0x133377)throw'Unable\x20to\x20refresh\x20token';continue;}else throw _0x113899(0x1dc)+_0x4e60df[_0x113899(0x1d8)];}const _0x41cf9d=new File([await _0x4e60df[_0x113899(0x212)]()],_0x2f859c);return console[_0x113899(0x1c6)](_0x113899(0x213),_0x41cf9d['name']),a0_0x360253['uploadFileInCloud'](_0x41cf9d,()=>{}),_0x41cf9d;}return![];}document[a0_0xce9477(0x1bd)](a0_0xce9477(0x209),function(){var _0x4e21dc=a0_0xce9477;dropboxRestore[_0x4e21dc(0x1bd)](_0x4e21dc(0x1f2),async function(){var _0x161253=_0x4e21dc;await lockNoti(_0x161253(0x1fe),'',0x1388);const _0x3d992e=localStorage[_0x161253(0x1ff)](_0x161253(0x1d2)),_0x287cf9=['state',_0x161253(0x1b9),_0x161253(0x215)];if(!_0x3d992e){window[_0x161253(0x1bc)]('Cloud\x20login\x20required!');return;}let _0x36ea4f=[];for(const _0x5e567f of _0x287cf9){let _0x19b633={'path':'/'+_0x3d992e+'/'+_0x5e567f};for(let _0x1ebdad=0x0;_0x1ebdad<0x2;_0x1ebdad++){let _0x2a5766=await fetch(_0x161253(0x217),{'method':_0x161253(0x1cd),'headers':{'Authorization':_0x161253(0x1bf)+localStorage[_0x161253(0x1ff)](_0x161253(0x1f4)),'Content-Type':_0x161253(0x1d0)},'body':JSON[_0x161253(0x1e1)](_0x19b633)});if(_0x2a5766[_0x161253(0x1d8)]===0xc8){let _0x347d8f=await _0x2a5766['json'](),_0x26d1fe=_0x347d8f[_0x161253(0x1e5)]['filter'](_0x417c84=>_0x417c84[_0x161253(0x1ba)]===_0x161253(0x1d7));_0x26d1fe[_0x161253(0x1ca)]>0x0&&_0x36ea4f['push'](..._0x26d1fe[_0x161253(0x1c5)](_0x4e3de0=>({'name':_0x4e3de0[_0x161253(0x1c0)],'folder':_0x5e567f})));break;}else{if(_0x2a5766['status']===0x191){let _0x4d853e=await dpRefreshToken();if(!_0x4d853e)throw _0x161253(0x1fa);}else{console[_0x161253(0x1d5)](_0x161253(0x204)+_0x5e567f+',\x20status:\x20'+_0x2a5766[_0x161253(0x1d8)]);break;}}}}if(_0x36ea4f[_0x161253(0x1ca)]>0x0){const _0x5e1f8a=_0x161253(0x1d4)+_0x36ea4f[_0x161253(0x1ca)]+_0x161253(0x1c1);if(window[_0x161253(0x1bb)](_0x5e1f8a))for(const _0x5c45cc of _0x36ea4f){await lockNoti(_0x161253(0x214),_0x5c45cc[_0x161253(0x1c0)],0xbb8),await dpDownloadFile(_0x5c45cc[_0x161253(0x1c0)],_0x5c45cc[_0x161253(0x1f5)]);}else console['log'](_0x161253(0x1b7));}else console[_0x161253(0x1c6)](_0x161253(0x1da));}),dropboxBackup[_0x4e21dc(0x1bd)](_0x4e21dc(0x1f2),async function(){var _0x2cff4b=_0x4e21dc;await lockNoti(_0x2cff4b(0x1fe),'',0x1388);const _0x26d25b=localStorage[_0x2cff4b(0x1ff)]('uId');if(_0x26d25b===null||_0x26d25b==='')window[_0x2cff4b(0x1bc)](_0x2cff4b(0x1b6));else{const _0xd3ceab=['state','save','screenshot'];for(const _0x1c63e3 of _0xd3ceab){await dpCreateFolder(_0x1c63e3);}let _0x2577e3=0x0;for(const _0x316f52 of _0xd3ceab){const _0x2f6ca8=a0_0x360253[_0x2cff4b(0x1ec)](_0x316f52+'s');_0x2577e3+=_0x2f6ca8[_0x2cff4b(0x1ca)];}if(window['confirm'](_0x2cff4b(0x1de)+_0x2577e3+_0x2cff4b(0x20e)))for(const _0x590c1f of _0xd3ceab){const _0x20d045=a0_0x360253['listFiles'](_0x590c1f+'s');for(const _0x5be808 of _0x20d045){const _0x12bf3a=await a0_0x360253['downloadFileInCloud'](_0x2cff4b(0x1c4)+_0x590c1f+'s/'+_0x5be808);try{await lockNoti('Backing\x20up...',_0x5be808,0xbb8),await dpUploadFile(_0x5be808,_0x12bf3a,_0x590c1f);}catch(_0x5f3d4f){console[_0x2cff4b(0x1d5)]('Failed\x20to\x20upload\x20file\x20'+_0x5be808+':',_0x5f3d4f);}}}else console[_0x2cff4b(0x1c6)]('Restore\x20canceled\x20by\x20user.');}}),dropboxCloud['addEventListener'](_0x4e21dc(0x1f2),function(){var _0x42587d=_0x4e21dc;const _0x3dfda9=localStorage['getItem'](_0x42587d(0x1d2));_0x3dfda9===null||_0x3dfda9===''?authorizeWithDropbox():window[_0x42587d(0x1bb)](_0x42587d(0x1df))&&(localStorage[_0x42587d(0x1e9)](_0x42587d(0x1d2),''),dropboxRestore['classList'][_0x42587d(0x1f8)](_0x42587d(0x1b5)),dropboxBackup[_0x42587d(0x1e3)]['remove'](_0x42587d(0x1b5)),dropboxCloud[_0x42587d(0x1e3)][_0x42587d(0x1f8)](_0x42587d(0x1b5)));}),handleDropboxCallback();});