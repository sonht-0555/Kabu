<<<<<<< HEAD
var a0_0x4aedad=a0_0x5021;function a0_0x5021(_0x352d98,_0x37bb39){var _0x48b7a6=a0_0x48b7();return a0_0x5021=function(_0x502174,_0x16aef3){_0x502174=_0x502174-0x19d;var _0x2914b9=_0x48b7a6[_0x502174];return _0x2914b9;},a0_0x5021(_0x352d98,_0x37bb39);}(function(_0xbf8eb9,_0x59c10e){var _0x69fe06=a0_0x5021,_0x59d092=_0xbf8eb9();while(!![]){try{var _0xf5d332=-parseInt(_0x69fe06(0x1f2))/0x1+parseInt(_0x69fe06(0x1d1))/0x2*(-parseInt(_0x69fe06(0x1c4))/0x3)+-parseInt(_0x69fe06(0x1c8))/0x4*(parseInt(_0x69fe06(0x1e4))/0x5)+-parseInt(_0x69fe06(0x1b4))/0x6+parseInt(_0x69fe06(0x19e))/0x7+parseInt(_0x69fe06(0x1ca))/0x8*(parseInt(_0x69fe06(0x1cf))/0x9)+-parseInt(_0x69fe06(0x1aa))/0xa*(-parseInt(_0x69fe06(0x1f6))/0xb);if(_0xf5d332===_0x59c10e)break;else _0x59d092['push'](_0x59d092['shift']());}catch(_0x15b964){_0x59d092['push'](_0x59d092['shift']());}}}(a0_0x48b7,0x6dcdb));import*as a0_0x27969a from'./main.js';import{localStorageFile}from'./storage.js';var clientId='knh3uz2mx2hp2eu',clientSecret='nwb3dnfh09rhs31';function authorizeWithDropbox(){var _0x4ef872=a0_0x5021,_0x4cef4d=window[_0x4ef872(0x1e7)][_0x4ef872(0x1cb)][_0x4ef872(0x1b7)]('?')[0x0],_0xd46a08=_0x4ef872(0x1a8),_0x4ded74=_0x4ef872(0x1e2),_0x3c75f9=_0x4ef872(0x1a2)+clientId+'&response_type='+_0xd46a08+_0x4ef872(0x1eb)+_0x4ded74+_0x4ef872(0x1c5)+encodeURIComponent(_0x4cef4d);window['location'][_0x4ef872(0x1cb)]=_0x3c75f9;}function handleDropboxCallback(){var _0x5b280f=a0_0x5021,_0x684a51=getUrlParameter(_0x5b280f(0x1a8));_0x684a51?(getAccessToken(_0x684a51),console[_0x5b280f(0x1c3)](_0x5b280f(0x1ea),_0x684a51)):console[_0x5b280f(0x1c3)](_0x5b280f(0x1ee));}function getUrlParameter(_0x261b12){var _0x58d8b4=a0_0x5021;_0x261b12=_0x261b12['replace'](/[\[]/,'\x5c[')[_0x58d8b4(0x1c6)](/[\]]/,'\x5c]');var _0x44460d=new RegExp(_0x58d8b4(0x1f7)+_0x261b12+_0x58d8b4(0x1a7)),_0x4594dd=_0x44460d[_0x58d8b4(0x1c1)](location[_0x58d8b4(0x1ae)]);return _0x4594dd===null?'':decodeURIComponent(_0x4594dd[0x1]['replace'](/\+/g,'\x20'));}function getAccessToken(_0x43c1d2){var _0x3f4c15=a0_0x5021,_0x321d9b=_0x3f4c15(0x1cd),_0xcd1187=window[_0x3f4c15(0x1e7)][_0x3f4c15(0x1cb)][_0x3f4c15(0x1b7)]('?')[0x0],_0x16262e=new XMLHttpRequest();_0x16262e[_0x3f4c15(0x1ce)](_0x3f4c15(0x1b5),_0x3f4c15(0x1b0)),_0x16262e[_0x3f4c15(0x1af)]('Content-Type',_0x3f4c15(0x1da)),_0x16262e[_0x3f4c15(0x1de)]=function(){var _0xaf5959=_0x3f4c15;if(_0x16262e[_0xaf5959(0x1b2)]===0xc8){var _0x33f796=JSON[_0xaf5959(0x1f1)](_0x16262e['responseText']),_0x27580e=_0x33f796[_0xaf5959(0x1a9)],_0x1ac21b=_0x33f796['refresh_token'],_0x1e98cd=_0x33f796['uid'];localStorage[_0xaf5959(0x1b8)](_0xaf5959(0x1f8),_0x27580e),localStorage[_0xaf5959(0x1b8)]('refreshToken',_0x1ac21b),localStorage[_0xaf5959(0x1b8)](_0xaf5959(0x1b3),_0x1e98cd);}else console[_0xaf5959(0x1c3)](_0xaf5959(0x1bd));},_0x16262e[_0x3f4c15(0x1c2)](_0x3f4c15(0x1d2)+_0x43c1d2+'&grant_type='+_0x321d9b+_0x3f4c15(0x1c9)+clientId+'&client_secret='+clientSecret+_0x3f4c15(0x1c5)+encodeURIComponent(_0xcd1187));}export async function dpCreateFolder(_0x5281e2){var _0x3df346=a0_0x5021;const _0x15e0c0=localStorage[_0x3df346(0x1c7)](_0x3df346(0x1b3));let _0xeadf4b=localStorage[_0x3df346(0x1c7)](_0x3df346(0x1f8));const _0x3b8d4b='/'+_0x15e0c0+'/'+_0x5281e2,_0x37f1d7=JSON[_0x3df346(0x1f3)]({'path':_0x3b8d4b,'autorename':![]});for(let _0x13e52f=0x0;_0x13e52f<0x2;_0x13e52f++){try{const _0x5241b9=await fetch(_0x3df346(0x1ec),{'method':_0x3df346(0x1b5),'headers':{'Authorization':_0x3df346(0x1cc)+_0xeadf4b,'Content-Type':_0x3df346(0x1e8)},'body':_0x37f1d7});if(_0x5241b9[_0x3df346(0x1b2)]===0x191){const _0x3e788b=await dpRefreshToken();if(!_0x3e788b)throw new Error(_0x3df346(0x1a1));_0xeadf4b=localStorage[_0x3df346(0x1c7)](_0x3df346(0x1f8));continue;}if(_0x5241b9['status']===0x199)return{'message':_0x3df346(0x1ab),'path':_0x5281e2};if(!_0x5241b9['ok'])throw new Error(_0x3df346(0x1d4)+_0x5281e2);const _0x4741b8=await _0x5241b9[_0x3df346(0x1bc)]();return await lockNoti('Folder\x20created','',0xbb8),_0x4741b8;}catch(_0x4f0878){if(_0x13e52f===0x1)throw _0x4f0878;}}return![];}export async function dpRefreshToken(){var _0x26e2bf=a0_0x5021;if(!localStorage['getItem']('refreshToken'))throw'No\x20refresh\x20token';try{const _0x57fdd9=await fetch(_0x26e2bf(0x1f9),{'method':_0x26e2bf(0x1b5),'headers':{'Content-Type':_0x26e2bf(0x1da)},'body':_0x26e2bf(0x1ed)+localStorage[_0x26e2bf(0x1c7)]('refreshToken')+_0x26e2bf(0x1bb)}),_0x173e40=await _0x57fdd9['json']();if(!_0x173e40['error'])return localStorage[_0x26e2bf(0x1b8)](_0x26e2bf(0x1f8),_0x173e40[_0x26e2bf(0x1a9)]),await lockNoti('Refreshing\x20token...','',0xbb8),await delay(0x3e8),!![];else alert(_0x173e40['error_description']||_0x26e2bf(0x1b1));}catch(_0xaf6286){console['error'](_0x26e2bf(0x1f5),_0xaf6286);}return![];}function a0_0x48b7(){var _0x234525=['Unable\x20to\x20refresh\x20token','https://www.dropbox.com/oauth2/authorize?client_id=','Do\x20you\x20want\x20to\x20restore\x20','uploadFileInCloud','addEventListener','downloadFileInCloud','=([^&#]*)','code','access_token','430SiGkUj','Folder\x20already\x20exists','name',',\x20status:\x20','search','setRequestHeader','https://api.dropbox.com/oauth2/token','Failed\x20to\x20refresh\x20Dropbox\x20token.','status','uId','3510174qyxQdY','POST','application/octet-stream','split','setItem','DOMContentLoaded','error','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','json','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','https://content.dropboxapi.com/2/files/download','blob','Download\x20failed\x20for\x20','exec','send','log','1160007WScfpv','&redirect_uri=','replace','getItem','4RpcIDW','&client_id=','16yJhuuj','href','Bearer\x20','authorization_code','open','1549998DSQZPJ','Failed\x20to\x20upload\x20file\x20','2JmDKeg','code=','classList','Error\x20creating\x20folder\x20','Wait\x20a\x20little\x20bit...','state','Restoring...','https://content.dropboxapi.com/2/files/upload','Cloud\x20login\x20required!','application/x-www-form-urlencoded','length','file','alert','onload','remove','entries','Restore\x20canceled\x20by\x20user.','offline','Kabu\x20storage\x20↦\x20Cloud\x20◆','2813380DdkANl','push','confirm','location','application/json','save','Authorization\x20Code:','&token_access_type=','https://api.dropboxapi.com/2/files/create_folder_v2','refresh_token=','Do\x20not\x20receive\x20authorization','click','map','parse','22244QRdfUw','stringify','screenshot','Error\x20while\x20refreshing\x20token:','300278iLhjYR','[\x5c?&#]','accessToken','https://api.dropboxapi.com/oauth2/token','listFiles','3416805zDNiWh','\x20files\x20from\x20Cloud?','folder'];a0_0x48b7=function(){return _0x234525;};return a0_0x48b7();}export async function dpUploadFile(_0x38cdbc,_0xc6ed35,_0x82939b){var _0x44df19=a0_0x5021;const _0x18152b=localStorage[_0x44df19(0x1c7)](_0x44df19(0x1b3));var _0x31d2be=JSON[_0x44df19(0x1f3)]({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x18152b+'/'+_0x82939b+'/'+_0x38cdbc}),_0x3226ed=new Blob([_0xc6ed35],{'type':'application/octet-stream'});for(var _0x3c1679=0x0;_0x3c1679<0x2;_0x3c1679++){var _0x57e51f=await fetch(_0x44df19(0x1d8),{'method':'POST','headers':{'Authorization':'Bearer\x20'+localStorage[_0x44df19(0x1c7)]('accessToken'),'Dropbox-API-Arg':_0x31d2be,'Content-Type':_0x44df19(0x1b6)},'body':_0x3226ed});if(_0x57e51f[_0x44df19(0x1b2)]!=0xc8){if(_0x57e51f[_0x44df19(0x1b2)]==0x191){var _0x5ac6d4=await dpRefreshToken();if(!_0x5ac6d4)throw _0x44df19(0x1a1);continue;}else throw'Upload\x20failed,\x20unknown\x20http\x20status:\x20'+_0x57e51f[_0x44df19(0x1b2)];}else{var _0x3ac581=await _0x57e51f[_0x44df19(0x1bc)]();return console[_0x44df19(0x1c3)](_0x44df19(0x1e3),_0x38cdbc),_0x3ac581;}}return![];}export async function dpDownloadFile(_0xfe3507,_0x1883b9){var _0x3a36ce=a0_0x5021;const _0xfe81e9=localStorage[_0x3a36ce(0x1c7)](_0x3a36ce(0x1b3));var _0x588410=JSON['stringify']({'path':'/'+_0xfe81e9+'/'+_0x1883b9+'/'+_0xfe3507});for(var _0x22199c=0x0;_0x22199c<0x2;_0x22199c++){var _0x597b80=await fetch(_0x3a36ce(0x1be),{'method':_0x3a36ce(0x1b5),'headers':{'Authorization':_0x3a36ce(0x1cc)+localStorage[_0x3a36ce(0x1c7)]('accessToken'),'Dropbox-API-Arg':_0x588410}});if(_0x597b80[_0x3a36ce(0x1b2)]!=0xc8){if(_0x597b80[_0x3a36ce(0x1b2)]==0x191){var _0x33078d=await dpRefreshToken();if(!_0x33078d)throw _0x3a36ce(0x1a1);continue;}else throw'Download\x20failed,\x20unknown\x20http\x20status:'+_0x597b80[_0x3a36ce(0x1b2)];}const _0x5603a8=new File([await _0x597b80[_0x3a36ce(0x1bf)]()],_0xfe3507);return console[_0x3a36ce(0x1c3)]('Cloud\x20↦\x20Kabu\x20storage\x20◆',_0x5603a8[_0x3a36ce(0x1ac)]),a0_0x27969a[_0x3a36ce(0x1a4)](_0x5603a8,()=>{}),_0x5603a8;}return![];}document[a0_0x4aedad(0x1a5)](a0_0x4aedad(0x1b9),function(){var _0x1f0970=a0_0x4aedad;dropboxRestore[_0x1f0970(0x1a5)](_0x1f0970(0x1ef),async function(){var _0x3b2146=_0x1f0970;await lockNoti(_0x3b2146(0x1d5),'',0x1388);const _0xa4a2ab=localStorage[_0x3b2146(0x1c7)](_0x3b2146(0x1b3)),_0x29ef61=[_0x3b2146(0x1d6),_0x3b2146(0x1e9),'screenshot'];if(!_0xa4a2ab){window[_0x3b2146(0x1dd)](_0x3b2146(0x1d9));return;}let _0x4c20fc=[];for(const _0x367c42 of _0x29ef61){let _0x5350e0={'path':'/'+_0xa4a2ab+'/'+_0x367c42};for(let _0x39880f=0x0;_0x39880f<0x2;_0x39880f++){let _0x169b50=await fetch('https://api.dropboxapi.com/2/files/list_folder',{'method':_0x3b2146(0x1b5),'headers':{'Authorization':'Bearer\x20'+localStorage['getItem'](_0x3b2146(0x1f8)),'Content-Type':_0x3b2146(0x1e8)},'body':JSON[_0x3b2146(0x1f3)](_0x5350e0)});if(_0x169b50['status']===0xc8){let _0x594d9c=await _0x169b50['json'](),_0x15dedf=_0x594d9c[_0x3b2146(0x1e0)]['filter'](_0x4a4229=>_0x4a4229['.tag']===_0x3b2146(0x1dc));_0x15dedf[_0x3b2146(0x1db)]>0x0&&_0x4c20fc[_0x3b2146(0x1e5)](..._0x15dedf[_0x3b2146(0x1f0)](_0x3d0f2e=>({'name':_0x3d0f2e[_0x3b2146(0x1ac)],'folder':_0x367c42})));break;}else{if(_0x169b50[_0x3b2146(0x1b2)]===0x191){let _0x308a77=await dpRefreshToken();if(!_0x308a77)throw _0x3b2146(0x1a1);}else{console['error'](_0x3b2146(0x1c0)+_0x367c42+_0x3b2146(0x1ad)+_0x169b50[_0x3b2146(0x1b2)]);break;}}}}if(_0x4c20fc['length']>0x0){const _0x1ed152=_0x3b2146(0x1a3)+_0x4c20fc['length']+_0x3b2146(0x19f);if(window[_0x3b2146(0x1e6)](_0x1ed152))for(const _0x29e6cb of _0x4c20fc){await lockNoti(_0x3b2146(0x1d7),_0x29e6cb[_0x3b2146(0x1ac)],0xbb8),await dpDownloadFile(_0x29e6cb[_0x3b2146(0x1ac)],_0x29e6cb[_0x3b2146(0x1a0)]);}else console['log'](_0x3b2146(0x1e1));}else console[_0x3b2146(0x1c3)]('No\x20files\x20found\x20to\x20restore.');}),dropboxBackup[_0x1f0970(0x1a5)]('click',async function(){var _0x1c8a6c=_0x1f0970;await lockNoti(_0x1c8a6c(0x1d5),'',0x1388);const _0x507bda=localStorage[_0x1c8a6c(0x1c7)](_0x1c8a6c(0x1b3));if(_0x507bda===null||_0x507bda==='')window[_0x1c8a6c(0x1dd)](_0x1c8a6c(0x1d9));else{const _0x17b45d=['state',_0x1c8a6c(0x1e9),_0x1c8a6c(0x1f4)];for(const _0x1167a3 of _0x17b45d){await dpCreateFolder(_0x1167a3);}let _0x7bf61a=0x0;for(const _0x47484f of _0x17b45d){const _0xbe3b82=a0_0x27969a[_0x1c8a6c(0x19d)](_0x47484f+'s');_0x7bf61a+=_0xbe3b82[_0x1c8a6c(0x1db)];}if(window[_0x1c8a6c(0x1e6)]('Do\x20you\x20want\x20to\x20backup\x20'+_0x7bf61a+'\x20files\x20in\x20Kabu?'))for(const _0x33feb1 of _0x17b45d){const _0x1020d5=a0_0x27969a[_0x1c8a6c(0x19d)](_0x33feb1+'s');for(const _0x54a723 of _0x1020d5){const _0x446868=await a0_0x27969a[_0x1c8a6c(0x1a6)]('/data/'+_0x33feb1+'s/'+_0x54a723);try{await lockNoti('Backing\x20up...',_0x54a723,0xbb8),await dpUploadFile(_0x54a723,_0x446868,_0x33feb1);}catch(_0x347e91){console[_0x1c8a6c(0x1ba)](_0x1c8a6c(0x1d0)+_0x54a723+':',_0x347e91);}}}else console[_0x1c8a6c(0x1c3)](_0x1c8a6c(0x1e1));}}),dropboxCloud[_0x1f0970(0x1a5)](_0x1f0970(0x1ef),function(){var _0x5b76a4=_0x1f0970;const _0x533f16=localStorage[_0x5b76a4(0x1c7)](_0x5b76a4(0x1b3));_0x533f16===null||_0x533f16===''?authorizeWithDropbox():window['confirm']('Do\x20you\x20want\x20to\x20logout?')&&(localStorage['setItem']('uId',''),dropboxRestore[_0x5b76a4(0x1d3)][_0x5b76a4(0x1df)]('active'),dropboxBackup['classList'][_0x5b76a4(0x1df)]('active'),dropboxCloud['classList'][_0x5b76a4(0x1df)]('active'));}),handleDropboxCallback();});
=======
var a0_0x5a8145=a0_0x416b;(function(_0x1445bc,_0xb2c195){var _0x4bc83d=a0_0x416b,_0x3a3a25=_0x1445bc();while(!![]){try{var _0x5bcd52=parseInt(_0x4bc83d(0x1c9))/0x1*(parseInt(_0x4bc83d(0x1e4))/0x2)+-parseInt(_0x4bc83d(0x1b0))/0x3+-parseInt(_0x4bc83d(0x1ee))/0x4*(-parseInt(_0x4bc83d(0x1e7))/0x5)+-parseInt(_0x4bc83d(0x1b8))/0x6+-parseInt(_0x4bc83d(0x1c3))/0x7*(-parseInt(_0x4bc83d(0x1b6))/0x8)+parseInt(_0x4bc83d(0x20a))/0x9*(parseInt(_0x4bc83d(0x203))/0xa)+-parseInt(_0x4bc83d(0x214))/0xb;if(_0x5bcd52===_0xb2c195)break;else _0x3a3a25['push'](_0x3a3a25['shift']());}catch(_0x5558ff){_0x3a3a25['push'](_0x3a3a25['shift']());}}}(a0_0x456c,0x8c5f7));import*as a0_0x5de806 from'./main.js';import{localStorageFile}from'./storage.js';var clientId=a0_0x5a8145(0x1d9),clientSecret=a0_0x5a8145(0x204);function authorizeWithDropbox(){var _0xb5f916=a0_0x5a8145,_0x3db727=window[_0xb5f916(0x1f1)]['href'][_0xb5f916(0x1fc)]('?')[0x0],_0x524232=_0xb5f916(0x1b5),_0x58cfa8=_0xb5f916(0x1f2),_0xf86d8b='https://www.dropbox.com/oauth2/authorize?client_id='+clientId+_0xb5f916(0x211)+_0x524232+_0xb5f916(0x215)+_0x58cfa8+_0xb5f916(0x205)+encodeURIComponent(_0x3db727);window['location'][_0xb5f916(0x1f3)]=_0xf86d8b;}function a0_0x416b(_0x1c2ee8,_0x1ab550){var _0x456c6c=a0_0x456c();return a0_0x416b=function(_0x416b5f,_0x3b099c){_0x416b5f=_0x416b5f-0x1b0;var _0x1c551e=_0x456c6c[_0x416b5f];return _0x1c551e;},a0_0x416b(_0x1c2ee8,_0x1ab550);}function handleDropboxCallback(){var _0x54448e=a0_0x5a8145,_0x2cbac9=getUrlParameter('code');_0x2cbac9?(getAccessToken(_0x2cbac9),console[_0x54448e(0x1bd)](_0x54448e(0x1c4),_0x2cbac9)):console[_0x54448e(0x1bd)](_0x54448e(0x1d3));}function getUrlParameter(_0xe5337e){var _0x4bf238=a0_0x5a8145;_0xe5337e=_0xe5337e[_0x4bf238(0x1d2)](/[\[]/,'\x5c[')[_0x4bf238(0x1d2)](/[\]]/,'\x5c]');var _0x558e92=new RegExp(_0x4bf238(0x1b7)+_0xe5337e+_0x4bf238(0x1d0)),_0x2e0945=_0x558e92[_0x4bf238(0x1ba)](location[_0x4bf238(0x1c8)]);return _0x2e0945===null?'':decodeURIComponent(_0x2e0945[0x1][_0x4bf238(0x1d2)](/\+/g,'\x20'));}function getAccessToken(_0x49b254){var _0x57240a=a0_0x5a8145,_0x1f19be=_0x57240a(0x1b3),_0x5e73d6=window[_0x57240a(0x1f1)][_0x57240a(0x1f3)]['split']('?')[0x0],_0x1a020d=new XMLHttpRequest();_0x1a020d[_0x57240a(0x210)]('POST',_0x57240a(0x1cb)),_0x1a020d[_0x57240a(0x20d)]('Content-Type',_0x57240a(0x202)),_0x1a020d[_0x57240a(0x1f5)]=function(){var _0x3150e0=_0x57240a;if(_0x1a020d[_0x3150e0(0x1dc)]===0xc8){var _0x468dfd=JSON[_0x3150e0(0x1c7)](_0x1a020d[_0x3150e0(0x1ff)]),_0x5ee5af=_0x468dfd[_0x3150e0(0x1c0)],_0x27badc=_0x468dfd['refresh_token'],_0x3ad30c=_0x468dfd['uid'];localStorage[_0x3150e0(0x1ea)](_0x3150e0(0x1de),_0x5ee5af),localStorage[_0x3150e0(0x1ea)](_0x3150e0(0x1f8),_0x27badc),localStorage[_0x3150e0(0x1ea)](_0x3150e0(0x1ec),_0x3ad30c);}else console[_0x3150e0(0x1bd)](_0x3150e0(0x1bb));},_0x1a020d[_0x57240a(0x1fd)]('code='+_0x49b254+_0x57240a(0x1d5)+_0x1f19be+'&client_id='+clientId+_0x57240a(0x200)+clientSecret+'&redirect_uri='+encodeURIComponent(_0x5e73d6));}export async function dpCreateFolder(_0x3ff4d8){var _0x10fd27=a0_0x5a8145;const _0x343ee4=localStorage['getItem']('uId');let _0x14f9e4=localStorage[_0x10fd27(0x1fa)](_0x10fd27(0x1de));const _0x45900b='/'+_0x343ee4+'/'+_0x3ff4d8,_0x1cec44=JSON[_0x10fd27(0x1fb)]({'path':_0x45900b,'autorename':![]});for(let _0x54ec51=0x0;_0x54ec51<0x2;_0x54ec51++){try{const _0x5b1aef=await fetch(_0x10fd27(0x1b2),{'method':_0x10fd27(0x1dd),'headers':{'Authorization':'Bearer\x20'+_0x14f9e4,'Content-Type':_0x10fd27(0x208)},'body':_0x1cec44});if(_0x5b1aef[_0x10fd27(0x1dc)]===0x191){const _0x3e8dec=await dpRefreshToken();if(!_0x3e8dec)throw new Error('Unable\x20to\x20refresh\x20token');_0x14f9e4=localStorage[_0x10fd27(0x1fa)](_0x10fd27(0x1de));continue;}if(_0x5b1aef[_0x10fd27(0x1dc)]===0x199)return{'message':_0x10fd27(0x1f7),'path':_0x3ff4d8};if(!_0x5b1aef['ok'])throw new Error(_0x10fd27(0x1e6)+_0x3ff4d8);const _0x92d1d0=await _0x5b1aef['json']();return await lockNoti(_0x10fd27(0x1e8),'',0xbb8),_0x92d1d0;}catch(_0x33d6d4){if(_0x54ec51===0x1)throw _0x33d6d4;}}return![];}export async function dpRefreshToken(){var _0x31b8fa=a0_0x5a8145;if(!localStorage[_0x31b8fa(0x1fa)](_0x31b8fa(0x1f8)))throw'No\x20refresh\x20token';try{const _0x11191c=await fetch('https://api.dropboxapi.com/oauth2/token',{'method':_0x31b8fa(0x1dd),'headers':{'Content-Type':_0x31b8fa(0x202)},'body':_0x31b8fa(0x1cc)+localStorage[_0x31b8fa(0x1fa)]('refreshToken')+_0x31b8fa(0x1db)}),_0x5f334c=await _0x11191c[_0x31b8fa(0x1e2)]();if(!_0x5f334c[_0x31b8fa(0x201)])return localStorage['setItem'](_0x31b8fa(0x1de),_0x5f334c[_0x31b8fa(0x1c0)]),await lockNoti('Refreshing\x20token...','',0xbb8),await delay(0x3e8),!![];else alert(_0x5f334c[_0x31b8fa(0x1e5)]||_0x31b8fa(0x1d6));}catch(_0x8f75d6){console[_0x31b8fa(0x201)]('Error\x20while\x20refreshing\x20token:',_0x8f75d6);}return![];}export async function dpUploadFile(_0x5956c3,_0x780b5a,_0x4486a9){var _0x1996fb=a0_0x5a8145;const _0x160c40=localStorage['getItem'](_0x1996fb(0x1ec));var _0x5d0e97=JSON[_0x1996fb(0x1fb)]({'autorename':!![],'mode':_0x1996fb(0x1b1),'mute':!![],'strict_conflict':![],'path':'/'+_0x160c40+'/'+_0x4486a9+'/'+_0x5956c3}),_0xf0c210=new Blob([_0x780b5a],{'type':_0x1996fb(0x1df)});for(var _0x3eba24=0x0;_0x3eba24<0x2;_0x3eba24++){var _0x1e5f3c=await fetch(_0x1996fb(0x1d4),{'method':_0x1996fb(0x1dd),'headers':{'Authorization':_0x1996fb(0x1da)+localStorage[_0x1996fb(0x1fa)](_0x1996fb(0x1de)),'Dropbox-API-Arg':_0x5d0e97,'Content-Type':_0x1996fb(0x1df)},'body':_0xf0c210});if(_0x1e5f3c[_0x1996fb(0x1dc)]!=0xc8){if(_0x1e5f3c[_0x1996fb(0x1dc)]==0x191){var _0x1355ee=await dpRefreshToken();if(!_0x1355ee)throw _0x1996fb(0x1c6);continue;}else throw _0x1996fb(0x20e)+_0x1e5f3c[_0x1996fb(0x1dc)];}else{var _0x320b8a=await _0x1e5f3c['json']();return console[_0x1996fb(0x1bd)](_0x1996fb(0x1d7),_0x5956c3),_0x320b8a;}}return![];}export async function dpDownloadFile(_0x20938f,_0x26c53b){var _0x1c01d4=a0_0x5a8145;const _0x45d83b=localStorage[_0x1c01d4(0x1fa)]('uId');var _0x398a99=JSON['stringify']({'path':'/'+_0x45d83b+'/'+_0x26c53b+'/'+_0x20938f});for(var _0x38a798=0x0;_0x38a798<0x2;_0x38a798++){var _0x287ae8=await fetch('https://content.dropboxapi.com/2/files/download',{'method':_0x1c01d4(0x1dd),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x1c01d4(0x1fa)](_0x1c01d4(0x1de)),'Dropbox-API-Arg':_0x398a99}});if(_0x287ae8[_0x1c01d4(0x1dc)]!=0xc8){if(_0x287ae8[_0x1c01d4(0x1dc)]==0x191){var _0x5f5568=await dpRefreshToken();if(!_0x5f5568)throw _0x1c01d4(0x1c6);continue;}else throw'Download\x20failed,\x20unknown\x20http\x20status:'+_0x287ae8[_0x1c01d4(0x1dc)];}const _0x3691ff=new File([await _0x287ae8[_0x1c01d4(0x1ed)]()],_0x20938f);return console[_0x1c01d4(0x1bd)](_0x1c01d4(0x1c2),_0x3691ff[_0x1c01d4(0x1eb)]),a0_0x5de806[_0x1c01d4(0x1f6)](_0x3691ff,()=>{}),_0x3691ff;}return![];}function a0_0x456c(){var _0x252e89=['15234813qwGKzQ','&token_access_type=','filter','3006573xeTKdI','overwrite','https://api.dropboxapi.com/2/files/create_folder_v2','authorization_code','Do\x20you\x20want\x20to\x20backup\x20','code','2011904sJJbao','[\x5c?&#]','3577944KhQbKl','remove','exec','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','alert','log','addEventListener','confirm','access_token','Download\x20failed\x20for\x20','Cloud\x20↦\x20Kabu\x20storage\x20◆','28FMBUwH','Authorization\x20Code:','listFiles','Unable\x20to\x20refresh\x20token','parse','search','135316wiWTPR','DOMContentLoaded','https://api.dropbox.com/oauth2/token','refresh_token=','Do\x20you\x20want\x20to\x20logout?','file','Cloud\x20login\x20required!','=([^&#]*)','state','replace','Do\x20not\x20receive\x20authorization','https://content.dropboxapi.com/2/files/upload','&grant_type=','Failed\x20to\x20refresh\x20Dropbox\x20token.','Kabu\x20storage\x20↦\x20Cloud\x20◆','save','knh3uz2mx2hp2eu','Bearer\x20','&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31','status','POST','accessToken','application/octet-stream','Do\x20you\x20want\x20to\x20restore\x20','active','json','screenshot','14UqTYCb','error_description','Error\x20creating\x20folder\x20','5Ecrdzi','Folder\x20created','length','setItem','name','uId','blob','3142696HpBdPq','Restoring...','\x20files\x20in\x20Kabu?','location','offline','href','https://api.dropboxapi.com/2/files/list_folder','onload','uploadFileInCloud','Folder\x20already\x20exists','refreshToken','push','getItem','stringify','split','send','Restore\x20canceled\x20by\x20user.','responseText','&client_secret=','error','application/x-www-form-urlencoded','290Pnhlvh','nwb3dnfh09rhs31','&redirect_uri=','/data/','Failed\x20to\x20upload\x20file\x20','application/json','No\x20files\x20found\x20to\x20restore.','254367IqoXhE','Wait\x20a\x20little\x20bit...','click','setRequestHeader','Upload\x20failed,\x20unknown\x20http\x20status:\x20','.tag','open','&response_type=','classList','downloadFileInCloud'];a0_0x456c=function(){return _0x252e89;};return a0_0x456c();}document[a0_0x5a8145(0x1be)](a0_0x5a8145(0x1ca),function(){var _0xb705e=a0_0x5a8145;dropboxRestore[_0xb705e(0x1be)](_0xb705e(0x20c),async function(){var _0x5c637f=_0xb705e;await lockNoti(_0x5c637f(0x20b),'',0x1388);const _0x436ace=localStorage['getItem'](_0x5c637f(0x1ec)),_0x742c4c=['state',_0x5c637f(0x1d8),'screenshot'];if(!_0x436ace){window[_0x5c637f(0x1bc)]('Cloud\x20login\x20required!');return;}let _0x106c62=[];for(const _0x526942 of _0x742c4c){let _0x17cb64={'path':'/'+_0x436ace+'/'+_0x526942};for(let _0x45f098=0x0;_0x45f098<0x2;_0x45f098++){let _0x1aff6f=await fetch(_0x5c637f(0x1f4),{'method':_0x5c637f(0x1dd),'headers':{'Authorization':_0x5c637f(0x1da)+localStorage['getItem']('accessToken'),'Content-Type':_0x5c637f(0x208)},'body':JSON[_0x5c637f(0x1fb)](_0x17cb64)});if(_0x1aff6f['status']===0xc8){let _0x3531c0=await _0x1aff6f[_0x5c637f(0x1e2)](),_0x5ebeda=_0x3531c0['entries'][_0x5c637f(0x216)](_0x4eb5b8=>_0x4eb5b8[_0x5c637f(0x20f)]===_0x5c637f(0x1ce));_0x5ebeda[_0x5c637f(0x1e9)]>0x0&&_0x106c62[_0x5c637f(0x1f9)](..._0x5ebeda['map'](_0x16873c=>({'name':_0x16873c[_0x5c637f(0x1eb)],'folder':_0x526942})));break;}else{if(_0x1aff6f['status']===0x191){let _0x4bbc86=await dpRefreshToken();if(!_0x4bbc86)throw'Unable\x20to\x20refresh\x20token';}else{console[_0x5c637f(0x201)](_0x5c637f(0x1c1)+_0x526942+',\x20status:\x20'+_0x1aff6f['status']);break;}}}}if(_0x106c62[_0x5c637f(0x1e9)]>0x0){const _0x41bc4d=_0x5c637f(0x1e0)+_0x106c62[_0x5c637f(0x1e9)]+'\x20files\x20from\x20Cloud?';if(window['confirm'](_0x41bc4d))for(const _0x2ab70b of _0x106c62){await lockNoti(_0x5c637f(0x1ef),_0x2ab70b['name'],0xbb8),await dpDownloadFile(_0x2ab70b[_0x5c637f(0x1eb)],_0x2ab70b['folder']);}else console[_0x5c637f(0x1bd)](_0x5c637f(0x1fe));}else console[_0x5c637f(0x1bd)](_0x5c637f(0x209));}),dropboxBackup['addEventListener']('click',async function(){var _0x40c514=_0xb705e;await lockNoti(_0x40c514(0x20b),'',0x1388);const _0x5f1736=localStorage['getItem']('uId');if(_0x5f1736===null||_0x5f1736==='')window[_0x40c514(0x1bc)](_0x40c514(0x1cf));else{const _0x16d5f4=[_0x40c514(0x1d1),_0x40c514(0x1d8),_0x40c514(0x1e3)];for(const _0x225bdb of _0x16d5f4){await dpCreateFolder(_0x225bdb);}let _0x3d1aeb=0x0;for(const _0x34232e of _0x16d5f4){const _0x1786c4=a0_0x5de806[_0x40c514(0x1c5)](_0x34232e+'s');_0x3d1aeb+=_0x1786c4[_0x40c514(0x1e9)];}if(window[_0x40c514(0x1bf)](_0x40c514(0x1b4)+_0x3d1aeb+_0x40c514(0x1f0)))for(const _0x567f97 of _0x16d5f4){const _0x17645d=a0_0x5de806[_0x40c514(0x1c5)](_0x567f97+'s');for(const _0x18a7d1 of _0x17645d){const _0x2a593a=await a0_0x5de806[_0x40c514(0x213)](_0x40c514(0x206)+_0x567f97+'s/'+_0x18a7d1);try{await lockNoti('Backing\x20up...',_0x18a7d1,0xbb8),await dpUploadFile(_0x18a7d1,_0x2a593a,_0x567f97);}catch(_0x1d25b4){console['error'](_0x40c514(0x207)+_0x18a7d1+':',_0x1d25b4);}}}else console['log'](_0x40c514(0x1fe));}}),dropboxCloud['addEventListener'](_0xb705e(0x20c),function(){var _0x4858a9=_0xb705e;const _0x22716d=localStorage['getItem'](_0x4858a9(0x1ec));_0x22716d===null||_0x22716d===''?authorizeWithDropbox():window[_0x4858a9(0x1bf)](_0x4858a9(0x1cd))&&(localStorage[_0x4858a9(0x1ea)](_0x4858a9(0x1ec),''),dropboxRestore[_0x4858a9(0x212)][_0x4858a9(0x1b9)](_0x4858a9(0x1e1)),dropboxBackup[_0x4858a9(0x212)][_0x4858a9(0x1b9)]('active'),dropboxCloud[_0x4858a9(0x212)][_0x4858a9(0x1b9)](_0x4858a9(0x1e1)));}),handleDropboxCallback();});
>>>>>>> parent of ac7e6c3 (--- Build V3.41 ---)
