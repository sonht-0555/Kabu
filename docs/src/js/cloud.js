function a0_0x339d(_0x296cc5,_0x2c8d55){var _0x1aa90d=a0_0x1aa9();return a0_0x339d=function(_0x339d29,_0x429f79){_0x339d29=_0x339d29-0x80;var _0x2f5953=_0x1aa90d[_0x339d29];return _0x2f5953;},a0_0x339d(_0x296cc5,_0x2c8d55);}var a0_0x2f19c7=a0_0x339d;(function(_0x53b273,_0x3fa1df){var _0x17460b=a0_0x339d,_0x402f45=_0x53b273();while(!![]){try{var _0x44be88=-parseInt(_0x17460b(0x9d))/0x1*(-parseInt(_0x17460b(0xb5))/0x2)+parseInt(_0x17460b(0x9e))/0x3+-parseInt(_0x17460b(0xa4))/0x4*(parseInt(_0x17460b(0x8e))/0x5)+parseInt(_0x17460b(0x9c))/0x6*(parseInt(_0x17460b(0xba))/0x7)+parseInt(_0x17460b(0xaf))/0x8+-parseInt(_0x17460b(0xea))/0x9+-parseInt(_0x17460b(0xd8))/0xa;if(_0x44be88===_0x3fa1df)break;else _0x402f45['push'](_0x402f45['shift']());}catch(_0xb1300c){_0x402f45['push'](_0x402f45['shift']());}}}(a0_0x1aa9,0x3437c));import*as a0_0x4d5c02 from'./main.js';function a0_0x1aa9(){var _0x21974b=['accessToken','application/x-www-form-urlencoded','1495284kvIsgu','3iaXaEo','417591CtqeLM','gba','setItem','Cloud\x20↦\x20Kabu\x20storage\x20◆','offline','Failed\x20to\x20upload\x20file\x20','80RlamIp','addEventListener','/data/','Cloud\x20login\x20required!','Backing\x20up...','classList','.tag','FSSync','.ss0','text/plain','length','2993968ZoJQaf','exec','send','responseText','href','charAt','180858ppuFTk','&token_access_type=','uploadSaveOrSaveState','setRequestHeader','alert','7TujUel','authorization_code','entries','No\x20refresh\x20token','Download\x20failed,\x20unknown\x20http\x20status:','endsWith','text','&client_secret=','\x20files\x20in\x20Cloud?','Do\x20not\x20receive\x20authorization','uId','status','https://content.dropboxapi.com/2/files/download','stringify','search','.ss6','list','substring','open','nwb3dnfh09rhs31','refreshToken','Do\x20you\x20want\x20to\x20restore\x20','Bearer\x20','_dateState','Kabu\x20storage\x20↦\x20Cloud\x20◆','Do\x20you\x20want\x20to\x20logout?','.ss5','&response_type=','.gba_slot','replace','4126990xwlZcb','blob','error_description','.ss2','\x20files\x20in\x20Kabu?','=([^&#]*)','knh3uz2mx2hp2eu','Restoring...','filter','application/json','https://www.dropbox.com/oauth2/authorize?client_id=','[\x5c?&#]','name','overwrite','Restore\x20canceled\x20by\x20user.','file','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','lastIndexOf','3662469iYBnUb','log','downloadFileInCloud','Refreshing\x20token...','split','Error\x20while\x20refreshing\x20token:','Do\x20you\x20want\x20to\x20backup\x20','active','remove','Unable\x20to\x20refresh\x20token','access_token','&redirect_uri=','&client_id=','.ss3','.ss7','getItem','POST','Authorization\x20Code:','code','.ss1','105meivhT','Content-Type','error','.txt','confirm','&grant_type=','save','.gba_dateState','json','slice','click','location'];a0_0x1aa9=function(){return _0x21974b;};return a0_0x1aa9();}import{localStorageFile}from'./storage.js';var clientId=a0_0x2f19c7(0xde),clientSecret=a0_0x2f19c7(0xcd);function authorizeWithDropbox(){var _0x2f0a9d=a0_0x2f19c7,_0x5bd0da=window[_0x2f0a9d(0x99)][_0x2f0a9d(0xb3)][_0x2f0a9d(0xee)]('?')[0x0],_0x500186=_0x2f0a9d(0x8c),_0x3c72bd=_0x2f0a9d(0xa2),_0xf8269d=_0x2f0a9d(0xe2)+clientId+_0x2f0a9d(0xd5)+_0x500186+_0x2f0a9d(0xb6)+_0x3c72bd+_0x2f0a9d(0x85)+encodeURIComponent(_0x5bd0da);window[_0x2f0a9d(0x99)]['href']=_0xf8269d;}function handleDropboxCallback(){var _0x4a52ac=a0_0x2f19c7,_0xf0ceb8=getUrlParameter(_0x4a52ac(0x8c));_0xf0ceb8?(getAccessToken(_0xf0ceb8),console[_0x4a52ac(0xeb)](_0x4a52ac(0x8b),_0xf0ceb8)):console[_0x4a52ac(0xeb)](_0x4a52ac(0xc3));}function getUrlParameter(_0x5aab5c){var _0x5ae28f=a0_0x2f19c7;_0x5aab5c=_0x5aab5c['replace'](/[\[]/,'\x5c[')[_0x5ae28f(0xd7)](/[\]]/,'\x5c]');var _0x304dcb=new RegExp(_0x5ae28f(0xe3)+_0x5aab5c+_0x5ae28f(0xdd)),_0x37396a=_0x304dcb[_0x5ae28f(0xb0)](location[_0x5ae28f(0xc8)]);return _0x37396a===null?'':decodeURIComponent(_0x37396a[0x1][_0x5ae28f(0xd7)](/\+/g,'\x20'));}function getAccessToken(_0x5d154e){var _0x21c39d=a0_0x2f19c7,_0x32da5b=_0x21c39d(0xbb),_0x41e64c=window[_0x21c39d(0x99)]['href'][_0x21c39d(0xee)]('?')[0x0],_0x5bf14b=new XMLHttpRequest();_0x5bf14b[_0x21c39d(0xcc)](_0x21c39d(0x8a),'https://api.dropbox.com/oauth2/token'),_0x5bf14b[_0x21c39d(0xb8)](_0x21c39d(0x8f),_0x21c39d(0x9b)),_0x5bf14b['onload']=function(){var _0xca0387=_0x21c39d;if(_0x5bf14b[_0xca0387(0xc5)]===0xc8){var _0x8e9602=JSON['parse'](_0x5bf14b[_0xca0387(0xb2)]),_0x320178=_0x8e9602['access_token'],_0x180747=_0x8e9602['refresh_token'],_0x48dfa5=_0x8e9602['uid'];localStorage['setItem'](_0xca0387(0x9a),_0x320178),localStorage['setItem']('refreshToken',_0x180747),localStorage[_0xca0387(0xa0)](_0xca0387(0xc4),_0x48dfa5);}else console[_0xca0387(0xeb)](_0xca0387(0xe8));},_0x5bf14b[_0x21c39d(0xb1)]('code='+_0x5d154e+_0x21c39d(0x93)+_0x32da5b+_0x21c39d(0x86)+clientId+_0x21c39d(0xc1)+clientSecret+_0x21c39d(0x85)+encodeURIComponent(_0x41e64c));}export async function dpRefreshToken(){var _0x5071f9=a0_0x2f19c7;if(!localStorage['getItem'](_0x5071f9(0xce)))throw _0x5071f9(0xbd);try{const _0xb1aa61=await fetch('https://api.dropboxapi.com/oauth2/token',{'method':_0x5071f9(0x8a),'headers':{'Content-Type':_0x5071f9(0x9b)},'body':'refresh_token='+localStorage[_0x5071f9(0x89)](_0x5071f9(0xce))+'&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31'}),_0x26518b=await _0xb1aa61['json']();if(!_0x26518b['error'])return localStorage['setItem'](_0x5071f9(0x9a),_0x26518b[_0x5071f9(0x84)]),await lockNoti('',_0x5071f9(0xed),0xbb8),await delay(0x3e8),!![];else alert(_0x26518b[_0x5071f9(0xda)]||'Failed\x20to\x20refresh\x20Dropbox\x20token.');}catch(_0x18f32b){console[_0x5071f9(0x90)](_0x5071f9(0xef),_0x18f32b);}return![];}export async function dpUploadFile(_0x6de85f,_0x563a79){var _0x3289f8=a0_0x2f19c7;const _0x28c07c=localStorage['getItem'](_0x3289f8(0xc4));var _0x5bea33=JSON[_0x3289f8(0xc7)]({'autorename':!![],'mode':_0x3289f8(0xe5),'mute':!![],'strict_conflict':![],'path':'/'+_0x28c07c+'/'+_0x6de85f}),_0x544eb5=new Blob([_0x563a79],{'type':'application/octet-stream'});for(var _0x5092c9=0x0;_0x5092c9<0x2;_0x5092c9++){var _0x2a526a=await fetch('https://content.dropboxapi.com/2/files/upload',{'method':_0x3289f8(0x8a),'headers':{'Authorization':_0x3289f8(0xd0)+localStorage[_0x3289f8(0x89)](_0x3289f8(0x9a)),'Dropbox-API-Arg':_0x5bea33,'Content-Type':'application/octet-stream'},'body':_0x544eb5});if(_0x2a526a[_0x3289f8(0xc5)]!=0xc8){if(_0x2a526a[_0x3289f8(0xc5)]==0x191){var _0x1c0f9c=await dpRefreshToken();if(!_0x1c0f9c)throw _0x3289f8(0x83);continue;}else throw'Upload\x20failed,\x20unknown\x20http\x20status:\x20'+_0x2a526a['status'];}else{var _0x96f2bb=await _0x2a526a[_0x3289f8(0x96)]();return console['log'](_0x3289f8(0xd2),_0x6de85f),_0x96f2bb;}}return![];}async function dpDownloadFile(_0x40b140){var _0x2e5583=a0_0x2f19c7;const _0x332913=localStorage['getItem'](_0x2e5583(0xc4));var _0x342337=JSON[_0x2e5583(0xc7)]({'path':'/'+_0x332913+'/'+_0x40b140});for(var _0x260459=0x0;_0x260459<0x2;_0x260459++){var _0x5414c5=await fetch(_0x2e5583(0xc6),{'method':'POST','headers':{'Authorization':'Bearer\x20'+localStorage[_0x2e5583(0x89)](_0x2e5583(0x9a)),'Dropbox-API-Arg':_0x342337}});if(_0x5414c5[_0x2e5583(0xc5)]!=0xc8){if(_0x5414c5[_0x2e5583(0xc5)]==0x191){var _0xa1a158=await dpRefreshToken();if(!_0xa1a158)throw _0x2e5583(0x83);continue;}else throw _0x2e5583(0xbe)+_0x5414c5[_0x2e5583(0xc5)];}const _0x3a6b85=new File([await _0x5414c5[_0x2e5583(0xd9)]()],_0x40b140);console[_0x2e5583(0xeb)](_0x2e5583(0xa1),_0x3a6b85[_0x2e5583(0xe4)]);if(_0x40b140[_0x2e5583(0xbf)](_0x2e5583(0x91))){const _0x298acc=await _0x3a6b85[_0x2e5583(0xc0)](),[_0x34e39c,_0x5eba3d]=_0x298acc[_0x2e5583(0xee)]('\x0a\x0a'),_0x26f863=_0x40b140[_0x2e5583(0xcb)](0x0,_0x40b140[_0x2e5583(0xe9)](_0x2e5583(0x9f))+0x3),_0x4e9f0b=_0x40b140[_0x2e5583(0xb4)](_0x40b140['length']-0x5);localStorage['setItem'](_0x26f863+_0x2e5583(0xd1)+_0x4e9f0b,_0x5eba3d),localStorage[_0x2e5583(0xa0)](_0x26f863+'_imageState'+_0x4e9f0b,_0x34e39c);}else a0_0x4d5c02[_0x2e5583(0xb7)](_0x3a6b85,()=>{var _0xf75b29=_0x2e5583;localStorageFile(),Module[_0xf75b29(0xab)]();});return _0x3a6b85;}return![];}document['addEventListener']('DOMContentLoaded',function(){var _0x3c2e62=a0_0x2f19c7;dropboxRestore[_0x3c2e62(0xa5)]('click',async function(){var _0x470106=_0x3c2e62;const _0x4a8b9e=localStorage[_0x470106(0x89)](_0x470106(0xc4));if(_0x4a8b9e===null||_0x4a8b9e==='')window[_0x470106(0xb9)](_0x470106(0xa7));else{var _0x1590c5={'path':'/'+_0x4a8b9e};for(var _0x5f4349=0x0;_0x5f4349<0x2;_0x5f4349++){var _0x52e2a6=await fetch('https://api.dropboxapi.com/2/files/list_folder',{'method':_0x470106(0x8a),'headers':{'Authorization':_0x470106(0xd0)+localStorage[_0x470106(0x89)](_0x470106(0x9a)),'Content-Type':_0x470106(0xe1)},'body':JSON[_0x470106(0xc7)](_0x1590c5)});console[_0x470106(0xeb)]('status:\x20',_0x52e2a6[_0x470106(0xc5)]);if(_0x52e2a6[_0x470106(0xc5)]!=0xc8){if(_0x52e2a6[_0x470106(0xc5)]==0x191){var _0x34a1ed=await dpRefreshToken();if(!_0x34a1ed)throw _0x470106(0x83);continue;}else throw'Download\x20failed,\x20unknown\x20http\x20status:\x20'+_0x52e2a6[_0x470106(0xc5)];}else{const _0x30fa72=await _0x52e2a6[_0x470106(0x96)](),_0x1f96a3=_0x30fa72['entries'][_0x470106(0xe0)](_0x1063d1=>_0x1063d1[_0x470106(0xaa)]===_0x470106(0xe7))['length'],_0xf6b96=_0x470106(0xcf)+_0x1f96a3+_0x470106(0xc2);if(window[_0x470106(0x92)](_0xf6b96))for(const _0x531e98 of _0x30fa72[_0x470106(0xbc)]){_0x531e98[_0x470106(0xaa)]===_0x470106(0xe7)&&(await lockNoti(_0x470106(0xdf),_0x531e98[_0x470106(0xe4)],0xbb8),await dpDownloadFile(_0x531e98[_0x470106(0xe4)]));}else console[_0x470106(0xeb)]('Restore\x20canceled\x20by\x20user.');return!![];}}return![];}}),dropboxBackup[_0x3c2e62(0xa5)](_0x3c2e62(0x98),async function(){var _0x2ec66c=_0x3c2e62;const _0x3098c9=localStorage[_0x2ec66c(0x89)]('uId');if(_0x3098c9===null||_0x3098c9==='')window['alert']('Cloud\x20login\x20required!');else{const _0x49e7dc=['state',_0x2ec66c(0x94)];let _0x28bb74=0x0;for(const _0x1d51a2 of _0x49e7dc){const _0x215ccf=a0_0x4d5c02[_0x2ec66c(0xca)+(_0x1d51a2[_0x2ec66c(0xb4)](0x0)['toUpperCase']()+_0x1d51a2[_0x2ec66c(0x97)](0x1))]();_0x28bb74+=_0x215ccf[_0x2ec66c(0xae)];}if(window['confirm'](_0x2ec66c(0x80)+_0x28bb74+_0x2ec66c(0xdc)))for(const _0x32d637 of _0x49e7dc){const _0x18c578=a0_0x4d5c02[_0x2ec66c(0xca)+(_0x32d637[_0x2ec66c(0xb4)](0x0)['toUpperCase']()+_0x32d637[_0x2ec66c(0x97)](0x1))]();for(const _0xb23e7d of _0x18c578){const _0x227e26=await a0_0x4d5c02[_0x2ec66c(0xec)](_0x2ec66c(0xa6)+_0x32d637+'s/'+_0xb23e7d);try{await lockNoti(_0x2ec66c(0xa8),_0xb23e7d,0xbb8),await dpUploadFile(_0xb23e7d,_0x227e26);if(_0xb23e7d[_0x2ec66c(0xbf)](_0x2ec66c(0xac))||_0xb23e7d['endsWith'](_0x2ec66c(0x8d))||_0xb23e7d['endsWith'](_0x2ec66c(0xdb))||_0xb23e7d[_0x2ec66c(0xbf)](_0x2ec66c(0x87))||_0xb23e7d[_0x2ec66c(0xbf)]('.ss4')||_0xb23e7d['endsWith'](_0x2ec66c(0xd4))||_0xb23e7d['endsWith'](_0x2ec66c(0xc9))||_0xb23e7d[_0x2ec66c(0xbf)](_0x2ec66c(0x88))){const _0x1e824c=_0xb23e7d[_0x2ec66c(0xcb)](0x0,_0xb23e7d[_0x2ec66c(0xe9)]('.')),_0x29794f=_0xb23e7d['charAt'](_0xb23e7d[_0x2ec66c(0xae)]-0x1),_0x10a708=localStorage[_0x2ec66c(0x89)](_0x1e824c+'.gba_imageState'+_0x29794f),_0x3eb9ed=localStorage['getItem'](_0x1e824c+_0x2ec66c(0x95)+_0x29794f);if(_0x10a708!==null){const _0x50a159=_0x10a708+'\x0a\x0a'+_0x3eb9ed,_0x50889d=new Blob([_0x50a159],{'type':_0x2ec66c(0xad)});await lockNoti(_0x2ec66c(0xa8),_0x1e824c+_0x2ec66c(0xd6)+_0x29794f+_0x2ec66c(0x91),0xbb8),await dpUploadFile(_0x1e824c+_0x2ec66c(0xd6)+_0x29794f+_0x2ec66c(0x91),_0x50889d);}}}catch(_0x132b5b){console[_0x2ec66c(0x90)](_0x2ec66c(0xa3)+_0xb23e7d+':',_0x132b5b);}}}else console[_0x2ec66c(0xeb)](_0x2ec66c(0xe6));}}),dropboxCloud[_0x3c2e62(0xa5)](_0x3c2e62(0x98),function(){var _0x19d62b=_0x3c2e62;const _0x4b3723=localStorage[_0x19d62b(0x89)](_0x19d62b(0xc4));_0x4b3723===null||_0x4b3723===''?authorizeWithDropbox():window['confirm'](_0x19d62b(0xd3))&&(localStorage[_0x19d62b(0xa0)](_0x19d62b(0xc4),''),dropboxRestore['classList'][_0x19d62b(0x82)](_0x19d62b(0x81)),dropboxBackup[_0x19d62b(0xa9)][_0x19d62b(0x82)](_0x19d62b(0x81)),dropboxCloud[_0x19d62b(0xa9)][_0x19d62b(0x82)](_0x19d62b(0x81)));}),handleDropboxCallback();});