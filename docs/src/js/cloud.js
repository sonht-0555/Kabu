var a0_0x179264=a0_0x2bf2;(function(_0x4882cb,_0x3e9c30){var _0x3cdfb0=a0_0x2bf2,_0x1b111b=_0x4882cb();while(!![]){try{var _0x45d1dc=-parseInt(_0x3cdfb0(0x1e4))/0x1*(parseInt(_0x3cdfb0(0x1c9))/0x2)+parseInt(_0x3cdfb0(0x1e6))/0x3*(-parseInt(_0x3cdfb0(0x1d8))/0x4)+parseInt(_0x3cdfb0(0x1f8))/0x5+-parseInt(_0x3cdfb0(0x20f))/0x6+-parseInt(_0x3cdfb0(0x1df))/0x7+-parseInt(_0x3cdfb0(0x1c1))/0x8+parseInt(_0x3cdfb0(0x1b4))/0x9;if(_0x45d1dc===_0x3e9c30)break;else _0x1b111b['push'](_0x1b111b['shift']());}catch(_0x3bb3b2){_0x1b111b['push'](_0x1b111b['shift']());}}}(a0_0x5006,0x44290));import*as a0_0x3e9706 from'./main.js';function a0_0x5006(){var _0x206c93=['error','&token_access_type=','Bearer\x20','https://www.dropbox.com/oauth2/authorize?client_id=','Restore\x20canceled\x20by\x20user.','onload','name','Do\x20you\x20want\x20to\x20backup\x20','Authorization\x20Code:','application/x-www-form-urlencoded','addEventListener','list','refresh_token','application/json','exec','873445gLqTia','stringify','https://content.dropboxapi.com/2/files/upload','Restoring...','https://api.dropboxapi.com/2/files/create_folder_v2','push','uploadFileInCloud','refresh_token=','knh3uz2mx2hp2eu','log','Failed\x20to\x20refresh\x20Dropbox\x20token.','Unable\x20to\x20refresh\x20token','click','Do\x20you\x20want\x20to\x20logout?','folder','Error\x20creating\x20folder\x20','No\x20files\x20found\x20to\x20restore.','screenshot','remove','replace','https://api.dropboxapi.com/2/files/list_folder','DOMContentLoaded','toUpperCase','968070VQnTZL','getItem','status','charAt','Do\x20not\x20receive\x20authorization','json','active','search','downloadFileInCloud','Cloud\x20↦\x20Kabu\x20storage\x20◆','Refreshing\x20token...','setItem','split','code','10681236IhjAuz','alert','classList','Do\x20you\x20want\x20to\x20restore\x20','responseText','Upload\x20failed,\x20unknown\x20http\x20status:\x20','Error\x20while\x20refreshing\x20token:','map','slice','refreshToken','state','&redirect_uri=','save','1561192rRXgyA','\x20files\x20from\x20Cloud?','uId','send','No\x20refresh\x20token','/data/','https://api.dropbox.com/oauth2/token','[\x5c?&#]','62902xejJnc','Backing\x20up...','setRequestHeader','\x20files\x20in\x20Kabu?','filter','Do\x20not\x20receive\x20access\x20token\x20&\x20refresh\x20token','Folder\x20created','&client_secret=','FSSync','.tag','Download\x20failed,\x20unknown\x20http\x20status:','href','accessToken','file','Failed\x20to\x20upload\x20file\x20','4DdPvSp','&response_type=','application/octet-stream','confirm','=([^&#]*)','length','Cloud\x20login\x20required!','1127014pLHHWV','Folder\x20already\x20exists','blob','POST','authorization_code','4wzySxS','location','1317027TmHGwW','Kabu\x20storage\x20↦\x20Cloud\x20◆','Download\x20failed\x20for\x20'];a0_0x5006=function(){return _0x206c93;};return a0_0x5006();}import{localStorageFile}from'./storage.js';var clientId=a0_0x179264(0x200),clientSecret='nwb3dnfh09rhs31';function a0_0x2bf2(_0x29e839,_0x262fb4){var _0x50061e=a0_0x5006();return a0_0x2bf2=function(_0x2bf25c,_0x6d52c9){_0x2bf25c=_0x2bf25c-0x1b2;var _0x2acac3=_0x50061e[_0x2bf25c];return _0x2acac3;},a0_0x2bf2(_0x29e839,_0x262fb4);}function authorizeWithDropbox(){var _0x52cf3d=a0_0x179264,_0x25efeb=window[_0x52cf3d(0x1e5)][_0x52cf3d(0x1d4)][_0x52cf3d(0x1b2)]('?')[0x0],_0x1a364a=_0x52cf3d(0x1b3),_0x54718e='offline',_0x5f23fe=_0x52cf3d(0x1ec)+clientId+_0x52cf3d(0x1d9)+_0x1a364a+_0x52cf3d(0x1ea)+_0x54718e+'&redirect_uri='+encodeURIComponent(_0x25efeb);window[_0x52cf3d(0x1e5)][_0x52cf3d(0x1d4)]=_0x5f23fe;}function handleDropboxCallback(){var _0x3f6a9f=a0_0x179264,_0x43495a=getUrlParameter('code');_0x43495a?(getAccessToken(_0x43495a),console[_0x3f6a9f(0x201)](_0x3f6a9f(0x1f1),_0x43495a)):console['log'](_0x3f6a9f(0x213));}function getUrlParameter(_0x12e3da){var _0xaaa2e9=a0_0x179264;_0x12e3da=_0x12e3da[_0xaaa2e9(0x20b)](/[\[]/,'\x5c[')[_0xaaa2e9(0x20b)](/[\]]/,'\x5c]');var _0x1119de=new RegExp(_0xaaa2e9(0x1c8)+_0x12e3da+_0xaaa2e9(0x1dc)),_0x17d29b=_0x1119de[_0xaaa2e9(0x1f7)](location[_0xaaa2e9(0x216)]);return _0x17d29b===null?'':decodeURIComponent(_0x17d29b[0x1][_0xaaa2e9(0x20b)](/\+/g,'\x20'));}function getAccessToken(_0x29432a){var _0x431788=a0_0x179264,_0x4850e0=_0x431788(0x1e3),_0x133699=window[_0x431788(0x1e5)]['href'][_0x431788(0x1b2)]('?')[0x0],_0x3380a0=new XMLHttpRequest();_0x3380a0['open'](_0x431788(0x1e2),_0x431788(0x1c7)),_0x3380a0[_0x431788(0x1cb)]('Content-Type',_0x431788(0x1f2)),_0x3380a0[_0x431788(0x1ee)]=function(){var _0x43fa77=_0x431788;if(_0x3380a0[_0x43fa77(0x211)]===0xc8){var _0x5ab4da=JSON['parse'](_0x3380a0[_0x43fa77(0x1b8)]),_0x527b6b=_0x5ab4da['access_token'],_0x22fa59=_0x5ab4da[_0x43fa77(0x1f5)],_0x27d671=_0x5ab4da['uid'];localStorage[_0x43fa77(0x21a)](_0x43fa77(0x1d5),_0x527b6b),localStorage[_0x43fa77(0x21a)]('refreshToken',_0x22fa59),localStorage['setItem'](_0x43fa77(0x1c3),_0x27d671);}else console['log'](_0x43fa77(0x1ce));},_0x3380a0[_0x431788(0x1c4)]('code='+_0x29432a+'&grant_type='+_0x4850e0+'&client_id='+clientId+_0x431788(0x1d0)+clientSecret+_0x431788(0x1bf)+encodeURIComponent(_0x133699));}export async function dpCreateFolder(_0x28671d){var _0x92f8f1=a0_0x179264;const _0x16f9ad=localStorage[_0x92f8f1(0x210)](_0x92f8f1(0x1c3));let _0x34ed23=localStorage['getItem']('accessToken');const _0x5510ef='/'+_0x16f9ad+'/'+_0x28671d,_0x27d2ef=JSON[_0x92f8f1(0x1f9)]({'path':_0x5510ef,'autorename':![]});for(let _0x48555c=0x0;_0x48555c<0x2;_0x48555c++){try{const _0x593411=await fetch(_0x92f8f1(0x1fc),{'method':'POST','headers':{'Authorization':_0x92f8f1(0x1eb)+_0x34ed23,'Content-Type':_0x92f8f1(0x1f6)},'body':_0x27d2ef});if(_0x593411[_0x92f8f1(0x211)]===0x191){const _0x447154=await dpRefreshToken();if(!_0x447154)throw new Error('Unable\x20to\x20refresh\x20token');_0x34ed23=localStorage[_0x92f8f1(0x210)](_0x92f8f1(0x1d5));continue;}if(_0x593411[_0x92f8f1(0x211)]===0x199)return{'message':_0x92f8f1(0x1e0),'path':_0x28671d};if(!_0x593411['ok'])throw new Error(_0x92f8f1(0x207)+_0x28671d);const _0x41cf86=await _0x593411[_0x92f8f1(0x214)]();return await lockNoti(_0x92f8f1(0x1cf),'',0xbb8),_0x41cf86;}catch(_0x58c2d0){if(_0x48555c===0x1)throw _0x58c2d0;}}return![];}export async function dpRefreshToken(){var _0x3b77a3=a0_0x179264;if(!localStorage[_0x3b77a3(0x210)](_0x3b77a3(0x1bd)))throw _0x3b77a3(0x1c5);try{const _0x15ceca=await fetch('https://api.dropboxapi.com/oauth2/token',{'method':_0x3b77a3(0x1e2),'headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0x3b77a3(0x1ff)+localStorage['getItem'](_0x3b77a3(0x1bd))+'&grant_type=refresh_token&client_id=knh3uz2mx2hp2eu&client_secret=nwb3dnfh09rhs31'}),_0x2552a5=await _0x15ceca['json']();if(!_0x2552a5[_0x3b77a3(0x1e9)])return localStorage[_0x3b77a3(0x21a)]('accessToken',_0x2552a5['access_token']),await lockNoti(_0x3b77a3(0x219),'',0xbb8),await delay(0x3e8),!![];else alert(_0x2552a5['error_description']||_0x3b77a3(0x202));}catch(_0x36e5f7){console['error'](_0x3b77a3(0x1ba),_0x36e5f7);}return![];}export async function dpUploadFile(_0x21f74c,_0x43faba,_0x3b3b61){var _0x5563d=a0_0x179264;const _0x1211eb=localStorage[_0x5563d(0x210)](_0x5563d(0x1c3));var _0x3e20d8=JSON[_0x5563d(0x1f9)]({'autorename':!![],'mode':'overwrite','mute':!![],'strict_conflict':![],'path':'/'+_0x1211eb+'/'+_0x3b3b61+'/'+_0x21f74c}),_0x5826ea=new Blob([_0x43faba],{'type':_0x5563d(0x1da)});for(var _0x874483=0x0;_0x874483<0x2;_0x874483++){var _0x24baf3=await fetch(_0x5563d(0x1fa),{'method':'POST','headers':{'Authorization':_0x5563d(0x1eb)+localStorage['getItem'](_0x5563d(0x1d5)),'Dropbox-API-Arg':_0x3e20d8,'Content-Type':_0x5563d(0x1da)},'body':_0x5826ea});if(_0x24baf3[_0x5563d(0x211)]!=0xc8){if(_0x24baf3['status']==0x191){var _0x3506cb=await dpRefreshToken();if(!_0x3506cb)throw _0x5563d(0x203);continue;}else throw _0x5563d(0x1b9)+_0x24baf3[_0x5563d(0x211)];}else{var _0x2cb423=await _0x24baf3[_0x5563d(0x214)]();return console['log'](_0x5563d(0x1e7),_0x21f74c),_0x2cb423;}}return![];}export async function dpDownloadFile(_0x563bdf,_0x3da1a8){var _0x56f95c=a0_0x179264;const _0x1f2baa=localStorage['getItem'](_0x56f95c(0x1c3));var _0x2f0080=JSON['stringify']({'path':'/'+_0x1f2baa+'/'+_0x3da1a8+'/'+_0x563bdf});for(var _0x16fe74=0x0;_0x16fe74<0x2;_0x16fe74++){var _0x294195=await fetch('https://content.dropboxapi.com/2/files/download',{'method':'POST','headers':{'Authorization':_0x56f95c(0x1eb)+localStorage['getItem']('accessToken'),'Dropbox-API-Arg':_0x2f0080}});if(_0x294195[_0x56f95c(0x211)]!=0xc8){if(_0x294195[_0x56f95c(0x211)]==0x191){var _0x3d7584=await dpRefreshToken();if(!_0x3d7584)throw _0x56f95c(0x203);continue;}else throw _0x56f95c(0x1d3)+_0x294195[_0x56f95c(0x211)];}const _0x152c19=new File([await _0x294195[_0x56f95c(0x1e1)]()],_0x563bdf);return console[_0x56f95c(0x201)](_0x56f95c(0x218),_0x152c19['name']),a0_0x3e9706[_0x56f95c(0x1fe)](_0x152c19,()=>{var _0x57f251=_0x56f95c;localStorageFile(),Module[_0x57f251(0x1d1)]();}),_0x152c19;}return![];}document[a0_0x179264(0x1f3)](a0_0x179264(0x20d),function(){var _0x436c63=a0_0x179264;dropboxRestore[_0x436c63(0x1f3)](_0x436c63(0x204),async function(){var _0x4b923e=_0x436c63;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x591137=localStorage[_0x4b923e(0x210)](_0x4b923e(0x1c3)),_0x55a70c=[_0x4b923e(0x1be),_0x4b923e(0x1c0),_0x4b923e(0x209)];if(!_0x591137){window[_0x4b923e(0x1b5)](_0x4b923e(0x1de));return;}let _0x236f90=[];for(const _0x52f929 of _0x55a70c){let _0x4634d9={'path':'/'+_0x591137+'/'+_0x52f929};for(let _0x203b54=0x0;_0x203b54<0x2;_0x203b54++){let _0x3a07b4=await fetch(_0x4b923e(0x20c),{'method':_0x4b923e(0x1e2),'headers':{'Authorization':'Bearer\x20'+localStorage[_0x4b923e(0x210)](_0x4b923e(0x1d5)),'Content-Type':'application/json'},'body':JSON[_0x4b923e(0x1f9)](_0x4634d9)});if(_0x3a07b4[_0x4b923e(0x211)]===0xc8){let _0x1eb002=await _0x3a07b4[_0x4b923e(0x214)](),_0x261491=_0x1eb002['entries'][_0x4b923e(0x1cd)](_0x32c9e4=>_0x32c9e4[_0x4b923e(0x1d2)]===_0x4b923e(0x1d6));_0x261491[_0x4b923e(0x1dd)]>0x0&&_0x236f90[_0x4b923e(0x1fd)](..._0x261491[_0x4b923e(0x1bb)](_0x283d20=>({'name':_0x283d20[_0x4b923e(0x1ef)],'folder':_0x52f929})));break;}else{if(_0x3a07b4[_0x4b923e(0x211)]===0x191){let _0x547400=await dpRefreshToken();if(!_0x547400)throw _0x4b923e(0x203);}else{console[_0x4b923e(0x1e9)](_0x4b923e(0x1e8)+_0x52f929+',\x20status:\x20'+_0x3a07b4[_0x4b923e(0x211)]);break;}}}}if(_0x236f90[_0x4b923e(0x1dd)]>0x0){const _0x385ca0=_0x4b923e(0x1b7)+_0x236f90['length']+_0x4b923e(0x1c2);if(window[_0x4b923e(0x1db)](_0x385ca0))for(const _0x3dd21b of _0x236f90){await lockNoti(_0x4b923e(0x1fb),_0x3dd21b[_0x4b923e(0x1ef)],0xbb8),await dpDownloadFile(_0x3dd21b[_0x4b923e(0x1ef)],_0x3dd21b[_0x4b923e(0x206)]);}else console[_0x4b923e(0x201)](_0x4b923e(0x1ed));}else console[_0x4b923e(0x201)](_0x4b923e(0x208));}),dropboxBackup[_0x436c63(0x1f3)]('click',async function(){var _0x50a655=_0x436c63;await lockNoti('Wait\x20a\x20little\x20bit...','',0x1388);const _0x29dc14=localStorage['getItem'](_0x50a655(0x1c3));if(_0x29dc14===null||_0x29dc14==='')window[_0x50a655(0x1b5)](_0x50a655(0x1de));else{const _0x28fed7=[_0x50a655(0x1be),_0x50a655(0x1c0),'screenshot'];for(const _0x117d97 of _0x28fed7){await dpCreateFolder(_0x117d97);}let _0x137201=0x0;for(const _0x2a2bde of _0x28fed7){const _0x298d89=a0_0x3e9706[_0x50a655(0x1f4)+(_0x2a2bde['charAt'](0x0)[_0x50a655(0x20e)]()+_0x2a2bde[_0x50a655(0x1bc)](0x1))]();_0x137201+=_0x298d89[_0x50a655(0x1dd)];}if(window[_0x50a655(0x1db)](_0x50a655(0x1f0)+_0x137201+_0x50a655(0x1cc)))for(const _0x57d0a4 of _0x28fed7){const _0x897467=a0_0x3e9706['list'+(_0x57d0a4[_0x50a655(0x212)](0x0)[_0x50a655(0x20e)]()+_0x57d0a4[_0x50a655(0x1bc)](0x1))]();for(const _0x5084d7 of _0x897467){const _0x4ddc7b=await a0_0x3e9706[_0x50a655(0x217)](_0x50a655(0x1c6)+_0x57d0a4+'s/'+_0x5084d7);try{await lockNoti(_0x50a655(0x1ca),_0x5084d7,0xbb8),await dpUploadFile(_0x5084d7,_0x4ddc7b,_0x57d0a4);}catch(_0x5f14bb){console[_0x50a655(0x1e9)](_0x50a655(0x1d7)+_0x5084d7+':',_0x5f14bb);}}}else console[_0x50a655(0x201)]('Restore\x20canceled\x20by\x20user.');}}),dropboxCloud[_0x436c63(0x1f3)](_0x436c63(0x204),function(){var _0x13eb6c=_0x436c63;const _0x564530=localStorage['getItem']('uId');_0x564530===null||_0x564530===''?authorizeWithDropbox():window['confirm'](_0x13eb6c(0x205))&&(localStorage[_0x13eb6c(0x21a)](_0x13eb6c(0x1c3),''),dropboxRestore[_0x13eb6c(0x1b6)][_0x13eb6c(0x20a)]('active'),dropboxBackup['classList']['remove'](_0x13eb6c(0x215)),dropboxCloud[_0x13eb6c(0x1b6)][_0x13eb6c(0x20a)](_0x13eb6c(0x215)));}),handleDropboxCallback();});