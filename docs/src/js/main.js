const a0_0x431a1d=a0_0x2758;(function(_0xb56073,_0x9479a7){const _0x2bc44e=a0_0x2758,_0x11b6c2=_0xb56073();while(!![]){try{const _0x916031=-parseInt(_0x2bc44e(0x127))/0x1*(parseInt(_0x2bc44e(0x18b))/0x2)+parseInt(_0x2bc44e(0x16a))/0x3+parseInt(_0x2bc44e(0x134))/0x4+parseInt(_0x2bc44e(0x199))/0x5*(-parseInt(_0x2bc44e(0x18a))/0x6)+-parseInt(_0x2bc44e(0x16b))/0x7+parseInt(_0x2bc44e(0x135))/0x8+parseInt(_0x2bc44e(0x171))/0x9;if(_0x916031===_0x9479a7)break;else _0x11b6c2['push'](_0x11b6c2['shift']());}catch(_0x3a088c){_0x11b6c2['push'](_0x11b6c2['shift']());}}}(a0_0x3406,0x4befd));import a0_0x15ad00 from'../core/1.1.0/mgba.js';import a0_0x490aa3 from'../core/2.0.0/mgba.js';import*as a0_0x2ce57d from'./gamepad.js';function a0_0x2758(_0x5d230a,_0xc0e2c1){const _0x340645=a0_0x3406();return a0_0x2758=function(_0x27583e,_0x3da652){_0x27583e=_0x27583e-0x11c;let _0x2dc60f=_0x340645[_0x27583e];return _0x2dc60f;},a0_0x2758(_0x5d230a,_0xc0e2c1);}import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x15ad00,'2.0.0':a0_0x490aa3};let currentVersion=localStorage[a0_0x431a1d(0x170)](a0_0x431a1d(0x148))||a0_0x431a1d(0x141),mGBA=versions[currentVersion];document[a0_0x431a1d(0x142)](a0_0x431a1d(0x148))['textContent']='Wasm_©'+currentVersion,document[a0_0x431a1d(0x142)](a0_0x431a1d(0x148))[a0_0x431a1d(0x15e)](a0_0x431a1d(0x16d),()=>{const _0x4df778=a0_0x431a1d,_0x2e8a90=Object[_0x4df778(0x166)](versions);let _0x5d5480=_0x2e8a90[_0x4df778(0x15c)](currentVersion);currentVersion=_0x2e8a90[(_0x5d5480+0x1)%_0x2e8a90['length']],localStorage[_0x4df778(0x12c)](_0x4df778(0x148),currentVersion),document[_0x4df778(0x142)](_0x4df778(0x148))[_0x4df778(0x152)]=_0x4df778(0x143)+currentVersion;});const Module={'canvas':document['getElementById'](a0_0x431a1d(0x14a))};function initializeCore(_0x5d382e,_0x5f2303){const _0x5833ed=a0_0x431a1d;_0x5d382e(_0x5f2303)[_0x5833ed(0x155)](function(_0x4b11e6){const _0x363d31=_0x5833ed;_0x4b11e6[_0x363d31(0x17d)]();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x431a1d(0x142)](a0_0x431a1d(0x14a)),controlSetting=document[a0_0x431a1d(0x142)]('control-setting');function handleVisibilityChange(_0x1e831d){const _0x4dda90=a0_0x431a1d;document['visibilityState']===_0x4dda90(0x189)||_0x1e831d?.['type']===_0x4dda90(0x14c)||_0x1e831d?.[_0x4dda90(0x164)]?(Module[_0x4dda90(0x11d)](),pauseGame(),canvas[_0x4dda90(0x15d)][_0x4dda90(0x160)](_0x4dda90(0x12b))):(setTimeout(()=>{const _0x3aad8b=_0x4dda90;canvas[_0x3aad8b(0x15d)][_0x3aad8b(0x162)](_0x3aad8b(0x12b));},0x258),controlSetting[_0x4dda90(0x15d)]['contains']('visible')&&resumeGame());}async function statusShow(){const _0x20a575=a0_0x431a1d;document[_0x20a575(0x15e)](_0x20a575(0x178),handleVisibilityChange),document['addEventListener'](_0x20a575(0x124),handleVisibilityChange),window['addEventListener']('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),await a0_0x2ce57d[_0x20a575(0x153)](parseInt(await getData(gameName,'0',_0x20a575(0x17f)))),await delay(0xc8),await Module[_0x20a575(0x145)](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x20a575(0x16e)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x59bd7a=a0_0x431a1d;await ledSave(_0x59bd7a(0x185)),await Module[_0x59bd7a(0x187)](0x0),await Module[_0x59bd7a(0x11d)](),await screenShot(0x0),console[_0x59bd7a(0x157)]('Auto\x20save\x20'+ ++countAutoSave+_0x59bd7a(0x147));}async function saveStateInCloud(){const _0x2d8b5a=a0_0x431a1d,_0x110090=gameName[_0x2d8b5a(0x131)](/\.(zip|gb|gbc|gba)$/,_0x2d8b5a(0x163)),_0x24047b=localStorage['getItem']('uId');navigator[_0x2d8b5a(0x14d)]&&(_0x24047b&&(await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x110090,Module['downloadFile'](_0x2d8b5a(0x151)+_0x110090),_0x2d8b5a(0x11c)),await lockNoti('',_0x2d8b5a(0x129)+ ++countUpload+_0x2d8b5a(0x147),0x7d0)));}function startTimer(){let [_0x24c7bb,_0x250ddd,_0xf92cf7,_0x53ee07,_0xcf9003]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x2b2e10=a0_0x2758;_0xf92cf7++,_0x53ee07++,_0xcf9003++;if(_0xf92cf7===0x3c)[_0xf92cf7,_0x250ddd]=[0x0,_0x250ddd+0x1];if(_0x250ddd===0x3c)[_0x250ddd,_0x24c7bb]=[0x0,_0x24c7bb+0x1];document[_0x2b2e10(0x142)](_0x2b2e10(0x17e))['textContent']=_0x24c7bb+'h'+_0x250ddd[_0x2b2e10(0x140)]()['padStart'](0x2,'0')+'.'+_0xf92cf7[_0x2b2e10(0x140)]()[_0x2b2e10(0x14f)](0x2,'0');_0x53ee07===0x3c&&(saveStatePeriodically(),_0x53ee07=0x0);;_0xcf9003===0x708&&(saveStateInCloud(),_0xcf9003=0x0);;},0x3e8);}export async function uploadGame(_0x3aef82){const _0x274603=a0_0x431a1d,_0x51651a=_0x3aef82['files'][0x0];Module[_0x274603(0x198)](_0x51651a,()=>{const _0x226652=_0x274603;Module[_0x226652(0x11d)]();});}export async function loadGame(_0x1804ba){const _0x351259=a0_0x431a1d,_0x4a439c=_0x1804ba[_0x351259(0x131)](/\.(gba|gbc|gb|zip)$/,_0x351259(0x163)),_0x43ed2e=Module[_0x351259(0x188)](_0x351259(0x180))[_0x351259(0x190)](_0x9cf446=>_0x9cf446!=='.'&&_0x9cf446!=='..');intro[_0x351259(0x15d)][_0x351259(0x160)](_0x351259(0x138)),errorLogElements[0x0]['style'][_0x351259(0x186)]='0',ingame[_0x351259(0x15d)][_0x351259(0x162)]('disable'),_0x1804ba['endsWith'](_0x351259(0x16c))||_0x1804ba[_0x351259(0x150)](_0x351259(0x13d))?(canvas[_0x351259(0x15d)]['add']('gbc'),areaTrans[_0x351259(0x15d)]['add'](_0x351259(0x15a)),localStorage[_0x351259(0x12c)](_0x351259(0x195),'0,0,'+(window[_0x351259(0x137)]-0xe6)+','+(window[_0x351259(0x137)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x351259(0x195),'0,0,'+(window[_0x351259(0x137)]-0x96)+','+(window[_0x351259(0x137)]-0x96)*0x2/0x3),_0x43ed2e[_0x351259(0x193)](_0x4a439c)?(await Module['loadGame'](_0x351259(0x167)+_0x1804ba),confirm(_0x351259(0x125))&&(await delay(0x64),await Module[_0x351259(0x14b)](0x0),await shaderData())):(await Module[_0x351259(0x18d)]('/data/games/'+_0x1804ba),await shaderData()),await statusShow();}function a0_0x3406(){const _0xe7e853=['addEventListener','appendChild','add','listStates','remove','.ss0','persisted','rgba(245,\x20232,\x20209,\x200.4)','keys','/data/games/','createObjectURL','opacity','170994uhsBZW','3733982SWuENJ','.gbc','click','slotStateSaved','toggleRewind','getItem','3999051OUVHCR','listCheats','led07','resumeGame','editFileName','match','autoLoadCheats','pagehide','entries','style','\x20|\x20','lastIndexOf','FSInit','timer','turboState','states','led04','0.4','led05','fill','#20A5A6','bottom','saveState','listFiles','hidden','1996242qgiqeH','37094aLXykW','buttonPress','loadGame','error','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','filter','setVolume','map','includes','Paused!','screenSize','led00','substring','uploadRom','5eENVAB','state','FSSync','listSaves','uploadAll','join','encode','buttonUnpress','fileSize','visibilitychange','Do\x20you\x20want\x20to\x20load\x20save\x20state?','noti-mess','10ZQQSJF','split','Cloud\x20upload\x20','deleteFile','visible','setItem','createElement','application/octet-stream','concat','.png','replace','trim','led02','2222680AFSuQs','2445064vzzMOS','exec','innerWidth','disable','tEXtComment\x00','\x20:\x20','led01','charCodeAt','.gb','href','download','toString','1.1.0','getElementById','Wasm_©','downloadFile','SDL2','led0','\x20time(s)','GBAver','screenshot','canvas','loadState','beforeunload','onLine','/data/screenshots/','padStart','endsWith','/data/states/','textContent','turboF','listScreenshots','then','image/png','log','body','All','gbc1','files','indexOf','classList'];a0_0x3406=function(){return _0xe7e853;};return a0_0x3406();}export async function saveState(_0xa1625c){await Module['saveState'](_0xa1625c);}export async function loadState(_0x4f25fa){const _0x4ef0de=a0_0x431a1d;await Module[_0x4ef0de(0x14b)](_0x4f25fa);}export async function downloadFile(_0x8627f0,_0x5df2a6){const _0x4d70d2=a0_0x431a1d,_0x19c939=Module['downloadFile'](_0x8627f0),_0x3aae43=document[_0x4d70d2(0x12d)]('a');document[_0x4d70d2(0x158)][_0x4d70d2(0x15f)](_0x3aae43),_0x3aae43[_0x4d70d2(0x13f)]=_0x5df2a6;const _0x580d59=new Blob([_0x19c939],{'type':_0x4d70d2(0x12e)});_0x3aae43[_0x4d70d2(0x13e)]=URL[_0x4d70d2(0x168)](_0x580d59),_0x3aae43['click'](),URL['revokeObjectURL'](_0x580d59),_0x3aae43[_0x4d70d2(0x162)]();}export function downloadFileInCloud(_0x5ef5db){const _0x59ee45=a0_0x431a1d;try{const _0x565280=Module[_0x59ee45(0x144)](_0x5ef5db);return _0x565280;}catch(_0x4acc89){return null;}}export async function uploadFileInCloud(_0x3717a2){const _0x3929c8=a0_0x431a1d;Module[_0x3929c8(0x11f)](_0x3717a2,async()=>{const _0x1662e1=_0x3929c8;localStorageFile(),await Module[_0x1662e1(0x11d)]();});}export async function uploadFile(_0xb212dc){const _0x207cea=a0_0x431a1d,_0x17f592=_0xb212dc[_0x207cea(0x15b)][0x0];Module[_0x207cea(0x11f)](_0x17f592,async()=>{const _0x312a2b=_0x207cea;localStorageFile(),await Module[_0x312a2b(0x11d)]();});}export async function editFile(_0x2d2d30,_0x5c6ec5,_0x15836a){const _0x429c30=a0_0x431a1d;await Module[_0x429c30(0x175)](_0x2d2d30,_0x5c6ec5,_0x15836a);}export async function deleteFile(_0x393d80){const _0x3fc1d8=a0_0x431a1d;try{return await Module[_0x3fc1d8(0x12a)](_0x393d80),!![];}catch(_0x784823){return console['error'](_0x393d80),null;}}export function listFiles(_0x271e2b){const _0xd72efa=a0_0x431a1d,_0x25e295=Module[_0xd72efa(0x188)](_0x271e2b)[_0xd72efa(0x190)](_0x4b2f85=>_0x4b2f85!=='.'&&_0x4b2f85!=='..');return _0x25e295;}export function listGame(){const _0x54bfcc=a0_0x431a1d,_0x17ddb8=Module['listRoms']()[_0x54bfcc(0x190)](_0x3a942b=>_0x3a942b!=='.'&&_0x3a942b!=='..');return _0x17ddb8;}export function listSave(){const _0x7db5b3=a0_0x431a1d,_0x53b1b1=Module[_0x7db5b3(0x11e)]()[_0x7db5b3(0x190)](_0x4cabc5=>_0x4cabc5!=='.'&&_0x4cabc5!=='..');return _0x53b1b1;}export function listState(){const _0x19b045=a0_0x431a1d,_0x56fd67=Module[_0x19b045(0x161)]()[_0x19b045(0x190)](_0x3718ca=>_0x3718ca!=='.'&&_0x3718ca!=='..');return _0x56fd67;}export function listCheat(){const _0x1d611f=a0_0x431a1d,_0x423e78=Module[_0x1d611f(0x172)]()[_0x1d611f(0x190)](_0x5167d9=>_0x5167d9!=='.'&&_0x5167d9!=='..');return _0x423e78;}export function listScreenshot(){const _0x41934d=a0_0x431a1d,_0x526b1a=Module[_0x41934d(0x154)]()['filter'](_0x358669=>_0x358669!=='.'&&_0x358669!=='..');return _0x526b1a;}export function fileSize(_0x352fe8){const _0x2827b9=a0_0x431a1d,_0x1b616f=Module[_0x2827b9(0x123)](_0x352fe8);return _0x1b616f;}export async function resumeGame(){const _0x2a984a=a0_0x431a1d;Module[_0x2a984a(0x174)](),Module[_0x2a984a(0x145)](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x5ca104=a0_0x431a1d;Module['pauseGame'](),Module['SDL2'](),notiMessage(_0x5ca104(0x194),0x7d0);}export async function buttonPress(_0x1475bf){const _0x5d74d5=a0_0x431a1d;Module[_0x5d74d5(0x18c)](_0x1475bf);}export async function buttonUnpress(_0x452dc1){const _0x5183a7=a0_0x431a1d;Module[_0x5183a7(0x122)](_0x452dc1);}export async function screenShot(_0x36cd17){const _0x4dabac=a0_0x431a1d,_0x2800ce=gameName[_0x4dabac(0x131)](/\.(gba|gbc|gb|zip)$/,'_'+_0x36cd17+_0x4dabac(0x130)),_0xe89330=await getData(gameName,_0x36cd17,_0x4dabac(0x159))||'';console[_0x4dabac(0x157)](_0xe89330),await Module[_0x4dabac(0x149)](_0x2800ce),await setData(gameName,_0x36cd17,'saveTime',formatDateTime(Date['now']()),_0xe89330);}export async function dowloadScreenShot(_0x416ba5){const _0x791a2=a0_0x431a1d;try{const _0x39b7cc=await fileToBase64(Module[_0x791a2(0x144)](_0x416ba5));return _0x39b7cc;}catch{}}export async function captureOCR(_0x4dc7ff){const _0x319e8b=a0_0x431a1d;Module['screenshot'](_0x4dc7ff);const _0x2ef4bb=Module[_0x319e8b(0x144)](_0x319e8b(0x14e)+_0x4dc7ff);return _0x2ef4bb;}export async function setFastForwardMultiplier(_0x2abff6){Module['setFastForwardMultiplier'](_0x2abff6);}export async function uploadCheats(_0x60780e){const _0x33996f=a0_0x431a1d;Module[_0x33996f(0x177)](),Module[_0x33996f(0x11f)](_0x60780e,async()=>{});}export function setVolume(_0x5e8573){const _0x2f6063=a0_0x431a1d;Module[_0x2f6063(0x191)](_0x5e8573);}export async function setData(_0x33fd38,_0x35d50a,_0x108663,_0x31a326,_0x17e6a3=''){const _0x14c5d9=a0_0x431a1d,_0x46e0ed=_0x33fd38['replace'](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x35ccc7=_0x14c5d9(0x14e)+_0x46e0ed+'_'+_0x35d50a+'.png';let _0x667997;try{_0x667997=await fileToBase64(Module[_0x14c5d9(0x144)](_0x35ccc7));}catch(_0x37db59){await Module[_0x14c5d9(0x149)](_0x46e0ed+'_'+_0x35d50a+_0x14c5d9(0x130)),await delay(0xc8),_0x667997=await fileToBase64(Module[_0x14c5d9(0x144)](_0x35ccc7));}let _0x20b627=atob(_0x667997[_0x14c5d9(0x128)](',')[0x1]),_0x31d5bc='tEXtComment\x00',_0x4373fb=_0x20b627['indexOf'](_0x31d5bc),_0x230ebe={};if(_0x4373fb!==-0x1||_0x17e6a3[_0x14c5d9(0x132)]()!==''){let _0x1052d7=_0x4373fb!==-0x1?_0x20b627[_0x14c5d9(0x197)](_0x4373fb+_0x31d5bc['length']):_0x17e6a3,_0x51ac01=/(\w+)\s*:\s*([^|]*)/g,_0xc4443;while((_0xc4443=_0x51ac01[_0x14c5d9(0x136)](_0x1052d7))!==null){_0x230ebe[_0xc4443[0x1][_0x14c5d9(0x132)]()]=_0xc4443[0x2]['trim']();}_0x4373fb!==-0x1&&(_0x20b627=_0x20b627[_0x14c5d9(0x197)](0x0,_0x4373fb));}_0x230ebe[_0x108663]=_0x31a326;let _0x2bde9a=Object[_0x14c5d9(0x179)](_0x230ebe)[_0x14c5d9(0x192)](([_0x20318e,_0x3b7b53])=>_0x20318e+_0x14c5d9(0x13a)+_0x3b7b53)[_0x14c5d9(0x120)](_0x14c5d9(0x17b)),_0x134473=new TextEncoder()[_0x14c5d9(0x121)](_0x31d5bc+'\x20'+_0x2bde9a),_0x3ec19d=new Uint8Array([..._0x20b627][_0x14c5d9(0x192)](_0x12c6e6=>_0x12c6e6[_0x14c5d9(0x13c)](0x0))[_0x14c5d9(0x12f)]([..._0x134473])),_0x4a3aa2=new File([new Blob([_0x3ec19d],{'type':'image/png'})],_0x46e0ed+'_'+_0x35d50a+_0x14c5d9(0x130),{'type':_0x14c5d9(0x156)});Module[_0x14c5d9(0x11f)](_0x4a3aa2,async()=>{});}export async function getData(_0x3440a7,_0x375c73,_0x19fdad){const _0x395f29=a0_0x431a1d;try{const _0x41fdc3=_0x3440a7[_0x395f29(0x131)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x9e9b00='/data/screenshots/'+_0x41fdc3+'_'+_0x375c73+_0x395f29(0x130);let _0x49d029;try{_0x49d029=await fileToBase64(Module[_0x395f29(0x144)](_0x9e9b00));}catch(_0xf3a4cb){return null;}let _0x501de1=atob(_0x49d029[_0x395f29(0x128)](',')[0x1]),_0x58bd2c=_0x395f29(0x139),_0x8018b7=_0x501de1[_0x395f29(0x15c)](_0x58bd2c);if(_0x8018b7!==-0x1){let _0x57db3c=_0x501de1[_0x395f29(0x197)](_0x8018b7+_0x58bd2c['length']);if(_0x19fdad==='All')return _0x57db3c[_0x395f29(0x132)]();let _0x42d5a8=new RegExp(_0x19fdad+_0x395f29(0x18f)),_0xbf090e=_0x57db3c[_0x395f29(0x176)](_0x42d5a8);if(_0xbf090e)return _0xbf090e[0x1][_0x395f29(0x132)]();}}catch(_0x3ddfc1){return console[_0x395f29(0x18e)]({'romName':_0x3440a7,'slot':_0x375c73,'type':_0x19fdad}),null;}}export async function ledSave(_0xfa7998){const _0x20b794=a0_0x431a1d,_0x31f2fd=parseInt(await getData(gameName,'0','slotStateSaved')),_0x1db90e=_0x31f2fd===0x1?_0x20b794(0x13b):_0x31f2fd===0x2?_0x20b794(0x133):_0x31f2fd===0x3?'led03':_0x31f2fd===0x4?_0x20b794(0x181):_0x31f2fd===0x5?_0x20b794(0x183):_0x31f2fd===0x6?'led06':_0x31f2fd===0x7?_0x20b794(0x173):_0x20b794(0x196);try{for(let _0x12921b=0x0;_0x12921b<=0x7;_0x12921b++){document[_0x20b794(0x142)](_0x20b794(0x146)+_0x12921b)['style'][_0x20b794(0x184)]=_0x20b794(0x165);}await delay(0x3e8);for(let _0x34e7d6=0x0;_0x34e7d6<=0x7;_0x34e7d6++){document[_0x20b794(0x142)](_0x20b794(0x146)+_0x34e7d6)[_0x20b794(0x17a)][_0x20b794(0x184)]=_0x20b794(0x165);}document[_0x20b794(0x142)](_0x1db90e)['style'][_0x20b794(0x184)]=_0xfa7998;}catch(_0x937595){console[_0x20b794(0x18e)]('Error\x20ledSave:',_0x937595);}};export async function notiMessage(_0x5441e6,_0x3df5b7,_0x370c0a=![]){const _0x19f727=a0_0x431a1d;var _0x19240c=document[_0x19f727(0x142)](_0x19f727(0x126));const _0x30504b=parseInt(await getData(gameName,'0',_0x19f727(0x16e)))||0x0;_0x19240c[_0x19f727(0x17a)][_0x19f727(0x169)]===_0x19f727(0x182)&&(clearTimeout(messageTimeout),_0x19240c[_0x19f727(0x17a)]['opacity']='0'),_0x19240c[_0x19f727(0x152)]=_0x5441e6,_0x19240c[_0x19f727(0x17a)][_0x19f727(0x169)]='0.4',messageTimeout=setTimeout(()=>{const _0x1c87e5=_0x19f727;_0x19240c[_0x1c87e5(0x152)]='['+_0x30504b+']\x20'+gameName['substring'](0x0,gameName[_0x1c87e5(0x17c)]('.')),_0x19240c[_0x1c87e5(0x17a)][_0x1c87e5(0x169)]=_0x1c87e5(0x182);},_0x3df5b7),_0x370c0a&&(canvas[_0x19f727(0x15d)]['add'](_0x19f727(0x12b)),setTimeout(()=>{const _0x5115cf=_0x19f727;canvas[_0x5115cf(0x15d)][_0x5115cf(0x162)](_0x5115cf(0x12b));},0x258));}export async function FSSync(){Module['FSSync']();}export const rewind=_0x14e7ef=>Module[a0_0x431a1d(0x16f)]?.(_0x14e7ef)||null;