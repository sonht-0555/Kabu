const a0_0x3b3b33=a0_0x1a26;(function(_0x270a9b,_0x4b9055){const _0x509878=a0_0x1a26,_0xc463dc=_0x270a9b();while(!![]){try{const _0x1679ce=parseInt(_0x509878(0x143))/0x1*(parseInt(_0x509878(0x106))/0x2)+-parseInt(_0x509878(0x121))/0x3+-parseInt(_0x509878(0x139))/0x4+-parseInt(_0x509878(0x124))/0x5*(-parseInt(_0x509878(0x107))/0x6)+-parseInt(_0x509878(0x131))/0x7*(parseInt(_0x509878(0x145))/0x8)+parseInt(_0x509878(0x132))/0x9*(parseInt(_0x509878(0x152))/0xa)+parseInt(_0x509878(0x109))/0xb;if(_0x1679ce===_0x4b9055)break;else _0xc463dc['push'](_0xc463dc['shift']());}catch(_0xa44e21){_0xc463dc['push'](_0xc463dc['shift']());}}}(a0_0x5b99,0xde04c));import a0_0x2067dc from'../core/mgba.js';import*as a0_0x34c1b9 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x3b3b33(0x147)]('canvas')};function initializeCore(_0x583cb2,_0x4a5ca2){const _0x3b8b25=a0_0x3b3b33;_0x583cb2(_0x4a5ca2)[_0x3b8b25(0x140)](function(_0x4c415c){_0x4c415c['FSInit']();});}initializeCore(a0_0x2067dc,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;function a0_0x5b99(){const _0x3b66eb=['getElementById','visibilityState','gameName','toString','\x20time(s)','listRoms','persisted','.png','onLine','listSaves','.ss0','8240240jRSGSG','application/octet-stream','fileSize','saveState','screenshot','href','/data/screenshots/','turboF','innerWidth','_savedCheats','text/plain','createObjectURL','download','screenSize','pagehide','getItem','style','filter','resumeGame','pauseGame','Do\x20you\x20want\x20to\x20load\x20save\x20state?','endsWith','No\x20screenshot!','uId','uploadAll','click','34xbTpVy','6ecVHkI','includes','20983171yKSUWI','loadGame','FSSync','Off','gbc1','addEventListener','log','_dateState0','_slot0.txt','turboState','Cloud\x20upload\x20','SDL2','Resumed!','createElement','#20A5A6','listStates','now','Auto\x20save\x20','timer','padStart','replace','visible','remove','classList','5305293WGUIJZ','disable','tEXtComment\x00','5854120SHiUaw','length','/data/states/','files','.gbc','contains','substring','set','beforeunload','setItem','Cheat\x20Enabled!','canvas','/data/games/','35JzVICg','9CBYYng','Online!','gbc','downloadFile','Unable\x20to\x20upload\x20to\x20Cloud!','split','revokeObjectURL','2570144ORdXdF','autoLoadCheats','image/png','listScreenshots','#E0C068','.gb','deleteFile','then','visibilitychange','body','17573XdFccK','add','1409272iWgIRx','0,0,'];a0_0x5b99=function(){return _0x3b66eb;};return a0_0x5b99();}const canvas=document['getElementById'](a0_0x3b3b33(0x12f)),savedTurboState=localStorage['getItem'](a0_0x3b3b33(0x112)),controlSetting=document[a0_0x3b3b33(0x147)]('control-setting');function handleVisibilityChange(_0x22fd6d){const _0x20d5c4=a0_0x3b3b33;document[_0x20d5c4(0x148)]==='hidden'||_0x22fd6d?.['type']==='beforeunload'||_0x22fd6d?.[_0x20d5c4(0x14d)]?(pauseGame(),canvas[_0x20d5c4(0x120)][_0x20d5c4(0x144)](_0x20d5c4(0x11e))):(setTimeout(()=>{const _0x39f1fe=_0x20d5c4;canvas['classList']['remove'](_0x39f1fe(0x11e));},0x258),controlSetting[_0x20d5c4(0x120)][_0x20d5c4(0x129)](_0x20d5c4(0x11e))&&resumeGame());}async function statusShow(){const _0x2b47ec=a0_0x3b3b33;document[_0x2b47ec(0x10e)](_0x2b47ec(0xfa),handleVisibilityChange),document[_0x2b47ec(0x10e)](_0x2b47ec(0x141),handleVisibilityChange),window[_0x2b47ec(0x10e)](_0x2b47ec(0x12c),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x34c1b9[_0x2b47ec(0x159)](turboState)),await delay(0xc8),await Module[_0x2b47ec(0x114)](),await delay(0x320),await led(parseInt(localStorage[_0x2b47ec(0xfb)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x169768=a0_0x3b3b33;await ledSave(_0x169768(0x117)),await Module[_0x169768(0x155)](0x0),await Module[_0x169768(0x10b)](),await screenShot(0x0),console['log'](_0x169768(0x11a)+ ++countAutoSave+_0x169768(0x14b));}async function saveStateInCloud(){const _0x17ff08=a0_0x3b3b33,_0x12f3a1=localStorage[_0x17ff08(0xfb)](_0x17ff08(0x149)),_0x5a360e=_0x12f3a1[_0x17ff08(0x11d)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x421cc3=localStorage['getItem'](_0x17ff08(0x103)),_0x7ba3c=localStorage['getItem'](_0x12f3a1+'_imageState0'),_0x5b7dac=localStorage['getItem'](_0x12f3a1+_0x17ff08(0x110));if(navigator[_0x17ff08(0x14f)]){if(_0x421cc3){await ledSave(_0x17ff08(0x13d)),await delay(0x3e8),await dpUploadFile(_0x5a360e,Module['downloadFile'](_0x17ff08(0x126)+_0x5a360e));if(_0x7ba3c!==null){const _0x1de9f8=_0x7ba3c+'\x0a\x0a'+_0x5b7dac,_0x3b3db5=new Blob([_0x1de9f8],{'type':_0x17ff08(0xf6)});await dpUploadFile(_0x12f3a1+_0x17ff08(0x111),_0x3b3db5);}else console[_0x17ff08(0x10f)](_0x17ff08(0x102));await lockNoti('',_0x17ff08(0x113)+ ++countUpload+'\x20time(s)',0x7d0);}else console['log'](_0x17ff08(0x136));}else console[_0x17ff08(0x10f)](_0x17ff08(0x133));}function startTimer(){let [_0x100480,_0x1a64a3,_0x103bb1,_0x256259,_0x2504d5]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x387804=a0_0x1a26;_0x103bb1++,_0x256259++,_0x2504d5++;if(_0x103bb1===0x3c)[_0x103bb1,_0x1a64a3]=[0x0,_0x1a64a3+0x1];if(_0x1a64a3===0x3c)[_0x1a64a3,_0x100480]=[0x0,_0x100480+0x1];document[_0x387804(0x147)](_0x387804(0x11b))['textContent']=_0x100480+'h'+_0x1a64a3['toString']()[_0x387804(0x11c)](0x2,'0')+'.'+_0x103bb1[_0x387804(0x14a)]()['padStart'](0x2,'0');_0x256259===0x3c&&(saveStatePeriodically(),_0x256259=0x0);;_0x2504d5===0xe10&&(saveStateInCloud(),_0x2504d5=0x0);;},0x3e8);}export async function uploadGame(_0x202a7c){const _0x31c881=a0_0x3b3b33,_0x54c531=_0x202a7c[_0x31c881(0x127)][0x0];Module['uploadRom'](_0x54c531,()=>{Module['FSSync']();});}export async function loadGame(_0x42708e){const _0x1d6ce7=a0_0x3b3b33,_0x4e0297=_0x42708e[_0x1d6ce7(0x11d)](/\.(gba|gbc|gb|zip)$/,_0x1d6ce7(0x151)),_0x302aac=Module[_0x1d6ce7(0x118)]()[_0x1d6ce7(0xfd)](_0x11d7cd=>_0x11d7cd!=='.'&&_0x11d7cd!=='..');intro[_0x1d6ce7(0x120)][_0x1d6ce7(0x144)](_0x1d6ce7(0x122)),errorLogElements[0x0][_0x1d6ce7(0xfc)]['bottom']='0',ingame[_0x1d6ce7(0x120)][_0x1d6ce7(0x11f)](_0x1d6ce7(0x122)),_0x42708e[_0x1d6ce7(0x101)](_0x1d6ce7(0x128))||_0x42708e[_0x1d6ce7(0x101)](_0x1d6ce7(0x13e))?(canvas[_0x1d6ce7(0x120)][_0x1d6ce7(0x144)](_0x1d6ce7(0x134)),areaTrans[_0x1d6ce7(0x120)][_0x1d6ce7(0x144)](_0x1d6ce7(0x10d)),localStorage[_0x1d6ce7(0x12d)](_0x1d6ce7(0xf9),_0x1d6ce7(0x146)+(window[_0x1d6ce7(0x15a)]-0xe6)+','+(window[_0x1d6ce7(0x15a)]-0xe6)*0x9/0xa)):localStorage[_0x1d6ce7(0x12d)](_0x1d6ce7(0xf9),_0x1d6ce7(0x146)+(window[_0x1d6ce7(0x15a)]-0x96)+','+(window[_0x1d6ce7(0x15a)]-0x96)*0x2/0x3),_0x302aac[_0x1d6ce7(0x108)](_0x4e0297)?(await Module[_0x1d6ce7(0x10a)](_0x1d6ce7(0x130)+_0x42708e),confirm(_0x1d6ce7(0x100))&&(await Module['loadState'](0x0),localStorage['setItem']('gameName',_0x42708e),console[_0x1d6ce7(0x10f)](_0x42708e))):(await Module[_0x1d6ce7(0x10a)](_0x1d6ce7(0x130)+_0x42708e),localStorage['setItem'](_0x1d6ce7(0x149),_0x42708e),console['log'](_0x42708e)),await statusShow();}export async function saveState(_0x88878c){await Module['saveState'](_0x88878c),await Module['FSSync']();}export async function loadState(_0x8fb222){await Module['loadState'](_0x8fb222);}export async function downloadFile(_0x418ed0,_0x519acf){const _0x3fabe7=a0_0x3b3b33,_0x293344=Module[_0x3fabe7(0x135)](_0x418ed0),_0x62bd7f=document[_0x3fabe7(0x116)]('a');document[_0x3fabe7(0x142)]['appendChild'](_0x62bd7f),_0x62bd7f[_0x3fabe7(0xf8)]=_0x519acf;const _0x1e162e=new Blob([_0x293344],{'type':_0x3fabe7(0x153)});_0x62bd7f[_0x3fabe7(0x157)]=URL[_0x3fabe7(0xf7)](_0x1e162e),_0x62bd7f[_0x3fabe7(0x105)](),URL[_0x3fabe7(0x138)](_0x1e162e),_0x62bd7f[_0x3fabe7(0x11f)]();}export function downloadFileInCloud(_0x51ee56){const _0x182648=a0_0x3b3b33,_0x25a11a=Module[_0x182648(0x135)](_0x51ee56);return _0x25a11a;}export async function uploadFile(_0x170c19){const _0x42597b=a0_0x3b3b33,_0x3171d3=_0x170c19[_0x42597b(0x127)][0x0];Module[_0x42597b(0x104)](_0x3171d3,()=>{const _0x2e790b=_0x42597b;localStorageFile(),Module[_0x2e790b(0x10b)]();});}export async function editFile(_0x513261,_0x23fc88,_0x4b19ca){const _0x4a0374=a0_0x3b3b33;await Module['editFileName'](_0x513261,_0x23fc88,_0x4b19ca),await Module[_0x4a0374(0x10b)]();}export async function deleteFile(_0x334ab9){const _0x1ed3f1=a0_0x3b3b33;await Module[_0x1ed3f1(0x13f)](_0x334ab9),await Module['FSSync']();}export function listGame(){const _0x31f726=a0_0x3b3b33,_0x4d0285=Module[_0x31f726(0x14c)]()[_0x31f726(0xfd)](_0x2dba13=>_0x2dba13!=='.'&&_0x2dba13!=='..');return _0x4d0285;}export function listSave(){const _0x1c3ad4=a0_0x3b3b33,_0x2ea48e=Module[_0x1c3ad4(0x150)]()[_0x1c3ad4(0xfd)](_0x3e3b4d=>_0x3e3b4d!=='.'&&_0x3e3b4d!=='..');return _0x2ea48e;}export function listState(){const _0x4dcc5c=a0_0x3b3b33,_0x555ece=Module[_0x4dcc5c(0x118)]()[_0x4dcc5c(0xfd)](_0x136f15=>_0x136f15!=='.'&&_0x136f15!=='..');return _0x555ece;}export function listCheat(){const _0x494426=a0_0x3b3b33,_0x507e5e=Module['listCheats']()[_0x494426(0xfd)](_0x1d8b28=>_0x1d8b28!=='.'&&_0x1d8b28!=='..');return _0x507e5e;}export function listScreenshot(){const _0x8670b9=a0_0x3b3b33,_0xac1ba3=Module[_0x8670b9(0x13c)]()[_0x8670b9(0xfd)](_0x2ea8ab=>_0x2ea8ab!=='.'&&_0x2ea8ab!=='..');return _0xac1ba3;}export function embedTextInPngFile(_0x40d07f,_0x43ab01,_0x145be0){const _0x3d0013=a0_0x3b3b33;let _0x1693e5=atob(_0x40d07f[_0x3d0013(0x137)](',')[0x1]),_0x4a925d=new Uint8Array(_0x1693e5[_0x3d0013(0x125)]);for(let _0x1b0a51=0x0;_0x1b0a51<_0x1693e5['length'];_0x1b0a51++){_0x4a925d[_0x1b0a51]=_0x1693e5['charCodeAt'](_0x1b0a51);}let _0x28aded=new TextEncoder()['encode'](_0x3d0013(0x123)+_0x43ab01),_0x496f4e=new Uint8Array(_0x4a925d['length']+_0x28aded['length']);_0x496f4e[_0x3d0013(0x12b)](_0x4a925d,0x0),_0x496f4e[_0x3d0013(0x12b)](_0x28aded,_0x4a925d['length']);let _0x281fa3=new Blob([_0x496f4e],{'type':_0x3d0013(0x13b)}),_0x23cd1f=new File([_0x281fa3],_0x145be0,{'type':'image/png'});return _0x23cd1f;}export function extractTextFromPngBase64(_0x21cee4){const _0x56f4d3=a0_0x3b3b33;let _0x81f48a=atob(_0x21cee4[_0x56f4d3(0x137)](',')[0x1]),_0x5ac4f7=_0x56f4d3(0x123),_0x39eab3=_0x81f48a['indexOf'](_0x5ac4f7);if(_0x39eab3!==-0x1)return _0x81f48a[_0x56f4d3(0x12a)](_0x39eab3+_0x5ac4f7['length']);return null;}export function fileSize(_0x706a66){const _0x1152b0=a0_0x3b3b33,_0x25b108=Module[_0x1152b0(0x154)](_0x706a66);return _0x25b108;}export async function resumeGame(){const _0x4c73c9=a0_0x3b3b33;Module[_0x4c73c9(0xfe)](),Module[_0x4c73c9(0x114)](),notiMessage(_0x4c73c9(0x115),0x7d0);}function a0_0x1a26(_0x36ff30,_0x388937){const _0x5b9985=a0_0x5b99();return a0_0x1a26=function(_0x1a264a,_0x1414db){_0x1a264a=_0x1a264a-0xf5;let _0x157e1e=_0x5b9985[_0x1a264a];return _0x157e1e;},a0_0x1a26(_0x36ff30,_0x388937);}export async function pauseGame(){const _0x3054aa=a0_0x3b3b33;Module[_0x3054aa(0xff)](),Module['SDL2'](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x486554){Module['buttonPress'](_0x486554);}export async function buttonUnpress(_0x302c8f){Module['buttonUnpress'](_0x302c8f);}export async function screenShot(_0x505f8a){const _0x31c7b0=a0_0x3b3b33,_0x59f072=localStorage[_0x31c7b0(0xfb)]('gameName')[_0x31c7b0(0x11d)](/\.(gba|gbc|gb|zip)$/,''),_0x5eee85=_0x59f072+'_'+_0x505f8a+_0x31c7b0(0x14e);await Module[_0x31c7b0(0x156)](_0x5eee85),await Module[_0x31c7b0(0x10b)]();const _0x11ce57=await fileToBase64(Module['downloadFile'](_0x31c7b0(0x158)+_0x5eee85)),_0x3a85ad=embedTextInPngFile(_0x11ce57,formatDateTime(Date[_0x31c7b0(0x119)]()),_0x5eee85);await uploadSaveOrSaveState(_0x3a85ad);}export async function dowloadScreenShot(_0x369c93){const _0x578f63=a0_0x3b3b33;try{const _0x350836=await fileToBase64(Module[_0x578f63(0x135)](_0x369c93));return _0x350836;}catch{}}export async function captureOCR(_0x5f1b8f){const _0x56f6ab=a0_0x3b3b33;Module[_0x56f6ab(0x156)](_0x5f1b8f);const _0x5812ae=Module[_0x56f6ab(0x135)](_0x56f6ab(0x158)+_0x5f1b8f);return _0x5812ae;}export async function setFastForwardMultiplier(_0x2f2648){Module['setFastForwardMultiplier'](_0x2f2648);}export function uploadCheats(_0x4cc13b,_0x1529f1,_0x4337f0,_0x3e4c65,_0x1f07d0){const _0x2ea83f=a0_0x3b3b33;Module[_0x2ea83f(0x104)](_0x4cc13b,()=>{const _0x77d274=_0x2ea83f;Module[_0x77d274(0x13a)](),setTimeout(()=>{const _0x5a2801=_0x77d274;Module[_0x5a2801(0x10b)]();},0x1f4),_0x3e4c65&&(localStorage[_0x77d274(0x12d)](_0x1529f1+'_savedCheats',_0x4337f0),notiMessage(_0x77d274(0x12e),0x5dc)),_0x1f07d0['textContent']=localStorage[_0x77d274(0xfb)](_0x1529f1+_0x77d274(0xf5)||_0x77d274(0x10c));});}