const a0_0x1ad946=a0_0x1db7;(function(_0x4d5716,_0xe63213){const _0x35d4ae=a0_0x1db7,_0x54068c=_0x4d5716();while(!![]){try{const _0x1970de=-parseInt(_0x35d4ae(0x12b))/0x1+parseInt(_0x35d4ae(0x164))/0x2*(parseInt(_0x35d4ae(0x13e))/0x3)+parseInt(_0x35d4ae(0x16a))/0x4*(parseInt(_0x35d4ae(0x148))/0x5)+parseInt(_0x35d4ae(0x152))/0x6*(-parseInt(_0x35d4ae(0x14a))/0x7)+-parseInt(_0x35d4ae(0x13c))/0x8+parseInt(_0x35d4ae(0x14f))/0x9+parseInt(_0x35d4ae(0x128))/0xa*(parseInt(_0x35d4ae(0x160))/0xb);if(_0x1970de===_0xe63213)break;else _0x54068c['push'](_0x54068c['shift']());}catch(_0x2bee14){_0x54068c['push'](_0x54068c['shift']());}}}(a0_0x3897,0xe11d9));import a0_0x15d7d9 from'../core/mgba.js';import*as a0_0xe07154 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document[a0_0x1ad946(0x145)](a0_0x1ad946(0x144))};function initializeCore(_0xae6c3f,_0x558c54){const _0x18be2d=a0_0x1ad946;_0xae6c3f(_0x558c54)[_0x18be2d(0x12e)](function(_0xfaf9fb){const _0x439e93=_0x18be2d;_0xfaf9fb[_0x439e93(0x172)]();});}initializeCore(a0_0x15d7d9,Module);function a0_0x1db7(_0x3ce6a8,_0x227987){const _0x38979b=a0_0x3897();return a0_0x1db7=function(_0x1db74a,_0x445bad){_0x1db74a=_0x1db74a-0x118;let _0x2bb9fd=_0x38979b[_0x1db74a];return _0x2bb9fd;},a0_0x1db7(_0x3ce6a8,_0x227987);}let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x1ad946(0x144)),savedTurboState=localStorage[a0_0x1ad946(0x149)](a0_0x1ad946(0x15f)),controlSetting=document[a0_0x1ad946(0x145)](a0_0x1ad946(0x178));function handleVisibilityChange(_0x200cb8){const _0xfdc13e=a0_0x1ad946;document[_0xfdc13e(0x136)]===_0xfdc13e(0x176)||_0x200cb8?.['type']==='beforeunload'||_0x200cb8?.['persisted']?(pauseGame(),canvas[_0xfdc13e(0x13a)]['add'](_0xfdc13e(0x119))):(setTimeout(()=>{const _0x468719=_0xfdc13e;canvas[_0x468719(0x13a)]['remove'](_0x468719(0x119));},0x258),controlSetting[_0xfdc13e(0x13a)][_0xfdc13e(0x146)](_0xfdc13e(0x119))&&resumeGame());}async function statusShow(){const _0x34bcf0=a0_0x1ad946;document[_0x34bcf0(0x12f)](_0x34bcf0(0x14c),handleVisibilityChange),document[_0x34bcf0(0x12f)](_0x34bcf0(0x154),handleVisibilityChange),window[_0x34bcf0(0x12f)](_0x34bcf0(0x13d),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0xe07154['turboF'](turboState)),await delay(0xc8),await Module[_0x34bcf0(0x131)](),await delay(0x320),await led(parseInt(localStorage[_0x34bcf0(0x149)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x1a0572=a0_0x1ad946;await ledSave(_0x1a0572(0x130)),await Module[_0x1a0572(0x134)](0x0),await Module[_0x1a0572(0x151)](),await screenShot(0x0),console[_0x1a0572(0x166)]('Auto\x20save\x20'+ ++countAutoSave+_0x1a0572(0x159));}async function saveStateInCloud(){const _0x393d62=a0_0x1ad946,_0x2db8c5=localStorage['getItem'](_0x393d62(0x124)),_0x4e7d2f=_0x2db8c5[_0x393d62(0x17b)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0xe2a02d=localStorage[_0x393d62(0x149)]('uId');navigator[_0x393d62(0x15b)]&&(_0xe2a02d&&(await ledSave(_0x393d62(0x17a)),await delay(0x3e8),await dpUploadFile(_0x4e7d2f,Module['downloadFile']('/data/states/'+_0x4e7d2f),_0x393d62(0x11e)),await lockNoti('',_0x393d62(0x14d)+ ++countUpload+_0x393d62(0x159),0x7d0)));}function startTimer(){let [_0x8c5f98,_0x7fd827,_0x2d21fc,_0x10f735,_0x4b1136]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x26bb9d=a0_0x1db7;_0x2d21fc++,_0x10f735++,_0x4b1136++;if(_0x2d21fc===0x3c)[_0x2d21fc,_0x7fd827]=[0x0,_0x7fd827+0x1];if(_0x7fd827===0x3c)[_0x7fd827,_0x8c5f98]=[0x0,_0x8c5f98+0x1];document['getElementById'](_0x26bb9d(0x11c))[_0x26bb9d(0x11d)]=_0x8c5f98+'h'+_0x7fd827[_0x26bb9d(0x141)]()[_0x26bb9d(0x129)](0x2,'0')+'.'+_0x2d21fc['toString']()['padStart'](0x2,'0');_0x10f735===0x3c&&(saveStatePeriodically(),_0x10f735=0x0);;_0x4b1136===0x708&&(saveStateInCloud(),_0x4b1136=0x0);;},0x3e8);}export async function uploadGame(_0x4d33d2){const _0x3ad43d=a0_0x1ad946,_0x12c69b=_0x4d33d2[_0x3ad43d(0x15d)][0x0];Module[_0x3ad43d(0x168)](_0x12c69b,()=>{const _0x299004=_0x3ad43d;Module[_0x299004(0x151)]();});}export async function loadGame(_0x2ac6df){const _0x5e1c86=a0_0x1ad946,_0x2d7fdd=_0x2ac6df[_0x5e1c86(0x17b)](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x14408e=Module[_0x5e1c86(0x155)]()[_0x5e1c86(0x126)](_0x34ea68=>_0x34ea68!=='.'&&_0x34ea68!=='..');intro['classList'][_0x5e1c86(0x14b)](_0x5e1c86(0x15c)),errorLogElements[0x0][_0x5e1c86(0x150)][_0x5e1c86(0x17c)]='0',ingame[_0x5e1c86(0x13a)][_0x5e1c86(0x12a)](_0x5e1c86(0x15c)),_0x2ac6df[_0x5e1c86(0x16f)](_0x5e1c86(0x171))||_0x2ac6df[_0x5e1c86(0x16f)](_0x5e1c86(0x161))?(canvas[_0x5e1c86(0x13a)][_0x5e1c86(0x14b)](_0x5e1c86(0x132)),areaTrans[_0x5e1c86(0x13a)][_0x5e1c86(0x14b)](_0x5e1c86(0x121)),localStorage[_0x5e1c86(0x11b)]('screenSize',_0x5e1c86(0x16c)+(window[_0x5e1c86(0x15e)]-0xe6)+','+(window[_0x5e1c86(0x15e)]-0xe6)*0x9/0xa)):localStorage['setItem']('screenSize',_0x5e1c86(0x16c)+(window['innerWidth']-0x96)+','+(window[_0x5e1c86(0x15e)]-0x96)*0x2/0x3),_0x14408e[_0x5e1c86(0x174)](_0x2d7fdd)?(await Module['loadGame'](_0x5e1c86(0x175)+_0x2ac6df),confirm(_0x5e1c86(0x179))&&(await Module['loadState'](0x0),localStorage['setItem'](_0x5e1c86(0x124),_0x2ac6df),console['log'](_0x2ac6df))):(await Module[_0x5e1c86(0x16e)](_0x5e1c86(0x175)+_0x2ac6df),localStorage['setItem']('gameName',_0x2ac6df),console[_0x5e1c86(0x166)](_0x2ac6df)),await statusShow();}export async function saveState(_0x453e84){const _0x5cf958=a0_0x1ad946;await Module[_0x5cf958(0x134)](_0x453e84),await Module[_0x5cf958(0x151)]();}export async function loadState(_0x45b78b){const _0x1f6659=a0_0x1ad946;await Module[_0x1f6659(0x138)](_0x45b78b);}export async function downloadFile(_0x432b8f,_0x1bcca6){const _0x3f63b6=a0_0x1ad946,_0x950f5b=Module['downloadFile'](_0x432b8f),_0x34ade0=document[_0x3f63b6(0x127)]('a');document[_0x3f63b6(0x133)][_0x3f63b6(0x167)](_0x34ade0),_0x34ade0[_0x3f63b6(0x15a)]=_0x1bcca6;const _0x1daf63=new Blob([_0x950f5b],{'type':_0x3f63b6(0x140)});_0x34ade0[_0x3f63b6(0x169)]=URL[_0x3f63b6(0x11f)](_0x1daf63),_0x34ade0['click'](),URL[_0x3f63b6(0x125)](_0x1daf63),_0x34ade0['remove']();}export function downloadFileInCloud(_0x13da82){const _0x57f6b9=a0_0x1ad946,_0x2e3427=Module[_0x57f6b9(0x13b)](_0x13da82);return _0x2e3427;}export async function uploadFileInCloud(_0x324a5c){const _0xb3052f=a0_0x1ad946;Module[_0xb3052f(0x153)](_0x324a5c,()=>{localStorageFile(),Module['FSSync']();});}export async function uploadFile(_0x3d8007){const _0x5ddbbc=a0_0x1ad946,_0x4c8868=_0x3d8007[_0x5ddbbc(0x15d)][0x0];Module['uploadAll'](_0x4c8868,()=>{localStorageFile(),Module['FSSync']();});}export async function editFile(_0x1162f1,_0x2d74ea,_0x17ca47){const _0x4f38a8=a0_0x1ad946;await Module[_0x4f38a8(0x118)](_0x1162f1,_0x2d74ea,_0x17ca47),await Module['FSSync']();}export async function deleteFile(_0x32b2fb){const _0x390ba1=a0_0x1ad946;await Module[_0x390ba1(0x173)](_0x32b2fb),await Module['FSSync']();}export function listGame(){const _0xa6097f=Module['listRoms']()['filter'](_0x36a99f=>_0x36a99f!=='.'&&_0x36a99f!=='..');return _0xa6097f;}export function listSave(){const _0x486377=a0_0x1ad946,_0x48074b=Module[_0x486377(0x143)]()['filter'](_0x5af100=>_0x5af100!=='.'&&_0x5af100!=='..');return _0x48074b;}function a0_0x3897(){const _0x4689c9=['hidden','autoLoadCheats','control-setting','Do\x20you\x20want\x20to\x20load\x20save\x20state?','#E0C068','replace','bottom','editFileName','visible','encode','setItem','timer','textContent','state','createObjectURL','resumeGame','gbc1','buttonPress','Paused!','gameName','revokeObjectURL','filter','createElement','290RKldtD','padStart','remove','457643zLiCXe','/data/screenshots/','Cheat\x20Enabled!','then','addEventListener','#20A5A6','SDL2','gbc','body','saveState','substring','visibilityState','tEXtComment\x00','loadState','Resumed!','classList','downloadFile','4997640sisMUS','beforeunload','90VEwikA','setVolume','application/octet-stream','toString','Off','listSaves','canvas','getElementById','contains','listScreenshots','2445GPPQnB','getItem','106246wrfyGd','add','pagehide','Cloud\x20upload\x20','listCheats','9502479MAlcMp','style','FSSync','642OizBqB','uploadAll','visibilitychange','listStates','.png','pauseGame','_savedCheats','\x20time(s)','download','onLine','disable','files','innerWidth','turboState','282073rdpzYc','.gb','buttonUnpress','image/png','41704WNFzJO','set','log','appendChild','uploadRom','href','9844PCIqZl','fileSize','0,0,','screenshot','loadGame','endsWith','length','.gbc','FSInit','deleteFile','includes','/data/games/'];a0_0x3897=function(){return _0x4689c9;};return a0_0x3897();}export function listState(){const _0x5bd6c0=a0_0x1ad946,_0xc10716=Module[_0x5bd6c0(0x155)]()[_0x5bd6c0(0x126)](_0x2e476d=>_0x2e476d!=='.'&&_0x2e476d!=='..');return _0xc10716;}export function listCheat(){const _0x42a179=a0_0x1ad946,_0x2efdf8=Module[_0x42a179(0x14e)]()['filter'](_0x5472ce=>_0x5472ce!=='.'&&_0x5472ce!=='..');return _0x2efdf8;}export function listScreenshot(){const _0x465ed6=a0_0x1ad946,_0x3e7eea=Module[_0x465ed6(0x147)]()[_0x465ed6(0x126)](_0x5ab41f=>_0x5ab41f!=='.'&&_0x5ab41f!=='..');return _0x3e7eea;}export function embedTextInPngFile(_0x4964af,_0xcc60fa,_0x3f779b){const _0x2fc6d9=a0_0x1ad946;let _0x14ed39=atob(_0x4964af['split'](',')[0x1]),_0x1a4170=new Uint8Array(_0x14ed39['length']);for(let _0x3a3b0f=0x0;_0x3a3b0f<_0x14ed39['length'];_0x3a3b0f++){_0x1a4170[_0x3a3b0f]=_0x14ed39['charCodeAt'](_0x3a3b0f);}let _0x4f177e=new TextEncoder()[_0x2fc6d9(0x11a)](_0x2fc6d9(0x137)+_0xcc60fa),_0xba1588=new Uint8Array(_0x1a4170['length']+_0x4f177e[_0x2fc6d9(0x170)]);_0xba1588[_0x2fc6d9(0x165)](_0x1a4170,0x0),_0xba1588[_0x2fc6d9(0x165)](_0x4f177e,_0x1a4170[_0x2fc6d9(0x170)]);let _0x403567=new Blob([_0xba1588],{'type':_0x2fc6d9(0x163)}),_0x4f1b79=new File([_0x403567],_0x3f779b,{'type':'image/png'});return _0x4f1b79;}export function extractTextFromPngBase64(_0x49a681){const _0x119d6a=a0_0x1ad946;let _0x554bde=atob(_0x49a681['split'](',')[0x1]),_0x54b67c=_0x119d6a(0x137),_0xcd138a=_0x554bde['indexOf'](_0x54b67c);if(_0xcd138a!==-0x1)return _0x554bde[_0x119d6a(0x135)](_0xcd138a+_0x54b67c[_0x119d6a(0x170)]);return null;}export function fileSize(_0x4d031b){const _0x446038=a0_0x1ad946,_0x43fc42=Module[_0x446038(0x16b)](_0x4d031b);return _0x43fc42;}export async function resumeGame(){const _0x59e038=a0_0x1ad946;Module[_0x59e038(0x120)](),Module[_0x59e038(0x131)](),notiMessage(_0x59e038(0x139),0x7d0);}export async function pauseGame(){const _0x306ec5=a0_0x1ad946;Module[_0x306ec5(0x157)](),Module[_0x306ec5(0x131)](),notiMessage(_0x306ec5(0x123),0x7d0);}export async function buttonPress(_0x11c97c){const _0x11a280=a0_0x1ad946;Module[_0x11a280(0x122)](_0x11c97c);}export async function buttonUnpress(_0x1a6b7c){const _0x3d0f30=a0_0x1ad946;Module[_0x3d0f30(0x162)](_0x1a6b7c);}export async function screenShot(_0x44b93a){const _0x8e0a4e=a0_0x1ad946,_0x3733fa=localStorage['getItem'](_0x8e0a4e(0x124))['replace'](/\.(gba|gbc|gb|zip)$/,''),_0xe8ef31=_0x3733fa+'_'+_0x44b93a+_0x8e0a4e(0x156);await Module['screenshot'](_0xe8ef31),await Module['FSSync']();const _0x4bb4bc=await fileToBase64(Module[_0x8e0a4e(0x13b)](_0x8e0a4e(0x12c)+_0xe8ef31)),_0xa11095=embedTextInPngFile(_0x4bb4bc,formatDateTime(Date['now']()),_0xe8ef31);Module[_0x8e0a4e(0x153)](_0xa11095,()=>{const _0x562a4a=_0x8e0a4e;localStorageFile(),Module[_0x562a4a(0x151)]();});}export async function dowloadScreenShot(_0x1e78df){try{const _0x210511=await fileToBase64(Module['downloadFile'](_0x1e78df));return _0x210511;}catch{}}export async function captureOCR(_0x2d35b7){const _0x463841=a0_0x1ad946;Module[_0x463841(0x16d)](_0x2d35b7);const _0x2ec275=Module[_0x463841(0x13b)](_0x463841(0x12c)+_0x2d35b7);return _0x2ec275;}export async function setFastForwardMultiplier(_0x3dd2cd){Module['setFastForwardMultiplier'](_0x3dd2cd);}export function uploadCheats(_0x230faf,_0x2fc065,_0x27c8d1,_0x2a6238,_0x46432a){Module['uploadAll'](_0x230faf,()=>{const _0x2f079c=a0_0x1db7;Module[_0x2f079c(0x177)](),setTimeout(()=>{const _0x544963=_0x2f079c;Module[_0x544963(0x151)]();},0x1f4),_0x2a6238&&(localStorage['setItem'](_0x2fc065+_0x2f079c(0x158),_0x27c8d1),notiMessage(_0x2f079c(0x12d),0x5dc)),_0x46432a[_0x2f079c(0x11d)]=localStorage[_0x2f079c(0x149)](_0x2fc065+'_savedCheats'||_0x2f079c(0x142));});}export function setVolume(_0x376ea4){const _0x33bfa3=a0_0x1ad946;Module[_0x33bfa3(0x13f)](_0x376ea4);}