const a0_0x5a149a=a0_0x5566;(function(_0x2facde,_0x324ccd){const _0x1175b6=a0_0x5566,_0x124eb5=_0x2facde();while(!![]){try{const _0xd0e37f=-parseInt(_0x1175b6(0xc8))/0x1*(-parseInt(_0x1175b6(0xd9))/0x2)+parseInt(_0x1175b6(0xfe))/0x3+-parseInt(_0x1175b6(0x116))/0x4+parseInt(_0x1175b6(0xc1))/0x5*(-parseInt(_0x1175b6(0xd5))/0x6)+-parseInt(_0x1175b6(0x124))/0x7*(-parseInt(_0x1175b6(0xf3))/0x8)+-parseInt(_0x1175b6(0xd1))/0x9+-parseInt(_0x1175b6(0xe2))/0xa;if(_0xd0e37f===_0x324ccd)break;else _0x124eb5['push'](_0x124eb5['shift']());}catch(_0x5908cd){_0x124eb5['push'](_0x124eb5['shift']());}}}(a0_0xfa62,0x1caec));import a0_0x587b05 from'../core/mgba.js';import*as a0_0x5625e5 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';const Module={'canvas':document[a0_0x5a149a(0x11f)](a0_0x5a149a(0xb8))};function initializeCore(_0x2d82a,_0x162b60){const _0x1239b9=a0_0x5a149a;_0x2d82a(_0x162b60)[_0x1239b9(0xd4)](function(_0x108100){const _0x189be8=_0x1239b9;_0x108100[_0x189be8(0x10a)]();});}initializeCore(a0_0x587b05,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x5a149a(0x11f)](a0_0x5a149a(0xb8)),controlSetting=document[a0_0x5a149a(0x11f)](a0_0x5a149a(0x110));function handleVisibilityChange(_0x14f05e){const _0x4c0c27=a0_0x5a149a;document['visibilityState']===_0x4c0c27(0x102)||_0x14f05e?.['type']===_0x4c0c27(0x131)||_0x14f05e?.[_0x4c0c27(0xe7)]?(pauseGame(),canvas['classList'][_0x4c0c27(0x10c)]('visible')):(setTimeout(()=>{const _0x321ddb=_0x4c0c27;canvas[_0x321ddb(0x118)]['remove'](_0x321ddb(0xe0));},0x258),controlSetting[_0x4c0c27(0x118)][_0x4c0c27(0x119)](_0x4c0c27(0xe0))&&resumeGame());}async function statusShow(){const _0x19f1ce=a0_0x5a149a;document['addEventListener'](_0x19f1ce(0x125),handleVisibilityChange),document[_0x19f1ce(0xf7)](_0x19f1ce(0xf5),handleVisibilityChange),window[_0x19f1ce(0xf7)](_0x19f1ce(0x131),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x5625e5[_0x19f1ce(0x135)](parseInt(await getData(gameName,'0',_0x19f1ce(0xdc)))),await delay(0xc8),await Module[_0x19f1ce(0xe8)](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x19f1ce(0x101)))),await notiMessage(gameVer,0x3e8);}function a0_0x5566(_0x5034af,_0x1c5279){const _0xfa628f=a0_0xfa62();return a0_0x5566=function(_0x55660f,_0x42bbe9){_0x55660f=_0x55660f-0xb7;let _0x6cc17d=_0xfa628f[_0x55660f];return _0x6cc17d;},a0_0x5566(_0x5034af,_0x1c5279);}function a0_0xfa62(){const _0x3f4402=['uploadRom','768061uaRLEu','pagehide','href','log','bottom','led06','entries','lastIndexOf','filter','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','encode','textContent','buttonPress','beforeunload','led00','/data/games/','led01','turboF','\x20:\x20','canvas','Resumed!','gbc','Do\x20you\x20want\x20to\x20load\x20save\x20state?','image/png','files','replace','body','uId','55YOQhuz','\x20|\x20','.png','charCodeAt','concat','resumeGame','endsWith','38kBDYTw','now','remove','setVolume','uploadAll','createElement','disable','click','error','1575846eedhAy','opacity','fill','then','2490YbWAGm','.ss0','Auto\x20save\x20','application/octet-stream','6922YYByVq','FSSync','listCheats','turboState','screenSize','map','trim','visible','deleteFile','2498830gvPueB','saveTime','padStart','saveState','setFastForwardMultiplier','persisted','SDL2','autoLoadCheats','fileSize','loadState','pauseGame','setItem','tEXtComment\x00','led04','split','rgba(245,\x20232,\x20209,\x200.4)','join','16BZJffJ','indexOf','visibilitychange','listSaves','addEventListener','led03','match','All','innerWidth','.gbc','\x20time(s)','605607mrqljp','0,0,','length','slotStateSaved','hidden','style','led02','revokeObjectURL','.gb','/data/states/','set','state','FSInit','listRoms','add','downloadFile','noti-mess','exec','control-setting','substring','includes','Cloud\x20upload\x20','led0','led05','23228qQHJJR','0.4','classList','contains','toString','createObjectURL','appendChild','gbc1','#20A5A6','getElementById','editFileName','screenshot','/data/screenshots/'];a0_0xfa62=function(){return _0x3f4402;};return a0_0xfa62();}async function saveStatePeriodically(){const _0x2cc02d=a0_0x5a149a;await ledSave(_0x2cc02d(0x11e)),await Module[_0x2cc02d(0xe5)](0x0),await Module[_0x2cc02d(0xda)](),await screenShot(0x0),console[_0x2cc02d(0x127)](_0x2cc02d(0xd7)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x4ca674=a0_0x5a149a,_0x425bb1=gameName[_0x4ca674(0xbe)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0xb3f76b=localStorage['getItem'](_0x4ca674(0xc0));navigator['onLine']&&(_0xb3f76b&&(await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x425bb1,Module[_0x4ca674(0x10d)](_0x4ca674(0x107)+_0x425bb1),_0x4ca674(0x109)),await lockNoti('',_0x4ca674(0x113)+ ++countUpload+_0x4ca674(0xfd),0x7d0)));}function startTimer(){let [_0x4edce6,_0x213357,_0x49b615,_0x217058,_0x4e57f2]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0xb77ebf=a0_0x5566;_0x49b615++,_0x217058++,_0x4e57f2++;if(_0x49b615===0x3c)[_0x49b615,_0x213357]=[0x0,_0x213357+0x1];if(_0x213357===0x3c)[_0x213357,_0x4edce6]=[0x0,_0x4edce6+0x1];document[_0xb77ebf(0x11f)]('timer')['textContent']=_0x4edce6+'h'+_0x213357[_0xb77ebf(0x11a)]()[_0xb77ebf(0xe4)](0x2,'0')+'.'+_0x49b615[_0xb77ebf(0x11a)]()[_0xb77ebf(0xe4)](0x2,'0');_0x217058===0x3c&&(saveStatePeriodically(),_0x217058=0x0);;_0x4e57f2===0x708&&(saveStateInCloud(),_0x4e57f2=0x0);;},0x3e8);}export async function uploadGame(_0x56b531){const _0x4088db=a0_0x5a149a,_0x54e996=_0x56b531['files'][0x0];Module[_0x4088db(0x123)](_0x54e996,()=>{Module['FSSync']();});}export async function loadGame(_0x284c8f){const _0x5ab8d5=a0_0x5a149a,_0x101d61=_0x284c8f['replace'](/\.(gba|gbc|gb|zip)$/,_0x5ab8d5(0xd6)),_0x40c68c=Module['listStates']()[_0x5ab8d5(0x12c)](_0x1719c5=>_0x1719c5!=='.'&&_0x1719c5!=='..');intro[_0x5ab8d5(0x118)][_0x5ab8d5(0x10c)](_0x5ab8d5(0xce)),errorLogElements[0x0]['style'][_0x5ab8d5(0x128)]='0',ingame[_0x5ab8d5(0x118)]['remove'](_0x5ab8d5(0xce)),_0x284c8f[_0x5ab8d5(0xc7)](_0x5ab8d5(0xfc))||_0x284c8f[_0x5ab8d5(0xc7)](_0x5ab8d5(0x106))?(canvas[_0x5ab8d5(0x118)][_0x5ab8d5(0x10c)](_0x5ab8d5(0xba)),areaTrans['classList'][_0x5ab8d5(0x10c)](_0x5ab8d5(0x11d)),localStorage[_0x5ab8d5(0xed)](_0x5ab8d5(0xdd),_0x5ab8d5(0xff)+(window[_0x5ab8d5(0xfb)]-0xe6)+','+(window[_0x5ab8d5(0xfb)]-0xe6)*0x9/0xa)):localStorage[_0x5ab8d5(0xed)](_0x5ab8d5(0xdd),'0,0,'+(window[_0x5ab8d5(0xfb)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x40c68c[_0x5ab8d5(0x112)](_0x101d61)?(await Module['loadGame'](_0x5ab8d5(0x133)+_0x284c8f),confirm(_0x5ab8d5(0xbb))&&(await Module[_0x5ab8d5(0xeb)](0x0),await shaderData())):(await Module['loadGame'](_0x5ab8d5(0x133)+gameName),await shaderData()),await statusShow();}export async function saveState(_0x46c699){await Module['saveState'](_0x46c699),await Module['FSSync']();}export async function loadState(_0xd443c5){const _0x54d474=a0_0x5a149a;await Module[_0x54d474(0xeb)](_0xd443c5);}export async function downloadFile(_0x1a7d70,_0x54efc4){const _0x1973db=a0_0x5a149a,_0x58e51f=Module[_0x1973db(0x10d)](_0x1a7d70),_0x2da4af=document[_0x1973db(0xcd)]('a');document[_0x1973db(0xbf)][_0x1973db(0x11c)](_0x2da4af),_0x2da4af['download']=_0x54efc4;const _0xdfdf8f=new Blob([_0x58e51f],{'type':_0x1973db(0xd8)});_0x2da4af[_0x1973db(0x126)]=URL[_0x1973db(0x11b)](_0xdfdf8f),_0x2da4af[_0x1973db(0xcf)](),URL[_0x1973db(0x105)](_0xdfdf8f),_0x2da4af[_0x1973db(0xca)]();}export function downloadFileInCloud(_0x24ede2){const _0x521be3=a0_0x5a149a;try{const _0x54235b=Module[_0x521be3(0x10d)](_0x24ede2);return _0x54235b;}catch(_0x274823){return null;}}export async function uploadFileInCloud(_0x1e1aaf){const _0x7b1f6e=a0_0x5a149a;Module[_0x7b1f6e(0xcc)](_0x1e1aaf,()=>{localStorageFile(),Module['FSSync']();});}export async function uploadFile(_0x35f044){const _0x11f9ab=a0_0x5a149a,_0x263aec=_0x35f044[_0x11f9ab(0xbd)][0x0];Module[_0x11f9ab(0xcc)](_0x263aec,()=>{const _0x2195ca=_0x11f9ab;localStorageFile(),Module[_0x2195ca(0xda)]();});}export async function editFile(_0x1da675,_0x1a4115,_0x51f076){const _0xfd14c5=a0_0x5a149a;await Module[_0xfd14c5(0x120)](_0x1da675,_0x1a4115,_0x51f076),await Module[_0xfd14c5(0xda)]();}export async function deleteFile(_0x4ff81a){const _0x4c79e0=a0_0x5a149a;await Module[_0x4c79e0(0xe1)](_0x4ff81a),await Module[_0x4c79e0(0xda)]();}export function listGame(){const _0x3828b9=a0_0x5a149a,_0x58b96c=Module[_0x3828b9(0x10b)]()[_0x3828b9(0x12c)](_0x11a485=>_0x11a485!=='.'&&_0x11a485!=='..');return _0x58b96c;}export function listSave(){const _0x579810=a0_0x5a149a,_0xc4ab1a=Module[_0x579810(0xf6)]()[_0x579810(0x12c)](_0x4bd312=>_0x4bd312!=='.'&&_0x4bd312!=='..');return _0xc4ab1a;}export function listState(){const _0xb09a7b=Module['listStates']()['filter'](_0x498723=>_0x498723!=='.'&&_0x498723!=='..');return _0xb09a7b;}export function listCheat(){const _0x3e66bc=a0_0x5a149a,_0x37d479=Module[_0x3e66bc(0xdb)]()[_0x3e66bc(0x12c)](_0x3739e5=>_0x3739e5!=='.'&&_0x3739e5!=='..');return _0x37d479;}export function listScreenshot(){const _0x13dad8=a0_0x5a149a,_0x40ccf1=Module['listScreenshots']()[_0x13dad8(0x12c)](_0x13e4e4=>_0x13e4e4!=='.'&&_0x13e4e4!=='..');return _0x40ccf1;}export function embedTextInPngFile(_0x1c969d,_0x3df624,_0x2e452b){const _0x3ebb0c=a0_0x5a149a;let _0x42d47d=atob(_0x1c969d[_0x3ebb0c(0xf0)](',')[0x1]),_0x490fc8=new Uint8Array(_0x42d47d['length']);for(let _0x5a6b74=0x0;_0x5a6b74<_0x42d47d['length'];_0x5a6b74++){_0x490fc8[_0x5a6b74]=_0x42d47d[_0x3ebb0c(0xc4)](_0x5a6b74);}let _0x44d6f0=new TextEncoder()[_0x3ebb0c(0x12e)](_0x3ebb0c(0xee)+_0x3df624),_0x4309f3=new Uint8Array(_0x490fc8['length']+_0x44d6f0[_0x3ebb0c(0x100)]);_0x4309f3[_0x3ebb0c(0x108)](_0x490fc8,0x0),_0x4309f3[_0x3ebb0c(0x108)](_0x44d6f0,_0x490fc8[_0x3ebb0c(0x100)]);let _0x3422bc=new Blob([_0x4309f3],{'type':_0x3ebb0c(0xbc)}),_0x41ce2e=new File([_0x3422bc],_0x2e452b,{'type':_0x3ebb0c(0xbc)});return _0x41ce2e;}export function extractTextFromPngBase64(_0x2794c4){const _0x59e795=a0_0x5a149a;let _0x337a68=atob(_0x2794c4['split'](',')[0x1]),_0x992ceb=_0x59e795(0xee),_0x3c8cec=_0x337a68[_0x59e795(0xf4)](_0x992ceb);if(_0x3c8cec!==-0x1)return _0x337a68[_0x59e795(0x111)](_0x3c8cec+_0x992ceb['length']);return null;}export function fileSize(_0xa3683e){const _0x385591=a0_0x5a149a,_0x3e9172=Module[_0x385591(0xea)](_0xa3683e);return _0x3e9172;}export async function resumeGame(){const _0x3b06d6=a0_0x5a149a;Module[_0x3b06d6(0xc6)](),Module[_0x3b06d6(0xe8)](),notiMessage(_0x3b06d6(0xb9),0x7d0);}export async function pauseGame(){const _0x4052e9=a0_0x5a149a;Module[_0x4052e9(0xec)](),Module['SDL2'](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x250ecb){const _0x509687=a0_0x5a149a;Module[_0x509687(0x130)](_0x250ecb);}export async function buttonUnpress(_0x13f21c){Module['buttonUnpress'](_0x13f21c);}export async function screenShot(_0x522e86){const _0x3c5268=a0_0x5a149a,_0x8bd775=gameName[_0x3c5268(0xbe)](/\.(gba|gbc|gb|zip)$/,'_'+_0x522e86+_0x3c5268(0xc3)),_0x5bc68e=await getData(gameName,_0x522e86,_0x3c5268(0xfa))||'';console[_0x3c5268(0x127)](_0x5bc68e),await Module[_0x3c5268(0x121)](_0x8bd775),await Module[_0x3c5268(0xda)](),await setData(gameName,_0x522e86,_0x3c5268(0xe3),formatDateTime(Date[_0x3c5268(0xc9)]()),_0x5bc68e);}export async function dowloadScreenShot(_0x5c5efe){const _0x36d9bf=a0_0x5a149a;try{const _0x40c19e=await fileToBase64(Module[_0x36d9bf(0x10d)](_0x5c5efe));return _0x40c19e;}catch{}}export async function captureOCR(_0x4694c6){const _0xc07ba5=a0_0x5a149a;Module[_0xc07ba5(0x121)](_0x4694c6);const _0x5d3e5f=Module['downloadFile'](_0xc07ba5(0x122)+_0x4694c6);return _0x5d3e5f;}export async function setFastForwardMultiplier(_0x37787f){const _0x56f263=a0_0x5a149a;Module[_0x56f263(0xe6)](_0x37787f);}export function uploadCheats(_0x21849b){Module['uploadAll'](_0x21849b,()=>{const _0x8fbcb9=a0_0x5566;Module[_0x8fbcb9(0xe9)](),setTimeout(()=>{const _0x5e8743=_0x8fbcb9;Module[_0x5e8743(0xda)]();},0x1f4);});}export function setVolume(_0x2e2da3){const _0x44b88c=a0_0x5a149a;Module[_0x44b88c(0xcb)](_0x2e2da3);}export async function setData(_0x4816b3,_0x57c983,_0x15c37a,_0x30ced1,_0x3eec09=''){const _0x20674f=a0_0x5a149a,_0x3bd398=_0x4816b3[_0x20674f(0xbe)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x29fb76=_0x20674f(0x122)+_0x3bd398+'_'+_0x57c983+'.png';let _0x39781f;try{_0x39781f=await fileToBase64(Module[_0x20674f(0x10d)](_0x29fb76));}catch(_0x2d2489){await Module[_0x20674f(0x121)](_0x3bd398+'_'+_0x57c983+_0x20674f(0xc3)),await delay(0x64),_0x39781f=await fileToBase64(Module[_0x20674f(0x10d)](_0x29fb76));}let _0x313a7c=atob(_0x39781f[_0x20674f(0xf0)](',')[0x1]),_0x3d8ce6=_0x20674f(0xee),_0x4c660d=_0x313a7c[_0x20674f(0xf4)](_0x3d8ce6),_0x17f470={};if(_0x4c660d!==-0x1||_0x3eec09['trim']()!==''){let _0x2dbb4c=_0x4c660d!==-0x1?_0x313a7c[_0x20674f(0x111)](_0x4c660d+_0x3d8ce6[_0x20674f(0x100)]):_0x3eec09,_0x53b270=/(\w+)\s*:\s*([^|]*)/g,_0x1681e1;while((_0x1681e1=_0x53b270[_0x20674f(0x10f)](_0x2dbb4c))!==null){_0x17f470[_0x1681e1[0x1][_0x20674f(0xdf)]()]=_0x1681e1[0x2][_0x20674f(0xdf)]();}_0x4c660d!==-0x1&&(_0x313a7c=_0x313a7c[_0x20674f(0x111)](0x0,_0x4c660d));}_0x17f470[_0x15c37a]=_0x30ced1;let _0x588a36=Object[_0x20674f(0x12a)](_0x17f470)[_0x20674f(0xde)](([_0x7b8dd4,_0x1a8626])=>_0x7b8dd4+_0x20674f(0xb7)+_0x1a8626)[_0x20674f(0xf2)](_0x20674f(0xc2)),_0x2cb9cf=new TextEncoder()['encode'](_0x3d8ce6+'\x20'+_0x588a36),_0xaa31f6=new Uint8Array([..._0x313a7c][_0x20674f(0xde)](_0x3ace56=>_0x3ace56[_0x20674f(0xc4)](0x0))[_0x20674f(0xc5)]([..._0x2cb9cf])),_0x9015df=new File([new Blob([_0xaa31f6],{'type':_0x20674f(0xbc)})],_0x3bd398+'_'+_0x57c983+_0x20674f(0xc3),{'type':_0x20674f(0xbc)});Module['uploadAll'](_0x9015df,()=>{const _0x3e965b=_0x20674f;localStorageFile(),Module[_0x3e965b(0xda)]();});}export async function getData(_0x35a719,_0x2edbc4,_0x127564){const _0x1f203d=a0_0x5a149a;try{const _0x204475=_0x35a719[_0x1f203d(0xbe)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x4b6408=_0x1f203d(0x122)+_0x204475+'_'+_0x2edbc4+_0x1f203d(0xc3);let _0x5e24c5;try{_0x5e24c5=await fileToBase64(Module[_0x1f203d(0x10d)](_0x4b6408));}catch(_0x2e1dcb){return null;}let _0x3bdb0e=atob(_0x5e24c5[_0x1f203d(0xf0)](',')[0x1]),_0x358f2a=_0x1f203d(0xee),_0x417299=_0x3bdb0e['indexOf'](_0x358f2a);if(_0x417299!==-0x1){let _0x1ae912=_0x3bdb0e['substring'](_0x417299+_0x358f2a[_0x1f203d(0x100)]);if(_0x127564===_0x1f203d(0xfa))return _0x1ae912[_0x1f203d(0xdf)]();let _0x7c5e5e=new RegExp(_0x127564+_0x1f203d(0x12d)),_0x329065=_0x1ae912[_0x1f203d(0xf9)](_0x7c5e5e);if(_0x329065)return _0x329065[0x1][_0x1f203d(0xdf)]();}}catch(_0x253488){return console['error']({'romName':_0x35a719,'slot':_0x2edbc4,'type':_0x127564}),null;}}export async function ledSave(_0x206c43){const _0x1adf7f=a0_0x5a149a,_0xc68b7d=parseInt(await getData(gameName,'0',_0x1adf7f(0x101))),_0x1bd4e8=_0xc68b7d===0x1?_0x1adf7f(0x134):_0xc68b7d===0x2?_0x1adf7f(0x104):_0xc68b7d===0x3?_0x1adf7f(0xf8):_0xc68b7d===0x4?_0x1adf7f(0xef):_0xc68b7d===0x5?_0x1adf7f(0x115):_0xc68b7d===0x6?_0x1adf7f(0x129):_0xc68b7d===0x7?'led07':_0x1adf7f(0x132);try{for(let _0x585a95=0x0;_0x585a95<=0x7;_0x585a95++){document[_0x1adf7f(0x11f)](_0x1adf7f(0x114)+_0x585a95)['style']['fill']=_0x1adf7f(0xf1);}await delay(0x3e8);for(let _0x3c8858=0x0;_0x3c8858<=0x7;_0x3c8858++){document['getElementById']('led0'+_0x3c8858)[_0x1adf7f(0x103)][_0x1adf7f(0xd3)]=_0x1adf7f(0xf1);}document[_0x1adf7f(0x11f)](_0x1bd4e8)['style']['fill']=_0x206c43;}catch(_0x4a27c8){console[_0x1adf7f(0xd0)]('Error\x20ledSave:',_0x4a27c8);}};export async function notiMessage(_0x2d7670,_0x9ca1f3,_0x7e1625=![]){const _0x524f55=a0_0x5a149a;var _0x3f64f6=document[_0x524f55(0x11f)](_0x524f55(0x10e));const _0x26039c=parseInt(await getData(gameName,'0',_0x524f55(0x101)))||0x0;_0x3f64f6[_0x524f55(0x103)][_0x524f55(0xd2)]===_0x524f55(0x117)&&(clearTimeout(messageTimeout),_0x3f64f6[_0x524f55(0x103)]['opacity']='0'),_0x3f64f6[_0x524f55(0x12f)]=_0x2d7670,_0x3f64f6[_0x524f55(0x103)][_0x524f55(0xd2)]=_0x524f55(0x117),messageTimeout=setTimeout(()=>{const _0x429f92=_0x524f55;_0x3f64f6[_0x429f92(0x12f)]='['+_0x26039c+']\x20'+gameName[_0x429f92(0x111)](0x0,gameName[_0x429f92(0x12b)]('.')),_0x3f64f6['style'][_0x429f92(0xd2)]=_0x429f92(0x117);},_0x9ca1f3),_0x7e1625&&(canvas[_0x524f55(0x118)]['add']('visible'),setTimeout(()=>{const _0x44afb4=_0x524f55;canvas['classList'][_0x44afb4(0xca)](_0x44afb4(0xe0));},0x258));}