const a0_0x14c276=a0_0x28df;(function(_0xa51c2c,_0x1c6e9b){const _0x747c33=a0_0x28df,_0x16b66a=_0xa51c2c();while(!![]){try{const _0x177a65=parseInt(_0x747c33(0x125))/0x1+parseInt(_0x747c33(0xfd))/0x2*(-parseInt(_0x747c33(0xee))/0x3)+-parseInt(_0x747c33(0xde))/0x4+-parseInt(_0x747c33(0x128))/0x5*(-parseInt(_0x747c33(0x123))/0x6)+parseInt(_0x747c33(0xdd))/0x7+parseInt(_0x747c33(0x10b))/0x8*(-parseInt(_0x747c33(0xf3))/0x9)+parseInt(_0x747c33(0xf0))/0xa*(parseInt(_0x747c33(0x111))/0xb);if(_0x177a65===_0x1c6e9b)break;else _0x16b66a['push'](_0x16b66a['shift']());}catch(_0x54ea5e){_0x16b66a['push'](_0x16b66a['shift']());}}}(a0_0xe543,0xe1b4b));import a0_0xc9902b from'../core/mgba.js';import*as a0_0x128f23 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document[a0_0x14c276(0xeb)](a0_0x14c276(0x120))};function initializeCore(_0x2adfd9,_0x2f4527){const _0x4ea606=a0_0x14c276;_0x2adfd9(_0x2f4527)[_0x4ea606(0xf1)](function(_0x1d501b){const _0x25f682=_0x4ea606;_0x1d501b[_0x25f682(0x102)]();});}initializeCore(a0_0xc9902b,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x14c276(0x120)),savedTurboState=localStorage[a0_0x14c276(0x11c)]('turboState'),controlSetting=document[a0_0x14c276(0xeb)](a0_0x14c276(0xe2));function handleVisibilityChange(_0x4a36f3){const _0xcf54a4=a0_0x14c276;document[_0xcf54a4(0x11a)]===_0xcf54a4(0x121)||_0x4a36f3?.[_0xcf54a4(0xd9)]==='beforeunload'||_0x4a36f3?.[_0xcf54a4(0xd8)]?(pauseGame(),canvas[_0xcf54a4(0xe7)][_0xcf54a4(0xea)](_0xcf54a4(0xd7))):(setTimeout(()=>{const _0x51e0f8=_0xcf54a4;canvas['classList'][_0x51e0f8(0x12f)](_0x51e0f8(0xd7));},0x258),controlSetting[_0xcf54a4(0xe7)]['contains']('visible')&&resumeGame());}async function statusShow(){const _0x379c29=a0_0x14c276;document[_0x379c29(0x11d)](_0x379c29(0x113),handleVisibilityChange),document['addEventListener'](_0x379c29(0xff),handleVisibilityChange),window[_0x379c29(0x11d)](_0x379c29(0xe6),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x128f23['turboF'](turboState)),await delay(0xc8),await Module[_0x379c29(0xe1)](),await delay(0x320),await led(parseInt(localStorage[_0x379c29(0x11c)](_0x379c29(0xda)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x2f92a3=a0_0x14c276;await ledSave(_0x2f92a3(0xdb)),await Module['saveState'](0x0),await Module[_0x2f92a3(0x127)](),await screenShot(0x0),console[_0x2f92a3(0x129)](_0x2f92a3(0x110)+ ++countAutoSave+_0x2f92a3(0x12e));}async function saveStateInCloud(){const _0x1a3a1d=a0_0x14c276,_0x665fa5=localStorage[_0x1a3a1d(0x11c)]('gameName'),_0x5151d8=_0x665fa5['replace'](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x1359f2=localStorage[_0x1a3a1d(0x11c)](_0x1a3a1d(0x116));navigator['onLine']&&(_0x1359f2&&(await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x5151d8,Module[_0x1a3a1d(0x135)](_0x1a3a1d(0x107)+_0x5151d8),_0x1a3a1d(0x105)),await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x1a3a1d(0x12e),0x7d0)));}function startTimer(){let [_0x2ad22d,_0x55db15,_0x4058d1,_0x168dd1,_0x9d3554]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0xe5877e=a0_0x28df;_0x4058d1++,_0x168dd1++,_0x9d3554++;if(_0x4058d1===0x3c)[_0x4058d1,_0x55db15]=[0x0,_0x55db15+0x1];if(_0x55db15===0x3c)[_0x55db15,_0x2ad22d]=[0x0,_0x2ad22d+0x1];document[_0xe5877e(0xeb)](_0xe5877e(0xf4))[_0xe5877e(0x103)]=_0x2ad22d+'h'+_0x55db15['toString']()[_0xe5877e(0xe3)](0x2,'0')+'.'+_0x4058d1[_0xe5877e(0x109)]()[_0xe5877e(0xe3)](0x2,'0');_0x168dd1===0x3c&&(saveStatePeriodically(),_0x168dd1=0x0);;_0x9d3554===0x708&&(saveStateInCloud(),_0x9d3554=0x0);;},0x3e8);}export async function uploadGame(_0x4a5539){const _0x208e16=a0_0x14c276,_0x1af66b=_0x4a5539['files'][0x0];Module[_0x208e16(0x12b)](_0x1af66b,()=>{const _0x286d79=_0x208e16;Module[_0x286d79(0x127)]();});}export async function loadGame(_0x1165d4){const _0x830e7e=a0_0x14c276,_0x3fb767=_0x1165d4[_0x830e7e(0x100)](/\.(gba|gbc|gb|zip)$/,_0x830e7e(0x132)),_0x3e90c3=Module[_0x830e7e(0xdf)]()[_0x830e7e(0x12d)](_0xeb53af=>_0xeb53af!=='.'&&_0xeb53af!=='..');intro[_0x830e7e(0xe7)][_0x830e7e(0xea)](_0x830e7e(0xf9)),errorLogElements[0x0][_0x830e7e(0x122)][_0x830e7e(0x134)]='0',ingame['classList']['remove'](_0x830e7e(0xf9)),_0x1165d4['endsWith'](_0x830e7e(0x10c))||_0x1165d4['endsWith'](_0x830e7e(0x12a))?(canvas[_0x830e7e(0xe7)][_0x830e7e(0xea)](_0x830e7e(0xf2)),areaTrans[_0x830e7e(0xe7)][_0x830e7e(0xea)](_0x830e7e(0x114)),localStorage[_0x830e7e(0x10a)]('screenSize',_0x830e7e(0x131)+(window['innerWidth']-0xe6)+','+(window[_0x830e7e(0x101)]-0xe6)*0x9/0xa)):localStorage[_0x830e7e(0x10a)](_0x830e7e(0xfa),_0x830e7e(0x131)+(window[_0x830e7e(0x101)]-0x96)+','+(window[_0x830e7e(0x101)]-0x96)*0x2/0x3),_0x3e90c3[_0x830e7e(0x12c)](_0x3fb767)?(await Module[_0x830e7e(0x118)](_0x830e7e(0x104)+_0x1165d4),confirm(_0x830e7e(0x11b))&&(await Module['loadState'](0x0),localStorage['setItem']('gameName',_0x1165d4),console[_0x830e7e(0x129)](_0x1165d4))):(await Module[_0x830e7e(0x118)]('/data/games/'+_0x1165d4),localStorage['setItem'](_0x830e7e(0x115),_0x1165d4),console[_0x830e7e(0x129)](_0x1165d4)),await statusShow();}function a0_0x28df(_0x1ba623,_0x318c3d){const _0xe543a=a0_0xe543();return a0_0x28df=function(_0x28df39,_0x4efcb2){_0x28df39=_0x28df39-0xd6;let _0x226a9e=_0xe543a[_0x28df39];return _0x226a9e;},a0_0x28df(_0x1ba623,_0x318c3d);}export async function saveState(_0x52bf49){const _0x5cfedc=a0_0x14c276;await Module['saveState'](_0x52bf49),await Module[_0x5cfedc(0x127)]();}export async function loadState(_0x2fa014){await Module['loadState'](_0x2fa014);}export async function downloadFile(_0x3901da,_0xd500b7){const _0x1bc946=a0_0x14c276,_0x35419c=Module[_0x1bc946(0x135)](_0x3901da),_0x213dd7=document[_0x1bc946(0x11e)]('a');document[_0x1bc946(0xf8)][_0x1bc946(0xf5)](_0x213dd7),_0x213dd7['download']=_0xd500b7;const _0x249c00=new Blob([_0x35419c],{'type':_0x1bc946(0xf6)});_0x213dd7[_0x1bc946(0xef)]=URL[_0x1bc946(0x117)](_0x249c00),_0x213dd7['click'](),URL['revokeObjectURL'](_0x249c00),_0x213dd7[_0x1bc946(0x12f)]();}export function downloadFileInCloud(_0x5dc436){const _0x4d6288=Module['downloadFile'](_0x5dc436);return _0x4d6288;}export async function uploadFileInCloud(_0xdf2033){Module['uploadAll'](_0xdf2033,()=>{const _0x1e9956=a0_0x28df;localStorageFile(),Module[_0x1e9956(0x127)]();});}export async function uploadFile(_0x22cd2a){const _0xd64636=_0x22cd2a['files'][0x0];Module['uploadAll'](_0xd64636,()=>{const _0x10c593=a0_0x28df;localStorageFile(),Module[_0x10c593(0x127)]();});}export async function editFile(_0x230752,_0x523d9e,_0x1016f3){const _0x15aac0=a0_0x14c276;await Module[_0x15aac0(0xf7)](_0x230752,_0x523d9e,_0x1016f3),await Module[_0x15aac0(0x127)]();}export async function deleteFile(_0x84ed17){const _0x220dc2=a0_0x14c276;await Module['deleteFile'](_0x84ed17),await Module[_0x220dc2(0x127)]();}export function listGame(){const _0x2f204b=a0_0x14c276,_0x54d522=Module[_0x2f204b(0x11f)]()[_0x2f204b(0x12d)](_0x268627=>_0x268627!=='.'&&_0x268627!=='..');return _0x54d522;}export function listSave(){const _0x263768=a0_0x14c276,_0x4fe122=Module[_0x263768(0x119)]()[_0x263768(0x12d)](_0x464e36=>_0x464e36!=='.'&&_0x464e36!=='..');return _0x4fe122;}export function listState(){const _0x458908=Module['listStates']()['filter'](_0x14afd2=>_0x14afd2!=='.'&&_0x14afd2!=='..');return _0x458908;}export function listCheat(){const _0x407948=a0_0x14c276,_0x260224=Module[_0x407948(0x112)]()[_0x407948(0x12d)](_0x247916=>_0x247916!=='.'&&_0x247916!=='..');return _0x260224;}export function listScreenshot(){const _0x40a93e=a0_0x14c276,_0x137308=Module[_0x40a93e(0x133)]()[_0x40a93e(0x12d)](_0x2937e1=>_0x2937e1!=='.'&&_0x2937e1!=='..');return _0x137308;}export function embedTextInPngFile(_0x2415cd,_0x1f155b,_0x5d3322){const _0x465049=a0_0x14c276;let _0x3a3f95=atob(_0x2415cd['split'](',')[0x1]),_0x67eb62=new Uint8Array(_0x3a3f95['length']);for(let _0x39d7fb=0x0;_0x39d7fb<_0x3a3f95[_0x465049(0x106)];_0x39d7fb++){_0x67eb62[_0x39d7fb]=_0x3a3f95[_0x465049(0xfb)](_0x39d7fb);}let _0x14d96b=new TextEncoder()[_0x465049(0xec)](_0x465049(0x10d)+_0x1f155b),_0x2559de=new Uint8Array(_0x67eb62[_0x465049(0x106)]+_0x14d96b['length']);_0x2559de['set'](_0x67eb62,0x0),_0x2559de[_0x465049(0x10e)](_0x14d96b,_0x67eb62['length']);let _0x4e1391=new Blob([_0x2559de],{'type':_0x465049(0xe9)}),_0x547d8d=new File([_0x4e1391],_0x5d3322,{'type':_0x465049(0xe9)});return _0x547d8d;}export function extractTextFromPngBase64(_0x515e35){const _0x5bac14=a0_0x14c276;let _0x2df2df=atob(_0x515e35['split'](',')[0x1]),_0x3eb7ee='tEXtComment\x00',_0x5270e0=_0x2df2df[_0x5bac14(0x10f)](_0x3eb7ee);if(_0x5270e0!==-0x1)return _0x2df2df['substring'](_0x5270e0+_0x3eb7ee['length']);return null;}export function fileSize(_0x11e1a0){const _0x344bd3=a0_0x14c276,_0x5d2351=Module[_0x344bd3(0xdc)](_0x11e1a0);return _0x5d2351;}export async function resumeGame(){const _0x412311=a0_0x14c276;Module['resumeGame'](),Module[_0x412311(0xe1)](),notiMessage(_0x412311(0xd6),0x7d0);}function a0_0xe543(){const _0x4ffe27=['1782441WNjcZk','href','3516020VUFUiz','then','gbc','4860avblQj','timer','appendChild','application/octet-stream','editFileName','body','disable','screenSize','charCodeAt','setFastForwardMultiplier','2tPYOHX','autoLoadCheats','visibilitychange','replace','innerWidth','FSInit','textContent','/data/games/','state','length','/data/states/','uploadAll','toString','setItem','15320RMwNao','.gbc','tEXtComment\x00','set','indexOf','Auto\x20save\x20','88KFtjcY','listCheats','pagehide','gbc1','gameName','uId','createObjectURL','loadGame','listSaves','visibilityState','Do\x20you\x20want\x20to\x20load\x20save\x20state?','getItem','addEventListener','createElement','listRoms','canvas','hidden','style','9030ytluEV','setVolume','494348PqpvJt','pauseGame','FSSync','2515bSeoQo','log','.gb','uploadRom','includes','filter','\x20time(s)','remove','buttonPress','0,0,','.ss0','listScreenshots','bottom','downloadFile','Resumed!','visible','persisted','type','slotStateSaved','#20A5A6','fileSize','744870GNcODK','6471404eSqAsh','listStates','_savedCheats','SDL2','control-setting','padStart','/data/screenshots/','screenshot','beforeunload','classList','Off','image/png','add','getElementById','encode','now'];a0_0xe543=function(){return _0x4ffe27;};return a0_0xe543();}export async function pauseGame(){const _0x1dc313=a0_0x14c276;Module[_0x1dc313(0x126)](),Module['SDL2'](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x5ea9d8){const _0x4dec5d=a0_0x14c276;Module[_0x4dec5d(0x130)](_0x5ea9d8);}export async function buttonUnpress(_0x394d13){Module['buttonUnpress'](_0x394d13);}export async function screenShot(_0x56f82c){const _0x39e4db=a0_0x14c276,_0x28ca16=localStorage[_0x39e4db(0x11c)](_0x39e4db(0x115))[_0x39e4db(0x100)](/\.(gba|gbc|gb|zip)$/,''),_0x621116=_0x28ca16+'_'+_0x56f82c+'.png';await Module[_0x39e4db(0xe5)](_0x621116),await Module[_0x39e4db(0x127)]();const _0x5d15c3=await fileToBase64(Module[_0x39e4db(0x135)](_0x39e4db(0xe4)+_0x621116)),_0x22c396=embedTextInPngFile(_0x5d15c3,formatDateTime(Date[_0x39e4db(0xed)]()),_0x621116);Module['uploadAll'](_0x22c396,()=>{const _0xb6f013=_0x39e4db;localStorageFile(),Module[_0xb6f013(0x127)]();});}export async function dowloadScreenShot(_0x537edf){const _0x1e06d9=a0_0x14c276;try{const _0x4dc079=await fileToBase64(Module[_0x1e06d9(0x135)](_0x537edf));return _0x4dc079;}catch{}}export async function captureOCR(_0x2ea9ef){const _0x2df4c0=a0_0x14c276;Module[_0x2df4c0(0xe5)](_0x2ea9ef);const _0x2d7d6d=Module[_0x2df4c0(0x135)](_0x2df4c0(0xe4)+_0x2ea9ef);return _0x2d7d6d;}export async function setFastForwardMultiplier(_0x5933e5){const _0x2b536e=a0_0x14c276;Module[_0x2b536e(0xfc)](_0x5933e5);}export function uploadCheats(_0x43c7ef,_0x5b5e05,_0x22ab25,_0x1521f8,_0xb4ec87){const _0x265c06=a0_0x14c276;Module[_0x265c06(0x108)](_0x43c7ef,()=>{const _0x207266=_0x265c06;Module[_0x207266(0xfe)](),setTimeout(()=>{const _0x21181c=_0x207266;Module[_0x21181c(0x127)]();},0x1f4),_0x1521f8&&(localStorage[_0x207266(0x10a)](_0x5b5e05+_0x207266(0xe0),_0x22ab25),notiMessage('Cheat\x20Enabled!',0x5dc)),_0xb4ec87[_0x207266(0x103)]=localStorage[_0x207266(0x11c)](_0x5b5e05+_0x207266(0xe0)||_0x207266(0xe8));});}export function setVolume(_0x55b86d){const _0x3b5a9a=a0_0x14c276;Module[_0x3b5a9a(0x124)](_0x55b86d);}