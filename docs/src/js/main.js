const a0_0x4f28d7=a0_0x3503;(function(_0x5db61e,_0x13f1d4){const _0x4cf389=a0_0x3503,_0xcd48a4=_0x5db61e();while(!![]){try{const _0x2fb649=parseInt(_0x4cf389(0x16b))/0x1*(-parseInt(_0x4cf389(0x1b0))/0x2)+parseInt(_0x4cf389(0x196))/0x3+parseInt(_0x4cf389(0x1b1))/0x4+-parseInt(_0x4cf389(0x197))/0x5+-parseInt(_0x4cf389(0x171))/0x6*(-parseInt(_0x4cf389(0x180))/0x7)+-parseInt(_0x4cf389(0x166))/0x8+-parseInt(_0x4cf389(0x16c))/0x9*(-parseInt(_0x4cf389(0x16e))/0xa);if(_0x2fb649===_0x13f1d4)break;else _0xcd48a4['push'](_0xcd48a4['shift']());}catch(_0x33afce){_0xcd48a4['push'](_0xcd48a4['shift']());}}}(a0_0x13ae,0xdc870));import a0_0x39ff59 from'../core/mgba.js';function a0_0x13ae(){const _0x34b33b=['state','disable','pagehide','image/png','10fTpwgu','2649264kiRcGH','resumeGame','includes','style','listCheats','innerWidth','rgba(245,\x20232,\x20209,\x200.4)','concat','join','buttonPress','addEventListener','0.4','uploadAll','getElementById','led05','replace','lastIndexOf','uploadRom','led0','listRoms','files','editFileName','led00','led03','log','opacity','getItem','loadGame','setItem','filter','download','then','\x20time(s)','charCodeAt','click','All','\x20:\x20','visibilitychange','Error\x20ledSave:','classList','.png','Auto\x20save\x20','.gb','9849792KsnDEE','led04','saveState','body','Do\x20you\x20want\x20to\x20load\x20save\x20state?','337023aSNGPV','54225nAqZpV','slotStateSaved','3310GLThNm','SDL2','set','66kybukl','listSaves','substring','tEXtComment\x00','error','fill','indexOf','0,0,','#E0C068','Resumed!','loadState','screenSize','screenshot','/data/states/','length','483133RACfYb','fileSize','entries','toString','remove','endsWith','led07','listScreenshots','textContent','pauseGame','led01','led06','trim','uId','onLine','contains','/data/games/','beforeunload','FSInit','turboState','setFastForwardMultiplier','#20A5A6','3215073PokBjY','3339360snBVjS','Paused!','saveTime','/data/screenshots/','split','type','FSSync','href','canvas','led02','\x20|\x20','Cloud\x20upload\x20','listStates','encode','map','visible','padStart','createElement','add','downloadFile','application/octet-stream'];a0_0x13ae=function(){return _0x34b33b;};return a0_0x13ae();}import*as a0_0x4e9eb5 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const Module={'canvas':document['getElementById']('canvas')};function initializeCore(_0x5cbad8,_0x17aab8){const _0x47fa3c=a0_0x3503;_0x5cbad8(_0x17aab8)[_0x47fa3c(0x15a)](function(_0xb1c1a8){const _0x30d859=_0x47fa3c;_0xb1c1a8[_0x30d859(0x192)]();});}initializeCore(a0_0x39ff59,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x4f28d7(0x148)](a0_0x4f28d7(0x19f)),controlSetting=document['getElementById']('control-setting');function handleVisibilityChange(_0x195b11){const _0x2fd12a=a0_0x4f28d7;document['visibilityState']==='hidden'||_0x195b11?.[_0x2fd12a(0x19c)]===_0x2fd12a(0x191)||_0x195b11?.['persisted']?(Module[_0x2fd12a(0x19d)](),pauseGame(),canvas['classList'][_0x2fd12a(0x1a9)](_0x2fd12a(0x1a6))):(setTimeout(()=>{const _0x49dbc0=_0x2fd12a;canvas[_0x49dbc0(0x162)][_0x49dbc0(0x184)](_0x49dbc0(0x1a6));},0x258),controlSetting[_0x2fd12a(0x162)][_0x2fd12a(0x18f)]('visible')&&resumeGame());}async function statusShow(){const _0x1192e7=a0_0x4f28d7;document[_0x1192e7(0x145)](_0x1192e7(0x1ae),handleVisibilityChange),document[_0x1192e7(0x145)](_0x1192e7(0x160),handleVisibilityChange),window[_0x1192e7(0x145)](_0x1192e7(0x191),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x4e9eb5['turboF'](parseInt(await getData(gameName,'0',_0x1192e7(0x193)))),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x1192e7(0x16d)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0xc012dc=a0_0x4f28d7;await ledSave(_0xc012dc(0x195)),await Module[_0xc012dc(0x168)](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0xc012dc(0x153)](_0xc012dc(0x164)+ ++countAutoSave+_0xc012dc(0x15b));}async function saveStateInCloud(){const _0x1e8f2d=a0_0x4f28d7,_0x1ce362=gameName[_0x1e8f2d(0x14a)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x117279=localStorage[_0x1e8f2d(0x155)](_0x1e8f2d(0x18d));navigator[_0x1e8f2d(0x18e)]&&(_0x117279&&(await ledSave(_0x1e8f2d(0x179)),await delay(0x3e8),await dpUploadFile(_0x1ce362,Module[_0x1e8f2d(0x1aa)](_0x1e8f2d(0x17e)+_0x1ce362),_0x1e8f2d(0x1ac)),await lockNoti('',_0x1e8f2d(0x1a2)+ ++countUpload+_0x1e8f2d(0x15b),0x7d0)));}function startTimer(){let [_0x4eaa5e,_0xad3b76,_0x2f8c69,_0x48a4cb,_0x435e91]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x26d74b=a0_0x3503;_0x2f8c69++,_0x48a4cb++,_0x435e91++;if(_0x2f8c69===0x3c)[_0x2f8c69,_0xad3b76]=[0x0,_0xad3b76+0x1];if(_0xad3b76===0x3c)[_0xad3b76,_0x4eaa5e]=[0x0,_0x4eaa5e+0x1];document[_0x26d74b(0x148)]('timer')['textContent']=_0x4eaa5e+'h'+_0xad3b76[_0x26d74b(0x183)]()[_0x26d74b(0x1a7)](0x2,'0')+'.'+_0x2f8c69[_0x26d74b(0x183)]()['padStart'](0x2,'0');_0x48a4cb===0x3c&&(saveStatePeriodically(),_0x48a4cb=0x0);;_0x435e91===0x708&&(saveStateInCloud(),_0x435e91=0x0);;},0x3e8);}export async function uploadGame(_0x5688a7){const _0x252ff5=a0_0x4f28d7,_0x2a1fd2=_0x5688a7[_0x252ff5(0x14f)][0x0];Module[_0x252ff5(0x14c)](_0x2a1fd2,()=>{Module['FSSync']();});}export async function loadGame(_0x1a83bf){const _0x3717d2=a0_0x4f28d7,_0x3b3b4d=_0x1a83bf[_0x3717d2(0x14a)](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x454959=Module['listStates']()[_0x3717d2(0x158)](_0x3c5b80=>_0x3c5b80!=='.'&&_0x3c5b80!=='..');intro['classList'][_0x3717d2(0x1a9)](_0x3717d2(0x1ad)),errorLogElements[0x0][_0x3717d2(0x1b4)]['bottom']='0',ingame['classList']['remove'](_0x3717d2(0x1ad)),_0x1a83bf[_0x3717d2(0x185)]('.gbc')||_0x1a83bf[_0x3717d2(0x185)](_0x3717d2(0x165))?(canvas[_0x3717d2(0x162)]['add']('gbc'),areaTrans[_0x3717d2(0x162)][_0x3717d2(0x1a9)]('gbc1'),localStorage[_0x3717d2(0x157)](_0x3717d2(0x17c),'0,0,'+(window[_0x3717d2(0x1b6)]-0xe6)+','+(window[_0x3717d2(0x1b6)]-0xe6)*0x9/0xa)):localStorage[_0x3717d2(0x157)](_0x3717d2(0x17c),_0x3717d2(0x178)+(window[_0x3717d2(0x1b6)]-0x96)+','+(window[_0x3717d2(0x1b6)]-0x96)*0x2/0x3),_0x454959[_0x3717d2(0x1b3)](_0x3b3b4d)?(await Module[_0x3717d2(0x156)](_0x3717d2(0x190)+_0x1a83bf),confirm(_0x3717d2(0x16a))&&(await Module[_0x3717d2(0x17b)](0x0),await shaderData())):(await Module['loadGame'](_0x3717d2(0x190)+gameName),await shaderData()),await statusShow();}export async function saveState(_0x2bfe55){await Module['saveState'](_0x2bfe55);}export async function loadState(_0x34a831){await Module['loadState'](_0x34a831);}export async function downloadFile(_0x56687f,_0xb95ad7){const _0x26aa87=a0_0x4f28d7,_0x446a2f=Module[_0x26aa87(0x1aa)](_0x56687f),_0x1014da=document[_0x26aa87(0x1a8)]('a');document[_0x26aa87(0x169)]['appendChild'](_0x1014da),_0x1014da[_0x26aa87(0x159)]=_0xb95ad7;const _0x356825=new Blob([_0x446a2f],{'type':_0x26aa87(0x1ab)});_0x1014da[_0x26aa87(0x19e)]=URL['createObjectURL'](_0x356825),_0x1014da[_0x26aa87(0x15d)](),URL['revokeObjectURL'](_0x356825),_0x1014da[_0x26aa87(0x184)]();}export function downloadFileInCloud(_0x47bf37){try{const _0x4e8ad3=Module['downloadFile'](_0x47bf37);return _0x4e8ad3;}catch(_0x543de6){return null;}}export async function uploadFileInCloud(_0xb589ec){const _0x592d18=a0_0x4f28d7;Module[_0x592d18(0x147)](_0xb589ec,async()=>{const _0x22b4ae=_0x592d18;localStorageFile(),await Module[_0x22b4ae(0x19d)]();});}export async function uploadFile(_0x170432){const _0x1d9c15=a0_0x4f28d7,_0x330dfb=_0x170432[_0x1d9c15(0x14f)][0x0];Module['uploadAll'](_0x330dfb,async()=>{localStorageFile(),await Module['FSSync']();});}export async function editFile(_0x1f02d1,_0xbe4c03,_0xf266d6){const _0x30d90b=a0_0x4f28d7;await Module[_0x30d90b(0x150)](_0x1f02d1,_0xbe4c03,_0xf266d6);}export async function deleteFile(_0x383dd1){const _0x1db7ee=a0_0x4f28d7;try{return await Module['deleteFile'](_0x383dd1),!![];}catch(_0x5b07e4){return console[_0x1db7ee(0x175)](_0x383dd1),null;}}export function listGame(){const _0xf2322b=a0_0x4f28d7,_0x3477e6=Module[_0xf2322b(0x14e)]()[_0xf2322b(0x158)](_0x237829=>_0x237829!=='.'&&_0x237829!=='..');return _0x3477e6;}export function listSave(){const _0x1c20e2=a0_0x4f28d7,_0x6158ea=Module[_0x1c20e2(0x172)]()['filter'](_0x2b09cc=>_0x2b09cc!=='.'&&_0x2b09cc!=='..');return _0x6158ea;}export function listState(){const _0x2fd648=a0_0x4f28d7,_0x3e94bd=Module[_0x2fd648(0x1a3)]()[_0x2fd648(0x158)](_0x20710e=>_0x20710e!=='.'&&_0x20710e!=='..');return _0x3e94bd;}export function listCheat(){const _0x4bfb8c=a0_0x4f28d7,_0x3c10ec=Module[_0x4bfb8c(0x1b5)]()[_0x4bfb8c(0x158)](_0x4221f3=>_0x4221f3!=='.'&&_0x4221f3!=='..');return _0x3c10ec;}export function listScreenshot(){const _0x4c1a1d=a0_0x4f28d7,_0x44b0b0=Module[_0x4c1a1d(0x187)]()[_0x4c1a1d(0x158)](_0x24cd31=>_0x24cd31!=='.'&&_0x24cd31!=='..');return _0x44b0b0;}export function embedTextInPngFile(_0x44a35f,_0x4a3b56,_0x522553){const _0x39b6fa=a0_0x4f28d7;let _0x448590=atob(_0x44a35f[_0x39b6fa(0x19b)](',')[0x1]),_0x21b6bc=new Uint8Array(_0x448590['length']);for(let _0x109d06=0x0;_0x109d06<_0x448590[_0x39b6fa(0x17f)];_0x109d06++){_0x21b6bc[_0x109d06]=_0x448590[_0x39b6fa(0x15c)](_0x109d06);}let _0xdf64bf=new TextEncoder()[_0x39b6fa(0x1a4)](_0x39b6fa(0x174)+_0x4a3b56),_0x4eda42=new Uint8Array(_0x21b6bc[_0x39b6fa(0x17f)]+_0xdf64bf[_0x39b6fa(0x17f)]);_0x4eda42[_0x39b6fa(0x170)](_0x21b6bc,0x0),_0x4eda42[_0x39b6fa(0x170)](_0xdf64bf,_0x21b6bc[_0x39b6fa(0x17f)]);let _0x29aac7=new Blob([_0x4eda42],{'type':_0x39b6fa(0x1af)}),_0x2652d6=new File([_0x29aac7],_0x522553,{'type':_0x39b6fa(0x1af)});return _0x2652d6;}export function extractTextFromPngBase64(_0x575714){const _0x18c954=a0_0x4f28d7;let _0xbd235b=atob(_0x575714[_0x18c954(0x19b)](',')[0x1]),_0x2f3deb=_0x18c954(0x174),_0x2d1ebd=_0xbd235b['indexOf'](_0x2f3deb);if(_0x2d1ebd!==-0x1)return _0xbd235b[_0x18c954(0x173)](_0x2d1ebd+_0x2f3deb[_0x18c954(0x17f)]);return null;}function a0_0x3503(_0x2e6a7c,_0x20fbea){const _0x13ae77=a0_0x13ae();return a0_0x3503=function(_0x350371,_0x2f2dd7){_0x350371=_0x350371-0x142;let _0x4af669=_0x13ae77[_0x350371];return _0x4af669;},a0_0x3503(_0x2e6a7c,_0x20fbea);}export function fileSize(_0x218a5e){const _0x19c952=a0_0x4f28d7,_0x40dec7=Module[_0x19c952(0x181)](_0x218a5e);return _0x40dec7;}export async function resumeGame(){const _0x3033e9=a0_0x4f28d7;Module[_0x3033e9(0x1b2)](),Module[_0x3033e9(0x16f)](),notiMessage(_0x3033e9(0x17a),0x7d0);}export async function pauseGame(){const _0x42443e=a0_0x4f28d7;Module[_0x42443e(0x189)](),Module['SDL2'](),notiMessage(_0x42443e(0x198),0x7d0);}export async function buttonPress(_0x4782a3){const _0x1e20e2=a0_0x4f28d7;Module[_0x1e20e2(0x144)](_0x4782a3);}export async function buttonUnpress(_0x1ad0ca){Module['buttonUnpress'](_0x1ad0ca);}export async function screenShot(_0x468a35){const _0x1595df=a0_0x4f28d7,_0x353797=gameName['replace'](/\.(gba|gbc|gb|zip)$/,'_'+_0x468a35+_0x1595df(0x163)),_0x5cba05=await getData(gameName,_0x468a35,_0x1595df(0x15e))||'';console[_0x1595df(0x153)](_0x5cba05),await Module[_0x1595df(0x17d)](_0x353797),await setData(gameName,_0x468a35,_0x1595df(0x199),formatDateTime(Date['now']()),_0x5cba05);}export async function dowloadScreenShot(_0x265ee2){const _0x597fa4=a0_0x4f28d7;try{const _0x43a0cf=await fileToBase64(Module[_0x597fa4(0x1aa)](_0x265ee2));return _0x43a0cf;}catch{}}export async function captureOCR(_0x4baeb4){const _0x1020b3=a0_0x4f28d7;Module[_0x1020b3(0x17d)](_0x4baeb4);const _0x1b10f5=Module['downloadFile'](_0x1020b3(0x19a)+_0x4baeb4);return _0x1b10f5;}export async function setFastForwardMultiplier(_0x5c18ab){const _0x58cde3=a0_0x4f28d7;Module[_0x58cde3(0x194)](_0x5c18ab);}export async function uploadCheats(_0x2b09dd){const _0x48840d=a0_0x4f28d7;Module['autoLoadCheats'](),Module[_0x48840d(0x147)](_0x2b09dd,async()=>{});}export function setVolume(_0x4f993a){Module['setVolume'](_0x4f993a);}export async function setData(_0x249671,_0xdeb2c7,_0x55e053,_0x1e4d13,_0x4e06e6=''){const _0x38cec3=a0_0x4f28d7,_0x1e55c4=_0x249671[_0x38cec3(0x14a)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0xb2237b=_0x38cec3(0x19a)+_0x1e55c4+'_'+_0xdeb2c7+_0x38cec3(0x163);let _0x84953c;try{_0x84953c=await fileToBase64(Module[_0x38cec3(0x1aa)](_0xb2237b));}catch(_0xd3337d){await Module[_0x38cec3(0x17d)](_0x1e55c4+'_'+_0xdeb2c7+_0x38cec3(0x163)),await delay(0xc8),_0x84953c=await fileToBase64(Module[_0x38cec3(0x1aa)](_0xb2237b));}let _0x1dbd9a=atob(_0x84953c[_0x38cec3(0x19b)](',')[0x1]),_0x4e3ad8='tEXtComment\x00',_0x29c60c=_0x1dbd9a[_0x38cec3(0x177)](_0x4e3ad8),_0x9c1e47={};if(_0x29c60c!==-0x1||_0x4e06e6[_0x38cec3(0x18c)]()!==''){let _0x3035ad=_0x29c60c!==-0x1?_0x1dbd9a[_0x38cec3(0x173)](_0x29c60c+_0x4e3ad8[_0x38cec3(0x17f)]):_0x4e06e6,_0x3ee074=/(\w+)\s*:\s*([^|]*)/g,_0x4aa147;while((_0x4aa147=_0x3ee074['exec'](_0x3035ad))!==null){_0x9c1e47[_0x4aa147[0x1][_0x38cec3(0x18c)]()]=_0x4aa147[0x2][_0x38cec3(0x18c)]();}_0x29c60c!==-0x1&&(_0x1dbd9a=_0x1dbd9a[_0x38cec3(0x173)](0x0,_0x29c60c));}_0x9c1e47[_0x55e053]=_0x1e4d13;let _0x3956ff=Object[_0x38cec3(0x182)](_0x9c1e47)[_0x38cec3(0x1a5)](([_0x5738fa,_0x5abd33])=>_0x5738fa+_0x38cec3(0x15f)+_0x5abd33)[_0x38cec3(0x143)](_0x38cec3(0x1a1)),_0x35cf60=new TextEncoder()[_0x38cec3(0x1a4)](_0x4e3ad8+'\x20'+_0x3956ff),_0x4dbc4c=new Uint8Array([..._0x1dbd9a]['map'](_0x3376b4=>_0x3376b4[_0x38cec3(0x15c)](0x0))[_0x38cec3(0x142)]([..._0x35cf60])),_0x5bfa2d=new File([new Blob([_0x4dbc4c],{'type':'image/png'})],_0x1e55c4+'_'+_0xdeb2c7+_0x38cec3(0x163),{'type':_0x38cec3(0x1af)});Module['uploadAll'](_0x5bfa2d,async()=>{});}export async function getData(_0x21986a,_0x55b34b,_0x4ba009){const _0xa76285=a0_0x4f28d7;try{const _0x5a362c=_0x21986a[_0xa76285(0x14a)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x2eafc2=_0xa76285(0x19a)+_0x5a362c+'_'+_0x55b34b+_0xa76285(0x163);let _0x20bf5f;try{_0x20bf5f=await fileToBase64(Module['downloadFile'](_0x2eafc2));}catch(_0x10f32c){return null;}let _0xc0b4fd=atob(_0x20bf5f['split'](',')[0x1]),_0x7ec5e4=_0xa76285(0x174),_0xab158d=_0xc0b4fd[_0xa76285(0x177)](_0x7ec5e4);if(_0xab158d!==-0x1){let _0x40856b=_0xc0b4fd[_0xa76285(0x173)](_0xab158d+_0x7ec5e4['length']);if(_0x4ba009===_0xa76285(0x15e))return _0x40856b['trim']();let _0x35957e=new RegExp(_0x4ba009+'\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)'),_0xf61cd6=_0x40856b['match'](_0x35957e);if(_0xf61cd6)return _0xf61cd6[0x1][_0xa76285(0x18c)]();}}catch(_0x416800){return console['error']({'romName':_0x21986a,'slot':_0x55b34b,'type':_0x4ba009}),null;}}export async function ledSave(_0x591cee){const _0x39480d=a0_0x4f28d7,_0x1180ba=parseInt(await getData(gameName,'0',_0x39480d(0x16d))),_0x343cd5=_0x1180ba===0x1?_0x39480d(0x18a):_0x1180ba===0x2?_0x39480d(0x1a0):_0x1180ba===0x3?_0x39480d(0x152):_0x1180ba===0x4?_0x39480d(0x167):_0x1180ba===0x5?_0x39480d(0x149):_0x1180ba===0x6?_0x39480d(0x18b):_0x1180ba===0x7?_0x39480d(0x186):_0x39480d(0x151);try{for(let _0x496cbf=0x0;_0x496cbf<=0x7;_0x496cbf++){document[_0x39480d(0x148)](_0x39480d(0x14d)+_0x496cbf)['style']['fill']=_0x39480d(0x1b7);}await delay(0x3e8);for(let _0x456033=0x0;_0x456033<=0x7;_0x456033++){document[_0x39480d(0x148)]('led0'+_0x456033)[_0x39480d(0x1b4)][_0x39480d(0x176)]=_0x39480d(0x1b7);}document[_0x39480d(0x148)](_0x343cd5)[_0x39480d(0x1b4)]['fill']=_0x591cee;}catch(_0x5a4af3){console[_0x39480d(0x175)](_0x39480d(0x161),_0x5a4af3);}};export async function notiMessage(_0x38a3b8,_0x114a55,_0x498b54=![]){const _0x5a6581=a0_0x4f28d7;var _0x3c5622=document[_0x5a6581(0x148)]('noti-mess');const _0xd3cd9f=parseInt(await getData(gameName,'0',_0x5a6581(0x16d)))||0x0;_0x3c5622[_0x5a6581(0x1b4)]['opacity']==='0.4'&&(clearTimeout(messageTimeout),_0x3c5622['style'][_0x5a6581(0x154)]='0'),_0x3c5622[_0x5a6581(0x188)]=_0x38a3b8,_0x3c5622[_0x5a6581(0x1b4)][_0x5a6581(0x154)]=_0x5a6581(0x146),messageTimeout=setTimeout(()=>{const _0x2aae63=_0x5a6581;_0x3c5622['textContent']='['+_0xd3cd9f+']\x20'+gameName[_0x2aae63(0x173)](0x0,gameName[_0x2aae63(0x14b)]('.')),_0x3c5622['style'][_0x2aae63(0x154)]=_0x2aae63(0x146);},_0x114a55),_0x498b54&&(canvas[_0x5a6581(0x162)]['add'](_0x5a6581(0x1a6)),setTimeout(()=>{const _0x56cf61=_0x5a6581;canvas[_0x56cf61(0x162)][_0x56cf61(0x184)](_0x56cf61(0x1a6));},0x258));}export async function FSSync(){Module['FSSync']();}