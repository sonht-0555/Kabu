const a0_0x2ebb8c=a0_0x28a7;(function(_0x565992,_0x3bd5e2){const _0x91665c=a0_0x28a7,_0x773af3=_0x565992();while(!![]){try{const _0x262c4c=parseInt(_0x91665c(0x114))/0x1*(-parseInt(_0x91665c(0x118))/0x2)+-parseInt(_0x91665c(0x117))/0x3+-parseInt(_0x91665c(0x176))/0x4+parseInt(_0x91665c(0x115))/0x5*(-parseInt(_0x91665c(0x13f))/0x6)+parseInt(_0x91665c(0x168))/0x7*(-parseInt(_0x91665c(0x16f))/0x8)+parseInt(_0x91665c(0x15f))/0x9+parseInt(_0x91665c(0x161))/0xa*(parseInt(_0x91665c(0x15b))/0xb);if(_0x262c4c===_0x3bd5e2)break;else _0x773af3['push'](_0x773af3['shift']());}catch(_0x43c011){_0x773af3['push'](_0x773af3['shift']());}}}(a0_0x313d,0x79125));import a0_0x12cc5f from'../core/mgba.js';import*as a0_0x1a5328 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const Module={'canvas':document[a0_0x2ebb8c(0x16b)](a0_0x2ebb8c(0x124))};function initializeCore(_0x4ce00e,_0x2b3cf3){const _0xe48ae4=a0_0x2ebb8c;_0x4ce00e(_0x2b3cf3)[_0xe48ae4(0x171)](function(_0x4db2f4){const _0x4c75f7=_0xe48ae4;_0x4db2f4[_0x4c75f7(0x175)]();});}initializeCore(a0_0x12cc5f,Module);let countAutoSave=0x0,countUpload=0x0;function a0_0x313d(){const _0x474120=['.gbc','.gb','charCodeAt','beforeunload','appendChild','saveState','led07','filter','gbc','createElement','error','join','\x20time(s)','downloadFile','visible','#E0C068','screenSize','listScreenshots','encode','control-setting','led01','0,0,','All','22cwqpXt','pauseGame','pagehide','\x20:\x20','4821606cHljUn','led04','9925210OATdHL','files','visibilityState','disable','Do\x20you\x20want\x20to\x20load\x20save\x20state?','add','screenshot','92743yxGFhO','.ss0','getItem','getElementById','download','image/png','addEventListener','72oDBXEF','Resumed!','then','loadGame','listRoms','trim','FSInit','1203716qEfYio','slotStateSaved','fill','includes','FSSync','listSaves','/data/games/','Cloud\x20upload\x20','length','exec','visibilitychange','SDL2','listStates','Paused!','/data/screenshots/','editFileName','.png','\x20|\x20','uId','Error\x20ledSave:','state','led06','uploadRom','padStart','1TZDwWo','185iHNoIZ','concat','2139615uTtNCT','524762dwPnnK','turboState','body','setItem','turboF','led02','tEXtComment\x00','replace','contains','classList','innerWidth','application/octet-stream','canvas','led00','resumeGame','#20A5A6','style','0.4','now','createObjectURL','match','toString','setFastForwardMultiplier','onLine','fileSize','timer','buttonPress','textContent','log','noti-mess','led0','/data/states/','set','split','endsWith','opacity','loadState','map','indexOf','102018BaePIq','lastIndexOf','substring','remove','uploadAll'];a0_0x313d=function(){return _0x474120;};return a0_0x313d();}const canvas=document[a0_0x2ebb8c(0x16b)](a0_0x2ebb8c(0x124)),controlSetting=document[a0_0x2ebb8c(0x16b)](a0_0x2ebb8c(0x157));function handleVisibilityChange(_0x52ea87){const _0x2fcd8c=a0_0x2ebb8c;document[_0x2fcd8c(0x163)]==='hidden'||_0x52ea87?.['type']===_0x2fcd8c(0x147)||_0x52ea87?.['persisted']?(pauseGame(),canvas[_0x2fcd8c(0x121)]['add'](_0x2fcd8c(0x152))):(setTimeout(()=>{const _0xf819cc=_0x2fcd8c;canvas[_0xf819cc(0x121)][_0xf819cc(0x142)](_0xf819cc(0x152));},0x258),controlSetting['classList'][_0x2fcd8c(0x120)]('visible')&&resumeGame());}async function statusShow(){const _0xf9489=a0_0x2ebb8c;document[_0xf9489(0x16e)](_0xf9489(0x15d),handleVisibilityChange),document['addEventListener'](_0xf9489(0x180),handleVisibilityChange),window[_0xf9489(0x16e)](_0xf9489(0x147),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x1a5328[_0xf9489(0x11c)](parseInt(await getData(gameName,'0',_0xf9489(0x119)))),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0xf9489(0x177)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x365860=a0_0x2ebb8c;await ledSave(_0x365860(0x127)),await Module[_0x365860(0x149)](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x365860(0x134)]('Auto\x20save\x20'+ ++countAutoSave+_0x365860(0x150));}async function saveStateInCloud(){const _0x162b23=a0_0x2ebb8c,_0x33379e=gameName['replace'](/\.(zip|gb|gbc|gba)$/,_0x162b23(0x169)),_0x546587=localStorage[_0x162b23(0x16a)](_0x162b23(0x10e));navigator[_0x162b23(0x12f)]&&(_0x546587&&(await ledSave(_0x162b23(0x153)),await delay(0x3e8),await dpUploadFile(_0x33379e,Module[_0x162b23(0x151)](_0x162b23(0x137)+_0x33379e),_0x162b23(0x110)),await lockNoti('',_0x162b23(0x17d)+ ++countUpload+'\x20time(s)',0x7d0)));}function startTimer(){let [_0x2418aa,_0x227dd9,_0x4f2db4,_0x37046a,_0x16039d]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x4b8d0a=a0_0x28a7;_0x4f2db4++,_0x37046a++,_0x16039d++;if(_0x4f2db4===0x3c)[_0x4f2db4,_0x227dd9]=[0x0,_0x227dd9+0x1];if(_0x227dd9===0x3c)[_0x227dd9,_0x2418aa]=[0x0,_0x2418aa+0x1];document[_0x4b8d0a(0x16b)](_0x4b8d0a(0x131))['textContent']=_0x2418aa+'h'+_0x227dd9[_0x4b8d0a(0x12d)]()[_0x4b8d0a(0x113)](0x2,'0')+'.'+_0x4f2db4[_0x4b8d0a(0x12d)]()['padStart'](0x2,'0');_0x37046a===0x3c&&(saveStatePeriodically(),_0x37046a=0x0);;_0x16039d===0x708&&(saveStateInCloud(),_0x16039d=0x0);;},0x3e8);}export async function uploadGame(_0x34f402){const _0x5235c3=a0_0x2ebb8c,_0x46a9ed=_0x34f402[_0x5235c3(0x162)][0x0];Module[_0x5235c3(0x112)](_0x46a9ed,()=>{Module['FSSync']();});}export async function loadGame(_0x1dd775){const _0x44edee=a0_0x2ebb8c,_0xe336d3=_0x1dd775['replace'](/\.(gba|gbc|gb|zip)$/,_0x44edee(0x169)),_0x4a1a67=Module[_0x44edee(0x182)]()[_0x44edee(0x14b)](_0x4a8ac5=>_0x4a8ac5!=='.'&&_0x4a8ac5!=='..');intro['classList']['add'](_0x44edee(0x164)),errorLogElements[0x0][_0x44edee(0x128)]['bottom']='0',ingame[_0x44edee(0x121)][_0x44edee(0x142)]('disable'),_0x1dd775[_0x44edee(0x13a)](_0x44edee(0x144))||_0x1dd775[_0x44edee(0x13a)](_0x44edee(0x145))?(canvas[_0x44edee(0x121)][_0x44edee(0x166)](_0x44edee(0x14c)),areaTrans[_0x44edee(0x121)][_0x44edee(0x166)]('gbc1'),localStorage[_0x44edee(0x11b)](_0x44edee(0x154),_0x44edee(0x159)+(window[_0x44edee(0x122)]-0xe6)+','+(window[_0x44edee(0x122)]-0xe6)*0x9/0xa)):localStorage[_0x44edee(0x11b)](_0x44edee(0x154),_0x44edee(0x159)+(window[_0x44edee(0x122)]-0x96)+','+(window[_0x44edee(0x122)]-0x96)*0x2/0x3),_0x4a1a67[_0x44edee(0x179)](_0xe336d3)?(await Module['loadGame']('/data/games/'+_0x1dd775),confirm(_0x44edee(0x165))&&(await Module[_0x44edee(0x13c)](0x0),await shaderData())):(await Module[_0x44edee(0x172)](_0x44edee(0x17c)+gameName),await shaderData()),await statusShow();}export async function saveState(_0x52551c){const _0x3a03e6=a0_0x2ebb8c;await Module[_0x3a03e6(0x149)](_0x52551c),await Module[_0x3a03e6(0x17a)]();}export async function loadState(_0x30bfd3){const _0x361f37=a0_0x2ebb8c;await Module[_0x361f37(0x13c)](_0x30bfd3);}export async function downloadFile(_0x264d8d,_0xc9fc9d){const _0x1646e4=a0_0x2ebb8c,_0x271867=Module[_0x1646e4(0x151)](_0x264d8d),_0x130604=document[_0x1646e4(0x14d)]('a');document[_0x1646e4(0x11a)][_0x1646e4(0x148)](_0x130604),_0x130604[_0x1646e4(0x16c)]=_0xc9fc9d;const _0x3535c4=new Blob([_0x271867],{'type':_0x1646e4(0x123)});_0x130604['href']=URL[_0x1646e4(0x12b)](_0x3535c4),_0x130604['click'](),URL['revokeObjectURL'](_0x3535c4),_0x130604[_0x1646e4(0x142)]();}export function downloadFileInCloud(_0x3617d1){try{const _0x2ee597=Module['downloadFile'](_0x3617d1);return _0x2ee597;}catch(_0x45e405){return null;}}export async function uploadFileInCloud(_0x40de64){const _0x33daad=a0_0x2ebb8c;Module[_0x33daad(0x143)](_0x40de64,async()=>{localStorageFile(),await Module['FSSync']();});}export async function uploadFile(_0x522ca6){const _0x469517=a0_0x2ebb8c,_0x34170e=_0x522ca6[_0x469517(0x162)][0x0];Module[_0x469517(0x143)](_0x34170e,async()=>{const _0x117e59=_0x469517;localStorageFile(),await Module[_0x117e59(0x17a)]();});}export async function editFile(_0x3044e9,_0x35dae9,_0x383e51){const _0x4b1dd6=a0_0x2ebb8c;await Module[_0x4b1dd6(0x10b)](_0x3044e9,_0x35dae9,_0x383e51),await Module[_0x4b1dd6(0x17a)]();}export async function deleteFile(_0x17f894){const _0x473845=a0_0x2ebb8c;try{return await Module['deleteFile'](_0x17f894),await Module[_0x473845(0x17a)](),!![];}catch(_0x15d3d6){return console[_0x473845(0x14e)](_0x17f894),null;}}export function listGame(){const _0x372204=a0_0x2ebb8c,_0x1bb134=Module[_0x372204(0x173)]()['filter'](_0x5ca4b8=>_0x5ca4b8!=='.'&&_0x5ca4b8!=='..');return _0x1bb134;}export function listSave(){const _0xa74b6a=a0_0x2ebb8c,_0x307fe9=Module[_0xa74b6a(0x17b)]()[_0xa74b6a(0x14b)](_0x26124d=>_0x26124d!=='.'&&_0x26124d!=='..');return _0x307fe9;}export function listState(){const _0x553bb6=Module['listStates']()['filter'](_0x32f9e9=>_0x32f9e9!=='.'&&_0x32f9e9!=='..');return _0x553bb6;}export function listCheat(){const _0x35366a=a0_0x2ebb8c,_0x5c3b11=Module['listCheats']()[_0x35366a(0x14b)](_0x22e34d=>_0x22e34d!=='.'&&_0x22e34d!=='..');return _0x5c3b11;}export function listScreenshot(){const _0x4f1f5a=a0_0x2ebb8c,_0x14e216=Module[_0x4f1f5a(0x155)]()['filter'](_0x5cfd80=>_0x5cfd80!=='.'&&_0x5cfd80!=='..');return _0x14e216;}export function embedTextInPngFile(_0x521f3f,_0x514c36,_0xf4a15f){const _0x46c106=a0_0x2ebb8c;let _0x270917=atob(_0x521f3f[_0x46c106(0x139)](',')[0x1]),_0x33859d=new Uint8Array(_0x270917[_0x46c106(0x17e)]);for(let _0x2b8d1c=0x0;_0x2b8d1c<_0x270917[_0x46c106(0x17e)];_0x2b8d1c++){_0x33859d[_0x2b8d1c]=_0x270917[_0x46c106(0x146)](_0x2b8d1c);}let _0x42114e=new TextEncoder()[_0x46c106(0x156)]('tEXtComment\x00'+_0x514c36),_0x1e97e5=new Uint8Array(_0x33859d[_0x46c106(0x17e)]+_0x42114e[_0x46c106(0x17e)]);_0x1e97e5[_0x46c106(0x138)](_0x33859d,0x0),_0x1e97e5[_0x46c106(0x138)](_0x42114e,_0x33859d['length']);let _0x33d508=new Blob([_0x1e97e5],{'type':_0x46c106(0x16d)}),_0xad01d3=new File([_0x33d508],_0xf4a15f,{'type':_0x46c106(0x16d)});return _0xad01d3;}export function extractTextFromPngBase64(_0x26fa2f){const _0x52069f=a0_0x2ebb8c;let _0x1e4447=atob(_0x26fa2f[_0x52069f(0x139)](',')[0x1]),_0x4a8f66=_0x52069f(0x11e),_0x399fe6=_0x1e4447['indexOf'](_0x4a8f66);if(_0x399fe6!==-0x1)return _0x1e4447[_0x52069f(0x141)](_0x399fe6+_0x4a8f66[_0x52069f(0x17e)]);return null;}export function fileSize(_0x4e895d){const _0x12d58a=a0_0x2ebb8c,_0x55c1b2=Module[_0x12d58a(0x130)](_0x4e895d);return _0x55c1b2;}export async function resumeGame(){const _0x3fc925=a0_0x2ebb8c;Module[_0x3fc925(0x126)](),Module[_0x3fc925(0x181)](),notiMessage(_0x3fc925(0x170),0x7d0);}export async function pauseGame(){const _0x9f52d9=a0_0x2ebb8c;Module[_0x9f52d9(0x15c)](),Module[_0x9f52d9(0x181)](),notiMessage(_0x9f52d9(0x109),0x7d0);}export async function buttonPress(_0x3d677c){const _0xad0b2d=a0_0x2ebb8c;Module[_0xad0b2d(0x132)](_0x3d677c);}export async function buttonUnpress(_0x5e7508){Module['buttonUnpress'](_0x5e7508);}export async function screenShot(_0x91f92d){const _0x10704d=a0_0x2ebb8c,_0x3604c7=gameName[_0x10704d(0x11f)](/\.(gba|gbc|gb|zip)$/,'_'+_0x91f92d+_0x10704d(0x10c)),_0x4696ee=await getData(gameName,_0x91f92d,_0x10704d(0x15a))||'';console[_0x10704d(0x134)](_0x4696ee),await Module[_0x10704d(0x167)](_0x3604c7),await setData(gameName,_0x91f92d,'saveTime',formatDateTime(Date[_0x10704d(0x12a)]()),_0x4696ee);}export async function dowloadScreenShot(_0x58d8b0){const _0xa27819=a0_0x2ebb8c;try{const _0x191d38=await fileToBase64(Module[_0xa27819(0x151)](_0x58d8b0));return _0x191d38;}catch{}}export async function captureOCR(_0x4af199){const _0x4939ef=a0_0x2ebb8c;Module[_0x4939ef(0x167)](_0x4af199);const _0x17a214=Module[_0x4939ef(0x151)](_0x4939ef(0x10a)+_0x4af199);return _0x17a214;}export async function setFastForwardMultiplier(_0x55679e){const _0x1ab2cc=a0_0x2ebb8c;Module[_0x1ab2cc(0x12e)](_0x55679e);}export async function uploadCheats(_0x439afa){const _0x30b7c0=a0_0x2ebb8c;Module['autoLoadCheats'](),Module[_0x30b7c0(0x143)](_0x439afa,async()=>{const _0x45ff28=_0x30b7c0;await Module[_0x45ff28(0x17a)]();});}export function setVolume(_0x5a3396){Module['setVolume'](_0x5a3396);}export async function setData(_0x2d8752,_0x17eb59,_0x1438fd,_0x3bbc1f,_0x45f968=''){const _0x1c3deb=a0_0x2ebb8c,_0x48a6a3=_0x2d8752[_0x1c3deb(0x11f)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x549148=_0x1c3deb(0x10a)+_0x48a6a3+'_'+_0x17eb59+_0x1c3deb(0x10c);let _0x279853;try{_0x279853=await fileToBase64(Module['downloadFile'](_0x549148));}catch(_0x56afcf){await Module[_0x1c3deb(0x167)](_0x48a6a3+'_'+_0x17eb59+_0x1c3deb(0x10c)),await delay(0xc8),_0x279853=await fileToBase64(Module[_0x1c3deb(0x151)](_0x549148));}let _0x3f7029=atob(_0x279853[_0x1c3deb(0x139)](',')[0x1]),_0x494f3a='tEXtComment\x00',_0x3e0fcd=_0x3f7029[_0x1c3deb(0x13e)](_0x494f3a),_0x15c0ba={};if(_0x3e0fcd!==-0x1||_0x45f968[_0x1c3deb(0x174)]()!==''){let _0x2727ad=_0x3e0fcd!==-0x1?_0x3f7029[_0x1c3deb(0x141)](_0x3e0fcd+_0x494f3a[_0x1c3deb(0x17e)]):_0x45f968,_0x4aa419=/(\w+)\s*:\s*([^|]*)/g,_0x30c134;while((_0x30c134=_0x4aa419[_0x1c3deb(0x17f)](_0x2727ad))!==null){_0x15c0ba[_0x30c134[0x1][_0x1c3deb(0x174)]()]=_0x30c134[0x2]['trim']();}_0x3e0fcd!==-0x1&&(_0x3f7029=_0x3f7029['substring'](0x0,_0x3e0fcd));}_0x15c0ba[_0x1438fd]=_0x3bbc1f;let _0x5da59a=Object['entries'](_0x15c0ba)['map'](([_0xe2a876,_0x367646])=>_0xe2a876+_0x1c3deb(0x15e)+_0x367646)[_0x1c3deb(0x14f)](_0x1c3deb(0x10d)),_0x20ff14=new TextEncoder()[_0x1c3deb(0x156)](_0x494f3a+'\x20'+_0x5da59a),_0x59489d=new Uint8Array([..._0x3f7029][_0x1c3deb(0x13d)](_0x213161=>_0x213161['charCodeAt'](0x0))[_0x1c3deb(0x116)]([..._0x20ff14])),_0x5e8e76=new File([new Blob([_0x59489d],{'type':_0x1c3deb(0x16d)})],_0x48a6a3+'_'+_0x17eb59+_0x1c3deb(0x10c),{'type':'image/png'});Module[_0x1c3deb(0x143)](_0x5e8e76,()=>{});}export async function getData(_0x24198e,_0x591dc9,_0x2dcd32){const _0x1e56a1=a0_0x2ebb8c;try{const _0x850435=_0x24198e[_0x1e56a1(0x11f)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x43d183='/data/screenshots/'+_0x850435+'_'+_0x591dc9+_0x1e56a1(0x10c);let _0x21e460;try{_0x21e460=await fileToBase64(Module[_0x1e56a1(0x151)](_0x43d183));}catch(_0xf918b2){return null;}let _0x38925e=atob(_0x21e460['split'](',')[0x1]),_0x3aa85d=_0x1e56a1(0x11e),_0x9f2ac7=_0x38925e[_0x1e56a1(0x13e)](_0x3aa85d);if(_0x9f2ac7!==-0x1){let _0x3f0f9e=_0x38925e['substring'](_0x9f2ac7+_0x3aa85d[_0x1e56a1(0x17e)]);if(_0x2dcd32==='All')return _0x3f0f9e[_0x1e56a1(0x174)]();let _0x43c5f5=new RegExp(_0x2dcd32+'\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)'),_0x35bdec=_0x3f0f9e[_0x1e56a1(0x12c)](_0x43c5f5);if(_0x35bdec)return _0x35bdec[0x1][_0x1e56a1(0x174)]();}}catch(_0x148162){return console[_0x1e56a1(0x14e)]({'romName':_0x24198e,'slot':_0x591dc9,'type':_0x2dcd32}),null;}}export async function ledSave(_0x1f7a33){const _0x2373cc=a0_0x2ebb8c,_0x231b58=parseInt(await getData(gameName,'0','slotStateSaved')),_0x4839e4=_0x231b58===0x1?_0x2373cc(0x158):_0x231b58===0x2?_0x2373cc(0x11d):_0x231b58===0x3?'led03':_0x231b58===0x4?_0x2373cc(0x160):_0x231b58===0x5?'led05':_0x231b58===0x6?_0x2373cc(0x111):_0x231b58===0x7?_0x2373cc(0x14a):_0x2373cc(0x125);try{for(let _0x31e73f=0x0;_0x31e73f<=0x7;_0x31e73f++){document['getElementById'](_0x2373cc(0x136)+_0x31e73f)[_0x2373cc(0x128)][_0x2373cc(0x178)]='rgba(245,\x20232,\x20209,\x200.4)';}await delay(0x3e8);for(let _0x5a6689=0x0;_0x5a6689<=0x7;_0x5a6689++){document[_0x2373cc(0x16b)](_0x2373cc(0x136)+_0x5a6689)[_0x2373cc(0x128)]['fill']='rgba(245,\x20232,\x20209,\x200.4)';}document[_0x2373cc(0x16b)](_0x4839e4)[_0x2373cc(0x128)]['fill']=_0x1f7a33;}catch(_0x147a25){console[_0x2373cc(0x14e)](_0x2373cc(0x10f),_0x147a25);}}function a0_0x28a7(_0x3d698d,_0x28f374){const _0x313d9f=a0_0x313d();return a0_0x28a7=function(_0x28a711,_0x3027bb){_0x28a711=_0x28a711-0x109;let _0x555def=_0x313d9f[_0x28a711];return _0x555def;},a0_0x28a7(_0x3d698d,_0x28f374);};export async function notiMessage(_0x3ecc5d,_0x17dd46,_0x1f640e=![]){const _0x2336a3=a0_0x2ebb8c;var _0x444980=document[_0x2336a3(0x16b)](_0x2336a3(0x135));const _0x42e532=parseInt(await getData(gameName,'0','slotStateSaved'))||0x0;_0x444980[_0x2336a3(0x128)][_0x2336a3(0x13b)]===_0x2336a3(0x129)&&(clearTimeout(messageTimeout),_0x444980[_0x2336a3(0x128)][_0x2336a3(0x13b)]='0'),_0x444980[_0x2336a3(0x133)]=_0x3ecc5d,_0x444980['style'][_0x2336a3(0x13b)]=_0x2336a3(0x129),messageTimeout=setTimeout(()=>{const _0x2a1c03=_0x2336a3;_0x444980['textContent']='['+_0x42e532+']\x20'+gameName['substring'](0x0,gameName[_0x2a1c03(0x140)]('.')),_0x444980['style'][_0x2a1c03(0x13b)]=_0x2a1c03(0x129);},_0x17dd46),_0x1f640e&&(canvas[_0x2336a3(0x121)][_0x2336a3(0x166)](_0x2336a3(0x152)),setTimeout(()=>{const _0x27da69=_0x2336a3;canvas[_0x27da69(0x121)][_0x27da69(0x142)](_0x27da69(0x152));},0x258));}