const a0_0x5951a3=a0_0x58d5;(function(_0x1ba546,_0x3e0e5b){const _0x1b8dad=a0_0x58d5,_0x572860=_0x1ba546();while(!![]){try{const _0x164be8=parseInt(_0x1b8dad(0x183))/0x1*(parseInt(_0x1b8dad(0x153))/0x2)+parseInt(_0x1b8dad(0x15e))/0x3*(parseInt(_0x1b8dad(0x17b))/0x4)+-parseInt(_0x1b8dad(0x16f))/0x5+parseInt(_0x1b8dad(0x187))/0x6*(-parseInt(_0x1b8dad(0x19b))/0x7)+-parseInt(_0x1b8dad(0x17c))/0x8*(parseInt(_0x1b8dad(0x181))/0x9)+parseInt(_0x1b8dad(0x1b5))/0xa+parseInt(_0x1b8dad(0x174))/0xb;if(_0x164be8===_0x3e0e5b)break;else _0x572860['push'](_0x572860['shift']());}catch(_0x21f6bc){_0x572860['push'](_0x572860['shift']());}}}(a0_0xb087,0x95c0f));import a0_0x17ba2c from'../core/mgba.js';import*as a0_0x418896 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document[a0_0x5951a3(0x192)](a0_0x5951a3(0x17d))};function initializeCore(_0x50c96f,_0x55618e){_0x50c96f(_0x55618e)['then'](function(_0x4cc7cf){const _0x377444=a0_0x58d5;_0x4cc7cf[_0x377444(0x1a1)]();});}initializeCore(a0_0x17ba2c,Module);function a0_0xb087(){const _0x5874d8=['persisted','#20A5A6','pauseGame','replace','\x20time(s)','Cheat\x20Enabled!','filter','gameName','createObjectURL','SDL2','buttonPress','padStart','application/octet-stream','includes','pagehide','timer','classList','11025340YsLVsl','tEXtComment\x00','files','/data/states/','528kohGJg','log','beforeunload','appendChild','type','listScreenshots','Off','downloadFile','addEventListener','image/png','endsWith','2196DaYVOL','.png','listSaves','setVolume','createElement','body','listRoms','state','saveState','substring','_savedCheats','Cloud\x20upload\x20','/data/screenshots/','length','disable','.ss0','uploadRom','4112895SWYOsU','loadGame','listCheats','getItem','visibilityState','12678875NepDhU','fileSize','/data/games/','autoLoadCheats','Resumed!','uploadAll','.gbc','2432NgAxFU','8RbOFKy','canvas','deleteFile','split','editFileName','10606734ALdvwd','visible','3119OAiZIN','charCodeAt','encode','hidden','8010PmFiqY','visibilitychange','style','set','resumeGame','remove','Paused!','now','turboState','revokeObjectURL','#E0C068','getElementById','add','listStates','.gb','innerWidth','gbc','download','screenSize','textContent','4767VMYwAl','setItem','click','slotStateSaved','0,0,','contains','FSInit','FSSync','toString'];a0_0xb087=function(){return _0x5874d8;};return a0_0xb087();}let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x5951a3(0x192)](a0_0x5951a3(0x17d)),savedTurboState=localStorage['getItem'](a0_0x5951a3(0x18f)),controlSetting=document['getElementById']('control-setting');function handleVisibilityChange(_0x1f11cf){const _0x3cdf96=a0_0x5951a3;document[_0x3cdf96(0x173)]===_0x3cdf96(0x186)||_0x1f11cf?.[_0x3cdf96(0x157)]===_0x3cdf96(0x155)||_0x1f11cf?.[_0x3cdf96(0x1a4)]?(pauseGame(),canvas[_0x3cdf96(0x1b4)][_0x3cdf96(0x193)]('visible')):(setTimeout(()=>{const _0x406053=_0x3cdf96;canvas['classList'][_0x406053(0x18c)](_0x406053(0x182));},0x258),controlSetting[_0x3cdf96(0x1b4)][_0x3cdf96(0x1a0)](_0x3cdf96(0x182))&&resumeGame());}async function statusShow(){const _0x37d401=a0_0x5951a3;document[_0x37d401(0x15b)](_0x37d401(0x1b2),handleVisibilityChange),document[_0x37d401(0x15b)](_0x37d401(0x188),handleVisibilityChange),window[_0x37d401(0x15b)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x418896['turboF'](turboState)),await delay(0xc8),await Module[_0x37d401(0x1ad)](),await delay(0x320),await led(parseInt(localStorage[_0x37d401(0x172)](_0x37d401(0x19e)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x4cd14a=a0_0x5951a3;await ledSave(_0x4cd14a(0x1a5)),await Module[_0x4cd14a(0x166)](0x0),await Module[_0x4cd14a(0x1a2)](),await screenShot(0x0),console['log']('Auto\x20save\x20'+ ++countAutoSave+_0x4cd14a(0x1a8));}async function saveStateInCloud(){const _0x324719=a0_0x5951a3,_0x3261f4=localStorage['getItem'](_0x324719(0x1ab)),_0x44e13a=_0x3261f4[_0x324719(0x1a7)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x59dbc4=localStorage[_0x324719(0x172)]('uId');navigator['onLine']&&(_0x59dbc4&&(await ledSave(_0x324719(0x191)),await delay(0x3e8),await dpUploadFile(_0x44e13a,Module['downloadFile'](_0x324719(0x152)+_0x44e13a),_0x324719(0x165)),await lockNoti('',_0x324719(0x169)+ ++countUpload+_0x324719(0x1a8),0x7d0)));}function startTimer(){let [_0x1ea5ba,_0x26a2e4,_0x2462cc,_0x14bfdf,_0x42592b]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x50aebb=a0_0x58d5;_0x2462cc++,_0x14bfdf++,_0x42592b++;if(_0x2462cc===0x3c)[_0x2462cc,_0x26a2e4]=[0x0,_0x26a2e4+0x1];if(_0x26a2e4===0x3c)[_0x26a2e4,_0x1ea5ba]=[0x0,_0x1ea5ba+0x1];document[_0x50aebb(0x192)](_0x50aebb(0x1b3))['textContent']=_0x1ea5ba+'h'+_0x26a2e4['toString']()[_0x50aebb(0x1af)](0x2,'0')+'.'+_0x2462cc[_0x50aebb(0x1a3)]()[_0x50aebb(0x1af)](0x2,'0');_0x14bfdf===0x3c&&(saveStatePeriodically(),_0x14bfdf=0x0);;_0x42592b===0x708&&(saveStateInCloud(),_0x42592b=0x0);;},0x3e8);}export async function uploadGame(_0x212711){const _0x2932b5=a0_0x5951a3,_0x57cbf5=_0x212711[_0x2932b5(0x151)][0x0];Module[_0x2932b5(0x16e)](_0x57cbf5,()=>{Module['FSSync']();});}export async function loadGame(_0x193a25){const _0x455d38=a0_0x5951a3,_0x490654=_0x193a25['replace'](/\.(gba|gbc|gb|zip)$/,_0x455d38(0x16d)),_0x75cdcd=Module['listStates']()[_0x455d38(0x1aa)](_0x499145=>_0x499145!=='.'&&_0x499145!=='..');intro['classList']['add'](_0x455d38(0x16c)),errorLogElements[0x0][_0x455d38(0x189)]['bottom']='0',ingame[_0x455d38(0x1b4)][_0x455d38(0x18c)]('disable'),_0x193a25['endsWith'](_0x455d38(0x17a))||_0x193a25[_0x455d38(0x15d)](_0x455d38(0x195))?(canvas[_0x455d38(0x1b4)][_0x455d38(0x193)](_0x455d38(0x197)),areaTrans[_0x455d38(0x1b4)][_0x455d38(0x193)]('gbc1'),localStorage['setItem'](_0x455d38(0x199),_0x455d38(0x19f)+(window['innerWidth']-0xe6)+','+(window[_0x455d38(0x196)]-0xe6)*0x9/0xa)):localStorage[_0x455d38(0x19c)]('screenSize',_0x455d38(0x19f)+(window['innerWidth']-0x96)+','+(window[_0x455d38(0x196)]-0x96)*0x2/0x3),_0x75cdcd[_0x455d38(0x1b1)](_0x490654)?(await Module['loadGame'](_0x455d38(0x176)+_0x193a25),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module['loadState'](0x0),localStorage['setItem'](_0x455d38(0x1ab),_0x193a25),console['log'](_0x193a25))):(await Module[_0x455d38(0x170)](_0x455d38(0x176)+_0x193a25),localStorage[_0x455d38(0x19c)](_0x455d38(0x1ab),_0x193a25),console[_0x455d38(0x154)](_0x193a25)),await statusShow();}export async function saveState(_0x157533){const _0x74d7fd=a0_0x5951a3;await Module[_0x74d7fd(0x166)](_0x157533),await Module[_0x74d7fd(0x1a2)]();}export async function loadState(_0x31be7f){await Module['loadState'](_0x31be7f);}export async function downloadFile(_0x2ed8ed,_0x848875){const _0x122592=a0_0x5951a3,_0x275e9b=Module['downloadFile'](_0x2ed8ed),_0xc6b2e8=document[_0x122592(0x162)]('a');document[_0x122592(0x163)][_0x122592(0x156)](_0xc6b2e8),_0xc6b2e8[_0x122592(0x198)]=_0x848875;const _0x5c2e76=new Blob([_0x275e9b],{'type':_0x122592(0x1b0)});_0xc6b2e8['href']=URL[_0x122592(0x1ac)](_0x5c2e76),_0xc6b2e8[_0x122592(0x19d)](),URL[_0x122592(0x190)](_0x5c2e76),_0xc6b2e8[_0x122592(0x18c)]();}export function downloadFileInCloud(_0x1a6b00){const _0x3db8e6=a0_0x5951a3,_0xf3dd9a=Module[_0x3db8e6(0x15a)](_0x1a6b00);return _0xf3dd9a;}export async function uploadFileInCloud(_0x1928aa){Module['uploadAll'](_0x1928aa,()=>{const _0x26f167=a0_0x58d5;localStorageFile(),Module[_0x26f167(0x1a2)]();});}export async function uploadFile(_0x4574d8){const _0x4a7cea=a0_0x5951a3,_0x27cfba=_0x4574d8[_0x4a7cea(0x151)][0x0];Module['uploadAll'](_0x27cfba,()=>{const _0x33f901=_0x4a7cea;localStorageFile(),Module[_0x33f901(0x1a2)]();});}export async function editFile(_0x537075,_0x44b08f,_0x4eef53){const _0x4cc4eb=a0_0x5951a3;await Module[_0x4cc4eb(0x180)](_0x537075,_0x44b08f,_0x4eef53),await Module[_0x4cc4eb(0x1a2)]();}export async function deleteFile(_0x14318f){const _0x395a38=a0_0x5951a3;await Module[_0x395a38(0x17e)](_0x14318f),await Module[_0x395a38(0x1a2)]();}export function listGame(){const _0x52dd9d=a0_0x5951a3,_0x57ffa1=Module[_0x52dd9d(0x164)]()[_0x52dd9d(0x1aa)](_0x249315=>_0x249315!=='.'&&_0x249315!=='..');return _0x57ffa1;}export function listSave(){const _0x540281=a0_0x5951a3,_0x5caec6=Module[_0x540281(0x160)]()[_0x540281(0x1aa)](_0x4606b7=>_0x4606b7!=='.'&&_0x4606b7!=='..');return _0x5caec6;}export function listState(){const _0x34284b=a0_0x5951a3,_0x424deb=Module[_0x34284b(0x194)]()['filter'](_0x57349e=>_0x57349e!=='.'&&_0x57349e!=='..');return _0x424deb;}export function listCheat(){const _0x3e0e09=a0_0x5951a3,_0x1b8004=Module[_0x3e0e09(0x171)]()[_0x3e0e09(0x1aa)](_0x2f644e=>_0x2f644e!=='.'&&_0x2f644e!=='..');return _0x1b8004;}export function listScreenshot(){const _0x18b15a=a0_0x5951a3,_0x830cda=Module[_0x18b15a(0x158)]()[_0x18b15a(0x1aa)](_0x21a3fd=>_0x21a3fd!=='.'&&_0x21a3fd!=='..');return _0x830cda;}export function embedTextInPngFile(_0x352c2b,_0x5dd5a2,_0x25d264){const _0x680e2c=a0_0x5951a3;let _0x69a926=atob(_0x352c2b[_0x680e2c(0x17f)](',')[0x1]),_0x321052=new Uint8Array(_0x69a926[_0x680e2c(0x16b)]);for(let _0x4d7e95=0x0;_0x4d7e95<_0x69a926[_0x680e2c(0x16b)];_0x4d7e95++){_0x321052[_0x4d7e95]=_0x69a926[_0x680e2c(0x184)](_0x4d7e95);}let _0x1cee18=new TextEncoder()[_0x680e2c(0x185)](_0x680e2c(0x1b6)+_0x5dd5a2),_0x502e08=new Uint8Array(_0x321052['length']+_0x1cee18[_0x680e2c(0x16b)]);_0x502e08[_0x680e2c(0x18a)](_0x321052,0x0),_0x502e08[_0x680e2c(0x18a)](_0x1cee18,_0x321052[_0x680e2c(0x16b)]);let _0xccb66c=new Blob([_0x502e08],{'type':'image/png'}),_0x59b4f4=new File([_0xccb66c],_0x25d264,{'type':_0x680e2c(0x15c)});return _0x59b4f4;}export function extractTextFromPngBase64(_0x4c52d3){const _0x4eb6b2=a0_0x5951a3;let _0x2181cc=atob(_0x4c52d3[_0x4eb6b2(0x17f)](',')[0x1]),_0x1974d3=_0x4eb6b2(0x1b6),_0x566252=_0x2181cc['indexOf'](_0x1974d3);if(_0x566252!==-0x1)return _0x2181cc[_0x4eb6b2(0x167)](_0x566252+_0x1974d3[_0x4eb6b2(0x16b)]);return null;}function a0_0x58d5(_0x2d993d,_0x29f2fe){const _0xb087ae=a0_0xb087();return a0_0x58d5=function(_0x58d5de,_0x402ff4){_0x58d5de=_0x58d5de-0x151;let _0x10efd0=_0xb087ae[_0x58d5de];return _0x10efd0;},a0_0x58d5(_0x2d993d,_0x29f2fe);}export function fileSize(_0x388912){const _0x2b161b=a0_0x5951a3,_0x31deb5=Module[_0x2b161b(0x175)](_0x388912);return _0x31deb5;}export async function resumeGame(){const _0x458f3f=a0_0x5951a3;Module[_0x458f3f(0x18b)](),Module[_0x458f3f(0x1ad)](),notiMessage(_0x458f3f(0x178),0x7d0);}export async function pauseGame(){const _0x7e1b0e=a0_0x5951a3;Module[_0x7e1b0e(0x1a6)](),Module[_0x7e1b0e(0x1ad)](),notiMessage(_0x7e1b0e(0x18d),0x7d0);}export async function buttonPress(_0x9c7e62){const _0x8be651=a0_0x5951a3;Module[_0x8be651(0x1ae)](_0x9c7e62);}export async function buttonUnpress(_0x393225){Module['buttonUnpress'](_0x393225);}export async function screenShot(_0x370326){const _0x5afff7=a0_0x5951a3,_0x118591=localStorage[_0x5afff7(0x172)](_0x5afff7(0x1ab))[_0x5afff7(0x1a7)](/\.(gba|gbc|gb|zip)$/,''),_0x4401eb=_0x118591+'_'+_0x370326+_0x5afff7(0x15f);await Module['screenshot'](_0x4401eb),await Module[_0x5afff7(0x1a2)]();const _0x404c06=await fileToBase64(Module[_0x5afff7(0x15a)]('/data/screenshots/'+_0x4401eb)),_0x43fcdf=embedTextInPngFile(_0x404c06,formatDateTime(Date[_0x5afff7(0x18e)]()),_0x4401eb);Module[_0x5afff7(0x179)](_0x43fcdf,()=>{const _0x4cedc7=_0x5afff7;localStorageFile(),Module[_0x4cedc7(0x1a2)]();});}export async function dowloadScreenShot(_0x5b455d){const _0x49ff1d=a0_0x5951a3;try{const _0x126012=await fileToBase64(Module[_0x49ff1d(0x15a)](_0x5b455d));return _0x126012;}catch{}}export async function captureOCR(_0x2bd91a){const _0x441f9e=a0_0x5951a3;Module['screenshot'](_0x2bd91a);const _0x518e3e=Module[_0x441f9e(0x15a)](_0x441f9e(0x16a)+_0x2bd91a);return _0x518e3e;}export async function setFastForwardMultiplier(_0x11fd5e){Module['setFastForwardMultiplier'](_0x11fd5e);}export function uploadCheats(_0x389d45,_0x55d343,_0xccc3e9,_0x220a6c,_0x8de05){const _0x43be6b=a0_0x5951a3;Module[_0x43be6b(0x179)](_0x389d45,()=>{const _0x4224de=_0x43be6b;Module[_0x4224de(0x177)](),setTimeout(()=>{const _0x310734=_0x4224de;Module[_0x310734(0x1a2)]();},0x1f4),_0x220a6c&&(localStorage[_0x4224de(0x19c)](_0x55d343+_0x4224de(0x168),_0xccc3e9),notiMessage(_0x4224de(0x1a9),0x5dc)),_0x8de05[_0x4224de(0x19a)]=localStorage[_0x4224de(0x172)](_0x55d343+_0x4224de(0x168)||_0x4224de(0x159));});}export function setVolume(_0x1dac3d){const _0x419521=a0_0x5951a3;Module[_0x419521(0x161)](_0x1dac3d);}