const a0_0xcb5073=a0_0x2c2e;function a0_0x2c2e(_0x1d49ea,_0x302265){const _0x2bf7d7=a0_0x2bf7();return a0_0x2c2e=function(_0x2c2e73,_0x2c8fb0){_0x2c2e73=_0x2c2e73-0x19a;let _0x687d81=_0x2bf7d7[_0x2c2e73];return _0x687d81;},a0_0x2c2e(_0x1d49ea,_0x302265);}(function(_0x169a73,_0x281c98){const _0x1b2da7=a0_0x2c2e,_0x238331=_0x169a73();while(!![]){try{const _0x402973=-parseInt(_0x1b2da7(0x1f0))/0x1*(parseInt(_0x1b2da7(0x1cf))/0x2)+-parseInt(_0x1b2da7(0x1e1))/0x3*(-parseInt(_0x1b2da7(0x1b2))/0x4)+-parseInt(_0x1b2da7(0x1c3))/0x5*(parseInt(_0x1b2da7(0x19a))/0x6)+parseInt(_0x1b2da7(0x1c1))/0x7*(-parseInt(_0x1b2da7(0x1bc))/0x8)+-parseInt(_0x1b2da7(0x1aa))/0x9*(parseInt(_0x1b2da7(0x1ae))/0xa)+-parseInt(_0x1b2da7(0x1fe))/0xb*(-parseInt(_0x1b2da7(0x19d))/0xc)+parseInt(_0x1b2da7(0x1a8))/0xd*(parseInt(_0x1b2da7(0x1df))/0xe);if(_0x402973===_0x281c98)break;else _0x238331['push'](_0x238331['shift']());}catch(_0xc8c1e0){_0x238331['push'](_0x238331['shift']());}}}(a0_0x2bf7,0x45f1d));import a0_0x32c40e from'../core/mgba.js';import*as a0_0x3de0e6 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0xcb5073(0x1ff)](a0_0xcb5073(0x1b1))};function initializeCore(_0xa70245,_0x46b32b){const _0x5bf56e=a0_0xcb5073;_0xa70245(_0x46b32b)[_0x5bf56e(0x1f9)](function(_0x4bc583){const _0x2b3dcb=_0x5bf56e;_0x4bc583[_0x2b3dcb(0x1eb)]();});}initializeCore(a0_0x32c40e,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0xcb5073(0x1ff)](a0_0xcb5073(0x1b1)),savedTurboState=localStorage['getItem'](a0_0xcb5073(0x1e4)),controlSetting=document[a0_0xcb5073(0x1ff)]('control-setting');function handleVisibilityChange(_0x2aab9f){const _0x4da608=a0_0xcb5073;document[_0x4da608(0x1e6)]===_0x4da608(0x1ba)||_0x2aab9f?.[_0x4da608(0x1c9)]===_0x4da608(0x1f2)||_0x2aab9f?.[_0x4da608(0x1d8)]?(pauseGame(),canvas[_0x4da608(0x1b8)]['add'](_0x4da608(0x1cb))):(setTimeout(()=>{const _0x2c7f79=_0x4da608;canvas[_0x2c7f79(0x1b8)][_0x2c7f79(0x1a0)](_0x2c7f79(0x1cb));},0x258),controlSetting[_0x4da608(0x1b8)][_0x4da608(0x1e9)](_0x4da608(0x1cb))&&resumeGame());}async function statusShow(){const _0x17d241=a0_0xcb5073;document[_0x17d241(0x1c0)](_0x17d241(0x1a6),handleVisibilityChange),document[_0x17d241(0x1c0)](_0x17d241(0x1c2),handleVisibilityChange),window[_0x17d241(0x1c0)](_0x17d241(0x1f2),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x3de0e6[_0x17d241(0x1ca)](turboState)),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(localStorage['getItem']('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x377723=a0_0xcb5073;await ledSave(_0x377723(0x19e)),await Module[_0x377723(0x1fc)](0x0),await Module[_0x377723(0x1da)](),await screenShot(0x0),console[_0x377723(0x1b3)]('Auto\x20save\x20'+ ++countAutoSave+_0x377723(0x1af));}async function saveStateInCloud(){const _0x327a0e=a0_0xcb5073,_0x6be7b9=localStorage['getItem'](_0x327a0e(0x1d0)),_0x221e12=_0x6be7b9[_0x327a0e(0x1dc)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x32755f=localStorage['getItem'](_0x327a0e(0x1cd)),_0x4b6a91=localStorage[_0x327a0e(0x1c7)](_0x6be7b9+_0x327a0e(0x1d9)),_0x16242b=localStorage['getItem'](_0x6be7b9+_0x327a0e(0x1fd));if(navigator['onLine']){if(_0x32755f){await ledSave(_0x327a0e(0x1e7)),await delay(0x3e8),await dpUploadFile(_0x221e12,Module['downloadFile'](_0x327a0e(0x1b0)+_0x221e12));if(_0x4b6a91!==null){const _0x784024=_0x4b6a91+'\x0a\x0a'+_0x16242b,_0x8b18f=new Blob([_0x784024],{'type':_0x327a0e(0x1f5)});await dpUploadFile(_0x6be7b9+'_slot0.txt',_0x8b18f);}else console[_0x327a0e(0x1b3)]('No\x20screenshot!');await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x327a0e(0x1af),0x7d0);}else console['log'](_0x327a0e(0x1fa));}else console[_0x327a0e(0x1b3)](_0x327a0e(0x1ee));}function startTimer(){let [_0x258aca,_0x90da7d,_0x3d1a23,_0x180bee,_0x34003f]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x56a63e=a0_0x2c2e;_0x3d1a23++,_0x180bee++,_0x34003f++;if(_0x3d1a23===0x3c)[_0x3d1a23,_0x90da7d]=[0x0,_0x90da7d+0x1];if(_0x90da7d===0x3c)[_0x90da7d,_0x258aca]=[0x0,_0x258aca+0x1];document[_0x56a63e(0x1ff)]('timer')[_0x56a63e(0x1b7)]=_0x258aca+'h'+_0x90da7d[_0x56a63e(0x200)]()[_0x56a63e(0x1c8)](0x2,'0')+'.'+_0x3d1a23[_0x56a63e(0x200)]()[_0x56a63e(0x1c8)](0x2,'0');_0x180bee===0x3c&&(saveStatePeriodically(),_0x180bee=0x0);;_0x34003f===0xe10&&(saveStateInCloud(),_0x34003f=0x0);;},0x3e8);}export async function uploadGame(_0x46b645){const _0x565630=a0_0xcb5073,_0x53ac15=_0x46b645[_0x565630(0x1db)][0x0];Module[_0x565630(0x1ac)](_0x53ac15,()=>{const _0x537127=_0x565630;Module[_0x537127(0x1da)]();});}export async function loadGame(_0x4e4730){const _0x3c6ef8=a0_0xcb5073,_0x196a6d=_0x4e4730[_0x3c6ef8(0x1dc)](/\.(gba|gbc|gb|zip)$/,_0x3c6ef8(0x1b9)),_0x40da5e=Module[_0x3c6ef8(0x202)]()[_0x3c6ef8(0x1a7)](_0x4b1ed3=>_0x4b1ed3!=='.'&&_0x4b1ed3!=='..');intro[_0x3c6ef8(0x1b8)][_0x3c6ef8(0x1ec)]('disable'),errorLogElements[0x0][_0x3c6ef8(0x1f7)]['bottom']='0',ingame['classList'][_0x3c6ef8(0x1a0)]('disable'),_0x4e4730['endsWith'](_0x3c6ef8(0x1a1))||_0x4e4730[_0x3c6ef8(0x1e0)]('.gb')?(canvas[_0x3c6ef8(0x1b8)][_0x3c6ef8(0x1ec)](_0x3c6ef8(0x1c6)),areaTrans[_0x3c6ef8(0x1b8)][_0x3c6ef8(0x1ec)](_0x3c6ef8(0x1a9)),localStorage[_0x3c6ef8(0x1d5)](_0x3c6ef8(0x1cc),_0x3c6ef8(0x1f1)+(window[_0x3c6ef8(0x1c5)]-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage['setItem'](_0x3c6ef8(0x1cc),_0x3c6ef8(0x1f1)+(window[_0x3c6ef8(0x1c5)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x40da5e[_0x3c6ef8(0x1e3)](_0x196a6d)?(await Module[_0x3c6ef8(0x1f3)](_0x3c6ef8(0x1a2)+_0x4e4730),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module[_0x3c6ef8(0x1ad)](0x0),localStorage[_0x3c6ef8(0x1d5)](_0x3c6ef8(0x1d0),_0x4e4730),console[_0x3c6ef8(0x1b3)](_0x4e4730))):(await Module['loadGame']('/data/games/'+_0x4e4730),localStorage[_0x3c6ef8(0x1d5)](_0x3c6ef8(0x1d0),_0x4e4730),console[_0x3c6ef8(0x1b3)](_0x4e4730)),await statusShow();}export async function saveState(_0x11166a){const _0x49028f=a0_0xcb5073;await Module[_0x49028f(0x1fc)](_0x11166a),await Module[_0x49028f(0x1da)]();}export async function loadState(_0x2347c3){await Module['loadState'](_0x2347c3);}export async function downloadFile(_0x35b644,_0x2740c9){const _0x555faf=a0_0xcb5073,_0x36780a=Module['downloadFile'](_0x35b644),_0x1796be=document['createElement']('a');document[_0x555faf(0x1d1)][_0x555faf(0x19f)](_0x1796be),_0x1796be[_0x555faf(0x1e8)]=_0x2740c9;const _0x821121=new Blob([_0x36780a],{'type':_0x555faf(0x1ab)});_0x1796be[_0x555faf(0x1dd)]=URL[_0x555faf(0x1e2)](_0x821121),_0x1796be['click'](),URL[_0x555faf(0x1bd)](_0x821121),_0x1796be[_0x555faf(0x1a0)]();}export function downloadFileInCloud(_0x1a88e1){const _0x52885d=a0_0xcb5073,_0x42f2a2=Module[_0x52885d(0x1ea)](_0x1a88e1);return _0x42f2a2;}export async function uploadFileInCloud(_0x3f5eec){const _0x5015b9=a0_0xcb5073;Module[_0x5015b9(0x1c4)](_0x3f5eec,()=>{const _0x1db46a=_0x5015b9;localStorageFile(),Module[_0x1db46a(0x1da)]();});}export async function uploadFile(_0x463288){const _0x130304=a0_0xcb5073,_0x33b5a1=_0x463288[_0x130304(0x1db)][0x0];Module[_0x130304(0x1c4)](_0x33b5a1,()=>{const _0x565eb2=_0x130304;localStorageFile(),Module[_0x565eb2(0x1da)]();});}export async function editFile(_0x2991c6,_0x5a6456,_0x533f9a){const _0x423097=a0_0xcb5073;await Module[_0x423097(0x1d6)](_0x2991c6,_0x5a6456,_0x533f9a),await Module[_0x423097(0x1da)]();}export async function deleteFile(_0x4cf6d4){const _0x248df1=a0_0xcb5073;await Module['deleteFile'](_0x4cf6d4),await Module[_0x248df1(0x1da)]();}export function listGame(){const _0xe261e4=a0_0xcb5073,_0x100f57=Module[_0xe261e4(0x1be)]()[_0xe261e4(0x1a7)](_0x13a683=>_0x13a683!=='.'&&_0x13a683!=='..');return _0x100f57;}export function listSave(){const _0x130376=Module['listSaves']()['filter'](_0x3d24d5=>_0x3d24d5!=='.'&&_0x3d24d5!=='..');return _0x130376;}export function listState(){const _0x2c01d7=a0_0xcb5073,_0x337f12=Module[_0x2c01d7(0x202)]()[_0x2c01d7(0x1a7)](_0xabf816=>_0xabf816!=='.'&&_0xabf816!=='..');return _0x337f12;}export function listCheat(){const _0x24ab33=a0_0xcb5073,_0x766eb0=Module[_0x24ab33(0x1b6)]()['filter'](_0x267114=>_0x267114!=='.'&&_0x267114!=='..');return _0x766eb0;}export function listScreenshot(){const _0x5aa9ef=a0_0xcb5073,_0x11b2a3=Module[_0x5aa9ef(0x1f6)]()['filter'](_0x5e1b6c=>_0x5e1b6c!=='.'&&_0x5e1b6c!=='..');return _0x11b2a3;}export function embedTextInPngFile(_0x4a9680,_0xc67531,_0x51b901){const _0x4ba8a2=a0_0xcb5073;let _0x535a30=atob(_0x4a9680[_0x4ba8a2(0x1d4)](',')[0x1]),_0x377304=new Uint8Array(_0x535a30[_0x4ba8a2(0x19b)]);for(let _0x5d61f3=0x0;_0x5d61f3<_0x535a30[_0x4ba8a2(0x19b)];_0x5d61f3++){_0x377304[_0x5d61f3]=_0x535a30[_0x4ba8a2(0x1a3)](_0x5d61f3);}let _0x74be0e=new TextEncoder()[_0x4ba8a2(0x1bb)](_0x4ba8a2(0x1ce)+_0xc67531),_0x3e36e0=new Uint8Array(_0x377304[_0x4ba8a2(0x19b)]+_0x74be0e[_0x4ba8a2(0x19b)]);_0x3e36e0[_0x4ba8a2(0x1bf)](_0x377304,0x0),_0x3e36e0[_0x4ba8a2(0x1bf)](_0x74be0e,_0x377304[_0x4ba8a2(0x19b)]);let _0x3a6402=new Blob([_0x3e36e0],{'type':_0x4ba8a2(0x1ed)}),_0x54b7c4=new File([_0x3a6402],_0x51b901,{'type':_0x4ba8a2(0x1ed)});return _0x54b7c4;}export function extractTextFromPngBase64(_0x2da02f){const _0x21104a=a0_0xcb5073;let _0x4f70a1=atob(_0x2da02f[_0x21104a(0x1d4)](',')[0x1]),_0x4f13c9=_0x21104a(0x1ce),_0x48f180=_0x4f70a1['indexOf'](_0x4f13c9);if(_0x48f180!==-0x1)return _0x4f70a1[_0x21104a(0x1b5)](_0x48f180+_0x4f13c9[_0x21104a(0x19b)]);return null;}export function fileSize(_0x45de87){const _0x51c914=a0_0xcb5073,_0x220c4d=Module[_0x51c914(0x1f8)](_0x45de87);return _0x220c4d;}export async function resumeGame(){const _0x56ff89=a0_0xcb5073;Module['resumeGame'](),Module[_0x56ff89(0x1de)](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x1494f7=a0_0xcb5073;Module[_0x1494f7(0x1f4)](),Module[_0x1494f7(0x1de)](),notiMessage(_0x1494f7(0x1e5),0x7d0);}export async function buttonPress(_0x43bf4f){const _0x15d3b4=a0_0xcb5073;Module[_0x15d3b4(0x19c)](_0x43bf4f);}export async function buttonUnpress(_0x339de8){const _0x47fe76=a0_0xcb5073;Module[_0x47fe76(0x1ef)](_0x339de8);}export async function screenShot(_0x1cf186){const _0x3ce7ec=a0_0xcb5073,_0x7efcaa=localStorage[_0x3ce7ec(0x1c7)](_0x3ce7ec(0x1d0))[_0x3ce7ec(0x1dc)](/\.(gba|gbc|gb|zip)$/,''),_0x19830a=_0x7efcaa+'_'+_0x1cf186+_0x3ce7ec(0x1d7);await Module[_0x3ce7ec(0x1a5)](_0x19830a),await Module[_0x3ce7ec(0x1da)]();const _0x1889f7=await fileToBase64(Module[_0x3ce7ec(0x1ea)](_0x3ce7ec(0x1a4)+_0x19830a)),_0x5f2fcb=embedTextInPngFile(_0x1889f7,formatDateTime(Date[_0x3ce7ec(0x1b4)]()),_0x19830a);Module[_0x3ce7ec(0x1c4)](_0x5f2fcb,()=>{localStorageFile(),Module['FSSync']();});}export async function dowloadScreenShot(_0x2dea87){const _0x241d17=a0_0xcb5073;try{const _0x27a4aa=await fileToBase64(Module[_0x241d17(0x1ea)](_0x2dea87));return _0x27a4aa;}catch{}}export async function captureOCR(_0x585369){const _0x4e0e18=a0_0xcb5073;Module[_0x4e0e18(0x1a5)](_0x585369);const _0xd959fe=Module[_0x4e0e18(0x1ea)](_0x4e0e18(0x1a4)+_0x585369);return _0xd959fe;}export async function setFastForwardMultiplier(_0x7607a2){Module['setFastForwardMultiplier'](_0x7607a2);}export function uploadCheats(_0x2ce91b,_0x4e411f,_0x75bb1f,_0x5ce436,_0x346ee9){const _0x1851ac=a0_0xcb5073;Module[_0x1851ac(0x1c4)](_0x2ce91b,()=>{const _0x24c258=_0x1851ac;Module[_0x24c258(0x1d2)](),setTimeout(()=>{const _0x2cd0e4=_0x24c258;Module[_0x2cd0e4(0x1da)]();},0x1f4),_0x5ce436&&(localStorage[_0x24c258(0x1d5)](_0x4e411f+'_savedCheats',_0x75bb1f),notiMessage(_0x24c258(0x201),0x5dc)),_0x346ee9[_0x24c258(0x1b7)]=localStorage[_0x24c258(0x1c7)](_0x4e411f+'_savedCheats'||_0x24c258(0x1d3));});}export function setVolume(_0x4de8a5){const _0x223b9f=a0_0xcb5073;Module[_0x223b9f(0x1fb)](_0x4de8a5);}function a0_0x2bf7(){const _0x570470=['files','replace','href','SDL2','14JEgOSz','endsWith','63rcZDDK','createObjectURL','includes','turboState','Paused!','visibilityState','#E0C068','download','contains','downloadFile','FSInit','add','image/png','Online!','buttonUnpress','1CkrPqe','0,0,','beforeunload','loadGame','pauseGame','text/plain','listScreenshots','style','fileSize','then','Unable\x20to\x20upload\x20to\x20Cloud!','setVolume','saveState','_dateState0','7491Cdifmc','getElementById','toString','Cheat\x20Enabled!','listStates','13254dSWEES','length','buttonPress','2940gBIBqK','#20A5A6','appendChild','remove','.gbc','/data/games/','charCodeAt','/data/screenshots/','screenshot','pagehide','filter','21250879CBkLUp','gbc1','2475EmTqKe','application/octet-stream','uploadRom','loadState','4630shtoUw','\x20time(s)','/data/states/','canvas','12992XArtkF','log','now','substring','listCheats','textContent','classList','.ss0','hidden','encode','22488drlGHM','revokeObjectURL','listRoms','set','addEventListener','1281apTarY','visibilitychange','935PwLFJs','uploadAll','innerWidth','gbc','getItem','padStart','type','turboF','visible','screenSize','uId','tEXtComment\x00','1056844NafnfZ','gameName','body','autoLoadCheats','Off','split','setItem','editFileName','.png','persisted','_imageState0','FSSync'];a0_0x2bf7=function(){return _0x570470;};return a0_0x2bf7();}