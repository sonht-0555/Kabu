const a0_0x5add36=a0_0x2def;function a0_0x2def(_0x215e54,_0x5afa4f){const _0x146c65=a0_0x146c();return a0_0x2def=function(_0x2defa6,_0x62b9ec){_0x2defa6=_0x2defa6-0x69;let _0x33463f=_0x146c65[_0x2defa6];return _0x33463f;},a0_0x2def(_0x215e54,_0x5afa4f);}(function(_0x32085e,_0x3986f4){const _0x5b660d=a0_0x2def,_0x1de07a=_0x32085e();while(!![]){try{const _0x1f0c4b=parseInt(_0x5b660d(0xaf))/0x1*(parseInt(_0x5b660d(0x8f))/0x2)+-parseInt(_0x5b660d(0x75))/0x3+-parseInt(_0x5b660d(0xb9))/0x4+parseInt(_0x5b660d(0xa3))/0x5*(parseInt(_0x5b660d(0xbc))/0x6)+parseInt(_0x5b660d(0xb2))/0x7+parseInt(_0x5b660d(0x7d))/0x8*(parseInt(_0x5b660d(0x84))/0x9)+parseInt(_0x5b660d(0xbe))/0xa*(-parseInt(_0x5b660d(0x91))/0xb);if(_0x1f0c4b===_0x3986f4)break;else _0x1de07a['push'](_0x1de07a['shift']());}catch(_0x5ad635){_0x1de07a['push'](_0x1de07a['shift']());}}}(a0_0x146c,0x8efc9));import a0_0x4b486c from'../core/mgba.js';import*as a0_0x5305f5 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x5add36(0x72)](a0_0x5add36(0xad))};function initializeCore(_0x5ca022,_0x4a70ba){_0x5ca022(_0x4a70ba)['then'](function(_0xfb486){_0xfb486['FSInit']();});}initializeCore(a0_0x4b486c,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x5add36(0xad)),savedTurboState=localStorage[a0_0x5add36(0xa6)](a0_0x5add36(0xc7)),controlSetting=document['getElementById'](a0_0x5add36(0xcb));function handleVisibilityChange(_0x26aaf4){const _0x51e801=a0_0x5add36;document[_0x51e801(0xab)]==='hidden'||_0x26aaf4?.[_0x51e801(0xc0)]===_0x51e801(0xa7)||_0x26aaf4?.[_0x51e801(0x9b)]?(pauseGame(),canvas[_0x51e801(0x74)]['add'](_0x51e801(0x92))):(setTimeout(()=>{const _0x5cdd08=_0x51e801;canvas['classList'][_0x5cdd08(0xb7)](_0x5cdd08(0x92));},0x258),controlSetting[_0x51e801(0x74)][_0x51e801(0x76)](_0x51e801(0x92))&&resumeGame());}async function statusShow(){const _0x161045=a0_0x5add36;document[_0x161045(0x9e)](_0x161045(0x6c),handleVisibilityChange),document[_0x161045(0x9e)](_0x161045(0x97),handleVisibilityChange),window['addEventListener'](_0x161045(0xa7),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x5305f5[_0x161045(0x8a)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x161045(0xa6)](_0x161045(0x98)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x2fdd53=a0_0x5add36;await ledSave(_0x2fdd53(0xb5)),await Module[_0x2fdd53(0xcc)](0x0),await Module[_0x2fdd53(0xb4)](),await screenShot(0x0),console[_0x2fdd53(0xc8)](_0x2fdd53(0xba)+ ++countAutoSave+_0x2fdd53(0xc3));}async function saveStateInCloud(){const _0xde4d07=a0_0x5add36,_0x59aa22=localStorage[_0xde4d07(0xa6)](_0xde4d07(0x6b)),_0x48f278=_0x59aa22[_0xde4d07(0x7a)](_0xde4d07(0x89),'.ss0'),_0x587219=localStorage[_0xde4d07(0xa6)](_0xde4d07(0xd0)),_0x597d6c=localStorage[_0xde4d07(0xa6)](_0x59aa22+'_imageState0'),_0x3e6c2d=localStorage[_0xde4d07(0xa6)](_0x59aa22+_0xde4d07(0x82));if(navigator[_0xde4d07(0x7e)]){if(_0x587219){await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x48f278,Module[_0xde4d07(0x87)]('/data/states/'+_0x48f278));if(_0x597d6c!==null){const _0x21ef40=_0x597d6c+'\x0a\x0a'+_0x3e6c2d,_0x34384d=new Blob([_0x21ef40],{'type':'text/plain'});await dpUploadFile(_0x59aa22+_0xde4d07(0xac),_0x34384d);}else console[_0xde4d07(0xc8)](_0xde4d07(0x9c));await lockNoti('',_0xde4d07(0xb6)+ ++countUpload+_0xde4d07(0xc3),0x7d0);}else console['log']('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0xde4d07(0xc8)](_0xde4d07(0x85));}function startTimer(){let [_0x2ed1b7,_0x2a9a5c,_0x25821e,_0x2d7154,_0x5df87d]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x2dbef9=a0_0x2def;_0x25821e++,_0x2d7154++,_0x5df87d++;if(_0x25821e===0x3c)[_0x25821e,_0x2a9a5c]=[0x0,_0x2a9a5c+0x1];if(_0x2a9a5c===0x3c)[_0x2a9a5c,_0x2ed1b7]=[0x0,_0x2ed1b7+0x1];document[_0x2dbef9(0x72)]('timer')[_0x2dbef9(0x7f)]=_0x2ed1b7+'h'+_0x2a9a5c['toString']()[_0x2dbef9(0xca)](0x2,'0')+'.'+_0x25821e[_0x2dbef9(0x7b)]()[_0x2dbef9(0xca)](0x2,'0');_0x2d7154===0x3c&&(saveStatePeriodically(),_0x2d7154=0x0);;_0x2d7154===0xe10&&(saveStateInCloud(),_0x5df87d=0x0);;},0x3e8);}export async function uploadGame(_0x2fc18e){const _0x5eb982=a0_0x5add36,_0x55394d=_0x2fc18e[_0x5eb982(0xbd)][0x0];Module[_0x5eb982(0xc6)](_0x55394d,()=>{const _0x25a5a5=_0x5eb982;Module[_0x25a5a5(0xb4)]();});}export async function loadGame(_0x5221db){const _0x334445=a0_0x5add36,_0xf003b2=_0x5221db['replace'](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x2217fa=Module[_0x334445(0x9d)]();intro[_0x334445(0x74)]['add'](_0x334445(0x9a)),errorLogElements[0x0][_0x334445(0x70)][_0x334445(0x86)]='0',ingame[_0x334445(0x74)][_0x334445(0xb7)]('disable'),_0x5221db[_0x334445(0x95)](_0x334445(0xa9))||_0x5221db[_0x334445(0x95)](_0x334445(0x80))?(canvas[_0x334445(0x74)][_0x334445(0x93)]('gbc'),areaTrans[_0x334445(0x74)][_0x334445(0x93)](_0x334445(0x8e)),localStorage[_0x334445(0xa0)](_0x334445(0xa5),_0x334445(0x6e)+(window['innerWidth']-0xe6)+','+(window[_0x334445(0x7c)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x334445(0xa5),_0x334445(0x6e)+(window[_0x334445(0x7c)]-0x96)+','+(window[_0x334445(0x7c)]-0x96)*0x2/0x3),_0x2217fa[_0x334445(0xa4)](_0xf003b2)?(await Module[_0x334445(0x73)]('/data/games/'+_0x5221db),confirm(_0x334445(0x8b))&&(await Module['loadState'](0x0),localStorage[_0x334445(0xa0)](_0x334445(0x6b),_0x5221db),console[_0x334445(0xc8)](_0x5221db))):(await Module[_0x334445(0x73)](_0x334445(0xbf)+_0x5221db),localStorage[_0x334445(0xa0)]('gameName',_0x5221db)),await statusShow();}export async function saveState(_0x31773c){const _0x9a6101=a0_0x5add36;await Module[_0x9a6101(0xcc)](_0x31773c),await Module[_0x9a6101(0xb4)]();}export async function loadState(_0x5e9727){const _0x4a005e=a0_0x5add36;await Module[_0x4a005e(0x6d)](_0x5e9727);}export async function downloadFile(_0x4240e2,_0x3a91a2){const _0x457bd2=a0_0x5add36,_0x14290f=Module[_0x457bd2(0x87)](_0x4240e2),_0x41498c=document['createElement']('a');document[_0x457bd2(0xc2)][_0x457bd2(0x78)](_0x41498c),_0x41498c['download']=_0x3a91a2;const _0x6376ac=new Blob([_0x14290f],{'type':_0x457bd2(0x96)});_0x41498c['href']=URL['createObjectURL'](_0x6376ac),_0x41498c[_0x457bd2(0x8c)](),URL[_0x457bd2(0x69)](_0x6376ac),_0x41498c[_0x457bd2(0xb7)]();}export function downloadFileInCloud(_0x3569df){const _0x6caf96=a0_0x5add36,_0x33cebf=Module[_0x6caf96(0x87)](_0x3569df);return _0x33cebf;}export async function uploadFile(_0x3532c2){const _0x4a760e=a0_0x5add36,_0x3d1416=_0x3532c2['files'][0x0];Module[_0x4a760e(0xc5)](_0x3d1416,()=>{Module['FSSync']();});}export async function editFile(_0x36edf4,_0x4c0c34,_0x16a3e2){const _0x4b454c=a0_0x5add36;await Module[_0x4b454c(0x88)](_0x36edf4,_0x4c0c34,_0x16a3e2),await Module[_0x4b454c(0xb4)]();}export async function deleteFile(_0x2993f2){const _0x5b173a=a0_0x5add36;await Module[_0x5b173a(0xc9)](_0x2993f2),await Module['FSSync']();}export function listGame(){const _0x3e3ecc=a0_0x5add36,_0x19bd2d=Module[_0x3e3ecc(0x9f)]();return _0x19bd2d;}export function listSave(){const _0x501500=a0_0x5add36,_0x340840=Module[_0x501500(0xb3)]();return _0x340840;}export function listState(){const _0x17525e=Module['listStates']();return _0x17525e;}export function listCheat(){const _0x56ec6a=Module['listCheats']();return _0x56ec6a;}export function listScreenshot(){const _0x575d66=a0_0x5add36,_0x355088=Module[_0x575d66(0xb8)]();return _0x355088;}function a0_0x146c(){const _0x5ac502=['FSSync','#20A5A6','Cloud\x20upload\x20','remove','listScreenshots','3335148sacSnO','Auto\x20save\x20','screenshot','6EOlgQE','files','488080QZNbRB','/data/games/','type','now','body','\x20time(s)','Paused!','uploadSaveOrSaveState','uploadRom','turboState','log','deleteFile','padStart','control-setting','saveState','Save/State\x20uploaded\x20successfully:','uploadCheats','Resumed!','uId','revokeObjectURL','Error\x20uploadSavSta:','gameName','pagehide','loadState','0,0,','Off','style','_savedCheats','getElementById','loadGame','classList','2747307JHBbcu','contains','Cheat\x20uploaded\x20successfully:','appendChild','resumeGame','replace','toString','innerWidth','3110552PuNwpf','onLine','textContent','.gb','/data/screenshots/','_dateState0','SDL2','9rGATms','Online!','bottom','downloadFile','editFileName','.gba','turboF','Do\x20you\x20want\x20to\x20load\x20save\x20state?','click','_dateState','gbc1','2BkymYT','name','22rHsMYo','visible','add','setFastForwardMultiplier','endsWith','application/octet-stream','visibilitychange','slotStateSaved','autoLoadCheats','disable','persisted','No\x20screenshot!','listStates','addEventListener','listGames','setItem','_imageState','pauseGame','5427210IhuUEQ','includes','screenSize','getItem','beforeunload','error','.gbc','buttonUnpress','visibilityState','_slot0.txt','canvas','Cheat\x20Enabled!','453242VqfRWf','.png','Error\x20uploadCheat:','3537394OSPTNT','listSaves'];a0_0x146c=function(){return _0x5ac502;};return a0_0x146c();}export function fileSize(_0x4d66d4){const _0x5b7fa6=Module['fileSize'](_0x4d66d4);return _0x5b7fa6;}export async function uploadCheat(_0x5c795f){const _0x2a9687=a0_0x5add36;try{const _0x4fa88a=_0x5c795f['files'][0x0];await Module[_0x2a9687(0xce)](_0x4fa88a,()=>{const _0x5f4e8d=_0x2a9687;console[_0x5f4e8d(0xc8)](_0x5f4e8d(0x77),_0x4fa88a[_0x5f4e8d(0x90)]),localStorageFile(),Module['FSSync']();});}catch(_0x1de1e9){console[_0x2a9687(0xa8)](_0x2a9687(0xb1),_0x1de1e9);}}export async function uploadSavSta(_0x7426c9){const _0x2475dd=a0_0x5add36;try{const _0x2b1907=_0x7426c9[_0x2475dd(0xbd)][0x0];await Module['uploadSaveOrSaveState'](_0x2b1907,()=>{const _0x22ee51=_0x2475dd;console[_0x22ee51(0xc8)](_0x22ee51(0xcd),_0x2b1907['name']),localStorageFile(),Module[_0x22ee51(0xb4)]();});}catch(_0x1ee3ac){console[_0x2475dd(0xa8)](_0x2475dd(0x6a),_0x1ee3ac);}}export async function uploadSaveOrSaveState(_0x1a5a2d){const _0x2a4a81=a0_0x5add36;Module[_0x2a4a81(0xc5)](_0x1a5a2d,()=>{const _0x5e34c9=_0x2a4a81;localStorageFile(),Module[_0x5e34c9(0xb4)]();});}export async function resumeGame(){const _0x512b7a=a0_0x5add36;Module[_0x512b7a(0x79)](),Module[_0x512b7a(0x83)](),notiMessage(_0x512b7a(0xcf),0x7d0);}export async function pauseGame(){const _0x2697b7=a0_0x5add36;Module[_0x2697b7(0xa2)](),Module[_0x2697b7(0x83)](),notiMessage(_0x2697b7(0xc4),0x7d0);}export async function buttonPress(_0x26277e){Module['buttonPress'](_0x26277e);}export async function buttonUnpress(_0x46284c){const _0x383140=a0_0x5add36;Module[_0x383140(0xaa)](_0x46284c);}export async function screenShot(_0x36baa9){const _0x288a05=a0_0x5add36,_0x104748=localStorage['getItem'](_0x288a05(0x6b)),_0x50d8ed=_0x104748[_0x288a05(0x7a)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x288a05(0xbb)](''+_0x50d8ed+_0x36baa9+_0x288a05(0xb0)),await Module[_0x288a05(0xb4)]();const _0x5ec921=await fileToBase64(Module['downloadFile'](_0x288a05(0x81)+_0x50d8ed+_0x36baa9+_0x288a05(0xb0))),_0x58cca7=Date[_0x288a05(0xc1)](),_0x5c4f51=formatDateTime(_0x58cca7);localStorage['setItem'](_0x104748+_0x288a05(0x8d)+_0x36baa9,_0x5c4f51),localStorage[_0x288a05(0xa0)](_0x104748+_0x288a05(0xa1)+_0x36baa9,_0x5ec921);}export async function captureOCR(_0x56c87c){const _0x238ac7=a0_0x5add36;Module[_0x238ac7(0xbb)](_0x56c87c);const _0x2792eb=Module[_0x238ac7(0x87)]('/data/screenshots/'+_0x56c87c);return _0x2792eb;}export async function setFastForwardMultiplier(_0x3ec1ad){const _0x3f4468=a0_0x5add36;Module[_0x3f4468(0x94)](_0x3ec1ad);}export function uploadCheats(_0x5a8ca5,_0x497876,_0x243b47,_0x1906d1,_0xfa0500){Module['uploadCheats'](_0x5a8ca5,()=>{const _0x1b5c20=a0_0x2def;Module[_0x1b5c20(0x99)](),setTimeout(()=>{const _0x2dea79=_0x1b5c20;Module[_0x2dea79(0xb4)]();},0x1f4),_0x1906d1&&(localStorage[_0x1b5c20(0xa0)](_0x497876+_0x1b5c20(0x71),_0x243b47),notiMessage(_0x1b5c20(0xae),0x5dc)),_0xfa0500['textContent']=localStorage['getItem'](_0x497876+_0x1b5c20(0x71)||_0x1b5c20(0x6f));});}