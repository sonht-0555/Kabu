const a0_0x59828b=a0_0x335d;(function(_0x231f35,_0x5e9ccb){const _0x5b949f=a0_0x335d,_0x2de10e=_0x231f35();while(!![]){try{const _0x3eb91a=-parseInt(_0x5b949f(0x1b9))/0x1*(-parseInt(_0x5b949f(0x1b3))/0x2)+-parseInt(_0x5b949f(0x1e8))/0x3*(-parseInt(_0x5b949f(0x1b8))/0x4)+parseInt(_0x5b949f(0x19d))/0x5*(parseInt(_0x5b949f(0x19c))/0x6)+-parseInt(_0x5b949f(0x190))/0x7*(parseInt(_0x5b949f(0x189))/0x8)+parseInt(_0x5b949f(0x1c8))/0x9+parseInt(_0x5b949f(0x192))/0xa*(-parseInt(_0x5b949f(0x1d6))/0xb)+parseInt(_0x5b949f(0x1d2))/0xc;if(_0x3eb91a===_0x5e9ccb)break;else _0x2de10e['push'](_0x2de10e['shift']());}catch(_0x2690ef){_0x2de10e['push'](_0x2de10e['shift']());}}}(a0_0x2d2c,0x96441));import a0_0xb9334e from'../core/mgba.js';import*as a0_0x370cc6 from'./gamepad.js';function a0_0x2d2c(){const _0x36a3d7=['Error\x20uploadCheat:','_dateState','resumeGame','0,0,','application/octet-stream','_dateState0','pauseGame','endsWith','revokeObjectURL','persisted','canvas','loadState','2210787CfWwam','setFastForwardMultiplier','download','listScreenshots','\x20time(s)','Auto\x20save\x20','autoLoadCheats','classList','name','/data/screenshots/','4680408AYTwBB','bottom','/data/games/','beforeunload','580998NpSLen','slotStateSaved','innerWidth','onLine','deleteFile','Cloud\x20upload\x20','uploadSaveOrSaveState','No\x20screenshot!','Cheat\x20Enabled!','SDL2','control-setting','fileSize','.gbc','href','FSSync','/data/states/','loadGame','addEventListener','3yTIFtf','Off','toString','editFileName','screenSize','gbc1','log','Error\x20uploadSavSta:','795968bCkAKS','screenshot','createObjectURL','Save/State\x20uploaded\x20successfully:','Online!','Resumed!','saveState','56oPHfEj','.gba','160gRcIRl','text/plain','.png','disable','getItem','uploadCheats','FSInit','timer','Unable\x20to\x20upload\x20to\x20Cloud!','listGames','7260414PZlBsh','5UScJkQ','visible','#E0C068','createElement','_imageState','Do\x20you\x20want\x20to\x20load\x20save\x20state?','turboState','gameName','appendChild','_savedCheats','.ss0','visibilityState','add','files','body','replace','now','getElementById','turboF','listStates','error','downloadFile','2pBrrGn','padStart','uId','Cheat\x20uploaded\x20successfully:','.gb','1038252JdoVQH','151236aNHXhx','includes','setItem'];a0_0x2d2c=function(){return _0x36a3d7;};return a0_0x2d2c();}import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x59828b(0x1ae)](a0_0x59828b(0x1c6))};function initializeCore(_0x3e362f,_0x580e7c){_0x3e362f(_0x580e7c)['then'](function(_0x4c2073){const _0xed9361=a0_0x335d;_0x4c2073[_0xed9361(0x198)]();});}initializeCore(a0_0xb9334e,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x59828b(0x1c6)),savedTurboState=localStorage[a0_0x59828b(0x196)](a0_0x59828b(0x1a3)),controlSetting=document[a0_0x59828b(0x1ae)](a0_0x59828b(0x1e0));function handleVisibilityChange(_0x326b44){const _0x297521=a0_0x59828b;document[_0x297521(0x1a8)]==='hidden'||_0x326b44?.['type']===_0x297521(0x1d5)||_0x326b44?.[_0x297521(0x1c5)]?(pauseGame(),canvas[_0x297521(0x1cf)][_0x297521(0x1a9)](_0x297521(0x19e))):(setTimeout(()=>{const _0x5758bb=_0x297521;canvas[_0x5758bb(0x1cf)]['remove']('visible');},0x258),controlSetting[_0x297521(0x1cf)]['contains'](_0x297521(0x19e))&&resumeGame());}async function statusShow(){const _0x37a182=a0_0x59828b;document[_0x37a182(0x1e7)]('pagehide',handleVisibilityChange),document[_0x37a182(0x1e7)]('visibilitychange',handleVisibilityChange),window[_0x37a182(0x1e7)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x370cc6[_0x37a182(0x1af)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x37a182(0x196)](_0x37a182(0x1d7)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x48f8a7=a0_0x59828b;await ledSave('#20A5A6'),await Module[_0x48f8a7(0x18f)](0x0),await Module[_0x48f8a7(0x1e4)](),await screenShot(0x0),console[_0x48f8a7(0x187)](_0x48f8a7(0x1cd)+ ++countAutoSave+_0x48f8a7(0x1cc));}async function saveStateInCloud(){const _0x103941=a0_0x59828b,_0x434e40=localStorage[_0x103941(0x196)](_0x103941(0x1a4)),_0x237a74=_0x434e40['replace'](_0x103941(0x191),'.ss0'),_0x3200d0=localStorage['getItem'](_0x103941(0x1b5)),_0x593af0=localStorage[_0x103941(0x196)](_0x434e40+'_imageState0'),_0x221871=localStorage[_0x103941(0x196)](_0x434e40+_0x103941(0x1c1));if(navigator[_0x103941(0x1d9)]){if(_0x3200d0){await ledSave(_0x103941(0x19f)),await delay(0x3e8),await dpUploadFile(_0x237a74,Module[_0x103941(0x1b2)](_0x103941(0x1e5)+_0x237a74));if(_0x593af0!==null){const _0x5e2586=_0x593af0+'\x0a\x0a'+_0x221871,_0x4308ad=new Blob([_0x5e2586],{'type':_0x103941(0x193)});await dpUploadFile(_0x434e40+'_slot0.txt',_0x4308ad);}else console['log'](_0x103941(0x1dd));await lockNoti('',_0x103941(0x1db)+ ++countUpload+_0x103941(0x1cc),0x7d0);}else console[_0x103941(0x187)](_0x103941(0x19a));}else console['log'](_0x103941(0x18d));}function startTimer(){let [_0x20326b,_0x51500b,_0xc45d6d,_0x4966f7,_0x2eab65]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x15a34d=a0_0x335d;_0xc45d6d++,_0x4966f7++,_0x2eab65++;if(_0xc45d6d===0x3c)[_0xc45d6d,_0x51500b]=[0x0,_0x51500b+0x1];if(_0x51500b===0x3c)[_0x51500b,_0x20326b]=[0x0,_0x20326b+0x1];document['getElementById'](_0x15a34d(0x199))['textContent']=_0x20326b+'h'+_0x51500b[_0x15a34d(0x1ea)]()[_0x15a34d(0x1b4)](0x2,'0')+'.'+_0xc45d6d[_0x15a34d(0x1ea)]()['padStart'](0x2,'0');_0x4966f7===0x3c&&(saveStatePeriodically(),_0x4966f7=0x0);;_0x4966f7===0xe10&&(saveStateInCloud(),_0x2eab65=0x0);;},0x3e8);}export async function uploadGame(_0x1d9d11){const _0x574ecd=a0_0x59828b,_0x4b15f9=_0x1d9d11[_0x574ecd(0x1aa)][0x0];Module['uploadRom'](_0x4b15f9,()=>{Module['FSSync']();});}export async function loadGame(_0x5a7e40){const _0x55f82e=a0_0x59828b,_0x324159=_0x5a7e40[_0x55f82e(0x1ac)](/\.(gba|gbc|gb|zip)$/,_0x55f82e(0x1a7)),_0x13081e=Module[_0x55f82e(0x1b0)]();intro[_0x55f82e(0x1cf)][_0x55f82e(0x1a9)](_0x55f82e(0x195)),errorLogElements[0x0]['style'][_0x55f82e(0x1d3)]='0',ingame[_0x55f82e(0x1cf)]['remove'](_0x55f82e(0x195)),_0x5a7e40[_0x55f82e(0x1c3)](_0x55f82e(0x1e2))||_0x5a7e40[_0x55f82e(0x1c3)](_0x55f82e(0x1b7))?(canvas[_0x55f82e(0x1cf)]['add']('gbc'),areaTrans[_0x55f82e(0x1cf)][_0x55f82e(0x1a9)](_0x55f82e(0x186)),localStorage[_0x55f82e(0x1bb)](_0x55f82e(0x185),'0,0,'+(window[_0x55f82e(0x1d8)]-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage[_0x55f82e(0x1bb)](_0x55f82e(0x185),_0x55f82e(0x1bf)+(window['innerWidth']-0x96)+','+(window[_0x55f82e(0x1d8)]-0x96)*0x2/0x3),_0x13081e[_0x55f82e(0x1ba)](_0x324159)?(await Module['loadGame'](_0x55f82e(0x1d4)+_0x5a7e40),confirm(_0x55f82e(0x1a2))&&(await Module[_0x55f82e(0x1c7)](0x0),localStorage[_0x55f82e(0x1bb)](_0x55f82e(0x1a4),_0x5a7e40),console['log'](_0x5a7e40))):(await Module[_0x55f82e(0x1e6)]('/data/games/'+_0x5a7e40),localStorage[_0x55f82e(0x1bb)](_0x55f82e(0x1a4),_0x5a7e40)),await statusShow();}export async function saveState(_0x5f2590){const _0x2e13d0=a0_0x59828b;await Module[_0x2e13d0(0x18f)](_0x5f2590),await Module[_0x2e13d0(0x1e4)]();}export async function loadState(_0xa3fab0){const _0xd36689=a0_0x59828b;await Module[_0xd36689(0x1c7)](_0xa3fab0);}export async function downloadFile(_0x326a17,_0x5875e6){const _0x3ee42e=a0_0x59828b,_0xe767ec=Module[_0x3ee42e(0x1b2)](_0x326a17),_0x38e5c8=document[_0x3ee42e(0x1a0)]('a');document[_0x3ee42e(0x1ab)][_0x3ee42e(0x1a5)](_0x38e5c8),_0x38e5c8[_0x3ee42e(0x1ca)]=_0x5875e6;const _0x3a5679=new Blob([_0xe767ec],{'type':_0x3ee42e(0x1c0)});_0x38e5c8[_0x3ee42e(0x1e3)]=URL[_0x3ee42e(0x18b)](_0x3a5679),_0x38e5c8['click'](),URL[_0x3ee42e(0x1c4)](_0x3a5679),_0x38e5c8['remove']();}export function downloadFileInCloud(_0x185a6e){const _0x480077=a0_0x59828b,_0x4b9bb8=Module[_0x480077(0x1b2)](_0x185a6e);return _0x4b9bb8;}export async function uploadFile(_0x8129c4){const _0x4e90f7=_0x8129c4['files'][0x0];Module['uploadSaveOrSaveState'](_0x4e90f7,()=>{const _0xddf229=a0_0x335d;Module[_0xddf229(0x1e4)]();});}export async function editFile(_0x1f8c61,_0x52c08f,_0x1ec66a){const _0x91ff83=a0_0x59828b;await Module[_0x91ff83(0x184)](_0x1f8c61,_0x52c08f,_0x1ec66a),await Module[_0x91ff83(0x1e4)]();}export async function deleteFile(_0x12befa){const _0x3b204e=a0_0x59828b;await Module[_0x3b204e(0x1da)](_0x12befa),await Module[_0x3b204e(0x1e4)]();}export function listGame(){const _0x40cbf6=a0_0x59828b,_0x41da48=Module[_0x40cbf6(0x19b)]();return _0x41da48;}export function listSave(){const _0x591464=Module['listSaves']();return _0x591464;}export function listState(){const _0x3dd7ed=a0_0x59828b,_0x5e0154=Module[_0x3dd7ed(0x1b0)]();return _0x5e0154;}export function listCheat(){const _0xe5cc0d=Module['listCheats']();return _0xe5cc0d;}export function listScreenshot(){const _0x80e376=a0_0x59828b,_0x530a4a=Module[_0x80e376(0x1cb)]();return _0x530a4a;}export function fileSize(_0x2f3450){const _0x4ebbeb=a0_0x59828b,_0x366fea=Module[_0x4ebbeb(0x1e1)](_0x2f3450);return _0x366fea;}export async function uploadCheat(_0x31636f){const _0x194b7c=a0_0x59828b;try{const _0x1bcd72=_0x31636f[_0x194b7c(0x1aa)][0x0];await Module[_0x194b7c(0x197)](_0x1bcd72,()=>{const _0x20eb98=_0x194b7c;console[_0x20eb98(0x187)](_0x20eb98(0x1b6),_0x1bcd72[_0x20eb98(0x1d0)]),localStorageFile(),Module[_0x20eb98(0x1e4)]();});}catch(_0x4d0bd5){console[_0x194b7c(0x1b1)](_0x194b7c(0x1bc),_0x4d0bd5);}}function a0_0x335d(_0x3cf700,_0x21b5f8){const _0x2d2c7a=a0_0x2d2c();return a0_0x335d=function(_0x335d8c,_0x4e2c37){_0x335d8c=_0x335d8c-0x184;let _0x35796e=_0x2d2c7a[_0x335d8c];return _0x35796e;},a0_0x335d(_0x3cf700,_0x21b5f8);}export async function uploadSavSta(_0x23f731){const _0x391111=a0_0x59828b;try{const _0xf9951b=_0x23f731['files'][0x0];await Module[_0x391111(0x1dc)](_0xf9951b,()=>{const _0x2c7d15=_0x391111;console[_0x2c7d15(0x187)](_0x2c7d15(0x18c),_0xf9951b[_0x2c7d15(0x1d0)]),localStorageFile(),Module['FSSync']();});}catch(_0x481fff){console[_0x391111(0x1b1)](_0x391111(0x188),_0x481fff);}}export async function uploadSaveOrSaveState(_0x2c29e1){const _0x1ec386=a0_0x59828b;Module[_0x1ec386(0x1dc)](_0x2c29e1,()=>{const _0xbfd958=_0x1ec386;localStorageFile(),Module[_0xbfd958(0x1e4)]();});}export async function resumeGame(){const _0x54603e=a0_0x59828b;Module[_0x54603e(0x1be)](),Module['SDL2'](),notiMessage(_0x54603e(0x18e),0x7d0);}export async function pauseGame(){const _0x573ac1=a0_0x59828b;Module[_0x573ac1(0x1c2)](),Module[_0x573ac1(0x1df)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x5c99f3){Module['buttonPress'](_0x5c99f3);}export async function buttonUnpress(_0x36df40){Module['buttonUnpress'](_0x36df40);}export async function screenShot(_0x45ca0f){const _0x228f4e=a0_0x59828b,_0x32edbb=localStorage['getItem'](_0x228f4e(0x1a4)),_0x5d55b3=_0x32edbb[_0x228f4e(0x1ac)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x228f4e(0x18a)](''+_0x5d55b3+_0x45ca0f+_0x228f4e(0x194)),await Module[_0x228f4e(0x1e4)]();const _0x10b3e4=await fileToBase64(Module['downloadFile'](_0x228f4e(0x1d1)+_0x5d55b3+_0x45ca0f+_0x228f4e(0x194))),_0x5d323d=Date[_0x228f4e(0x1ad)](),_0x897407=formatDateTime(_0x5d323d);localStorage[_0x228f4e(0x1bb)](_0x32edbb+_0x228f4e(0x1bd)+_0x45ca0f,_0x897407),localStorage['setItem'](_0x32edbb+_0x228f4e(0x1a1)+_0x45ca0f,_0x10b3e4);}export async function captureOCR(_0x2f047d){const _0x15db35=a0_0x59828b;Module[_0x15db35(0x18a)](_0x2f047d);const _0x33ac95=Module[_0x15db35(0x1b2)](_0x15db35(0x1d1)+_0x2f047d);return _0x33ac95;}export async function setFastForwardMultiplier(_0x469eaf){const _0x1a0c8b=a0_0x59828b;Module[_0x1a0c8b(0x1c9)](_0x469eaf);}export function uploadCheats(_0x4407ca,_0x10587,_0x2ccb06,_0x4a89fd,_0x2d88e7){const _0x240a01=a0_0x59828b;Module[_0x240a01(0x197)](_0x4407ca,()=>{const _0x5d9b3c=_0x240a01;Module[_0x5d9b3c(0x1ce)](),setTimeout(()=>{const _0x65a648=_0x5d9b3c;Module[_0x65a648(0x1e4)]();},0x1f4),_0x4a89fd&&(localStorage[_0x5d9b3c(0x1bb)](_0x10587+_0x5d9b3c(0x1a6),_0x2ccb06),notiMessage(_0x5d9b3c(0x1de),0x5dc)),_0x2d88e7['textContent']=localStorage['getItem'](_0x10587+_0x5d9b3c(0x1a6)||_0x5d9b3c(0x1e9));});}