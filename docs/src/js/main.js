const a0_0x3d89af=a0_0x5d2f;(function(_0x102faf,_0x3c52a6){const _0x321678=a0_0x5d2f,_0x529668=_0x102faf();while(!![]){try{const _0x59a9e1=parseInt(_0x321678(0x1e4))/0x1*(-parseInt(_0x321678(0x201))/0x2)+-parseInt(_0x321678(0x1e7))/0x3+parseInt(_0x321678(0x1eb))/0x4+-parseInt(_0x321678(0x1c2))/0x5*(-parseInt(_0x321678(0x217))/0x6)+parseInt(_0x321678(0x211))/0x7+-parseInt(_0x321678(0x1c9))/0x8+-parseInt(_0x321678(0x20c))/0x9;if(_0x59a9e1===_0x3c52a6)break;else _0x529668['push'](_0x529668['shift']());}catch(_0x70bc62){_0x529668['push'](_0x529668['shift']());}}}(a0_0x3383,0xf1344));import a0_0x199237 from'../core/mgba.js';import*as a0_0x542081 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document['getElementById']('canvas')};function initializeCore(_0x3c2f9e,_0x4c8750){const _0x432c6d=a0_0x5d2f;_0x3c2f9e(_0x4c8750)[_0x432c6d(0x1d0)](function(_0xb85edf){_0xb85edf['FSInit']();});}initializeCore(a0_0x199237,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;function a0_0x3383(){const _0xd71d26=['setVolume','length','Cloud\x20upload\x20','2GSGCuu','onLine','persisted','2687592LFlmPc','style','canvas','listSaves','3633792IIhuxe','.gb','visible','turboState','timer','uploadAll','/data/games/','screenSize','files','autoLoadCheats','contains','Auto\x20save\x20','loadState','/data/screenshots/','_savedCheats','indexOf','image/png','fileSize','now','substring','filter','endsWith','480618CsLoyb','uploadRom','buttonUnpress','includes','disable','Off','toString','buttonPress','split','resumeGame','editFileName','4091652avScsS','beforeunload','downloadFile','slotStateSaved','tEXtComment\x00','12928923XlZZbZ','addEventListener','href','set','visibilitychange','log','1047288LrzFfB','Do\x20you\x20want\x20to\x20load\x20save\x20state?','control-setting','Resumed!','listStates','loadGame','.png','.ss0','FSSync','state','revokeObjectURL','screenshot','\x20time(s)','Cheat\x20Enabled!','gbc1','5MKxbpQ','getItem','gameName','createElement','listCheats','#E0C068','Paused!','887224OdweUn','charCodeAt','saveState','setItem','.gbc','replace','download','then','uId','textContent','getElementById','deleteFile','application/octet-stream','#20A5A6','listRoms','visibilityState','classList','remove','innerWidth','hidden','appendChild','add','pauseGame','SDL2'];a0_0x3383=function(){return _0xd71d26;};return a0_0x3383();}const canvas=document[a0_0x3d89af(0x1d3)](a0_0x3d89af(0x1e9)),savedTurboState=localStorage[a0_0x3d89af(0x1c3)](a0_0x3d89af(0x1ee)),controlSetting=document[a0_0x3d89af(0x1d3)](a0_0x3d89af(0x219));function handleVisibilityChange(_0x51b19f){const _0x2a6af7=a0_0x3d89af;document[_0x2a6af7(0x1d8)]===_0x2a6af7(0x1dc)||_0x51b19f?.['type']===_0x2a6af7(0x20d)||_0x51b19f?.[_0x2a6af7(0x1e6)]?(pauseGame(),canvas[_0x2a6af7(0x1d9)][_0x2a6af7(0x1de)](_0x2a6af7(0x1ed))):(setTimeout(()=>{const _0x24cf01=_0x2a6af7;canvas[_0x24cf01(0x1d9)][_0x24cf01(0x1da)](_0x24cf01(0x1ed));},0x258),controlSetting['classList'][_0x2a6af7(0x1f5)](_0x2a6af7(0x1ed))&&resumeGame());}async function statusShow(){const _0x3e8186=a0_0x3d89af;document[_0x3e8186(0x212)]('pagehide',handleVisibilityChange),document[_0x3e8186(0x212)](_0x3e8186(0x215),handleVisibilityChange),window[_0x3e8186(0x212)](_0x3e8186(0x20d),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x542081['turboF'](turboState)),await delay(0xc8),await Module[_0x3e8186(0x1e0)](),await delay(0x320),await led(parseInt(localStorage['getItem'](_0x3e8186(0x20f)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x5b832f=a0_0x3d89af;await ledSave(_0x5b832f(0x1d6)),await Module[_0x5b832f(0x1cb)](0x0),await Module[_0x5b832f(0x21f)](),await screenShot(0x0),console[_0x5b832f(0x216)](_0x5b832f(0x1f6)+ ++countAutoSave+_0x5b832f(0x1bf));}async function saveStateInCloud(){const _0x62cb67=a0_0x3d89af,_0x2e4237=localStorage[_0x62cb67(0x1c3)](_0x62cb67(0x1c4)),_0x6ded5a=_0x2e4237[_0x62cb67(0x1ce)](/\.(zip|gb|gbc|gba)$/,_0x62cb67(0x21e)),_0x2a3a7a=localStorage[_0x62cb67(0x1c3)](_0x62cb67(0x1d1));navigator[_0x62cb67(0x1e5)]&&(_0x2a3a7a&&(await ledSave(_0x62cb67(0x1c7)),await delay(0x3e8),await dpUploadFile(_0x6ded5a,Module[_0x62cb67(0x20e)]('/data/states/'+_0x6ded5a),_0x62cb67(0x220)),await lockNoti('',_0x62cb67(0x1e3)+ ++countUpload+_0x62cb67(0x1bf),0x7d0)));}function startTimer(){let [_0x171055,_0x37c2e8,_0x43c5db,_0x3888dc,_0x1a5dc9]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x297953=a0_0x5d2f;_0x43c5db++,_0x3888dc++,_0x1a5dc9++;if(_0x43c5db===0x3c)[_0x43c5db,_0x37c2e8]=[0x0,_0x37c2e8+0x1];if(_0x37c2e8===0x3c)[_0x37c2e8,_0x171055]=[0x0,_0x171055+0x1];document[_0x297953(0x1d3)](_0x297953(0x1ef))[_0x297953(0x1d2)]=_0x171055+'h'+_0x37c2e8[_0x297953(0x207)]()['padStart'](0x2,'0')+'.'+_0x43c5db[_0x297953(0x207)]()['padStart'](0x2,'0');_0x3888dc===0x3c&&(saveStatePeriodically(),_0x3888dc=0x0);;_0x1a5dc9===0x708&&(saveStateInCloud(),_0x1a5dc9=0x0);;},0x3e8);}export async function uploadGame(_0x167c87){const _0x476b1e=a0_0x3d89af,_0x282ebb=_0x167c87[_0x476b1e(0x1f3)][0x0];Module[_0x476b1e(0x202)](_0x282ebb,()=>{const _0x376d54=_0x476b1e;Module[_0x376d54(0x21f)]();});}export async function loadGame(_0x2f8ae6){const _0x184a77=a0_0x3d89af,_0x3d7ebb=_0x2f8ae6[_0x184a77(0x1ce)](/\.(gba|gbc|gb|zip)$/,_0x184a77(0x21e)),_0x3f9b06=Module[_0x184a77(0x21b)]()[_0x184a77(0x1ff)](_0x56b728=>_0x56b728!=='.'&&_0x56b728!=='..');intro['classList'][_0x184a77(0x1de)](_0x184a77(0x205)),errorLogElements[0x0][_0x184a77(0x1e8)]['bottom']='0',ingame[_0x184a77(0x1d9)][_0x184a77(0x1da)]('disable'),_0x2f8ae6[_0x184a77(0x200)](_0x184a77(0x1cd))||_0x2f8ae6[_0x184a77(0x200)](_0x184a77(0x1ec))?(canvas[_0x184a77(0x1d9)][_0x184a77(0x1de)]('gbc'),areaTrans[_0x184a77(0x1d9)][_0x184a77(0x1de)](_0x184a77(0x1c1)),localStorage[_0x184a77(0x1cc)](_0x184a77(0x1f2),'0,0,'+(window[_0x184a77(0x1db)]-0xe6)+','+(window[_0x184a77(0x1db)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x184a77(0x1f2),'0,0,'+(window[_0x184a77(0x1db)]-0x96)+','+(window[_0x184a77(0x1db)]-0x96)*0x2/0x3),_0x3f9b06[_0x184a77(0x204)](_0x3d7ebb)?(await Module[_0x184a77(0x21c)]('/data/games/'+_0x2f8ae6),confirm(_0x184a77(0x218))&&(await Module[_0x184a77(0x1f7)](0x0),localStorage[_0x184a77(0x1cc)](_0x184a77(0x1c4),_0x2f8ae6),console[_0x184a77(0x216)](_0x2f8ae6))):(await Module[_0x184a77(0x21c)](_0x184a77(0x1f1)+_0x2f8ae6),localStorage[_0x184a77(0x1cc)](_0x184a77(0x1c4),_0x2f8ae6),console[_0x184a77(0x216)](_0x2f8ae6)),await statusShow();}export async function saveState(_0x4e7c3c){const _0x32a706=a0_0x3d89af;await Module[_0x32a706(0x1cb)](_0x4e7c3c),await Module['FSSync']();}export async function loadState(_0x2f2f6e){await Module['loadState'](_0x2f2f6e);}export async function downloadFile(_0x2f311b,_0x25951){const _0x32fe7c=a0_0x3d89af,_0x4eeab4=Module[_0x32fe7c(0x20e)](_0x2f311b),_0x42ba31=document[_0x32fe7c(0x1c5)]('a');document['body'][_0x32fe7c(0x1dd)](_0x42ba31),_0x42ba31[_0x32fe7c(0x1cf)]=_0x25951;const _0x55acf1=new Blob([_0x4eeab4],{'type':_0x32fe7c(0x1d5)});_0x42ba31[_0x32fe7c(0x213)]=URL['createObjectURL'](_0x55acf1),_0x42ba31['click'](),URL[_0x32fe7c(0x1bd)](_0x55acf1),_0x42ba31['remove']();}export function downloadFileInCloud(_0x5504e1){const _0x2f7218=a0_0x3d89af,_0x3caae8=Module[_0x2f7218(0x20e)](_0x5504e1);return _0x3caae8;}export async function uploadFileInCloud(_0x1a4275){const _0x1bca39=a0_0x3d89af;Module[_0x1bca39(0x1f0)](_0x1a4275,()=>{localStorageFile(),Module['FSSync']();});}export async function uploadFile(_0x4e0076){const _0xc0cb58=a0_0x3d89af,_0xee1a6f=_0x4e0076[_0xc0cb58(0x1f3)][0x0];Module[_0xc0cb58(0x1f0)](_0xee1a6f,()=>{const _0x841958=_0xc0cb58;localStorageFile(),Module[_0x841958(0x21f)]();});}export async function editFile(_0xbff107,_0x5963c5,_0x3b2b7b){const _0x2d3f0d=a0_0x3d89af;await Module[_0x2d3f0d(0x20b)](_0xbff107,_0x5963c5,_0x3b2b7b),await Module[_0x2d3f0d(0x21f)]();}export async function deleteFile(_0x5a6ac0){const _0x52060f=a0_0x3d89af;await Module[_0x52060f(0x1d4)](_0x5a6ac0),await Module['FSSync']();}export function listGame(){const _0xbc2b3b=a0_0x3d89af,_0x434fc3=Module[_0xbc2b3b(0x1d7)]()[_0xbc2b3b(0x1ff)](_0x1ac9d9=>_0x1ac9d9!=='.'&&_0x1ac9d9!=='..');return _0x434fc3;}export function listSave(){const _0x54a17a=a0_0x3d89af,_0x6c16bd=Module[_0x54a17a(0x1ea)]()[_0x54a17a(0x1ff)](_0x302dc5=>_0x302dc5!=='.'&&_0x302dc5!=='..');return _0x6c16bd;}export function listState(){const _0x3b1e5f=a0_0x3d89af,_0xc163dc=Module['listStates']()[_0x3b1e5f(0x1ff)](_0x55d380=>_0x55d380!=='.'&&_0x55d380!=='..');return _0xc163dc;}export function listCheat(){const _0xdc07e8=a0_0x3d89af,_0x304da5=Module[_0xdc07e8(0x1c6)]()['filter'](_0x1e07ea=>_0x1e07ea!=='.'&&_0x1e07ea!=='..');return _0x304da5;}export function listScreenshot(){const _0x186d0c=a0_0x3d89af,_0x17499d=Module['listScreenshots']()[_0x186d0c(0x1ff)](_0x964d74=>_0x964d74!=='.'&&_0x964d74!=='..');return _0x17499d;}export function embedTextInPngFile(_0x34a5bd,_0x552874,_0x21523c){const _0x4961e9=a0_0x3d89af;let _0x138fd4=atob(_0x34a5bd[_0x4961e9(0x209)](',')[0x1]),_0x2e1155=new Uint8Array(_0x138fd4[_0x4961e9(0x1e2)]);for(let _0x7f26cf=0x0;_0x7f26cf<_0x138fd4[_0x4961e9(0x1e2)];_0x7f26cf++){_0x2e1155[_0x7f26cf]=_0x138fd4[_0x4961e9(0x1ca)](_0x7f26cf);}let _0x25f630=new TextEncoder()['encode'](_0x4961e9(0x210)+_0x552874),_0x2dc873=new Uint8Array(_0x2e1155['length']+_0x25f630['length']);_0x2dc873[_0x4961e9(0x214)](_0x2e1155,0x0),_0x2dc873[_0x4961e9(0x214)](_0x25f630,_0x2e1155[_0x4961e9(0x1e2)]);let _0x4df538=new Blob([_0x2dc873],{'type':_0x4961e9(0x1fb)}),_0x29ab40=new File([_0x4df538],_0x21523c,{'type':_0x4961e9(0x1fb)});return _0x29ab40;}export function extractTextFromPngBase64(_0x5fa331){const _0x29bb3b=a0_0x3d89af;let _0xd08966=atob(_0x5fa331[_0x29bb3b(0x209)](',')[0x1]),_0xe06349=_0x29bb3b(0x210),_0x843156=_0xd08966[_0x29bb3b(0x1fa)](_0xe06349);if(_0x843156!==-0x1)return _0xd08966[_0x29bb3b(0x1fe)](_0x843156+_0xe06349[_0x29bb3b(0x1e2)]);return null;}export function fileSize(_0x5b1c89){const _0x3678c9=a0_0x3d89af,_0x2b2606=Module[_0x3678c9(0x1fc)](_0x5b1c89);return _0x2b2606;}export async function resumeGame(){const _0x432157=a0_0x3d89af;Module[_0x432157(0x20a)](),Module[_0x432157(0x1e0)](),notiMessage(_0x432157(0x21a),0x7d0);}export async function pauseGame(){const _0x4a855e=a0_0x3d89af;Module[_0x4a855e(0x1df)](),Module['SDL2'](),notiMessage(_0x4a855e(0x1c8),0x7d0);}export async function buttonPress(_0x2d6602){const _0x56980e=a0_0x3d89af;Module[_0x56980e(0x208)](_0x2d6602);}export async function buttonUnpress(_0x48f9d7){const _0x2a577b=a0_0x3d89af;Module[_0x2a577b(0x203)](_0x48f9d7);}function a0_0x5d2f(_0x502f2d,_0x295216){const _0x338351=a0_0x3383();return a0_0x5d2f=function(_0x5d2f01,_0x1679a4){_0x5d2f01=_0x5d2f01-0x1bd;let _0x3be434=_0x338351[_0x5d2f01];return _0x3be434;},a0_0x5d2f(_0x502f2d,_0x295216);}export async function screenShot(_0x2fdf73){const _0x5994cd=a0_0x3d89af,_0x284d2c=localStorage[_0x5994cd(0x1c3)]('gameName')[_0x5994cd(0x1ce)](/\.(gba|gbc|gb|zip)$/,''),_0x1f0c2d=_0x284d2c+'_'+_0x2fdf73+_0x5994cd(0x21d);await Module[_0x5994cd(0x1be)](_0x1f0c2d),await Module[_0x5994cd(0x21f)]();const _0x1dfa1f=await fileToBase64(Module[_0x5994cd(0x20e)](_0x5994cd(0x1f8)+_0x1f0c2d)),_0x29f3eb=embedTextInPngFile(_0x1dfa1f,formatDateTime(Date[_0x5994cd(0x1fd)]()),_0x1f0c2d);Module[_0x5994cd(0x1f0)](_0x29f3eb,()=>{const _0xbf172b=_0x5994cd;localStorageFile(),Module[_0xbf172b(0x21f)]();});}export async function dowloadScreenShot(_0x3b2bb1){const _0x2368b2=a0_0x3d89af;try{const _0x256b50=await fileToBase64(Module[_0x2368b2(0x20e)](_0x3b2bb1));return _0x256b50;}catch{}}export async function captureOCR(_0x111f1a){const _0x5083dd=a0_0x3d89af;Module[_0x5083dd(0x1be)](_0x111f1a);const _0xca7b22=Module[_0x5083dd(0x20e)]('/data/screenshots/'+_0x111f1a);return _0xca7b22;}export async function setFastForwardMultiplier(_0x481971){Module['setFastForwardMultiplier'](_0x481971);}export function uploadCheats(_0x5d72af,_0x4cd7d3,_0x5a8f49,_0x40eb35,_0x534689){const _0x3d8441=a0_0x3d89af;Module[_0x3d8441(0x1f0)](_0x5d72af,()=>{const _0x223bfb=_0x3d8441;Module[_0x223bfb(0x1f4)](),setTimeout(()=>{const _0xfcfe69=_0x223bfb;Module[_0xfcfe69(0x21f)]();},0x1f4),_0x40eb35&&(localStorage[_0x223bfb(0x1cc)](_0x4cd7d3+_0x223bfb(0x1f9),_0x5a8f49),notiMessage(_0x223bfb(0x1c0),0x5dc)),_0x534689[_0x223bfb(0x1d2)]=localStorage['getItem'](_0x4cd7d3+_0x223bfb(0x1f9)||_0x223bfb(0x206));});}export function setVolume(_0x5a26a2){const _0x3fe145=a0_0x3d89af;Module[_0x3fe145(0x1e1)](_0x5a26a2);}