const a0_0x31c149=a0_0x5ad2;(function(_0x2f3e45,_0x4849c4){const _0x254713=a0_0x5ad2,_0xb256f8=_0x2f3e45();while(!![]){try{const _0x4a96a9=parseInt(_0x254713(0x138))/0x1*(parseInt(_0x254713(0x14b))/0x2)+parseInt(_0x254713(0x13d))/0x3+-parseInt(_0x254713(0x18a))/0x4+parseInt(_0x254713(0x145))/0x5+-parseInt(_0x254713(0x177))/0x6*(parseInt(_0x254713(0x159))/0x7)+parseInt(_0x254713(0x131))/0x8+parseInt(_0x254713(0x189))/0x9*(-parseInt(_0x254713(0x14f))/0xa);if(_0x4a96a9===_0x4849c4)break;else _0xb256f8['push'](_0xb256f8['shift']());}catch(_0x44c512){_0xb256f8['push'](_0xb256f8['shift']());}}}(a0_0x7ed3,0x73ad8));function a0_0x5ad2(_0x4a688e,_0x5897cc){const _0x7ed353=a0_0x7ed3();return a0_0x5ad2=function(_0x5ad2b7,_0x173620){_0x5ad2b7=_0x5ad2b7-0x12f;let _0x32d726=_0x7ed353[_0x5ad2b7];return _0x32d726;},a0_0x5ad2(_0x4a688e,_0x5897cc);}import a0_0x235daa from'../core/mgba.js';import*as a0_0x1be664 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x31c149(0x179)]('canvas')};function initializeCore(_0x569819,_0x27a755){const _0x2e83d9=a0_0x31c149;_0x569819(_0x27a755)[_0x2e83d9(0x16f)](function(_0x1988cd){const _0x554a04=_0x2e83d9;_0x1988cd[_0x554a04(0x170)]();});}initializeCore(a0_0x235daa,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x31c149(0x179)]('canvas'),savedTurboState=localStorage[a0_0x31c149(0x13b)]('turboState'),controlSetting=document[a0_0x31c149(0x179)](a0_0x31c149(0x192));function handleVisibilityChange(_0x47491e){const _0x3bd6ba=a0_0x31c149;document[_0x3bd6ba(0x14e)]===_0x3bd6ba(0x183)||_0x47491e?.[_0x3bd6ba(0x14a)]===_0x3bd6ba(0x187)||_0x47491e?.['persisted']?(pauseGame(),canvas[_0x3bd6ba(0x12f)]['add'](_0x3bd6ba(0x163))):(setTimeout(()=>{const _0x425a7d=_0x3bd6ba;canvas[_0x425a7d(0x12f)][_0x425a7d(0x169)](_0x425a7d(0x163));},0x258),controlSetting['classList'][_0x3bd6ba(0x14c)](_0x3bd6ba(0x163))&&resumeGame());}async function statusShow(){const _0xc4241e=a0_0x31c149;document[_0xc4241e(0x184)](_0xc4241e(0x16a),handleVisibilityChange),document['addEventListener'](_0xc4241e(0x135),handleVisibilityChange),window['addEventListener'](_0xc4241e(0x187),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x1be664[_0xc4241e(0x142)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0xc4241e(0x13b)](_0xc4241e(0x158)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x14f9eb=a0_0x31c149;await ledSave(_0x14f9eb(0x154)),await Module[_0x14f9eb(0x16e)](0x0),await Module[_0x14f9eb(0x17f)](),await screenShot(0x0),console[_0x14f9eb(0x151)](_0x14f9eb(0x147)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x2b8ce6=a0_0x31c149,_0x5ba391=localStorage[_0x2b8ce6(0x13b)](_0x2b8ce6(0x141)),_0x11d122=_0x5ba391['replace'](_0x2b8ce6(0x16b),_0x2b8ce6(0x18f)),_0x15acd3=localStorage['getItem'](_0x2b8ce6(0x172)),_0x4f76df=localStorage[_0x2b8ce6(0x13b)](_0x5ba391+'_imageState0'),_0x2abfc6=localStorage[_0x2b8ce6(0x13b)](_0x5ba391+_0x2b8ce6(0x13a));if(navigator[_0x2b8ce6(0x133)]){if(_0x15acd3){await ledSave(_0x2b8ce6(0x166)),await delay(0x3e8),await dpUploadFile(_0x11d122,Module[_0x2b8ce6(0x18b)](_0x2b8ce6(0x167)+_0x11d122));if(_0x4f76df!==null){const _0x8b0d47=_0x4f76df+'\x0a\x0a'+_0x2abfc6,_0x2d61cc=new Blob([_0x8b0d47],{'type':_0x2b8ce6(0x15e)});await dpUploadFile(_0x5ba391+_0x2b8ce6(0x144),_0x2d61cc);}else console[_0x2b8ce6(0x151)](_0x2b8ce6(0x164));await lockNoti('',_0x2b8ce6(0x15a)+ ++countUpload+'\x20time(s)',0x7d0);}else console['log'](_0x2b8ce6(0x136));}else console[_0x2b8ce6(0x151)](_0x2b8ce6(0x157));}function startTimer(){let [_0x42e61e,_0x14ca28,_0x7d00fa,_0x4c31b7,_0xfee8f1]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x2cb750=a0_0x5ad2;_0x7d00fa++,_0x4c31b7++,_0xfee8f1++;if(_0x7d00fa===0x3c)[_0x7d00fa,_0x14ca28]=[0x0,_0x14ca28+0x1];if(_0x14ca28===0x3c)[_0x14ca28,_0x42e61e]=[0x0,_0x42e61e+0x1];document[_0x2cb750(0x179)](_0x2cb750(0x134))[_0x2cb750(0x194)]=_0x42e61e+'h'+_0x14ca28[_0x2cb750(0x17b)]()[_0x2cb750(0x156)](0x2,'0')+'.'+_0x7d00fa['toString']()[_0x2cb750(0x156)](0x2,'0');_0x4c31b7===0x3c&&(saveStatePeriodically(),_0x4c31b7=0x0);;_0x4c31b7===0xe10&&(saveStateInCloud(),_0xfee8f1=0x0);;},0x3e8);}export async function uploadGame(_0x3b7e3c){const _0xd7d1dc=a0_0x31c149,_0x503ef3=_0x3b7e3c[_0xd7d1dc(0x150)][0x0];Module[_0xd7d1dc(0x191)](_0x503ef3,()=>{const _0x430bea=_0xd7d1dc;Module[_0x430bea(0x17f)]();});}export async function loadGame(_0x5799da){const _0x1c4536=a0_0x31c149,_0x2f432f=_0x5799da[_0x1c4536(0x171)](/\.(gba|gbc|gb|zip)$/,_0x1c4536(0x18f)),_0x4ad5b0=Module[_0x1c4536(0x155)]();intro[_0x1c4536(0x12f)]['add'](_0x1c4536(0x195)),errorLogElements[0x0][_0x1c4536(0x185)][_0x1c4536(0x149)]='0',ingame['classList'][_0x1c4536(0x169)](_0x1c4536(0x195)),_0x5799da[_0x1c4536(0x181)](_0x1c4536(0x165))||_0x5799da['endsWith'](_0x1c4536(0x140))?(canvas['classList'][_0x1c4536(0x186)](_0x1c4536(0x15b)),areaTrans[_0x1c4536(0x12f)][_0x1c4536(0x186)](_0x1c4536(0x14d)),localStorage[_0x1c4536(0x178)](_0x1c4536(0x175),'0,0,'+(window[_0x1c4536(0x188)]-0xe6)+','+(window[_0x1c4536(0x188)]-0xe6)*0x9/0xa)):localStorage[_0x1c4536(0x178)](_0x1c4536(0x175),_0x1c4536(0x196)+(window['innerWidth']-0x96)+','+(window[_0x1c4536(0x188)]-0x96)*0x2/0x3),_0x4ad5b0['includes'](_0x2f432f)?(await Module[_0x1c4536(0x18d)](_0x1c4536(0x153)+_0x5799da),confirm(_0x1c4536(0x130))&&(await Module[_0x1c4536(0x160)](0x0),localStorage[_0x1c4536(0x178)](_0x1c4536(0x141),_0x5799da),console[_0x1c4536(0x151)](_0x5799da))):(await Module[_0x1c4536(0x18d)](_0x1c4536(0x153)+_0x5799da),localStorage[_0x1c4536(0x178)]('gameName',_0x5799da)),await statusShow();}export async function saveState(_0x242bb5){const _0x15f540=a0_0x31c149;await Module[_0x15f540(0x16e)](_0x242bb5),await Module[_0x15f540(0x17f)]();}export async function loadState(_0x3aea7d){const _0x217c84=a0_0x31c149;await Module[_0x217c84(0x160)](_0x3aea7d);}export async function downloadFile(_0x557bf6,_0x32d2b0){const _0x549719=a0_0x31c149,_0x35fe8a=Module[_0x549719(0x18b)](_0x557bf6),_0x1c3be5=document['createElement']('a');document[_0x549719(0x17c)][_0x549719(0x13f)](_0x1c3be5),_0x1c3be5[_0x549719(0x16c)]=_0x32d2b0;const _0x596915=new Blob([_0x35fe8a],{'type':_0x549719(0x173)});_0x1c3be5[_0x549719(0x17a)]=URL['createObjectURL'](_0x596915),_0x1c3be5[_0x549719(0x132)](),URL['revokeObjectURL'](_0x596915),_0x1c3be5[_0x549719(0x169)]();}export function downloadFileInCloud(_0x268893){const _0x56b245=a0_0x31c149,_0x4983d5=Module[_0x56b245(0x18b)](_0x268893);return _0x4983d5;}export async function uploadFile(_0x11b913){const _0x489d2d=a0_0x31c149,_0x16677a=_0x11b913[_0x489d2d(0x150)][0x0];Module[_0x489d2d(0x18e)](_0x16677a,()=>{const _0x23a641=_0x489d2d;Module[_0x23a641(0x17f)]();});}function a0_0x7ed3(){const _0x31de18=['loadState','SDL2','Error\x20uploadSavSta:','visible','No\x20screenshot!','.gbc','#E0C068','/data/states/','uploadCheats','remove','pagehide','.gba','download','Error\x20uploadCheat:','saveState','then','FSInit','replace','uId','application/octet-stream','Paused!','screenSize','deleteFile','1308XmJxEm','setItem','getElementById','href','toString','body','error','setFastForwardMultiplier','FSSync','_dateState','endsWith','listGames','hidden','addEventListener','style','add','beforeunload','innerWidth','27WqNMbU','2073264SyjGYh','downloadFile','pauseGame','loadGame','uploadSaveOrSaveState','.ss0','buttonPress','uploadRom','control-setting','name','textContent','disable','0,0,','classList','Do\x20you\x20want\x20to\x20load\x20save\x20state?','2273112jtMpPB','click','onLine','timer','visibilitychange','Unable\x20to\x20upload\x20to\x20Cloud!','now','2XUsdEH','_imageState','_dateState0','getItem','buttonUnpress','2171712LlgMKj','fileSize','appendChild','.gb','gameName','turboF','editFileName','_slot0.txt','849280aOdvyT','.png','Auto\x20save\x20','Off','bottom','type','709756WJaVlM','contains','gbc1','visibilityState','529670NuweDt','files','log','/data/screenshots/','/data/games/','#20A5A6','listStates','padStart','Online!','slotStateSaved','23653RcSIUk','Cloud\x20upload\x20','gbc','listSaves','_savedCheats','text/plain','autoLoadCheats'];a0_0x7ed3=function(){return _0x31de18;};return a0_0x7ed3();}export async function editFile(_0x2dd34e,_0x496d2b,_0x4f409a){const _0x4f8e6f=a0_0x31c149;await Module[_0x4f8e6f(0x143)](_0x2dd34e,_0x496d2b,_0x4f409a),await Module[_0x4f8e6f(0x17f)]();}export async function deleteFile(_0xd5a6e3){const _0x5a67cd=a0_0x31c149;await Module[_0x5a67cd(0x176)](_0xd5a6e3),await Module[_0x5a67cd(0x17f)]();}export function listGame(){const _0x3631b8=a0_0x31c149,_0x318ddd=Module[_0x3631b8(0x182)]();return _0x318ddd;}export function listSave(){const _0x374b93=a0_0x31c149,_0x36dbdf=Module[_0x374b93(0x15c)]();return _0x36dbdf;}export function listState(){const _0x3908a2=a0_0x31c149,_0x44f1bc=Module[_0x3908a2(0x155)]();return _0x44f1bc;}export function listCheat(){const _0x140244=Module['listCheats']();return _0x140244;}export function listScreenshot(){const _0x59f744=Module['listScreenshots']();return _0x59f744;}export function fileSize(_0x4d4643){const _0xdd9b70=a0_0x31c149,_0x39bb25=Module[_0xdd9b70(0x13e)](_0x4d4643);return _0x39bb25;}export async function uploadCheat(_0x44b0a3){const _0x4c9923=a0_0x31c149;try{const _0x23d3f9=_0x44b0a3[_0x4c9923(0x150)][0x0];await Module[_0x4c9923(0x168)](_0x23d3f9,()=>{const _0xb0bae=_0x4c9923;console['log']('Cheat\x20uploaded\x20successfully:',_0x23d3f9[_0xb0bae(0x193)]),localStorageFile(),Module['FSSync']();});}catch(_0x2ed330){console[_0x4c9923(0x17d)](_0x4c9923(0x16d),_0x2ed330);}}export async function uploadSavSta(_0x1de075){const _0xb585eb=a0_0x31c149;try{const _0x1a0e11=_0x1de075[_0xb585eb(0x150)][0x0];await Module[_0xb585eb(0x18e)](_0x1a0e11,()=>{const _0x3e0821=_0xb585eb;console[_0x3e0821(0x151)]('Save/State\x20uploaded\x20successfully:',_0x1a0e11[_0x3e0821(0x193)]),localStorageFile(),Module[_0x3e0821(0x17f)]();});}catch(_0x4c1d24){console[_0xb585eb(0x17d)](_0xb585eb(0x162),_0x4c1d24);}}export async function uploadSaveOrSaveState(_0x53ca79){const _0x365a25=a0_0x31c149;Module[_0x365a25(0x18e)](_0x53ca79,()=>{const _0x53cd4b=_0x365a25;localStorageFile(),Module[_0x53cd4b(0x17f)]();});}export async function resumeGame(){const _0x30c52a=a0_0x31c149;Module['resumeGame'](),Module[_0x30c52a(0x161)](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x3d57fd=a0_0x31c149;Module[_0x3d57fd(0x18c)](),Module[_0x3d57fd(0x161)](),notiMessage(_0x3d57fd(0x174),0x7d0);}export async function buttonPress(_0x3b3967){const _0xcc9e89=a0_0x31c149;Module[_0xcc9e89(0x190)](_0x3b3967);}export async function buttonUnpress(_0x32dadc){const _0x10af78=a0_0x31c149;Module[_0x10af78(0x13c)](_0x32dadc);}export async function screenShot(_0x57ea8a){const _0x176e7d=a0_0x31c149,_0x3758cc=localStorage[_0x176e7d(0x13b)](_0x176e7d(0x141)),_0x1b18e1=_0x3758cc[_0x176e7d(0x171)](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x1b18e1+_0x57ea8a+_0x176e7d(0x146)),await Module[_0x176e7d(0x17f)]();const _0x1fd7b9=await fileToBase64(Module[_0x176e7d(0x18b)](_0x176e7d(0x152)+_0x1b18e1+_0x57ea8a+_0x176e7d(0x146))),_0x46a699=Date[_0x176e7d(0x137)](),_0x1ce57b=formatDateTime(_0x46a699);localStorage['setItem'](_0x3758cc+_0x176e7d(0x180)+_0x57ea8a,_0x1ce57b),localStorage[_0x176e7d(0x178)](_0x3758cc+_0x176e7d(0x139)+_0x57ea8a,_0x1fd7b9);}export async function captureOCR(_0x338b7b){const _0x5e6da3=a0_0x31c149;Module['screenshot'](_0x338b7b);const _0x2c3771=Module[_0x5e6da3(0x18b)](_0x5e6da3(0x152)+_0x338b7b);return _0x2c3771;}export async function setFastForwardMultiplier(_0x5e2890){const _0x2c4c00=a0_0x31c149;Module[_0x2c4c00(0x17e)](_0x5e2890);}export function uploadCheats(_0x26c78b,_0x4e6c4e,_0x2f6f91,_0x92fb00,_0x413022){const _0x230b31=a0_0x31c149;Module[_0x230b31(0x168)](_0x26c78b,()=>{const _0x22edcf=_0x230b31;Module[_0x22edcf(0x15f)](),setTimeout(()=>{const _0x379fb1=_0x22edcf;Module[_0x379fb1(0x17f)]();},0x1f4),_0x92fb00&&(localStorage[_0x22edcf(0x178)](_0x4e6c4e+_0x22edcf(0x15d),_0x2f6f91),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x413022[_0x22edcf(0x194)]=localStorage[_0x22edcf(0x13b)](_0x4e6c4e+'_savedCheats'||_0x22edcf(0x148));});}