const a0_0x665e2f=a0_0xfd91;(function(_0x4d6199,_0xfaee1){const _0x2441f6=a0_0xfd91,_0x464ce7=_0x4d6199();while(!![]){try{const _0x142844=parseInt(_0x2441f6(0x12d))/0x1*(-parseInt(_0x2441f6(0xdc))/0x2)+parseInt(_0x2441f6(0x10b))/0x3+-parseInt(_0x2441f6(0xd3))/0x4*(-parseInt(_0x2441f6(0x133))/0x5)+parseInt(_0x2441f6(0x10d))/0x6*(parseInt(_0x2441f6(0xc9))/0x7)+-parseInt(_0x2441f6(0xc2))/0x8+-parseInt(_0x2441f6(0xe5))/0x9+parseInt(_0x2441f6(0x106))/0xa;if(_0x142844===_0xfaee1)break;else _0x464ce7['push'](_0x464ce7['shift']());}catch(_0x2c795c){_0x464ce7['push'](_0x464ce7['shift']());}}}(a0_0xef89,0x1d6e8));import a0_0x3d8d06 from'../core/mgba.js';import*as a0_0x4468fb from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const Module={'canvas':document['getElementById'](a0_0x665e2f(0x117))};function initializeCore(_0x2c4aed,_0x1d1781){const _0x4aa967=a0_0x665e2f;_0x2c4aed(_0x1d1781)[_0x4aa967(0x13c)](function(_0x2c9cec){const _0x4ab44f=_0x4aa967;_0x2c9cec[_0x4ab44f(0xe2)]();});}initializeCore(a0_0x3d8d06,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x665e2f(0x11d)](a0_0x665e2f(0x117)),controlSetting=document[a0_0x665e2f(0x11d)]('control-setting');function handleVisibilityChange(_0xe3c9ba){const _0x65bc83=a0_0x665e2f;document[_0x65bc83(0x12b)]===_0x65bc83(0xee)||_0xe3c9ba?.[_0x65bc83(0xed)]===_0x65bc83(0x104)||_0xe3c9ba?.[_0x65bc83(0xec)]?(Module[_0x65bc83(0x120)](),pauseGame(),canvas[_0x65bc83(0xef)]['add'](_0x65bc83(0xc4))):(setTimeout(()=>{const _0x17bf27=_0x65bc83;canvas[_0x17bf27(0xef)][_0x17bf27(0x12a)](_0x17bf27(0xc4));},0x258),controlSetting['classList'][_0x65bc83(0xd8)](_0x65bc83(0xc4))&&resumeGame());}async function statusShow(){const _0x119cb1=a0_0x665e2f;document[_0x119cb1(0x126)](_0x119cb1(0xf4),handleVisibilityChange),document['addEventListener'](_0x119cb1(0xdf),handleVisibilityChange),window[_0x119cb1(0x126)](_0x119cb1(0x104),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x4468fb[_0x119cb1(0xea)](parseInt(await getData(gameName,'0',_0x119cb1(0x139)))),await led(parseInt(await getData(gameName,'0',_0x119cb1(0x109)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x3b8fb1=a0_0x665e2f;await ledSave(_0x3b8fb1(0x132)),await Module['saveState'](0x0),await Module[_0x3b8fb1(0x120)](),await screenShot(0x0),console[_0x3b8fb1(0xd6)](_0x3b8fb1(0xd2)+ ++countAutoSave+_0x3b8fb1(0x128));}async function saveStateInCloud(){const _0x4695db=a0_0x665e2f,_0x5ee78c=gameName[_0x4695db(0xf3)](/\.(zip|gb|gbc|gba)$/,_0x4695db(0xca)),_0x3fbc39=localStorage['getItem'](_0x4695db(0x105));navigator['onLine']&&(_0x3fbc39&&(await ledSave(_0x4695db(0xe1)),await delay(0x3e8),await dpUploadFile(_0x5ee78c,Module[_0x4695db(0x127)](_0x4695db(0xd1)+_0x5ee78c),'state'),await lockNoti('',_0x4695db(0x102)+ ++countUpload+_0x4695db(0x128),0x7d0)));}function startTimer(){let [_0x14021f,_0x715c32,_0x5763bb,_0x5ebbcb,_0x1c42d9]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x4ba206=a0_0xfd91;_0x5763bb++,_0x5ebbcb++,_0x1c42d9++;if(_0x5763bb===0x3c)[_0x5763bb,_0x715c32]=[0x0,_0x715c32+0x1];if(_0x715c32===0x3c)[_0x715c32,_0x14021f]=[0x0,_0x14021f+0x1];document[_0x4ba206(0x11d)]('timer')[_0x4ba206(0x10a)]=_0x14021f+'h'+_0x715c32['toString']()[_0x4ba206(0x110)](0x2,'0')+'.'+_0x5763bb[_0x4ba206(0x131)]()[_0x4ba206(0x110)](0x2,'0');_0x5ebbcb===0x3c&&(saveStatePeriodically(),_0x5ebbcb=0x0);;_0x1c42d9===0x708&&(saveStateInCloud(),_0x1c42d9=0x0);;},0x3e8);}export async function uploadGame(_0x521e12){const _0x51b600=a0_0x665e2f,_0xe00df9=_0x521e12[_0x51b600(0x140)][0x0];Module['uploadRom'](_0xe00df9,()=>{const _0x1149d4=_0x51b600;Module[_0x1149d4(0x120)]();});}export async function loadGame(_0x161ecd){const _0x36aed8=a0_0x665e2f,_0x365bb8=_0x161ecd[_0x36aed8(0xf3)](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x459994=Module[_0x36aed8(0xce)](_0x36aed8(0x103))[_0x36aed8(0x12c)](_0x131cc1=>_0x131cc1!=='.'&&_0x131cc1!=='..');intro[_0x36aed8(0xef)][_0x36aed8(0xf8)](_0x36aed8(0x12e)),errorLogElements[0x0]['style'][_0x36aed8(0xe9)]='0',ingame[_0x36aed8(0xef)][_0x36aed8(0x12a)](_0x36aed8(0x12e)),_0x161ecd[_0x36aed8(0xe0)](_0x36aed8(0xe7))||_0x161ecd[_0x36aed8(0xe0)](_0x36aed8(0xd0))?(canvas[_0x36aed8(0xef)][_0x36aed8(0xf8)]('gbc'),areaTrans[_0x36aed8(0xef)]['add']('gbc1'),localStorage['setItem'](_0x36aed8(0x129),_0x36aed8(0x13e)+(window[_0x36aed8(0x11a)]-0xe6)+','+(window[_0x36aed8(0x11a)]-0xe6)*0x9/0xa)):localStorage[_0x36aed8(0x100)](_0x36aed8(0x129),_0x36aed8(0x13e)+(window['innerWidth']-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x459994[_0x36aed8(0xf7)](_0x365bb8)?(await Module['loadGame']('/data/games/'+_0x161ecd),confirm(_0x36aed8(0x10f))&&(await delay(0x64),await Module[_0x36aed8(0x107)](0x0),await shaderData())):(await Module[_0x36aed8(0x101)]('/data/games/'+_0x161ecd),await shaderData()),await statusShow();}export async function saveState(_0x32611e){const _0x1f2efb=a0_0x665e2f;await Module[_0x1f2efb(0x119)](_0x32611e);}export async function loadState(_0x17a2cd){const _0x20f0aa=a0_0x665e2f;await Module[_0x20f0aa(0x107)](_0x17a2cd);}export async function downloadFile(_0xa437fc,_0x5274a5){const _0x2203f8=a0_0x665e2f,_0x1333bf=Module[_0x2203f8(0x127)](_0xa437fc),_0x4fdf09=document['createElement']('a');document['body'][_0x2203f8(0xe4)](_0x4fdf09),_0x4fdf09[_0x2203f8(0xf1)]=_0x5274a5;const _0x1f5167=new Blob([_0x1333bf],{'type':_0x2203f8(0x10e)});_0x4fdf09[_0x2203f8(0x108)]=URL[_0x2203f8(0xf2)](_0x1f5167),_0x4fdf09[_0x2203f8(0x122)](),URL[_0x2203f8(0xdb)](_0x1f5167),_0x4fdf09['remove']();}export function downloadFileInCloud(_0x51c7e5){const _0x272840=a0_0x665e2f;try{const _0x47a21c=Module[_0x272840(0x127)](_0x51c7e5);return _0x47a21c;}catch(_0x5efb14){return null;}}function a0_0xfd91(_0x3d42f6,_0x575e83){const _0xef8992=a0_0xef89();return a0_0xfd91=function(_0xfd910f,_0x461ecc){_0xfd910f=_0xfd910f-0xc2;let _0x12bd27=_0xef8992[_0xfd910f];return _0x12bd27;},a0_0xfd91(_0x3d42f6,_0x575e83);}export async function uploadFileInCloud(_0x2257b2){const _0x10901f=a0_0x665e2f;Module[_0x10901f(0xdd)](_0x2257b2,async()=>{const _0x4d689e=_0x10901f;localStorageFile(),await Module[_0x4d689e(0x120)]();});}export async function uploadFile(_0x3f863f){const _0x120c31=a0_0x665e2f,_0x4c2b59=_0x3f863f[_0x120c31(0x140)][0x0];Module[_0x120c31(0xdd)](_0x4c2b59,async()=>{const _0x40076a=_0x120c31;localStorageFile(),await Module[_0x40076a(0x120)]();});}export async function editFile(_0x1c60fd,_0x581fd8,_0x195329){const _0x481ec1=a0_0x665e2f;await Module[_0x481ec1(0xc5)](_0x1c60fd,_0x581fd8,_0x195329);}export async function deleteFile(_0x35848b){const _0x2913e8=a0_0x665e2f;try{return await Module[_0x2913e8(0xfd)](_0x35848b),!![];}catch(_0x59e312){return console[_0x2913e8(0xff)](_0x35848b),null;}}export function listFiles(_0x42ebae){const _0x1c03cc=a0_0x665e2f,_0x1d19e7=Module[_0x1c03cc(0xce)](_0x42ebae)['filter'](_0x10a691=>_0x10a691!=='.'&&_0x10a691!=='..');return _0x1d19e7;}export function listGame(){const _0x505221=a0_0x665e2f,_0x2f032a=Module[_0x505221(0xeb)]()[_0x505221(0x12c)](_0x42ab2c=>_0x42ab2c!=='.'&&_0x42ab2c!=='..');return _0x2f032a;}export function listSave(){const _0x4d5a27=a0_0x665e2f,_0x3e46db=Module[_0x4d5a27(0x135)]()[_0x4d5a27(0x12c)](_0x19bb48=>_0x19bb48!=='.'&&_0x19bb48!=='..');return _0x3e46db;}export function listState(){const _0x8e513c=a0_0x665e2f,_0x4ff13a=Module['listStates']()[_0x8e513c(0x12c)](_0x1bf3b6=>_0x1bf3b6!=='.'&&_0x1bf3b6!=='..');return _0x4ff13a;}export function listCheat(){const _0x9d25dd=a0_0x665e2f,_0x332ad7=Module[_0x9d25dd(0x10c)]()[_0x9d25dd(0x12c)](_0x367353=>_0x367353!=='.'&&_0x367353!=='..');return _0x332ad7;}export function listScreenshot(){const _0x154d82=a0_0x665e2f,_0x2970db=Module[_0x154d82(0x130)]()[_0x154d82(0x12c)](_0x35f1f3=>_0x35f1f3!=='.'&&_0x35f1f3!=='..');return _0x2970db;}export function fileSize(_0x36ac9b){const _0xe53bc1=a0_0x665e2f,_0x211d29=Module[_0xe53bc1(0xe6)](_0x36ac9b);return _0x211d29;}export async function resumeGame(){const _0x575f04=a0_0x665e2f;Module[_0x575f04(0xf9)](),Module['SDL2'](),notiMessage(_0x575f04(0x115),0x7d0);}export async function pauseGame(){const _0x20832f=a0_0x665e2f;Module[_0x20832f(0xfe)](),Module[_0x20832f(0x121)](),notiMessage(_0x20832f(0xf6),0x7d0);}export async function buttonPress(_0x29742f){const _0x54c01f=a0_0x665e2f;Module[_0x54c01f(0x11e)](_0x29742f);}export async function buttonUnpress(_0x3a3c22){const _0x4cf490=a0_0x665e2f;Module[_0x4cf490(0x118)](_0x3a3c22);}export async function screenShot(_0x512598){const _0x58c8a9=a0_0x665e2f,_0x361fb1=gameName[_0x58c8a9(0xf3)](/\.(gba|gbc|gb|zip)$/,'_'+_0x512598+_0x58c8a9(0xfc)),_0x44a7c0=await getData(gameName,_0x512598,_0x58c8a9(0xd7))||'';console[_0x58c8a9(0xd6)](_0x44a7c0),await Module[_0x58c8a9(0x111)](_0x361fb1),await setData(gameName,_0x512598,'saveTime',formatDateTime(Date[_0x58c8a9(0x124)]()),_0x44a7c0);}export async function dowloadScreenShot(_0x544795){const _0x2ab0b7=a0_0x665e2f;try{const _0xc4501f=await fileToBase64(Module[_0x2ab0b7(0x127)](_0x544795));return _0xc4501f;}catch{}}export async function captureOCR(_0x295130){const _0x4a6f70=a0_0x665e2f;Module['screenshot'](_0x295130);const _0xfb9426=Module[_0x4a6f70(0x127)](_0x4a6f70(0x11b)+_0x295130);return _0xfb9426;}export async function setFastForwardMultiplier(_0x3c35f9){const _0x386f3d=a0_0x665e2f;Module[_0x386f3d(0x12f)](_0x3c35f9);}function a0_0xef89(){const _0x35c64e=['style','.png','deleteFile','pauseGame','error','setItem','loadGame','Cloud\x20upload\x20','states','beforeunload','uId','974430kAiren','loadState','href','slotStateSaved','textContent','81147aRCpqx','listCheats','5478vLWrcd','application/octet-stream','Do\x20you\x20want\x20to\x20load\x20save\x20state?','padStart','screenshot','led0','substring','led01','Resumed!','0.4','canvas','buttonUnpress','saveState','innerWidth','/data/screenshots/','autoLoadCheats','getElementById','buttonPress','split','FSSync','SDL2','click','\x20:\x20','now','trim','addEventListener','downloadFile','\x20time(s)','screenSize','remove','visibilityState','filter','22VpSSwq','disable','setFastForwardMultiplier','listScreenshots','toString','#20A5A6','282085slhcmV','toggleRewind','listSaves','Error\x20ledSave:','length','encode','turboState','join','lastIndexOf','then','opacity','0,0,','entries','files','1011296grTquX','fill','visible','editFileName','tEXtComment\x00','charCodeAt','led07','1379nuSvOR','.ss0','led06','rgba(245,\x20232,\x20209,\x200.4)','noti-mess','listFiles','indexOf','.gb','/data/states/','Auto\x20save\x20','12czHvpR','led02','led05','log','All','contains','\x20|\x20','image/png','revokeObjectURL','17748nitHUZ','uploadAll','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','visibilitychange','endsWith','#E0C068','FSInit','exec','appendChild','282708fwLmfU','fileSize','.gbc','led03','bottom','turboF','listRoms','persisted','type','hidden','classList','led00','download','createObjectURL','replace','pagehide','concat','Paused!','includes','add','resumeGame','led04'];a0_0xef89=function(){return _0x35c64e;};return a0_0xef89();}export async function uploadCheats(_0x1d7f82){const _0x4446d9=a0_0x665e2f;Module[_0x4446d9(0x11c)](),Module[_0x4446d9(0xdd)](_0x1d7f82,async()=>{});}export function setVolume(_0x3796cf){Module['setVolume'](_0x3796cf);}export async function setData(_0x2d0b85,_0x33311b,_0x35b8e4,_0x5e17e9,_0x3426b4=''){const _0xef9942=a0_0x665e2f,_0x42c7a9=_0x2d0b85[_0xef9942(0xf3)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0xe75937=_0xef9942(0x11b)+_0x42c7a9+'_'+_0x33311b+_0xef9942(0xfc);let _0x332803;try{_0x332803=await fileToBase64(Module[_0xef9942(0x127)](_0xe75937));}catch(_0x33c32d){await Module[_0xef9942(0x111)](_0x42c7a9+'_'+_0x33311b+_0xef9942(0xfc)),await delay(0xc8),_0x332803=await fileToBase64(Module['downloadFile'](_0xe75937));}let _0x254cc2=atob(_0x332803[_0xef9942(0x11f)](',')[0x1]),_0x1c46c6=_0xef9942(0xc6),_0x1c36e9=_0x254cc2[_0xef9942(0xcf)](_0x1c46c6),_0x2a2372={};if(_0x1c36e9!==-0x1||_0x3426b4['trim']()!==''){let _0x506bee=_0x1c36e9!==-0x1?_0x254cc2['substring'](_0x1c36e9+_0x1c46c6[_0xef9942(0x137)]):_0x3426b4,_0x3259c6=/(\w+)\s*:\s*([^|]*)/g,_0x506149;while((_0x506149=_0x3259c6[_0xef9942(0xe3)](_0x506bee))!==null){_0x2a2372[_0x506149[0x1][_0xef9942(0x125)]()]=_0x506149[0x2][_0xef9942(0x125)]();}_0x1c36e9!==-0x1&&(_0x254cc2=_0x254cc2[_0xef9942(0x113)](0x0,_0x1c36e9));}_0x2a2372[_0x35b8e4]=_0x5e17e9;let _0x32b9ab=Object[_0xef9942(0x13f)](_0x2a2372)['map'](([_0x5baae8,_0x5962fc])=>_0x5baae8+_0xef9942(0x123)+_0x5962fc)[_0xef9942(0x13a)](_0xef9942(0xd9)),_0x147871=new TextEncoder()[_0xef9942(0x138)](_0x1c46c6+'\x20'+_0x32b9ab),_0x572984=new Uint8Array([..._0x254cc2]['map'](_0x13f4e5=>_0x13f4e5[_0xef9942(0xc7)](0x0))[_0xef9942(0xf5)]([..._0x147871])),_0x3231ad=new File([new Blob([_0x572984],{'type':_0xef9942(0xda)})],_0x42c7a9+'_'+_0x33311b+_0xef9942(0xfc),{'type':_0xef9942(0xda)});Module[_0xef9942(0xdd)](_0x3231ad,async()=>{});}export async function getData(_0x1b8494,_0x2e187f,_0x2206ac){const _0x571c2e=a0_0x665e2f;try{const _0x46a513=_0x1b8494[_0x571c2e(0xf3)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x1b736c=_0x571c2e(0x11b)+_0x46a513+'_'+_0x2e187f+'.png';let _0x2d8a49;try{_0x2d8a49=await fileToBase64(Module[_0x571c2e(0x127)](_0x1b736c));}catch(_0x350068){return null;}let _0x5814f9=atob(_0x2d8a49[_0x571c2e(0x11f)](',')[0x1]),_0x37bcd4=_0x571c2e(0xc6),_0x396815=_0x5814f9[_0x571c2e(0xcf)](_0x37bcd4);if(_0x396815!==-0x1){let _0x5d5103=_0x5814f9[_0x571c2e(0x113)](_0x396815+_0x37bcd4[_0x571c2e(0x137)]);if(_0x2206ac==='All')return _0x5d5103[_0x571c2e(0x125)]();let _0x11d814=new RegExp(_0x2206ac+_0x571c2e(0xde)),_0x514c75=_0x5d5103['match'](_0x11d814);if(_0x514c75)return _0x514c75[0x1]['trim']();}}catch(_0x220d72){return console[_0x571c2e(0xff)]({'romName':_0x1b8494,'slot':_0x2e187f,'type':_0x2206ac}),null;}}export async function ledSave(_0x5bd849){const _0x2be336=a0_0x665e2f,_0x5a85db=parseInt(await getData(gameName,'0',_0x2be336(0x109))),_0x4583aa=_0x5a85db===0x1?_0x2be336(0x114):_0x5a85db===0x2?_0x2be336(0xd4):_0x5a85db===0x3?_0x2be336(0xe8):_0x5a85db===0x4?_0x2be336(0xfa):_0x5a85db===0x5?_0x2be336(0xd5):_0x5a85db===0x6?_0x2be336(0xcb):_0x5a85db===0x7?_0x2be336(0xc8):_0x2be336(0xf0);try{for(let _0xa052f3=0x0;_0xa052f3<=0x7;_0xa052f3++){document['getElementById'](_0x2be336(0x112)+_0xa052f3)['style'][_0x2be336(0xc3)]='rgba(245,\x20232,\x20209,\x200.4)';}await delay(0x3e8);for(let _0x49e5d2=0x0;_0x49e5d2<=0x7;_0x49e5d2++){document[_0x2be336(0x11d)](_0x2be336(0x112)+_0x49e5d2)[_0x2be336(0xfb)]['fill']=_0x2be336(0xcc);}document[_0x2be336(0x11d)](_0x4583aa)['style']['fill']=_0x5bd849;}catch(_0x4b7cb6){console[_0x2be336(0xff)](_0x2be336(0x136),_0x4b7cb6);}};export async function notiMessage(_0x2246b6,_0x536d82,_0x3a90a8=![]){const _0x41f8ab=a0_0x665e2f;var _0x1489ba=document['getElementById'](_0x41f8ab(0xcd));const _0x43bd44=parseInt(await getData(gameName,'0',_0x41f8ab(0x109)))||0x0;_0x1489ba[_0x41f8ab(0xfb)][_0x41f8ab(0x13d)]===_0x41f8ab(0x116)&&(clearTimeout(messageTimeout),_0x1489ba[_0x41f8ab(0xfb)]['opacity']='0'),_0x1489ba['textContent']=_0x2246b6,_0x1489ba[_0x41f8ab(0xfb)][_0x41f8ab(0x13d)]=_0x41f8ab(0x116),messageTimeout=setTimeout(()=>{const _0x476671=_0x41f8ab;_0x1489ba[_0x476671(0x10a)]='['+_0x43bd44+']\x20'+gameName[_0x476671(0x113)](0x0,gameName[_0x476671(0x13b)]('.')),_0x1489ba[_0x476671(0xfb)]['opacity']=_0x476671(0x116);},_0x536d82),_0x3a90a8&&(canvas[_0x41f8ab(0xef)][_0x41f8ab(0xf8)](_0x41f8ab(0xc4)),setTimeout(()=>{const _0x149bc1=_0x41f8ab;canvas['classList'][_0x149bc1(0x12a)](_0x149bc1(0xc4));},0x258));}export async function FSSync(){const _0x227b88=a0_0x665e2f;Module[_0x227b88(0x120)]();}export function rewind(_0x3a1c40){const _0x317592=a0_0x665e2f;Module[_0x317592(0x134)](_0x3a1c40);}