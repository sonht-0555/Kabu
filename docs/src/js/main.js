const a0_0x1cb804=a0_0x434a;(function(_0x3c255e,_0x31bd73){const _0x5332d1=a0_0x434a,_0x342e88=_0x3c255e();while(!![]){try{const _0x518612=parseInt(_0x5332d1(0x119))/0x1*(-parseInt(_0x5332d1(0x12b))/0x2)+parseInt(_0x5332d1(0x121))/0x3+parseInt(_0x5332d1(0x154))/0x4*(parseInt(_0x5332d1(0x11f))/0x5)+parseInt(_0x5332d1(0x110))/0x6*(-parseInt(_0x5332d1(0x149))/0x7)+parseInt(_0x5332d1(0x153))/0x8+-parseInt(_0x5332d1(0x11e))/0x9*(parseInt(_0x5332d1(0x104))/0xa)+parseInt(_0x5332d1(0xfb))/0xb;if(_0x518612===_0x31bd73)break;else _0x342e88['push'](_0x342e88['shift']());}catch(_0x4592a0){_0x342e88['push'](_0x342e88['shift']());}}}(a0_0xede7,0x8bb0e));import a0_0x2bcdff from'../core/mgba.js';import*as a0_0x4e6bfd from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x1cb804(0xff)](a0_0x1cb804(0x117))};function initializeCore(_0x2d49a7,_0x202aa7){_0x2d49a7(_0x202aa7)['then'](function(_0x15cc51){const _0x5a1944=a0_0x434a;_0x15cc51[_0x5a1944(0x142)]();});}initializeCore(a0_0x2bcdff,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x1cb804(0xff)](a0_0x1cb804(0x117)),savedTurboState=localStorage['getItem']('turboState'),controlSetting=document[a0_0x1cb804(0xff)](a0_0x1cb804(0x137));function a0_0x434a(_0x1da560,_0x15340f){const _0xede781=a0_0xede7();return a0_0x434a=function(_0x434a3d,_0x178a97){_0x434a3d=_0x434a3d-0xf7;let _0x2bceda=_0xede781[_0x434a3d];return _0x2bceda;},a0_0x434a(_0x1da560,_0x15340f);}function handleVisibilityChange(_0x5ccfc0){const _0x1c97f9=a0_0x1cb804;document[_0x1c97f9(0x13f)]===_0x1c97f9(0x107)||_0x5ccfc0?.['type']===_0x1c97f9(0x136)||_0x5ccfc0?.[_0x1c97f9(0x134)]?(pauseGame(),canvas['classList'][_0x1c97f9(0x138)](_0x1c97f9(0xfa))):(setTimeout(()=>{canvas['classList']['remove']('visible');},0x258),controlSetting['classList'][_0x1c97f9(0x101)](_0x1c97f9(0xfa))&&resumeGame());}async function statusShow(){const _0x316d93=a0_0x1cb804;document[_0x316d93(0xfc)](_0x316d93(0x10f),handleVisibilityChange),document[_0x316d93(0xfc)](_0x316d93(0x13d),handleVisibilityChange),window[_0x316d93(0xfc)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x4e6bfd['turboF'](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x316d93(0x10c)](_0x316d93(0x116)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x1674c9=a0_0x1cb804;await ledSave(_0x1674c9(0x11b)),await Module[_0x1674c9(0x124)](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x1674c9(0x100)](_0x1674c9(0x114)+ ++countAutoSave+_0x1674c9(0x131));}async function saveStateInCloud(){const _0x37a94f=a0_0x1cb804,_0x270cfa=localStorage[_0x37a94f(0x10c)]('gameName'),_0x4dd6d2=_0x270cfa[_0x37a94f(0x157)]('.gba',_0x37a94f(0x14f)),_0x467c64=localStorage[_0x37a94f(0x10c)](_0x37a94f(0x103)),_0x19093f=localStorage[_0x37a94f(0x10c)](_0x270cfa+'_imageState0'),_0x4fbf9b=localStorage['getItem'](_0x270cfa+'_dateState0');if(navigator[_0x37a94f(0x127)]){if(_0x467c64){await ledSave(_0x37a94f(0x151)),await delay(0x3e8),await dpUploadFile(_0x4dd6d2,Module[_0x37a94f(0x14d)](_0x37a94f(0xfd)+_0x4dd6d2));if(_0x19093f!==null){const _0x421b8c=_0x19093f+'\x0a\x0a'+_0x4fbf9b,_0x2f21a9=new Blob([_0x421b8c],{'type':_0x37a94f(0x113)});await dpUploadFile(_0x270cfa+_0x37a94f(0x120),_0x2f21a9);}else console[_0x37a94f(0x100)]('No\x20screenshot!');await lockNoti('',_0x37a94f(0x139)+ ++countUpload+_0x37a94f(0x131),0x7d0);}else console[_0x37a94f(0x100)](_0x37a94f(0x133));}else console[_0x37a94f(0x100)](_0x37a94f(0x12a));}function startTimer(){let [_0x1529fb,_0x5d88df,_0x333342,_0x2231d0,_0x214ca9]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x5b1bb3=a0_0x434a;_0x333342++,_0x2231d0++,_0x214ca9++;if(_0x333342===0x3c)[_0x333342,_0x5d88df]=[0x0,_0x5d88df+0x1];if(_0x5d88df===0x3c)[_0x5d88df,_0x1529fb]=[0x0,_0x1529fb+0x1];document['getElementById'](_0x5b1bb3(0x146))['textContent']=_0x1529fb+'h'+_0x5d88df[_0x5b1bb3(0x143)]()[_0x5b1bb3(0x12c)](0x2,'0')+'.'+_0x333342[_0x5b1bb3(0x143)]()[_0x5b1bb3(0x12c)](0x2,'0');_0x2231d0===0x3c&&(saveStatePeriodically(),_0x2231d0=0x0);;_0x2231d0===0xe10&&(saveStateInCloud(),_0x214ca9=0x0);;},0x3e8);}export async function uploadGame(_0xd6b52e){const _0xec94ab=a0_0x1cb804,_0x178f8d=_0xd6b52e['files'][0x0];Module[_0xec94ab(0x155)](_0x178f8d,()=>{const _0x520619=_0xec94ab;Module[_0x520619(0x115)]();});}export async function loadGame(_0x909f54){const _0x3d4410=a0_0x1cb804,_0x3f29dc=_0x909f54['replace'](/\.(gba|gbc|gb|zip)$/,_0x3d4410(0x14f)),_0x399c86=Module[_0x3d4410(0x14b)]();intro['classList'][_0x3d4410(0x138)](_0x3d4410(0x10d)),ingame['classList'][_0x3d4410(0xf9)](_0x3d4410(0x10d)),_0x909f54[_0x3d4410(0x122)](_0x3d4410(0x108))||_0x909f54[_0x3d4410(0x122)]('.gb')?(canvas['classList']['add'](_0x3d4410(0x141)),areaTrans[_0x3d4410(0x14a)][_0x3d4410(0x138)]('gbc1'),localStorage[_0x3d4410(0x14c)](_0x3d4410(0x15a),_0x3d4410(0x129)+(window[_0x3d4410(0x152)]-0xe6)+','+(window[_0x3d4410(0x152)]-0xe6)*0x9/0xa)):localStorage[_0x3d4410(0x14c)](_0x3d4410(0x15a),'0,0,'+(window[_0x3d4410(0x152)]-0x96)+','+(window[_0x3d4410(0x152)]-0x96)*0x2/0x3),_0x399c86[_0x3d4410(0x128)](_0x3f29dc)?(await Module[_0x3d4410(0x147)](_0x3d4410(0x112)+_0x909f54),confirm(_0x3d4410(0x10b))&&(await Module[_0x3d4410(0x11a)](0x0),localStorage[_0x3d4410(0x14c)](_0x3d4410(0x105),_0x909f54),console['log'](_0x909f54))):(await Module[_0x3d4410(0x147)](_0x3d4410(0x112)+_0x909f54),localStorage[_0x3d4410(0x14c)](_0x3d4410(0x105),_0x909f54)),await statusShow();}export async function saveState(_0x4beba3){const _0x2c372d=a0_0x1cb804;await Module[_0x2c372d(0x124)](_0x4beba3),await Module[_0x2c372d(0x115)]();}export async function loadState(_0x1f0467){const _0x479da8=a0_0x1cb804;await Module[_0x479da8(0x11a)](_0x1f0467);}export async function downloadFile(_0x5a3708,_0x5ec752){const _0x423181=a0_0x1cb804,_0x3376aa=Module[_0x423181(0x14d)](_0x5a3708),_0x25b309=document[_0x423181(0x10a)]('a');document[_0x423181(0x159)][_0x423181(0xf8)](_0x25b309),_0x25b309[_0x423181(0x135)]=_0x5ec752;const _0x222e49=new Blob([_0x3376aa],{'type':_0x423181(0x158)});_0x25b309[_0x423181(0x109)]=URL['createObjectURL'](_0x222e49),_0x25b309[_0x423181(0x123)](),URL[_0x423181(0x11c)](_0x222e49),_0x25b309[_0x423181(0xf9)]();}export function downloadFileInCloud(_0x2e6263){const _0x3d7cc8=a0_0x1cb804,_0x56e942=Module[_0x3d7cc8(0x14d)](_0x2e6263);return _0x56e942;}export async function uploadFile(_0x1e7f4b){const _0x18c63e=a0_0x1cb804,_0x364d07=_0x1e7f4b[_0x18c63e(0x150)][0x0];Module[_0x18c63e(0x13a)](_0x364d07,()=>{const _0x308bed=_0x18c63e;Module[_0x308bed(0x115)]();});}export async function editFile(_0x3e2264,_0x2b71b3,_0x9206a0){const _0x195201=a0_0x1cb804;await Module['editFileName'](_0x3e2264,_0x2b71b3,_0x9206a0),await Module[_0x195201(0x115)]();}export async function deleteFile(_0x4668a9){const _0x10415e=a0_0x1cb804;await Module['deleteFile'](_0x4668a9),await Module[_0x10415e(0x115)]();}export function listGame(){const _0x409d8c=a0_0x1cb804,_0x4178b6=Module[_0x409d8c(0xf7)]();return _0x4178b6;}export function listSave(){const _0x299177=a0_0x1cb804,_0x1e9ac6=Module[_0x299177(0x144)]();return _0x1e9ac6;}export function listState(){const _0x6977e3=a0_0x1cb804,_0x21cc0d=Module[_0x6977e3(0x14b)]();return _0x21cc0d;}export function listCheat(){const _0x37f938=Module['listCheats']();return _0x37f938;}export function listScreenshot(){const _0xf67686=a0_0x1cb804,_0x3e745e=Module[_0xf67686(0x140)]();return _0x3e745e;}export function fileSize(_0x48376e){const _0x427ef3=a0_0x1cb804,_0x1473ef=Module[_0x427ef3(0x10e)](_0x48376e);return _0x1473ef;}export async function uploadCheat(_0x58b883){const _0x55bf89=a0_0x1cb804;try{const _0x1bcde6=_0x58b883[_0x55bf89(0x150)][0x0];await Module[_0x55bf89(0x13b)](_0x1bcde6,()=>{const _0x9c94c2=_0x55bf89;console[_0x9c94c2(0x100)](_0x9c94c2(0x13e),_0x1bcde6[_0x9c94c2(0x12f)]),localStorageFile(),Module[_0x9c94c2(0x115)]();});}catch(_0x443de0){console[_0x55bf89(0x102)]('Error\x20uploadCheat:',_0x443de0);}}export async function uploadSavSta(_0x2584e7){const _0x23d141=a0_0x1cb804;try{const _0x60548c=_0x2584e7[_0x23d141(0x150)][0x0];await Module[_0x23d141(0x13a)](_0x60548c,()=>{const _0x2c4b82=_0x23d141;console[_0x2c4b82(0x100)](_0x2c4b82(0x12d),_0x60548c['name']),localStorageFile(),Module[_0x2c4b82(0x115)]();});}catch(_0x210e01){console['error'](_0x23d141(0x132),_0x210e01);}}export async function uploadSaveOrSaveState(_0x2bf7cb){const _0x2ffbad=a0_0x1cb804;Module[_0x2ffbad(0x13a)](_0x2bf7cb,()=>{const _0x21ca00=_0x2ffbad;localStorageFile(),Module[_0x21ca00(0x115)]();});}function a0_0xede7(){const _0x31ed0a=['gameName','buttonPress','hidden','.gbc','href','createElement','Do\x20you\x20want\x20to\x20load\x20save\x20state?','getItem','disable','fileSize','pagehide','66ysTbgl','Paused!','/data/games/','text/plain','Auto\x20save\x20','FSSync','slotStateSaved','canvas','textContent','109461SfPRUq','loadState','#20A5A6','revokeObjectURL','SDL2','15858bMhygX','915VKYJRR','_slot0.txt','2175984vNBCdU','endsWith','click','saveState','pauseGame','.png','onLine','includes','0,0,','Online!','4IhSwbO','padStart','Save/State\x20uploaded\x20successfully:','_dateState','name','_imageState','\x20time(s)','Error\x20uploadSavSta:','Unable\x20to\x20upload\x20to\x20Cloud!','persisted','download','beforeunload','control-setting','add','Cloud\x20upload\x20','uploadSaveOrSaveState','uploadCheats','/data/screenshots/','visibilitychange','Cheat\x20uploaded\x20successfully:','visibilityState','listScreenshots','gbc','FSInit','toString','listSaves','_savedCheats','timer','loadGame','Resumed!','662501rlddZY','classList','listStates','setItem','downloadFile','screenshot','.ss0','files','#E0C068','innerWidth','897392pJYEUC','12976ODPQwA','uploadRom','setFastForwardMultiplier','replace','application/octet-stream','body','screenSize','listGames','appendChild','remove','visible','4430547QPkvHz','addEventListener','/data/states/','now','getElementById','log','contains','error','uId','10ikgsHT'];a0_0xede7=function(){return _0x31ed0a;};return a0_0xede7();}export async function resumeGame(){const _0x4df04c=a0_0x1cb804;Module['resumeGame'](),Module[_0x4df04c(0x11d)](),notiMessage(_0x4df04c(0x148),0x7d0);}export async function pauseGame(){const _0x2473ba=a0_0x1cb804;Module[_0x2473ba(0x125)](),Module[_0x2473ba(0x11d)](),notiMessage(_0x2473ba(0x111),0x7d0);}export async function buttonPress(_0x386ab8){const _0x332d04=a0_0x1cb804;Module[_0x332d04(0x106)](_0x386ab8);}export async function buttonUnpress(_0x54c368){Module['buttonUnpress'](_0x54c368);}export async function screenShot(_0x412ea9){const _0x508519=a0_0x1cb804,_0x5d4bb6=localStorage[_0x508519(0x10c)](_0x508519(0x105)),_0x39eb43=_0x5d4bb6['replace'](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x508519(0x14e)](''+_0x39eb43+_0x412ea9+_0x508519(0x126)),await Module[_0x508519(0x115)]();const _0xd89d95=await fileToBase64(Module[_0x508519(0x14d)](_0x508519(0x13c)+_0x39eb43+_0x412ea9+_0x508519(0x126))),_0x432123=Date[_0x508519(0xfe)](),_0x579c31=formatDateTime(_0x432123);localStorage[_0x508519(0x14c)](_0x5d4bb6+_0x508519(0x12e)+_0x412ea9,_0x579c31),localStorage['setItem'](_0x5d4bb6+_0x508519(0x130)+_0x412ea9,_0xd89d95);}export async function captureOCR(_0x2bc34f){const _0x377798=a0_0x1cb804;Module[_0x377798(0x14e)](_0x2bc34f);const _0x58c538=Module[_0x377798(0x14d)](_0x377798(0x13c)+_0x2bc34f);return _0x58c538;}export async function setFastForwardMultiplier(_0x55eace){const _0x27b3f5=a0_0x1cb804;Module[_0x27b3f5(0x156)](_0x55eace);}export function uploadCheats(_0x509940,_0x1b62a6,_0x460602,_0x1bf4bd,_0x557c34){Module['uploadCheats'](_0x509940,()=>{const _0xe5ba78=a0_0x434a;Module['autoLoadCheats'](),setTimeout(()=>{const _0x249af8=a0_0x434a;Module[_0x249af8(0x115)]();},0x1f4),_0x1bf4bd&&(localStorage['setItem'](_0x1b62a6+_0xe5ba78(0x145),_0x460602),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x557c34[_0xe5ba78(0x118)]=localStorage['getItem'](_0x1b62a6+'_savedCheats'||'Off');});}