const a0_0x5293ad=a0_0x2e00;(function(_0x376ce0,_0x316312){const _0x4832d2=a0_0x2e00,_0x3bde4b=_0x376ce0();while(!![]){try{const _0x5a1155=parseInt(_0x4832d2(0x132))/0x1+parseInt(_0x4832d2(0x122))/0x2*(parseInt(_0x4832d2(0xf1))/0x3)+parseInt(_0x4832d2(0xd5))/0x4*(-parseInt(_0x4832d2(0xe9))/0x5)+parseInt(_0x4832d2(0x10a))/0x6*(parseInt(_0x4832d2(0xee))/0x7)+parseInt(_0x4832d2(0x109))/0x8*(parseInt(_0x4832d2(0x111))/0x9)+-parseInt(_0x4832d2(0x100))/0xa+-parseInt(_0x4832d2(0xce))/0xb;if(_0x5a1155===_0x316312)break;else _0x3bde4b['push'](_0x3bde4b['shift']());}catch(_0x39920d){_0x3bde4b['push'](_0x3bde4b['shift']());}}}(a0_0x2cc7,0x9e661));import a0_0x264e92 from'../core/mgba.js';function a0_0x2e00(_0x1561c3,_0x529934){const _0x2cc7df=a0_0x2cc7();return a0_0x2e00=function(_0x2e00c4,_0x4d039b){_0x2e00c4=_0x2e00c4-0xca;let _0x34da1e=_0x2cc7df[_0x2e00c4];return _0x34da1e;},a0_0x2e00(_0x1561c3,_0x529934);}import*as a0_0x2412ba from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x5293ad(0x118)](a0_0x5293ad(0x103))};function initializeCore(_0x2ca013,_0x4c63c3){_0x2ca013(_0x4c63c3)['then'](function(_0x638d89){_0x638d89['FSInit']();});}initializeCore(a0_0x264e92,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x5293ad(0x118)](a0_0x5293ad(0x103)),savedTurboState=localStorage[a0_0x5293ad(0xd8)](a0_0x5293ad(0xe7)),controlSetting=document[a0_0x5293ad(0x118)](a0_0x5293ad(0x104));function handleVisibilityChange(_0x148c34){const _0x4db469=a0_0x5293ad;document[_0x4db469(0x12a)]===_0x4db469(0x119)||_0x148c34?.[_0x4db469(0x10f)]===_0x4db469(0xe1)||_0x148c34?.['persisted']?(pauseGame(),canvas[_0x4db469(0x125)][_0x4db469(0xd2)]('visible')):(setTimeout(()=>{const _0x594cad=_0x4db469;canvas[_0x594cad(0x125)][_0x594cad(0xcc)](_0x594cad(0xe4));},0x258),controlSetting[_0x4db469(0x125)][_0x4db469(0xd3)](_0x4db469(0xe4))&&resumeGame());}async function statusShow(){const _0x3da0fe=a0_0x5293ad;document['addEventListener'](_0x3da0fe(0x11d),handleVisibilityChange),document['addEventListener']('visibilitychange',handleVisibilityChange),window[_0x3da0fe(0x10d)](_0x3da0fe(0xe1),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x2412ba[_0x3da0fe(0x128)](turboState)),await delay(0x3e8),await led(parseInt(localStorage['getItem']('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x52ddd3=a0_0x5293ad;await ledSave(_0x52ddd3(0xd1)),await Module[_0x52ddd3(0x12f)](0x0),await Module[_0x52ddd3(0x11c)](),await screenShot(0x0),console[_0x52ddd3(0x117)](_0x52ddd3(0xfd)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x50fab1=a0_0x5293ad,_0x51d3a2=localStorage[_0x50fab1(0xd8)](_0x50fab1(0x108)),_0x4bcb95=_0x51d3a2[_0x50fab1(0xfe)](_0x50fab1(0xf5),_0x50fab1(0x10c)),_0x5b640e=localStorage[_0x50fab1(0xd8)](_0x50fab1(0x120)),_0x3f74bf=localStorage[_0x50fab1(0xd8)](_0x51d3a2+_0x50fab1(0xf0)),_0x307b0e=localStorage[_0x50fab1(0xd8)](_0x51d3a2+'_dateState0');if(navigator[_0x50fab1(0x110)]){if(_0x5b640e){await ledSave(_0x50fab1(0xe8)),await delay(0x3e8),await dpUploadFile(_0x4bcb95,Module[_0x50fab1(0x123)]('/data/states/'+_0x4bcb95));if(_0x3f74bf!==null){const _0x2fd816=_0x3f74bf+'\x0a\x0a'+_0x307b0e,_0x5c31b5=new Blob([_0x2fd816],{'type':_0x50fab1(0x101)});await dpUploadFile(_0x51d3a2+_0x50fab1(0x10e),_0x5c31b5);}else console[_0x50fab1(0x117)]('No\x20screenshot!');await lockNoti('',_0x50fab1(0x121)+ ++countUpload+_0x50fab1(0xf6),0x7d0);}else console['log']('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0x50fab1(0x117)](_0x50fab1(0xf4));}function startTimer(){let [_0x35a40f,_0x174267,_0x2b46af,_0x41debd,_0x217833]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x4dfc89=a0_0x2e00;_0x2b46af++,_0x41debd++,_0x217833++;if(_0x2b46af===0x3c)[_0x2b46af,_0x174267]=[0x0,_0x174267+0x1];if(_0x174267===0x3c)[_0x174267,_0x35a40f]=[0x0,_0x35a40f+0x1];document['getElementById']('timer')[_0x4dfc89(0xcb)]=_0x35a40f+'h'+_0x174267[_0x4dfc89(0x126)]()[_0x4dfc89(0xcf)](0x2,'0')+'.'+_0x2b46af['toString']()['padStart'](0x2,'0');_0x41debd===0x3c&&(saveStatePeriodically(),_0x41debd=0x0);;_0x41debd===0xe10&&(saveStateInCloud(),_0x217833=0x0);;},0x3e8);}export async function uploadGame(_0x1ae682){const _0x469653=a0_0x5293ad,_0x1aa3e0=_0x1ae682[_0x469653(0xde)][0x0];Module[_0x469653(0xdb)](_0x1aa3e0,()=>{Module['FSSync']();});}export async function loadGame(_0x32b4c9){const _0x2fd195=a0_0x5293ad,_0x517ef1=_0x32b4c9['replace'](/\.(gba|gbc|gb|zip)$/,_0x2fd195(0x10c)),_0x493606=Module[_0x2fd195(0xeb)]()[_0x2fd195(0xfc)](_0x46aa7f=>_0x46aa7f!=='.'&&_0x46aa7f!=='..');intro['classList'][_0x2fd195(0xd2)](_0x2fd195(0x113)),errorLogElements[0x0][_0x2fd195(0xed)][_0x2fd195(0x112)]='0',ingame[_0x2fd195(0x125)][_0x2fd195(0xcc)](_0x2fd195(0x113)),_0x32b4c9['endsWith'](_0x2fd195(0xd0))||_0x32b4c9[_0x2fd195(0xf9)](_0x2fd195(0xea))?(canvas['classList'][_0x2fd195(0xd2)](_0x2fd195(0x131)),areaTrans['classList'][_0x2fd195(0xd2)](_0x2fd195(0xe2)),localStorage['setItem'](_0x2fd195(0xf3),_0x2fd195(0x11a)+(window[_0x2fd195(0xf2)]-0xe6)+','+(window[_0x2fd195(0xf2)]-0xe6)*0x9/0xa)):localStorage[_0x2fd195(0x10b)](_0x2fd195(0xf3),_0x2fd195(0x11a)+(window[_0x2fd195(0xf2)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x493606[_0x2fd195(0xcd)](_0x517ef1)?(await Module[_0x2fd195(0xe3)](_0x2fd195(0x12b)+_0x32b4c9),confirm(_0x2fd195(0x130))&&(await Module['loadState'](0x0),localStorage[_0x2fd195(0x10b)]('gameName',_0x32b4c9),console[_0x2fd195(0x117)](_0x32b4c9))):(await Module[_0x2fd195(0xe3)](_0x2fd195(0x12b)+_0x32b4c9),localStorage[_0x2fd195(0x10b)]('gameName',_0x32b4c9)),await statusShow();}function a0_0x2cc7(){const _0x937dc5=['FSSync','pagehide','Cheat\x20uploaded\x20successfully:','.png','uId','Cloud\x20upload\x20','6zBAosZ','downloadFile','click','classList','toString','editFileName','turboF','Resumed!','visibilityState','/data/games/','name','uploadSaveOrSaveState','setFastForwardMultiplier','saveState','Do\x20you\x20want\x20to\x20load\x20save\x20state?','gbc','415905jXqFCV','buttonUnpress','textContent','remove','includes','19366820PyHdGZ','padStart','.gbc','#20A5A6','add','contains','application/octet-stream','732uzCfwn','/data/screenshots/','appendChild','getItem','fileSize','Error\x20uploadCheat:','uploadRom','loadState','createObjectURL','files','_savedCheats','_imageState','beforeunload','gbc1','loadGame','visible','body','listCheats','turboState','#E0C068','2245xHoTTH','.gb','listStates','revokeObjectURL','style','147VABnBr','error','_imageState0','1196133RbdCQM','innerWidth','screenSize','Online!','.gba','\x20time(s)','Save/State\x20uploaded\x20successfully:','download','endsWith','Error\x20uploadSavSta:','href','filter','Auto\x20save\x20','replace','resumeGame','2597260TLaAcn','text/plain','listSaves','canvas','control-setting','pauseGame','uploadCheats','createElement','gameName','1881976sQCCtC','258294wTdolJ','setItem','.ss0','addEventListener','_slot0.txt','type','onLine','9RtgQjP','bottom','disable','now','listRoms','autoLoadCheats','log','getElementById','hidden','0,0,','deleteFile'];a0_0x2cc7=function(){return _0x937dc5;};return a0_0x2cc7();}export async function saveState(_0x478060){const _0x570b71=a0_0x5293ad;await Module[_0x570b71(0x12f)](_0x478060),await Module[_0x570b71(0x11c)]();}export async function loadState(_0x4c11c3){const _0x5bfca2=a0_0x5293ad;await Module[_0x5bfca2(0xdc)](_0x4c11c3);}export async function downloadFile(_0x389202,_0x565215){const _0x13b7c0=a0_0x5293ad,_0x3d293c=Module['downloadFile'](_0x389202),_0xbe193f=document[_0x13b7c0(0x107)]('a');document[_0x13b7c0(0xe5)][_0x13b7c0(0xd7)](_0xbe193f),_0xbe193f[_0x13b7c0(0xf8)]=_0x565215;const _0x5ca663=new Blob([_0x3d293c],{'type':_0x13b7c0(0xd4)});_0xbe193f[_0x13b7c0(0xfb)]=URL[_0x13b7c0(0xdd)](_0x5ca663),_0xbe193f[_0x13b7c0(0x124)](),URL[_0x13b7c0(0xec)](_0x5ca663),_0xbe193f[_0x13b7c0(0xcc)]();}export function downloadFileInCloud(_0x51e88c){const _0x453bd5=Module['downloadFile'](_0x51e88c);return _0x453bd5;}export async function uploadFile(_0x4e4c83){const _0x55abba=a0_0x5293ad,_0x133694=_0x4e4c83[_0x55abba(0xde)][0x0];Module[_0x55abba(0x12d)](_0x133694,()=>{const _0x53df5b=_0x55abba;Module[_0x53df5b(0x11c)]();});}export async function editFile(_0x1952f4,_0xf7ecc0,_0x29275d){const _0x2ddea8=a0_0x5293ad;await Module[_0x2ddea8(0x127)](_0x1952f4,_0xf7ecc0,_0x29275d),await Module['FSSync']();}export async function deleteFile(_0x435529){const _0x4dd63e=a0_0x5293ad;await Module[_0x4dd63e(0x11b)](_0x435529),await Module[_0x4dd63e(0x11c)]();}export function listGame(){const _0x4c3ac1=a0_0x5293ad,_0x5b40d9=Module[_0x4c3ac1(0x115)]()[_0x4c3ac1(0xfc)](_0x128468=>_0x128468!=='.'&&_0x128468!=='..');return _0x5b40d9;}export function listSave(){const _0x2570fb=a0_0x5293ad,_0x48f31a=Module[_0x2570fb(0x102)]()[_0x2570fb(0xfc)](_0x277a10=>_0x277a10!=='.'&&_0x277a10!=='..');return _0x48f31a;}export function listState(){const _0x50aff8=a0_0x5293ad,_0x17a843=Module[_0x50aff8(0xeb)]()[_0x50aff8(0xfc)](_0x339926=>_0x339926!=='.'&&_0x339926!=='..');return _0x17a843;}export function listCheat(){const _0x10dd5e=a0_0x5293ad,_0x40bdb6=Module[_0x10dd5e(0xe6)]()['filter'](_0x513c5b=>_0x513c5b!=='.'&&_0x513c5b!=='..');return _0x40bdb6;}export function listScreenshot(){const _0x366556=Module['listScreenshots']()['filter'](_0x3b2c34=>_0x3b2c34!=='.'&&_0x3b2c34!=='..');return _0x366556;}export function fileSize(_0x7380a0){const _0x51224b=a0_0x5293ad,_0x30a9ab=Module[_0x51224b(0xd9)](_0x7380a0);return _0x30a9ab;}export async function uploadCheat(_0x5a1b04){const _0x3192c2=a0_0x5293ad;try{const _0x5732bf=_0x5a1b04[_0x3192c2(0xde)][0x0];await Module['uploadCheats'](_0x5732bf,()=>{const _0x1268d6=_0x3192c2;console[_0x1268d6(0x117)](_0x1268d6(0x11e),_0x5732bf['name']),localStorageFile(),Module[_0x1268d6(0x11c)]();});}catch(_0x26ec61){console[_0x3192c2(0xef)](_0x3192c2(0xda),_0x26ec61);}}export async function uploadSavSta(_0x53844a){const _0x53ddb6=a0_0x5293ad;try{const _0x15ccb0=_0x53844a[_0x53ddb6(0xde)][0x0];await Module[_0x53ddb6(0x12d)](_0x15ccb0,()=>{const _0x32f0f8=_0x53ddb6;console[_0x32f0f8(0x117)](_0x32f0f8(0xf7),_0x15ccb0[_0x32f0f8(0x12c)]),localStorageFile(),Module['FSSync']();});}catch(_0x5a8dcb){console[_0x53ddb6(0xef)](_0x53ddb6(0xfa),_0x5a8dcb);}}export async function uploadSaveOrSaveState(_0x18db6c){const _0x46d9cc=a0_0x5293ad;Module[_0x46d9cc(0x12d)](_0x18db6c,()=>{const _0x54fc37=_0x46d9cc;localStorageFile(),Module[_0x54fc37(0x11c)]();});}export async function resumeGame(){const _0x4b7283=a0_0x5293ad;Module[_0x4b7283(0xff)](),Module['SDL2'](),notiMessage(_0x4b7283(0x129),0x7d0);}export async function pauseGame(){const _0x3a5654=a0_0x5293ad;Module[_0x3a5654(0x105)](),Module['SDL2'](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x2f4d6d){Module['buttonPress'](_0x2f4d6d);}export async function buttonUnpress(_0x7118ec){const _0x4d0bbc=a0_0x5293ad;Module[_0x4d0bbc(0xca)](_0x7118ec);}export async function screenShot(_0x5686ec){const _0x428d09=a0_0x5293ad,_0x3f4e92=localStorage[_0x428d09(0xd8)]('gameName'),_0x2d9689=_0x3f4e92[_0x428d09(0xfe)](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x2d9689+_0x5686ec+_0x428d09(0x11f)),await Module[_0x428d09(0x11c)]();const _0x1869de=await fileToBase64(Module['downloadFile']('/data/screenshots/'+_0x2d9689+_0x5686ec+_0x428d09(0x11f))),_0x50be7c=Date[_0x428d09(0x114)](),_0x69958c=formatDateTime(_0x50be7c);localStorage[_0x428d09(0x10b)](_0x3f4e92+'_dateState'+_0x5686ec,_0x69958c),localStorage['setItem'](_0x3f4e92+_0x428d09(0xe0)+_0x5686ec,_0x1869de);}export async function captureOCR(_0x20c170){const _0x5bd062=a0_0x5293ad;Module['screenshot'](_0x20c170);const _0x20a63f=Module[_0x5bd062(0x123)](_0x5bd062(0xd6)+_0x20c170);return _0x20a63f;}export async function setFastForwardMultiplier(_0x5ca752){const _0x55710c=a0_0x5293ad;Module[_0x55710c(0x12e)](_0x5ca752);}export function uploadCheats(_0x205cbd,_0x1b4d39,_0x58f00a,_0x21cae2,_0x1a6c70){const _0x33588f=a0_0x5293ad;Module[_0x33588f(0x106)](_0x205cbd,()=>{const _0x1b34b2=_0x33588f;Module[_0x1b34b2(0x116)](),setTimeout(()=>{const _0x2e65de=_0x1b34b2;Module[_0x2e65de(0x11c)]();},0x1f4),_0x21cae2&&(localStorage[_0x1b34b2(0x10b)](_0x1b4d39+_0x1b34b2(0xdf),_0x58f00a),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x1a6c70['textContent']=localStorage[_0x1b34b2(0xd8)](_0x1b4d39+_0x1b34b2(0xdf)||'Off');});}