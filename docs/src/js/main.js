const a0_0x23be1b=a0_0x5c6b;(function(_0x2da85a,_0x843f9c){const _0xbfff05=a0_0x5c6b,_0x58fe9f=_0x2da85a();while(!![]){try{const _0x23faa0=-parseInt(_0xbfff05(0x13f))/0x1+-parseInt(_0xbfff05(0x14c))/0x2*(-parseInt(_0xbfff05(0x160))/0x3)+-parseInt(_0xbfff05(0x172))/0x4*(-parseInt(_0xbfff05(0x12d))/0x5)+-parseInt(_0xbfff05(0x177))/0x6*(parseInt(_0xbfff05(0x16b))/0x7)+-parseInt(_0xbfff05(0x167))/0x8+-parseInt(_0xbfff05(0x14d))/0x9+parseInt(_0xbfff05(0x12f))/0xa;if(_0x23faa0===_0x843f9c)break;else _0x58fe9f['push'](_0x58fe9f['shift']());}catch(_0x1176d3){_0x58fe9f['push'](_0x58fe9f['shift']());}}}(a0_0x528d,0x2b84b));import a0_0x3eba79 from'../core/mgba.js';import*as a0_0x3ee927 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document[a0_0x23be1b(0x12c)](a0_0x23be1b(0x149))};function initializeCore(_0x49fe9e,_0x2fc933){const _0x12dfbc=a0_0x23be1b;_0x49fe9e(_0x2fc933)[_0x12dfbc(0x13a)](function(_0x57c064){_0x57c064['FSInit']();});}initializeCore(a0_0x3eba79,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x23be1b(0x149)),savedTurboState=localStorage[a0_0x23be1b(0x15d)](a0_0x23be1b(0x168)),controlSetting=document[a0_0x23be1b(0x12c)](a0_0x23be1b(0x183));function handleVisibilityChange(_0x5248a6){const _0x2b76be=a0_0x23be1b;document['visibilityState']===_0x2b76be(0x179)||_0x5248a6?.[_0x2b76be(0x16e)]==='beforeunload'||_0x5248a6?.['persisted']?(pauseGame(),canvas[_0x2b76be(0x138)][_0x2b76be(0x17b)](_0x2b76be(0x137))):(setTimeout(()=>{const _0x3c60f1=_0x2b76be;canvas['classList'][_0x3c60f1(0x141)](_0x3c60f1(0x137));},0x258),controlSetting['classList']['contains'](_0x2b76be(0x137))&&resumeGame());}async function statusShow(){const _0x241dbd=a0_0x23be1b;document[_0x241dbd(0x164)](_0x241dbd(0x182),handleVisibilityChange),document[_0x241dbd(0x164)]('visibilitychange',handleVisibilityChange),window[_0x241dbd(0x164)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x3ee927[_0x241dbd(0x147)](turboState)),await delay(0xc8),await Module[_0x241dbd(0x135)](),await delay(0x320),await led(parseInt(localStorage[_0x241dbd(0x15d)](_0x241dbd(0x148)))),await notiMessage(gameVer,0x3e8);}function a0_0x528d(){const _0x113fc1=['buttonPress','image/png','21DoeBYx','disable','listSaves','type','downloadFile','application/octet-stream','saveState','14728tqYfXy','revokeObjectURL','uId','now','.ss0','170502BzfeKB','createElement','hidden','listCheats','add','/data/games/','charCodeAt','loadState','onLine','\x20time(s)','textContent','pagehide','control-setting','listRoms','screenshot','getElementById','205HGzZXJ','style','2265420OybgxL','appendChild','setItem','deleteFile','/data/states/','#20A5A6','SDL2','tEXtComment\x00','visible','classList','click','then','filter','listStates','split','_savedCheats','107860PtHBxz','gameName','remove','replace','body','createObjectURL','resumeGame','set','turboF','slotStateSaved','canvas','listScreenshots','download','274722ZQRIWa','1050093RUcfhh','Auto\x20save\x20','pauseGame','editFileName','innerWidth','.gbc','Do\x20you\x20want\x20to\x20load\x20save\x20state?','#E0C068','log','toString','FSSync','padStart','screenSize','/data/screenshots/','Off','loadGame','getItem','gbc','0,0,','3ngLSze','length','uploadAll','files','addEventListener','endsWith','state','214608psgJVk','turboState'];a0_0x528d=function(){return _0x113fc1;};return a0_0x528d();}async function saveStatePeriodically(){const _0x20524d=a0_0x23be1b;await ledSave(_0x20524d(0x134)),await Module[_0x20524d(0x171)](0x0),await Module[_0x20524d(0x157)](),await screenShot(0x0),console[_0x20524d(0x155)](_0x20524d(0x14e)+ ++countAutoSave+_0x20524d(0x180));}async function saveStateInCloud(){const _0x33222e=a0_0x23be1b,_0x1054a3=localStorage[_0x33222e(0x15d)](_0x33222e(0x140)),_0x4aed75=_0x1054a3[_0x33222e(0x142)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x592af5=localStorage[_0x33222e(0x15d)](_0x33222e(0x174));navigator[_0x33222e(0x17f)]&&(_0x592af5&&(await ledSave(_0x33222e(0x154)),await delay(0x3e8),await dpUploadFile(_0x4aed75,Module[_0x33222e(0x16f)](_0x33222e(0x133)+_0x4aed75),_0x33222e(0x166)),await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x33222e(0x180),0x7d0)));}function startTimer(){let [_0x114482,_0x2266cf,_0xcda19d,_0x5c7a1b,_0x187507]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x22105f=a0_0x5c6b;_0xcda19d++,_0x5c7a1b++,_0x187507++;if(_0xcda19d===0x3c)[_0xcda19d,_0x2266cf]=[0x0,_0x2266cf+0x1];if(_0x2266cf===0x3c)[_0x2266cf,_0x114482]=[0x0,_0x114482+0x1];document[_0x22105f(0x12c)]('timer')['textContent']=_0x114482+'h'+_0x2266cf[_0x22105f(0x156)]()[_0x22105f(0x158)](0x2,'0')+'.'+_0xcda19d['toString']()[_0x22105f(0x158)](0x2,'0');_0x5c7a1b===0x3c&&(saveStatePeriodically(),_0x5c7a1b=0x0);;_0x187507===0x708&&(saveStateInCloud(),_0x187507=0x0);;},0x3e8);}function a0_0x5c6b(_0x2f72a8,_0x1f92d8){const _0x528d52=a0_0x528d();return a0_0x5c6b=function(_0x5c6b12,_0x2fb46d){_0x5c6b12=_0x5c6b12-0x12b;let _0x111d80=_0x528d52[_0x5c6b12];return _0x111d80;},a0_0x5c6b(_0x2f72a8,_0x1f92d8);}export async function uploadGame(_0x5118a8){const _0x2dcf8e=a0_0x23be1b,_0x144fa2=_0x5118a8[_0x2dcf8e(0x163)][0x0];Module['uploadRom'](_0x144fa2,()=>{Module['FSSync']();});}export async function loadGame(_0x284470){const _0xce1a85=a0_0x23be1b,_0x230bdc=_0x284470[_0xce1a85(0x142)](/\.(gba|gbc|gb|zip)$/,_0xce1a85(0x176)),_0x255345=Module[_0xce1a85(0x13c)]()[_0xce1a85(0x13b)](_0x39602b=>_0x39602b!=='.'&&_0x39602b!=='..');intro[_0xce1a85(0x138)]['add'](_0xce1a85(0x16c)),errorLogElements[0x0][_0xce1a85(0x12e)]['bottom']='0',ingame[_0xce1a85(0x138)]['remove'](_0xce1a85(0x16c)),_0x284470[_0xce1a85(0x165)](_0xce1a85(0x152))||_0x284470['endsWith']('.gb')?(canvas[_0xce1a85(0x138)][_0xce1a85(0x17b)](_0xce1a85(0x15e)),areaTrans[_0xce1a85(0x138)][_0xce1a85(0x17b)]('gbc1'),localStorage[_0xce1a85(0x131)](_0xce1a85(0x159),_0xce1a85(0x15f)+(window[_0xce1a85(0x151)]-0xe6)+','+(window[_0xce1a85(0x151)]-0xe6)*0x9/0xa)):localStorage[_0xce1a85(0x131)](_0xce1a85(0x159),_0xce1a85(0x15f)+(window['innerWidth']-0x96)+','+(window[_0xce1a85(0x151)]-0x96)*0x2/0x3),_0x255345['includes'](_0x230bdc)?(await Module[_0xce1a85(0x15c)](_0xce1a85(0x17c)+_0x284470),confirm(_0xce1a85(0x153))&&(await Module[_0xce1a85(0x17e)](0x0),localStorage[_0xce1a85(0x131)]('gameName',_0x284470),console[_0xce1a85(0x155)](_0x284470))):(await Module[_0xce1a85(0x15c)](_0xce1a85(0x17c)+_0x284470),localStorage[_0xce1a85(0x131)]('gameName',_0x284470),console[_0xce1a85(0x155)](_0x284470)),await statusShow();}export async function saveState(_0x2fa2e6){const _0x3b050e=a0_0x23be1b;await Module[_0x3b050e(0x171)](_0x2fa2e6),await Module['FSSync']();}export async function loadState(_0x54bd68){const _0x54c7d0=a0_0x23be1b;await Module[_0x54c7d0(0x17e)](_0x54bd68);}export async function downloadFile(_0x37c249,_0xfc3f4b){const _0x4c608f=a0_0x23be1b,_0x1c4bc7=Module[_0x4c608f(0x16f)](_0x37c249),_0x499e5b=document[_0x4c608f(0x178)]('a');document[_0x4c608f(0x143)][_0x4c608f(0x130)](_0x499e5b),_0x499e5b[_0x4c608f(0x14b)]=_0xfc3f4b;const _0x3711dc=new Blob([_0x1c4bc7],{'type':_0x4c608f(0x170)});_0x499e5b['href']=URL[_0x4c608f(0x144)](_0x3711dc),_0x499e5b[_0x4c608f(0x139)](),URL[_0x4c608f(0x173)](_0x3711dc),_0x499e5b['remove']();}export function downloadFileInCloud(_0x697338){const _0x4925c7=a0_0x23be1b,_0x2fe91c=Module[_0x4925c7(0x16f)](_0x697338);return _0x2fe91c;}export async function uploadFileInCloud(_0x49a30c){const _0x466d98=a0_0x23be1b;Module[_0x466d98(0x162)](_0x49a30c,()=>{const _0x4495b8=_0x466d98;localStorageFile(),Module[_0x4495b8(0x157)]();});}export async function uploadFile(_0x42b37a){const _0x4351fb=a0_0x23be1b,_0x41a10e=_0x42b37a[_0x4351fb(0x163)][0x0];Module[_0x4351fb(0x162)](_0x41a10e,()=>{const _0x37b68b=_0x4351fb;localStorageFile(),Module[_0x37b68b(0x157)]();});}export async function editFile(_0xd1a04,_0x23aa52,_0x547518){const _0x24981f=a0_0x23be1b;await Module[_0x24981f(0x150)](_0xd1a04,_0x23aa52,_0x547518),await Module[_0x24981f(0x157)]();}export async function deleteFile(_0x3888dc){const _0x312817=a0_0x23be1b;await Module[_0x312817(0x132)](_0x3888dc),await Module[_0x312817(0x157)]();}export function listGame(){const _0x6b1c4=a0_0x23be1b,_0x2995db=Module[_0x6b1c4(0x184)]()[_0x6b1c4(0x13b)](_0x18e8b3=>_0x18e8b3!=='.'&&_0x18e8b3!=='..');return _0x2995db;}export function listSave(){const _0x27cde1=a0_0x23be1b,_0xf56da5=Module[_0x27cde1(0x16d)]()[_0x27cde1(0x13b)](_0x3744e8=>_0x3744e8!=='.'&&_0x3744e8!=='..');return _0xf56da5;}export function listState(){const _0xb25abf=a0_0x23be1b,_0x47ca0b=Module[_0xb25abf(0x13c)]()['filter'](_0x1db4d2=>_0x1db4d2!=='.'&&_0x1db4d2!=='..');return _0x47ca0b;}export function listCheat(){const _0x41b3fe=a0_0x23be1b,_0x2187c1=Module[_0x41b3fe(0x17a)]()['filter'](_0xc93fd4=>_0xc93fd4!=='.'&&_0xc93fd4!=='..');return _0x2187c1;}export function listScreenshot(){const _0x2da935=a0_0x23be1b,_0x339fc3=Module[_0x2da935(0x14a)]()['filter'](_0xdf0345=>_0xdf0345!=='.'&&_0xdf0345!=='..');return _0x339fc3;}export function embedTextInPngFile(_0x800065,_0x5a623b,_0x114d7e){const _0x50ca26=a0_0x23be1b;let _0x5f5c1c=atob(_0x800065[_0x50ca26(0x13d)](',')[0x1]),_0x33a48c=new Uint8Array(_0x5f5c1c[_0x50ca26(0x161)]);for(let _0x1e1a80=0x0;_0x1e1a80<_0x5f5c1c[_0x50ca26(0x161)];_0x1e1a80++){_0x33a48c[_0x1e1a80]=_0x5f5c1c[_0x50ca26(0x17d)](_0x1e1a80);}let _0x1d64ff=new TextEncoder()['encode'](_0x50ca26(0x136)+_0x5a623b),_0x406caa=new Uint8Array(_0x33a48c[_0x50ca26(0x161)]+_0x1d64ff['length']);_0x406caa[_0x50ca26(0x146)](_0x33a48c,0x0),_0x406caa['set'](_0x1d64ff,_0x33a48c[_0x50ca26(0x161)]);let _0x204f12=new Blob([_0x406caa],{'type':_0x50ca26(0x16a)}),_0xab43d7=new File([_0x204f12],_0x114d7e,{'type':_0x50ca26(0x16a)});return _0xab43d7;}export function extractTextFromPngBase64(_0x341b03){const _0x3e2788=a0_0x23be1b;let _0x11763e=atob(_0x341b03['split'](',')[0x1]),_0x376b9a=_0x3e2788(0x136),_0x286e9b=_0x11763e['indexOf'](_0x376b9a);if(_0x286e9b!==-0x1)return _0x11763e['substring'](_0x286e9b+_0x376b9a[_0x3e2788(0x161)]);return null;}export function fileSize(_0x55fdca){const _0x34f4da=Module['fileSize'](_0x55fdca);return _0x34f4da;}export async function resumeGame(){const _0x33ea5f=a0_0x23be1b;Module[_0x33ea5f(0x145)](),Module[_0x33ea5f(0x135)](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x48b591=a0_0x23be1b;Module[_0x48b591(0x14f)](),Module[_0x48b591(0x135)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x270f45){const _0x1aadcb=a0_0x23be1b;Module[_0x1aadcb(0x169)](_0x270f45);}export async function buttonUnpress(_0xb5e0b3){Module['buttonUnpress'](_0xb5e0b3);}export async function screenShot(_0x43144a){const _0x62ac=a0_0x23be1b,_0x5b2443=localStorage[_0x62ac(0x15d)](_0x62ac(0x140))[_0x62ac(0x142)](/\.(gba|gbc|gb|zip)$/,''),_0x3e9828=_0x5b2443+'_'+_0x43144a+'.png';await Module[_0x62ac(0x12b)](_0x3e9828),await Module['FSSync']();const _0x56fc6d=await fileToBase64(Module[_0x62ac(0x16f)](_0x62ac(0x15a)+_0x3e9828)),_0x513ada=embedTextInPngFile(_0x56fc6d,formatDateTime(Date[_0x62ac(0x175)]()),_0x3e9828);Module[_0x62ac(0x162)](_0x513ada,()=>{const _0x466a63=_0x62ac;localStorageFile(),Module[_0x466a63(0x157)]();});}export async function dowloadScreenShot(_0x58efd1){try{const _0x56a352=await fileToBase64(Module['downloadFile'](_0x58efd1));return _0x56a352;}catch{}}export async function captureOCR(_0x576d22){const _0xde49c6=a0_0x23be1b;Module[_0xde49c6(0x12b)](_0x576d22);const _0x575f39=Module[_0xde49c6(0x16f)](_0xde49c6(0x15a)+_0x576d22);return _0x575f39;}export async function setFastForwardMultiplier(_0x3c5455){Module['setFastForwardMultiplier'](_0x3c5455);}export function uploadCheats(_0x359155,_0x18c369,_0x14577b,_0x16ff4b,_0x25e6b3){const _0x344253=a0_0x23be1b;Module[_0x344253(0x162)](_0x359155,()=>{const _0x41c8bc=_0x344253;Module['autoLoadCheats'](),setTimeout(()=>{const _0x2917f6=a0_0x5c6b;Module[_0x2917f6(0x157)]();},0x1f4),_0x16ff4b&&(localStorage[_0x41c8bc(0x131)](_0x18c369+_0x41c8bc(0x13e),_0x14577b),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x25e6b3[_0x41c8bc(0x181)]=localStorage[_0x41c8bc(0x15d)](_0x18c369+_0x41c8bc(0x13e)||_0x41c8bc(0x15b));});}export function setVolume(_0x531b08){Module['setVolume'](_0x531b08);}