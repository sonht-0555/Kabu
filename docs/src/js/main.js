const a0_0x448d2a=a0_0x268f;function a0_0x268f(_0x559cdc,_0x24806a){const _0xfc2022=a0_0xfc20();return a0_0x268f=function(_0x268fda,_0x24d866){_0x268fda=_0x268fda-0x1d5;let _0x25044a=_0xfc2022[_0x268fda];return _0x25044a;},a0_0x268f(_0x559cdc,_0x24806a);}(function(_0x2b1189,_0x596496){const _0x1761c8=a0_0x268f,_0x15c843=_0x2b1189();while(!![]){try{const _0x5e51f1=-parseInt(_0x1761c8(0x20d))/0x1+-parseInt(_0x1761c8(0x1ee))/0x2*(parseInt(_0x1761c8(0x1d6))/0x3)+-parseInt(_0x1761c8(0x20a))/0x4*(-parseInt(_0x1761c8(0x22a))/0x5)+-parseInt(_0x1761c8(0x1f9))/0x6*(parseInt(_0x1761c8(0x212))/0x7)+-parseInt(_0x1761c8(0x237))/0x8+parseInt(_0x1761c8(0x227))/0x9*(-parseInt(_0x1761c8(0x1e6))/0xa)+parseInt(_0x1761c8(0x223))/0xb;if(_0x5e51f1===_0x596496)break;else _0x15c843['push'](_0x15c843['shift']());}catch(_0x189408){_0x15c843['push'](_0x15c843['shift']());}}}(a0_0xfc20,0x57e8b));import a0_0x3c9a89 from'../core/mgba.js';import*as a0_0x554fe1 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document[a0_0x448d2a(0x1d5)](a0_0x448d2a(0x210))};function initializeCore(_0x19672a,_0x24e15b){_0x19672a(_0x24e15b)['then'](function(_0x1cc7ee){const _0x287e62=a0_0x268f;_0x1cc7ee[_0x287e62(0x1f7)]();});}initializeCore(a0_0x3c9a89,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x448d2a(0x1d5)]('canvas'),savedTurboState=localStorage[a0_0x448d2a(0x1f5)]('turboState'),controlSetting=document[a0_0x448d2a(0x1d5)]('control-setting');function handleVisibilityChange(_0x28745d){const _0x12cb5d=a0_0x448d2a;document['visibilityState']==='hidden'||_0x28745d?.[_0x12cb5d(0x1fb)]==='beforeunload'||_0x28745d?.[_0x12cb5d(0x1e8)]?(pauseGame(),canvas[_0x12cb5d(0x1f1)]['add'](_0x12cb5d(0x1ed))):(setTimeout(()=>{const _0x37d1c1=_0x12cb5d;canvas[_0x37d1c1(0x1f1)][_0x37d1c1(0x211)](_0x37d1c1(0x1ed));},0x258),controlSetting['classList']['contains']('visible')&&resumeGame());}async function statusShow(){const _0x2fad28=a0_0x448d2a;document[_0x2fad28(0x1e0)]('pagehide',handleVisibilityChange),document[_0x2fad28(0x1e0)](_0x2fad28(0x1e3),handleVisibilityChange),window['addEventListener']('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x554fe1[_0x2fad28(0x200)](turboState)),await delay(0xc8),await Module[_0x2fad28(0x21a)](),await delay(0x320),await led(parseInt(localStorage[_0x2fad28(0x1f5)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x17574e=a0_0x448d2a;await ledSave(_0x17574e(0x230)),await Module[_0x17574e(0x1d9)](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x17574e(0x21d)](_0x17574e(0x214)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x12f678=a0_0x448d2a,_0x1d1c8c=localStorage[_0x12f678(0x1f5)](_0x12f678(0x1ff)),_0x2f4d33=_0x1d1c8c[_0x12f678(0x202)](/\.(zip|gb|gbc|gba)$/,_0x12f678(0x216)),_0x4ce382=localStorage[_0x12f678(0x1f5)]('uId');navigator[_0x12f678(0x20c)]&&(_0x4ce382&&(await ledSave(_0x12f678(0x1de)),await delay(0x3e8),await dpUploadFile(_0x2f4d33,Module[_0x12f678(0x1e7)](_0x12f678(0x1f8)+_0x2f4d33),_0x12f678(0x1f2)),await lockNoti('',_0x12f678(0x1df)+ ++countUpload+_0x12f678(0x1e1),0x7d0)));}function startTimer(){let [_0x4408c1,_0x2ebbb1,_0x20815a,_0x5b89e1,_0x1d88a7]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x1cfa4d=a0_0x268f;_0x20815a++,_0x5b89e1++,_0x1d88a7++;if(_0x20815a===0x3c)[_0x20815a,_0x2ebbb1]=[0x0,_0x2ebbb1+0x1];if(_0x2ebbb1===0x3c)[_0x2ebbb1,_0x4408c1]=[0x0,_0x4408c1+0x1];document[_0x1cfa4d(0x1d5)](_0x1cfa4d(0x201))['textContent']=_0x4408c1+'h'+_0x2ebbb1[_0x1cfa4d(0x1e4)]()[_0x1cfa4d(0x217)](0x2,'0')+'.'+_0x20815a[_0x1cfa4d(0x1e4)]()[_0x1cfa4d(0x217)](0x2,'0');_0x5b89e1===0x3c&&(saveStatePeriodically(),_0x5b89e1=0x0);;_0x1d88a7===0x708&&(saveStateInCloud(),_0x1d88a7=0x0);;},0x3e8);}export async function uploadGame(_0x120dc7){const _0x5347e0=a0_0x448d2a,_0x42469f=_0x120dc7[_0x5347e0(0x236)][0x0];Module[_0x5347e0(0x22b)](_0x42469f,()=>{Module['FSSync']();});}export async function loadGame(_0x4ef962){const _0x156fe8=a0_0x448d2a,_0xa1fa8=_0x4ef962[_0x156fe8(0x202)](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x3c3628=Module[_0x156fe8(0x232)]()[_0x156fe8(0x22e)](_0x55a2f6=>_0x55a2f6!=='.'&&_0x55a2f6!=='..');intro[_0x156fe8(0x1f1)][_0x156fe8(0x233)](_0x156fe8(0x1f4)),errorLogElements[0x0][_0x156fe8(0x208)][_0x156fe8(0x1fd)]='0',ingame[_0x156fe8(0x1f1)][_0x156fe8(0x211)]('disable'),_0x4ef962[_0x156fe8(0x1fa)]('.gbc')||_0x4ef962['endsWith']('.gb')?(canvas[_0x156fe8(0x1f1)][_0x156fe8(0x233)]('gbc'),areaTrans[_0x156fe8(0x1f1)][_0x156fe8(0x233)](_0x156fe8(0x1d8)),localStorage[_0x156fe8(0x207)]('screenSize',_0x156fe8(0x209)+(window[_0x156fe8(0x1ea)]-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage[_0x156fe8(0x207)](_0x156fe8(0x205),_0x156fe8(0x209)+(window['innerWidth']-0x96)+','+(window[_0x156fe8(0x1ea)]-0x96)*0x2/0x3),_0x3c3628[_0x156fe8(0x21b)](_0xa1fa8)?(await Module[_0x156fe8(0x228)](_0x156fe8(0x20b)+_0x4ef962),confirm(_0x156fe8(0x219))&&(await Module['loadState'](0x0),localStorage[_0x156fe8(0x207)](_0x156fe8(0x1ff),_0x4ef962),console['log'](_0x4ef962))):(await Module[_0x156fe8(0x228)](_0x156fe8(0x20b)+_0x4ef962),localStorage[_0x156fe8(0x207)](_0x156fe8(0x1ff),_0x4ef962),console[_0x156fe8(0x21d)](_0x4ef962)),await statusShow();}export async function saveState(_0x2a565e){const _0x23eaee=a0_0x448d2a;await Module[_0x23eaee(0x1d9)](_0x2a565e),await Module[_0x23eaee(0x1e5)]();}export async function loadState(_0x4a78e4){const _0x54a79a=a0_0x448d2a;await Module[_0x54a79a(0x234)](_0x4a78e4);}export async function downloadFile(_0x504103,_0xc63c69){const _0x16d30d=a0_0x448d2a,_0x342166=Module[_0x16d30d(0x1e7)](_0x504103),_0x162e81=document[_0x16d30d(0x1ef)]('a');document[_0x16d30d(0x1eb)][_0x16d30d(0x231)](_0x162e81),_0x162e81[_0x16d30d(0x1da)]=_0xc63c69;const _0x2f4aaf=new Blob([_0x342166],{'type':_0x16d30d(0x1fc)});_0x162e81[_0x16d30d(0x235)]=URL['createObjectURL'](_0x2f4aaf),_0x162e81[_0x16d30d(0x1db)](),URL[_0x16d30d(0x20f)](_0x2f4aaf),_0x162e81[_0x16d30d(0x211)]();}export function downloadFileInCloud(_0x3fc996){const _0x320ad9=a0_0x448d2a,_0x1cd00e=Module[_0x320ad9(0x1e7)](_0x3fc996);return _0x1cd00e;}export async function uploadFileInCloud(_0x1d61ed){Module['uploadAll'](_0x1d61ed,()=>{const _0x25a542=a0_0x268f;localStorageFile(),Module[_0x25a542(0x1e5)]();});}function a0_0xfc20(){const _0x1f1554=['innerWidth','body','substring','visible','1104428wMQZwX','createElement','now','classList','state','uploadAll','disable','getItem','length','FSInit','/data/states/','655386VlBUwq','endsWith','type','application/octet-stream','bottom','listSaves','gameName','turboF','timer','replace','encode','indexOf','screenSize','_savedCheats','setItem','style','0,0,','15512pzaQRz','/data/games/','onLine','185619MyJRFW','buttonPress','revokeObjectURL','canvas','remove','7rpILsP','deleteFile','Auto\x20save\x20','tEXtComment\x00','.ss0','padStart','setFastForwardMultiplier','Do\x20you\x20want\x20to\x20load\x20save\x20state?','SDL2','includes','autoLoadCheats','log','Off','pauseGame','image/png','buttonUnpress','Paused!','18902631LCevEP','split','fileSize','textContent','249948COzQGC','loadGame','charCodeAt','800mAftSY','uploadRom','screenshot','.png','filter','Resumed!','#20A5A6','appendChild','listStates','add','loadState','href','files','5277104MGArcW','getElementById','3HWUeVI','editFileName','gbc1','saveState','download','click','setVolume','listRoms','#E0C068','Cloud\x20upload\x20','addEventListener','\x20time(s)','set','visibilitychange','toString','FSSync','170mEMnrL','downloadFile','persisted','/data/screenshots/'];a0_0xfc20=function(){return _0x1f1554;};return a0_0xfc20();}export async function uploadFile(_0x345b75){const _0x6c8d01=a0_0x448d2a,_0x440a39=_0x345b75[_0x6c8d01(0x236)][0x0];Module[_0x6c8d01(0x1f3)](_0x440a39,()=>{const _0x485d9c=_0x6c8d01;localStorageFile(),Module[_0x485d9c(0x1e5)]();});}export async function editFile(_0x396ff3,_0x2768b8,_0x1a9dd2){const _0x488a34=a0_0x448d2a;await Module[_0x488a34(0x1d7)](_0x396ff3,_0x2768b8,_0x1a9dd2),await Module['FSSync']();}export async function deleteFile(_0x19734b){const _0x5362f7=a0_0x448d2a;await Module[_0x5362f7(0x213)](_0x19734b),await Module['FSSync']();}export function listGame(){const _0x1f5cb8=a0_0x448d2a,_0x42dbb2=Module[_0x1f5cb8(0x1dd)]()[_0x1f5cb8(0x22e)](_0x54350d=>_0x54350d!=='.'&&_0x54350d!=='..');return _0x42dbb2;}export function listSave(){const _0x4b3536=a0_0x448d2a,_0x4e27a2=Module[_0x4b3536(0x1fe)]()[_0x4b3536(0x22e)](_0x35e636=>_0x35e636!=='.'&&_0x35e636!=='..');return _0x4e27a2;}export function listState(){const _0x4c96c6=a0_0x448d2a,_0x4a5754=Module[_0x4c96c6(0x232)]()[_0x4c96c6(0x22e)](_0x1f5a17=>_0x1f5a17!=='.'&&_0x1f5a17!=='..');return _0x4a5754;}export function listCheat(){const _0x5d16e8=a0_0x448d2a,_0x384034=Module['listCheats']()[_0x5d16e8(0x22e)](_0x4d4652=>_0x4d4652!=='.'&&_0x4d4652!=='..');return _0x384034;}export function listScreenshot(){const _0x32e940=a0_0x448d2a,_0x3a1dbe=Module['listScreenshots']()[_0x32e940(0x22e)](_0x516951=>_0x516951!=='.'&&_0x516951!=='..');return _0x3a1dbe;}export function embedTextInPngFile(_0x25e334,_0x29a593,_0x38e580){const _0x3d98f0=a0_0x448d2a;let _0x179fbf=atob(_0x25e334[_0x3d98f0(0x224)](',')[0x1]),_0x1d047c=new Uint8Array(_0x179fbf[_0x3d98f0(0x1f6)]);for(let _0x3ecad3=0x0;_0x3ecad3<_0x179fbf['length'];_0x3ecad3++){_0x1d047c[_0x3ecad3]=_0x179fbf[_0x3d98f0(0x229)](_0x3ecad3);}let _0x3ad56b=new TextEncoder()[_0x3d98f0(0x203)](_0x3d98f0(0x215)+_0x29a593),_0x269f1f=new Uint8Array(_0x1d047c['length']+_0x3ad56b['length']);_0x269f1f['set'](_0x1d047c,0x0),_0x269f1f[_0x3d98f0(0x1e2)](_0x3ad56b,_0x1d047c[_0x3d98f0(0x1f6)]);let _0x31d879=new Blob([_0x269f1f],{'type':_0x3d98f0(0x220)}),_0x50dd35=new File([_0x31d879],_0x38e580,{'type':_0x3d98f0(0x220)});return _0x50dd35;}export function extractTextFromPngBase64(_0x22e6f3){const _0x2534c6=a0_0x448d2a;let _0x15bfce=atob(_0x22e6f3[_0x2534c6(0x224)](',')[0x1]),_0x3474f3=_0x2534c6(0x215),_0x17d4c3=_0x15bfce[_0x2534c6(0x204)](_0x3474f3);if(_0x17d4c3!==-0x1)return _0x15bfce[_0x2534c6(0x1ec)](_0x17d4c3+_0x3474f3[_0x2534c6(0x1f6)]);return null;}export function fileSize(_0x164254){const _0x59a068=a0_0x448d2a,_0x351b3d=Module[_0x59a068(0x225)](_0x164254);return _0x351b3d;}export async function resumeGame(){const _0x1842c6=a0_0x448d2a;Module['resumeGame'](),Module[_0x1842c6(0x21a)](),notiMessage(_0x1842c6(0x22f),0x7d0);}export async function pauseGame(){const _0x50c1df=a0_0x448d2a;Module[_0x50c1df(0x21f)](),Module['SDL2'](),notiMessage(_0x50c1df(0x222),0x7d0);}export async function buttonPress(_0x5e6802){const _0xfbc34d=a0_0x448d2a;Module[_0xfbc34d(0x20e)](_0x5e6802);}export async function buttonUnpress(_0xf7a0fe){const _0x3805cb=a0_0x448d2a;Module[_0x3805cb(0x221)](_0xf7a0fe);}export async function screenShot(_0x29f401){const _0x230ac3=a0_0x448d2a,_0x40a751=localStorage[_0x230ac3(0x1f5)](_0x230ac3(0x1ff))['replace'](/\.(gba|gbc|gb|zip)$/,''),_0x1880ca=_0x40a751+'_'+_0x29f401+_0x230ac3(0x22d);await Module[_0x230ac3(0x22c)](_0x1880ca),await Module[_0x230ac3(0x1e5)]();const _0x937fd8=await fileToBase64(Module[_0x230ac3(0x1e7)](_0x230ac3(0x1e9)+_0x1880ca)),_0x561e46=embedTextInPngFile(_0x937fd8,formatDateTime(Date[_0x230ac3(0x1f0)]()),_0x1880ca);Module['uploadAll'](_0x561e46,()=>{const _0x160e2f=_0x230ac3;localStorageFile(),Module[_0x160e2f(0x1e5)]();});}export async function dowloadScreenShot(_0x55a0ed){try{const _0xafbefa=await fileToBase64(Module['downloadFile'](_0x55a0ed));return _0xafbefa;}catch{}}export async function captureOCR(_0x22a578){const _0x39b110=a0_0x448d2a;Module[_0x39b110(0x22c)](_0x22a578);const _0x204718=Module['downloadFile'](_0x39b110(0x1e9)+_0x22a578);return _0x204718;}export async function setFastForwardMultiplier(_0x570dee){const _0x55e866=a0_0x448d2a;Module[_0x55e866(0x218)](_0x570dee);}export function uploadCheats(_0xa2babc,_0x27de64,_0x339cf3,_0x4bbbd2,_0x35481b){Module['uploadAll'](_0xa2babc,()=>{const _0x176299=a0_0x268f;Module[_0x176299(0x21c)](),setTimeout(()=>{const _0x51721b=_0x176299;Module[_0x51721b(0x1e5)]();},0x1f4),_0x4bbbd2&&(localStorage[_0x176299(0x207)](_0x27de64+_0x176299(0x206),_0x339cf3),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x35481b[_0x176299(0x226)]=localStorage[_0x176299(0x1f5)](_0x27de64+'_savedCheats'||_0x176299(0x21e));});}export function setVolume(_0x3cb5a8){const _0x5308f3=a0_0x448d2a;Module[_0x5308f3(0x1dc)](_0x3cb5a8);}