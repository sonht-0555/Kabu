const a0_0x4f002e=a0_0x223e;(function(_0x2099b9,_0x1f1145){const _0x1687f0=a0_0x223e,_0x1ceeb5=_0x2099b9();while(!![]){try{const _0x1ed35a=parseInt(_0x1687f0(0x1ea))/0x1*(-parseInt(_0x1687f0(0x1f8))/0x2)+-parseInt(_0x1687f0(0x1f7))/0x3+parseInt(_0x1687f0(0x1cf))/0x4+parseInt(_0x1687f0(0x223))/0x5+parseInt(_0x1687f0(0x215))/0x6+parseInt(_0x1687f0(0x20d))/0x7+parseInt(_0x1687f0(0x1fd))/0x8*(-parseInt(_0x1687f0(0x1d0))/0x9);if(_0x1ed35a===_0x1f1145)break;else _0x1ceeb5['push'](_0x1ceeb5['shift']());}catch(_0x13a643){_0x1ceeb5['push'](_0x1ceeb5['shift']());}}}(a0_0x3c69,0xdf714));import a0_0x3b6031 from'../core/mgba.js';import*as a0_0x5cf4fc from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x4f002e(0x1e7)](a0_0x4f002e(0x225))};function a0_0x3c69(){const _0x376437=['uploadCheats','Error\x20uploadCheat:','getElementById','.gbc','saveState','65215nYZlin','visible','listSaves','pagehide','toString','setItem','innerWidth','listGames','visibilitychange','replace','resumeGame','.ss0','_savedCheats','2990943sMRNUZ','32UAFJmt','/data/screenshots/','loadGame','turboState','hidden','43336wSeRTt','uploadSaveOrSaveState','add','screenshot','files','createObjectURL','editFileName','SDL2','now','deleteFile','onLine','turboF','slotStateSaved','application/octet-stream','screenSize','/data/states/','12046587TIkzVP','uploadRom','FSInit','disable','.png','Online!','control-setting','visibilityState','8375094HolvlX','body','log','addEventListener','createElement','\x20time(s)','timer','downloadFile','.gb','Error\x20uploadSavSta:','Cheat\x20uploaded\x20successfully:','listScreenshots','#E0C068','href','2001930RjhEGX','loadState','canvas','Off','Do\x20you\x20want\x20to\x20load\x20save\x20state?','_imageState0','error','revokeObjectURL','endsWith','uId','persisted','remove','name','Auto\x20save\x20','FSSync','4297596QSbyni','2718jJuMZQ','textContent','getItem','_dateState','Resumed!','.gba','padStart','listStates','gameName','No\x20screenshot!','0,0,','style','#20A5A6','beforeunload','click','classList','download','_dateState0','gbc1','buttonPress','_slot0.txt'];a0_0x3c69=function(){return _0x376437;};return a0_0x3c69();}function initializeCore(_0x195678,_0x3dcf93){_0x195678(_0x3dcf93)['then'](function(_0xbd2dc1){const _0x25dbdc=a0_0x223e;_0xbd2dc1[_0x25dbdc(0x20f)]();});}initializeCore(a0_0x3b6031,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x4f002e(0x1e7)]('canvas'),savedTurboState=localStorage['getItem'](a0_0x4f002e(0x1fb)),controlSetting=document[a0_0x4f002e(0x1e7)](a0_0x4f002e(0x213));function handleVisibilityChange(_0x21646c){const _0x56a55a=a0_0x4f002e;document[_0x56a55a(0x214)]===_0x56a55a(0x1fc)||_0x21646c?.['type']===_0x56a55a(0x1dd)||_0x21646c?.[_0x56a55a(0x1ca)]?(pauseGame(),canvas[_0x56a55a(0x1df)]['add'](_0x56a55a(0x1eb))):(setTimeout(()=>{const _0x1962d0=_0x56a55a;canvas[_0x1962d0(0x1df)]['remove'](_0x1962d0(0x1eb));},0x258),controlSetting['classList']['contains'](_0x56a55a(0x1eb))&&resumeGame());}async function statusShow(){const _0x3a61c8=a0_0x4f002e;document[_0x3a61c8(0x218)](_0x3a61c8(0x1ed),handleVisibilityChange),document['addEventListener'](_0x3a61c8(0x1f2),handleVisibilityChange),window['addEventListener'](_0x3a61c8(0x1dd),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x5cf4fc[_0x3a61c8(0x208)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x3a61c8(0x1d2)](_0x3a61c8(0x209)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x58d8c8=a0_0x4f002e;await ledSave(_0x58d8c8(0x1dc)),await Module[_0x58d8c8(0x1e9)](0x0),await Module[_0x58d8c8(0x1ce)](),await screenShot(0x0),console[_0x58d8c8(0x217)](_0x58d8c8(0x1cd)+ ++countAutoSave+_0x58d8c8(0x21a));}async function saveStateInCloud(){const _0x182ea0=a0_0x4f002e,_0x550112=localStorage[_0x182ea0(0x1d2)]('gameName'),_0x127e4b=_0x550112[_0x182ea0(0x1f3)](_0x182ea0(0x1d5),'.ss0'),_0x4ecf6a=localStorage[_0x182ea0(0x1d2)](_0x182ea0(0x1c9)),_0x44333b=localStorage[_0x182ea0(0x1d2)](_0x550112+_0x182ea0(0x228)),_0x9a364e=localStorage[_0x182ea0(0x1d2)](_0x550112+_0x182ea0(0x1e1));if(navigator[_0x182ea0(0x207)]){if(_0x4ecf6a){await ledSave(_0x182ea0(0x221)),await delay(0x3e8),await dpUploadFile(_0x127e4b,Module[_0x182ea0(0x21c)](_0x182ea0(0x20c)+_0x127e4b));if(_0x44333b!==null){const _0x1a8ea0=_0x44333b+'\x0a\x0a'+_0x9a364e,_0x3d474d=new Blob([_0x1a8ea0],{'type':'text/plain'});await dpUploadFile(_0x550112+_0x182ea0(0x1e4),_0x3d474d);}else console[_0x182ea0(0x217)](_0x182ea0(0x1d9));await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x182ea0(0x21a),0x7d0);}else console[_0x182ea0(0x217)]('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0x182ea0(0x217)](_0x182ea0(0x212));}function startTimer(){let [_0x34dbef,_0x525a4a,_0x3f0a2a,_0x2d8f5a,_0x2349bd]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x405905=a0_0x223e;_0x3f0a2a++,_0x2d8f5a++,_0x2349bd++;if(_0x3f0a2a===0x3c)[_0x3f0a2a,_0x525a4a]=[0x0,_0x525a4a+0x1];if(_0x525a4a===0x3c)[_0x525a4a,_0x34dbef]=[0x0,_0x34dbef+0x1];document[_0x405905(0x1e7)](_0x405905(0x21b))['textContent']=_0x34dbef+'h'+_0x525a4a[_0x405905(0x1ee)]()['padStart'](0x2,'0')+'.'+_0x3f0a2a['toString']()[_0x405905(0x1d6)](0x2,'0');_0x2d8f5a===0x3c&&(saveStatePeriodically(),_0x2d8f5a=0x0);;_0x2d8f5a===0xe10&&(saveStateInCloud(),_0x2349bd=0x0);;},0x3e8);}export async function uploadGame(_0x3f85c3){const _0x275f25=a0_0x4f002e,_0x37b3fa=_0x3f85c3['files'][0x0];Module[_0x275f25(0x20e)](_0x37b3fa,()=>{const _0x5a7ac2=_0x275f25;Module[_0x5a7ac2(0x1ce)]();});}export async function loadGame(_0x42b0e8){const _0x584036=a0_0x4f002e,_0x2ea0e5=_0x42b0e8['replace'](/\.(gba|gbc|gb|zip)$/,_0x584036(0x1f5)),_0x1bc30c=Module[_0x584036(0x1d7)]();intro['classList'][_0x584036(0x1ff)]('disable'),errorLogElements[0x0][_0x584036(0x1db)]['bottom']='0',ingame[_0x584036(0x1df)][_0x584036(0x1cb)](_0x584036(0x210)),_0x42b0e8[_0x584036(0x1c8)](_0x584036(0x1e8))||_0x42b0e8['endsWith'](_0x584036(0x21d))?(canvas[_0x584036(0x1df)]['add']('gbc'),areaTrans[_0x584036(0x1df)]['add'](_0x584036(0x1e2)),localStorage[_0x584036(0x1ef)]('screenSize',_0x584036(0x1da)+(window[_0x584036(0x1f0)]-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage['setItem'](_0x584036(0x20b),_0x584036(0x1da)+(window[_0x584036(0x1f0)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x1bc30c['includes'](_0x2ea0e5)?(await Module[_0x584036(0x1fa)]('/data/games/'+_0x42b0e8),confirm(_0x584036(0x227))&&(await Module[_0x584036(0x224)](0x0),localStorage[_0x584036(0x1ef)](_0x584036(0x1d8),_0x42b0e8),console[_0x584036(0x217)](_0x42b0e8))):(await Module[_0x584036(0x1fa)]('/data/games/'+_0x42b0e8),localStorage[_0x584036(0x1ef)](_0x584036(0x1d8),_0x42b0e8)),await statusShow();}export async function saveState(_0x20cb9f){const _0x26ef45=a0_0x4f002e;await Module['saveState'](_0x20cb9f),await Module[_0x26ef45(0x1ce)]();}export async function loadState(_0x293214){const _0x23921d=a0_0x4f002e;await Module[_0x23921d(0x224)](_0x293214);}export async function downloadFile(_0x2f6e31,_0x3d2d9c){const _0x4bf2d2=a0_0x4f002e,_0x26800d=Module[_0x4bf2d2(0x21c)](_0x2f6e31),_0x58359b=document[_0x4bf2d2(0x219)]('a');document[_0x4bf2d2(0x216)]['appendChild'](_0x58359b),_0x58359b[_0x4bf2d2(0x1e0)]=_0x3d2d9c;const _0x3050dc=new Blob([_0x26800d],{'type':_0x4bf2d2(0x20a)});_0x58359b[_0x4bf2d2(0x222)]=URL[_0x4bf2d2(0x202)](_0x3050dc),_0x58359b[_0x4bf2d2(0x1de)](),URL[_0x4bf2d2(0x22a)](_0x3050dc),_0x58359b[_0x4bf2d2(0x1cb)]();}export function downloadFileInCloud(_0x417dd9){const _0x4338e4=a0_0x4f002e,_0x566316=Module[_0x4338e4(0x21c)](_0x417dd9);return _0x566316;}export async function uploadFile(_0x35900e){const _0x2fa96e=a0_0x4f002e,_0x4c4c30=_0x35900e[_0x2fa96e(0x201)][0x0];Module[_0x2fa96e(0x1fe)](_0x4c4c30,()=>{const _0x1cc09d=_0x2fa96e;Module[_0x1cc09d(0x1ce)]();});}export async function editFile(_0x3bb26f,_0x212be5,_0x565535){const _0x9a5196=a0_0x4f002e;await Module[_0x9a5196(0x203)](_0x3bb26f,_0x212be5,_0x565535),await Module[_0x9a5196(0x1ce)]();}export async function deleteFile(_0x51f70b){const _0x47f986=a0_0x4f002e;await Module[_0x47f986(0x206)](_0x51f70b),await Module[_0x47f986(0x1ce)]();}export function listGame(){const _0x2bbadd=a0_0x4f002e,_0x2ee643=Module[_0x2bbadd(0x1f1)]();return _0x2ee643;}export function listSave(){const _0x44419b=a0_0x4f002e,_0x51ef80=Module[_0x44419b(0x1ec)]();return _0x51ef80;}export function listState(){const _0x26b0b1=a0_0x4f002e,_0x14db6e=Module[_0x26b0b1(0x1d7)]();return _0x14db6e;}export function listCheat(){const _0x2e0ced=Module['listCheats']();return _0x2e0ced;}export function listScreenshot(){const _0xa46451=a0_0x4f002e,_0x33815e=Module[_0xa46451(0x220)]();return _0x33815e;}export function fileSize(_0x4b2634){const _0x35de74=Module['fileSize'](_0x4b2634);return _0x35de74;}export async function uploadCheat(_0x4d25ed){const _0x2b1eaf=a0_0x4f002e;try{const _0x558e4c=_0x4d25ed[_0x2b1eaf(0x201)][0x0];await Module[_0x2b1eaf(0x1e5)](_0x558e4c,()=>{const _0x5086db=_0x2b1eaf;console['log'](_0x5086db(0x21f),_0x558e4c[_0x5086db(0x1cc)]),localStorageFile(),Module[_0x5086db(0x1ce)]();});}catch(_0x3a1495){console[_0x2b1eaf(0x229)](_0x2b1eaf(0x1e6),_0x3a1495);}}export async function uploadSavSta(_0x5b22f1){const _0x2dc4f7=a0_0x4f002e;try{const _0xcceb42=_0x5b22f1[_0x2dc4f7(0x201)][0x0];await Module[_0x2dc4f7(0x1fe)](_0xcceb42,()=>{const _0x1b476d=_0x2dc4f7;console[_0x1b476d(0x217)]('Save/State\x20uploaded\x20successfully:',_0xcceb42[_0x1b476d(0x1cc)]),localStorageFile(),Module['FSSync']();});}catch(_0xac8b17){console[_0x2dc4f7(0x229)](_0x2dc4f7(0x21e),_0xac8b17);}}export async function uploadSaveOrSaveState(_0x172707){const _0x5bd82e=a0_0x4f002e;Module[_0x5bd82e(0x1fe)](_0x172707,()=>{localStorageFile(),Module['FSSync']();});}export async function resumeGame(){const _0x448d2b=a0_0x4f002e;Module[_0x448d2b(0x1f4)](),Module['SDL2'](),notiMessage(_0x448d2b(0x1d4),0x7d0);}export async function pauseGame(){const _0x4a7bf5=a0_0x4f002e;Module['pauseGame'](),Module[_0x4a7bf5(0x204)](),notiMessage('Paused!',0x7d0);}function a0_0x223e(_0x450d4a,_0x4c3e67){const _0x3c6964=a0_0x3c69();return a0_0x223e=function(_0x223e67,_0x4f05ce){_0x223e67=_0x223e67-0x1c8;let _0x5a58ae=_0x3c6964[_0x223e67];return _0x5a58ae;},a0_0x223e(_0x450d4a,_0x4c3e67);}export async function buttonPress(_0x2520e4){const _0x4aac63=a0_0x4f002e;Module[_0x4aac63(0x1e3)](_0x2520e4);}export async function buttonUnpress(_0x40b3e9){Module['buttonUnpress'](_0x40b3e9);}export async function screenShot(_0x573cf7){const _0x180b7e=a0_0x4f002e,_0x2282ff=localStorage[_0x180b7e(0x1d2)](_0x180b7e(0x1d8)),_0x55aedf=_0x2282ff[_0x180b7e(0x1f3)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x180b7e(0x200)](''+_0x55aedf+_0x573cf7+_0x180b7e(0x211)),await Module['FSSync']();const _0x4ae9ed=await fileToBase64(Module[_0x180b7e(0x21c)]('/data/screenshots/'+_0x55aedf+_0x573cf7+_0x180b7e(0x211))),_0x3c538c=Date[_0x180b7e(0x205)](),_0x4588b8=formatDateTime(_0x3c538c);localStorage[_0x180b7e(0x1ef)](_0x2282ff+_0x180b7e(0x1d3)+_0x573cf7,_0x4588b8),localStorage[_0x180b7e(0x1ef)](_0x2282ff+'_imageState'+_0x573cf7,_0x4ae9ed);}export async function captureOCR(_0x39781a){const _0x1c9ec9=a0_0x4f002e;Module[_0x1c9ec9(0x200)](_0x39781a);const _0x132e67=Module['downloadFile'](_0x1c9ec9(0x1f9)+_0x39781a);return _0x132e67;}export async function setFastForwardMultiplier(_0x1b734a){Module['setFastForwardMultiplier'](_0x1b734a);}export function uploadCheats(_0x1a22b6,_0x59267c,_0x454b4c,_0x2b4b01,_0x1c569c){const _0x1bb2da=a0_0x4f002e;Module[_0x1bb2da(0x1e5)](_0x1a22b6,()=>{const _0x9269b=_0x1bb2da;Module['autoLoadCheats'](),setTimeout(()=>{const _0x470198=a0_0x223e;Module[_0x470198(0x1ce)]();},0x1f4),_0x2b4b01&&(localStorage[_0x9269b(0x1ef)](_0x59267c+_0x9269b(0x1f6),_0x454b4c),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x1c569c[_0x9269b(0x1d1)]=localStorage[_0x9269b(0x1d2)](_0x59267c+_0x9269b(0x1f6)||_0x9269b(0x226));});}