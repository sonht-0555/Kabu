const a0_0x36d88b=a0_0x3497;(function(_0x49bce3,_0x253880){const _0x4d9421=a0_0x3497,_0x3232d4=_0x49bce3();while(!![]){try{const _0x120c32=parseInt(_0x4d9421(0xd6))/0x1+parseInt(_0x4d9421(0x113))/0x2+parseInt(_0x4d9421(0x11a))/0x3*(-parseInt(_0x4d9421(0xf6))/0x4)+-parseInt(_0x4d9421(0x11d))/0x5*(parseInt(_0x4d9421(0xcd))/0x6)+-parseInt(_0x4d9421(0xf4))/0x7+-parseInt(_0x4d9421(0xcb))/0x8*(-parseInt(_0x4d9421(0x102))/0x9)+parseInt(_0x4d9421(0x107))/0xa*(parseInt(_0x4d9421(0x117))/0xb);if(_0x120c32===_0x253880)break;else _0x3232d4['push'](_0x3232d4['shift']());}catch(_0x38f1f1){_0x3232d4['push'](_0x3232d4['shift']());}}}(a0_0x4a6c,0xe5314));import a0_0x26be99 from'../core/1.1.0/mgba.js';import a0_0x521ad9 from'../core/2.0.0/mgba.js';import*as a0_0x47afcc from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x26be99,'2.0.0':a0_0x521ad9};let currentVersion=localStorage['getItem'](a0_0x36d88b(0x120))||a0_0x36d88b(0x130),mGBA=versions[currentVersion];document[a0_0x36d88b(0xe9)](a0_0x36d88b(0x120))[a0_0x36d88b(0xcf)]='Wasm_©'+currentVersion,document[a0_0x36d88b(0xe9)]('GBAver')['addEventListener'](a0_0x36d88b(0xda),()=>{const _0x2f4124=a0_0x36d88b,_0x231e82=Object[_0x2f4124(0xfe)](versions);let _0x35ef9c=_0x231e82[_0x2f4124(0x116)](currentVersion);currentVersion=_0x231e82[(_0x35ef9c+0x1)%_0x231e82[_0x2f4124(0x123)]],localStorage[_0x2f4124(0xfa)](_0x2f4124(0x120),currentVersion),document[_0x2f4124(0xe9)](_0x2f4124(0x120))[_0x2f4124(0xcf)]=_0x2f4124(0xe4)+currentVersion,setTimeout(()=>{const _0x2c7b92=_0x2f4124;window[_0x2c7b92(0xe7)][_0x2c7b92(0x147)]();},0x3e8);});const Module={'canvas':document[a0_0x36d88b(0xe9)](a0_0x36d88b(0x109))};function initializeCore(_0x5c69e9,_0x1d0c52){const _0x57dbb8=a0_0x36d88b;_0x5c69e9(_0x1d0c52)[_0x57dbb8(0xf5)](function(_0x8743c5){const _0x2e2b87=_0x57dbb8;_0x8743c5[_0x2e2b87(0xd7)]();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x36d88b(0xe9)]('canvas'),controlSetting=document['getElementById'](a0_0x36d88b(0x119));function handleVisibilityChange(_0x44244d){const _0x36d22c=a0_0x36d88b;document[_0x36d22c(0x134)]==='hidden'||_0x44244d?.[_0x36d22c(0x115)]===_0x36d22c(0x10a)||_0x44244d?.[_0x36d22c(0x103)]?(Module[_0x36d22c(0x140)](),pauseGame(),canvas[_0x36d22c(0x104)][_0x36d22c(0x106)](_0x36d22c(0x13f))):(setTimeout(()=>{const _0x445528=_0x36d22c;canvas['classList']['remove'](_0x445528(0x13f));},0x258),controlSetting['classList'][_0x36d22c(0x13d)](_0x36d22c(0x13f))&&resumeGame());}async function statusShow(){const _0x565b77=a0_0x36d88b;document[_0x565b77(0xdd)](_0x565b77(0xee),handleVisibilityChange),document[_0x565b77(0xdd)](_0x565b77(0xd8),handleVisibilityChange),window['addEventListener']('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),await a0_0x47afcc[_0x565b77(0x11f)](parseInt(await getData(gameName,'0',_0x565b77(0x142)))),await delay(0xc8),await Module[_0x565b77(0x12d)](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x565b77(0x136)))),await notiMessage(_0x565b77(0x114)+currentVersion,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x265577=a0_0x36d88b;await ledSave(_0x265577(0x108)),await Module['saveState'](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x265577(0xd2)]('Auto\x20save\x20'+ ++countAutoSave+_0x265577(0xf0));}async function saveStateInCloud(){const _0xa34cc5=a0_0x36d88b,_0x1b0aa8=gameName[_0xa34cc5(0xed)](/\.(zip|gb|gbc|gba)$/,_0xa34cc5(0xf8)),_0x55c7ef=localStorage[_0xa34cc5(0xc7)]('uId');navigator[_0xa34cc5(0x129)]&&(_0x55c7ef&&(await ledSave(_0xa34cc5(0xf1)),await delay(0x3e8),await dpUploadFile(_0x1b0aa8,Module[_0xa34cc5(0xf3)](_0xa34cc5(0x132)+_0x1b0aa8),'state'),await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0xa34cc5(0xf0),0x7d0)));}function startTimer(){let [_0x4ae03d,_0x543116,_0x43f007,_0x593271,_0x4ad114]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x411eb1=a0_0x3497;_0x43f007++,_0x593271++,_0x4ad114++;if(_0x43f007===0x3c)[_0x43f007,_0x543116]=[0x0,_0x543116+0x1];if(_0x543116===0x3c)[_0x543116,_0x4ae03d]=[0x0,_0x4ae03d+0x1];document['getElementById'](_0x411eb1(0xec))[_0x411eb1(0xcf)]=_0x4ae03d+'h'+_0x543116['toString']()[_0x411eb1(0xd0)](0x2,'0')+'.'+_0x43f007[_0x411eb1(0x12e)]()[_0x411eb1(0xd0)](0x2,'0');_0x593271===0x3c&&(saveStatePeriodically(),_0x593271=0x0);;_0x4ad114===0x708&&(saveStateInCloud(),_0x4ad114=0x0);;},0x3e8);}export async function uploadGame(_0x125fc6){const _0x1ff1cf=a0_0x36d88b,_0x49a273=_0x125fc6[_0x1ff1cf(0x145)][0x0];Module['uploadRom'](_0x49a273,()=>{const _0x21ad52=_0x1ff1cf;Module[_0x21ad52(0x140)]();});}export async function loadGame(_0x283f31){const _0x104702=a0_0x36d88b,_0x42dfcd=_0x283f31[_0x104702(0xed)](/\.(gba|gbc|gb|zip)$/,_0x104702(0xf8)),_0x3b14f3=Module['listFiles'](_0x104702(0xfb))[_0x104702(0x105)](_0x5cb828=>_0x5cb828!=='.'&&_0x5cb828!=='..');intro[_0x104702(0x104)][_0x104702(0x106)](_0x104702(0xff)),errorLogElements[0x0][_0x104702(0x13b)][_0x104702(0x13c)]='0',ingame[_0x104702(0x104)]['remove'](_0x104702(0xff)),_0x283f31['endsWith'](_0x104702(0x133))||_0x283f31[_0x104702(0xd4)](_0x104702(0xd3))?(canvas[_0x104702(0x104)][_0x104702(0x106)]('gbc'),areaTrans[_0x104702(0x104)]['add']('gbc1'),localStorage[_0x104702(0xfa)](_0x104702(0xdf),_0x104702(0xdb)+(window[_0x104702(0x135)]-0xe6)+','+(window[_0x104702(0x135)]-0xe6)*0x9/0xa)):localStorage[_0x104702(0xfa)](_0x104702(0xdf),_0x104702(0xdb)+(window['innerWidth']-0x96)+','+(window[_0x104702(0x135)]-0x96)*0x2/0x3),_0x3b14f3[_0x104702(0x126)](_0x42dfcd)?(await Module[_0x104702(0x10e)]('/data/games/'+_0x283f31),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await delay(0x64),await Module[_0x104702(0xf2)](0x0),await shaderData())):(await Module[_0x104702(0x10e)]('/data/games/'+_0x283f31),await shaderData()),await statusShow();}export async function saveState(_0x3e6104){await Module['saveState'](_0x3e6104);}export async function loadState(_0x15c181){const _0x3834f9=a0_0x36d88b;await Module[_0x3834f9(0xf2)](_0x15c181);}export async function downloadFile(_0x2be9eb,_0x4591fd){const _0xc01c34=a0_0x36d88b,_0x42dc6c=Module[_0xc01c34(0xf3)](_0x2be9eb),_0x126b0d=document['createElement']('a');document['body'][_0xc01c34(0x138)](_0x126b0d),_0x126b0d[_0xc01c34(0xca)]=_0x4591fd;const _0x5c56ea=new Blob([_0x42dc6c],{'type':_0xc01c34(0xfd)});_0x126b0d[_0xc01c34(0x12b)]=URL[_0xc01c34(0xc9)](_0x5c56ea),_0x126b0d[_0xc01c34(0xda)](),URL[_0xc01c34(0x100)](_0x5c56ea),_0x126b0d[_0xc01c34(0x10b)]();}function a0_0x4a6c(){const _0x59aab7=['image/png','style','bottom','contains','listStates','visible','FSSync','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','turboState','led01','substring','files','/data/screenshots/','reload','getItem','map','createObjectURL','download','824eIMhgV','listScreenshots','186EdXyUG','charCodeAt','textContent','padStart','encode','log','.gb','endsWith','saveTime','252504lgxOjx','FSInit','visibilitychange','\x20|\x20','click','0,0,','autoLoadCheats','addEventListener','led07','screenSize','resumeGame','led04','pauseGame','.png','Wasm_©','setVolume','tEXtComment\x00','location','led00','getElementById','led0','led06','timer','replace','pagehide','toggleRewind','\x20time(s)','#E0C068','loadState','downloadFile','5984244BirUJC','then','1420648tZLlMm','trim','.ss0','\x20:\x20','setItem','states','rgba(245,\x20232,\x20209,\x200.4)','application/octet-stream','keys','disable','revokeObjectURL','listRoms','62064FVWulZ','persisted','classList','filter','add','6785790wOGVkM','#20A5A6','canvas','beforeunload','remove','Paused!','uploadAll','loadGame','led03','error','exec','noti-mess','3577558aDOurr','W_©','type','indexOf','22UXMYsU','opacity','control-setting','9tAZTTT','0.4','now','201545WGwJhp','split','turboF','GBAver','buttonPress','fileSize','length','setFastForwardMultiplier','join','includes','entries','concat','onLine','buttonUnpress','href','All','SDL2','toString','listCheats','1.1.0','fill','/data/states/','.gbc','visibilityState','innerWidth','slotStateSaved','editFileName','appendChild','screenshot'];a0_0x4a6c=function(){return _0x59aab7;};return a0_0x4a6c();}export function downloadFileInCloud(_0x7ce105){const _0x59f828=a0_0x36d88b;try{const _0x4450c3=Module[_0x59f828(0xf3)](_0x7ce105);return _0x4450c3;}catch(_0x4efa9a){return null;}}export async function uploadFileInCloud(_0x48cdf2){const _0x17cd99=a0_0x36d88b;Module[_0x17cd99(0x10d)](_0x48cdf2,async()=>{const _0x2629e2=_0x17cd99;localStorageFile(),await Module[_0x2629e2(0x140)]();});}export async function uploadFile(_0x44fd64){const _0x3d6efa=a0_0x36d88b,_0x2afb32=_0x44fd64[_0x3d6efa(0x145)][0x0];Module[_0x3d6efa(0x10d)](_0x2afb32,async()=>{const _0x42717c=_0x3d6efa;localStorageFile(),await Module[_0x42717c(0x140)]();});}export async function editFile(_0x438ca1,_0x57d54d,_0x4775c6){const _0x4e2574=a0_0x36d88b;await Module[_0x4e2574(0x137)](_0x438ca1,_0x57d54d,_0x4775c6);}export async function deleteFile(_0x1e21de){const _0xd5158c=a0_0x36d88b;try{return await Module['deleteFile'](_0x1e21de),!![];}catch(_0x4c2661){return console[_0xd5158c(0x110)](_0x1e21de),null;}}export function listFiles(_0x4ea882){const _0x45dd5b=a0_0x36d88b,_0xe87603=Module['listFiles'](_0x4ea882)[_0x45dd5b(0x105)](_0x382c9e=>_0x382c9e!=='.'&&_0x382c9e!=='..');return _0xe87603;}export function listGame(){const _0x376700=a0_0x36d88b,_0x1a648b=Module[_0x376700(0x101)]()['filter'](_0x149919=>_0x149919!=='.'&&_0x149919!=='..');return _0x1a648b;}export function listSave(){const _0x51e8fb=Module['listSaves']()['filter'](_0x5835fb=>_0x5835fb!=='.'&&_0x5835fb!=='..');return _0x51e8fb;}export function listState(){const _0x5eae57=a0_0x36d88b,_0xe9851a=Module[_0x5eae57(0x13e)]()['filter'](_0x3c9743=>_0x3c9743!=='.'&&_0x3c9743!=='..');return _0xe9851a;}export function listCheat(){const _0x26a815=a0_0x36d88b,_0x5992ff=Module[_0x26a815(0x12f)]()['filter'](_0x49d995=>_0x49d995!=='.'&&_0x49d995!=='..');return _0x5992ff;}export function listScreenshot(){const _0xf605f=a0_0x36d88b,_0x1f52af=Module[_0xf605f(0xcc)]()[_0xf605f(0x105)](_0x16175d=>_0x16175d!=='.'&&_0x16175d!=='..');return _0x1f52af;}export function fileSize(_0x53b66a){const _0x2f7b63=a0_0x36d88b,_0x5eb5d4=Module[_0x2f7b63(0x122)](_0x53b66a);return _0x5eb5d4;}export async function resumeGame(){const _0x27b54f=a0_0x36d88b;Module[_0x27b54f(0xe0)](),Module[_0x27b54f(0x12d)](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x500e62=a0_0x36d88b;Module[_0x500e62(0xe2)](),Module[_0x500e62(0x12d)](),notiMessage(_0x500e62(0x10c),0x7d0);}export async function buttonPress(_0x37adaa){const _0x230cc7=a0_0x36d88b;Module[_0x230cc7(0x121)](_0x37adaa);}export async function buttonUnpress(_0xa5cc2){const _0x2c012f=a0_0x36d88b;Module[_0x2c012f(0x12a)](_0xa5cc2);}export async function screenShot(_0x595267){const _0x222fae=a0_0x36d88b,_0x12e965=gameName['replace'](/\.(gba|gbc|gb|zip)$/,'_'+_0x595267+_0x222fae(0xe3)),_0x223c52=await getData(gameName,_0x595267,_0x222fae(0x12c))||'';console[_0x222fae(0xd2)](_0x223c52),await Module[_0x222fae(0x139)](_0x12e965),await setData(gameName,_0x595267,_0x222fae(0xd5),formatDateTime(Date[_0x222fae(0x11c)]()),_0x223c52);}export async function dowloadScreenShot(_0x1034ea){try{const _0x4d1b8e=await fileToBase64(Module['downloadFile'](_0x1034ea));return _0x4d1b8e;}catch{}}export async function captureOCR(_0x1feb20){const _0x5c6fb0=a0_0x36d88b;Module[_0x5c6fb0(0x139)](_0x1feb20);const _0xccaf88=Module[_0x5c6fb0(0xf3)](_0x5c6fb0(0x146)+_0x1feb20);return _0xccaf88;}export async function setFastForwardMultiplier(_0x3daa9c){const _0x1f9bdc=a0_0x36d88b;Module[_0x1f9bdc(0x124)](_0x3daa9c);}export async function uploadCheats(_0x114ba9){const _0x26327b=a0_0x36d88b;Module[_0x26327b(0xdc)](),Module[_0x26327b(0x10d)](_0x114ba9,async()=>{});}export function setVolume(_0x122bd1){const _0x17d05f=a0_0x36d88b;Module[_0x17d05f(0xe5)](_0x122bd1);}export async function setData(_0x4b2526,_0x3ee0d5,_0x40150b,_0x573f10,_0x1ed987=''){const _0x96d35d=a0_0x36d88b,_0x363981=_0x4b2526[_0x96d35d(0xed)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x3f4ea3='/data/screenshots/'+_0x363981+'_'+_0x3ee0d5+_0x96d35d(0xe3);let _0x5dfa86;try{_0x5dfa86=await fileToBase64(Module[_0x96d35d(0xf3)](_0x3f4ea3));}catch(_0xe7e797){await Module['screenshot'](_0x363981+'_'+_0x3ee0d5+_0x96d35d(0xe3)),await delay(0xc8),_0x5dfa86=await fileToBase64(Module['downloadFile'](_0x3f4ea3));}let _0x158b67=atob(_0x5dfa86[_0x96d35d(0x11e)](',')[0x1]),_0x4de589='tEXtComment\x00',_0x3f808c=_0x158b67['indexOf'](_0x4de589),_0x4608a8={};if(_0x3f808c!==-0x1||_0x1ed987[_0x96d35d(0xf7)]()!==''){let _0x4d68f6=_0x3f808c!==-0x1?_0x158b67[_0x96d35d(0x144)](_0x3f808c+_0x4de589[_0x96d35d(0x123)]):_0x1ed987,_0x4b926b=/(\w+)\s*:\s*([^|]*)/g,_0x1ec8f3;while((_0x1ec8f3=_0x4b926b[_0x96d35d(0x111)](_0x4d68f6))!==null){_0x4608a8[_0x1ec8f3[0x1][_0x96d35d(0xf7)]()]=_0x1ec8f3[0x2]['trim']();}_0x3f808c!==-0x1&&(_0x158b67=_0x158b67[_0x96d35d(0x144)](0x0,_0x3f808c));}_0x4608a8[_0x40150b]=_0x573f10;let _0x470253=Object[_0x96d35d(0x127)](_0x4608a8)[_0x96d35d(0xc8)](([_0x1806a8,_0x67bac0])=>_0x1806a8+_0x96d35d(0xf9)+_0x67bac0)[_0x96d35d(0x125)](_0x96d35d(0xd9)),_0x202c65=new TextEncoder()[_0x96d35d(0xd1)](_0x4de589+'\x20'+_0x470253),_0xd51463=new Uint8Array([..._0x158b67][_0x96d35d(0xc8)](_0x4322aa=>_0x4322aa[_0x96d35d(0xce)](0x0))[_0x96d35d(0x128)]([..._0x202c65])),_0x3918c1=new File([new Blob([_0xd51463],{'type':_0x96d35d(0x13a)})],_0x363981+'_'+_0x3ee0d5+_0x96d35d(0xe3),{'type':_0x96d35d(0x13a)});Module[_0x96d35d(0x10d)](_0x3918c1,async()=>{});}export async function getData(_0x446d02,_0x13effc,_0x54d69a){const _0x5d4380=a0_0x36d88b;try{const _0x7b01e0=_0x446d02[_0x5d4380(0xed)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x30f59e=_0x5d4380(0x146)+_0x7b01e0+'_'+_0x13effc+_0x5d4380(0xe3);let _0x405854;try{_0x405854=await fileToBase64(Module[_0x5d4380(0xf3)](_0x30f59e));}catch(_0x59d705){return null;}let _0x1821aa=atob(_0x405854[_0x5d4380(0x11e)](',')[0x1]),_0x2fa339=_0x5d4380(0xe6),_0x3d37e9=_0x1821aa[_0x5d4380(0x116)](_0x2fa339);if(_0x3d37e9!==-0x1){let _0x4358e2=_0x1821aa['substring'](_0x3d37e9+_0x2fa339[_0x5d4380(0x123)]);if(_0x54d69a===_0x5d4380(0x12c))return _0x4358e2[_0x5d4380(0xf7)]();let _0x2ae1d8=new RegExp(_0x54d69a+_0x5d4380(0x141)),_0xce8772=_0x4358e2['match'](_0x2ae1d8);if(_0xce8772)return _0xce8772[0x1]['trim']();}}catch(_0x1579e2){return console['error']({'romName':_0x446d02,'slot':_0x13effc,'type':_0x54d69a}),null;}}export async function ledSave(_0x496830){const _0x4ca91d=a0_0x36d88b,_0x289bbd=parseInt(await getData(gameName,'0','slotStateSaved')),_0x45c983=_0x289bbd===0x1?_0x4ca91d(0x143):_0x289bbd===0x2?'led02':_0x289bbd===0x3?_0x4ca91d(0x10f):_0x289bbd===0x4?_0x4ca91d(0xe1):_0x289bbd===0x5?'led05':_0x289bbd===0x6?_0x4ca91d(0xeb):_0x289bbd===0x7?_0x4ca91d(0xde):_0x4ca91d(0xe8);try{for(let _0x31f619=0x0;_0x31f619<=0x7;_0x31f619++){document[_0x4ca91d(0xe9)](_0x4ca91d(0xea)+_0x31f619)[_0x4ca91d(0x13b)]['fill']=_0x4ca91d(0xfc);}await delay(0x3e8);for(let _0x25b5b3=0x0;_0x25b5b3<=0x7;_0x25b5b3++){document[_0x4ca91d(0xe9)](_0x4ca91d(0xea)+_0x25b5b3)[_0x4ca91d(0x13b)][_0x4ca91d(0x131)]='rgba(245,\x20232,\x20209,\x200.4)';}document[_0x4ca91d(0xe9)](_0x45c983)[_0x4ca91d(0x13b)][_0x4ca91d(0x131)]=_0x496830;}catch(_0x67ea13){console[_0x4ca91d(0x110)]('Error\x20ledSave:',_0x67ea13);}}function a0_0x3497(_0x9ce7f8,_0x2a7d94){const _0x4a6c31=a0_0x4a6c();return a0_0x3497=function(_0x349749,_0x44ca4b){_0x349749=_0x349749-0xc7;let _0x3a52da=_0x4a6c31[_0x349749];return _0x3a52da;},a0_0x3497(_0x9ce7f8,_0x2a7d94);};export async function notiMessage(_0x2e0863,_0x327a2a,_0x4d3deb=![]){const _0x5d64ca=a0_0x36d88b;var _0x3d2fb9=document[_0x5d64ca(0xe9)](_0x5d64ca(0x112));const _0x526aed=parseInt(await getData(gameName,'0',_0x5d64ca(0x136)))||0x0;_0x3d2fb9[_0x5d64ca(0x13b)][_0x5d64ca(0x118)]==='0.4'&&(clearTimeout(messageTimeout),_0x3d2fb9[_0x5d64ca(0x13b)][_0x5d64ca(0x118)]='0'),_0x3d2fb9['textContent']=_0x2e0863,_0x3d2fb9[_0x5d64ca(0x13b)]['opacity']=_0x5d64ca(0x11b),messageTimeout=setTimeout(()=>{const _0x2eebcc=_0x5d64ca;_0x3d2fb9[_0x2eebcc(0xcf)]='['+_0x526aed+']\x20'+gameName[_0x2eebcc(0x144)](0x0,gameName['lastIndexOf']('.')),_0x3d2fb9[_0x2eebcc(0x13b)]['opacity']=_0x2eebcc(0x11b);},_0x327a2a),_0x4d3deb&&(canvas[_0x5d64ca(0x104)][_0x5d64ca(0x106)]('visible'),setTimeout(()=>{const _0x4261c6=_0x5d64ca;canvas['classList']['remove'](_0x4261c6(0x13f));},0x258));}export async function FSSync(){Module['FSSync']();}export const rewind=_0xe9ebc1=>Module[a0_0x36d88b(0xef)]?.(_0xe9ebc1)||null;