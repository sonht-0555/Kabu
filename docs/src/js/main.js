const a0_0x4e2f01=a0_0x3852;(function(_0x344266,_0x29b4b8){const _0x3892a5=a0_0x3852,_0x52771b=_0x344266();while(!![]){try{const _0x291f09=-parseInt(_0x3892a5(0xd1))/0x1*(-parseInt(_0x3892a5(0xc9))/0x2)+-parseInt(_0x3892a5(0x72))/0x3+-parseInt(_0x3892a5(0xc7))/0x4+parseInt(_0x3892a5(0x83))/0x5*(parseInt(_0x3892a5(0xb1))/0x6)+-parseInt(_0x3892a5(0xad))/0x7*(-parseInt(_0x3892a5(0xa5))/0x8)+-parseInt(_0x3892a5(0x7c))/0x9+-parseInt(_0x3892a5(0xac))/0xa;if(_0x291f09===_0x29b4b8)break;else _0x52771b['push'](_0x52771b['shift']());}catch(_0x1da89e){_0x52771b['push'](_0x52771b['shift']());}}}(a0_0x12b8,0xb94d5));import a0_0x1f6ace from'../core/mgba.js';import*as a0_0xf20a8c from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document['getElementById']('canvas')};function initializeCore(_0x4c3d9a,_0x2c0056){const _0x219e30=a0_0x3852;_0x4c3d9a(_0x2c0056)[_0x219e30(0xcf)](function(_0x4e472d){const _0x307673=_0x219e30;_0x4e472d[_0x307673(0x9e)]();});}initializeCore(a0_0x1f6ace,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x4e2f01(0x7e)),savedTurboState=localStorage[a0_0x4e2f01(0x7f)](a0_0x4e2f01(0xbc)),controlSetting=document[a0_0x4e2f01(0xb2)]('control-setting');function handleVisibilityChange(_0x466f1c){const _0x1ff0bf=a0_0x4e2f01;document[_0x1ff0bf(0xcc)]===_0x1ff0bf(0x74)||_0x466f1c?.[_0x1ff0bf(0x97)]==='beforeunload'||_0x466f1c?.['persisted']?(pauseGame(),canvas['classList'][_0x1ff0bf(0x9f)](_0x1ff0bf(0x7b))):(setTimeout(()=>{const _0x19bba0=_0x1ff0bf;canvas[_0x19bba0(0x95)][_0x19bba0(0xcd)](_0x19bba0(0x7b));},0x258),controlSetting[_0x1ff0bf(0x95)]['contains'](_0x1ff0bf(0x7b))&&resumeGame());}async function statusShow(){const _0x7b9ef2=a0_0x4e2f01;document[_0x7b9ef2(0xa7)](_0x7b9ef2(0xaf),handleVisibilityChange),document['addEventListener']('visibilitychange',handleVisibilityChange),window['addEventListener'](_0x7b9ef2(0xc4),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0xf20a8c[_0x7b9ef2(0x93)](turboState)),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(localStorage[_0x7b9ef2(0x7f)](_0x7b9ef2(0xb8)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x9a034=a0_0x4e2f01;await ledSave(_0x9a034(0x77)),await Module[_0x9a034(0x80)](0x0),await Module[_0x9a034(0xa8)](),await screenShot(0x0),console[_0x9a034(0xb6)](_0x9a034(0xa3)+ ++countAutoSave+_0x9a034(0xb0));}async function saveStateInCloud(){const _0x21733b=a0_0x4e2f01,_0x394afa=localStorage[_0x21733b(0x7f)]('gameName'),_0xf92ea1=_0x394afa[_0x21733b(0x89)](/\.(zip|gb|gbc|gba)$/,_0x21733b(0x9b)),_0x1105a0=localStorage[_0x21733b(0x7f)](_0x21733b(0xa2)),_0x4ccc11=localStorage[_0x21733b(0x7f)](_0x394afa+_0x21733b(0xc1)),_0x1e5d81=localStorage[_0x21733b(0x7f)](_0x394afa+_0x21733b(0x78));if(navigator['onLine']){if(_0x1105a0){await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0xf92ea1,Module['downloadFile'](_0x21733b(0x8b)+_0xf92ea1));if(_0x4ccc11!==null){const _0x17bb2d=_0x4ccc11+'\x0a\x0a'+_0x1e5d81,_0x575ed4=new Blob([_0x17bb2d],{'type':_0x21733b(0xb9)});await dpUploadFile(_0x394afa+_0x21733b(0x99),_0x575ed4);}else console[_0x21733b(0xb6)]('No\x20screenshot!');await lockNoti('',_0x21733b(0x85)+ ++countUpload+_0x21733b(0xb0),0x7d0);}else console[_0x21733b(0xb6)](_0x21733b(0xbb));}else console[_0x21733b(0xb6)](_0x21733b(0x96));}function startTimer(){let [_0x390c3e,_0x5b733e,_0x1bdac8,_0x280321,_0x39054a]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x33d99c=a0_0x3852;_0x1bdac8++,_0x280321++,_0x39054a++;if(_0x1bdac8===0x3c)[_0x1bdac8,_0x5b733e]=[0x0,_0x5b733e+0x1];if(_0x5b733e===0x3c)[_0x5b733e,_0x390c3e]=[0x0,_0x390c3e+0x1];document[_0x33d99c(0xb2)](_0x33d99c(0xa0))[_0x33d99c(0x76)]=_0x390c3e+'h'+_0x5b733e[_0x33d99c(0xd5)]()['padStart'](0x2,'0')+'.'+_0x1bdac8[_0x33d99c(0xd5)]()[_0x33d99c(0xb5)](0x2,'0');_0x280321===0x3c&&(saveStatePeriodically(),_0x280321=0x0);;_0x39054a===0xe10&&(saveStateInCloud(),_0x39054a=0x0);;},0x3e8);}export async function uploadGame(_0x31532c){const _0x3fe941=a0_0x4e2f01,_0x28c0a5=_0x31532c[_0x3fe941(0x8a)][0x0];Module[_0x3fe941(0xbd)](_0x28c0a5,()=>{const _0xfcd10c=_0x3fe941;Module[_0xfcd10c(0xa8)]();});}export async function loadGame(_0x537e16){const _0x23f1e4=a0_0x4e2f01,_0x484646=_0x537e16[_0x23f1e4(0x89)](/\.(gba|gbc|gb|zip)$/,_0x23f1e4(0x9b)),_0x3d84d2=Module[_0x23f1e4(0x82)]()['filter'](_0x346836=>_0x346836!=='.'&&_0x346836!=='..');intro['classList'][_0x23f1e4(0x9f)](_0x23f1e4(0x8f)),errorLogElements[0x0][_0x23f1e4(0x98)][_0x23f1e4(0xd4)]='0',ingame[_0x23f1e4(0x95)][_0x23f1e4(0xcd)](_0x23f1e4(0x8f)),_0x537e16[_0x23f1e4(0xc6)]('.gbc')||_0x537e16[_0x23f1e4(0xc6)](_0x23f1e4(0xbf))?(canvas[_0x23f1e4(0x95)][_0x23f1e4(0x9f)]('gbc'),areaTrans['classList'][_0x23f1e4(0x9f)](_0x23f1e4(0xd3)),localStorage[_0x23f1e4(0xc0)]('screenSize','0,0,'+(window[_0x23f1e4(0x81)]-0xe6)+','+(window[_0x23f1e4(0x81)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x23f1e4(0xb4),'0,0,'+(window['innerWidth']-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x3d84d2[_0x23f1e4(0x7a)](_0x484646)?(await Module[_0x23f1e4(0xc3)](_0x23f1e4(0xc5)+_0x537e16),confirm(_0x23f1e4(0x8c))&&(await Module[_0x23f1e4(0x92)](0x0),localStorage[_0x23f1e4(0xc0)]('gameName',_0x537e16),console[_0x23f1e4(0xb6)](_0x537e16))):(await Module[_0x23f1e4(0xc3)]('/data/games/'+_0x537e16),localStorage[_0x23f1e4(0xc0)](_0x23f1e4(0x7d),_0x537e16),console['log'](_0x537e16)),await statusShow();}export async function saveState(_0x323376){const _0x3915c7=a0_0x4e2f01;await Module[_0x3915c7(0x80)](_0x323376),await Module['FSSync']();}export async function loadState(_0x31d9d2){const _0x4a7145=a0_0x4e2f01;await Module[_0x4a7145(0x92)](_0x31d9d2);}export async function downloadFile(_0x2b2f92,_0x33d0a5){const _0x495fce=a0_0x4e2f01,_0x26de1f=Module[_0x495fce(0xaa)](_0x2b2f92),_0xb8e20=document[_0x495fce(0xce)]('a');document[_0x495fce(0x73)]['appendChild'](_0xb8e20),_0xb8e20['download']=_0x33d0a5;const _0x369639=new Blob([_0x26de1f],{'type':'application/octet-stream'});_0xb8e20[_0x495fce(0x8d)]=URL[_0x495fce(0xae)](_0x369639),_0xb8e20[_0x495fce(0xb3)](),URL[_0x495fce(0xbe)](_0x369639),_0xb8e20[_0x495fce(0xcd)]();}export function downloadFileInCloud(_0x475140){const _0x49713f=a0_0x4e2f01,_0x5d7612=Module[_0x49713f(0xaa)](_0x475140);return _0x5d7612;}export async function uploadFile(_0x29a2cc){const _0x23decd=a0_0x4e2f01,_0xb3f15c=_0x29a2cc[_0x23decd(0x8a)][0x0];Module[_0x23decd(0x9d)](_0xb3f15c,()=>{const _0x4bcfb1=_0x23decd;localStorageFile(),Module[_0x4bcfb1(0xa8)]();});}export async function editFile(_0x24cb44,_0x498e78,_0x562ddc){const _0x57a438=a0_0x4e2f01;await Module['editFileName'](_0x24cb44,_0x498e78,_0x562ddc),await Module[_0x57a438(0xa8)]();}function a0_0x3852(_0x26f08d,_0x1c5874){const _0x12b8b7=a0_0x12b8();return a0_0x3852=function(_0x38528d,_0x2aea3e){_0x38528d=_0x38528d-0x70;let _0x5d2589=_0x12b8b7[_0x38528d];return _0x5d2589;},a0_0x3852(_0x26f08d,_0x1c5874);}function a0_0x12b8(){const _0x4d73ac=['_slot0.txt','charCodeAt','.ss0','length','uploadAll','FSInit','add','timer','resumeGame','uId','Auto\x20save\x20','setFastForwardMultiplier','106736UqCfFz','listScreenshots','addEventListener','FSSync','buttonUnpress','downloadFile','set','774520VxnmaI','532XDRiRZ','createObjectURL','pagehide','\x20time(s)','618zkKdFb','getElementById','click','screenSize','padStart','log','filter','slotStateSaved','text/plain','Paused!','Unable\x20to\x20upload\x20to\x20Cloud!','turboState','uploadRom','revokeObjectURL','.gb','setItem','_imageState0','listCheats','loadGame','beforeunload','/data/games/','endsWith','2826744AmnARH','now','380572oxLXWg','_savedCheats','pauseGame','visibilityState','remove','createElement','then','image/png','1WcxFDt','Resumed!','gbc1','bottom','toString','buttonPress','tEXtComment\x00','substring','568812qTLgvF','body','hidden','screenshot','textContent','#20A5A6','_dateState0','Cheat\x20Enabled!','includes','visible','3477465KQUNby','gameName','canvas','getItem','saveState','innerWidth','listStates','44410vsofhM','Off','Cloud\x20upload\x20','indexOf','encode','deleteFile','replace','files','/data/states/','Do\x20you\x20want\x20to\x20load\x20save\x20state?','href','split','disable','autoLoadCheats','SDL2','loadState','turboF','/data/screenshots/','classList','Online!','type','style'];a0_0x12b8=function(){return _0x4d73ac;};return a0_0x12b8();}export async function deleteFile(_0x156991){const _0x273284=a0_0x4e2f01;await Module[_0x273284(0x88)](_0x156991),await Module[_0x273284(0xa8)]();}export function listGame(){const _0x4a65d7=a0_0x4e2f01,_0x1fe9a1=Module['listRoms']()[_0x4a65d7(0xb7)](_0x533250=>_0x533250!=='.'&&_0x533250!=='..');return _0x1fe9a1;}export function listSave(){const _0x1397e9=a0_0x4e2f01,_0x541b02=Module['listSaves']()[_0x1397e9(0xb7)](_0x531ad0=>_0x531ad0!=='.'&&_0x531ad0!=='..');return _0x541b02;}export function listState(){const _0x2c1edb=a0_0x4e2f01,_0x17905a=Module[_0x2c1edb(0x82)]()[_0x2c1edb(0xb7)](_0x10c12b=>_0x10c12b!=='.'&&_0x10c12b!=='..');return _0x17905a;}export function listCheat(){const _0x5bfc8b=a0_0x4e2f01,_0x5e57f8=Module[_0x5bfc8b(0xc2)]()[_0x5bfc8b(0xb7)](_0x20f194=>_0x20f194!=='.'&&_0x20f194!=='..');return _0x5e57f8;}export function listScreenshot(){const _0x25fab6=a0_0x4e2f01,_0x71263b=Module[_0x25fab6(0xa6)]()[_0x25fab6(0xb7)](_0x4b6bb6=>_0x4b6bb6!=='.'&&_0x4b6bb6!=='..');return _0x71263b;}export function embedTextInPngFile(_0x10f579,_0x3d82a8,_0x4fbea2){const _0x24e4bf=a0_0x4e2f01;let _0x595804=atob(_0x10f579[_0x24e4bf(0x8e)](',')[0x1]),_0x2a4d81=new Uint8Array(_0x595804[_0x24e4bf(0x9c)]);for(let _0x389f3c=0x0;_0x389f3c<_0x595804[_0x24e4bf(0x9c)];_0x389f3c++){_0x2a4d81[_0x389f3c]=_0x595804[_0x24e4bf(0x9a)](_0x389f3c);}let _0x358ba0=new TextEncoder()[_0x24e4bf(0x87)](_0x24e4bf(0x70)+_0x3d82a8),_0x181f14=new Uint8Array(_0x2a4d81[_0x24e4bf(0x9c)]+_0x358ba0[_0x24e4bf(0x9c)]);_0x181f14[_0x24e4bf(0xab)](_0x2a4d81,0x0),_0x181f14['set'](_0x358ba0,_0x2a4d81[_0x24e4bf(0x9c)]);let _0xb5cbac=new Blob([_0x181f14],{'type':_0x24e4bf(0xd0)}),_0x574699=new File([_0xb5cbac],_0x4fbea2,{'type':_0x24e4bf(0xd0)});return _0x574699;}export function extractTextFromPngBase64(_0x4fc622){const _0x18d065=a0_0x4e2f01;let _0x4430e5=atob(_0x4fc622['split'](',')[0x1]),_0x5912f9=_0x18d065(0x70),_0x277ad3=_0x4430e5[_0x18d065(0x86)](_0x5912f9);if(_0x277ad3!==-0x1)return _0x4430e5[_0x18d065(0x71)](_0x277ad3+_0x5912f9['length']);return null;}export function fileSize(_0x33a67a){const _0x502b2b=Module['fileSize'](_0x33a67a);return _0x502b2b;}export async function resumeGame(){const _0x555032=a0_0x4e2f01;Module[_0x555032(0xa1)](),Module[_0x555032(0x91)](),notiMessage(_0x555032(0xd2),0x7d0);}export async function pauseGame(){const _0x1c99b2=a0_0x4e2f01;Module[_0x1c99b2(0xcb)](),Module[_0x1c99b2(0x91)](),notiMessage(_0x1c99b2(0xba),0x7d0);}export async function buttonPress(_0x5b543d){const _0x5ab98d=a0_0x4e2f01;Module[_0x5ab98d(0xd6)](_0x5b543d);}export async function buttonUnpress(_0x222eda){const _0x11fa01=a0_0x4e2f01;Module[_0x11fa01(0xa9)](_0x222eda);}export async function screenShot(_0x17782b){const _0x1a25bd=a0_0x4e2f01,_0x29a0eb=localStorage[_0x1a25bd(0x7f)](_0x1a25bd(0x7d))['replace'](/\.(gba|gbc|gb|zip)$/,''),_0x46981e=_0x29a0eb+'_'+_0x17782b+'.png';await Module[_0x1a25bd(0x75)](_0x46981e),await Module[_0x1a25bd(0xa8)]();const _0x46ef7b=await fileToBase64(Module[_0x1a25bd(0xaa)](_0x1a25bd(0x94)+_0x46981e)),_0x2a2af5=embedTextInPngFile(_0x46ef7b,formatDateTime(Date[_0x1a25bd(0xc8)]()),_0x46981e);Module[_0x1a25bd(0x9d)](_0x2a2af5,()=>{localStorageFile(),Module['FSSync']();});}export async function dowloadScreenShot(_0x1739ed){try{const _0x51a6cd=await fileToBase64(Module['downloadFile'](_0x1739ed));return _0x51a6cd;}catch{}}export async function captureOCR(_0x57a2ae){const _0x3fc2dc=a0_0x4e2f01;Module[_0x3fc2dc(0x75)](_0x57a2ae);const _0x2733b0=Module[_0x3fc2dc(0xaa)](_0x3fc2dc(0x94)+_0x57a2ae);return _0x2733b0;}export async function setFastForwardMultiplier(_0x219436){const _0xf271bf=a0_0x4e2f01;Module[_0xf271bf(0xa4)](_0x219436);}export function uploadCheats(_0x1aa17a,_0x45765c,_0x4a7614,_0x26dbcc,_0x1d5876){const _0x3ec20a=a0_0x4e2f01;Module[_0x3ec20a(0x9d)](_0x1aa17a,()=>{const _0xbb1593=_0x3ec20a;Module[_0xbb1593(0x90)](),setTimeout(()=>{const _0x4d32e1=_0xbb1593;Module[_0x4d32e1(0xa8)]();},0x1f4),_0x26dbcc&&(localStorage[_0xbb1593(0xc0)](_0x45765c+_0xbb1593(0xca),_0x4a7614),notiMessage(_0xbb1593(0x79),0x5dc)),_0x1d5876['textContent']=localStorage[_0xbb1593(0x7f)](_0x45765c+_0xbb1593(0xca)||_0xbb1593(0x84));});}export function setVolume(_0x32ec90){Module['setVolume'](_0x32ec90);}