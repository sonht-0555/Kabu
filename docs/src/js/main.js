const a0_0x2ea5f5=a0_0x2c86;(function(_0x1a7910,_0x5cfe87){const _0x54e6a8=a0_0x2c86,_0x1b3e24=_0x1a7910();while(!![]){try{const _0x19930c=-parseInt(_0x54e6a8(0xe1))/0x1+-parseInt(_0x54e6a8(0xe8))/0x2+-parseInt(_0x54e6a8(0x102))/0x3*(-parseInt(_0x54e6a8(0xbc))/0x4)+-parseInt(_0x54e6a8(0xf0))/0x5+-parseInt(_0x54e6a8(0xce))/0x6*(parseInt(_0x54e6a8(0xdc))/0x7)+-parseInt(_0x54e6a8(0xfe))/0x8+parseInt(_0x54e6a8(0x10e))/0x9;if(_0x19930c===_0x5cfe87)break;else _0x1b3e24['push'](_0x1b3e24['shift']());}catch(_0x3dd6c5){_0x1b3e24['push'](_0x1b3e24['shift']());}}}(a0_0x5cc4,0xb89fb));import a0_0x3d19df from'../core/mgba.js';import*as a0_0x45904f from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x2ea5f5(0xba)](a0_0x2ea5f5(0xf8))};function initializeCore(_0x4cc68d,_0x2b4d7d){_0x4cc68d(_0x2b4d7d)['then'](function(_0x4e57a5){const _0x27e07a=a0_0x2c86;_0x4e57a5[_0x27e07a(0xea)]();});}initializeCore(a0_0x3d19df,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x2ea5f5(0xba)](a0_0x2ea5f5(0xf8)),savedTurboState=localStorage[a0_0x2ea5f5(0xe9)](a0_0x2ea5f5(0xcf)),controlSetting=document[a0_0x2ea5f5(0xba)]('control-setting');function handleVisibilityChange(_0x2ea2ee){const _0x430b4b=a0_0x2ea5f5;document[_0x430b4b(0x118)]===_0x430b4b(0xf4)||_0x2ea2ee?.[_0x430b4b(0x10f)]===_0x430b4b(0xc0)||_0x2ea2ee?.[_0x430b4b(0xeb)]?(pauseGame(),canvas[_0x430b4b(0xb0)]['add'](_0x430b4b(0xc9))):(setTimeout(()=>{const _0x10ae2e=_0x430b4b;canvas[_0x10ae2e(0xb0)][_0x10ae2e(0xfc)](_0x10ae2e(0xc9));},0x258),controlSetting[_0x430b4b(0xb0)][_0x430b4b(0xd6)](_0x430b4b(0xc9))&&resumeGame());}async function statusShow(){const _0xb931b4=a0_0x2ea5f5;document[_0xb931b4(0x103)]('pagehide',handleVisibilityChange),document['addEventListener']('visibilitychange',handleVisibilityChange),window[_0xb931b4(0x103)](_0xb931b4(0xc0),handleVisibilityChange),restoreArea(),startTimer(),await Module[_0xb931b4(0x10d)](),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x45904f[_0xb931b4(0xd5)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0xb931b4(0xe9)](_0xb931b4(0x11b)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x15d186=a0_0x2ea5f5;await ledSave(_0x15d186(0xc6)),await Module[_0x15d186(0x119)](0x0),await Module[_0x15d186(0xe3)](),await screenShot(0x0),console[_0x15d186(0xdb)](_0x15d186(0xee)+ ++countAutoSave+_0x15d186(0x10c));}async function saveStateInCloud(){const _0x282f1d=a0_0x2ea5f5,_0x471230=localStorage[_0x282f1d(0xe9)](_0x282f1d(0xfd)),_0x3944ae=_0x471230['replace'](_0x282f1d(0xdd),_0x282f1d(0xc7)),_0x51e140=localStorage['getItem'](_0x282f1d(0x117)),_0x817d69=localStorage['getItem'](_0x471230+_0x282f1d(0x115)),_0x422014=localStorage[_0x282f1d(0xe9)](_0x471230+_0x282f1d(0xe5));if(navigator[_0x282f1d(0x105)]){if(_0x51e140){await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x3944ae,Module['downloadFile'](_0x282f1d(0xf7)+_0x3944ae));if(_0x817d69!==null){const _0x1cbfe8=_0x817d69+'\x0a\x0a'+_0x422014,_0x289502=new Blob([_0x1cbfe8],{'type':'text/plain'});await dpUploadFile(_0x471230+_0x282f1d(0xe0),_0x289502);}else console[_0x282f1d(0xdb)](_0x282f1d(0xe6));await lockNoti('',_0x282f1d(0xb5)+ ++countUpload+_0x282f1d(0x10c),0x7d0);}else console['log']('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0x282f1d(0xdb)](_0x282f1d(0x111));}function startTimer(){let [_0x3a1f53,_0x325b6d,_0x358835,_0x2d8f96,_0x2adc93]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x4247ad=a0_0x2c86;_0x358835++,_0x2d8f96++,_0x2adc93++;if(_0x358835===0x3c)[_0x358835,_0x325b6d]=[0x0,_0x325b6d+0x1];if(_0x325b6d===0x3c)[_0x325b6d,_0x3a1f53]=[0x0,_0x3a1f53+0x1];document[_0x4247ad(0xba)](_0x4247ad(0x109))[_0x4247ad(0xcd)]=_0x3a1f53+'h'+_0x325b6d[_0x4247ad(0x113)]()['padStart'](0x2,'0')+'.'+_0x358835[_0x4247ad(0x113)]()[_0x4247ad(0xc5)](0x2,'0');_0x2d8f96===0x3c&&(saveStatePeriodically(),_0x2d8f96=0x0);;_0x2d8f96===0xe10&&(saveStateInCloud(),_0x2adc93=0x0);;},0x3e8);}export async function uploadGame(_0x27cae0){const _0x5a4c47=a0_0x2ea5f5,_0x5cf17c=_0x27cae0[_0x5a4c47(0xd0)][0x0];Module[_0x5a4c47(0x10a)](_0x5cf17c,()=>{Module['FSSync']();});}export async function loadGame(_0x45b395){const _0x579add=a0_0x2ea5f5,_0x3162a3=_0x45b395[_0x579add(0x112)](/\.(gba|gbc|gb|zip)$/,_0x579add(0xc7)),_0x4e90fe=Module[_0x579add(0xb4)]()[_0x579add(0xe7)](_0x5a9b63=>_0x5a9b63!=='.'&&_0x5a9b63!=='..');intro['classList'][_0x579add(0xf6)](_0x579add(0xd2)),errorLogElements[0x0][_0x579add(0x101)][_0x579add(0xc1)]='0',ingame['classList']['remove']('disable'),_0x45b395['endsWith'](_0x579add(0xc4))||_0x45b395[_0x579add(0xd1)](_0x579add(0x10b))?(canvas[_0x579add(0xb0)][_0x579add(0xf6)](_0x579add(0xde)),areaTrans[_0x579add(0xb0)][_0x579add(0xf6)](_0x579add(0xd4)),localStorage[_0x579add(0x11a)](_0x579add(0xe4),_0x579add(0xdf)+(window[_0x579add(0xda)]-0xe6)+','+(window[_0x579add(0xda)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x579add(0xe4),_0x579add(0xdf)+(window[_0x579add(0xda)]-0x96)+','+(window[_0x579add(0xda)]-0x96)*0x2/0x3),_0x4e90fe[_0x579add(0xb6)](_0x3162a3)?(await Module[_0x579add(0xbb)](_0x579add(0xe2)+_0x45b395),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module['loadState'](0x0),localStorage[_0x579add(0x11a)](_0x579add(0xfd),_0x45b395),console[_0x579add(0xdb)](_0x45b395))):(await Module[_0x579add(0xbb)](_0x579add(0xe2)+_0x45b395),localStorage['setItem'](_0x579add(0xfd),_0x45b395)),await statusShow();}export async function saveState(_0x555ba5){const _0x5ed21a=a0_0x2ea5f5;await Module[_0x5ed21a(0x119)](_0x555ba5),await Module[_0x5ed21a(0xe3)]();}export async function loadState(_0x20d5d9){const _0x27ff56=a0_0x2ea5f5;await Module[_0x27ff56(0xd3)](_0x20d5d9);}export async function downloadFile(_0x500b4f,_0x4979ae){const _0x2223f8=a0_0x2ea5f5,_0x4de0ba=Module[_0x2223f8(0xfb)](_0x500b4f),_0x2d6cd0=document[_0x2223f8(0x100)]('a');document[_0x2223f8(0xb3)][_0x2223f8(0xb9)](_0x2d6cd0),_0x2d6cd0[_0x2223f8(0xf3)]=_0x4979ae;const _0x48584a=new Blob([_0x4de0ba],{'type':_0x2223f8(0xff)});_0x2d6cd0['href']=URL[_0x2223f8(0x107)](_0x48584a),_0x2d6cd0[_0x2223f8(0xbf)](),URL['revokeObjectURL'](_0x48584a),_0x2d6cd0[_0x2223f8(0xfc)]();}function a0_0x2c86(_0x1b76aa,_0x1bf46e){const _0x5cc4c7=a0_0x5cc4();return a0_0x2c86=function(_0x2c867b,_0x5e38aa){_0x2c867b=_0x2c867b-0xb0;let _0x503eeb=_0x5cc4c7[_0x2c867b];return _0x503eeb;},a0_0x2c86(_0x1b76aa,_0x1bf46e);}export function downloadFileInCloud(_0x1818c2){const _0x1d370d=a0_0x2ea5f5,_0xbdab58=Module[_0x1d370d(0xfb)](_0x1818c2);return _0xbdab58;}export async function uploadFile(_0x28c27f){const _0x2eaf17=a0_0x2ea5f5,_0x1ee81c=_0x28c27f['files'][0x0];Module[_0x2eaf17(0xd8)](_0x1ee81c,()=>{Module['FSSync']();});}export async function editFile(_0x48dad6,_0x3482a3,_0x594720){const _0x17861d=a0_0x2ea5f5;await Module[_0x17861d(0xbd)](_0x48dad6,_0x3482a3,_0x594720),await Module[_0x17861d(0xe3)]();}export async function deleteFile(_0x390ed7){const _0x245916=a0_0x2ea5f5;await Module[_0x245916(0xbe)](_0x390ed7),await Module[_0x245916(0xe3)]();}export function listGame(){const _0x7eede9=a0_0x2ea5f5,_0x1dccfd=Module[_0x7eede9(0xed)]()[_0x7eede9(0xe7)](_0x16f43c=>_0x16f43c!=='.'&&_0x16f43c!=='..');return _0x1dccfd;}export function listSave(){const _0xec48c3=a0_0x2ea5f5,_0x4313cf=Module[_0xec48c3(0xc8)]()[_0xec48c3(0xe7)](_0x3828eb=>_0x3828eb!=='.'&&_0x3828eb!=='..');return _0x4313cf;}export function listState(){const _0x29bd23=a0_0x2ea5f5,_0x14571a=Module[_0x29bd23(0xb4)]()[_0x29bd23(0xe7)](_0x1c4b68=>_0x1c4b68!=='.'&&_0x1c4b68!=='..');return _0x14571a;}export function listCheat(){const _0x3fcbdc=a0_0x2ea5f5,_0x4ca1ec=Module[_0x3fcbdc(0x106)]()['filter'](_0x50ea0a=>_0x50ea0a!=='.'&&_0x50ea0a!=='..');return _0x4ca1ec;}export function listScreenshot(){const _0x3b964d=a0_0x2ea5f5,_0x4be936=Module[_0x3b964d(0xfa)]()[_0x3b964d(0xe7)](_0x28460f=>_0x28460f!=='.'&&_0x28460f!=='..');return _0x4be936;}export function fileSize(_0x2d7de6){const _0x420054=a0_0x2ea5f5,_0x336cc7=Module[_0x420054(0xd9)](_0x2d7de6);return _0x336cc7;}export async function uploadCheat(_0xf10584){const _0x4abf5b=a0_0x2ea5f5;try{const _0x3732e8=_0xf10584[_0x4abf5b(0xd0)][0x0];await Module['uploadCheats'](_0x3732e8,()=>{const _0xa81024=_0x4abf5b;console[_0xa81024(0xdb)](_0xa81024(0xc3),_0x3732e8[_0xa81024(0xf9)]),localStorageFile(),Module[_0xa81024(0xe3)]();});}catch(_0x439fc1){console[_0x4abf5b(0xca)](_0x4abf5b(0xb7),_0x439fc1);}}export async function uploadSavSta(_0x599a2c){const _0x39b59c=a0_0x2ea5f5;try{const _0x372b12=_0x599a2c[_0x39b59c(0xd0)][0x0];await Module[_0x39b59c(0xd8)](_0x372b12,()=>{const _0x44f171=_0x39b59c;console['log'](_0x44f171(0x116),_0x372b12['name']),localStorageFile(),Module[_0x44f171(0xe3)]();});}catch(_0x20d92a){console[_0x39b59c(0xca)](_0x39b59c(0xb2),_0x20d92a);}}export async function uploadSaveOrSaveState(_0x18aa4e){Module['uploadSaveOrSaveState'](_0x18aa4e,()=>{const _0x4a02c5=a0_0x2c86;localStorageFile(),Module[_0x4a02c5(0xe3)]();});}export async function resumeGame(){const _0x49a04b=a0_0x2ea5f5;Module[_0x49a04b(0x114)](),Module['SDL2'](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x2234b0=a0_0x2ea5f5;Module[_0x2234b0(0xf1)](),Module[_0x2234b0(0x10d)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x14bd10){const _0x33090c=a0_0x2ea5f5;Module[_0x33090c(0x104)](_0x14bd10);}function a0_0x5cc4(){const _0x46d399=['createElement','style','2061sSwNsn','addEventListener','buttonPress','onLine','listCheats','createObjectURL','screenshot','timer','uploadRom','.gb','\x20time(s)','SDL2','37219419NPogIA','type','setFastForwardMultiplier','Online!','replace','toString','resumeGame','_imageState0','Save/State\x20uploaded\x20successfully:','uId','visibilityState','saveState','setItem','slotStateSaved','classList','/data/screenshots/','Error\x20uploadSavSta:','body','listStates','Cloud\x20upload\x20','includes','Error\x20uploadCheat:','uploadCheats','appendChild','getElementById','loadGame','3428yNWmgo','editFileName','deleteFile','click','beforeunload','bottom','_savedCheats','Cheat\x20uploaded\x20successfully:','.gbc','padStart','#20A5A6','.ss0','listSaves','visible','error','.png','autoLoadCheats','textContent','1219494eUHDho','turboState','files','endsWith','disable','loadState','gbc1','turboF','contains','_imageState','uploadSaveOrSaveState','fileSize','innerWidth','log','7VWFkGk','.gba','gbc','0,0,','_slot0.txt','1001043jwNtUS','/data/games/','FSSync','screenSize','_dateState0','No\x20screenshot!','filter','1809258QXbmQQ','getItem','FSInit','persisted','Cheat\x20Enabled!','listRoms','Auto\x20save\x20','Off','2646140zqMkwL','pauseGame','buttonUnpress','download','hidden','_dateState','add','/data/states/','canvas','name','listScreenshots','downloadFile','remove','gameName','10639056cKCXdr','application/octet-stream'];a0_0x5cc4=function(){return _0x46d399;};return a0_0x5cc4();}export async function buttonUnpress(_0x31551a){const _0xa7d62=a0_0x2ea5f5;Module[_0xa7d62(0xf2)](_0x31551a);}export async function screenShot(_0x9e4b39){const _0x56d5e7=a0_0x2ea5f5,_0x37c599=localStorage[_0x56d5e7(0xe9)](_0x56d5e7(0xfd)),_0x4eca95=_0x37c599['replace'](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x56d5e7(0x108)](''+_0x4eca95+_0x9e4b39+_0x56d5e7(0xcb)),await Module[_0x56d5e7(0xe3)]();const _0xd2a02e=await fileToBase64(Module[_0x56d5e7(0xfb)]('/data/screenshots/'+_0x4eca95+_0x9e4b39+'.png')),_0xd04402=Date['now'](),_0x57ac69=formatDateTime(_0xd04402);localStorage[_0x56d5e7(0x11a)](_0x37c599+_0x56d5e7(0xf5)+_0x9e4b39,_0x57ac69),localStorage[_0x56d5e7(0x11a)](_0x37c599+_0x56d5e7(0xd7)+_0x9e4b39,_0xd2a02e);}export async function captureOCR(_0x2b0db1){const _0x439dda=a0_0x2ea5f5;Module[_0x439dda(0x108)](_0x2b0db1);const _0x2fdf36=Module['downloadFile'](_0x439dda(0xb1)+_0x2b0db1);return _0x2fdf36;}export async function setFastForwardMultiplier(_0x30ea83){const _0x3e316d=a0_0x2ea5f5;Module[_0x3e316d(0x110)](_0x30ea83);}export function uploadCheats(_0x333bcf,_0x544ae2,_0x4f7d01,_0x2cb832,_0x3b525f){const _0x38a814=a0_0x2ea5f5;Module[_0x38a814(0xb8)](_0x333bcf,()=>{const _0x38a69d=_0x38a814;Module[_0x38a69d(0xcc)](),setTimeout(()=>{const _0x5c10f4=_0x38a69d;Module[_0x5c10f4(0xe3)]();},0x1f4),_0x2cb832&&(localStorage[_0x38a69d(0x11a)](_0x544ae2+_0x38a69d(0xc2),_0x4f7d01),notiMessage(_0x38a69d(0xec),0x5dc)),_0x3b525f[_0x38a69d(0xcd)]=localStorage[_0x38a69d(0xe9)](_0x544ae2+_0x38a69d(0xc2)||_0x38a69d(0xef));});}