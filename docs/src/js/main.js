const a0_0x26e5c7=a0_0x55e6;(function(_0x1124d5,_0x2334a2){const _0x43f99f=a0_0x55e6,_0x5a1259=_0x1124d5();while(!![]){try{const _0x4db457=parseInt(_0x43f99f(0xf2))/0x1+-parseInt(_0x43f99f(0xfe))/0x2*(parseInt(_0x43f99f(0x111))/0x3)+-parseInt(_0x43f99f(0x107))/0x4+-parseInt(_0x43f99f(0xc3))/0x5*(parseInt(_0x43f99f(0xfa))/0x6)+-parseInt(_0x43f99f(0xc4))/0x7*(-parseInt(_0x43f99f(0xc1))/0x8)+parseInt(_0x43f99f(0xcc))/0x9+parseInt(_0x43f99f(0x110))/0xa;if(_0x4db457===_0x2334a2)break;else _0x5a1259['push'](_0x5a1259['shift']());}catch(_0x16f587){_0x5a1259['push'](_0x5a1259['shift']());}}}(a0_0x41a4,0xa9f6a));import a0_0x43d20f from'../core/1.1.0/mgba.js';import a0_0x37477d from'../core/2.0.0/mgba.js';import*as a0_0x573d68 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x43d20f,'2.0.0':a0_0x37477d};let currentVersion=localStorage[a0_0x26e5c7(0x125)](a0_0x26e5c7(0xb4))||a0_0x26e5c7(0x12d),mGBA=versions[currentVersion];document[a0_0x26e5c7(0xb8)](a0_0x26e5c7(0xb4))[a0_0x26e5c7(0xbd)]=a0_0x26e5c7(0x112)+currentVersion,document['getElementById']('GBAver')['addEventListener'](a0_0x26e5c7(0xd7),()=>{const _0x337cf6=a0_0x26e5c7,_0x3023d4=Object['keys'](versions);let _0x44f03b=_0x3023d4[_0x337cf6(0xe1)](currentVersion);currentVersion=_0x3023d4[(_0x44f03b+0x1)%_0x3023d4['length']],localStorage[_0x337cf6(0x120)]('GBAver',currentVersion),document['getElementById'](_0x337cf6(0xb4))[_0x337cf6(0xbd)]='Wasm_©'+currentVersion,setTimeout(()=>{const _0xc2f167=_0x337cf6;window[_0xc2f167(0xdf)][_0xc2f167(0x10e)]();},0x3e8);});const Module={'canvas':document[a0_0x26e5c7(0xb8)](a0_0x26e5c7(0x11a))};function initializeCore(_0x5611b6,_0x1b98c1){_0x5611b6(_0x1b98c1)['then'](function(_0x10bc28){_0x10bc28['FSInit']();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x26e5c7(0xb8)]('canvas'),controlSetting=document['getElementById'](a0_0x26e5c7(0x127));function a0_0x55e6(_0x3b0b73,_0xa93438){const _0x41a4a1=a0_0x41a4();return a0_0x55e6=function(_0x55e654,_0x4723e4){_0x55e654=_0x55e654-0xb2;let _0x49a025=_0x41a4a1[_0x55e654];return _0x49a025;},a0_0x55e6(_0x3b0b73,_0xa93438);}function handleVisibilityChange(_0x133c15){const _0x2adde4=a0_0x26e5c7;document[_0x2adde4(0xdc)]===_0x2adde4(0xda)||_0x133c15?.['type']===_0x2adde4(0xc2)||_0x133c15?.[_0x2adde4(0x114)]?(Module[_0x2adde4(0xe2)](),pauseGame(),canvas[_0x2adde4(0xe9)][_0x2adde4(0xfb)](_0x2adde4(0x10d))):(setTimeout(()=>{const _0x198aa9=_0x2adde4;canvas[_0x198aa9(0xe9)][_0x198aa9(0x106)](_0x198aa9(0x10d));},0x258),controlSetting[_0x2adde4(0xe9)]['contains'](_0x2adde4(0x10d))&&resumeGame());}async function statusShow(){const _0x166b8e=a0_0x26e5c7;document[_0x166b8e(0xd3)]('pagehide',handleVisibilityChange),document[_0x166b8e(0xd3)](_0x166b8e(0xe0),handleVisibilityChange),window['addEventListener'](_0x166b8e(0xc2),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x573d68[_0x166b8e(0xbb)](parseInt(await getData(gameName,'0',_0x166b8e(0xeb)))),await delay(0xc8),await Module[_0x166b8e(0x12e)](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x166b8e(0xbe)))),await notiMessage(_0x166b8e(0x12f)+currentVersion,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x44f913=a0_0x26e5c7;await ledSave('#20A5A6'),await Module[_0x44f913(0xf0)](0x0),await Module[_0x44f913(0xe2)](),await screenShot(0x0),console[_0x44f913(0x11f)]('Auto\x20save\x20'+ ++countAutoSave+_0x44f913(0xbf));}async function saveStateInCloud(){const _0x1dea66=a0_0x26e5c7,_0x107ef9=gameName['replace'](/\.(zip|gb|gbc|gba)$/,_0x1dea66(0xc5)),_0x11716a=localStorage[_0x1dea66(0x125)]('uId');navigator['onLine']&&(_0x11716a&&(await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x107ef9,Module[_0x1dea66(0xd5)](_0x1dea66(0xf3)+_0x107ef9),_0x1dea66(0x132)),await lockNoti('',_0x1dea66(0xb2)+ ++countUpload+'\x20time(s)',0x7d0)));}function startTimer(){let [_0x3e195f,_0xd0c1ba,_0x418dff,_0xa5d063,_0x21db20]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x57094d=a0_0x55e6;_0x418dff++,_0xa5d063++,_0x21db20++;if(_0x418dff===0x3c)[_0x418dff,_0xd0c1ba]=[0x0,_0xd0c1ba+0x1];if(_0xd0c1ba===0x3c)[_0xd0c1ba,_0x3e195f]=[0x0,_0x3e195f+0x1];document[_0x57094d(0xb8)](_0x57094d(0x12a))[_0x57094d(0xbd)]=_0x3e195f+'h'+_0xd0c1ba['toString']()[_0x57094d(0xb6)](0x2,'0')+'.'+_0x418dff['toString']()[_0x57094d(0xb6)](0x2,'0');_0xa5d063===0x3c&&(saveStatePeriodically(),_0xa5d063=0x0);;_0x21db20===0x708&&(saveStateInCloud(),_0x21db20=0x0);;},0x3e8);}export async function uploadGame(_0xa879e0){const _0x5c07a3=a0_0x26e5c7,_0x46d760=_0xa879e0['files'][0x0];Module[_0x5c07a3(0xd9)](_0x46d760,()=>{const _0x5608cb=_0x5c07a3;Module[_0x5608cb(0xe2)]();});}function a0_0x41a4(){const _0x112538=['deleteFile','tEXtComment\x00','join','/data/screenshots/','addEventListener','loadGame','downloadFile','Paused!','click','match','uploadRom','hidden','trim','visibilityState','editFileName','led07','location','visibilitychange','indexOf','FSSync','led06','files','style','resumeGame','opacity','listStates','classList','revokeObjectURL','turboState','map','listFiles','saveTime','fileSize','saveState','uploadAll','647080opHhZc','/data/states/','buttonUnpress','setFastForwardMultiplier','led00','buttonPress','replace','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','60EvuAJs','add','\x20|\x20','disable','858170gFSFvm','error','screenSize','listRoms','endsWith','application/octet-stream','split','loadState','remove','4794136FsUvHM','href','bottom','download','gbc','concat','visible','reload','led03','13712450LMKSdD','6uWtjej','Wasm_©','led01','persisted','substring','fill','rgba(245,\x20232,\x20209,\x200.4)','lastIndexOf','innerWidth','canvas','length','Resumed!','0.4','encode','log','setItem','led0','createObjectURL','setVolume','filter','getItem','listCheats','control-setting','includes','led04','timer','autoLoadCheats','0,0,','1.1.0','SDL2','W_©','\x20:\x20','exec','state','Error\x20ledSave:','Cloud\x20upload\x20','createElement','GBAver','.png','padStart','.gbc','getElementById','noti-mess','.gb','turboF','screenshot','textContent','slotStateSaved','\x20time(s)','states','49200OZOtuX','beforeunload','21285cdZaER','434Rwercm','.ss0','toggleRewind','appendChild','led02','charCodeAt','led05','listSaves','3562371hnwRei','Do\x20you\x20want\x20to\x20load\x20save\x20state?','All'];a0_0x41a4=function(){return _0x112538;};return a0_0x41a4();}export async function loadGame(_0x3968ef){const _0x390260=a0_0x26e5c7,_0x22993d=_0x3968ef[_0x390260(0xf8)](/\.(gba|gbc|gb|zip)$/,_0x390260(0xc5)),_0x93c689=Module[_0x390260(0xed)](_0x390260(0xc0))[_0x390260(0x124)](_0xe22533=>_0xe22533!=='.'&&_0xe22533!=='..');intro['classList'][_0x390260(0xfb)]('disable'),errorLogElements[0x0][_0x390260(0xe5)][_0x390260(0x109)]='0',ingame[_0x390260(0xe9)][_0x390260(0x106)](_0x390260(0xfd)),_0x3968ef['endsWith'](_0x390260(0xb7))||_0x3968ef[_0x390260(0x102)](_0x390260(0xba))?(canvas[_0x390260(0xe9)][_0x390260(0xfb)](_0x390260(0x10b)),areaTrans['classList'][_0x390260(0xfb)]('gbc1'),localStorage[_0x390260(0x120)](_0x390260(0x100),_0x390260(0x12c)+(window[_0x390260(0x119)]-0xe6)+','+(window[_0x390260(0x119)]-0xe6)*0x9/0xa)):localStorage[_0x390260(0x120)](_0x390260(0x100),_0x390260(0x12c)+(window[_0x390260(0x119)]-0x96)+','+(window[_0x390260(0x119)]-0x96)*0x2/0x3),_0x93c689[_0x390260(0x128)](_0x22993d)?(await Module[_0x390260(0xd4)]('/data/games/'+_0x3968ef),confirm(_0x390260(0xcd))&&(await delay(0x64),await Module[_0x390260(0x105)](0x0),await shaderData())):(await Module[_0x390260(0xd4)]('/data/games/'+_0x3968ef),await shaderData()),await statusShow();}export async function saveState(_0xe05d00){const _0x6c41c7=a0_0x26e5c7;await Module[_0x6c41c7(0xf0)](_0xe05d00);}export async function loadState(_0x1877d3){const _0x32a8a7=a0_0x26e5c7;await Module[_0x32a8a7(0x105)](_0x1877d3);}export async function downloadFile(_0x31ce95,_0x18bbab){const _0x2c55d4=a0_0x26e5c7,_0xf39581=Module[_0x2c55d4(0xd5)](_0x31ce95),_0x194924=document[_0x2c55d4(0xb3)]('a');document['body'][_0x2c55d4(0xc7)](_0x194924),_0x194924[_0x2c55d4(0x10a)]=_0x18bbab;const _0x171e6f=new Blob([_0xf39581],{'type':_0x2c55d4(0x103)});_0x194924[_0x2c55d4(0x108)]=URL[_0x2c55d4(0x122)](_0x171e6f),_0x194924['click'](),URL[_0x2c55d4(0xea)](_0x171e6f),_0x194924[_0x2c55d4(0x106)]();}export function downloadFileInCloud(_0x49f67d){const _0x36e9ad=a0_0x26e5c7;try{const _0x354c7f=Module[_0x36e9ad(0xd5)](_0x49f67d);return _0x354c7f;}catch(_0x5a834d){return null;}}export async function uploadFileInCloud(_0x58010a){const _0x2639cd=a0_0x26e5c7;Module[_0x2639cd(0xf1)](_0x58010a,async()=>{const _0x42c655=_0x2639cd;localStorageFile(),await Module[_0x42c655(0xe2)]();});}export async function uploadFile(_0x5d64ae){const _0x3fb258=a0_0x26e5c7,_0x5618af=_0x5d64ae[_0x3fb258(0xe4)][0x0];Module['uploadAll'](_0x5618af,async()=>{const _0x3163f5=_0x3fb258;localStorageFile(),await Module[_0x3163f5(0xe2)]();});}export async function editFile(_0x59cb51,_0x229d66,_0x5e629e){const _0xa51dc4=a0_0x26e5c7;await Module[_0xa51dc4(0xdd)](_0x59cb51,_0x229d66,_0x5e629e);}export async function deleteFile(_0x17c875){const _0x42adb8=a0_0x26e5c7;try{return await Module[_0x42adb8(0xcf)](_0x17c875),!![];}catch(_0x3464d7){return console[_0x42adb8(0xff)](_0x17c875),null;}}export function listFiles(_0x35bd8d){const _0x325f4a=a0_0x26e5c7,_0x2e5fef=Module['listFiles'](_0x35bd8d)[_0x325f4a(0x124)](_0x3ceb91=>_0x3ceb91!=='.'&&_0x3ceb91!=='..');return _0x2e5fef;}export function listGame(){const _0x115ae9=a0_0x26e5c7,_0x24b520=Module[_0x115ae9(0x101)]()[_0x115ae9(0x124)](_0x5a66b7=>_0x5a66b7!=='.'&&_0x5a66b7!=='..');return _0x24b520;}export function listSave(){const _0x62aebc=a0_0x26e5c7,_0x3a9e35=Module[_0x62aebc(0xcb)]()[_0x62aebc(0x124)](_0x3acbba=>_0x3acbba!=='.'&&_0x3acbba!=='..');return _0x3a9e35;}export function listState(){const _0x31d2d9=a0_0x26e5c7,_0x2c02c4=Module[_0x31d2d9(0xe8)]()[_0x31d2d9(0x124)](_0x258712=>_0x258712!=='.'&&_0x258712!=='..');return _0x2c02c4;}export function listCheat(){const _0x350fbf=a0_0x26e5c7,_0x4e4645=Module[_0x350fbf(0x126)]()[_0x350fbf(0x124)](_0x550624=>_0x550624!=='.'&&_0x550624!=='..');return _0x4e4645;}export function listScreenshot(){const _0x2206c0=Module['listScreenshots']()['filter'](_0x2f76f2=>_0x2f76f2!=='.'&&_0x2f76f2!=='..');return _0x2206c0;}export function fileSize(_0x1cf27c){const _0x1aa385=a0_0x26e5c7,_0x1f0621=Module[_0x1aa385(0xef)](_0x1cf27c);return _0x1f0621;}export async function resumeGame(){const _0xd2a84d=a0_0x26e5c7;Module[_0xd2a84d(0xe6)](),Module['SDL2'](),notiMessage(_0xd2a84d(0x11c),0x7d0);}export async function pauseGame(){const _0x2e0729=a0_0x26e5c7;Module['pauseGame'](),Module['SDL2'](),notiMessage(_0x2e0729(0xd6),0x7d0);}export async function buttonPress(_0x347c5e){const _0x75f7c9=a0_0x26e5c7;Module[_0x75f7c9(0xf7)](_0x347c5e);}export async function buttonUnpress(_0xde2d0c){const _0x283a0a=a0_0x26e5c7;Module[_0x283a0a(0xf4)](_0xde2d0c);}export async function screenShot(_0x5abd4e){const _0x12ba6e=a0_0x26e5c7,_0x2087fd=gameName['replace'](/\.(gba|gbc|gb|zip)$/,'_'+_0x5abd4e+'.png'),_0x35e6b2=await getData(gameName,_0x5abd4e,_0x12ba6e(0xce))||'';console['log'](_0x35e6b2),await Module[_0x12ba6e(0xbc)](_0x2087fd),await setData(gameName,_0x5abd4e,_0x12ba6e(0xee),formatDateTime(Date['now']()),_0x35e6b2);}export async function dowloadScreenShot(_0x2f37d1){const _0xb238a1=a0_0x26e5c7;try{const _0x5c37a9=await fileToBase64(Module[_0xb238a1(0xd5)](_0x2f37d1));return _0x5c37a9;}catch{}}export async function captureOCR(_0x48db1e){const _0x37c429=a0_0x26e5c7;Module[_0x37c429(0xbc)](_0x48db1e);const _0x33db3d=Module['downloadFile'](_0x37c429(0xd2)+_0x48db1e);return _0x33db3d;}export async function setFastForwardMultiplier(_0xe3bae3){const _0x52f3a3=a0_0x26e5c7;Module[_0x52f3a3(0xf5)](_0xe3bae3);}export async function uploadCheats(_0x58df5c){const _0x3a01f9=a0_0x26e5c7;Module[_0x3a01f9(0x12b)](),Module[_0x3a01f9(0xf1)](_0x58df5c,async()=>{});}export function setVolume(_0x3d926a){const _0x56b865=a0_0x26e5c7;Module[_0x56b865(0x123)](_0x3d926a);}export async function setData(_0x24534e,_0x7535ef,_0x2510bb,_0x4c88a0,_0x394cf4=''){const _0x2ec321=a0_0x26e5c7,_0x122bc5=_0x24534e['replace'](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x30b96b=_0x2ec321(0xd2)+_0x122bc5+'_'+_0x7535ef+'.png';let _0x4788b3;try{_0x4788b3=await fileToBase64(Module[_0x2ec321(0xd5)](_0x30b96b));}catch(_0x54ed19){await Module[_0x2ec321(0xbc)](_0x122bc5+'_'+_0x7535ef+'.png'),await delay(0xc8),_0x4788b3=await fileToBase64(Module[_0x2ec321(0xd5)](_0x30b96b));}let _0x5bfb7d=atob(_0x4788b3[_0x2ec321(0x104)](',')[0x1]),_0x56150d=_0x2ec321(0xd0),_0x23628e=_0x5bfb7d[_0x2ec321(0xe1)](_0x56150d),_0x458093={};if(_0x23628e!==-0x1||_0x394cf4[_0x2ec321(0xdb)]()!==''){let _0x1fe1d1=_0x23628e!==-0x1?_0x5bfb7d[_0x2ec321(0x115)](_0x23628e+_0x56150d[_0x2ec321(0x11b)]):_0x394cf4,_0x541477=/(\w+)\s*:\s*([^|]*)/g,_0x22ca93;while((_0x22ca93=_0x541477[_0x2ec321(0x131)](_0x1fe1d1))!==null){_0x458093[_0x22ca93[0x1][_0x2ec321(0xdb)]()]=_0x22ca93[0x2][_0x2ec321(0xdb)]();}_0x23628e!==-0x1&&(_0x5bfb7d=_0x5bfb7d['substring'](0x0,_0x23628e));}_0x458093[_0x2510bb]=_0x4c88a0;let _0x411731=Object['entries'](_0x458093)[_0x2ec321(0xec)](([_0x1e9d4f,_0x3e0d13])=>_0x1e9d4f+_0x2ec321(0x130)+_0x3e0d13)[_0x2ec321(0xd1)](_0x2ec321(0xfc)),_0x43a44f=new TextEncoder()[_0x2ec321(0x11e)](_0x56150d+'\x20'+_0x411731),_0x2dfbce=new Uint8Array([..._0x5bfb7d][_0x2ec321(0xec)](_0x38af44=>_0x38af44[_0x2ec321(0xc9)](0x0))[_0x2ec321(0x10c)]([..._0x43a44f])),_0x5d922a=new File([new Blob([_0x2dfbce],{'type':'image/png'})],_0x122bc5+'_'+_0x7535ef+_0x2ec321(0xb5),{'type':'image/png'});Module[_0x2ec321(0xf1)](_0x5d922a,async()=>{});}export async function getData(_0x48880d,_0x3f2483,_0x4d30a5){const _0x50852b=a0_0x26e5c7;try{const _0x47f9a1=_0x48880d['replace'](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x5382d2='/data/screenshots/'+_0x47f9a1+'_'+_0x3f2483+'.png';let _0xd4bb0;try{_0xd4bb0=await fileToBase64(Module[_0x50852b(0xd5)](_0x5382d2));}catch(_0x261ed5){return null;}let _0x53b3bd=atob(_0xd4bb0[_0x50852b(0x104)](',')[0x1]),_0x42e27b='tEXtComment\x00',_0x4ad5e8=_0x53b3bd[_0x50852b(0xe1)](_0x42e27b);if(_0x4ad5e8!==-0x1){let _0x54ab14=_0x53b3bd['substring'](_0x4ad5e8+_0x42e27b[_0x50852b(0x11b)]);if(_0x4d30a5===_0x50852b(0xce))return _0x54ab14['trim']();let _0x5b9af9=new RegExp(_0x4d30a5+_0x50852b(0xf9)),_0xa6874f=_0x54ab14[_0x50852b(0xd8)](_0x5b9af9);if(_0xa6874f)return _0xa6874f[0x1]['trim']();}}catch(_0x2c7d90){return console[_0x50852b(0xff)]({'romName':_0x48880d,'slot':_0x3f2483,'type':_0x4d30a5}),null;}}export async function ledSave(_0x488700){const _0xeb9718=a0_0x26e5c7,_0x3d4985=parseInt(await getData(gameName,'0',_0xeb9718(0xbe))),_0x9ebfaf=_0x3d4985===0x1?_0xeb9718(0x113):_0x3d4985===0x2?_0xeb9718(0xc8):_0x3d4985===0x3?_0xeb9718(0x10f):_0x3d4985===0x4?_0xeb9718(0x129):_0x3d4985===0x5?_0xeb9718(0xca):_0x3d4985===0x6?_0xeb9718(0xe3):_0x3d4985===0x7?_0xeb9718(0xde):_0xeb9718(0xf6);try{for(let _0x4150b2=0x0;_0x4150b2<=0x7;_0x4150b2++){document[_0xeb9718(0xb8)](_0xeb9718(0x121)+_0x4150b2)['style']['fill']=_0xeb9718(0x117);}await delay(0x3e8);for(let _0xf5d53d=0x0;_0xf5d53d<=0x7;_0xf5d53d++){document[_0xeb9718(0xb8)](_0xeb9718(0x121)+_0xf5d53d)[_0xeb9718(0xe5)]['fill']=_0xeb9718(0x117);}document[_0xeb9718(0xb8)](_0x9ebfaf)[_0xeb9718(0xe5)][_0xeb9718(0x116)]=_0x488700;}catch(_0x356151){console[_0xeb9718(0xff)](_0xeb9718(0x133),_0x356151);}};export async function notiMessage(_0x3b38a1,_0x537729,_0x2977a0=![]){const _0x5af8fb=a0_0x26e5c7;var _0x3dd462=document[_0x5af8fb(0xb8)](_0x5af8fb(0xb9));const _0x258180=parseInt(await getData(gameName,'0',_0x5af8fb(0xbe)))||0x0;_0x3dd462['style'][_0x5af8fb(0xe7)]===_0x5af8fb(0x11d)&&(clearTimeout(messageTimeout),_0x3dd462['style'][_0x5af8fb(0xe7)]='0'),_0x3dd462['textContent']=_0x3b38a1,_0x3dd462[_0x5af8fb(0xe5)][_0x5af8fb(0xe7)]=_0x5af8fb(0x11d),messageTimeout=setTimeout(()=>{const _0x540029=_0x5af8fb;_0x3dd462['textContent']='['+_0x258180+']\x20'+gameName[_0x540029(0x115)](0x0,gameName[_0x540029(0x118)]('.')),_0x3dd462[_0x540029(0xe5)][_0x540029(0xe7)]=_0x540029(0x11d);},_0x537729),_0x2977a0&&(canvas['classList'][_0x5af8fb(0xfb)](_0x5af8fb(0x10d)),setTimeout(()=>{const _0x1ab2f6=_0x5af8fb;canvas[_0x1ab2f6(0xe9)][_0x1ab2f6(0x106)](_0x1ab2f6(0x10d));},0x258));}export async function FSSync(){const _0x34328e=a0_0x26e5c7;Module[_0x34328e(0xe2)]();}export const rewind=_0x5a7da7=>Module[a0_0x26e5c7(0xc6)]?.(_0x5a7da7)||null;