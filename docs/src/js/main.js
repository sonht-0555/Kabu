const a0_0x211747=a0_0x2dca;function a0_0x2dca(_0x3646f7,_0x1359e2){const _0x2c76ae=a0_0x2c76();return a0_0x2dca=function(_0x2dca5a,_0x25576d){_0x2dca5a=_0x2dca5a-0x13f;let _0x380eed=_0x2c76ae[_0x2dca5a];return _0x380eed;},a0_0x2dca(_0x3646f7,_0x1359e2);}(function(_0x51d2ad,_0x4b7536){const _0x28eeef=a0_0x2dca,_0x400df6=_0x51d2ad();while(!![]){try{const _0x5d5b03=parseInt(_0x28eeef(0x19d))/0x1*(-parseInt(_0x28eeef(0x145))/0x2)+-parseInt(_0x28eeef(0x198))/0x3+parseInt(_0x28eeef(0x142))/0x4+parseInt(_0x28eeef(0x184))/0x5*(-parseInt(_0x28eeef(0x16f))/0x6)+parseInt(_0x28eeef(0x172))/0x7*(parseInt(_0x28eeef(0x163))/0x8)+-parseInt(_0x28eeef(0x168))/0x9+parseInt(_0x28eeef(0x1af))/0xa;if(_0x5d5b03===_0x4b7536)break;else _0x400df6['push'](_0x400df6['shift']());}catch(_0x252b49){_0x400df6['push'](_0x400df6['shift']());}}}(a0_0x2c76,0xd7b83));import a0_0x59f966 from'../core/mgba.js';import*as a0_0x3a13c4 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const Module={'canvas':document[a0_0x211747(0x178)](a0_0x211747(0x16d))};function initializeCore(_0x3c8b3a,_0x18756d){_0x3c8b3a(_0x18756d)['then'](function(_0x282efa){const _0x7a1c50=a0_0x2dca;_0x282efa[_0x7a1c50(0x183)]();});}initializeCore(a0_0x59f966,Module);function a0_0x2c76(){const _0x4ef629=['replace','match','log','554238ExosoN','endsWith','Paused!','toString','autoLoadCheats','1LRrXUS','/data/screenshots/','Do\x20you\x20want\x20to\x20load\x20save\x20state?','error','listSaves','substring','rgba(245,\x20232,\x20209,\x200.4)','addEventListener','join','beforeunload','listCheats','visibilitychange','gbc','.gb','innerWidth','visibilityState','padStart','editFileName','24477010jwSCjl','setFastForwardMultiplier','led01','Cloud\x20upload\x20','\x20time(s)','2028544jWQcoG','contains','All','1434532yrmyQe','hidden','noti-mess','FSSync','includes','image/png','disable','led04','listStates','download','setVolume','.ss0','add','/data/games/','setItem','0,0,','revokeObjectURL','classList','now','downloadFile','led02','click','control-setting','fill','type','timer','textContent','uId','buttonUnpress','uploadAll','8dHYtfI','.png','appendChild','length','style','3641004ruNPWl','led07','files','href','tEXtComment\x00','canvas','gbc1','174mmjMdF','opacity','charCodeAt','4821992vZnYTk','turboState','led0','indexOf','led06','slotStateSaved','getElementById','Auto\x20save\x20','Resumed!','map','createObjectURL','loadGame','/data/states/','pauseGame','screenSize','onLine','0.4','FSInit','250610WzcKWf','split','concat','exec','bottom','deleteFile','filter','remove','buttonPress','screenshot','trim','SDL2','application/octet-stream','state','Error\x20ledSave:','visible','lastIndexOf'];a0_0x2c76=function(){return _0x4ef629;};return a0_0x2c76();}let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x211747(0x178)](a0_0x211747(0x16d)),controlSetting=document[a0_0x211747(0x178)](a0_0x211747(0x15b));function handleVisibilityChange(_0x71df6f){const _0x13ba6a=a0_0x211747;document[_0x13ba6a(0x1ac)]===_0x13ba6a(0x146)||_0x71df6f?.[_0x13ba6a(0x15d)]===_0x13ba6a(0x1a6)||_0x71df6f?.['persisted']?(Module[_0x13ba6a(0x148)](),pauseGame(),canvas[_0x13ba6a(0x156)]['add'](_0x13ba6a(0x193))):(setTimeout(()=>{const _0x53f983=_0x13ba6a;canvas['classList'][_0x53f983(0x18b)](_0x53f983(0x193));},0x258),controlSetting[_0x13ba6a(0x156)][_0x13ba6a(0x143)](_0x13ba6a(0x193))&&resumeGame());}async function statusShow(){const _0x147601=a0_0x211747;document['addEventListener']('pagehide',handleVisibilityChange),document['addEventListener'](_0x147601(0x1a8),handleVisibilityChange),window[_0x147601(0x1a4)](_0x147601(0x1a6),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x3a13c4['turboF'](parseInt(await getData(gameName,'0',_0x147601(0x173)))),await delay(0xc8),await Module[_0x147601(0x18f)](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x147601(0x177)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x340249=a0_0x211747;await ledSave('#20A5A6'),await Module['saveState'](0x0),await Module[_0x340249(0x148)](),await screenShot(0x0),console[_0x340249(0x197)](_0x340249(0x179)+ ++countAutoSave+_0x340249(0x141));}async function saveStateInCloud(){const _0x19438e=a0_0x211747,_0x446392=gameName[_0x19438e(0x195)](/\.(zip|gb|gbc|gba)$/,_0x19438e(0x150)),_0x185334=localStorage['getItem'](_0x19438e(0x160));navigator[_0x19438e(0x181)]&&(_0x185334&&(await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x446392,Module['downloadFile'](_0x19438e(0x17e)+_0x446392),_0x19438e(0x191)),await lockNoti('',_0x19438e(0x140)+ ++countUpload+_0x19438e(0x141),0x7d0)));}function startTimer(){let [_0x32e135,_0x1d6ae4,_0x284ce6,_0x182297,_0x33e61e]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x3f6f6c=a0_0x2dca;_0x284ce6++,_0x182297++,_0x33e61e++;if(_0x284ce6===0x3c)[_0x284ce6,_0x1d6ae4]=[0x0,_0x1d6ae4+0x1];if(_0x1d6ae4===0x3c)[_0x1d6ae4,_0x32e135]=[0x0,_0x32e135+0x1];document['getElementById'](_0x3f6f6c(0x15e))['textContent']=_0x32e135+'h'+_0x1d6ae4['toString']()[_0x3f6f6c(0x1ad)](0x2,'0')+'.'+_0x284ce6[_0x3f6f6c(0x19b)]()[_0x3f6f6c(0x1ad)](0x2,'0');_0x182297===0x3c&&(saveStatePeriodically(),_0x182297=0x0);;_0x33e61e===0x708&&(saveStateInCloud(),_0x33e61e=0x0);;},0x3e8);}export async function uploadGame(_0x931361){const _0x5cc790=a0_0x211747,_0x1c56e5=_0x931361[_0x5cc790(0x16a)][0x0];Module['uploadRom'](_0x1c56e5,()=>{const _0x53cb3c=_0x5cc790;Module[_0x53cb3c(0x148)]();});}export async function loadGame(_0x2d15ee){const _0x1ffb71=a0_0x211747,_0x5bdcae=_0x2d15ee['replace'](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x5033cd=Module[_0x1ffb71(0x14d)]()[_0x1ffb71(0x18a)](_0x2412a1=>_0x2412a1!=='.'&&_0x2412a1!=='..');intro[_0x1ffb71(0x156)]['add'](_0x1ffb71(0x14b)),errorLogElements[0x0][_0x1ffb71(0x167)][_0x1ffb71(0x188)]='0',ingame[_0x1ffb71(0x156)][_0x1ffb71(0x18b)](_0x1ffb71(0x14b)),_0x2d15ee['endsWith']('.gbc')||_0x2d15ee[_0x1ffb71(0x199)](_0x1ffb71(0x1aa))?(canvas['classList']['add'](_0x1ffb71(0x1a9)),areaTrans['classList'][_0x1ffb71(0x151)](_0x1ffb71(0x16e)),localStorage[_0x1ffb71(0x153)](_0x1ffb71(0x180),_0x1ffb71(0x154)+(window['innerWidth']-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage[_0x1ffb71(0x153)](_0x1ffb71(0x180),_0x1ffb71(0x154)+(window['innerWidth']-0x96)+','+(window[_0x1ffb71(0x1ab)]-0x96)*0x2/0x3),_0x5033cd[_0x1ffb71(0x149)](_0x5bdcae)?(await Module['loadGame'](_0x1ffb71(0x152)+_0x2d15ee),confirm(_0x1ffb71(0x19f))&&(await Module['loadState'](0x0),await shaderData())):(await Module[_0x1ffb71(0x17d)](_0x1ffb71(0x152)+gameName),await shaderData()),await statusShow();}export async function saveState(_0x17c4f7){await Module['saveState'](_0x17c4f7);}export async function loadState(_0x3d2ff1){await Module['loadState'](_0x3d2ff1);}export async function downloadFile(_0x32d346,_0xd7bf1){const _0x42eef4=a0_0x211747,_0x379f66=Module['downloadFile'](_0x32d346),_0x31ef65=document['createElement']('a');document['body'][_0x42eef4(0x165)](_0x31ef65),_0x31ef65[_0x42eef4(0x14e)]=_0xd7bf1;const _0x567bfc=new Blob([_0x379f66],{'type':_0x42eef4(0x190)});_0x31ef65[_0x42eef4(0x16b)]=URL[_0x42eef4(0x17c)](_0x567bfc),_0x31ef65[_0x42eef4(0x15a)](),URL[_0x42eef4(0x155)](_0x567bfc),_0x31ef65[_0x42eef4(0x18b)]();}export function downloadFileInCloud(_0x1be54e){try{const _0x120cab=Module['downloadFile'](_0x1be54e);return _0x120cab;}catch(_0xdce1b1){return null;}}export async function uploadFileInCloud(_0x4c464f){const _0x241776=a0_0x211747;Module[_0x241776(0x162)](_0x4c464f,async()=>{const _0x5ea6bd=_0x241776;localStorageFile(),await Module[_0x5ea6bd(0x148)]();});}export async function uploadFile(_0x55ddc5){const _0x4289a0=a0_0x211747,_0x306f56=_0x55ddc5[_0x4289a0(0x16a)][0x0];Module['uploadAll'](_0x306f56,async()=>{localStorageFile(),await Module['FSSync']();});}export async function editFile(_0x223016,_0x15ad58,_0xe2abb9){const _0x1a626a=a0_0x211747;await Module[_0x1a626a(0x1ae)](_0x223016,_0x15ad58,_0xe2abb9);}export async function deleteFile(_0x3fafbe){const _0x4a7600=a0_0x211747;try{return await Module[_0x4a7600(0x189)](_0x3fafbe),!![];}catch(_0x342fd2){return console[_0x4a7600(0x1a0)](_0x3fafbe),null;}}export function listGame(){const _0x4115ff=Module['listRoms']()['filter'](_0x188982=>_0x188982!=='.'&&_0x188982!=='..');return _0x4115ff;}export function listSave(){const _0x51d0fd=a0_0x211747,_0x56d438=Module[_0x51d0fd(0x1a1)]()['filter'](_0x3afb1e=>_0x3afb1e!=='.'&&_0x3afb1e!=='..');return _0x56d438;}export function listState(){const _0x389249=a0_0x211747,_0x82ac3=Module[_0x389249(0x14d)]()['filter'](_0x41e291=>_0x41e291!=='.'&&_0x41e291!=='..');return _0x82ac3;}export function listCheat(){const _0x178374=a0_0x211747,_0x54526c=Module[_0x178374(0x1a7)]()[_0x178374(0x18a)](_0x26fafc=>_0x26fafc!=='.'&&_0x26fafc!=='..');return _0x54526c;}export function listScreenshot(){const _0x283ec9=a0_0x211747,_0x4c4722=Module['listScreenshots']()[_0x283ec9(0x18a)](_0x49bacd=>_0x49bacd!=='.'&&_0x49bacd!=='..');return _0x4c4722;}export function fileSize(_0x155153){const _0x230854=Module['fileSize'](_0x155153);return _0x230854;}export async function resumeGame(){const _0x5f382f=a0_0x211747;Module['resumeGame'](),Module[_0x5f382f(0x18f)](),notiMessage(_0x5f382f(0x17a),0x7d0);}export async function pauseGame(){const _0x3a6601=a0_0x211747;Module[_0x3a6601(0x17f)](),Module[_0x3a6601(0x18f)](),notiMessage(_0x3a6601(0x19a),0x7d0);}export async function buttonPress(_0x6843c8){const _0x4e2f7f=a0_0x211747;Module[_0x4e2f7f(0x18c)](_0x6843c8);}export async function buttonUnpress(_0x21e98b){const _0xa12d5e=a0_0x211747;Module[_0xa12d5e(0x161)](_0x21e98b);}export async function screenShot(_0xd8ac6c){const _0x28fbfa=a0_0x211747,_0x49bed2=gameName[_0x28fbfa(0x195)](/\.(gba|gbc|gb|zip)$/,'_'+_0xd8ac6c+_0x28fbfa(0x164)),_0x53b8db=await getData(gameName,_0xd8ac6c,'All')||'';console[_0x28fbfa(0x197)](_0x53b8db),await Module[_0x28fbfa(0x18d)](_0x49bed2),await setData(gameName,_0xd8ac6c,'saveTime',formatDateTime(Date[_0x28fbfa(0x157)]()),_0x53b8db);}export async function dowloadScreenShot(_0x2c3f5a){const _0x2c34f6=a0_0x211747;try{const _0x87638d=await fileToBase64(Module[_0x2c34f6(0x158)](_0x2c3f5a));return _0x87638d;}catch{}}export async function captureOCR(_0x5ebdb5){const _0x39bbb6=a0_0x211747;Module[_0x39bbb6(0x18d)](_0x5ebdb5);const _0x699a13=Module[_0x39bbb6(0x158)](_0x39bbb6(0x19e)+_0x5ebdb5);return _0x699a13;}export async function setFastForwardMultiplier(_0x3b486a){const _0x6404a0=a0_0x211747;Module[_0x6404a0(0x1b0)](_0x3b486a);}export async function uploadCheats(_0x889894){const _0x6bfe4a=a0_0x211747;Module[_0x6bfe4a(0x19c)](),Module[_0x6bfe4a(0x162)](_0x889894,async()=>{});}export function setVolume(_0x4fe69f){const _0x3e5780=a0_0x211747;Module[_0x3e5780(0x14f)](_0x4fe69f);}export async function setData(_0x29caa0,_0x4a363e,_0x1ace43,_0x33d3ae,_0x173c0f=''){const _0x139bc2=a0_0x211747,_0x459775=_0x29caa0[_0x139bc2(0x195)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x50932e=_0x139bc2(0x19e)+_0x459775+'_'+_0x4a363e+'.png';let _0x45c8a7;try{_0x45c8a7=await fileToBase64(Module[_0x139bc2(0x158)](_0x50932e));}catch(_0x341d87){await Module[_0x139bc2(0x18d)](_0x459775+'_'+_0x4a363e+'.png'),await delay(0xc8),_0x45c8a7=await fileToBase64(Module['downloadFile'](_0x50932e));}let _0x53d3c4=atob(_0x45c8a7[_0x139bc2(0x185)](',')[0x1]),_0x409755=_0x139bc2(0x16c),_0x179814=_0x53d3c4[_0x139bc2(0x175)](_0x409755),_0x13b3dc={};if(_0x179814!==-0x1||_0x173c0f['trim']()!==''){let _0x30408d=_0x179814!==-0x1?_0x53d3c4[_0x139bc2(0x1a2)](_0x179814+_0x409755['length']):_0x173c0f,_0x1a89f4=/(\w+)\s*:\s*([^|]*)/g,_0xc5bbe;while((_0xc5bbe=_0x1a89f4[_0x139bc2(0x187)](_0x30408d))!==null){_0x13b3dc[_0xc5bbe[0x1][_0x139bc2(0x18e)]()]=_0xc5bbe[0x2]['trim']();}_0x179814!==-0x1&&(_0x53d3c4=_0x53d3c4[_0x139bc2(0x1a2)](0x0,_0x179814));}_0x13b3dc[_0x1ace43]=_0x33d3ae;let _0x1cc0a9=Object['entries'](_0x13b3dc)[_0x139bc2(0x17b)](([_0x1eeb93,_0x5a9f8b])=>_0x1eeb93+'\x20:\x20'+_0x5a9f8b)[_0x139bc2(0x1a5)]('\x20|\x20'),_0x4011fa=new TextEncoder()['encode'](_0x409755+'\x20'+_0x1cc0a9),_0x38d21a=new Uint8Array([..._0x53d3c4][_0x139bc2(0x17b)](_0x5aa124=>_0x5aa124[_0x139bc2(0x171)](0x0))[_0x139bc2(0x186)]([..._0x4011fa])),_0xce60e9=new File([new Blob([_0x38d21a],{'type':_0x139bc2(0x14a)})],_0x459775+'_'+_0x4a363e+_0x139bc2(0x164),{'type':_0x139bc2(0x14a)});Module[_0x139bc2(0x162)](_0xce60e9,async()=>{});}export async function getData(_0x470eb9,_0x1021ba,_0x47ae57){const _0x2949f4=a0_0x211747;try{const _0x55e49b=_0x470eb9[_0x2949f4(0x195)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x167c0d=_0x2949f4(0x19e)+_0x55e49b+'_'+_0x1021ba+_0x2949f4(0x164);let _0x510e7a;try{_0x510e7a=await fileToBase64(Module['downloadFile'](_0x167c0d));}catch(_0x30c92c){return null;}let _0x1e8597=atob(_0x510e7a['split'](',')[0x1]),_0x49fb28=_0x2949f4(0x16c),_0x2d6395=_0x1e8597[_0x2949f4(0x175)](_0x49fb28);if(_0x2d6395!==-0x1){let _0xf7a96c=_0x1e8597['substring'](_0x2d6395+_0x49fb28[_0x2949f4(0x166)]);if(_0x47ae57===_0x2949f4(0x144))return _0xf7a96c[_0x2949f4(0x18e)]();let _0x554321=new RegExp(_0x47ae57+'\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)'),_0x403ec1=_0xf7a96c[_0x2949f4(0x196)](_0x554321);if(_0x403ec1)return _0x403ec1[0x1]['trim']();}}catch(_0x1c2bb4){return console[_0x2949f4(0x1a0)]({'romName':_0x470eb9,'slot':_0x1021ba,'type':_0x47ae57}),null;}}export async function ledSave(_0x283473){const _0x3b3a76=a0_0x211747,_0x9196e=parseInt(await getData(gameName,'0',_0x3b3a76(0x177))),_0x161a16=_0x9196e===0x1?_0x3b3a76(0x13f):_0x9196e===0x2?_0x3b3a76(0x159):_0x9196e===0x3?'led03':_0x9196e===0x4?_0x3b3a76(0x14c):_0x9196e===0x5?'led05':_0x9196e===0x6?_0x3b3a76(0x176):_0x9196e===0x7?_0x3b3a76(0x169):'led00';try{for(let _0x115ac3=0x0;_0x115ac3<=0x7;_0x115ac3++){document[_0x3b3a76(0x178)](_0x3b3a76(0x174)+_0x115ac3)['style'][_0x3b3a76(0x15c)]=_0x3b3a76(0x1a3);}await delay(0x3e8);for(let _0x58a51f=0x0;_0x58a51f<=0x7;_0x58a51f++){document['getElementById'](_0x3b3a76(0x174)+_0x58a51f)['style']['fill']=_0x3b3a76(0x1a3);}document[_0x3b3a76(0x178)](_0x161a16)['style'][_0x3b3a76(0x15c)]=_0x283473;}catch(_0x375ebf){console['error'](_0x3b3a76(0x192),_0x375ebf);}};export async function notiMessage(_0xfa321a,_0x5b194e,_0xa9db38=![]){const _0xafafef=a0_0x211747;var _0x8b9307=document['getElementById'](_0xafafef(0x147));const _0x501170=parseInt(await getData(gameName,'0',_0xafafef(0x177)))||0x0;_0x8b9307[_0xafafef(0x167)]['opacity']===_0xafafef(0x182)&&(clearTimeout(messageTimeout),_0x8b9307['style'][_0xafafef(0x170)]='0'),_0x8b9307['textContent']=_0xfa321a,_0x8b9307[_0xafafef(0x167)][_0xafafef(0x170)]=_0xafafef(0x182),messageTimeout=setTimeout(()=>{const _0x444242=_0xafafef;_0x8b9307[_0x444242(0x15f)]='['+_0x501170+']\x20'+gameName['substring'](0x0,gameName[_0x444242(0x194)]('.')),_0x8b9307[_0x444242(0x167)][_0x444242(0x170)]=_0x444242(0x182);},_0x5b194e),_0xa9db38&&(canvas[_0xafafef(0x156)][_0xafafef(0x151)](_0xafafef(0x193)),setTimeout(()=>{const _0x4fbb39=_0xafafef;canvas[_0x4fbb39(0x156)][_0x4fbb39(0x18b)](_0x4fbb39(0x193));},0x258));}export async function FSSync(){const _0xbd060e=a0_0x211747;Module[_0xbd060e(0x148)]();}