function a0_0x290a(){const _0x35fa0f=['listFiles','Do\x20you\x20want\x20to\x20load\x20save\x20state?','visibilitychange','listRoms','setFastForwardMultiplier','screenSize','getItem','visible','resumeGame','setItem','application/octet-stream','exec','timer','tEXtComment\x00','.ss0','map','fill','replace','states','downloadFile','disable','All','remove','opacity','screenshot','beforeunload','innerWidth','led02','4659064QwEZrh','createObjectURL','control-setting','log','buttonUnpress','split','Cloud\x20upload\x20','4249242SFvqbM','SDL2','match','led05','.gb','substring','led01','appendChild','error','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','add','uploadAll','.png','autoLoadCheats','buttonPress','\x20time(s)','6910225bpxKGe','pagehide','setVolume','listSaves','listCheats','state','uploadRom','led04','.gbc','deleteFile','pauseGame','bottom','rgba(245,\x20232,\x20209,\x200.4)','noti-mess','then','led0','contains','files','/data/games/','saveTime','FSSync','indexOf','0,0,','style','textContent','5982425XrZEmg','Resumed!','loadGame','led06','#20A5A6','1569daCELU','0.4','encode','getElementById','image/png','charCodeAt','concat','join','length','turboState','3748pbZGmn','endsWith','slotStateSaved','1419612dJaDtg','led07','entries','trim','Error\x20ledSave:','revokeObjectURL','toString','onLine','#E0C068','gbc','padStart','led00','saveState','18azPhaL','filter','addEventListener','hidden','visibilityState','classList','persisted','/data/states/','/data/screenshots/','\x20:\x20','uId','canvas','click','body','led03','1174955Rypnco','download'];a0_0x290a=function(){return _0x35fa0f;};return a0_0x290a();}const a0_0x51578e=a0_0x3eda;(function(_0x98df7,_0x5204b1){const _0x2f0534=a0_0x3eda,_0x3de5fd=_0x98df7();while(!![]){try{const _0x24c62c=-parseInt(_0x2f0534(0x194))/0x1+parseInt(_0x2f0534(0x1f4))/0x2+parseInt(_0x2f0534(0x1e7))/0x3*(parseInt(_0x2f0534(0x1f1))/0x4)+parseInt(_0x2f0534(0x1e2))/0x5+-parseInt(_0x2f0534(0x1b9))/0x6+-parseInt(_0x2f0534(0x1c9))/0x7+-parseInt(_0x2f0534(0x1b2))/0x8*(-parseInt(_0x2f0534(0x185))/0x9);if(_0x24c62c===_0x5204b1)break;else _0x3de5fd['push'](_0x3de5fd['shift']());}catch(_0x27e173){_0x3de5fd['push'](_0x3de5fd['shift']());}}}(a0_0x290a,0xa8a53));import a0_0x547567 from'../core/mgba.js';import*as a0_0x508bcc from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const Module={'canvas':document[a0_0x51578e(0x1ea)](a0_0x51578e(0x190))};function initializeCore(_0x130ea7,_0x3d0f00){const _0x26caba=a0_0x51578e;_0x130ea7(_0x3d0f00)[_0x26caba(0x1d7)](function(_0x5668ec){_0x5668ec['FSInit']();});}initializeCore(a0_0x547567,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x51578e(0x1ea)](a0_0x51578e(0x190)),controlSetting=document[a0_0x51578e(0x1ea)](a0_0x51578e(0x1b4));function handleVisibilityChange(_0x549023){const _0x596a54=a0_0x51578e;document[_0x596a54(0x189)]===_0x596a54(0x188)||_0x549023?.['type']==='beforeunload'||_0x549023?.[_0x596a54(0x18b)]?(Module[_0x596a54(0x1dd)](),pauseGame(),canvas[_0x596a54(0x18a)][_0x596a54(0x1c3)](_0x596a54(0x19d))):(setTimeout(()=>{const _0x31b517=_0x596a54;canvas[_0x31b517(0x18a)]['remove'](_0x31b517(0x19d));},0x258),controlSetting[_0x596a54(0x18a)][_0x596a54(0x1d9)](_0x596a54(0x19d))&&resumeGame());}async function statusShow(){const _0x5e66d8=a0_0x51578e;document[_0x5e66d8(0x187)](_0x5e66d8(0x1ca),handleVisibilityChange),document[_0x5e66d8(0x187)](_0x5e66d8(0x198),handleVisibilityChange),window[_0x5e66d8(0x187)](_0x5e66d8(0x1af),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x508bcc['turboF'](parseInt(await getData(gameName,'0',_0x5e66d8(0x1f0)))),await delay(0xc8),await Module[_0x5e66d8(0x1ba)](),await delay(0x320),await led(parseInt(await getData(gameName,'0','slotStateSaved'))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x4466b2=a0_0x51578e;await ledSave(_0x4466b2(0x1e6)),await Module[_0x4466b2(0x200)](0x0),await Module[_0x4466b2(0x1dd)](),await screenShot(0x0),console[_0x4466b2(0x1b5)]('Auto\x20save\x20'+ ++countAutoSave+_0x4466b2(0x1c8));}async function saveStateInCloud(){const _0xea5959=a0_0x51578e,_0x308b5b=gameName[_0xea5959(0x1a7)](/\.(zip|gb|gbc|gba)$/,_0xea5959(0x1a4)),_0x5b72bd=localStorage[_0xea5959(0x19c)](_0xea5959(0x18f));navigator[_0xea5959(0x1fb)]&&(_0x5b72bd&&(await ledSave(_0xea5959(0x1fc)),await delay(0x3e8),await dpUploadFile(_0x308b5b,Module[_0xea5959(0x1a9)](_0xea5959(0x18c)+_0x308b5b),_0xea5959(0x1ce)),await lockNoti('',_0xea5959(0x1b8)+ ++countUpload+_0xea5959(0x1c8),0x7d0)));}function startTimer(){let [_0x54cad5,_0x3f06c6,_0x2c5e99,_0x91d34,_0x44be3e]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x27fe0b=a0_0x3eda;_0x2c5e99++,_0x91d34++,_0x44be3e++;if(_0x2c5e99===0x3c)[_0x2c5e99,_0x3f06c6]=[0x0,_0x3f06c6+0x1];if(_0x3f06c6===0x3c)[_0x3f06c6,_0x54cad5]=[0x0,_0x54cad5+0x1];document[_0x27fe0b(0x1ea)](_0x27fe0b(0x1a2))[_0x27fe0b(0x1e1)]=_0x54cad5+'h'+_0x3f06c6[_0x27fe0b(0x1fa)]()[_0x27fe0b(0x1fe)](0x2,'0')+'.'+_0x2c5e99[_0x27fe0b(0x1fa)]()[_0x27fe0b(0x1fe)](0x2,'0');_0x91d34===0x3c&&(saveStatePeriodically(),_0x91d34=0x0);;_0x44be3e===0x708&&(saveStateInCloud(),_0x44be3e=0x0);;},0x3e8);}export async function uploadGame(_0x488f92){const _0x206359=a0_0x51578e,_0x19dff6=_0x488f92['files'][0x0];Module[_0x206359(0x1cf)](_0x19dff6,()=>{const _0x15f8d4=_0x206359;Module[_0x15f8d4(0x1dd)]();});}export async function loadGame(_0x1393fb){const _0x5f9055=a0_0x51578e,_0xc93d7e=_0x1393fb['replace'](/\.(gba|gbc|gb|zip)$/,_0x5f9055(0x1a4)),_0x5190aa=Module[_0x5f9055(0x196)](_0x5f9055(0x1a8))[_0x5f9055(0x186)](_0x18a6b2=>_0x18a6b2!=='.'&&_0x18a6b2!=='..');intro[_0x5f9055(0x18a)]['add'](_0x5f9055(0x1aa)),errorLogElements[0x0]['style'][_0x5f9055(0x1d4)]='0',ingame[_0x5f9055(0x18a)][_0x5f9055(0x1ac)](_0x5f9055(0x1aa)),_0x1393fb[_0x5f9055(0x1f2)](_0x5f9055(0x1d1))||_0x1393fb[_0x5f9055(0x1f2)](_0x5f9055(0x1bd))?(canvas[_0x5f9055(0x18a)][_0x5f9055(0x1c3)](_0x5f9055(0x1fd)),areaTrans[_0x5f9055(0x18a)]['add']('gbc1'),localStorage[_0x5f9055(0x19f)]('screenSize',_0x5f9055(0x1df)+(window[_0x5f9055(0x1b0)]-0xe6)+','+(window[_0x5f9055(0x1b0)]-0xe6)*0x9/0xa)):localStorage[_0x5f9055(0x19f)](_0x5f9055(0x19b),_0x5f9055(0x1df)+(window['innerWidth']-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x5190aa['includes'](_0xc93d7e)?(await Module[_0x5f9055(0x1e4)]('/data/games/'+_0x1393fb),confirm(_0x5f9055(0x197))&&(await Module['loadState'](0x0),await shaderData())):(await Module['loadGame'](_0x5f9055(0x1db)+gameName),await shaderData()),await statusShow();}export async function saveState(_0x216ab4){const _0x5715b4=a0_0x51578e;await Module[_0x5715b4(0x200)](_0x216ab4);}export async function loadState(_0x25a180){await Module['loadState'](_0x25a180);}export async function downloadFile(_0x12120a,_0x34c03d){const _0x38367a=a0_0x51578e,_0x38b2cd=Module[_0x38367a(0x1a9)](_0x12120a),_0x106225=document['createElement']('a');document[_0x38367a(0x192)][_0x38367a(0x1c0)](_0x106225),_0x106225[_0x38367a(0x195)]=_0x34c03d;const _0x467f2=new Blob([_0x38b2cd],{'type':_0x38367a(0x1a0)});_0x106225['href']=URL[_0x38367a(0x1b3)](_0x467f2),_0x106225[_0x38367a(0x191)](),URL[_0x38367a(0x1f9)](_0x467f2),_0x106225[_0x38367a(0x1ac)]();}export function downloadFileInCloud(_0x3af5ad){const _0x35a767=a0_0x51578e;try{const _0x5121f1=Module[_0x35a767(0x1a9)](_0x3af5ad);return _0x5121f1;}catch(_0x27a52f){return null;}}export async function uploadFileInCloud(_0x34862c){Module['uploadAll'](_0x34862c,async()=>{localStorageFile(),await Module['FSSync']();});}export async function uploadFile(_0x2a8689){const _0x31f03c=a0_0x51578e,_0x110109=_0x2a8689[_0x31f03c(0x1da)][0x0];Module[_0x31f03c(0x1c4)](_0x110109,async()=>{const _0x11a887=_0x31f03c;localStorageFile(),await Module[_0x11a887(0x1dd)]();});}export async function editFile(_0x5d5cec,_0x1ef9ed,_0x563d15){await Module['editFileName'](_0x5d5cec,_0x1ef9ed,_0x563d15);}export async function deleteFile(_0x441eab){const _0x868f64=a0_0x51578e;try{return await Module[_0x868f64(0x1d2)](_0x441eab),!![];}catch(_0x256bc8){return console[_0x868f64(0x1c1)](_0x441eab),null;}}export function listFiles(_0x2059ed){const _0x4592f7=a0_0x51578e,_0x26b0a9=Module[_0x4592f7(0x196)](_0x2059ed)[_0x4592f7(0x186)](_0x5d2030=>_0x5d2030!=='.'&&_0x5d2030!=='..');return _0x26b0a9;}export function listGame(){const _0x8d9af7=a0_0x51578e,_0x31cdd5=Module[_0x8d9af7(0x199)]()[_0x8d9af7(0x186)](_0xd4f81c=>_0xd4f81c!=='.'&&_0xd4f81c!=='..');return _0x31cdd5;}export function listSave(){const _0x5adf65=a0_0x51578e,_0x27435c=Module[_0x5adf65(0x1cc)]()['filter'](_0x2913ef=>_0x2913ef!=='.'&&_0x2913ef!=='..');return _0x27435c;}export function listState(){const _0x408d0b=Module['listStates']()['filter'](_0x1b3987=>_0x1b3987!=='.'&&_0x1b3987!=='..');return _0x408d0b;}export function listCheat(){const _0x1e5a02=a0_0x51578e,_0x395013=Module[_0x1e5a02(0x1cd)]()['filter'](_0x5b9790=>_0x5b9790!=='.'&&_0x5b9790!=='..');return _0x395013;}export function listScreenshot(){const _0x420e77=a0_0x51578e,_0x5e5838=Module['listScreenshots']()[_0x420e77(0x186)](_0x15eb85=>_0x15eb85!=='.'&&_0x15eb85!=='..');return _0x5e5838;}function a0_0x3eda(_0x1685ae,_0xc0d4f){const _0x290af3=a0_0x290a();return a0_0x3eda=function(_0x3eda20,_0x4126a7){_0x3eda20=_0x3eda20-0x185;let _0x931723=_0x290af3[_0x3eda20];return _0x931723;},a0_0x3eda(_0x1685ae,_0xc0d4f);}export function fileSize(_0x359579){const _0x562c8c=Module['fileSize'](_0x359579);return _0x562c8c;}export async function resumeGame(){const _0x5b292b=a0_0x51578e;Module[_0x5b292b(0x19e)](),Module[_0x5b292b(0x1ba)](),notiMessage(_0x5b292b(0x1e3),0x7d0);}export async function pauseGame(){const _0x3eaf2d=a0_0x51578e;Module[_0x3eaf2d(0x1d3)](),Module['SDL2'](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x5e0639){const _0x319b79=a0_0x51578e;Module[_0x319b79(0x1c7)](_0x5e0639);}export async function buttonUnpress(_0x457186){const _0x168b8a=a0_0x51578e;Module[_0x168b8a(0x1b6)](_0x457186);}export async function screenShot(_0x297290){const _0x458617=a0_0x51578e,_0x58d4b7=gameName[_0x458617(0x1a7)](/\.(gba|gbc|gb|zip)$/,'_'+_0x297290+_0x458617(0x1c5)),_0x2d6a70=await getData(gameName,_0x297290,'All')||'';console[_0x458617(0x1b5)](_0x2d6a70),await Module[_0x458617(0x1ae)](_0x58d4b7),await setData(gameName,_0x297290,_0x458617(0x1dc),formatDateTime(Date['now']()),_0x2d6a70);}export async function dowloadScreenShot(_0xb22077){const _0x490979=a0_0x51578e;try{const _0x261b32=await fileToBase64(Module[_0x490979(0x1a9)](_0xb22077));return _0x261b32;}catch{}}export async function captureOCR(_0x54da6d){const _0x4a2dc1=a0_0x51578e;Module[_0x4a2dc1(0x1ae)](_0x54da6d);const _0x570d0e=Module[_0x4a2dc1(0x1a9)]('/data/screenshots/'+_0x54da6d);return _0x570d0e;}export async function setFastForwardMultiplier(_0x15f0fc){const _0x218912=a0_0x51578e;Module[_0x218912(0x19a)](_0x15f0fc);}export async function uploadCheats(_0x5be318){const _0x32545a=a0_0x51578e;Module[_0x32545a(0x1c6)](),Module['uploadAll'](_0x5be318,async()=>{});}export function setVolume(_0x344cf4){const _0x27f702=a0_0x51578e;Module[_0x27f702(0x1cb)](_0x344cf4);}export async function setData(_0x4b8cd3,_0x425894,_0x5c0f3f,_0x1bc265,_0x173a9d=''){const _0x4a673d=a0_0x51578e,_0x533591=_0x4b8cd3[_0x4a673d(0x1a7)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x2eab60='/data/screenshots/'+_0x533591+'_'+_0x425894+'.png';let _0x543124;try{_0x543124=await fileToBase64(Module[_0x4a673d(0x1a9)](_0x2eab60));}catch(_0x2b5253){await Module[_0x4a673d(0x1ae)](_0x533591+'_'+_0x425894+_0x4a673d(0x1c5)),await delay(0xc8),_0x543124=await fileToBase64(Module[_0x4a673d(0x1a9)](_0x2eab60));}let _0x2b613e=atob(_0x543124[_0x4a673d(0x1b7)](',')[0x1]),_0x2f6e1c='tEXtComment\x00',_0x17920d=_0x2b613e['indexOf'](_0x2f6e1c),_0x2727d8={};if(_0x17920d!==-0x1||_0x173a9d[_0x4a673d(0x1f7)]()!==''){let _0x4bd3c5=_0x17920d!==-0x1?_0x2b613e['substring'](_0x17920d+_0x2f6e1c['length']):_0x173a9d,_0x160bfc=/(\w+)\s*:\s*([^|]*)/g,_0x360fc5;while((_0x360fc5=_0x160bfc[_0x4a673d(0x1a1)](_0x4bd3c5))!==null){_0x2727d8[_0x360fc5[0x1]['trim']()]=_0x360fc5[0x2][_0x4a673d(0x1f7)]();}_0x17920d!==-0x1&&(_0x2b613e=_0x2b613e['substring'](0x0,_0x17920d));}_0x2727d8[_0x5c0f3f]=_0x1bc265;let _0x1a1d79=Object[_0x4a673d(0x1f6)](_0x2727d8)[_0x4a673d(0x1a5)](([_0x15267d,_0xfe20b6])=>_0x15267d+_0x4a673d(0x18e)+_0xfe20b6)[_0x4a673d(0x1ee)]('\x20|\x20'),_0x13ab80=new TextEncoder()[_0x4a673d(0x1e9)](_0x2f6e1c+'\x20'+_0x1a1d79),_0x28017a=new Uint8Array([..._0x2b613e]['map'](_0x58a1f0=>_0x58a1f0[_0x4a673d(0x1ec)](0x0))[_0x4a673d(0x1ed)]([..._0x13ab80])),_0x32b80c=new File([new Blob([_0x28017a],{'type':_0x4a673d(0x1eb)})],_0x533591+'_'+_0x425894+_0x4a673d(0x1c5),{'type':_0x4a673d(0x1eb)});Module[_0x4a673d(0x1c4)](_0x32b80c,async()=>{});}export async function getData(_0x38c499,_0xccd5ea,_0x4b268d){const _0x52c80c=a0_0x51578e;try{const _0x4dfb32=_0x38c499[_0x52c80c(0x1a7)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x214c8f=_0x52c80c(0x18d)+_0x4dfb32+'_'+_0xccd5ea+_0x52c80c(0x1c5);let _0xb32614;try{_0xb32614=await fileToBase64(Module[_0x52c80c(0x1a9)](_0x214c8f));}catch(_0x239b45){return null;}let _0x1dfcc4=atob(_0xb32614[_0x52c80c(0x1b7)](',')[0x1]),_0x10ff45=_0x52c80c(0x1a3),_0x6e2dc3=_0x1dfcc4[_0x52c80c(0x1de)](_0x10ff45);if(_0x6e2dc3!==-0x1){let _0x28d63a=_0x1dfcc4[_0x52c80c(0x1be)](_0x6e2dc3+_0x10ff45[_0x52c80c(0x1ef)]);if(_0x4b268d===_0x52c80c(0x1ab))return _0x28d63a[_0x52c80c(0x1f7)]();let _0x2c72ee=new RegExp(_0x4b268d+_0x52c80c(0x1c2)),_0x20af38=_0x28d63a[_0x52c80c(0x1bb)](_0x2c72ee);if(_0x20af38)return _0x20af38[0x1][_0x52c80c(0x1f7)]();}}catch(_0x3676d2){return console[_0x52c80c(0x1c1)]({'romName':_0x38c499,'slot':_0xccd5ea,'type':_0x4b268d}),null;}}export async function ledSave(_0x301de2){const _0x33651e=a0_0x51578e,_0x254c42=parseInt(await getData(gameName,'0',_0x33651e(0x1f3))),_0x5bfe1b=_0x254c42===0x1?_0x33651e(0x1bf):_0x254c42===0x2?_0x33651e(0x1b1):_0x254c42===0x3?_0x33651e(0x193):_0x254c42===0x4?_0x33651e(0x1d0):_0x254c42===0x5?_0x33651e(0x1bc):_0x254c42===0x6?_0x33651e(0x1e5):_0x254c42===0x7?_0x33651e(0x1f5):_0x33651e(0x1ff);try{for(let _0x25646e=0x0;_0x25646e<=0x7;_0x25646e++){document[_0x33651e(0x1ea)](_0x33651e(0x1d8)+_0x25646e)[_0x33651e(0x1e0)]['fill']=_0x33651e(0x1d5);}await delay(0x3e8);for(let _0x1b351c=0x0;_0x1b351c<=0x7;_0x1b351c++){document[_0x33651e(0x1ea)](_0x33651e(0x1d8)+_0x1b351c)[_0x33651e(0x1e0)]['fill']=_0x33651e(0x1d5);}document[_0x33651e(0x1ea)](_0x5bfe1b)[_0x33651e(0x1e0)][_0x33651e(0x1a6)]=_0x301de2;}catch(_0x220a1){console[_0x33651e(0x1c1)](_0x33651e(0x1f8),_0x220a1);}};export async function notiMessage(_0x3f4e70,_0x229189,_0x64dba=![]){const _0x239ebd=a0_0x51578e;var _0x3096a7=document[_0x239ebd(0x1ea)](_0x239ebd(0x1d6));const _0x2f3f20=parseInt(await getData(gameName,'0',_0x239ebd(0x1f3)))||0x0;_0x3096a7[_0x239ebd(0x1e0)]['opacity']===_0x239ebd(0x1e8)&&(clearTimeout(messageTimeout),_0x3096a7[_0x239ebd(0x1e0)][_0x239ebd(0x1ad)]='0'),_0x3096a7[_0x239ebd(0x1e1)]=_0x3f4e70,_0x3096a7['style'][_0x239ebd(0x1ad)]=_0x239ebd(0x1e8),messageTimeout=setTimeout(()=>{const _0x1bf71a=_0x239ebd;_0x3096a7['textContent']='['+_0x2f3f20+']\x20'+gameName[_0x1bf71a(0x1be)](0x0,gameName['lastIndexOf']('.')),_0x3096a7['style'][_0x1bf71a(0x1ad)]=_0x1bf71a(0x1e8);},_0x229189),_0x64dba&&(canvas[_0x239ebd(0x18a)]['add']('visible'),setTimeout(()=>{const _0x136e04=_0x239ebd;canvas[_0x136e04(0x18a)][_0x136e04(0x1ac)](_0x136e04(0x19d));},0x258));}export async function FSSync(){Module['FSSync']();}