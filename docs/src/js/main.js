const a0_0x299600=a0_0x8154;(function(_0x4690e0,_0xb03359){const _0x9fba75=a0_0x8154,_0x198032=_0x4690e0();while(!![]){try{const _0x18de89=-parseInt(_0x9fba75(0x224))/0x1*(parseInt(_0x9fba75(0x251))/0x2)+-parseInt(_0x9fba75(0x1f9))/0x3*(-parseInt(_0x9fba75(0x22a))/0x4)+parseInt(_0x9fba75(0x23b))/0x5*(-parseInt(_0x9fba75(0x225))/0x6)+-parseInt(_0x9fba75(0x201))/0x7*(-parseInt(_0x9fba75(0x23a))/0x8)+parseInt(_0x9fba75(0x259))/0x9+parseInt(_0x9fba75(0x229))/0xa*(-parseInt(_0x9fba75(0x1ef))/0xb)+parseInt(_0x9fba75(0x22e))/0xc*(parseInt(_0x9fba75(0x236))/0xd);if(_0x18de89===_0xb03359)break;else _0x198032['push'](_0x198032['shift']());}catch(_0x440d20){_0x198032['push'](_0x198032['shift']());}}}(a0_0x45b2,0x23412));import a0_0x129e74 from'/src/core/1.1.0/mgba.js';import a0_0x3583ec from'/src/core/2.0.0/mgba.js';import*as a0_0x14bbfb from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x129e74,'2.0.0':a0_0x3583ec};let currentVersion=localStorage[a0_0x299600(0x204)](a0_0x299600(0x217))||a0_0x299600(0x250),mGBA=versions[currentVersion];document[a0_0x299600(0x22c)](a0_0x299600(0x217))['textContent']=a0_0x299600(0x242)+currentVersion,document['getElementById'](a0_0x299600(0x217))[a0_0x299600(0x20a)](a0_0x299600(0x235),()=>{const _0x5bb84e=a0_0x299600,_0xacce0c=Object[_0x5bb84e(0x233)](versions);let _0xb2d7d8=_0xacce0c[_0x5bb84e(0x1f7)](currentVersion);currentVersion=_0xacce0c[(_0xb2d7d8+0x1)%_0xacce0c['length']],localStorage[_0x5bb84e(0x249)](_0x5bb84e(0x217),currentVersion),document[_0x5bb84e(0x22c)]('GBAver')[_0x5bb84e(0x262)]='Wasm_©'+currentVersion;});const Module={'canvas':document[a0_0x299600(0x22c)]('canvas')};function initializeCore(_0x3fadfd,_0x118af1){_0x3fadfd(_0x118af1)['then'](function(_0x5ce758){_0x5ce758['FSInit']();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x299600(0x22c)](a0_0x299600(0x25c)),controlSetting=document['getElementById'](a0_0x299600(0x260));function handleVisibilityChange(_0x520e03){const _0x4584af=a0_0x299600;document[_0x4584af(0x21a)]===_0x4584af(0x215)||_0x520e03?.[_0x4584af(0x24e)]===_0x4584af(0x209)||_0x520e03?.[_0x4584af(0x25b)]?(Module[_0x4584af(0x211)](),pauseGame(),canvas[_0x4584af(0x22d)][_0x4584af(0x1f8)](_0x4584af(0x216))):(setTimeout(()=>{const _0x497f18=_0x4584af;canvas['classList'][_0x497f18(0x207)]('visible');},0x258),controlSetting[_0x4584af(0x22d)][_0x4584af(0x22f)](_0x4584af(0x216))&&resumeGame());}async function statusShow(){const _0x922a5d=a0_0x299600;document['addEventListener'](_0x922a5d(0x21e),handleVisibilityChange),document[_0x922a5d(0x20a)](_0x922a5d(0x24d),handleVisibilityChange),window['addEventListener'](_0x922a5d(0x209),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x14bbfb[_0x922a5d(0x237)](parseInt(await getData(gameName,'0','turboState'))),await delay(0xc8),await Module[_0x922a5d(0x239)](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x922a5d(0x222)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x87a972=a0_0x299600;await ledSave(_0x87a972(0x223)),await Module[_0x87a972(0x24c)](0x0),await Module[_0x87a972(0x211)](),await screenShot(0x0),console[_0x87a972(0x255)](_0x87a972(0x241)+ ++countAutoSave+_0x87a972(0x1fe));}async function saveStateInCloud(){const _0x3a92d6=a0_0x299600,_0x25fa6e=gameName[_0x3a92d6(0x226)](/\.(zip|gb|gbc|gba)$/,_0x3a92d6(0x1f2)),_0x23ca55=localStorage[_0x3a92d6(0x204)](_0x3a92d6(0x20f));navigator[_0x3a92d6(0x1ff)]&&(_0x23ca55&&(await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x25fa6e,Module[_0x3a92d6(0x1f1)](_0x3a92d6(0x24b)+_0x25fa6e),_0x3a92d6(0x21b)),await lockNoti('',_0x3a92d6(0x252)+ ++countUpload+_0x3a92d6(0x1fe),0x7d0)));}function startTimer(){let [_0x3e7129,_0x5cefde,_0x3a71d5,_0x20a92a,_0x3d4726]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x58efb8=a0_0x8154;_0x3a71d5++,_0x20a92a++,_0x3d4726++;if(_0x3a71d5===0x3c)[_0x3a71d5,_0x5cefde]=[0x0,_0x5cefde+0x1];if(_0x5cefde===0x3c)[_0x5cefde,_0x3e7129]=[0x0,_0x3e7129+0x1];document[_0x58efb8(0x22c)](_0x58efb8(0x1fb))[_0x58efb8(0x262)]=_0x3e7129+'h'+_0x5cefde['toString']()[_0x58efb8(0x230)](0x2,'0')+'.'+_0x3a71d5['toString']()[_0x58efb8(0x230)](0x2,'0');_0x20a92a===0x3c&&(saveStatePeriodically(),_0x20a92a=0x0);;_0x3d4726===0x708&&(saveStateInCloud(),_0x3d4726=0x0);;},0x3e8);}export async function uploadGame(_0x4478ef){const _0x122171=a0_0x299600,_0x57a50a=_0x4478ef[_0x122171(0x248)][0x0];Module[_0x122171(0x205)](_0x57a50a,()=>{const _0xe79f30=_0x122171;Module[_0xe79f30(0x211)]();});}export async function loadGame(_0x38d7a0){const _0x5cba52=a0_0x299600,_0x359057=_0x38d7a0['replace'](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0xc2d0e=Module[_0x5cba52(0x258)](_0x5cba52(0x200))[_0x5cba52(0x21f)](_0x1ebada=>_0x1ebada!=='.'&&_0x1ebada!=='..');intro['classList'][_0x5cba52(0x1f8)](_0x5cba52(0x208)),errorLogElements[0x0][_0x5cba52(0x268)][_0x5cba52(0x202)]='0',ingame[_0x5cba52(0x22d)]['remove']('disable'),_0x38d7a0[_0x5cba52(0x23e)]('.gbc')||_0x38d7a0[_0x5cba52(0x23e)]('.gb')?(canvas[_0x5cba52(0x22d)][_0x5cba52(0x1f8)](_0x5cba52(0x256)),areaTrans['classList'][_0x5cba52(0x1f8)](_0x5cba52(0x20e)),localStorage[_0x5cba52(0x249)](_0x5cba52(0x253),_0x5cba52(0x206)+(window[_0x5cba52(0x25e)]-0xe6)+','+(window[_0x5cba52(0x25e)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x5cba52(0x253),_0x5cba52(0x206)+(window[_0x5cba52(0x25e)]-0x96)+','+(window[_0x5cba52(0x25e)]-0x96)*0x2/0x3),_0xc2d0e[_0x5cba52(0x267)](_0x359057)?(await Module['loadGame'](_0x5cba52(0x1fa)+_0x38d7a0),confirm(_0x5cba52(0x1f0))&&(await delay(0x64),await Module[_0x5cba52(0x1fc)](0x0),await shaderData())):(await Module[_0x5cba52(0x22b)]('/data/games/'+_0x38d7a0),await shaderData()),await statusShow();}export async function saveState(_0x25cf88){const _0x32257e=a0_0x299600;await Module[_0x32257e(0x24c)](_0x25cf88);}export async function loadState(_0xb54819){await Module['loadState'](_0xb54819);}export async function downloadFile(_0x120bee,_0x277d32){const _0x285559=a0_0x299600,_0x5e312a=Module['downloadFile'](_0x120bee),_0x595b69=document['createElement']('a');document['body'][_0x285559(0x24f)](_0x595b69),_0x595b69[_0x285559(0x240)]=_0x277d32;const _0x170535=new Blob([_0x5e312a],{'type':_0x285559(0x24a)});_0x595b69[_0x285559(0x1fd)]=URL['createObjectURL'](_0x170535),_0x595b69[_0x285559(0x235)](),URL['revokeObjectURL'](_0x170535),_0x595b69['remove']();}export function downloadFileInCloud(_0x23ed76){const _0x33cad5=a0_0x299600;try{const _0x163b50=Module[_0x33cad5(0x1f1)](_0x23ed76);return _0x163b50;}catch(_0x72d5b4){return null;}}export async function uploadFileInCloud(_0x32598d){const _0x173a03=a0_0x299600;Module[_0x173a03(0x20c)](_0x32598d,async()=>{const _0x3aae8d=_0x173a03;localStorageFile(),await Module[_0x3aae8d(0x211)]();});}export async function uploadFile(_0x17c217){const _0xc37d26=a0_0x299600,_0x74854d=_0x17c217[_0xc37d26(0x248)][0x0];Module[_0xc37d26(0x20c)](_0x74854d,async()=>{localStorageFile(),await Module['FSSync']();});}export async function editFile(_0x1fc466,_0x304abe,_0x4673e7){const _0xa0a6d6=a0_0x299600;await Module[_0xa0a6d6(0x26b)](_0x1fc466,_0x304abe,_0x4673e7);}export async function deleteFile(_0x1edd10){try{return await Module['deleteFile'](_0x1edd10),!![];}catch(_0xd682d0){return console['error'](_0x1edd10),null;}}export function listFiles(_0x313e5c){const _0x56a4bd=a0_0x299600,_0xf4929a=Module[_0x56a4bd(0x258)](_0x313e5c)[_0x56a4bd(0x21f)](_0x2b1517=>_0x2b1517!=='.'&&_0x2b1517!=='..');return _0xf4929a;}export function listGame(){const _0x37614b=a0_0x299600,_0x21eff6=Module['listRoms']()[_0x37614b(0x21f)](_0x339431=>_0x339431!=='.'&&_0x339431!=='..');return _0x21eff6;}export function listSave(){const _0x2a02a7=Module['listSaves']()['filter'](_0x183c34=>_0x183c34!=='.'&&_0x183c34!=='..');return _0x2a02a7;}export function listState(){const _0x4e4a6c=a0_0x299600,_0x19835a=Module[_0x4e4a6c(0x257)]()[_0x4e4a6c(0x21f)](_0x6d28fe=>_0x6d28fe!=='.'&&_0x6d28fe!=='..');return _0x19835a;}export function listCheat(){const _0x397b40=a0_0x299600,_0x3ebaab=Module['listCheats']()[_0x397b40(0x21f)](_0x5f07ad=>_0x5f07ad!=='.'&&_0x5f07ad!=='..');return _0x3ebaab;}export function listScreenshot(){const _0x501882=a0_0x299600,_0x3aef91=Module[_0x501882(0x214)]()[_0x501882(0x21f)](_0x1cb758=>_0x1cb758!=='.'&&_0x1cb758!=='..');return _0x3aef91;}export function fileSize(_0x179504){const _0x545dac=a0_0x299600,_0x5970ea=Module[_0x545dac(0x227)](_0x179504);return _0x5970ea;}export async function resumeGame(){const _0x529cd4=a0_0x299600;Module[_0x529cd4(0x25d)](),Module[_0x529cd4(0x239)](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x5aca21=a0_0x299600;Module[_0x5aca21(0x1f6)](),Module[_0x5aca21(0x239)](),notiMessage(_0x5aca21(0x219),0x7d0);}export async function buttonPress(_0x1a8776){Module['buttonPress'](_0x1a8776);}function a0_0x45b2(){const _0x122477=['remove','disable','beforeunload','addEventListener','substring','uploadAll','toggleRewind','gbc1','uId','split','FSSync','0.4','error','listScreenshots','hidden','visible','GBAver','entries','Paused!','visibilityState','state','screenshot','led0','pagehide','filter','join','charCodeAt','slotStateSaved','#20A5A6','6PVEgPm','6jMdhdq','replace','fileSize','led00','2130ApnDAs','52560jnHxqZ','loadGame','getElementById','classList','5532RiRZsS','contains','padStart','led06','trim','keys','.png','click','11843EwtacB','turboF','/data/screenshots/','SDL2','384ZlGLsd','308435HFLwdm','autoLoadCheats','now','endsWith','led07','download','Auto\x20save\x20','Wasm_©','rgba(245,\x20232,\x20209,\x200.4)','led05','saveTime','setFastForwardMultiplier','\x20|\x20','files','setItem','application/octet-stream','/data/states/','saveState','visibilitychange','type','appendChild','1.1.0','94838rnZKpx','Cloud\x20upload\x20','screenSize','exec','log','gbc','listStates','listFiles','1276587OBlEzE','opacity','persisted','canvas','resumeGame','innerWidth','led03','control-setting','fill','textContent','Error\x20ledSave:','lastIndexOf','map','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','includes','style','\x20:\x20','length','editFileName','setVolume','14597IoNZqd','Do\x20you\x20want\x20to\x20load\x20save\x20state?','downloadFile','.ss0','encode','image/png','All','pauseGame','indexOf','add','12uxXhRm','/data/games/','timer','loadState','href','\x20time(s)','onLine','states','23170kpeTsf','bottom','tEXtComment\x00','getItem','uploadRom','0,0,'];a0_0x45b2=function(){return _0x122477;};return a0_0x45b2();}export async function buttonUnpress(_0x693555){Module['buttonUnpress'](_0x693555);}export async function screenShot(_0x42b38c){const _0x384692=a0_0x299600,_0x22b39e=gameName['replace'](/\.(gba|gbc|gb|zip)$/,'_'+_0x42b38c+_0x384692(0x234)),_0x9fef32=await getData(gameName,_0x42b38c,_0x384692(0x1f5))||'';console[_0x384692(0x255)](_0x9fef32),await Module['screenshot'](_0x22b39e),await setData(gameName,_0x42b38c,_0x384692(0x245),formatDateTime(Date[_0x384692(0x23d)]()),_0x9fef32);}export async function dowloadScreenShot(_0x22128e){const _0x1a853c=a0_0x299600;try{const _0x5b584b=await fileToBase64(Module[_0x1a853c(0x1f1)](_0x22128e));return _0x5b584b;}catch{}}export async function captureOCR(_0x37fd8e){const _0x484bf7=a0_0x299600;Module['screenshot'](_0x37fd8e);const _0xc25db7=Module['downloadFile'](_0x484bf7(0x238)+_0x37fd8e);return _0xc25db7;}export async function setFastForwardMultiplier(_0x2b22c0){const _0x31b6d8=a0_0x299600;Module[_0x31b6d8(0x246)](_0x2b22c0);}export async function uploadCheats(_0x4fe65c){const _0x1c0b16=a0_0x299600;Module[_0x1c0b16(0x23c)](),Module[_0x1c0b16(0x20c)](_0x4fe65c,async()=>{});}export function setVolume(_0x2c21f2){const _0x85d2db=a0_0x299600;Module[_0x85d2db(0x1ee)](_0x2c21f2);}function a0_0x8154(_0xecc1e0,_0x24b644){const _0x45b299=a0_0x45b2();return a0_0x8154=function(_0x8154f3,_0xd8eb98){_0x8154f3=_0x8154f3-0x1ee;let _0x1b51cc=_0x45b299[_0x8154f3];return _0x1b51cc;},a0_0x8154(_0xecc1e0,_0x24b644);}export async function setData(_0x4b9766,_0x4ad497,_0x2edce3,_0x277d5e,_0x31f704=''){const _0x29e895=a0_0x299600,_0x4cf24b=_0x4b9766[_0x29e895(0x226)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x6e7a1f=_0x29e895(0x238)+_0x4cf24b+'_'+_0x4ad497+_0x29e895(0x234);let _0x53c6c0;try{_0x53c6c0=await fileToBase64(Module[_0x29e895(0x1f1)](_0x6e7a1f));}catch(_0x57cadd){await Module[_0x29e895(0x21c)](_0x4cf24b+'_'+_0x4ad497+_0x29e895(0x234)),await delay(0xc8),_0x53c6c0=await fileToBase64(Module['downloadFile'](_0x6e7a1f));}let _0x5cb2e0=atob(_0x53c6c0[_0x29e895(0x210)](',')[0x1]),_0x194e81=_0x29e895(0x203),_0x3fb2d9=_0x5cb2e0[_0x29e895(0x1f7)](_0x194e81),_0x2f8394={};if(_0x3fb2d9!==-0x1||_0x31f704[_0x29e895(0x232)]()!==''){let _0x22d558=_0x3fb2d9!==-0x1?_0x5cb2e0[_0x29e895(0x20b)](_0x3fb2d9+_0x194e81[_0x29e895(0x26a)]):_0x31f704,_0x42a773=/(\w+)\s*:\s*([^|]*)/g,_0x4303df;while((_0x4303df=_0x42a773[_0x29e895(0x254)](_0x22d558))!==null){_0x2f8394[_0x4303df[0x1][_0x29e895(0x232)]()]=_0x4303df[0x2][_0x29e895(0x232)]();}_0x3fb2d9!==-0x1&&(_0x5cb2e0=_0x5cb2e0['substring'](0x0,_0x3fb2d9));}_0x2f8394[_0x2edce3]=_0x277d5e;let _0x1733a2=Object[_0x29e895(0x218)](_0x2f8394)[_0x29e895(0x265)](([_0x170b0d,_0x23f932])=>_0x170b0d+_0x29e895(0x269)+_0x23f932)[_0x29e895(0x220)](_0x29e895(0x247)),_0xc9ae56=new TextEncoder()[_0x29e895(0x1f3)](_0x194e81+'\x20'+_0x1733a2),_0x2492e7=new Uint8Array([..._0x5cb2e0]['map'](_0x45113f=>_0x45113f[_0x29e895(0x221)](0x0))['concat']([..._0xc9ae56])),_0x11b927=new File([new Blob([_0x2492e7],{'type':_0x29e895(0x1f4)})],_0x4cf24b+'_'+_0x4ad497+_0x29e895(0x234),{'type':_0x29e895(0x1f4)});Module[_0x29e895(0x20c)](_0x11b927,async()=>{});}export async function getData(_0xc01fb0,_0x2fea16,_0x192562){const _0x36ec0d=a0_0x299600;try{const _0x3eadc8=_0xc01fb0[_0x36ec0d(0x226)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x107937='/data/screenshots/'+_0x3eadc8+'_'+_0x2fea16+_0x36ec0d(0x234);let _0x5c68c7;try{_0x5c68c7=await fileToBase64(Module[_0x36ec0d(0x1f1)](_0x107937));}catch(_0x1c79da){return null;}let _0x5b181d=atob(_0x5c68c7['split'](',')[0x1]),_0x285f69=_0x36ec0d(0x203),_0x4b2407=_0x5b181d[_0x36ec0d(0x1f7)](_0x285f69);if(_0x4b2407!==-0x1){let _0x41c09d=_0x5b181d[_0x36ec0d(0x20b)](_0x4b2407+_0x285f69[_0x36ec0d(0x26a)]);if(_0x192562===_0x36ec0d(0x1f5))return _0x41c09d[_0x36ec0d(0x232)]();let _0x41808d=new RegExp(_0x192562+_0x36ec0d(0x266)),_0x280a8d=_0x41c09d['match'](_0x41808d);if(_0x280a8d)return _0x280a8d[0x1][_0x36ec0d(0x232)]();}}catch(_0x4e7690){return console[_0x36ec0d(0x213)]({'romName':_0xc01fb0,'slot':_0x2fea16,'type':_0x192562}),null;}}export async function ledSave(_0x526323){const _0x3157f4=a0_0x299600,_0x2f3772=parseInt(await getData(gameName,'0','slotStateSaved')),_0x50c1a1=_0x2f3772===0x1?'led01':_0x2f3772===0x2?'led02':_0x2f3772===0x3?_0x3157f4(0x25f):_0x2f3772===0x4?'led04':_0x2f3772===0x5?_0x3157f4(0x244):_0x2f3772===0x6?_0x3157f4(0x231):_0x2f3772===0x7?_0x3157f4(0x23f):_0x3157f4(0x228);try{for(let _0xc03fd6=0x0;_0xc03fd6<=0x7;_0xc03fd6++){document['getElementById'](_0x3157f4(0x21d)+_0xc03fd6)[_0x3157f4(0x268)][_0x3157f4(0x261)]=_0x3157f4(0x243);}await delay(0x3e8);for(let _0x3e8d51=0x0;_0x3e8d51<=0x7;_0x3e8d51++){document[_0x3157f4(0x22c)](_0x3157f4(0x21d)+_0x3e8d51)[_0x3157f4(0x268)][_0x3157f4(0x261)]=_0x3157f4(0x243);}document['getElementById'](_0x50c1a1)[_0x3157f4(0x268)][_0x3157f4(0x261)]=_0x526323;}catch(_0x19e9dd){console[_0x3157f4(0x213)](_0x3157f4(0x263),_0x19e9dd);}};export async function notiMessage(_0xec943f,_0x24bf5a,_0x2f8eb4=![]){const _0xfe62e2=a0_0x299600;var _0xdbc03a=document[_0xfe62e2(0x22c)]('noti-mess');const _0x2870ab=parseInt(await getData(gameName,'0',_0xfe62e2(0x222)))||0x0;_0xdbc03a[_0xfe62e2(0x268)][_0xfe62e2(0x25a)]===_0xfe62e2(0x212)&&(clearTimeout(messageTimeout),_0xdbc03a[_0xfe62e2(0x268)][_0xfe62e2(0x25a)]='0'),_0xdbc03a[_0xfe62e2(0x262)]=_0xec943f,_0xdbc03a[_0xfe62e2(0x268)][_0xfe62e2(0x25a)]=_0xfe62e2(0x212),messageTimeout=setTimeout(()=>{const _0xf4ebf3=_0xfe62e2;_0xdbc03a[_0xf4ebf3(0x262)]='['+_0x2870ab+']\x20'+gameName['substring'](0x0,gameName[_0xf4ebf3(0x264)]('.')),_0xdbc03a[_0xf4ebf3(0x268)][_0xf4ebf3(0x25a)]=_0xf4ebf3(0x212);},_0x24bf5a),_0x2f8eb4&&(canvas[_0xfe62e2(0x22d)][_0xfe62e2(0x1f8)](_0xfe62e2(0x216)),setTimeout(()=>{const _0x4fdd07=_0xfe62e2;canvas['classList'][_0x4fdd07(0x207)]('visible');},0x258));}export async function FSSync(){Module['FSSync']();}export const rewind=_0x1d8daf=>Module[a0_0x299600(0x20d)]?.(_0x1d8daf)||null;