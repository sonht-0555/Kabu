const a0_0x1f6ac5=a0_0x32b5;(function(_0x41d189,_0x5ac92d){const _0x5c9b02=a0_0x32b5,_0x30211a=_0x41d189();while(!![]){try{const _0x441955=parseInt(_0x5c9b02(0xf4))/0x1*(parseInt(_0x5c9b02(0xf1))/0x2)+parseInt(_0x5c9b02(0x110))/0x3+parseInt(_0x5c9b02(0x100))/0x4+-parseInt(_0x5c9b02(0x109))/0x5+parseInt(_0x5c9b02(0xec))/0x6*(-parseInt(_0x5c9b02(0x10c))/0x7)+-parseInt(_0x5c9b02(0xd5))/0x8+parseInt(_0x5c9b02(0xc9))/0x9;if(_0x441955===_0x5ac92d)break;else _0x30211a['push'](_0x30211a['shift']());}catch(_0x337b0d){_0x30211a['push'](_0x30211a['shift']());}}}(a0_0x3ea1,0x68264));import a0_0x22d7c4 from'../core/mgba.js';import*as a0_0x2c6650 from'./gamepad.js';function a0_0x32b5(_0x39475f,_0x4adc18){const _0x3ea106=a0_0x3ea1();return a0_0x32b5=function(_0x32b5de,_0x50ac6c){_0x32b5de=_0x32b5de-0xc6;let _0x11b6bc=_0x3ea106[_0x32b5de];return _0x11b6bc;},a0_0x32b5(_0x39475f,_0x4adc18);}import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x1f6ac5(0x11b)](a0_0x1f6ac5(0xe0))};function initializeCore(_0x42cb49,_0x30d7c5){const _0x3e7f8d=a0_0x1f6ac5;_0x42cb49(_0x30d7c5)[_0x3e7f8d(0xf0)](function(_0x1216f8){_0x1216f8['FSInit']();});}initializeCore(a0_0x22d7c4,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x1f6ac5(0x11b)]('canvas'),savedTurboState=localStorage[a0_0x1f6ac5(0xd9)](a0_0x1f6ac5(0x10b)),controlSetting=document['getElementById'](a0_0x1f6ac5(0xf3));function handleVisibilityChange(_0x15b5ad){const _0xa60f63=a0_0x1f6ac5;document[_0xa60f63(0xd8)]===_0xa60f63(0xf7)||_0x15b5ad?.[_0xa60f63(0xe1)]===_0xa60f63(0x12d)||_0x15b5ad?.[_0xa60f63(0xd0)]?(pauseGame(),canvas[_0xa60f63(0x103)]['add'](_0xa60f63(0xf8))):(setTimeout(()=>{const _0x1d1e08=_0xa60f63;canvas[_0x1d1e08(0x103)][_0x1d1e08(0xc8)](_0x1d1e08(0xf8));},0x258),controlSetting[_0xa60f63(0x103)][_0xa60f63(0x114)](_0xa60f63(0xf8))&&resumeGame());}async function statusShow(){const _0x36c946=a0_0x1f6ac5;document[_0x36c946(0x116)](_0x36c946(0x124),handleVisibilityChange),document[_0x36c946(0x116)]('visibilitychange',handleVisibilityChange),window[_0x36c946(0x116)](_0x36c946(0x12d),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x2c6650[_0x36c946(0xfa)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x36c946(0xd9)](_0x36c946(0x108)))),await notiMessage(gameVer,0x3e8);}function a0_0x3ea1(){const _0x1dbb66=['createObjectURL','revokeObjectURL','click','beforeunload','/data/screenshots/','body','remove','9435240teXpat','Resumed!','uId','now','replace','uploadRom','.gbc','persisted','listCheats','innerWidth','listStates','log','4180368owfSLT','Paused!','listScreenshots','visibilityState','getItem','\x20time(s)','_savedCheats','listGames','buttonUnpress','_dateState','FSSync','canvas','type','files','Cheat\x20Enabled!','setItem','#E0C068','#20A5A6','.ss0','Error\x20uploadSavSta:','screenSize','Save/State\x20uploaded\x20successfully:','deleteFile','4261836WVVnKb','/data/states/','pauseGame','Do\x20you\x20want\x20to\x20load\x20save\x20state?','then','86chotsA','uploadSaveOrSaveState','control-setting','7492voyDRx','gbc1','setFastForwardMultiplier','hidden','visible','endsWith','turboF','bottom','_imageState0','Unable\x20to\x20upload\x20to\x20Cloud!','name','error','1676344oiuHVb','gameName','add','classList','appendChild','Online!','fileSize','Error\x20uploadCheat:','slotStateSaved','2176890jwulRq','resumeGame','turboState','7VUMMjd','application/octet-stream','downloadFile','timer','915672gazikF','includes','autoLoadCheats','_imageState','contains','text/plain','addEventListener','saveState','onLine','screenshot','No\x20screenshot!','getElementById','disable','_dateState0','0,0,','textContent','_slot0.txt','Auto\x20save\x20','.png','loadState','pagehide','gbc','toString','padStart','SDL2','listSaves'];a0_0x3ea1=function(){return _0x1dbb66;};return a0_0x3ea1();}async function saveStatePeriodically(){const _0x21b3c0=a0_0x1f6ac5;await ledSave(_0x21b3c0(0xe6)),await Module['saveState'](0x0),await Module[_0x21b3c0(0xdf)](),await screenShot(0x0),console[_0x21b3c0(0xd4)](_0x21b3c0(0x121)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x3f2dce=a0_0x1f6ac5,_0x13a998=localStorage['getItem'](_0x3f2dce(0x101)),_0x4698c6=_0x13a998['replace']('.gba',_0x3f2dce(0xe7)),_0x1de9b8=localStorage['getItem'](_0x3f2dce(0xcb)),_0x463f54=localStorage[_0x3f2dce(0xd9)](_0x13a998+_0x3f2dce(0xfc)),_0x2e2c5e=localStorage[_0x3f2dce(0xd9)](_0x13a998+_0x3f2dce(0x11d));if(navigator[_0x3f2dce(0x118)]){if(_0x1de9b8){await ledSave(_0x3f2dce(0xe5)),await delay(0x3e8),await dpUploadFile(_0x4698c6,Module['downloadFile'](_0x3f2dce(0xed)+_0x4698c6));if(_0x463f54!==null){const _0x8d5fb9=_0x463f54+'\x0a\x0a'+_0x2e2c5e,_0x29ae06=new Blob([_0x8d5fb9],{'type':_0x3f2dce(0x115)});await dpUploadFile(_0x13a998+_0x3f2dce(0x120),_0x29ae06);}else console['log'](_0x3f2dce(0x11a));await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x3f2dce(0xda),0x7d0);}else console[_0x3f2dce(0xd4)](_0x3f2dce(0xfd));}else console[_0x3f2dce(0xd4)](_0x3f2dce(0x105));}function startTimer(){let [_0x18a9e9,_0x258ca5,_0x116337,_0x13be6d,_0x2202f5]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0xb183ff=a0_0x32b5;_0x116337++,_0x13be6d++,_0x2202f5++;if(_0x116337===0x3c)[_0x116337,_0x258ca5]=[0x0,_0x258ca5+0x1];if(_0x258ca5===0x3c)[_0x258ca5,_0x18a9e9]=[0x0,_0x18a9e9+0x1];document[_0xb183ff(0x11b)](_0xb183ff(0x10f))[_0xb183ff(0x11f)]=_0x18a9e9+'h'+_0x258ca5[_0xb183ff(0x126)]()['padStart'](0x2,'0')+'.'+_0x116337[_0xb183ff(0x126)]()[_0xb183ff(0x127)](0x2,'0');_0x13be6d===0x3c&&(saveStatePeriodically(),_0x13be6d=0x0);;_0x13be6d===0xe10&&(saveStateInCloud(),_0x2202f5=0x0);;},0x3e8);}export async function uploadGame(_0xcb932b){const _0x3e3dda=a0_0x1f6ac5,_0x1e9314=_0xcb932b['files'][0x0];Module[_0x3e3dda(0xce)](_0x1e9314,()=>{const _0x4226fb=_0x3e3dda;Module[_0x4226fb(0xdf)]();});}export async function loadGame(_0xcea4ce){const _0x328631=a0_0x1f6ac5,_0x5011c9=_0xcea4ce[_0x328631(0xcd)](/\.(gba|gbc|gb|zip)$/,_0x328631(0xe7)),_0x40981e=Module[_0x328631(0xd3)]();intro[_0x328631(0x103)][_0x328631(0x102)](_0x328631(0x11c)),errorLogElements[0x0]['style'][_0x328631(0xfb)]='0',ingame[_0x328631(0x103)][_0x328631(0xc8)](_0x328631(0x11c)),_0xcea4ce[_0x328631(0xf9)](_0x328631(0xcf))||_0xcea4ce[_0x328631(0xf9)]('.gb')?(canvas['classList'][_0x328631(0x102)](_0x328631(0x125)),areaTrans[_0x328631(0x103)]['add'](_0x328631(0xf5)),localStorage[_0x328631(0xe4)]('screenSize',_0x328631(0x11e)+(window['innerWidth']-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage[_0x328631(0xe4)](_0x328631(0xe9),_0x328631(0x11e)+(window['innerWidth']-0x96)+','+(window[_0x328631(0xd2)]-0x96)*0x2/0x3),_0x40981e[_0x328631(0x111)](_0x5011c9)?(await Module['loadGame']('/data/games/'+_0xcea4ce),confirm(_0x328631(0xef))&&(await Module[_0x328631(0x123)](0x0),localStorage[_0x328631(0xe4)](_0x328631(0x101),_0xcea4ce),console['log'](_0xcea4ce))):(await Module['loadGame']('/data/games/'+_0xcea4ce),localStorage[_0x328631(0xe4)](_0x328631(0x101),_0xcea4ce)),await statusShow();}export async function saveState(_0x1fbdea){const _0x233ef4=a0_0x1f6ac5;await Module[_0x233ef4(0x117)](_0x1fbdea),await Module[_0x233ef4(0xdf)]();}export async function loadState(_0x317432){const _0x5c91c8=a0_0x1f6ac5;await Module[_0x5c91c8(0x123)](_0x317432);}export async function downloadFile(_0x4b61c8,_0x5edb77){const _0x405893=a0_0x1f6ac5,_0xb1eaa1=Module[_0x405893(0x10e)](_0x4b61c8),_0x22b548=document['createElement']('a');document[_0x405893(0xc7)][_0x405893(0x104)](_0x22b548),_0x22b548['download']=_0x5edb77;const _0x5e8edf=new Blob([_0xb1eaa1],{'type':_0x405893(0x10d)});_0x22b548['href']=URL[_0x405893(0x12a)](_0x5e8edf),_0x22b548[_0x405893(0x12c)](),URL[_0x405893(0x12b)](_0x5e8edf),_0x22b548['remove']();}export function downloadFileInCloud(_0x2e3fe9){const _0x42b7aa=a0_0x1f6ac5,_0x508758=Module[_0x42b7aa(0x10e)](_0x2e3fe9);return _0x508758;}export async function uploadFile(_0x27c012){const _0x34800a=a0_0x1f6ac5,_0x1a0597=_0x27c012['files'][0x0];Module[_0x34800a(0xf2)](_0x1a0597,()=>{const _0x2ce726=_0x34800a;Module[_0x2ce726(0xdf)]();});}export async function editFile(_0x24ef27,_0x4d3167,_0x565c3f){const _0x201812=a0_0x1f6ac5;await Module['editFileName'](_0x24ef27,_0x4d3167,_0x565c3f),await Module[_0x201812(0xdf)]();}export async function deleteFile(_0x4a89ef){const _0x3fe7c9=a0_0x1f6ac5;await Module[_0x3fe7c9(0xeb)](_0x4a89ef),await Module[_0x3fe7c9(0xdf)]();}export function listGame(){const _0x689237=a0_0x1f6ac5,_0x40b982=Module[_0x689237(0xdc)]();return _0x40b982;}export function listSave(){const _0x263a45=a0_0x1f6ac5,_0x3be3c4=Module[_0x263a45(0x129)]();return _0x3be3c4;}export function listState(){const _0xf7fbd7=a0_0x1f6ac5,_0x2109b7=Module[_0xf7fbd7(0xd3)]();return _0x2109b7;}export function listCheat(){const _0x5945d4=a0_0x1f6ac5,_0x4d09f5=Module[_0x5945d4(0xd1)]();return _0x4d09f5;}export function listScreenshot(){const _0x2a4318=a0_0x1f6ac5,_0x5a5532=Module[_0x2a4318(0xd7)]();return _0x5a5532;}export function fileSize(_0x41eb0f){const _0x165ac3=a0_0x1f6ac5,_0xf51c2=Module[_0x165ac3(0x106)](_0x41eb0f);return _0xf51c2;}export async function uploadCheat(_0x49375c){const _0x223420=a0_0x1f6ac5;try{const _0x3d7303=_0x49375c['files'][0x0];await Module['uploadCheats'](_0x3d7303,()=>{const _0x143ef8=a0_0x32b5;console[_0x143ef8(0xd4)]('Cheat\x20uploaded\x20successfully:',_0x3d7303[_0x143ef8(0xfe)]),localStorageFile(),Module[_0x143ef8(0xdf)]();});}catch(_0x548bbf){console[_0x223420(0xff)](_0x223420(0x107),_0x548bbf);}}export async function uploadSavSta(_0x15a058){const _0x205d64=a0_0x1f6ac5;try{const _0x33e14c=_0x15a058[_0x205d64(0xe2)][0x0];await Module[_0x205d64(0xf2)](_0x33e14c,()=>{const _0x5b0ad6=_0x205d64;console['log'](_0x5b0ad6(0xea),_0x33e14c[_0x5b0ad6(0xfe)]),localStorageFile(),Module[_0x5b0ad6(0xdf)]();});}catch(_0x55617c){console[_0x205d64(0xff)](_0x205d64(0xe8),_0x55617c);}}export async function uploadSaveOrSaveState(_0xf67f27){const _0x264981=a0_0x1f6ac5;Module[_0x264981(0xf2)](_0xf67f27,()=>{const _0x5dfa87=_0x264981;localStorageFile(),Module[_0x5dfa87(0xdf)]();});}export async function resumeGame(){const _0x4125d1=a0_0x1f6ac5;Module[_0x4125d1(0x10a)](),Module[_0x4125d1(0x128)](),notiMessage(_0x4125d1(0xca),0x7d0);}export async function pauseGame(){const _0x36e46f=a0_0x1f6ac5;Module[_0x36e46f(0xee)](),Module[_0x36e46f(0x128)](),notiMessage(_0x36e46f(0xd6),0x7d0);}export async function buttonPress(_0x25dcab){Module['buttonPress'](_0x25dcab);}export async function buttonUnpress(_0x39f1d8){const _0x2ae86d=a0_0x1f6ac5;Module[_0x2ae86d(0xdd)](_0x39f1d8);}export async function screenShot(_0x124b2d){const _0x304344=a0_0x1f6ac5,_0x560d89=localStorage['getItem'](_0x304344(0x101)),_0x1650b7=_0x560d89[_0x304344(0xcd)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x304344(0x119)](''+_0x1650b7+_0x124b2d+_0x304344(0x122)),await Module['FSSync']();const _0x1c1192=await fileToBase64(Module[_0x304344(0x10e)]('/data/screenshots/'+_0x1650b7+_0x124b2d+_0x304344(0x122))),_0x1a514c=Date[_0x304344(0xcc)](),_0x6a052b=formatDateTime(_0x1a514c);localStorage[_0x304344(0xe4)](_0x560d89+_0x304344(0xde)+_0x124b2d,_0x6a052b),localStorage[_0x304344(0xe4)](_0x560d89+_0x304344(0x113)+_0x124b2d,_0x1c1192);}export async function captureOCR(_0x52e871){const _0x66985=a0_0x1f6ac5;Module[_0x66985(0x119)](_0x52e871);const _0x2bd1e7=Module[_0x66985(0x10e)](_0x66985(0xc6)+_0x52e871);return _0x2bd1e7;}export async function setFastForwardMultiplier(_0x96067e){const _0x4ee0a0=a0_0x1f6ac5;Module[_0x4ee0a0(0xf6)](_0x96067e);}export function uploadCheats(_0x519493,_0x525666,_0x4179d1,_0x218cc7,_0x90a326){Module['uploadCheats'](_0x519493,()=>{const _0x34f95e=a0_0x32b5;Module[_0x34f95e(0x112)](),setTimeout(()=>{const _0x4c15aa=_0x34f95e;Module[_0x4c15aa(0xdf)]();},0x1f4),_0x218cc7&&(localStorage[_0x34f95e(0xe4)](_0x525666+_0x34f95e(0xdb),_0x4179d1),notiMessage(_0x34f95e(0xe3),0x5dc)),_0x90a326[_0x34f95e(0x11f)]=localStorage[_0x34f95e(0xd9)](_0x525666+_0x34f95e(0xdb)||'Off');});}