const a0_0x3f761c=a0_0x2bc6;(function(_0x128bd5,_0xe91993){const _0x510548=a0_0x2bc6,_0x123674=_0x128bd5();while(!![]){try{const _0x3cae84=parseInt(_0x510548(0xfc))/0x1*(-parseInt(_0x510548(0x14d))/0x2)+-parseInt(_0x510548(0x126))/0x3+parseInt(_0x510548(0x12f))/0x4+parseInt(_0x510548(0x11e))/0x5+-parseInt(_0x510548(0x149))/0x6+parseInt(_0x510548(0x11d))/0x7+-parseInt(_0x510548(0x10b))/0x8*(-parseInt(_0x510548(0x106))/0x9);if(_0x3cae84===_0xe91993)break;else _0x123674['push'](_0x123674['shift']());}catch(_0x3a4214){_0x123674['push'](_0x123674['shift']());}}}(a0_0x520a,0xac0f7));import a0_0x9222a0 from'../core/mgba.js';import*as a0_0x23f9c5 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';const Module={'canvas':document['getElementById']('canvas')};function a0_0x520a(){const _0x45b2bd=['saveState','classList','timer','SDL2','hidden','set','loadGame','2645142acYqsK','gameName','log','createElement','replace','click','downloadFile','addEventListener','bottom','146912uVcMcW','revokeObjectURL','body','screenshot','slotStateSaved','disable','uploadAll','screenSize','filter','listCheats','turboF','beforeunload','Cloud\x20upload\x20','gbc1','.ss0','substring','setItem','Cheat\x20Enabled!','Resumed!','add','FSSync','/data/states/','href','files','toString','image/png','7381656uXdqDz','listStates','tEXtComment\x00','/data/screenshots/','12118IwOynn','state','Off','buttonUnpress','download','gbc','pagehide','persisted','autoLoadCheats','type','listScreenshots','turboState','onLine','19Ntleke','createObjectURL','0,0,','#E0C068','endsWith','innerWidth','remove','padStart','FSInit','appendChild','7566786inXmpu','deleteFile','_savedCheats','contains','loadState','8rsuSAc','\x20time(s)','#20A5A6','length','application/octet-stream','resumeGame','control-setting','getItem','/data/games/','visible','charCodeAt','Paused!','getElementById','encode','Do\x20you\x20want\x20to\x20load\x20save\x20state?','style','.gb','listSaves','5147254mZFNnH','6595330lfRaFg'];a0_0x520a=function(){return _0x45b2bd;};return a0_0x520a();}function initializeCore(_0x1bf7d9,_0x67d6dd){_0x1bf7d9(_0x67d6dd)['then'](function(_0x368665){const _0x3a40a8=a0_0x2bc6;_0x368665[_0x3a40a8(0x104)]();});}initializeCore(a0_0x9222a0,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById']('canvas'),savedTurboState=localStorage['getItem'](a0_0x3f761c(0xfa)),controlSetting=document[a0_0x3f761c(0x117)](a0_0x3f761c(0x111));function handleVisibilityChange(_0x1d93e0){const _0x3a04d6=a0_0x3f761c;document['visibilityState']===_0x3a04d6(0x123)||_0x1d93e0?.[_0x3a04d6(0x156)]===_0x3a04d6(0x13a)||_0x1d93e0?.[_0x3a04d6(0x154)]?(pauseGame(),canvas[_0x3a04d6(0x120)]['add'](_0x3a04d6(0x114))):(setTimeout(()=>{const _0x507fc7=_0x3a04d6;canvas[_0x507fc7(0x120)]['remove'](_0x507fc7(0x114));},0x258),controlSetting[_0x3a04d6(0x120)][_0x3a04d6(0x109)]('visible')&&resumeGame());}async function statusShow(){const _0x3775e0=a0_0x3f761c;document[_0x3775e0(0x12d)](_0x3775e0(0x153),handleVisibilityChange),document[_0x3775e0(0x12d)]('visibilitychange',handleVisibilityChange),window[_0x3775e0(0x12d)](_0x3775e0(0x13a),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x23f9c5[_0x3775e0(0x139)](turboState)),await delay(0xc8),await Module[_0x3775e0(0x122)](),await delay(0x320),await led(parseInt(localStorage['getItem'](_0x3775e0(0x133)))),await Main.notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x51613c=a0_0x3f761c;await ledSave(_0x51613c(0x10d)),await Module[_0x51613c(0x11f)](0x0),await Module[_0x51613c(0x143)](),await screenShot(0x0),console['log']('Auto\x20save\x20'+ ++countAutoSave+_0x51613c(0x10c));}async function saveStateInCloud(){const _0x5c2339=a0_0x3f761c,_0x4cf9b2=localStorage[_0x5c2339(0x112)](_0x5c2339(0x127)),_0x4edeaf=_0x4cf9b2[_0x5c2339(0x12a)](/\.(zip|gb|gbc|gba)$/,_0x5c2339(0x13d)),_0x1241be=localStorage['getItem']('uId');navigator[_0x5c2339(0xfb)]&&(_0x1241be&&(await ledSave(_0x5c2339(0xff)),await delay(0x3e8),await dpUploadFile(_0x4edeaf,Module['downloadFile'](_0x5c2339(0x144)+_0x4edeaf),_0x5c2339(0x14e)),await lockNoti('',_0x5c2339(0x13b)+ ++countUpload+_0x5c2339(0x10c),0x7d0)));}function startTimer(){let [_0x205e5b,_0x2f5110,_0x11eb2e,_0x1e41a5,_0x13a5ae]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x10327c=a0_0x2bc6;_0x11eb2e++,_0x1e41a5++,_0x13a5ae++;if(_0x11eb2e===0x3c)[_0x11eb2e,_0x2f5110]=[0x0,_0x2f5110+0x1];if(_0x2f5110===0x3c)[_0x2f5110,_0x205e5b]=[0x0,_0x205e5b+0x1];document['getElementById'](_0x10327c(0x121))['textContent']=_0x205e5b+'h'+_0x2f5110['toString']()[_0x10327c(0x103)](0x2,'0')+'.'+_0x11eb2e[_0x10327c(0x147)]()['padStart'](0x2,'0');_0x1e41a5===0x3c&&(saveStatePeriodically(),_0x1e41a5=0x0);;_0x13a5ae===0x708&&(saveStateInCloud(),_0x13a5ae=0x0);;},0x3e8);}export async function uploadGame(_0x310fe9){const _0x1fdc3b=a0_0x3f761c,_0x4cc3d2=_0x310fe9[_0x1fdc3b(0x146)][0x0];Module['uploadRom'](_0x4cc3d2,()=>{const _0x1be8e5=_0x1fdc3b;Module[_0x1be8e5(0x143)]();});}export async function loadGame(_0x41407){const _0x1188a8=a0_0x3f761c,_0x4bc410=_0x41407[_0x1188a8(0x12a)](/\.(gba|gbc|gb|zip)$/,_0x1188a8(0x13d)),_0x257a39=Module[_0x1188a8(0x14a)]()['filter'](_0x499303=>_0x499303!=='.'&&_0x499303!=='..');intro[_0x1188a8(0x120)][_0x1188a8(0x142)](_0x1188a8(0x134)),errorLogElements[0x0][_0x1188a8(0x11a)][_0x1188a8(0x12e)]='0',ingame[_0x1188a8(0x120)][_0x1188a8(0x102)](_0x1188a8(0x134)),_0x41407[_0x1188a8(0x100)]('.gbc')||_0x41407[_0x1188a8(0x100)](_0x1188a8(0x11b))?(canvas['classList'][_0x1188a8(0x142)](_0x1188a8(0x152)),areaTrans['classList']['add'](_0x1188a8(0x13c)),localStorage[_0x1188a8(0x13f)](_0x1188a8(0x136),_0x1188a8(0xfe)+(window['innerWidth']-0xe6)+','+(window[_0x1188a8(0x101)]-0xe6)*0x9/0xa)):localStorage[_0x1188a8(0x13f)](_0x1188a8(0x136),'0,0,'+(window[_0x1188a8(0x101)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x257a39['includes'](_0x4bc410)?(await Module[_0x1188a8(0x125)](_0x1188a8(0x113)+_0x41407),confirm(_0x1188a8(0x119))&&(await Module[_0x1188a8(0x10a)](0x0),localStorage[_0x1188a8(0x13f)](_0x1188a8(0x127),_0x41407),await shaderData(),console[_0x1188a8(0x128)](_0x41407))):(await Module[_0x1188a8(0x125)](_0x1188a8(0x113)+_0x41407),localStorage[_0x1188a8(0x13f)](_0x1188a8(0x127),_0x41407),await shaderData(),console['log'](_0x41407)),await statusShow();}export async function saveState(_0x201b7f){const _0x5b2176=a0_0x3f761c;await Module[_0x5b2176(0x11f)](_0x201b7f),await Module[_0x5b2176(0x143)]();}export async function loadState(_0x31c622){const _0x506f68=a0_0x3f761c;await Module[_0x506f68(0x10a)](_0x31c622);}export async function downloadFile(_0x1896b4,_0x46fcea){const _0x265c19=a0_0x3f761c,_0x2577c2=Module['downloadFile'](_0x1896b4),_0x3c8a22=document[_0x265c19(0x129)]('a');document[_0x265c19(0x131)][_0x265c19(0x105)](_0x3c8a22),_0x3c8a22[_0x265c19(0x151)]=_0x46fcea;const _0x588d08=new Blob([_0x2577c2],{'type':_0x265c19(0x10f)});_0x3c8a22[_0x265c19(0x145)]=URL[_0x265c19(0xfd)](_0x588d08),_0x3c8a22[_0x265c19(0x12b)](),URL[_0x265c19(0x130)](_0x588d08),_0x3c8a22[_0x265c19(0x102)]();}export function downloadFileInCloud(_0x28ec11){const _0x5bad0b=a0_0x3f761c,_0x21767b=Module[_0x5bad0b(0x12c)](_0x28ec11);return _0x21767b;}export async function uploadFileInCloud(_0x172414){Module['uploadAll'](_0x172414,()=>{const _0x8cf3a3=a0_0x2bc6;localStorageFile(),Module[_0x8cf3a3(0x143)]();});}export async function uploadFile(_0x5d9f40){const _0x445f0d=a0_0x3f761c,_0x15743f=_0x5d9f40[_0x445f0d(0x146)][0x0];Module['uploadAll'](_0x15743f,()=>{const _0x565923=_0x445f0d;localStorageFile(),Module[_0x565923(0x143)]();});}export async function editFile(_0x5ee836,_0x3d3744,_0x2ca7c8){const _0xb3d7f9=a0_0x3f761c;await Module['editFileName'](_0x5ee836,_0x3d3744,_0x2ca7c8),await Module[_0xb3d7f9(0x143)]();}export async function deleteFile(_0x4686d1){const _0x32b274=a0_0x3f761c;await Module[_0x32b274(0x107)](_0x4686d1),await Module[_0x32b274(0x143)]();}export function listGame(){const _0x1d5c0d=a0_0x3f761c,_0x41527b=Module['listRoms']()[_0x1d5c0d(0x137)](_0x4e65bf=>_0x4e65bf!=='.'&&_0x4e65bf!=='..');return _0x41527b;}export function listSave(){const _0x4b00c2=a0_0x3f761c,_0x280550=Module[_0x4b00c2(0x11c)]()[_0x4b00c2(0x137)](_0x515f37=>_0x515f37!=='.'&&_0x515f37!=='..');return _0x280550;}export function listState(){const _0x1b5626=a0_0x3f761c,_0x137efb=Module[_0x1b5626(0x14a)]()['filter'](_0x292b4c=>_0x292b4c!=='.'&&_0x292b4c!=='..');return _0x137efb;}export function listCheat(){const _0x492104=a0_0x3f761c,_0x238ec5=Module[_0x492104(0x138)]()[_0x492104(0x137)](_0x10b192=>_0x10b192!=='.'&&_0x10b192!=='..');return _0x238ec5;}export function listScreenshot(){const _0x3e0269=a0_0x3f761c,_0x3b7949=Module[_0x3e0269(0xf9)]()[_0x3e0269(0x137)](_0x4fc47a=>_0x4fc47a!=='.'&&_0x4fc47a!=='..');return _0x3b7949;}export function embedTextInPngFile(_0x5131e8,_0x1a6bf5,_0x223b46){const _0x120dcd=a0_0x3f761c;let _0x4d9da6=atob(_0x5131e8['split'](',')[0x1]),_0x4c652d=new Uint8Array(_0x4d9da6[_0x120dcd(0x10e)]);for(let _0xab3831=0x0;_0xab3831<_0x4d9da6[_0x120dcd(0x10e)];_0xab3831++){_0x4c652d[_0xab3831]=_0x4d9da6[_0x120dcd(0x115)](_0xab3831);}let _0x4c5464=new TextEncoder()[_0x120dcd(0x118)](_0x120dcd(0x14b)+_0x1a6bf5),_0x59cc62=new Uint8Array(_0x4c652d[_0x120dcd(0x10e)]+_0x4c5464['length']);_0x59cc62[_0x120dcd(0x124)](_0x4c652d,0x0),_0x59cc62[_0x120dcd(0x124)](_0x4c5464,_0x4c652d[_0x120dcd(0x10e)]);let _0x3c6308=new Blob([_0x59cc62],{'type':_0x120dcd(0x148)}),_0x44f0a3=new File([_0x3c6308],_0x223b46,{'type':_0x120dcd(0x148)});return _0x44f0a3;}export function extractTextFromPngBase64(_0x3f3b2b){const _0x512a79=a0_0x3f761c;let _0x172032=atob(_0x3f3b2b['split'](',')[0x1]),_0x18331d=_0x512a79(0x14b),_0x40ccc3=_0x172032['indexOf'](_0x18331d);if(_0x40ccc3!==-0x1)return _0x172032[_0x512a79(0x13e)](_0x40ccc3+_0x18331d[_0x512a79(0x10e)]);return null;}export function fileSize(_0x5c507a){const _0x31c545=Module['fileSize'](_0x5c507a);return _0x31c545;}export async function resumeGame(){const _0x1e3ad2=a0_0x3f761c;Module[_0x1e3ad2(0x110)](),Module[_0x1e3ad2(0x122)](),Main.notiMessage(_0x1e3ad2(0x141),0x7d0);}export async function pauseGame(){const _0x2b1820=a0_0x3f761c;Module['pauseGame'](),Module[_0x2b1820(0x122)](),Main.notiMessage(_0x2b1820(0x116),0x7d0);}function a0_0x2bc6(_0x24b108,_0x409684){const _0x520a15=a0_0x520a();return a0_0x2bc6=function(_0x2bc630,_0x13c63a){_0x2bc630=_0x2bc630-0xf9;let _0x8eab9=_0x520a15[_0x2bc630];return _0x8eab9;},a0_0x2bc6(_0x24b108,_0x409684);}export async function buttonPress(_0x5e1714){Module['buttonPress'](_0x5e1714);}export async function buttonUnpress(_0x497c92){const _0xc2e240=a0_0x3f761c;Module[_0xc2e240(0x150)](_0x497c92);}export async function screenShot(_0x10deff){const _0x35ee12=a0_0x3f761c,_0x1b8666=localStorage['getItem'](_0x35ee12(0x127))[_0x35ee12(0x12a)](/\.(gba|gbc|gb|zip)$/,''),_0x52c5fe=_0x1b8666+'_'+_0x10deff+'.png';await Module[_0x35ee12(0x132)](_0x52c5fe),await Module[_0x35ee12(0x143)]();const _0x2f09f2=await fileToBase64(Module[_0x35ee12(0x12c)](_0x35ee12(0x14c)+_0x52c5fe)),_0x125e20=embedTextInPngFile(_0x2f09f2,formatDateTime(Date['now']()),_0x52c5fe);Module['uploadAll'](_0x125e20,()=>{localStorageFile(),Module['FSSync']();});}export async function dowloadScreenShot(_0x268b94){const _0x1f4ec0=a0_0x3f761c;try{const _0x498933=await fileToBase64(Module[_0x1f4ec0(0x12c)](_0x268b94));return _0x498933;}catch{}}export async function captureOCR(_0x279209){const _0x1d3444=a0_0x3f761c;Module[_0x1d3444(0x132)](_0x279209);const _0x35e998=Module[_0x1d3444(0x12c)](_0x1d3444(0x14c)+_0x279209);return _0x35e998;}export async function setFastForwardMultiplier(_0x256768){Module['setFastForwardMultiplier'](_0x256768);}export function uploadCheats(_0x395438,_0x218a31,_0x4c23d0,_0x1c856f,_0x18eb4b){const _0x3c1a4d=a0_0x3f761c;Module[_0x3c1a4d(0x135)](_0x395438,()=>{const _0x10fbd7=_0x3c1a4d;Module[_0x10fbd7(0x155)](),setTimeout(()=>{const _0x10bba5=_0x10fbd7;Module[_0x10bba5(0x143)]();},0x1f4),_0x1c856f&&(localStorage[_0x10fbd7(0x13f)](_0x218a31+_0x10fbd7(0x108),_0x4c23d0),Main.notiMessage(_0x10fbd7(0x140),0x5dc)),_0x18eb4b['textContent']=localStorage['getItem'](_0x218a31+_0x10fbd7(0x108)||_0x10fbd7(0x14f));});}export function setVolume(_0x44f2c1){Module['setVolume'](_0x44f2c1);}