const a0_0x168fe3=a0_0x174c;(function(_0x30f89f,_0x3855a7){const _0x244048=a0_0x174c,_0x787631=_0x30f89f();while(!![]){try{const _0x47fdc0=parseInt(_0x244048(0x162))/0x1+-parseInt(_0x244048(0x10d))/0x2+parseInt(_0x244048(0x152))/0x3+-parseInt(_0x244048(0x140))/0x4*(parseInt(_0x244048(0x151))/0x5)+-parseInt(_0x244048(0x12f))/0x6+parseInt(_0x244048(0x14b))/0x7*(parseInt(_0x244048(0x136))/0x8)+-parseInt(_0x244048(0x111))/0x9;if(_0x47fdc0===_0x3855a7)break;else _0x787631['push'](_0x787631['shift']());}catch(_0x2638af){_0x787631['push'](_0x787631['shift']());}}}(a0_0x1f15,0x219b7));import a0_0x506701 from'../core/mgba.js';import*as a0_0x5a62e1 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';function a0_0x1f15(){const _0x3eb133=['saveState','getItem','loadGame','body','Do\x20you\x20want\x20to\x20load\x20save\x20state?','persisted','Online!','type','onLine','228606eNoVOm','FSSync','_dateState','filter','endsWith','_dateState0','Cheat\x20Enabled!','#E0C068','add','_imageState','appendChild','.gbc','includes','245986uGASBZ','SDL2','_imageState0','Off','1749843Mmojqo','replace','uploadRom','.gba','setItem','.png','text/plain','remove','/data/games/','innerWidth','.ss0','classList','gameName','contains','toString','0,0,','Auto\x20save\x20','screenshot','control-setting','Cheat\x20uploaded\x20successfully:','download','_savedCheats','click','now','#20A5A6','listStates','disable','buttonPress','loadState','beforeunload','564726dfPglC','downloadFile','application/octet-stream','pagehide','setFastForwardMultiplier','then','hidden','1811696GxcQwt','No\x20screenshot!','\x20time(s)','Resumed!','href','name','canvas','uploadSaveOrSaveState','visible','Paused!','12KOBeQY','uploadCheats','Error\x20uploadSavSta:','getElementById','files','addEventListener','Save/State\x20uploaded\x20successfully:','resumeGame','bottom','listSaves','error','7VCHGft','autoLoadCheats','visibilitychange','textContent','screenSize','/data/states/','43955QjosUw','361503zRTCMP','/data/screenshots/','uId','slotStateSaved','.gb','log','FSInit'];a0_0x1f15=function(){return _0x3eb133;};return a0_0x1f15();}const Module={'canvas':document[a0_0x168fe3(0x143)](a0_0x168fe3(0x13c))};function initializeCore(_0x1eda63,_0x553fb4){const _0x907090=a0_0x168fe3;_0x1eda63(_0x553fb4)[_0x907090(0x134)](function(_0x4ee4e3){const _0xe93680=_0x907090;_0x4ee4e3[_0xe93680(0x158)]();});}initializeCore(a0_0x506701,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x168fe3(0x143)](a0_0x168fe3(0x13c)),savedTurboState=localStorage[a0_0x168fe3(0x15a)]('turboState'),controlSetting=document['getElementById'](a0_0x168fe3(0x123));function handleVisibilityChange(_0x4cd773){const _0x585e5f=a0_0x168fe3;document['visibilityState']===_0x585e5f(0x135)||_0x4cd773?.[_0x585e5f(0x160)]===_0x585e5f(0x12e)||_0x4cd773?.[_0x585e5f(0x15e)]?(pauseGame(),canvas[_0x585e5f(0x11c)]['add'](_0x585e5f(0x13e))):(setTimeout(()=>{const _0x3aa112=_0x585e5f;canvas[_0x3aa112(0x11c)][_0x3aa112(0x118)](_0x3aa112(0x13e));},0x258),controlSetting['classList'][_0x585e5f(0x11e)](_0x585e5f(0x13e))&&resumeGame());}async function statusShow(){const _0x4a08f0=a0_0x168fe3;document[_0x4a08f0(0x145)](_0x4a08f0(0x132),handleVisibilityChange),document[_0x4a08f0(0x145)](_0x4a08f0(0x14d),handleVisibilityChange),window[_0x4a08f0(0x145)](_0x4a08f0(0x12e),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x5a62e1['turboF'](turboState)),await delay(0x3e8),await Module[_0x4a08f0(0x10e)](),await led(parseInt(localStorage['getItem'](_0x4a08f0(0x155)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x4cd5a3=a0_0x168fe3;await ledSave(_0x4cd5a3(0x129)),await Module[_0x4cd5a3(0x159)](0x0),await Module[_0x4cd5a3(0x163)](),await screenShot(0x0),console[_0x4cd5a3(0x157)](_0x4cd5a3(0x121)+ ++countAutoSave+_0x4cd5a3(0x138));}async function saveStateInCloud(){const _0x154013=a0_0x168fe3,_0x295659=localStorage[_0x154013(0x15a)]('gameName'),_0x167a87=_0x295659[_0x154013(0x112)](_0x154013(0x114),_0x154013(0x11b)),_0x46550c=localStorage['getItem'](_0x154013(0x154)),_0x2a2fb9=localStorage[_0x154013(0x15a)](_0x295659+_0x154013(0x10f)),_0x224b8f=localStorage['getItem'](_0x295659+_0x154013(0x167));if(navigator[_0x154013(0x161)]){if(_0x46550c){await ledSave(_0x154013(0x169)),await delay(0x3e8),await dpUploadFile(_0x167a87,Module[_0x154013(0x130)](_0x154013(0x150)+_0x167a87));if(_0x2a2fb9!==null){const _0x23359c=_0x2a2fb9+'\x0a\x0a'+_0x224b8f,_0xdc1c19=new Blob([_0x23359c],{'type':_0x154013(0x117)});await dpUploadFile(_0x295659+'_slot0.txt',_0xdc1c19);}else console[_0x154013(0x157)](_0x154013(0x137));await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x154013(0x138),0x7d0);}else console['log']('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0x154013(0x157)](_0x154013(0x15f));}function startTimer(){let [_0x337ada,_0x222ed3,_0x1969f5,_0x1d93d5,_0x123d34]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x3fbaf5=a0_0x174c;_0x1969f5++,_0x1d93d5++,_0x123d34++;if(_0x1969f5===0x3c)[_0x1969f5,_0x222ed3]=[0x0,_0x222ed3+0x1];if(_0x222ed3===0x3c)[_0x222ed3,_0x337ada]=[0x0,_0x337ada+0x1];document[_0x3fbaf5(0x143)]('timer')[_0x3fbaf5(0x14e)]=_0x337ada+'h'+_0x222ed3[_0x3fbaf5(0x11f)]()['padStart'](0x2,'0')+'.'+_0x1969f5[_0x3fbaf5(0x11f)]()['padStart'](0x2,'0');_0x1d93d5===0x3c&&(saveStatePeriodically(),_0x1d93d5=0x0);;_0x1d93d5===0xe10&&(saveStateInCloud(),_0x123d34=0x0);;},0x3e8);}export async function uploadGame(_0x4ea9fd){const _0x14fea5=a0_0x168fe3,_0x40cd68=_0x4ea9fd[_0x14fea5(0x144)][0x0];Module[_0x14fea5(0x113)](_0x40cd68,()=>{const _0x203e65=_0x14fea5;Module[_0x203e65(0x163)]();});}export async function loadGame(_0x38516c){const _0x3e7394=a0_0x168fe3,_0x11ed1b=_0x38516c[_0x3e7394(0x112)](/\.(gba|gbc|gb|zip)$/,_0x3e7394(0x11b)),_0x45bce9=Module[_0x3e7394(0x12a)]()[_0x3e7394(0x165)](_0x47b9d6=>_0x47b9d6!=='.'&&_0x47b9d6!=='..');intro[_0x3e7394(0x11c)]['add'](_0x3e7394(0x12b)),errorLogElements[0x0]['style'][_0x3e7394(0x148)]='0',ingame['classList'][_0x3e7394(0x118)](_0x3e7394(0x12b)),_0x38516c[_0x3e7394(0x166)](_0x3e7394(0x10b))||_0x38516c[_0x3e7394(0x166)](_0x3e7394(0x156))?(canvas[_0x3e7394(0x11c)][_0x3e7394(0x16a)]('gbc'),areaTrans[_0x3e7394(0x11c)][_0x3e7394(0x16a)]('gbc1'),localStorage[_0x3e7394(0x115)](_0x3e7394(0x14f),'0,0,'+(window[_0x3e7394(0x11a)]-0xe6)+','+(window[_0x3e7394(0x11a)]-0xe6)*0x9/0xa)):localStorage[_0x3e7394(0x115)](_0x3e7394(0x14f),_0x3e7394(0x120)+(window['innerWidth']-0x96)+','+(window[_0x3e7394(0x11a)]-0x96)*0x2/0x3),_0x45bce9[_0x3e7394(0x10c)](_0x11ed1b)?(await Module[_0x3e7394(0x15b)](_0x3e7394(0x119)+_0x38516c),confirm(_0x3e7394(0x15d))&&(await Module[_0x3e7394(0x12d)](0x0),localStorage['setItem'](_0x3e7394(0x11d),_0x38516c),console[_0x3e7394(0x157)](_0x38516c))):(await Module[_0x3e7394(0x15b)](_0x3e7394(0x119)+_0x38516c),localStorage['setItem'](_0x3e7394(0x11d),_0x38516c)),await statusShow();}export async function saveState(_0x26daa0){const _0x20659e=a0_0x168fe3;await Module[_0x20659e(0x159)](_0x26daa0),await Module[_0x20659e(0x163)]();}export async function loadState(_0x265f6d){const _0x150d76=a0_0x168fe3;await Module[_0x150d76(0x12d)](_0x265f6d);}function a0_0x174c(_0x4aca9d,_0xeb7cd0){const _0x1f15b5=a0_0x1f15();return a0_0x174c=function(_0x174c79,_0x9ce7b){_0x174c79=_0x174c79-0x10a;let _0x3eeca0=_0x1f15b5[_0x174c79];return _0x3eeca0;},a0_0x174c(_0x4aca9d,_0xeb7cd0);}export async function downloadFile(_0x5f5a17,_0xd5fde5){const _0x8cc13=a0_0x168fe3,_0x39e6b9=Module[_0x8cc13(0x130)](_0x5f5a17),_0x2113b1=document['createElement']('a');document[_0x8cc13(0x15c)][_0x8cc13(0x10a)](_0x2113b1),_0x2113b1[_0x8cc13(0x125)]=_0xd5fde5;const _0x5cd647=new Blob([_0x39e6b9],{'type':_0x8cc13(0x131)});_0x2113b1[_0x8cc13(0x13a)]=URL['createObjectURL'](_0x5cd647),_0x2113b1[_0x8cc13(0x127)](),URL['revokeObjectURL'](_0x5cd647),_0x2113b1['remove']();}export function downloadFileInCloud(_0x13f6fc){const _0x20bf41=a0_0x168fe3,_0x133bd7=Module[_0x20bf41(0x130)](_0x13f6fc);return _0x133bd7;}export async function uploadFile(_0x323211){const _0x4ce82e=a0_0x168fe3,_0x3fe2ec=_0x323211[_0x4ce82e(0x144)][0x0];Module[_0x4ce82e(0x13d)](_0x3fe2ec,()=>{const _0x145949=_0x4ce82e;Module[_0x145949(0x163)]();});}export async function editFile(_0x1d27fa,_0x96e9a3,_0x3c142f){const _0x50b606=a0_0x168fe3;await Module['editFileName'](_0x1d27fa,_0x96e9a3,_0x3c142f),await Module[_0x50b606(0x163)]();}export async function deleteFile(_0x44e171){const _0x311669=a0_0x168fe3;await Module['deleteFile'](_0x44e171),await Module[_0x311669(0x163)]();}export function listGame(){const _0x2f43dc=a0_0x168fe3,_0x50c8c1=Module['listRoms']()[_0x2f43dc(0x165)](_0x3245ec=>_0x3245ec!=='.'&&_0x3245ec!=='..');return _0x50c8c1;}export function listSave(){const _0x2eff4a=a0_0x168fe3,_0x470eec=Module[_0x2eff4a(0x149)]()[_0x2eff4a(0x165)](_0x4d23d4=>_0x4d23d4!=='.'&&_0x4d23d4!=='..');return _0x470eec;}export function listState(){const _0x1bb49f=a0_0x168fe3,_0x3f126b=Module[_0x1bb49f(0x12a)]()[_0x1bb49f(0x165)](_0x532b26=>_0x532b26!=='.'&&_0x532b26!=='..');return _0x3f126b;}export function listCheat(){const _0x5a87d2=a0_0x168fe3,_0x225027=Module['listCheats']()[_0x5a87d2(0x165)](_0x55bfa1=>_0x55bfa1!=='.'&&_0x55bfa1!=='..');return _0x225027;}export function listScreenshot(){const _0x6ed17f=Module['listScreenshots']()['filter'](_0x23c6f0=>_0x23c6f0!=='.'&&_0x23c6f0!=='..');return _0x6ed17f;}export function fileSize(_0x386bf8){const _0x479ee5=Module['fileSize'](_0x386bf8);return _0x479ee5;}export async function uploadCheat(_0x3444a1){const _0x50ac4b=a0_0x168fe3;try{const _0x5c9e2c=_0x3444a1[_0x50ac4b(0x144)][0x0];await Module[_0x50ac4b(0x141)](_0x5c9e2c,()=>{const _0x1d29e5=_0x50ac4b;console[_0x1d29e5(0x157)](_0x1d29e5(0x124),_0x5c9e2c[_0x1d29e5(0x13b)]),localStorageFile(),Module[_0x1d29e5(0x163)]();});}catch(_0x2d7c23){console[_0x50ac4b(0x14a)]('Error\x20uploadCheat:',_0x2d7c23);}}export async function uploadSavSta(_0xf36bba){const _0xba3acc=a0_0x168fe3;try{const _0x45952d=_0xf36bba[_0xba3acc(0x144)][0x0];await Module[_0xba3acc(0x13d)](_0x45952d,()=>{const _0x24223f=_0xba3acc;console[_0x24223f(0x157)](_0x24223f(0x146),_0x45952d[_0x24223f(0x13b)]),localStorageFile(),Module[_0x24223f(0x163)]();});}catch(_0x3e7fe3){console[_0xba3acc(0x14a)](_0xba3acc(0x142),_0x3e7fe3);}}export async function uploadSaveOrSaveState(_0x172cc8){const _0x4b943e=a0_0x168fe3;Module[_0x4b943e(0x13d)](_0x172cc8,()=>{const _0xb05b0c=_0x4b943e;localStorageFile(),Module[_0xb05b0c(0x163)]();});}export async function resumeGame(){const _0x4d735b=a0_0x168fe3;Module[_0x4d735b(0x147)](),Module[_0x4d735b(0x10e)](),notiMessage(_0x4d735b(0x139),0x7d0);}export async function pauseGame(){const _0x47eb2f=a0_0x168fe3;Module['pauseGame'](),Module[_0x47eb2f(0x10e)](),notiMessage(_0x47eb2f(0x13f),0x7d0);}export async function buttonPress(_0x88c156){const _0x3db41e=a0_0x168fe3;Module[_0x3db41e(0x12c)](_0x88c156);}export async function buttonUnpress(_0x303c07){Module['buttonUnpress'](_0x303c07);}export async function screenShot(_0x16247b){const _0x5ea4a9=a0_0x168fe3,_0x3cdef3=localStorage[_0x5ea4a9(0x15a)](_0x5ea4a9(0x11d)),_0x182e57=_0x3cdef3[_0x5ea4a9(0x112)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x5ea4a9(0x122)](''+_0x182e57+_0x16247b+_0x5ea4a9(0x116)),await Module[_0x5ea4a9(0x163)]();const _0x1997c7=await fileToBase64(Module[_0x5ea4a9(0x130)]('/data/screenshots/'+_0x182e57+_0x16247b+_0x5ea4a9(0x116))),_0x220be8=Date[_0x5ea4a9(0x128)](),_0x393ce7=formatDateTime(_0x220be8);localStorage[_0x5ea4a9(0x115)](_0x3cdef3+_0x5ea4a9(0x164)+_0x16247b,_0x393ce7),localStorage[_0x5ea4a9(0x115)](_0x3cdef3+_0x5ea4a9(0x16b)+_0x16247b,_0x1997c7);}export async function captureOCR(_0xb762c6){const _0x381844=a0_0x168fe3;Module[_0x381844(0x122)](_0xb762c6);const _0x6e5eb6=Module[_0x381844(0x130)](_0x381844(0x153)+_0xb762c6);return _0x6e5eb6;}export async function setFastForwardMultiplier(_0x5889df){const _0x449779=a0_0x168fe3;Module[_0x449779(0x133)](_0x5889df);}export function uploadCheats(_0x3233c3,_0x19655d,_0x1a7f24,_0x3b0ca0,_0x43cd39){const _0x58b130=a0_0x168fe3;Module[_0x58b130(0x141)](_0x3233c3,()=>{const _0x417be8=_0x58b130;Module[_0x417be8(0x14c)](),setTimeout(()=>{Module['FSSync']();},0x1f4),_0x3b0ca0&&(localStorage['setItem'](_0x19655d+'_savedCheats',_0x1a7f24),notiMessage(_0x417be8(0x168),0x5dc)),_0x43cd39['textContent']=localStorage[_0x417be8(0x15a)](_0x19655d+_0x417be8(0x126)||_0x417be8(0x110));});}