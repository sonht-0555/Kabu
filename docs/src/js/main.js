const a0_0x4c2877=a0_0x5d3f;(function(_0x189144,_0x4c65a2){const _0x2d517b=a0_0x5d3f,_0x436a3a=_0x189144();while(!![]){try{const _0x2d26f1=parseInt(_0x2d517b(0x1f2))/0x1*(-parseInt(_0x2d517b(0x1ae))/0x2)+-parseInt(_0x2d517b(0x1d9))/0x3*(parseInt(_0x2d517b(0x19a))/0x4)+parseInt(_0x2d517b(0x1a6))/0x5+parseInt(_0x2d517b(0x1a5))/0x6+-parseInt(_0x2d517b(0x1e6))/0x7*(-parseInt(_0x2d517b(0x1c2))/0x8)+parseInt(_0x2d517b(0x198))/0x9+-parseInt(_0x2d517b(0x197))/0xa;if(_0x2d26f1===_0x4c65a2)break;else _0x436a3a['push'](_0x436a3a['shift']());}catch(_0x10eb0c){_0x436a3a['push'](_0x436a3a['shift']());}}}(a0_0x6df2,0xac692));function a0_0x5d3f(_0x3cbb6b,_0x595600){const _0x6df23d=a0_0x6df2();return a0_0x5d3f=function(_0x5d3f8c,_0x589792){_0x5d3f8c=_0x5d3f8c-0x18f;let _0x16aade=_0x6df23d[_0x5d3f8c];return _0x16aade;},a0_0x5d3f(_0x3cbb6b,_0x595600);}import a0_0x409233 from'../core/mgba.js';import*as a0_0x4d48b1 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document['getElementById']('canvas')};function initializeCore(_0x430787,_0x455884){const _0x248915=a0_0x5d3f;_0x430787(_0x455884)[_0x248915(0x1b0)](function(_0x11fba6){const _0x5a04f3=_0x248915;_0x11fba6[_0x5a04f3(0x1c4)]();});}initializeCore(a0_0x409233,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x4c2877(0x1b9)),savedTurboState=localStorage[a0_0x4c2877(0x1e3)](a0_0x4c2877(0x19d)),controlSetting=document[a0_0x4c2877(0x1ad)](a0_0x4c2877(0x1f8));function handleVisibilityChange(_0x430c7c){const _0x394d19=a0_0x4c2877;document[_0x394d19(0x1f7)]===_0x394d19(0x1aa)||_0x430c7c?.[_0x394d19(0x1e0)]==='beforeunload'||_0x430c7c?.[_0x394d19(0x19f)]?(pauseGame(),canvas[_0x394d19(0x1bc)][_0x394d19(0x1cd)](_0x394d19(0x1e2))):(setTimeout(()=>{const _0x175171=_0x394d19;canvas[_0x175171(0x1bc)]['remove']('visible');},0x258),controlSetting[_0x394d19(0x1bc)]['contains'](_0x394d19(0x1e2))&&resumeGame());}async function statusShow(){const _0x174edf=a0_0x4c2877;document[_0x174edf(0x1d0)]('pagehide',handleVisibilityChange),document['addEventListener']('visibilitychange',handleVisibilityChange),window[_0x174edf(0x1d0)](_0x174edf(0x1b1),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x4d48b1[_0x174edf(0x1ea)](turboState)),await delay(0xc8),await Module[_0x174edf(0x1ba)](),await delay(0x320),await led(parseInt(localStorage['getItem'](_0x174edf(0x1a8)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x35dbe8=a0_0x4c2877;await ledSave(_0x35dbe8(0x195)),await Module['saveState'](0x0),await Module[_0x35dbe8(0x190)](),await screenShot(0x0),console['log'](_0x35dbe8(0x1f4)+ ++countAutoSave+_0x35dbe8(0x1f0));}async function saveStateInCloud(){const _0x284723=a0_0x4c2877,_0x8a18f5=localStorage[_0x284723(0x1e3)](_0x284723(0x1d8)),_0x1728ea=_0x8a18f5[_0x284723(0x1b6)](/\.(zip|gb|gbc|gba)$/,_0x284723(0x1b2)),_0x2e9dfe=localStorage['getItem'](_0x284723(0x19b)),_0x321ca7=localStorage[_0x284723(0x1e3)](_0x8a18f5+'_imageState0'),_0x5453bc=localStorage[_0x284723(0x1e3)](_0x8a18f5+_0x284723(0x1bb));if(navigator[_0x284723(0x1f5)]){if(_0x2e9dfe){await ledSave(_0x284723(0x1af)),await delay(0x3e8),await dpUploadFile(_0x1728ea,Module[_0x284723(0x1ce)]('/data/states/'+_0x1728ea));if(_0x321ca7!==null){const _0x36fc03=_0x321ca7+'\x0a\x0a'+_0x5453bc,_0x3513dd=new Blob([_0x36fc03],{'type':_0x284723(0x1d5)});await dpUploadFile(_0x8a18f5+_0x284723(0x1e7),_0x3513dd);}else console['log'](_0x284723(0x1ab));await lockNoti('',_0x284723(0x1a4)+ ++countUpload+_0x284723(0x1f0),0x7d0);}else console[_0x284723(0x1b7)]('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0x284723(0x1b7)](_0x284723(0x1bf));}function startTimer(){let [_0x306354,_0x3f5c17,_0x4a8e34,_0x54ff87,_0x206bd]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x3fc90e=a0_0x5d3f;_0x4a8e34++,_0x54ff87++,_0x206bd++;if(_0x4a8e34===0x3c)[_0x4a8e34,_0x3f5c17]=[0x0,_0x3f5c17+0x1];if(_0x3f5c17===0x3c)[_0x3f5c17,_0x306354]=[0x0,_0x306354+0x1];document['getElementById']('timer')[_0x3fc90e(0x1dd)]=_0x306354+'h'+_0x3f5c17[_0x3fc90e(0x1d3)]()[_0x3fc90e(0x1c1)](0x2,'0')+'.'+_0x4a8e34[_0x3fc90e(0x1d3)]()['padStart'](0x2,'0');_0x54ff87===0x3c&&(saveStatePeriodically(),_0x54ff87=0x0);;_0x206bd===0xe10&&(saveStateInCloud(),_0x206bd=0x0);;},0x3e8);}export async function uploadGame(_0x47aa50){const _0x2687ca=a0_0x4c2877,_0x591698=_0x47aa50[_0x2687ca(0x1a9)][0x0];Module[_0x2687ca(0x18f)](_0x591698,()=>{Module['FSSync']();});}export async function loadGame(_0x493d75){const _0xbc5367=a0_0x4c2877,_0x4d008b=_0x493d75['replace'](/\.(gba|gbc|gb|zip)$/,_0xbc5367(0x1b2)),_0x34d410=Module[_0xbc5367(0x1da)]()[_0xbc5367(0x1de)](_0x59c370=>_0x59c370!=='.'&&_0x59c370!=='..');intro[_0xbc5367(0x1bc)][_0xbc5367(0x1cd)](_0xbc5367(0x1cc)),errorLogElements[0x0][_0xbc5367(0x1ca)][_0xbc5367(0x1d6)]='0',ingame[_0xbc5367(0x1bc)]['remove'](_0xbc5367(0x1cc)),_0x493d75[_0xbc5367(0x1b4)]('.gbc')||_0x493d75[_0xbc5367(0x1b4)](_0xbc5367(0x1ee))?(canvas['classList'][_0xbc5367(0x1cd)](_0xbc5367(0x194)),areaTrans[_0xbc5367(0x1bc)][_0xbc5367(0x1cd)](_0xbc5367(0x1dc)),localStorage[_0xbc5367(0x199)]('screenSize',_0xbc5367(0x191)+(window[_0xbc5367(0x1cf)]-0xe6)+','+(window[_0xbc5367(0x1cf)]-0xe6)*0x9/0xa)):localStorage[_0xbc5367(0x199)](_0xbc5367(0x1a7),_0xbc5367(0x191)+(window[_0xbc5367(0x1cf)]-0x96)+','+(window[_0xbc5367(0x1cf)]-0x96)*0x2/0x3),_0x34d410[_0xbc5367(0x1f6)](_0x4d008b)?(await Module[_0xbc5367(0x1ed)](_0xbc5367(0x1ec)+_0x493d75),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module['loadState'](0x0),localStorage['setItem'](_0xbc5367(0x1d8),_0x493d75),console[_0xbc5367(0x1b7)](_0x493d75))):(await Module[_0xbc5367(0x1ed)](_0xbc5367(0x1ec)+_0x493d75),localStorage['setItem'](_0xbc5367(0x1d8),_0x493d75),console[_0xbc5367(0x1b7)](_0x493d75)),await statusShow();}export async function saveState(_0x39596d){const _0x5d0d3f=a0_0x4c2877;await Module[_0x5d0d3f(0x1d1)](_0x39596d),await Module[_0x5d0d3f(0x190)]();}export async function loadState(_0x3e94a2){const _0x199b3b=a0_0x4c2877;await Module[_0x199b3b(0x1d4)](_0x3e94a2);}export async function downloadFile(_0x33314b,_0x491c2f){const _0x35ade8=a0_0x4c2877,_0x3e0d8e=Module[_0x35ade8(0x1ce)](_0x33314b),_0x5e2932=document['createElement']('a');document[_0x35ade8(0x1c3)][_0x35ade8(0x1a3)](_0x5e2932),_0x5e2932[_0x35ade8(0x1b3)]=_0x491c2f;const _0x16a304=new Blob([_0x3e0d8e],{'type':_0x35ade8(0x19c)});_0x5e2932[_0x35ade8(0x1c8)]=URL[_0x35ade8(0x1e9)](_0x16a304),_0x5e2932[_0x35ade8(0x1be)](),URL[_0x35ade8(0x1db)](_0x16a304),_0x5e2932['remove']();}export function downloadFileInCloud(_0x192551){const _0x1b04b1=a0_0x4c2877,_0x2f83d9=Module[_0x1b04b1(0x1ce)](_0x192551);return _0x2f83d9;}export async function uploadFile(_0x3a0eea){const _0x39eb7a=_0x3a0eea['files'][0x0];Module['uploadAll'](_0x39eb7a,()=>{localStorageFile(),Module['FSSync']();});}export async function editFile(_0x55cc31,_0x588378,_0x18e012){const _0x3ef3de=a0_0x4c2877;await Module[_0x3ef3de(0x1d2)](_0x55cc31,_0x588378,_0x18e012),await Module['FSSync']();}export async function deleteFile(_0x6dbe7b){await Module['deleteFile'](_0x6dbe7b),await Module['FSSync']();}export function listGame(){const _0x54a627=a0_0x4c2877,_0x22851b=Module[_0x54a627(0x1c0)]()['filter'](_0x5a1350=>_0x5a1350!=='.'&&_0x5a1350!=='..');return _0x22851b;}export function listSave(){const _0x5d5d82=a0_0x4c2877,_0x253a5c=Module[_0x5d5d82(0x1a2)]()[_0x5d5d82(0x1de)](_0x149a4f=>_0x149a4f!=='.'&&_0x149a4f!=='..');return _0x253a5c;}export function listState(){const _0x1acb99=a0_0x4c2877,_0xc9d934=Module['listStates']()[_0x1acb99(0x1de)](_0x5b784a=>_0x5b784a!=='.'&&_0x5b784a!=='..');return _0xc9d934;}export function listCheat(){const _0x31d5c3=a0_0x4c2877,_0x51aad9=Module['listCheats']()[_0x31d5c3(0x1de)](_0x460f6c=>_0x460f6c!=='.'&&_0x460f6c!=='..');return _0x51aad9;}export function listScreenshot(){const _0x5ef392=a0_0x4c2877,_0x37c8f9=Module[_0x5ef392(0x1df)]()[_0x5ef392(0x1de)](_0x23b21a=>_0x23b21a!=='.'&&_0x23b21a!=='..');return _0x37c8f9;}export function embedTextInPngFile(_0x183c3e,_0x11346f,_0x106103){const _0x46c7e3=a0_0x4c2877;let _0x18625b=atob(_0x183c3e[_0x46c7e3(0x1e4)](',')[0x1]),_0x1a49c0=new Uint8Array(_0x18625b[_0x46c7e3(0x1bd)]);for(let _0x48cdf0=0x0;_0x48cdf0<_0x18625b['length'];_0x48cdf0++){_0x1a49c0[_0x48cdf0]=_0x18625b[_0x46c7e3(0x19e)](_0x48cdf0);}let _0x5bfc82=new TextEncoder()[_0x46c7e3(0x1c6)](_0x46c7e3(0x1e8)+_0x11346f),_0x10d28c=new Uint8Array(_0x1a49c0['length']+_0x5bfc82[_0x46c7e3(0x1bd)]);_0x10d28c[_0x46c7e3(0x196)](_0x1a49c0,0x0),_0x10d28c[_0x46c7e3(0x196)](_0x5bfc82,_0x1a49c0['length']);let _0x21d923=new Blob([_0x10d28c],{'type':_0x46c7e3(0x1e5)}),_0x1189c7=new File([_0x21d923],_0x106103,{'type':_0x46c7e3(0x1e5)});return _0x1189c7;}export function extractTextFromPngBase64(_0x422f5d){const _0x3ba3e7=a0_0x4c2877;let _0x5018bd=atob(_0x422f5d[_0x3ba3e7(0x1e4)](',')[0x1]),_0x13ce69=_0x3ba3e7(0x1e8),_0x3d30fb=_0x5018bd[_0x3ba3e7(0x1c9)](_0x13ce69);if(_0x3d30fb!==-0x1)return _0x5018bd[_0x3ba3e7(0x1f1)](_0x3d30fb+_0x13ce69[_0x3ba3e7(0x1bd)]);return null;}export function fileSize(_0x42c751){const _0x400772=a0_0x4c2877,_0x360b96=Module[_0x400772(0x1a0)](_0x42c751);return _0x360b96;}export async function resumeGame(){const _0xbc7f1f=a0_0x4c2877;Module[_0xbc7f1f(0x1ef)](),Module['SDL2'](),notiMessage(_0xbc7f1f(0x193),0x7d0);}export async function pauseGame(){const _0x53e374=a0_0x4c2877;Module[_0x53e374(0x1ac)](),Module[_0x53e374(0x1ba)](),notiMessage(_0x53e374(0x1f9),0x7d0);}export async function buttonPress(_0x3a8d2e){const _0x42c730=a0_0x4c2877;Module[_0x42c730(0x1a1)](_0x3a8d2e);}export async function buttonUnpress(_0x1100ea){Module['buttonUnpress'](_0x1100ea);}export async function screenShot(_0x4d2ba8){const _0x5b6bc7=a0_0x4c2877,_0x53fbe5=localStorage['getItem'](_0x5b6bc7(0x1d8))['replace'](/\.(gba|gbc|gb|zip)$/,''),_0x35b910=_0x53fbe5+'_'+_0x4d2ba8+_0x5b6bc7(0x1f3);await Module[_0x5b6bc7(0x1c5)](_0x35b910),await Module['FSSync']();const _0x17eb36=await fileToBase64(Module['downloadFile'](_0x5b6bc7(0x1b8)+_0x35b910)),_0x120ab1=embedTextInPngFile(_0x17eb36,formatDateTime(Date[_0x5b6bc7(0x1c7)]()),_0x35b910);await uploadSaveOrSaveState(_0x120ab1);}export async function dowloadScreenShot(_0x18fd19){try{const _0x566f17=await fileToBase64(Module['downloadFile'](_0x18fd19));return _0x566f17;}catch{}}function a0_0x6df2(){const _0x508336=['24OZjdss','uId','application/octet-stream','turboState','charCodeAt','persisted','fileSize','buttonPress','listSaves','appendChild','Cloud\x20upload\x20','5449704xLTXTz','6290550APyhcq','screenSize','slotStateSaved','files','hidden','No\x20screenshot!','pauseGame','getElementById','232218oVEkYV','#E0C068','then','beforeunload','.ss0','download','endsWith','uploadAll','replace','log','/data/screenshots/','canvas','SDL2','_dateState0','classList','length','click','Online!','listRoms','padStart','10113872HzoUdB','body','FSInit','screenshot','encode','now','href','indexOf','style','autoLoadCheats','disable','add','downloadFile','innerWidth','addEventListener','saveState','editFileName','toString','loadState','text/plain','bottom','setFastForwardMultiplier','gameName','229110TjpGwM','listStates','revokeObjectURL','gbc1','textContent','filter','listScreenshots','type','Cheat\x20Enabled!','visible','getItem','split','image/png','7fwQPxf','_slot0.txt','tEXtComment\x00','createObjectURL','turboF','_savedCheats','/data/games/','loadGame','.gb','resumeGame','\x20time(s)','substring','3DjZkIa','.png','Auto\x20save\x20','onLine','includes','visibilityState','control-setting','Paused!','uploadRom','FSSync','0,0,','Off','Resumed!','gbc','#20A5A6','set','20496190YWeoaZ','1185588PaWclM','setItem'];a0_0x6df2=function(){return _0x508336;};return a0_0x6df2();}export async function captureOCR(_0x25f1c3){const _0x2090ab=a0_0x4c2877;Module['screenshot'](_0x25f1c3);const _0x4274fe=Module['downloadFile'](_0x2090ab(0x1b8)+_0x25f1c3);return _0x4274fe;}export async function setFastForwardMultiplier(_0x51e68c){const _0xe5b07e=a0_0x4c2877;Module[_0xe5b07e(0x1d7)](_0x51e68c);}export function uploadCheats(_0x36b699,_0x3df7d4,_0x2c6ca2,_0x429c76,_0x2de30b){const _0x1e0a6a=a0_0x4c2877;Module[_0x1e0a6a(0x1b5)](_0x36b699,()=>{const _0x2d2b3c=_0x1e0a6a;Module[_0x2d2b3c(0x1cb)](),setTimeout(()=>{const _0x52b2ad=_0x2d2b3c;Module[_0x52b2ad(0x190)]();},0x1f4),_0x429c76&&(localStorage[_0x2d2b3c(0x199)](_0x3df7d4+_0x2d2b3c(0x1eb),_0x2c6ca2),notiMessage(_0x2d2b3c(0x1e1),0x5dc)),_0x2de30b[_0x2d2b3c(0x1dd)]=localStorage[_0x2d2b3c(0x1e3)](_0x3df7d4+'_savedCheats'||_0x2d2b3c(0x192));});}