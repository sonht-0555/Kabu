function a0_0x4f7f(){const _0xd6cc9c=['click','createObjectURL','2HWbhIM','uploadCheats','1213513yGymrZ','application/octet-stream','screenSize','5051085iKTKVs','bottom','pauseGame','visible','Do\x20you\x20want\x20to\x20load\x20save\x20state?','visibilityState','SDL2','FSInit','uploadSaveOrSaveState','/data/screenshots/','945sqktWt','disable','Error\x20uploadSavSta:','saveState','contains','_dateState0','log','beforeunload','canvas','files','href','Off','includes','fileSize','now','resumeGame','281498mKoCCt','.ss0','uploadRom','textContent','#20A5A6','getElementById','type','turboState','.png','endsWith','FSSync','24wLKerM','listScreenshots','Save/State\x20uploaded\x20successfully:','padStart','.gba','createElement','2070123bNFtvD','buttonPress','_imageState0','replace','listStates','onLine','setItem','screenshot','persisted','downloadFile','toString','Online!','uId','loadGame','then','editFileName','\x20time(s)','311690sCeNRD','9988776HklubL','/data/games/','Resumed!','turboF','name','add','.gbc','deleteFile','listGames','getItem','Error\x20uploadCheat:','_savedCheats','No\x20screenshot!','addEventListener','text/plain','remove','visibilitychange','style','body','Unable\x20to\x20upload\x20to\x20Cloud!','0,0,','listSaves','gbc','Cheat\x20Enabled!','pagehide','_imageState','Auto\x20save\x20','gameName','innerWidth','classList','listCheats','buttonUnpress','6022624nMLJIf'];a0_0x4f7f=function(){return _0xd6cc9c;};return a0_0x4f7f();}const a0_0xf31337=a0_0x3790;(function(_0x5aa2e8,_0x5c43f4){const _0x173c25=a0_0x3790,_0x1e207a=_0x5aa2e8();while(!![]){try{const _0x40f92b=parseInt(_0x173c25(0x11e))/0x1*(-parseInt(_0x173c25(0x13d))/0x2)+-parseInt(_0x173c25(0x14e))/0x3+parseInt(_0x173c25(0x11b))/0x4+-parseInt(_0x173c25(0x123))/0x5+-parseInt(_0x173c25(0x148))/0x6*(parseInt(_0x173c25(0x120))/0x7)+-parseInt(_0x173c25(0xfb))/0x8+-parseInt(_0x173c25(0x12d))/0x9*(-parseInt(_0x173c25(0xfa))/0xa);if(_0x40f92b===_0x5c43f4)break;else _0x1e207a['push'](_0x1e207a['shift']());}catch(_0x58a424){_0x1e207a['push'](_0x1e207a['shift']());}}}(a0_0x4f7f,0xd0a54));import a0_0x12a301 from'../core/mgba.js';import*as a0_0x1cf0d from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0xf31337(0x142)](a0_0xf31337(0x135))};function initializeCore(_0x4ae3cb,_0x455252){const _0x3b6ebc=a0_0xf31337;_0x4ae3cb(_0x455252)[_0x3b6ebc(0xf7)](function(_0x3a25a5){const _0x4dca98=_0x3b6ebc;_0x3a25a5[_0x4dca98(0x12a)]();});}initializeCore(a0_0x12a301,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0xf31337(0x142)]('canvas'),savedTurboState=localStorage['getItem'](a0_0xf31337(0x144)),controlSetting=document['getElementById']('control-setting');function handleVisibilityChange(_0x1c765a){const _0x2c8185=a0_0xf31337;document[_0x2c8185(0x128)]==='hidden'||_0x1c765a?.[_0x2c8185(0x143)]===_0x2c8185(0x134)||_0x1c765a?.[_0x2c8185(0xf1)]?(pauseGame(),canvas[_0x2c8185(0x118)][_0x2c8185(0x100)](_0x2c8185(0x126))):(setTimeout(()=>{const _0x3fc8bc=_0x2c8185;canvas[_0x3fc8bc(0x118)][_0x3fc8bc(0x10a)](_0x3fc8bc(0x126));},0x258),controlSetting[_0x2c8185(0x118)][_0x2c8185(0x131)](_0x2c8185(0x126))&&resumeGame());}async function statusShow(){const _0x11d6ab=a0_0xf31337;document[_0x11d6ab(0x108)](_0x11d6ab(0x113),handleVisibilityChange),document[_0x11d6ab(0x108)](_0x11d6ab(0x10b),handleVisibilityChange),window['addEventListener'](_0x11d6ab(0x134),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x1cf0d[_0x11d6ab(0xfe)](turboState)),await delay(0x3e8),await led(parseInt(localStorage['getItem']('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x37ca40=a0_0xf31337;await ledSave(_0x37ca40(0x141)),await Module[_0x37ca40(0x130)](0x0),await Module[_0x37ca40(0x147)](),await screenShot(0x0),console[_0x37ca40(0x133)](_0x37ca40(0x115)+ ++countAutoSave+_0x37ca40(0xf9));}async function saveStateInCloud(){const _0x321ac0=a0_0xf31337,_0x2edd83=localStorage[_0x321ac0(0x104)](_0x321ac0(0x116)),_0x2d606f=_0x2edd83[_0x321ac0(0x151)](_0x321ac0(0x14c),_0x321ac0(0x13e)),_0xda0d4a=localStorage['getItem'](_0x321ac0(0xf5)),_0x21351f=localStorage[_0x321ac0(0x104)](_0x2edd83+_0x321ac0(0x150)),_0xbe81de=localStorage[_0x321ac0(0x104)](_0x2edd83+_0x321ac0(0x132));if(navigator[_0x321ac0(0x153)]){if(_0xda0d4a){await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x2d606f,Module[_0x321ac0(0xf2)]('/data/states/'+_0x2d606f));if(_0x21351f!==null){const _0x5081c3=_0x21351f+'\x0a\x0a'+_0xbe81de,_0x456731=new Blob([_0x5081c3],{'type':_0x321ac0(0x109)});await dpUploadFile(_0x2edd83+'_slot0.txt',_0x456731);}else console[_0x321ac0(0x133)](_0x321ac0(0x107));await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x321ac0(0xf9),0x7d0);}else console[_0x321ac0(0x133)](_0x321ac0(0x10e));}else console[_0x321ac0(0x133)](_0x321ac0(0xf4));}function startTimer(){let [_0x8b2ee2,_0x144990,_0x3d8840,_0x44434b,_0x4f2d18]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x2ec167=a0_0x3790;_0x3d8840++,_0x44434b++,_0x4f2d18++;if(_0x3d8840===0x3c)[_0x3d8840,_0x144990]=[0x0,_0x144990+0x1];if(_0x144990===0x3c)[_0x144990,_0x8b2ee2]=[0x0,_0x8b2ee2+0x1];document[_0x2ec167(0x142)]('timer')['textContent']=_0x8b2ee2+'h'+_0x144990[_0x2ec167(0xf3)]()[_0x2ec167(0x14b)](0x2,'0')+'.'+_0x3d8840['toString']()['padStart'](0x2,'0');_0x44434b===0x3c&&(saveStatePeriodically(),_0x44434b=0x0);;_0x44434b===0xe10&&(saveStateInCloud(),_0x4f2d18=0x0);;},0x3e8);}export async function uploadGame(_0x3a800d){const _0x7c5ebc=a0_0xf31337,_0x41b0fb=_0x3a800d['files'][0x0];Module[_0x7c5ebc(0x13f)](_0x41b0fb,()=>{const _0x3fbd00=_0x7c5ebc;Module[_0x3fbd00(0x147)]();});}export async function loadGame(_0x464227){const _0x3e3726=a0_0xf31337,_0x7be48d=_0x464227[_0x3e3726(0x151)](/\.(gba|gbc|gb|zip)$/,_0x3e3726(0x13e)),_0x5807ad=Module[_0x3e3726(0x152)]();intro[_0x3e3726(0x118)][_0x3e3726(0x100)](_0x3e3726(0x12e)),errorLogElements[0x0][_0x3e3726(0x10c)][_0x3e3726(0x124)]='0',ingame[_0x3e3726(0x118)][_0x3e3726(0x10a)](_0x3e3726(0x12e)),_0x464227[_0x3e3726(0x146)](_0x3e3726(0x101))||_0x464227[_0x3e3726(0x146)]('.gb')?(canvas[_0x3e3726(0x118)][_0x3e3726(0x100)](_0x3e3726(0x111)),areaTrans['classList'][_0x3e3726(0x100)]('gbc1'),localStorage[_0x3e3726(0x154)](_0x3e3726(0x122),_0x3e3726(0x10f)+(window[_0x3e3726(0x117)]-0xe6)+','+(window[_0x3e3726(0x117)]-0xe6)*0x9/0xa)):localStorage['setItem']('screenSize',_0x3e3726(0x10f)+(window[_0x3e3726(0x117)]-0x96)+','+(window[_0x3e3726(0x117)]-0x96)*0x2/0x3),_0x5807ad[_0x3e3726(0x139)](_0x7be48d)?(await Module['loadGame'](_0x3e3726(0xfc)+_0x464227),confirm(_0x3e3726(0x127))&&(await Module['loadState'](0x0),localStorage[_0x3e3726(0x154)](_0x3e3726(0x116),_0x464227),console[_0x3e3726(0x133)](_0x464227))):(await Module[_0x3e3726(0xf6)]('/data/games/'+_0x464227),localStorage[_0x3e3726(0x154)]('gameName',_0x464227)),await statusShow();}function a0_0x3790(_0x31cde9,_0x5b3662){const _0x4f7f52=a0_0x4f7f();return a0_0x3790=function(_0x379008,_0x322f63){_0x379008=_0x379008-0xf0;let _0x379b7f=_0x4f7f52[_0x379008];return _0x379b7f;},a0_0x3790(_0x31cde9,_0x5b3662);}export async function saveState(_0x591193){const _0x6439c8=a0_0xf31337;await Module[_0x6439c8(0x130)](_0x591193),await Module[_0x6439c8(0x147)]();}export async function loadState(_0x138bd4){await Module['loadState'](_0x138bd4);}export async function downloadFile(_0x4b8cec,_0x4dbc8c){const _0x4e86ec=a0_0xf31337,_0x17aea8=Module['downloadFile'](_0x4b8cec),_0x5c0f5f=document[_0x4e86ec(0x14d)]('a');document[_0x4e86ec(0x10d)]['appendChild'](_0x5c0f5f),_0x5c0f5f['download']=_0x4dbc8c;const _0x31bc69=new Blob([_0x17aea8],{'type':_0x4e86ec(0x121)});_0x5c0f5f[_0x4e86ec(0x137)]=URL[_0x4e86ec(0x11d)](_0x31bc69),_0x5c0f5f[_0x4e86ec(0x11c)](),URL['revokeObjectURL'](_0x31bc69),_0x5c0f5f[_0x4e86ec(0x10a)]();}export function downloadFileInCloud(_0x261219){const _0x15b934=a0_0xf31337,_0x2096f2=Module[_0x15b934(0xf2)](_0x261219);return _0x2096f2;}export async function uploadFile(_0x288fec){const _0x31c678=a0_0xf31337,_0x3fcfd5=_0x288fec[_0x31c678(0x136)][0x0];Module[_0x31c678(0x12b)](_0x3fcfd5,()=>{const _0x16a299=_0x31c678;Module[_0x16a299(0x147)]();});}export async function editFile(_0x191e52,_0xe53291,_0x79a838){const _0x31f1b5=a0_0xf31337;await Module[_0x31f1b5(0xf8)](_0x191e52,_0xe53291,_0x79a838),await Module[_0x31f1b5(0x147)]();}export async function deleteFile(_0x436f6d){const _0x15b71c=a0_0xf31337;await Module[_0x15b71c(0x102)](_0x436f6d),await Module[_0x15b71c(0x147)]();}export function listGame(){const _0x18351f=a0_0xf31337,_0x13c45c=Module[_0x18351f(0x103)]();return _0x13c45c;}export function listSave(){const _0x22d537=a0_0xf31337,_0x1a3801=Module[_0x22d537(0x110)]();return _0x1a3801;}export function listState(){const _0x40b7fa=a0_0xf31337,_0x4f425d=Module[_0x40b7fa(0x152)]();return _0x4f425d;}export function listCheat(){const _0x5362b9=a0_0xf31337,_0x528bda=Module[_0x5362b9(0x119)]();return _0x528bda;}export function listScreenshot(){const _0x16dc9b=a0_0xf31337,_0x1b6b18=Module[_0x16dc9b(0x149)]();return _0x1b6b18;}export function fileSize(_0x263c3e){const _0x487f7c=a0_0xf31337,_0x40c46b=Module[_0x487f7c(0x13a)](_0x263c3e);return _0x40c46b;}export async function uploadCheat(_0x1187f8){const _0x2877a4=a0_0xf31337;try{const _0x658ee6=_0x1187f8[_0x2877a4(0x136)][0x0];await Module[_0x2877a4(0x11f)](_0x658ee6,()=>{const _0x4b63f7=_0x2877a4;console[_0x4b63f7(0x133)]('Cheat\x20uploaded\x20successfully:',_0x658ee6[_0x4b63f7(0xff)]),localStorageFile(),Module[_0x4b63f7(0x147)]();});}catch(_0x2fe5a4){console['error'](_0x2877a4(0x105),_0x2fe5a4);}}export async function uploadSavSta(_0x2848b7){const _0x3f4634=a0_0xf31337;try{const _0x5971ee=_0x2848b7[_0x3f4634(0x136)][0x0];await Module[_0x3f4634(0x12b)](_0x5971ee,()=>{const _0x2fe59a=_0x3f4634;console[_0x2fe59a(0x133)](_0x2fe59a(0x14a),_0x5971ee[_0x2fe59a(0xff)]),localStorageFile(),Module[_0x2fe59a(0x147)]();});}catch(_0x3df9b7){console['error'](_0x3f4634(0x12f),_0x3df9b7);}}export async function uploadSaveOrSaveState(_0x35d70a){const _0x930098=a0_0xf31337;Module[_0x930098(0x12b)](_0x35d70a,()=>{localStorageFile(),Module['FSSync']();});}export async function resumeGame(){const _0x104f5f=a0_0xf31337;Module[_0x104f5f(0x13c)](),Module[_0x104f5f(0x129)](),notiMessage(_0x104f5f(0xfd),0x7d0);}export async function pauseGame(){const _0x36a50b=a0_0xf31337;Module[_0x36a50b(0x125)](),Module['SDL2'](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x299e1b){const _0x2f936d=a0_0xf31337;Module[_0x2f936d(0x14f)](_0x299e1b);}export async function buttonUnpress(_0x317410){const _0x4ec797=a0_0xf31337;Module[_0x4ec797(0x11a)](_0x317410);}export async function screenShot(_0xeec051){const _0x755c59=a0_0xf31337,_0x4a109e=localStorage[_0x755c59(0x104)](_0x755c59(0x116)),_0x28ddce=_0x4a109e['replace'](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x28ddce+_0xeec051+_0x755c59(0x145)),await Module['FSSync']();const _0x33896e=await fileToBase64(Module['downloadFile'](_0x755c59(0x12c)+_0x28ddce+_0xeec051+_0x755c59(0x145))),_0x2a23e2=Date[_0x755c59(0x13b)](),_0x52ce48=formatDateTime(_0x2a23e2);localStorage[_0x755c59(0x154)](_0x4a109e+'_dateState'+_0xeec051,_0x52ce48),localStorage[_0x755c59(0x154)](_0x4a109e+_0x755c59(0x114)+_0xeec051,_0x33896e);}export async function captureOCR(_0x5daf51){const _0x15839b=a0_0xf31337;Module[_0x15839b(0xf0)](_0x5daf51);const _0x52e820=Module[_0x15839b(0xf2)](_0x15839b(0x12c)+_0x5daf51);return _0x52e820;}export async function setFastForwardMultiplier(_0x31e54a){Module['setFastForwardMultiplier'](_0x31e54a);}export function uploadCheats(_0x398c8b,_0xf20008,_0x39f104,_0x10ef78,_0x45cfcb){const _0x5b63bd=a0_0xf31337;Module[_0x5b63bd(0x11f)](_0x398c8b,()=>{const _0x49ca0e=_0x5b63bd;Module['autoLoadCheats'](),setTimeout(()=>{const _0x79fdeb=a0_0x3790;Module[_0x79fdeb(0x147)]();},0x1f4),_0x10ef78&&(localStorage[_0x49ca0e(0x154)](_0xf20008+_0x49ca0e(0x106),_0x39f104),notiMessage(_0x49ca0e(0x112),0x5dc)),_0x45cfcb[_0x49ca0e(0x140)]=localStorage[_0x49ca0e(0x104)](_0xf20008+_0x49ca0e(0x106)||_0x49ca0e(0x138));});}