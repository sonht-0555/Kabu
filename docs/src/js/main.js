const a0_0x4f555a=a0_0x1486;(function(_0x6699a9,_0x414f4f){const _0x4f1fd8=a0_0x1486,_0x583e4c=_0x6699a9();while(!![]){try{const _0x941653=parseInt(_0x4f1fd8(0x1a2))/0x1*(parseInt(_0x4f1fd8(0x1a4))/0x2)+parseInt(_0x4f1fd8(0x1c9))/0x3+parseInt(_0x4f1fd8(0x16c))/0x4*(-parseInt(_0x4f1fd8(0x197))/0x5)+parseInt(_0x4f1fd8(0x1c7))/0x6*(parseInt(_0x4f1fd8(0x19f))/0x7)+-parseInt(_0x4f1fd8(0x17f))/0x8*(parseInt(_0x4f1fd8(0x15e))/0x9)+-parseInt(_0x4f1fd8(0x185))/0xa+parseInt(_0x4f1fd8(0x1c5))/0xb;if(_0x941653===_0x414f4f)break;else _0x583e4c['push'](_0x583e4c['shift']());}catch(_0x15ff73){_0x583e4c['push'](_0x583e4c['shift']());}}}(a0_0x17d0,0x9627b));import a0_0x371610 from'../core/mgba.js';function a0_0x17d0(){const _0x307909=['.png','/data/games/','No\x20screenshot!','autoLoadCheats','saveState','endsWith','listRoms','buttonPress','createObjectURL','onLine','#20A5A6','fileSize','_dateState0','now','gbc1','screenSize','_imageState0','_savedCheats','Do\x20you\x20want\x20to\x20load\x20save\x20state?','listSaves','6151101QnomxP','slotStateSaved','30aeyMYe','toString','2276466MCJkhx','log','Online!','application/octet-stream','28377rGvUFB','image/png','hidden','setVolume','timer','add','Resumed!','.ss0','Paused!','canvas','disable','charCodeAt','resumeGame','#E0C068','4SOcpIf','textContent','style','remove','downloadFile','download','length','href','substring','.gbc','0,0,','FSInit','uploadAll','appendChild','replace','getItem','split','visible','turboF','1808HyuZAD','bottom','encode','beforeunload','Cloud\x20upload\x20','pauseGame','6812110KdFVUE','text/plain','listStates','visibilitychange','setItem','\x20time(s)','listCheats','editFileName','FSSync','.gb','createElement','set','Auto\x20save\x20','filter','click','tEXtComment\x00','loadGame','listScreenshots','4560100vaCifn','classList','SDL2','/data/screenshots/','Unable\x20to\x20upload\x20to\x20Cloud!','deleteFile','padStart','type','1289001qfZoRG','indexOf','addEventListener','113686pIRlEN','setFastForwardMultiplier','12cConTc','buttonUnpress','/data/states/','visibilityState','screenshot','revokeObjectURL','_slot0.txt','gameName','turboState','getElementById','gbc','innerWidth','control-setting'];a0_0x17d0=function(){return _0x307909;};return a0_0x17d0();}import*as a0_0x444091 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document[a0_0x4f555a(0x1ad)](a0_0x4f555a(0x167))};function initializeCore(_0x5c2990,_0x15d25c){_0x5c2990(_0x15d25c)['then'](function(_0x3aa430){const _0x3317c3=a0_0x1486;_0x3aa430[_0x3317c3(0x177)]();});}initializeCore(a0_0x371610,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x4f555a(0x167)),savedTurboState=localStorage['getItem'](a0_0x4f555a(0x1ac)),controlSetting=document[a0_0x4f555a(0x1ad)](a0_0x4f555a(0x1b0));function handleVisibilityChange(_0x2e58c1){const _0x9e63d6=a0_0x4f555a;document[_0x9e63d6(0x1a7)]===_0x9e63d6(0x160)||_0x2e58c1?.[_0x9e63d6(0x19e)]===_0x9e63d6(0x182)||_0x2e58c1?.['persisted']?(pauseGame(),canvas[_0x9e63d6(0x198)][_0x9e63d6(0x163)](_0x9e63d6(0x17d))):(setTimeout(()=>{const _0x5dbf18=_0x9e63d6;canvas[_0x5dbf18(0x198)]['remove'](_0x5dbf18(0x17d));},0x258),controlSetting['classList']['contains'](_0x9e63d6(0x17d))&&resumeGame());}async function statusShow(){const _0xccd4ca=a0_0x4f555a;document[_0xccd4ca(0x1a1)]('pagehide',handleVisibilityChange),document[_0xccd4ca(0x1a1)](_0xccd4ca(0x188),handleVisibilityChange),window[_0xccd4ca(0x1a1)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x444091[_0xccd4ca(0x17e)](turboState)),await delay(0xc8),await Module[_0xccd4ca(0x199)](),await delay(0x320),await led(parseInt(localStorage[_0xccd4ca(0x17b)](_0xccd4ca(0x1c6)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x299a9b=a0_0x4f555a;await ledSave(_0x299a9b(0x1bb)),await Module['saveState'](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x299a9b(0x1ca)](_0x299a9b(0x191)+ ++countAutoSave+_0x299a9b(0x18a));}async function saveStateInCloud(){const _0x566b47=a0_0x4f555a,_0x269546=localStorage[_0x566b47(0x17b)]('gameName'),_0x1f1da2=_0x269546[_0x566b47(0x17a)](/\.(zip|gb|gbc|gba)$/,_0x566b47(0x165)),_0x2c4d38=localStorage[_0x566b47(0x17b)]('uId'),_0xbbc960=localStorage[_0x566b47(0x17b)](_0x269546+_0x566b47(0x1c1)),_0x1fe9b1=localStorage[_0x566b47(0x17b)](_0x269546+_0x566b47(0x1bd));if(navigator[_0x566b47(0x1ba)]){if(_0x2c4d38){await ledSave(_0x566b47(0x16b)),await delay(0x3e8),await dpUploadFile(_0x1f1da2,Module['downloadFile'](_0x566b47(0x1a6)+_0x1f1da2));if(_0xbbc960!==null){const _0x112917=_0xbbc960+'\x0a\x0a'+_0x1fe9b1,_0xfe7c06=new Blob([_0x112917],{'type':_0x566b47(0x186)});await dpUploadFile(_0x269546+_0x566b47(0x1aa),_0xfe7c06);}else console[_0x566b47(0x1ca)](_0x566b47(0x1b3));await lockNoti('',_0x566b47(0x183)+ ++countUpload+_0x566b47(0x18a),0x7d0);}else console[_0x566b47(0x1ca)](_0x566b47(0x19b));}else console[_0x566b47(0x1ca)](_0x566b47(0x15c));}function startTimer(){let [_0x5e937e,_0x430716,_0x53be60,_0xd1cbfd,_0x3bef87]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x3961ec=a0_0x1486;_0x53be60++,_0xd1cbfd++,_0x3bef87++;if(_0x53be60===0x3c)[_0x53be60,_0x430716]=[0x0,_0x430716+0x1];if(_0x430716===0x3c)[_0x430716,_0x5e937e]=[0x0,_0x5e937e+0x1];document['getElementById'](_0x3961ec(0x162))[_0x3961ec(0x16d)]=_0x5e937e+'h'+_0x430716[_0x3961ec(0x1c8)]()[_0x3961ec(0x19d)](0x2,'0')+'.'+_0x53be60['toString']()[_0x3961ec(0x19d)](0x2,'0');_0xd1cbfd===0x3c&&(saveStatePeriodically(),_0xd1cbfd=0x0);;_0x3bef87===0xe10&&(saveStateInCloud(),_0x3bef87=0x0);;},0x3e8);}export async function uploadGame(_0x22794f){const _0x41b93d=_0x22794f['files'][0x0];Module['uploadRom'](_0x41b93d,()=>{Module['FSSync']();});}export async function loadGame(_0x3bda29){const _0x295c4e=a0_0x4f555a,_0x8f0d54=_0x3bda29[_0x295c4e(0x17a)](/\.(gba|gbc|gb|zip)$/,_0x295c4e(0x165)),_0x4dbc1e=Module[_0x295c4e(0x187)]()[_0x295c4e(0x192)](_0xfd9ca9=>_0xfd9ca9!=='.'&&_0xfd9ca9!=='..');intro[_0x295c4e(0x198)]['add'](_0x295c4e(0x168)),errorLogElements[0x0][_0x295c4e(0x16e)][_0x295c4e(0x180)]='0',ingame[_0x295c4e(0x198)]['remove'](_0x295c4e(0x168)),_0x3bda29[_0x295c4e(0x1b6)](_0x295c4e(0x175))||_0x3bda29['endsWith'](_0x295c4e(0x18e))?(canvas[_0x295c4e(0x198)]['add'](_0x295c4e(0x1ae)),areaTrans[_0x295c4e(0x198)]['add'](_0x295c4e(0x1bf)),localStorage['setItem'](_0x295c4e(0x1c0),_0x295c4e(0x176)+(window['innerWidth']-0xe6)+','+(window[_0x295c4e(0x1af)]-0xe6)*0x9/0xa)):localStorage['setItem']('screenSize',_0x295c4e(0x176)+(window[_0x295c4e(0x1af)]-0x96)+','+(window[_0x295c4e(0x1af)]-0x96)*0x2/0x3),_0x4dbc1e['includes'](_0x8f0d54)?(await Module[_0x295c4e(0x195)](_0x295c4e(0x1b2)+_0x3bda29),confirm(_0x295c4e(0x1c3))&&(await Module['loadState'](0x0),localStorage[_0x295c4e(0x189)](_0x295c4e(0x1ab),_0x3bda29),console[_0x295c4e(0x1ca)](_0x3bda29))):(await Module['loadGame'](_0x295c4e(0x1b2)+_0x3bda29),localStorage[_0x295c4e(0x189)](_0x295c4e(0x1ab),_0x3bda29),console[_0x295c4e(0x1ca)](_0x3bda29)),await statusShow();}export async function saveState(_0x4f5c6d){const _0x33f118=a0_0x4f555a;await Module[_0x33f118(0x1b5)](_0x4f5c6d),await Module[_0x33f118(0x18d)]();}export async function loadState(_0x4f4706){await Module['loadState'](_0x4f4706);}export async function downloadFile(_0x476e66,_0x331757){const _0x2ce7f8=a0_0x4f555a,_0x47bdc2=Module[_0x2ce7f8(0x170)](_0x476e66),_0x127925=document[_0x2ce7f8(0x18f)]('a');document['body'][_0x2ce7f8(0x179)](_0x127925),_0x127925[_0x2ce7f8(0x171)]=_0x331757;const _0x255c67=new Blob([_0x47bdc2],{'type':_0x2ce7f8(0x15d)});_0x127925[_0x2ce7f8(0x173)]=URL[_0x2ce7f8(0x1b9)](_0x255c67),_0x127925[_0x2ce7f8(0x193)](),URL[_0x2ce7f8(0x1a9)](_0x255c67),_0x127925[_0x2ce7f8(0x16f)]();}export function downloadFileInCloud(_0x584730){const _0x467b2b=a0_0x4f555a,_0x22ad0c=Module[_0x467b2b(0x170)](_0x584730);return _0x22ad0c;}export async function uploadFileInCloud(_0x28eb54){Module['uploadAll'](_0x28eb54,()=>{const _0x1b3a03=a0_0x1486;localStorageFile(),Module[_0x1b3a03(0x18d)]();});}export async function uploadFile(_0x1598b8){const _0x370b15=a0_0x4f555a,_0x466d87=_0x1598b8['files'][0x0];Module[_0x370b15(0x178)](_0x466d87,()=>{const _0x1e5fc4=_0x370b15;localStorageFile(),Module[_0x1e5fc4(0x18d)]();});}export async function editFile(_0x3bdf77,_0x1f91ac,_0x4069c7){const _0x50c2e0=a0_0x4f555a;await Module[_0x50c2e0(0x18c)](_0x3bdf77,_0x1f91ac,_0x4069c7),await Module[_0x50c2e0(0x18d)]();}export async function deleteFile(_0x565984){const _0x442e52=a0_0x4f555a;await Module[_0x442e52(0x19c)](_0x565984),await Module[_0x442e52(0x18d)]();}export function listGame(){const _0x19a7c7=a0_0x4f555a,_0x184f3a=Module[_0x19a7c7(0x1b7)]()[_0x19a7c7(0x192)](_0x184105=>_0x184105!=='.'&&_0x184105!=='..');return _0x184f3a;}export function listSave(){const _0x11ff89=a0_0x4f555a,_0x169421=Module[_0x11ff89(0x1c4)]()[_0x11ff89(0x192)](_0x27e473=>_0x27e473!=='.'&&_0x27e473!=='..');return _0x169421;}export function listState(){const _0x89ed91=a0_0x4f555a,_0x1ef02d=Module[_0x89ed91(0x187)]()['filter'](_0x4e9b04=>_0x4e9b04!=='.'&&_0x4e9b04!=='..');return _0x1ef02d;}export function listCheat(){const _0x7a85e5=a0_0x4f555a,_0x2260d8=Module[_0x7a85e5(0x18b)]()[_0x7a85e5(0x192)](_0x5c7948=>_0x5c7948!=='.'&&_0x5c7948!=='..');return _0x2260d8;}export function listScreenshot(){const _0x59fbf4=a0_0x4f555a,_0x285de4=Module[_0x59fbf4(0x196)]()[_0x59fbf4(0x192)](_0x3b5bfc=>_0x3b5bfc!=='.'&&_0x3b5bfc!=='..');return _0x285de4;}export function embedTextInPngFile(_0xb6eeef,_0xb327cc,_0x39968d){const _0x5f4a76=a0_0x4f555a;let _0xbeff3c=atob(_0xb6eeef[_0x5f4a76(0x17c)](',')[0x1]),_0x4d6865=new Uint8Array(_0xbeff3c[_0x5f4a76(0x172)]);for(let _0x39c279=0x0;_0x39c279<_0xbeff3c[_0x5f4a76(0x172)];_0x39c279++){_0x4d6865[_0x39c279]=_0xbeff3c[_0x5f4a76(0x169)](_0x39c279);}let _0x4087da=new TextEncoder()[_0x5f4a76(0x181)](_0x5f4a76(0x194)+_0xb327cc),_0x19a131=new Uint8Array(_0x4d6865[_0x5f4a76(0x172)]+_0x4087da[_0x5f4a76(0x172)]);_0x19a131[_0x5f4a76(0x190)](_0x4d6865,0x0),_0x19a131['set'](_0x4087da,_0x4d6865['length']);let _0x2dd2bc=new Blob([_0x19a131],{'type':_0x5f4a76(0x15f)}),_0x3b41ca=new File([_0x2dd2bc],_0x39968d,{'type':_0x5f4a76(0x15f)});return _0x3b41ca;}function a0_0x1486(_0x2181a5,_0x32515c){const _0x17d09d=a0_0x17d0();return a0_0x1486=function(_0x148659,_0x952b79){_0x148659=_0x148659-0x15c;let _0x19a045=_0x17d09d[_0x148659];return _0x19a045;},a0_0x1486(_0x2181a5,_0x32515c);}export function extractTextFromPngBase64(_0x47d952){const _0x290bce=a0_0x4f555a;let _0x3923bd=atob(_0x47d952[_0x290bce(0x17c)](',')[0x1]),_0x46959d=_0x290bce(0x194),_0x2abce4=_0x3923bd[_0x290bce(0x1a0)](_0x46959d);if(_0x2abce4!==-0x1)return _0x3923bd[_0x290bce(0x174)](_0x2abce4+_0x46959d['length']);return null;}export function fileSize(_0x46e393){const _0x43fb1d=a0_0x4f555a,_0x1e409e=Module[_0x43fb1d(0x1bc)](_0x46e393);return _0x1e409e;}export async function resumeGame(){const _0x19e8ad=a0_0x4f555a;Module[_0x19e8ad(0x16a)](),Module[_0x19e8ad(0x199)](),notiMessage(_0x19e8ad(0x164),0x7d0);}export async function pauseGame(){const _0x5c97fa=a0_0x4f555a;Module[_0x5c97fa(0x184)](),Module['SDL2'](),notiMessage(_0x5c97fa(0x166),0x7d0);}export async function buttonPress(_0x1e06a9){const _0x2639f2=a0_0x4f555a;Module[_0x2639f2(0x1b8)](_0x1e06a9);}export async function buttonUnpress(_0x2e14fe){const _0x2af87e=a0_0x4f555a;Module[_0x2af87e(0x1a5)](_0x2e14fe);}export async function screenShot(_0x325b71){const _0x5c2e6e=a0_0x4f555a,_0x1ae27f=localStorage['getItem'](_0x5c2e6e(0x1ab))[_0x5c2e6e(0x17a)](/\.(gba|gbc|gb|zip)$/,''),_0x47a290=_0x1ae27f+'_'+_0x325b71+_0x5c2e6e(0x1b1);await Module[_0x5c2e6e(0x1a8)](_0x47a290),await Module['FSSync']();const _0x2bee3b=await fileToBase64(Module[_0x5c2e6e(0x170)](_0x5c2e6e(0x19a)+_0x47a290)),_0x173f0f=embedTextInPngFile(_0x2bee3b,formatDateTime(Date[_0x5c2e6e(0x1be)]()),_0x47a290);Module[_0x5c2e6e(0x178)](_0x173f0f,()=>{const _0x965642=_0x5c2e6e;localStorageFile(),Module[_0x965642(0x18d)]();});}export async function dowloadScreenShot(_0x33f051){const _0xbb3468=a0_0x4f555a;try{const _0x4abb45=await fileToBase64(Module[_0xbb3468(0x170)](_0x33f051));return _0x4abb45;}catch{}}export async function captureOCR(_0x416ac3){const _0x1194ce=a0_0x4f555a;Module[_0x1194ce(0x1a8)](_0x416ac3);const _0x579ba2=Module[_0x1194ce(0x170)](_0x1194ce(0x19a)+_0x416ac3);return _0x579ba2;}export async function setFastForwardMultiplier(_0x188bf3){const _0x980662=a0_0x4f555a;Module[_0x980662(0x1a3)](_0x188bf3);}export function uploadCheats(_0x1cf6dd,_0x2cc588,_0x6389fd,_0x2b9ce1,_0x841a31){const _0x90b93d=a0_0x4f555a;Module[_0x90b93d(0x178)](_0x1cf6dd,()=>{const _0x279c0f=_0x90b93d;Module[_0x279c0f(0x1b4)](),setTimeout(()=>{const _0x4f7887=_0x279c0f;Module[_0x4f7887(0x18d)]();},0x1f4),_0x2b9ce1&&(localStorage[_0x279c0f(0x189)](_0x2cc588+_0x279c0f(0x1c2),_0x6389fd),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x841a31[_0x279c0f(0x16d)]=localStorage['getItem'](_0x2cc588+'_savedCheats'||'Off');});}export function setVolume(_0x1c2b98){const _0xcc2d5f=a0_0x4f555a;Module[_0xcc2d5f(0x161)](_0x1c2b98);}