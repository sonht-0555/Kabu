const a0_0x3c4a4e=a0_0x2394;(function(_0x550c4f,_0x204297){const _0x4d01fc=a0_0x2394,_0x2276fa=_0x550c4f();while(!![]){try{const _0x4cc2a8=parseInt(_0x4d01fc(0x135))/0x1*(-parseInt(_0x4d01fc(0xfe))/0x2)+-parseInt(_0x4d01fc(0x10a))/0x3+-parseInt(_0x4d01fc(0x13f))/0x4*(parseInt(_0x4d01fc(0xe9))/0x5)+parseInt(_0x4d01fc(0x131))/0x6*(-parseInt(_0x4d01fc(0x105))/0x7)+parseInt(_0x4d01fc(0x140))/0x8*(-parseInt(_0x4d01fc(0xfb))/0x9)+-parseInt(_0x4d01fc(0xeb))/0xa*(parseInt(_0x4d01fc(0x101))/0xb)+-parseInt(_0x4d01fc(0x13d))/0xc*(-parseInt(_0x4d01fc(0x10c))/0xd);if(_0x4cc2a8===_0x204297)break;else _0x2276fa['push'](_0x2276fa['shift']());}catch(_0x273f31){_0x2276fa['push'](_0x2276fa['shift']());}}}(a0_0x1e99,0xaa61d));function a0_0x2394(_0x2ab279,_0x97540a){const _0x1e99cf=a0_0x1e99();return a0_0x2394=function(_0x239433,_0x2ec00c){_0x239433=_0x239433-0xe7;let _0x2e54c7=_0x1e99cf[_0x239433];return _0x2e54c7;},a0_0x2394(_0x2ab279,_0x97540a);}import a0_0x9bdd8a from'../core/mgba.js';import*as a0_0x304dd7 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x3c4a4e(0xea)](a0_0x3c4a4e(0x14c))};function initializeCore(_0x50ff06,_0x15670a){const _0x4e32ab=a0_0x3c4a4e;_0x50ff06(_0x15670a)[_0x4e32ab(0x13b)](function(_0x2c6350){_0x2c6350['FSInit']();});}initializeCore(a0_0x9bdd8a,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x3c4a4e(0xea)](a0_0x3c4a4e(0x14c)),savedTurboState=localStorage[a0_0x3c4a4e(0x10f)]('turboState'),controlSetting=document[a0_0x3c4a4e(0xea)](a0_0x3c4a4e(0xf6));function handleVisibilityChange(_0x1c229f){const _0x4ba0f4=a0_0x3c4a4e;document[_0x4ba0f4(0x130)]===_0x4ba0f4(0x143)||_0x1c229f?.[_0x4ba0f4(0x11c)]===_0x4ba0f4(0xf7)||_0x1c229f?.['persisted']?(pauseGame(),canvas[_0x4ba0f4(0x122)][_0x4ba0f4(0x11d)](_0x4ba0f4(0x146))):(setTimeout(()=>{const _0x13fb71=_0x4ba0f4;canvas['classList'][_0x13fb71(0x14b)](_0x13fb71(0x146));},0x258),controlSetting[_0x4ba0f4(0x122)][_0x4ba0f4(0x129)](_0x4ba0f4(0x146))&&resumeGame());}async function statusShow(){const _0x5a5f2a=a0_0x3c4a4e;document[_0x5a5f2a(0x145)](_0x5a5f2a(0x119),handleVisibilityChange),document['addEventListener']('visibilitychange',handleVisibilityChange),window[_0x5a5f2a(0x145)](_0x5a5f2a(0xf7),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x304dd7[_0x5a5f2a(0x132)](turboState)),await delay(0xc8),await Module[_0x5a5f2a(0x11b)](),await delay(0x320),await led(parseInt(localStorage[_0x5a5f2a(0x10f)](_0x5a5f2a(0xf1)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x302d7b=a0_0x3c4a4e;await ledSave('#20A5A6'),await Module[_0x302d7b(0x134)](0x0),await Module[_0x302d7b(0xed)](),await screenShot(0x0),console[_0x302d7b(0x110)](_0x302d7b(0x126)+ ++countAutoSave+_0x302d7b(0xf4));}async function saveStateInCloud(){const _0x3eeb35=a0_0x3c4a4e,_0x328ae8=localStorage[_0x3eeb35(0x10f)](_0x3eeb35(0xff)),_0x38733b=_0x328ae8[_0x3eeb35(0x12a)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x15cd55=localStorage[_0x3eeb35(0x10f)](_0x3eeb35(0x12b)),_0x27c1aa=localStorage[_0x3eeb35(0x10f)](_0x328ae8+_0x3eeb35(0x103)),_0x35e2ad=localStorage[_0x3eeb35(0x10f)](_0x328ae8+_0x3eeb35(0x12c));if(navigator[_0x3eeb35(0x107)]){if(_0x15cd55){await ledSave(_0x3eeb35(0x137)),await delay(0x3e8),await dpUploadFile(_0x38733b,Module[_0x3eeb35(0x11e)](_0x3eeb35(0xec)+_0x38733b));if(_0x27c1aa!==null){const _0x105e06=_0x27c1aa+'\x0a\x0a'+_0x35e2ad,_0xdcfcc1=new Blob([_0x105e06],{'type':_0x3eeb35(0x114)});await dpUploadFile(_0x328ae8+_0x3eeb35(0xe8),_0xdcfcc1);}else console['log'](_0x3eeb35(0xf5));await lockNoti('',_0x3eeb35(0x125)+ ++countUpload+_0x3eeb35(0xf4),0x7d0);}else console[_0x3eeb35(0x110)](_0x3eeb35(0x100));}else console[_0x3eeb35(0x110)]('Online!');}function startTimer(){let [_0x5ce427,_0x1fabf8,_0x1b679b,_0x380439,_0x505e24]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x43aab0=a0_0x2394;_0x1b679b++,_0x380439++,_0x505e24++;if(_0x1b679b===0x3c)[_0x1b679b,_0x1fabf8]=[0x0,_0x1fabf8+0x1];if(_0x1fabf8===0x3c)[_0x1fabf8,_0x5ce427]=[0x0,_0x5ce427+0x1];document[_0x43aab0(0xea)]('timer')['textContent']=_0x5ce427+'h'+_0x1fabf8[_0x43aab0(0x147)]()[_0x43aab0(0x127)](0x2,'0')+'.'+_0x1b679b['toString']()[_0x43aab0(0x127)](0x2,'0');_0x380439===0x3c&&(saveStatePeriodically(),_0x380439=0x0);;_0x505e24===0xe10&&(saveStateInCloud(),_0x505e24=0x0);;},0x3e8);}export async function uploadGame(_0x132dcb){const _0x26c0ca=a0_0x3c4a4e,_0x53a398=_0x132dcb[_0x26c0ca(0x118)][0x0];Module[_0x26c0ca(0xf3)](_0x53a398,()=>{Module['FSSync']();});}export async function loadGame(_0x2e6a0d){const _0x57db19=a0_0x3c4a4e,_0x3b2252=_0x2e6a0d['replace'](/\.(gba|gbc|gb|zip)$/,_0x57db19(0xfa)),_0x177d62=Module[_0x57db19(0x112)]()[_0x57db19(0x13c)](_0x20f625=>_0x20f625!=='.'&&_0x20f625!=='..');intro[_0x57db19(0x122)]['add'](_0x57db19(0x12e)),errorLogElements[0x0][_0x57db19(0xfc)][_0x57db19(0x106)]='0',ingame['classList'][_0x57db19(0x14b)](_0x57db19(0x12e)),_0x2e6a0d['endsWith']('.gbc')||_0x2e6a0d['endsWith'](_0x57db19(0xf8))?(canvas[_0x57db19(0x122)]['add'](_0x57db19(0x11f)),areaTrans['classList'][_0x57db19(0x11d)](_0x57db19(0x139)),localStorage[_0x57db19(0x148)](_0x57db19(0x117),'0,0,'+(window[_0x57db19(0x14a)]-0xe6)+','+(window[_0x57db19(0x14a)]-0xe6)*0x9/0xa)):localStorage[_0x57db19(0x148)](_0x57db19(0x117),_0x57db19(0x10b)+(window[_0x57db19(0x14a)]-0x96)+','+(window[_0x57db19(0x14a)]-0x96)*0x2/0x3),_0x177d62[_0x57db19(0xf2)](_0x3b2252)?(await Module['loadGame'](_0x57db19(0x138)+_0x2e6a0d),confirm(_0x57db19(0xe7))&&(await Module['loadState'](0x0),localStorage[_0x57db19(0x148)](_0x57db19(0xff),_0x2e6a0d),console['log'](_0x2e6a0d))):(await Module[_0x57db19(0x104)](_0x57db19(0x138)+_0x2e6a0d),localStorage[_0x57db19(0x148)](_0x57db19(0xff),_0x2e6a0d),console[_0x57db19(0x110)](_0x2e6a0d)),await statusShow();}export async function saveState(_0x3d1eed){const _0x2557e7=a0_0x3c4a4e;await Module[_0x2557e7(0x134)](_0x3d1eed),await Module['FSSync']();}export async function loadState(_0x366245){await Module['loadState'](_0x366245);}export async function downloadFile(_0x537894,_0x1ac09b){const _0xa129f1=a0_0x3c4a4e,_0xb9cd55=Module['downloadFile'](_0x537894),_0x184700=document[_0xa129f1(0x136)]('a');document[_0xa129f1(0xef)]['appendChild'](_0x184700),_0x184700[_0xa129f1(0x12f)]=_0x1ac09b;const _0x834cdb=new Blob([_0xb9cd55],{'type':'application/octet-stream'});_0x184700['href']=URL[_0xa129f1(0x13a)](_0x834cdb),_0x184700['click'](),URL['revokeObjectURL'](_0x834cdb),_0x184700['remove']();}export function downloadFileInCloud(_0x4f92e9){const _0x55d266=a0_0x3c4a4e,_0x30b4e8=Module[_0x55d266(0x11e)](_0x4f92e9);return _0x30b4e8;}export async function uploadFileInCloud(_0x32c2db){const _0x389c19=a0_0x3c4a4e;Module[_0x389c19(0x121)](_0x32c2db,()=>{localStorageFile(),Module['FSSync']();});}export async function uploadFile(_0x5cb778){const _0x4333b4=_0x5cb778['files'][0x0];Module['uploadAll'](_0x4333b4,()=>{const _0x261ce5=a0_0x2394;localStorageFile(),Module[_0x261ce5(0xed)]();});}export async function editFile(_0x3c01c4,_0x1201fd,_0x3bfee3){const _0x205e7f=a0_0x3c4a4e;await Module[_0x205e7f(0x111)](_0x3c01c4,_0x1201fd,_0x3bfee3),await Module['FSSync']();}export async function deleteFile(_0x21391c){const _0x464cb9=a0_0x3c4a4e;await Module[_0x464cb9(0x13e)](_0x21391c),await Module[_0x464cb9(0xed)]();}export function listGame(){const _0x4852ff=a0_0x3c4a4e,_0x3a519f=Module['listRoms']()[_0x4852ff(0x13c)](_0x3a2133=>_0x3a2133!=='.'&&_0x3a2133!=='..');return _0x3a519f;}export function listSave(){const _0x1a89c3=a0_0x3c4a4e,_0x1fd526=Module[_0x1a89c3(0x10d)]()[_0x1a89c3(0x13c)](_0x2160d0=>_0x2160d0!=='.'&&_0x2160d0!=='..');return _0x1fd526;}export function listState(){const _0x1ee4e7=a0_0x3c4a4e,_0x312d5a=Module[_0x1ee4e7(0x112)]()[_0x1ee4e7(0x13c)](_0x3a3709=>_0x3a3709!=='.'&&_0x3a3709!=='..');return _0x312d5a;}export function listCheat(){const _0x18cf2a=a0_0x3c4a4e,_0x8fb8c7=Module[_0x18cf2a(0xf0)]()[_0x18cf2a(0x13c)](_0x5179b8=>_0x5179b8!=='.'&&_0x5179b8!=='..');return _0x8fb8c7;}export function listScreenshot(){const _0x32967d=a0_0x3c4a4e,_0x12093c=Module['listScreenshots']()[_0x32967d(0x13c)](_0x25b4e3=>_0x25b4e3!=='.'&&_0x25b4e3!=='..');return _0x12093c;}export function embedTextInPngFile(_0x363eb1,_0x4cde7a,_0xb514d4){const _0x516404=a0_0x3c4a4e;let _0x654a48=atob(_0x363eb1[_0x516404(0x149)](',')[0x1]),_0x5e43d9=new Uint8Array(_0x654a48[_0x516404(0x11a)]);for(let _0x1f549c=0x0;_0x1f549c<_0x654a48[_0x516404(0x11a)];_0x1f549c++){_0x5e43d9[_0x1f549c]=_0x654a48['charCodeAt'](_0x1f549c);}let _0xd5998f=new TextEncoder()[_0x516404(0x102)](_0x516404(0xee)+_0x4cde7a),_0x321b28=new Uint8Array(_0x5e43d9['length']+_0xd5998f[_0x516404(0x11a)]);_0x321b28['set'](_0x5e43d9,0x0),_0x321b28[_0x516404(0x128)](_0xd5998f,_0x5e43d9[_0x516404(0x11a)]);let _0x1f4bac=new Blob([_0x321b28],{'type':_0x516404(0x109)}),_0x5339f4=new File([_0x1f4bac],_0xb514d4,{'type':_0x516404(0x109)});return _0x5339f4;}export function extractTextFromPngBase64(_0x26d60d){const _0x3293a6=a0_0x3c4a4e;let _0x11e39a=atob(_0x26d60d[_0x3293a6(0x149)](',')[0x1]),_0x110809=_0x3293a6(0xee),_0x3024c6=_0x11e39a[_0x3293a6(0x142)](_0x110809);if(_0x3024c6!==-0x1)return _0x11e39a[_0x3293a6(0x141)](_0x3024c6+_0x110809[_0x3293a6(0x11a)]);return null;}export function fileSize(_0x3aa24d){const _0x277b37=Module['fileSize'](_0x3aa24d);return _0x277b37;}export async function resumeGame(){const _0x35d81a=a0_0x3c4a4e;Module[_0x35d81a(0x10e)](),Module['SDL2'](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x77793b=a0_0x3c4a4e;Module[_0x77793b(0xfd)](),Module[_0x77793b(0x11b)](),notiMessage(_0x77793b(0xf9),0x7d0);}export async function buttonPress(_0x19992b){const _0x155921=a0_0x3c4a4e;Module[_0x155921(0x124)](_0x19992b);}export async function buttonUnpress(_0x477838){const _0x245c1c=a0_0x3c4a4e;Module[_0x245c1c(0x133)](_0x477838);}function a0_0x1e99(){const _0x5653b1=['41238MSClZK','style','pauseGame','1228552Albpjh','gameName','Unable\x20to\x20upload\x20to\x20Cloud!','6281ZLlqFg','encode','_imageState0','loadGame','343DjMTPW','bottom','onLine','screenshot','image/png','3164862xyKehV','0,0,','143MgiDla','listSaves','resumeGame','getItem','log','editFileName','listStates','.png','text/plain','textContent','Off','screenSize','files','pagehide','length','SDL2','type','add','downloadFile','gbc','setVolume','uploadAll','classList','now','buttonPress','Cloud\x20upload\x20','Auto\x20save\x20','padStart','set','contains','replace','uId','_dateState0','setFastForwardMultiplier','disable','download','visibilityState','94764MkOGEV','turboF','buttonUnpress','saveState','1AVhAVJ','createElement','#E0C068','/data/games/','gbc1','createObjectURL','then','filter','6029988PpplpL','deleteFile','38828PFbONN','2432xCZBCx','substring','indexOf','hidden','_savedCheats','addEventListener','visible','toString','setItem','split','innerWidth','remove','canvas','Do\x20you\x20want\x20to\x20load\x20save\x20state?','_slot0.txt','15xArlya','getElementById','16890GhqcXI','/data/states/','FSSync','tEXtComment\x00','body','listCheats','slotStateSaved','includes','uploadRom','\x20time(s)','No\x20screenshot!','control-setting','beforeunload','.gb','Paused!','.ss0'];a0_0x1e99=function(){return _0x5653b1;};return a0_0x1e99();}export async function screenShot(_0x5e321d){const _0x3e72c0=a0_0x3c4a4e,_0x49e0c4=localStorage[_0x3e72c0(0x10f)]('gameName')['replace'](/\.(gba|gbc|gb|zip)$/,''),_0x210763=_0x49e0c4+'_'+_0x5e321d+_0x3e72c0(0x113);await Module[_0x3e72c0(0x108)](_0x210763),await Module[_0x3e72c0(0xed)]();const _0x99f584=await fileToBase64(Module['downloadFile']('/data/screenshots/'+_0x210763)),_0x1f973a=embedTextInPngFile(_0x99f584,formatDateTime(Date[_0x3e72c0(0x123)]()),_0x210763);Module['uploadAll'](_0x1f973a,()=>{const _0x1fb626=_0x3e72c0;localStorageFile(),Module[_0x1fb626(0xed)]();});}export async function dowloadScreenShot(_0x3d7c2f){const _0x3d8ab2=a0_0x3c4a4e;try{const _0x6d1bff=await fileToBase64(Module[_0x3d8ab2(0x11e)](_0x3d7c2f));return _0x6d1bff;}catch{}}export async function captureOCR(_0x4c95e1){const _0x278deb=a0_0x3c4a4e;Module[_0x278deb(0x108)](_0x4c95e1);const _0x4119ab=Module[_0x278deb(0x11e)]('/data/screenshots/'+_0x4c95e1);return _0x4119ab;}export async function setFastForwardMultiplier(_0x54a00c){const _0x142013=a0_0x3c4a4e;Module[_0x142013(0x12d)](_0x54a00c);}export function uploadCheats(_0x5bd3b0,_0x90b043,_0x45a380,_0x52633c,_0x42b1dc){const _0x1115b7=a0_0x3c4a4e;Module[_0x1115b7(0x121)](_0x5bd3b0,()=>{const _0x442e6f=_0x1115b7;Module['autoLoadCheats'](),setTimeout(()=>{const _0xf91da8=a0_0x2394;Module[_0xf91da8(0xed)]();},0x1f4),_0x52633c&&(localStorage[_0x442e6f(0x148)](_0x90b043+_0x442e6f(0x144),_0x45a380),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x42b1dc[_0x442e6f(0x115)]=localStorage[_0x442e6f(0x10f)](_0x90b043+'_savedCheats'||_0x442e6f(0x116));});}export function setVolume(_0x729fb2){const _0x3f10fb=a0_0x3c4a4e;Module[_0x3f10fb(0x120)](_0x729fb2);}