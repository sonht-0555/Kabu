const a0_0x145ac0=a0_0x7419;(function(_0xc2cb,_0x307e7c){const _0xa36e73=a0_0x7419,_0x5294af=_0xc2cb();while(!![]){try{const _0x14174c=parseInt(_0xa36e73(0x1bc))/0x1*(-parseInt(_0xa36e73(0x1c9))/0x2)+-parseInt(_0xa36e73(0x1ba))/0x3*(parseInt(_0xa36e73(0x1d9))/0x4)+parseInt(_0xa36e73(0x20d))/0x5+-parseInt(_0xa36e73(0x1e0))/0x6+-parseInt(_0xa36e73(0x1d3))/0x7+-parseInt(_0xa36e73(0x1d0))/0x8+parseInt(_0xa36e73(0x1d1))/0x9;if(_0x14174c===_0x307e7c)break;else _0x5294af['push'](_0x5294af['shift']());}catch(_0x29aab2){_0x5294af['push'](_0x5294af['shift']());}}}(a0_0x56b1,0x77615));import a0_0x52acb7 from'../core/1.1.0/mgba.js';import a0_0x3776c8 from'../core/2.0.0/mgba.js';import*as a0_0x4fc321 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x52acb7,'2.0.0':a0_0x3776c8};let currentVersion=localStorage[a0_0x145ac0(0x211)](a0_0x145ac0(0x1fb))||a0_0x145ac0(0x21d),mGBA=versions[currentVersion];document[a0_0x145ac0(0x1ac)](a0_0x145ac0(0x1fb))['textContent']='Wasm_©'+currentVersion,document[a0_0x145ac0(0x1ac)]('GBAver')[a0_0x145ac0(0x1cc)]('click',()=>{const _0x4567c2=a0_0x145ac0,_0x3aa7e6=Object[_0x4567c2(0x1d2)](versions);let _0x49517c=_0x3aa7e6[_0x4567c2(0x1dc)](currentVersion);currentVersion=_0x3aa7e6[(_0x49517c+0x1)%_0x3aa7e6['length']],localStorage[_0x4567c2(0x201)]('GBAver',currentVersion),document[_0x4567c2(0x1ac)](_0x4567c2(0x1fb))[_0x4567c2(0x205)]=_0x4567c2(0x209)+currentVersion;});const Module={'canvas':document[a0_0x145ac0(0x1ac)](a0_0x145ac0(0x1b8))};function initializeCore(_0x76dee5,_0x536a2d){const _0x26d20a=a0_0x145ac0;_0x76dee5(_0x536a2d)[_0x26d20a(0x203)](function(_0xa79734){const _0x104207=_0x26d20a;_0xa79734[_0x104207(0x1ad)]();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x145ac0(0x1ac)]('canvas'),controlSetting=document['getElementById'](a0_0x145ac0(0x1be));function handleVisibilityChange(_0x4f4e5a){const _0x3e764f=a0_0x145ac0;document[_0x3e764f(0x1e8)]===_0x3e764f(0x1f9)||_0x4f4e5a?.[_0x3e764f(0x1fc)]===_0x3e764f(0x1e6)||_0x4f4e5a?.[_0x3e764f(0x1b5)]?(Module[_0x3e764f(0x1f0)](),pauseGame(),canvas[_0x3e764f(0x1ed)][_0x3e764f(0x1c3)]('visible')):(setTimeout(()=>{const _0x21925b=_0x3e764f;canvas[_0x21925b(0x1ed)]['remove']('visible');},0x258),controlSetting[_0x3e764f(0x1ed)]['contains'](_0x3e764f(0x1df))&&resumeGame());}async function statusShow(){const _0x54343a=a0_0x145ac0;document['addEventListener'](_0x54343a(0x1e2),handleVisibilityChange),document['addEventListener']('visibilitychange',handleVisibilityChange),window['addEventListener'](_0x54343a(0x1e6),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x4fc321[_0x54343a(0x1ce)](parseInt(await getData(gameName,'0',_0x54343a(0x1bf)))),await delay(0xc8),await Module[_0x54343a(0x21f)](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x54343a(0x1e1)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x40e348=a0_0x145ac0;await ledSave('#20A5A6'),await Module[_0x40e348(0x218)](0x0),await Module['FSSync'](),await screenShot(0x0),console['log'](_0x40e348(0x1c8)+ ++countAutoSave+_0x40e348(0x1e9));}async function saveStateInCloud(){const _0x4147ef=a0_0x145ac0,_0x31b3e0=gameName[_0x4147ef(0x1ae)](/\.(zip|gb|gbc|gba)$/,_0x4147ef(0x1e3)),_0x5bc7fe=localStorage['getItem']('uId');navigator['onLine']&&(_0x5bc7fe&&(await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x31b3e0,Module[_0x4147ef(0x223)](_0x4147ef(0x1db)+_0x31b3e0),'state'),await lockNoti('',_0x4147ef(0x1b4)+ ++countUpload+'\x20time(s)',0x7d0)));}function startTimer(){let [_0x41b60a,_0x528cba,_0x1613d1,_0x534689,_0x30fa5a]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x4a3ef3=a0_0x7419;_0x1613d1++,_0x534689++,_0x30fa5a++;if(_0x1613d1===0x3c)[_0x1613d1,_0x528cba]=[0x0,_0x528cba+0x1];if(_0x528cba===0x3c)[_0x528cba,_0x41b60a]=[0x0,_0x41b60a+0x1];document[_0x4a3ef3(0x1ac)]('timer')[_0x4a3ef3(0x205)]=_0x41b60a+'h'+_0x528cba[_0x4a3ef3(0x1fd)]()[_0x4a3ef3(0x206)](0x2,'0')+'.'+_0x1613d1[_0x4a3ef3(0x1fd)]()[_0x4a3ef3(0x206)](0x2,'0');_0x534689===0x3c&&(saveStatePeriodically(),_0x534689=0x0);;_0x30fa5a===0x708&&(saveStateInCloud(),_0x30fa5a=0x0);;},0x3e8);}export async function uploadGame(_0x2bc0df){const _0x148c21=a0_0x145ac0,_0x484bbf=_0x2bc0df['files'][0x0];Module[_0x148c21(0x217)](_0x484bbf,()=>{const _0xbd00c2=_0x148c21;Module[_0xbd00c2(0x1f0)]();});}export async function loadGame(_0x4304e6){const _0x1474c6=a0_0x145ac0,_0x2a4142=_0x4304e6[_0x1474c6(0x1ae)](/\.(gba|gbc|gb|zip)$/,_0x1474c6(0x1e3)),_0x20b9de=Module[_0x1474c6(0x1f8)](_0x1474c6(0x1eb))['filter'](_0x38f5a4=>_0x38f5a4!=='.'&&_0x38f5a4!=='..');intro[_0x1474c6(0x1ed)]['add'](_0x1474c6(0x1dd)),errorLogElements[0x0]['style']['bottom']='0',ingame[_0x1474c6(0x1ed)][_0x1474c6(0x20f)](_0x1474c6(0x1dd)),_0x4304e6[_0x1474c6(0x210)](_0x1474c6(0x1d5))||_0x4304e6[_0x1474c6(0x210)](_0x1474c6(0x204))?(canvas[_0x1474c6(0x1ed)][_0x1474c6(0x1c3)]('gbc'),areaTrans[_0x1474c6(0x1ed)]['add'](_0x1474c6(0x1c5)),localStorage['setItem'](_0x1474c6(0x1cd),_0x1474c6(0x1d4)+(window[_0x1474c6(0x1ef)]-0xe6)+','+(window[_0x1474c6(0x1ef)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x1474c6(0x1cd),_0x1474c6(0x1d4)+(window[_0x1474c6(0x1ef)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x20b9de[_0x1474c6(0x216)](_0x2a4142)?(await Module[_0x1474c6(0x1c0)](_0x1474c6(0x1e7)+_0x4304e6),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await delay(0x64),await Module['loadState'](0x0),await shaderData())):(await Module[_0x1474c6(0x1c0)](_0x1474c6(0x1e7)+_0x4304e6),await shaderData()),await statusShow();}export async function saveState(_0x1940a6){await Module['saveState'](_0x1940a6);}export async function loadState(_0x2c9009){const _0x417526=a0_0x145ac0;await Module[_0x417526(0x1f5)](_0x2c9009);}export async function downloadFile(_0x3199f2,_0x5b3eda){const _0x1de767=a0_0x145ac0,_0x28ba15=Module[_0x1de767(0x223)](_0x3199f2),_0x5cbbb7=document[_0x1de767(0x212)]('a');document[_0x1de767(0x1de)][_0x1de767(0x1c6)](_0x5cbbb7),_0x5cbbb7[_0x1de767(0x1f2)]=_0x5b3eda;const _0x204084=new Blob([_0x28ba15],{'type':_0x1de767(0x219)});_0x5cbbb7[_0x1de767(0x1ec)]=URL[_0x1de767(0x207)](_0x204084),_0x5cbbb7['click'](),URL[_0x1de767(0x1b7)](_0x204084),_0x5cbbb7[_0x1de767(0x20f)]();}export function downloadFileInCloud(_0x320962){const _0x5d3f00=a0_0x145ac0;try{const _0x3b5d00=Module[_0x5d3f00(0x223)](_0x320962);return _0x3b5d00;}catch(_0xa02049){return null;}}export async function uploadFileInCloud(_0x270471){const _0x3b469d=a0_0x145ac0;Module[_0x3b469d(0x214)](_0x270471,async()=>{const _0x392c71=_0x3b469d;localStorageFile(),await Module[_0x392c71(0x1f0)]();});}export async function uploadFile(_0x5a93f9){const _0x2ded14=a0_0x145ac0,_0x457f75=_0x5a93f9[_0x2ded14(0x1d7)][0x0];Module[_0x2ded14(0x214)](_0x457f75,async()=>{const _0x497a25=_0x2ded14;localStorageFile(),await Module[_0x497a25(0x1f0)]();});}export async function editFile(_0x419338,_0x3bf7b7,_0x107c68){const _0x1855f5=a0_0x145ac0;await Module[_0x1855f5(0x1fe)](_0x419338,_0x3bf7b7,_0x107c68);}export async function deleteFile(_0x108c42){const _0x19ed29=a0_0x145ac0;try{return await Module[_0x19ed29(0x222)](_0x108c42),!![];}catch(_0x2ef425){return console['error'](_0x108c42),null;}}export function listFiles(_0x1edff0){const _0x23e3b5=a0_0x145ac0,_0x16e892=Module[_0x23e3b5(0x1f8)](_0x1edff0)['filter'](_0x416fe2=>_0x416fe2!=='.'&&_0x416fe2!=='..');return _0x16e892;}export function listGame(){const _0x56c14b=a0_0x145ac0,_0x524883=Module['listRoms']()[_0x56c14b(0x1f4)](_0x5600d2=>_0x5600d2!=='.'&&_0x5600d2!=='..');return _0x524883;}export function listSave(){const _0x2cb0e9=a0_0x145ac0,_0xab3092=Module[_0x2cb0e9(0x221)]()[_0x2cb0e9(0x1f4)](_0x2021e5=>_0x2021e5!=='.'&&_0x2021e5!=='..');return _0xab3092;}export function listState(){const _0x1e1c81=a0_0x145ac0,_0x24f071=Module[_0x1e1c81(0x1af)]()[_0x1e1c81(0x1f4)](_0x567082=>_0x567082!=='.'&&_0x567082!=='..');return _0x24f071;}export function listCheat(){const _0x50a3f5=a0_0x145ac0,_0x424cec=Module[_0x50a3f5(0x208)]()[_0x50a3f5(0x1f4)](_0x13303f=>_0x13303f!=='.'&&_0x13303f!=='..');return _0x424cec;}export function listScreenshot(){const _0x7cdb32=a0_0x145ac0,_0x45156c=Module[_0x7cdb32(0x1c4)]()[_0x7cdb32(0x1f4)](_0xde8410=>_0xde8410!=='.'&&_0xde8410!=='..');return _0x45156c;}export function fileSize(_0x5a8d5b){const _0x26bb83=Module['fileSize'](_0x5a8d5b);return _0x26bb83;}export async function resumeGame(){const _0x28cdbe=a0_0x145ac0;Module[_0x28cdbe(0x1b2)](),Module[_0x28cdbe(0x21f)](),notiMessage(_0x28cdbe(0x1f3),0x7d0);}export async function pauseGame(){const _0x5d2d79=a0_0x145ac0;Module[_0x5d2d79(0x215)](),Module[_0x5d2d79(0x21f)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x3fd6fb){const _0x1ba414=a0_0x145ac0;Module[_0x1ba414(0x1b3)](_0x3fd6fb);}export async function buttonUnpress(_0x4961bd){Module['buttonUnpress'](_0x4961bd);}export async function screenShot(_0x451909){const _0x56d047=a0_0x145ac0,_0x48335f=gameName[_0x56d047(0x1ae)](/\.(gba|gbc|gb|zip)$/,'_'+_0x451909+_0x56d047(0x1d8)),_0x5ca066=await getData(gameName,_0x451909,_0x56d047(0x1b6))||'';console['log'](_0x5ca066),await Module[_0x56d047(0x1c1)](_0x48335f),await setData(gameName,_0x451909,_0x56d047(0x1bb),formatDateTime(Date[_0x56d047(0x20b)]()),_0x5ca066);}export async function dowloadScreenShot(_0x1fe625){try{const _0x403fad=await fileToBase64(Module['downloadFile'](_0x1fe625));return _0x403fad;}catch{}}export async function captureOCR(_0x18a67b){const _0x141810=a0_0x145ac0;Module['screenshot'](_0x18a67b);const _0xe15be=Module[_0x141810(0x223)](_0x141810(0x224)+_0x18a67b);return _0xe15be;}function a0_0x56b1(){const _0xa07f77=['listCheats','Wasm_©','led03','now','led05','1178260CbTSkn','map','remove','endsWith','getItem','createElement','setVolume','uploadAll','pauseGame','includes','uploadRom','saveState','application/octet-stream','encode','length','led06','1.1.0','exec','SDL2','fill','listSaves','deleteFile','downloadFile','/data/screenshots/','match','tEXtComment\x00','getElementById','FSInit','replace','listStates','split','entries','resumeGame','buttonPress','Cloud\x20upload\x20','persisted','All','revokeObjectURL','canvas','led07','800796ITvtjn','saveTime','13BpzOMy','lastIndexOf','control-setting','turboState','loadGame','screenshot','0.4','add','listScreenshots','gbc1','appendChild','image/png','Auto\x20save\x20','148562fuxFjg','error','opacity','addEventListener','screenSize','turboF','\x20|\x20','3316920xtYpEg','25091154XDvpNS','keys','5641503baACyN','0,0,','.gbc','join','files','.png','4iQbrga','Error\x20ledSave:','/data/states/','indexOf','disable','body','visible','488688ucYSCY','slotStateSaved','pagehide','.ss0','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','noti-mess','beforeunload','/data/games/','visibilityState','\x20time(s)','substring','states','href','classList','led01','innerWidth','FSSync','style','download','Resumed!','filter','loadState','rgba(245,\x20232,\x20209,\x200.4)','charCodeAt','listFiles','hidden','setFastForwardMultiplier','GBAver','type','toString','editFileName','led04','trim','setItem','concat','then','.gb','textContent','padStart','createObjectURL'];a0_0x56b1=function(){return _0xa07f77;};return a0_0x56b1();}export async function setFastForwardMultiplier(_0x1c09e6){const _0x5d55f3=a0_0x145ac0;Module[_0x5d55f3(0x1fa)](_0x1c09e6);}export async function uploadCheats(_0xfa4a6a){const _0x937842=a0_0x145ac0;Module['autoLoadCheats'](),Module[_0x937842(0x214)](_0xfa4a6a,async()=>{});}export function setVolume(_0x4d818c){const _0x1b4e31=a0_0x145ac0;Module[_0x1b4e31(0x213)](_0x4d818c);}export async function setData(_0x496c15,_0x39be53,_0x5ea645,_0xea5c0d,_0x49fdc7=''){const _0x334dd9=a0_0x145ac0,_0x5d6827=_0x496c15[_0x334dd9(0x1ae)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x44017b='/data/screenshots/'+_0x5d6827+'_'+_0x39be53+_0x334dd9(0x1d8);let _0x3e1d4d;try{_0x3e1d4d=await fileToBase64(Module[_0x334dd9(0x223)](_0x44017b));}catch(_0xa1b23e){await Module['screenshot'](_0x5d6827+'_'+_0x39be53+'.png'),await delay(0xc8),_0x3e1d4d=await fileToBase64(Module['downloadFile'](_0x44017b));}let _0x1303ba=atob(_0x3e1d4d['split'](',')[0x1]),_0x1094a4=_0x334dd9(0x1ab),_0x24e176=_0x1303ba['indexOf'](_0x1094a4),_0x193daa={};if(_0x24e176!==-0x1||_0x49fdc7[_0x334dd9(0x200)]()!==''){let _0x34237c=_0x24e176!==-0x1?_0x1303ba[_0x334dd9(0x1ea)](_0x24e176+_0x1094a4[_0x334dd9(0x21b)]):_0x49fdc7,_0x383349=/(\w+)\s*:\s*([^|]*)/g,_0x36e8d1;while((_0x36e8d1=_0x383349[_0x334dd9(0x21e)](_0x34237c))!==null){_0x193daa[_0x36e8d1[0x1]['trim']()]=_0x36e8d1[0x2][_0x334dd9(0x200)]();}_0x24e176!==-0x1&&(_0x1303ba=_0x1303ba['substring'](0x0,_0x24e176));}_0x193daa[_0x5ea645]=_0xea5c0d;let _0xbc70ca=Object[_0x334dd9(0x1b1)](_0x193daa)[_0x334dd9(0x20e)](([_0x56edca,_0x1636f3])=>_0x56edca+'\x20:\x20'+_0x1636f3)[_0x334dd9(0x1d6)](_0x334dd9(0x1cf)),_0x35aabd=new TextEncoder()[_0x334dd9(0x21a)](_0x1094a4+'\x20'+_0xbc70ca),_0x5c1787=new Uint8Array([..._0x1303ba][_0x334dd9(0x20e)](_0x2be068=>_0x2be068[_0x334dd9(0x1f7)](0x0))[_0x334dd9(0x202)]([..._0x35aabd])),_0x310c62=new File([new Blob([_0x5c1787],{'type':_0x334dd9(0x1c7)})],_0x5d6827+'_'+_0x39be53+_0x334dd9(0x1d8),{'type':'image/png'});Module[_0x334dd9(0x214)](_0x310c62,async()=>{});}export async function getData(_0x4d0d7d,_0x35636b,_0x1c2312){const _0x197595=a0_0x145ac0;try{const _0x20d30d=_0x4d0d7d[_0x197595(0x1ae)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x394462=_0x197595(0x224)+_0x20d30d+'_'+_0x35636b+_0x197595(0x1d8);let _0x13ca93;try{_0x13ca93=await fileToBase64(Module[_0x197595(0x223)](_0x394462));}catch(_0x257011){return null;}let _0x267204=atob(_0x13ca93[_0x197595(0x1b0)](',')[0x1]),_0x3c6f70=_0x197595(0x1ab),_0x11f43b=_0x267204[_0x197595(0x1dc)](_0x3c6f70);if(_0x11f43b!==-0x1){let _0x2a9d92=_0x267204[_0x197595(0x1ea)](_0x11f43b+_0x3c6f70[_0x197595(0x21b)]);if(_0x1c2312===_0x197595(0x1b6))return _0x2a9d92['trim']();let _0x322703=new RegExp(_0x1c2312+_0x197595(0x1e4)),_0x2579f7=_0x2a9d92[_0x197595(0x225)](_0x322703);if(_0x2579f7)return _0x2579f7[0x1]['trim']();}}catch(_0x44944f){return console['error']({'romName':_0x4d0d7d,'slot':_0x35636b,'type':_0x1c2312}),null;}}export async function ledSave(_0x3f818e){const _0x5890dc=a0_0x145ac0,_0x24c766=parseInt(await getData(gameName,'0',_0x5890dc(0x1e1))),_0x4f6978=_0x24c766===0x1?_0x5890dc(0x1ee):_0x24c766===0x2?'led02':_0x24c766===0x3?_0x5890dc(0x20a):_0x24c766===0x4?_0x5890dc(0x1ff):_0x24c766===0x5?_0x5890dc(0x20c):_0x24c766===0x6?_0x5890dc(0x21c):_0x24c766===0x7?_0x5890dc(0x1b9):'led00';try{for(let _0x4f656e=0x0;_0x4f656e<=0x7;_0x4f656e++){document[_0x5890dc(0x1ac)]('led0'+_0x4f656e)[_0x5890dc(0x1f1)][_0x5890dc(0x220)]=_0x5890dc(0x1f6);}await delay(0x3e8);for(let _0x1f3f02=0x0;_0x1f3f02<=0x7;_0x1f3f02++){document[_0x5890dc(0x1ac)]('led0'+_0x1f3f02)['style'][_0x5890dc(0x220)]=_0x5890dc(0x1f6);}document[_0x5890dc(0x1ac)](_0x4f6978)[_0x5890dc(0x1f1)][_0x5890dc(0x220)]=_0x3f818e;}catch(_0x4e62e6){console[_0x5890dc(0x1ca)](_0x5890dc(0x1da),_0x4e62e6);}};export async function notiMessage(_0x5171f6,_0x5bcf48,_0x4176ff=![]){const _0x301dca=a0_0x145ac0;var _0x226d84=document[_0x301dca(0x1ac)](_0x301dca(0x1e5));const _0x214a74=parseInt(await getData(gameName,'0',_0x301dca(0x1e1)))||0x0;_0x226d84['style'][_0x301dca(0x1cb)]===_0x301dca(0x1c2)&&(clearTimeout(messageTimeout),_0x226d84['style'][_0x301dca(0x1cb)]='0'),_0x226d84[_0x301dca(0x205)]=_0x5171f6,_0x226d84[_0x301dca(0x1f1)][_0x301dca(0x1cb)]=_0x301dca(0x1c2),messageTimeout=setTimeout(()=>{const _0x3f822a=_0x301dca;_0x226d84[_0x3f822a(0x205)]='['+_0x214a74+']\x20'+gameName[_0x3f822a(0x1ea)](0x0,gameName[_0x3f822a(0x1bd)]('.')),_0x226d84[_0x3f822a(0x1f1)][_0x3f822a(0x1cb)]=_0x3f822a(0x1c2);},_0x5bcf48),_0x4176ff&&(canvas['classList'][_0x301dca(0x1c3)]('visible'),setTimeout(()=>{const _0x333d0d=_0x301dca;canvas['classList'][_0x333d0d(0x20f)](_0x333d0d(0x1df));},0x258));}export async function FSSync(){Module['FSSync']();}function a0_0x7419(_0x4da5e3,_0x413b5f){const _0x56b10e=a0_0x56b1();return a0_0x7419=function(_0x741999,_0x245eb9){_0x741999=_0x741999-0x1ab;let _0x2fe907=_0x56b10e[_0x741999];return _0x2fe907;},a0_0x7419(_0x4da5e3,_0x413b5f);}export const rewind=_0x5a400b=>Module['toggleRewind']?.(_0x5a400b)||null;