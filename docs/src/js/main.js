const a0_0x3246d2=a0_0x5972;(function(_0x30b93b,_0x11244a){const _0x4afcc8=a0_0x5972,_0xc4f0cd=_0x30b93b();while(!![]){try{const _0x394ffd=-parseInt(_0x4afcc8(0xbc))/0x1*(parseInt(_0x4afcc8(0xc7))/0x2)+parseInt(_0x4afcc8(0xc9))/0x3+parseInt(_0x4afcc8(0xba))/0x4+-parseInt(_0x4afcc8(0xcc))/0x5*(-parseInt(_0x4afcc8(0xff))/0x6)+-parseInt(_0x4afcc8(0xfd))/0x7*(-parseInt(_0x4afcc8(0xcd))/0x8)+-parseInt(_0x4afcc8(0x100))/0x9+-parseInt(_0x4afcc8(0xd9))/0xa;if(_0x394ffd===_0x11244a)break;else _0xc4f0cd['push'](_0xc4f0cd['shift']());}catch(_0x552ae9){_0xc4f0cd['push'](_0xc4f0cd['shift']());}}}(a0_0x5f1c,0xd8409));import a0_0x416f44 from'../core/mgba.js';import*as a0_0x5eb52c from'./gamepad.js';import{localStorageFile}from'./storage.js';function a0_0x5f1c(){const _0xed01b9=['getItem','disable','FSSync','now','loadGame','2KQfjmT','text/plain','4869453fNsaHV','/data/screenshots/','toString','17530QpASnB','16hezTiv','onLine','buttonPress','setFastForwardMultiplier','name','timer','#20A5A6','/data/states/','listGames','Cheat\x20uploaded\x20successfully:','resumeGame','getElementById','6361910HrqvMO','Cheat\x20Enabled!','Off','uploadRom','files','error','remove','hidden','_dateState','visibilitychange','persisted','innerWidth','\x20time(s)','SDL2','beforeunload','textContent','#E0C068','pauseGame','.gba','gameName','.gb','canvas','deleteFile','downloadFile','_imageState0','/data/games/','then','padStart','saveState','turboF','autoLoadCheats','Cloud\x20upload\x20','createObjectURL','addEventListener','log','listCheats','5458985LyakDr','Online!','282iJqTih','9981441RZqUbo','_dateState0','fileSize','_imageState','.ss0','createElement','appendChild','add','uploadSaveOrSaveState','uploadCheats','type','replace','screenSize','loadState','Resumed!','_savedCheats','revokeObjectURL','bottom','setItem','classList','0,0,','visible','turboState','listSaves','gbc','_slot0.txt','1469228EsAnwq','endsWith','1083941JyULpS','body','Save/State\x20uploaded\x20successfully:','gbc1','visibilityState','No\x20screenshot!'];a0_0x5f1c=function(){return _0xed01b9;};return a0_0x5f1c();}import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x3246d2(0xd8)](a0_0x3246d2(0xee))};function a0_0x5972(_0x51bfd6,_0x3bac4f){const _0x5f1c21=a0_0x5f1c();return a0_0x5972=function(_0x5972ac,_0xaf6725){_0x5972ac=_0x5972ac-0xa8;let _0x2ff471=_0x5f1c21[_0x5972ac];return _0x2ff471;},a0_0x5972(_0x51bfd6,_0x3bac4f);}function initializeCore(_0x154655,_0x44ddcf){const _0x2ba080=a0_0x3246d2;_0x154655(_0x44ddcf)[_0x2ba080(0xf3)](function(_0x5d4089){_0x5d4089['FSInit']();});}initializeCore(a0_0x416f44,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x3246d2(0xd8)](a0_0x3246d2(0xee)),savedTurboState=localStorage[a0_0x3246d2(0xc2)](a0_0x3246d2(0xb6)),controlSetting=document[a0_0x3246d2(0xd8)]('control-setting');function handleVisibilityChange(_0x5a4430){const _0x1121c4=a0_0x3246d2;document[_0x1121c4(0xc0)]===_0x1121c4(0xe0)||_0x5a4430?.[_0x1121c4(0xaa)]===_0x1121c4(0xe7)||_0x5a4430?.[_0x1121c4(0xe3)]?(pauseGame(),canvas['classList']['add'](_0x1121c4(0xb5))):(setTimeout(()=>{const _0x26fbc8=_0x1121c4;canvas[_0x26fbc8(0xb3)][_0x26fbc8(0xdf)]('visible');},0x258),controlSetting[_0x1121c4(0xb3)]['contains'](_0x1121c4(0xb5))&&resumeGame());}async function statusShow(){const _0x568f19=a0_0x3246d2;document['addEventListener']('pagehide',handleVisibilityChange),document[_0x568f19(0xfa)](_0x568f19(0xe2),handleVisibilityChange),window[_0x568f19(0xfa)](_0x568f19(0xe7),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x5eb52c[_0x568f19(0xf6)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x568f19(0xc2)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x306066=a0_0x3246d2;await ledSave(_0x306066(0xd3)),await Module[_0x306066(0xf5)](0x0),await Module[_0x306066(0xc4)](),await screenShot(0x0),console[_0x306066(0xfb)]('Auto\x20save\x20'+ ++countAutoSave+_0x306066(0xe5));}async function saveStateInCloud(){const _0x4939f0=a0_0x3246d2,_0x4022ec=localStorage['getItem']('gameName'),_0x37acf3=_0x4022ec[_0x4939f0(0xab)](_0x4939f0(0xeb),_0x4939f0(0x104)),_0x1c1de3=localStorage[_0x4939f0(0xc2)]('uId'),_0x2e4538=localStorage[_0x4939f0(0xc2)](_0x4022ec+_0x4939f0(0xf1)),_0x1f7c21=localStorage[_0x4939f0(0xc2)](_0x4022ec+_0x4939f0(0x101));if(navigator[_0x4939f0(0xce)]){if(_0x1c1de3){await ledSave(_0x4939f0(0xe9)),await delay(0x3e8),await dpUploadFile(_0x37acf3,Module[_0x4939f0(0xf0)](_0x4939f0(0xd4)+_0x37acf3));if(_0x2e4538!==null){const _0x5cb052=_0x2e4538+'\x0a\x0a'+_0x1f7c21,_0x30c6d9=new Blob([_0x5cb052],{'type':_0x4939f0(0xc8)});await dpUploadFile(_0x4022ec+_0x4939f0(0xb9),_0x30c6d9);}else console[_0x4939f0(0xfb)](_0x4939f0(0xc1));await lockNoti('',_0x4939f0(0xf8)+ ++countUpload+_0x4939f0(0xe5),0x7d0);}else console['log']('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0x4939f0(0xfb)](_0x4939f0(0xfe));}function startTimer(){let [_0xdffc7f,_0x39a187,_0x106798,_0x4f83d4,_0x16d0a3]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x188f0a=a0_0x5972;_0x106798++,_0x4f83d4++,_0x16d0a3++;if(_0x106798===0x3c)[_0x106798,_0x39a187]=[0x0,_0x39a187+0x1];if(_0x39a187===0x3c)[_0x39a187,_0xdffc7f]=[0x0,_0xdffc7f+0x1];document[_0x188f0a(0xd8)](_0x188f0a(0xd2))[_0x188f0a(0xe8)]=_0xdffc7f+'h'+_0x39a187['toString']()[_0x188f0a(0xf4)](0x2,'0')+'.'+_0x106798[_0x188f0a(0xcb)]()[_0x188f0a(0xf4)](0x2,'0');_0x4f83d4===0x3c&&(saveStatePeriodically(),_0x4f83d4=0x0);;_0x4f83d4===0xe10&&(saveStateInCloud(),_0x16d0a3=0x0);;},0x3e8);}export async function uploadGame(_0x59a74e){const _0xf488c2=a0_0x3246d2,_0x4d4530=_0x59a74e[_0xf488c2(0xdd)][0x0];Module[_0xf488c2(0xdc)](_0x4d4530,()=>{Module['FSSync']();});}export async function loadGame(_0x3b7780){const _0x25ee3d=a0_0x3246d2,_0x74f508=_0x3b7780[_0x25ee3d(0xab)](/\.(gba|gbc|gb|zip)$/,_0x25ee3d(0x104)),_0xd0512d=Module['listStates']();intro[_0x25ee3d(0xb3)][_0x25ee3d(0x107)](_0x25ee3d(0xc3)),errorLogElements[0x0]['style'][_0x25ee3d(0xb1)]='0',ingame[_0x25ee3d(0xb3)][_0x25ee3d(0xdf)](_0x25ee3d(0xc3)),_0x3b7780[_0x25ee3d(0xbb)]('.gbc')||_0x3b7780[_0x25ee3d(0xbb)](_0x25ee3d(0xed))?(canvas['classList'][_0x25ee3d(0x107)](_0x25ee3d(0xb8)),areaTrans[_0x25ee3d(0xb3)][_0x25ee3d(0x107)](_0x25ee3d(0xbf)),localStorage[_0x25ee3d(0xb2)](_0x25ee3d(0xac),_0x25ee3d(0xb4)+(window['innerWidth']-0xe6)+','+(window[_0x25ee3d(0xe4)]-0xe6)*0x9/0xa)):localStorage[_0x25ee3d(0xb2)](_0x25ee3d(0xac),_0x25ee3d(0xb4)+(window['innerWidth']-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0xd0512d['includes'](_0x74f508)?(await Module[_0x25ee3d(0xc6)](_0x25ee3d(0xf2)+_0x3b7780),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module[_0x25ee3d(0xad)](0x0),localStorage[_0x25ee3d(0xb2)]('gameName',_0x3b7780),console[_0x25ee3d(0xfb)](_0x3b7780))):(await Module[_0x25ee3d(0xc6)](_0x25ee3d(0xf2)+_0x3b7780),localStorage[_0x25ee3d(0xb2)](_0x25ee3d(0xec),_0x3b7780)),await statusShow();}export async function saveState(_0x2d1297){const _0x3e91a6=a0_0x3246d2;await Module[_0x3e91a6(0xf5)](_0x2d1297),await Module[_0x3e91a6(0xc4)]();}export async function loadState(_0x13387b){const _0x4ae9cc=a0_0x3246d2;await Module[_0x4ae9cc(0xad)](_0x13387b);}export async function downloadFile(_0xe6a71e,_0x3c8f10){const _0x1dfb95=a0_0x3246d2,_0x47d4e2=Module[_0x1dfb95(0xf0)](_0xe6a71e),_0x21d334=document[_0x1dfb95(0x105)]('a');document[_0x1dfb95(0xbd)][_0x1dfb95(0x106)](_0x21d334),_0x21d334['download']=_0x3c8f10;const _0x47cf9e=new Blob([_0x47d4e2],{'type':'application/octet-stream'});_0x21d334['href']=URL[_0x1dfb95(0xf9)](_0x47cf9e),_0x21d334['click'](),URL[_0x1dfb95(0xb0)](_0x47cf9e),_0x21d334[_0x1dfb95(0xdf)]();}export function downloadFileInCloud(_0x1637cf){const _0x169ab0=Module['downloadFile'](_0x1637cf);return _0x169ab0;}export async function uploadFile(_0x408b85){const _0x145510=a0_0x3246d2,_0x100717=_0x408b85[_0x145510(0xdd)][0x0];Module[_0x145510(0xa8)](_0x100717,()=>{const _0x119d35=_0x145510;Module[_0x119d35(0xc4)]();});}export async function editFile(_0x29171b,_0x41e949,_0x471702){const _0x2d3016=a0_0x3246d2;await Module['editFileName'](_0x29171b,_0x41e949,_0x471702),await Module[_0x2d3016(0xc4)]();}export async function deleteFile(_0xec8677){const _0x12b3e7=a0_0x3246d2;await Module[_0x12b3e7(0xef)](_0xec8677),await Module[_0x12b3e7(0xc4)]();}export function listGame(){const _0x3f2726=a0_0x3246d2,_0x1788c9=Module[_0x3f2726(0xd5)]();return _0x1788c9;}export function listSave(){const _0x25ad22=a0_0x3246d2,_0x155b7e=Module[_0x25ad22(0xb7)]();return _0x155b7e;}export function listState(){const _0xda47b1=Module['listStates']();return _0xda47b1;}export function listCheat(){const _0xb73c31=a0_0x3246d2,_0x253051=Module[_0xb73c31(0xfc)]();return _0x253051;}export function listScreenshot(){const _0x2e7208=Module['listScreenshots']();return _0x2e7208;}export function fileSize(_0x5d3496){const _0x2f0504=a0_0x3246d2,_0x54bb28=Module[_0x2f0504(0x102)](_0x5d3496);return _0x54bb28;}export async function uploadCheat(_0xabc50f){const _0x12d35e=a0_0x3246d2;try{const _0x259be2=_0xabc50f[_0x12d35e(0xdd)][0x0];await Module[_0x12d35e(0xa9)](_0x259be2,()=>{const _0x32da91=_0x12d35e;console['log'](_0x32da91(0xd6),_0x259be2[_0x32da91(0xd1)]),localStorageFile(),Module[_0x32da91(0xc4)]();});}catch(_0x15f5ad){console[_0x12d35e(0xde)]('Error\x20uploadCheat:',_0x15f5ad);}}export async function uploadSavSta(_0x18b3dc){const _0x11dbe3=a0_0x3246d2;try{const _0x50f702=_0x18b3dc[_0x11dbe3(0xdd)][0x0];await Module[_0x11dbe3(0xa8)](_0x50f702,()=>{const _0x1a45dd=_0x11dbe3;console[_0x1a45dd(0xfb)](_0x1a45dd(0xbe),_0x50f702[_0x1a45dd(0xd1)]),localStorageFile(),Module[_0x1a45dd(0xc4)]();});}catch(_0x2a4b08){console[_0x11dbe3(0xde)]('Error\x20uploadSavSta:',_0x2a4b08);}}export async function uploadSaveOrSaveState(_0x286892){const _0x1f9af8=a0_0x3246d2;Module[_0x1f9af8(0xa8)](_0x286892,()=>{localStorageFile(),Module['FSSync']();});}export async function resumeGame(){const _0x49ad2e=a0_0x3246d2;Module[_0x49ad2e(0xd7)](),Module[_0x49ad2e(0xe6)](),notiMessage(_0x49ad2e(0xae),0x7d0);}export async function pauseGame(){const _0x462275=a0_0x3246d2;Module[_0x462275(0xea)](),Module[_0x462275(0xe6)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x9b74be){const _0x4f56b4=a0_0x3246d2;Module[_0x4f56b4(0xcf)](_0x9b74be);}export async function buttonUnpress(_0x5b900b){Module['buttonUnpress'](_0x5b900b);}export async function screenShot(_0x4d8946){const _0x2be8fc=a0_0x3246d2,_0x33f33d=localStorage[_0x2be8fc(0xc2)](_0x2be8fc(0xec)),_0x3179a4=_0x33f33d[_0x2be8fc(0xab)](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x3179a4+_0x4d8946+'.png'),await Module[_0x2be8fc(0xc4)]();const _0x482ed3=await fileToBase64(Module[_0x2be8fc(0xf0)](_0x2be8fc(0xca)+_0x3179a4+_0x4d8946+'.png')),_0x140179=Date[_0x2be8fc(0xc5)](),_0x1ea3a1=formatDateTime(_0x140179);localStorage[_0x2be8fc(0xb2)](_0x33f33d+_0x2be8fc(0xe1)+_0x4d8946,_0x1ea3a1),localStorage[_0x2be8fc(0xb2)](_0x33f33d+_0x2be8fc(0x103)+_0x4d8946,_0x482ed3);}export async function captureOCR(_0x3e14e9){const _0x568550=a0_0x3246d2;Module['screenshot'](_0x3e14e9);const _0x5ea932=Module['downloadFile'](_0x568550(0xca)+_0x3e14e9);return _0x5ea932;}export async function setFastForwardMultiplier(_0x197c32){const _0x280fee=a0_0x3246d2;Module[_0x280fee(0xd0)](_0x197c32);}export function uploadCheats(_0x2a66c9,_0x198acb,_0x4947ec,_0x1286f2,_0xbc2408){const _0x2628bb=a0_0x3246d2;Module[_0x2628bb(0xa9)](_0x2a66c9,()=>{const _0x2ad348=_0x2628bb;Module[_0x2ad348(0xf7)](),setTimeout(()=>{const _0x152db2=_0x2ad348;Module[_0x152db2(0xc4)]();},0x1f4),_0x1286f2&&(localStorage[_0x2ad348(0xb2)](_0x198acb+_0x2ad348(0xaf),_0x4947ec),notiMessage(_0x2ad348(0xda),0x5dc)),_0xbc2408['textContent']=localStorage['getItem'](_0x198acb+_0x2ad348(0xaf)||_0x2ad348(0xdb));});}