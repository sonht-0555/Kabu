const a0_0x1e9c4d=a0_0x2782;(function(_0x570620,_0x2683d2){const _0x123b86=a0_0x2782,_0x426b8c=_0x570620();while(!![]){try{const _0x5bf04a=parseInt(_0x123b86(0x11d))/0x1+parseInt(_0x123b86(0xc3))/0x2+parseInt(_0x123b86(0x118))/0x3+parseInt(_0x123b86(0xef))/0x4*(-parseInt(_0x123b86(0x109))/0x5)+parseInt(_0x123b86(0xff))/0x6*(-parseInt(_0x123b86(0xf7))/0x7)+parseInt(_0x123b86(0xbd))/0x8*(-parseInt(_0x123b86(0x110))/0x9)+parseInt(_0x123b86(0x125))/0xa;if(_0x5bf04a===_0x2683d2)break;else _0x426b8c['push'](_0x426b8c['shift']());}catch(_0x201486){_0x426b8c['push'](_0x426b8c['shift']());}}}(a0_0x2632,0x80653));import a0_0x1c0a52 from'../core/mgba.js';import*as a0_0xcf93d6 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x1e9c4d(0xf1)](a0_0x1e9c4d(0xd0))};function initializeCore(_0xf7688d,_0x4581d9){_0xf7688d(_0x4581d9)['then'](function(_0x5dc818){const _0x5489da=a0_0x2782;_0x5dc818[_0x5489da(0x10d)]();});}initializeCore(a0_0x1c0a52,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x1e9c4d(0xf1)](a0_0x1e9c4d(0xd0)),savedTurboState=localStorage[a0_0x1e9c4d(0x103)](a0_0x1e9c4d(0x11e)),controlSetting=document['getElementById'](a0_0x1e9c4d(0xfe));function handleVisibilityChange(_0x23e2bd){const _0x3f4963=a0_0x1e9c4d;document[_0x3f4963(0xfd)]===_0x3f4963(0xd6)||_0x23e2bd?.[_0x3f4963(0xdf)]==='beforeunload'||_0x23e2bd?.[_0x3f4963(0xce)]?(pauseGame(),canvas[_0x3f4963(0xc9)][_0x3f4963(0x111)](_0x3f4963(0xe5))):(setTimeout(()=>{const _0x129547=_0x3f4963;canvas[_0x129547(0xc9)][_0x129547(0xd4)]('visible');},0x258),controlSetting['classList'][_0x3f4963(0xca)]('visible')&&resumeGame());}async function statusShow(){const _0x22530c=a0_0x1e9c4d;document[_0x22530c(0xf8)]('pagehide',handleVisibilityChange),document[_0x22530c(0xf8)](_0x22530c(0xea),handleVisibilityChange),window[_0x22530c(0xf8)](_0x22530c(0xcb),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0xcf93d6[_0x22530c(0xc0)](turboState)),await delay(0x3e8),await led(parseInt(localStorage['getItem']('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x34e1f8=a0_0x1e9c4d;await ledSave('#20A5A6'),await Module[_0x34e1f8(0x116)](0x0),await Module[_0x34e1f8(0xe1)](),await screenShot(0x0),console[_0x34e1f8(0xd7)](_0x34e1f8(0x10a)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x14a996=a0_0x1e9c4d,_0x1ec663=localStorage['getItem']('gameName'),_0x3350e2=_0x1ec663[_0x14a996(0xbe)](_0x14a996(0xd5),_0x14a996(0xda)),_0x33bc35=localStorage[_0x14a996(0x103)](_0x14a996(0x120)),_0x55141a=localStorage[_0x14a996(0x103)](_0x1ec663+_0x14a996(0x108)),_0x1b670b=localStorage['getItem'](_0x1ec663+_0x14a996(0x121));if(navigator['onLine']){if(_0x33bc35){await ledSave(_0x14a996(0xf9)),await delay(0x3e8),await dpUploadFile(_0x3350e2,Module[_0x14a996(0x115)]('/data/states/'+_0x3350e2));if(_0x55141a!==null){const _0x2ad7a8=_0x55141a+'\x0a\x0a'+_0x1b670b,_0x30e550=new Blob([_0x2ad7a8],{'type':_0x14a996(0xec)});await dpUploadFile(_0x1ec663+'_slot0.txt',_0x30e550);}else console[_0x14a996(0xd7)](_0x14a996(0xd8));await lockNoti('',_0x14a996(0x124)+ ++countUpload+'\x20time(s)',0x7d0);}else console[_0x14a996(0xd7)](_0x14a996(0xf3));}else console['log'](_0x14a996(0xed));}function startTimer(){let [_0x48731d,_0x26039a,_0x52b202,_0x5eed30,_0x120fe0]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x36db7e=a0_0x2782;_0x52b202++,_0x5eed30++,_0x120fe0++;if(_0x52b202===0x3c)[_0x52b202,_0x26039a]=[0x0,_0x26039a+0x1];if(_0x26039a===0x3c)[_0x26039a,_0x48731d]=[0x0,_0x48731d+0x1];document['getElementById'](_0x36db7e(0xc7))[_0x36db7e(0xd1)]=_0x48731d+'h'+_0x26039a[_0x36db7e(0xd3)]()[_0x36db7e(0x10e)](0x2,'0')+'.'+_0x52b202[_0x36db7e(0xd3)]()['padStart'](0x2,'0');_0x5eed30===0x3c&&(saveStatePeriodically(),_0x5eed30=0x0);;_0x5eed30===0xe10&&(saveStateInCloud(),_0x120fe0=0x0);;},0x3e8);}export async function uploadGame(_0x82f94f){const _0x460d47=a0_0x1e9c4d,_0x573bd2=_0x82f94f['files'][0x0];Module[_0x460d47(0x114)](_0x573bd2,()=>{const _0x4cef7f=_0x460d47;Module[_0x4cef7f(0xe1)]();});}export async function loadGame(_0x5cea71){const _0x457254=a0_0x1e9c4d,_0x477c9e=_0x5cea71[_0x457254(0xbe)](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x54b67c=Module[_0x457254(0xdd)]();intro[_0x457254(0xc9)][_0x457254(0x111)](_0x457254(0xe4)),errorLogElements[0x0][_0x457254(0x11a)][_0x457254(0x106)]='0',ingame[_0x457254(0xc9)][_0x457254(0xd4)]('disable'),_0x5cea71[_0x457254(0xcc)](_0x457254(0xde))||_0x5cea71['endsWith'](_0x457254(0xcf))?(canvas['classList'][_0x457254(0x111)](_0x457254(0x100)),areaTrans[_0x457254(0xc9)][_0x457254(0x111)](_0x457254(0xf6)),localStorage[_0x457254(0xeb)](_0x457254(0xee),_0x457254(0xc1)+(window['innerWidth']-0xe6)+','+(window[_0x457254(0xc4)]-0xe6)*0x9/0xa)):localStorage[_0x457254(0xeb)]('screenSize','0,0,'+(window['innerWidth']-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x54b67c[_0x457254(0xdb)](_0x477c9e)?(await Module[_0x457254(0xbf)](_0x457254(0x11f)+_0x5cea71),confirm(_0x457254(0xf0))&&(await Module[_0x457254(0xe8)](0x0),localStorage['setItem'](_0x457254(0xd9),_0x5cea71),console[_0x457254(0xd7)](_0x5cea71))):(await Module[_0x457254(0xbf)](_0x457254(0x11f)+_0x5cea71),localStorage[_0x457254(0xeb)](_0x457254(0xd9),_0x5cea71)),await statusShow();}export async function saveState(_0x9d0836){const _0x183e7d=a0_0x1e9c4d;await Module['saveState'](_0x9d0836),await Module[_0x183e7d(0xe1)]();}export async function loadState(_0x1e9d4a){const _0x1611b5=a0_0x1e9c4d;await Module[_0x1611b5(0xe8)](_0x1e9d4a);}export async function downloadFile(_0xf456fe,_0x15fceb){const _0x14afe0=a0_0x1e9c4d,_0x19d186=Module['downloadFile'](_0xf456fe),_0x475006=document[_0x14afe0(0xd2)]('a');document[_0x14afe0(0x10c)][_0x14afe0(0xdc)](_0x475006),_0x475006[_0x14afe0(0x113)]=_0x15fceb;const _0x36d8e4=new Blob([_0x19d186],{'type':'application/octet-stream'});_0x475006[_0x14afe0(0xe3)]=URL[_0x14afe0(0x104)](_0x36d8e4),_0x475006['click'](),URL[_0x14afe0(0x112)](_0x36d8e4),_0x475006['remove']();}export function downloadFileInCloud(_0x192110){const _0x5960d0=a0_0x1e9c4d,_0x550574=Module[_0x5960d0(0x115)](_0x192110);return _0x550574;}export async function uploadFile(_0xf43e28){const _0x517496=a0_0x1e9c4d,_0x154bb6=_0xf43e28[_0x517496(0xfb)][0x0];Module[_0x517496(0x117)](_0x154bb6,()=>{const _0x27acb0=_0x517496;Module[_0x27acb0(0xe1)]();});}export async function editFile(_0x1ca027,_0x29f437,_0x35fe0e){const _0x3047cc=a0_0x1e9c4d;await Module[_0x3047cc(0x107)](_0x1ca027,_0x29f437,_0x35fe0e),await Module['FSSync']();}export async function deleteFile(_0x579152){const _0x1a4501=a0_0x1e9c4d;await Module[_0x1a4501(0xf4)](_0x579152),await Module[_0x1a4501(0xe1)]();}export function listGame(){const _0x41e3e8=a0_0x1e9c4d,_0xb98bc1=Module[_0x41e3e8(0xf5)]();return _0xb98bc1;}function a0_0x2632(){const _0x125d18=['listSaves','Error\x20uploadSavSta:','7003VTCkSA','turboState','/data/games/','uId','_dateState0','Cheat\x20Enabled!','buttonPress','Cloud\x20upload\x20','16763780NufydD','464FGwSds','replace','loadGame','turboF','0,0,','_imageState','1282420hjqDpO','innerWidth','pauseGame','name','timer','Resumed!','classList','contains','beforeunload','endsWith','Off','persisted','.gb','canvas','textContent','createElement','toString','remove','.gba','hidden','log','No\x20screenshot!','gameName','.ss0','includes','appendChild','listStates','.gbc','type','listCheats','FSSync','Paused!','href','disable','visible','/data/screenshots/','.png','loadState','resumeGame','visibilitychange','setItem','text/plain','Online!','screenSize','4FnhsTE','Do\x20you\x20want\x20to\x20load\x20save\x20state?','getElementById','setFastForwardMultiplier','Unable\x20to\x20upload\x20to\x20Cloud!','deleteFile','listGames','gbc1','350glhCHB','addEventListener','#E0C068','listScreenshots','files','autoLoadCheats','visibilityState','control-setting','68814NcxpQj','gbc','Save/State\x20uploaded\x20successfully:','_savedCheats','getItem','createObjectURL','Cheat\x20uploaded\x20successfully:','bottom','editFileName','_imageState0','3317525BtfKHd','Auto\x20save\x20','error','body','FSInit','padStart','uploadCheats','130914UPCyHh','add','revokeObjectURL','download','uploadRom','downloadFile','saveState','uploadSaveOrSaveState','845817OTTIqf','SDL2','style'];a0_0x2632=function(){return _0x125d18;};return a0_0x2632();}export function listSave(){const _0x1dad3b=a0_0x1e9c4d,_0x12741d=Module[_0x1dad3b(0x11b)]();return _0x12741d;}export function listState(){const _0xfecf7b=a0_0x1e9c4d,_0x1ff1c5=Module[_0xfecf7b(0xdd)]();return _0x1ff1c5;}export function listCheat(){const _0x28e970=a0_0x1e9c4d,_0x5397f8=Module[_0x28e970(0xe0)]();return _0x5397f8;}export function listScreenshot(){const _0x14e440=a0_0x1e9c4d,_0x4aee34=Module[_0x14e440(0xfa)]();return _0x4aee34;}export function fileSize(_0x51c354){const _0x1e799a=Module['fileSize'](_0x51c354);return _0x1e799a;}export async function uploadCheat(_0x3ee254){const _0x3ee087=a0_0x1e9c4d;try{const _0x4b0d1a=_0x3ee254['files'][0x0];await Module[_0x3ee087(0x10f)](_0x4b0d1a,()=>{const _0xa53bc3=_0x3ee087;console[_0xa53bc3(0xd7)](_0xa53bc3(0x105),_0x4b0d1a[_0xa53bc3(0xc6)]),localStorageFile(),Module[_0xa53bc3(0xe1)]();});}catch(_0x56fbea){console[_0x3ee087(0x10b)]('Error\x20uploadCheat:',_0x56fbea);}}export async function uploadSavSta(_0x19f71e){const _0x265a79=a0_0x1e9c4d;try{const _0x36632c=_0x19f71e[_0x265a79(0xfb)][0x0];await Module[_0x265a79(0x117)](_0x36632c,()=>{const _0x39d7de=_0x265a79;console['log'](_0x39d7de(0x101),_0x36632c['name']),localStorageFile(),Module[_0x39d7de(0xe1)]();});}catch(_0x2f9bb3){console['error'](_0x265a79(0x11c),_0x2f9bb3);}}export async function uploadSaveOrSaveState(_0x4194b0){const _0x25ffd4=a0_0x1e9c4d;Module[_0x25ffd4(0x117)](_0x4194b0,()=>{localStorageFile(),Module['FSSync']();});}export async function resumeGame(){const _0x220718=a0_0x1e9c4d;Module[_0x220718(0xe9)](),Module[_0x220718(0x119)](),notiMessage(_0x220718(0xc8),0x7d0);}export async function pauseGame(){const _0x4b989e=a0_0x1e9c4d;Module[_0x4b989e(0xc5)](),Module[_0x4b989e(0x119)](),notiMessage(_0x4b989e(0xe2),0x7d0);}export async function buttonPress(_0x372af7){const _0x4aaa06=a0_0x1e9c4d;Module[_0x4aaa06(0x123)](_0x372af7);}function a0_0x2782(_0x4e58da,_0x2f8031){const _0x263211=a0_0x2632();return a0_0x2782=function(_0x278271,_0x56585f){_0x278271=_0x278271-0xbd;let _0xc61a9e=_0x263211[_0x278271];return _0xc61a9e;},a0_0x2782(_0x4e58da,_0x2f8031);}export async function buttonUnpress(_0x9adba5){Module['buttonUnpress'](_0x9adba5);}export async function screenShot(_0x5bfc95){const _0xedf60c=a0_0x1e9c4d,_0x4d02c7=localStorage['getItem'](_0xedf60c(0xd9)),_0x2cae74=_0x4d02c7[_0xedf60c(0xbe)](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x2cae74+_0x5bfc95+_0xedf60c(0xe7)),await Module[_0xedf60c(0xe1)]();const _0xf5aa6b=await fileToBase64(Module[_0xedf60c(0x115)](_0xedf60c(0xe6)+_0x2cae74+_0x5bfc95+_0xedf60c(0xe7))),_0x59e518=Date['now'](),_0x1ea2b9=formatDateTime(_0x59e518);localStorage[_0xedf60c(0xeb)](_0x4d02c7+'_dateState'+_0x5bfc95,_0x1ea2b9),localStorage[_0xedf60c(0xeb)](_0x4d02c7+_0xedf60c(0xc2)+_0x5bfc95,_0xf5aa6b);}export async function captureOCR(_0x2ce6aa){const _0x271391=a0_0x1e9c4d;Module['screenshot'](_0x2ce6aa);const _0x2882d1=Module['downloadFile'](_0x271391(0xe6)+_0x2ce6aa);return _0x2882d1;}export async function setFastForwardMultiplier(_0x55bcde){const _0x9be1d7=a0_0x1e9c4d;Module[_0x9be1d7(0xf2)](_0x55bcde);}export function uploadCheats(_0xe2f469,_0x35644b,_0x5f7675,_0xf6097b,_0x51ff78){Module['uploadCheats'](_0xe2f469,()=>{const _0x2f6d68=a0_0x2782;Module[_0x2f6d68(0xfc)](),setTimeout(()=>{const _0x1f6c66=_0x2f6d68;Module[_0x1f6c66(0xe1)]();},0x1f4),_0xf6097b&&(localStorage[_0x2f6d68(0xeb)](_0x35644b+'_savedCheats',_0x5f7675),notiMessage(_0x2f6d68(0x122),0x5dc)),_0x51ff78[_0x2f6d68(0xd1)]=localStorage['getItem'](_0x35644b+_0x2f6d68(0x102)||_0x2f6d68(0xcd));});}