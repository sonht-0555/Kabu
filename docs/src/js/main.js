const a0_0x4e04ed=a0_0x5cba;(function(_0x3ba93a,_0x4592ff){const _0x3f6602=a0_0x5cba,_0xe4671c=_0x3ba93a();while(!![]){try{const _0x50677d=parseInt(_0x3f6602(0x1aa))/0x1*(parseInt(_0x3f6602(0x151))/0x2)+-parseInt(_0x3f6602(0x172))/0x3*(-parseInt(_0x3f6602(0x169))/0x4)+parseInt(_0x3f6602(0x174))/0x5+-parseInt(_0x3f6602(0x1b6))/0x6+parseInt(_0x3f6602(0x148))/0x7+parseInt(_0x3f6602(0x1a8))/0x8+-parseInt(_0x3f6602(0x14e))/0x9*(parseInt(_0x3f6602(0x1b5))/0xa);if(_0x50677d===_0x4592ff)break;else _0xe4671c['push'](_0xe4671c['shift']());}catch(_0x216be5){_0xe4671c['push'](_0xe4671c['shift']());}}}(a0_0x575a,0xc32e4));import a0_0x4119d2 from'../core/mgba.js';import*as a0_0x5eb293 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const Module={'canvas':document[a0_0x4e04ed(0x14b)](a0_0x4e04ed(0x158))};function initializeCore(_0x2e809c,_0x3b4173){const _0x2a2954=a0_0x4e04ed;_0x2e809c(_0x3b4173)[_0x2a2954(0x181)](function(_0x1e5244){const _0x546bda=_0x2a2954;_0x1e5244[_0x546bda(0x196)]();});}initializeCore(a0_0x4119d2,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x4e04ed(0x14b)](a0_0x4e04ed(0x158)),controlSetting=document[a0_0x4e04ed(0x14b)]('control-setting');function handleVisibilityChange(_0x4a47f7){const _0x3abd7c=a0_0x4e04ed;document[_0x3abd7c(0x166)]===_0x3abd7c(0x17e)||_0x4a47f7?.[_0x3abd7c(0x185)]===_0x3abd7c(0x1bb)||_0x4a47f7?.['persisted']?(Module[_0x3abd7c(0x177)](),pauseGame(),canvas[_0x3abd7c(0x165)][_0x3abd7c(0x161)](_0x3abd7c(0x1a3))):(setTimeout(()=>{const _0x4c347c=_0x3abd7c;canvas['classList'][_0x4c347c(0x16b)](_0x4c347c(0x1a3));},0x258),controlSetting[_0x3abd7c(0x165)][_0x3abd7c(0x147)](_0x3abd7c(0x1a3))&&resumeGame());}async function statusShow(){const _0x1010dd=a0_0x4e04ed;document[_0x1010dd(0x159)](_0x1010dd(0x17a),handleVisibilityChange),document['addEventListener']('visibilitychange',handleVisibilityChange),window[_0x1010dd(0x159)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),await a0_0x5eb293[_0x1010dd(0x192)](parseInt(await getData(gameName,'0',_0x1010dd(0x19b)))),await delay(0xc8),await Module[_0x1010dd(0x19f)](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x1010dd(0x1c4)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x216f7b=a0_0x4e04ed;await ledSave(_0x216f7b(0x199)),await Module[_0x216f7b(0x17f)](0x0),await Module[_0x216f7b(0x177)](),await screenShot(0x0),console[_0x216f7b(0x19e)](_0x216f7b(0x1af)+ ++countAutoSave+_0x216f7b(0x16d));}async function saveStateInCloud(){const _0x40744b=a0_0x4e04ed,_0x5d468d=gameName['replace'](/\.(zip|gb|gbc|gba)$/,_0x40744b(0x1a4)),_0x3ca946=localStorage[_0x40744b(0x170)](_0x40744b(0x1b3));navigator['onLine']&&(_0x3ca946&&(await ledSave(_0x40744b(0x1bd)),await delay(0x3e8),await dpUploadFile(_0x5d468d,Module[_0x40744b(0x1a6)](_0x40744b(0x18b)+_0x5d468d),_0x40744b(0x1a0)),await lockNoti('',_0x40744b(0x17b)+ ++countUpload+'\x20time(s)',0x7d0)));}function a0_0x575a(){const _0x3e20c6=['editFileName','textContent','hidden','saveState','states','then','led04','click','uploadAll','type','toString','0,0,','loadGame','led03','listScreenshots','/data/states/','match','filter','uploadRom','fileSize','listRoms','loadState','turboF','setItem','0.4','timer','FSInit','style','setFastForwardMultiplier','#20A5A6','led0','turboState','padStart','Resumed!','log','SDL2','state','createElement','opacity','visible','.ss0','length','downloadFile','led06','10778392ZsAvDB','map','28916djdLPG','screenSize','image/png','screenshot','href','Auto\x20save\x20','resumeGame','noti-mess','appendChild','uId','disable','472580zzBrAf','7558110BSgUOP','listSaves','now','download','Paused!','beforeunload','Error\x20ledSave:','#E0C068','createObjectURL','application/octet-stream','pauseGame','All','fill','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','slotStateSaved','led02','led05','substring','includes','contains','6654963RMGTjx','encode','gbc','getElementById','/data/screenshots/','led00','675cIwunG','led07','endsWith','80gfSxEv','files','lastIndexOf','gbc1','indexOf','concat','rgba(245,\x20232,\x20209,\x200.4)','canvas','addEventListener','body','replace','deleteFile','autoLoadCheats','.gb','tEXtComment\x00','exec','add','split','innerWidth','error','classList','visibilityState','join','buttonUnpress','56UDsuXd','Do\x20you\x20want\x20to\x20load\x20save\x20state?','remove','.png','\x20time(s)','saveTime','listCheats','getItem','listStates','221433ofEWWF','.gbc','5577465FEMXco','buttonPress','\x20:\x20','FSSync','trim','entries','pagehide','Cloud\x20upload\x20'];a0_0x575a=function(){return _0x3e20c6;};return a0_0x575a();}function startTimer(){let [_0x316ca3,_0x29ae16,_0x42f893,_0x5a8917,_0x2a1a26]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x422106=a0_0x5cba;_0x42f893++,_0x5a8917++,_0x2a1a26++;if(_0x42f893===0x3c)[_0x42f893,_0x29ae16]=[0x0,_0x29ae16+0x1];if(_0x29ae16===0x3c)[_0x29ae16,_0x316ca3]=[0x0,_0x316ca3+0x1];document[_0x422106(0x14b)](_0x422106(0x195))[_0x422106(0x17d)]=_0x316ca3+'h'+_0x29ae16[_0x422106(0x186)]()[_0x422106(0x19c)](0x2,'0')+'.'+_0x42f893['toString']()[_0x422106(0x19c)](0x2,'0');_0x5a8917===0x3c&&(saveStatePeriodically(),_0x5a8917=0x0);;_0x2a1a26===0x708&&(saveStateInCloud(),_0x2a1a26=0x0);;},0x3e8);}export async function uploadGame(_0x6035f2){const _0x159e40=a0_0x4e04ed,_0x4b0644=_0x6035f2['files'][0x0];Module[_0x159e40(0x18e)](_0x4b0644,()=>{const _0x5e7951=_0x159e40;Module[_0x5e7951(0x177)]();});}export async function loadGame(_0x4cb295){const _0x132a27=a0_0x4e04ed,_0x397efa=_0x4cb295[_0x132a27(0x15b)](/\.(gba|gbc|gb|zip)$/,_0x132a27(0x1a4)),_0x52d414=Module['listFiles'](_0x132a27(0x180))[_0x132a27(0x18d)](_0x3bb22e=>_0x3bb22e!=='.'&&_0x3bb22e!=='..');intro['classList'][_0x132a27(0x161)](_0x132a27(0x1b4)),errorLogElements[0x0]['style']['bottom']='0',ingame['classList'][_0x132a27(0x16b)]('disable'),_0x4cb295[_0x132a27(0x150)](_0x132a27(0x173))||_0x4cb295[_0x132a27(0x150)](_0x132a27(0x15e))?(canvas['classList']['add'](_0x132a27(0x14a)),areaTrans['classList']['add'](_0x132a27(0x154)),localStorage[_0x132a27(0x193)](_0x132a27(0x1ab),_0x132a27(0x187)+(window[_0x132a27(0x163)]-0xe6)+','+(window[_0x132a27(0x163)]-0xe6)*0x9/0xa)):localStorage[_0x132a27(0x193)](_0x132a27(0x1ab),_0x132a27(0x187)+(window['innerWidth']-0x96)+','+(window[_0x132a27(0x163)]-0x96)*0x2/0x3),_0x52d414[_0x132a27(0x1c8)](_0x397efa)?(await Module[_0x132a27(0x188)]('/data/games/'+_0x4cb295),confirm(_0x132a27(0x16a))&&(await Module[_0x132a27(0x191)](0x0),await shaderData())):(await Module[_0x132a27(0x188)]('/data/games/'+gameName),await shaderData()),await statusShow();}export async function saveState(_0x31446b){await Module['saveState'](_0x31446b);}export async function loadState(_0x203871){const _0x43ccce=a0_0x4e04ed;await Module[_0x43ccce(0x191)](_0x203871);}export async function downloadFile(_0x7a0edb,_0x2d07eb){const _0x3a1e55=a0_0x4e04ed,_0xc775ba=Module['downloadFile'](_0x7a0edb),_0x19fd6a=document[_0x3a1e55(0x1a1)]('a');document[_0x3a1e55(0x15a)][_0x3a1e55(0x1b2)](_0x19fd6a),_0x19fd6a[_0x3a1e55(0x1b9)]=_0x2d07eb;const _0x4f7b6d=new Blob([_0xc775ba],{'type':_0x3a1e55(0x1bf)});_0x19fd6a[_0x3a1e55(0x1ae)]=URL[_0x3a1e55(0x1be)](_0x4f7b6d),_0x19fd6a[_0x3a1e55(0x183)](),URL['revokeObjectURL'](_0x4f7b6d),_0x19fd6a[_0x3a1e55(0x16b)]();}export function downloadFileInCloud(_0x20c7f8){const _0x18ff4b=a0_0x4e04ed;try{const _0x1b262f=Module[_0x18ff4b(0x1a6)](_0x20c7f8);return _0x1b262f;}catch(_0x5d161e){return null;}}export async function uploadFileInCloud(_0x3bbf11){const _0x2720d3=a0_0x4e04ed;Module[_0x2720d3(0x184)](_0x3bbf11,async()=>{localStorageFile(),await Module['FSSync']();});}export async function uploadFile(_0x192d28){const _0x273c2e=a0_0x4e04ed,_0x3561a7=_0x192d28[_0x273c2e(0x152)][0x0];Module[_0x273c2e(0x184)](_0x3561a7,async()=>{const _0x1ee7aa=_0x273c2e;localStorageFile(),await Module[_0x1ee7aa(0x177)]();});}export async function editFile(_0x1f7941,_0x3dd43b,_0x18522a){const _0x3ea60b=a0_0x4e04ed;await Module[_0x3ea60b(0x17c)](_0x1f7941,_0x3dd43b,_0x18522a);}export async function deleteFile(_0x1246ce){const _0xd1b4e=a0_0x4e04ed;try{return await Module[_0xd1b4e(0x15c)](_0x1246ce),!![];}catch(_0x38dcf3){return console[_0xd1b4e(0x164)](_0x1246ce),null;}}export function listFiles(_0x5dd95a){const _0x800887=a0_0x4e04ed,_0x401d9f=Module['listFiles'](_0x5dd95a)[_0x800887(0x18d)](_0x50b519=>_0x50b519!=='.'&&_0x50b519!=='..');return _0x401d9f;}export function listGame(){const _0x395451=a0_0x4e04ed,_0x455603=Module[_0x395451(0x190)]()[_0x395451(0x18d)](_0x2dd703=>_0x2dd703!=='.'&&_0x2dd703!=='..');return _0x455603;}export function listSave(){const _0x394bd8=a0_0x4e04ed,_0x57cc6e=Module[_0x394bd8(0x1b7)]()['filter'](_0x31d41c=>_0x31d41c!=='.'&&_0x31d41c!=='..');return _0x57cc6e;}export function listState(){const _0x3b8f5c=a0_0x4e04ed,_0x2d6d7b=Module[_0x3b8f5c(0x171)]()['filter'](_0x284e8e=>_0x284e8e!=='.'&&_0x284e8e!=='..');return _0x2d6d7b;}export function listCheat(){const _0x4fa6ae=a0_0x4e04ed,_0x32f956=Module[_0x4fa6ae(0x16f)]()[_0x4fa6ae(0x18d)](_0x574611=>_0x574611!=='.'&&_0x574611!=='..');return _0x32f956;}export function listScreenshot(){const _0x31d78f=a0_0x4e04ed,_0x47c64f=Module[_0x31d78f(0x18a)]()[_0x31d78f(0x18d)](_0x3a4d62=>_0x3a4d62!=='.'&&_0x3a4d62!=='..');return _0x47c64f;}export function fileSize(_0x36d395){const _0x34c874=a0_0x4e04ed,_0x2a3cde=Module[_0x34c874(0x18f)](_0x36d395);return _0x2a3cde;}export async function resumeGame(){const _0x532cb0=a0_0x4e04ed;Module[_0x532cb0(0x1b0)](),Module[_0x532cb0(0x19f)](),notiMessage(_0x532cb0(0x19d),0x7d0);}export async function pauseGame(){const _0x248f4c=a0_0x4e04ed;Module[_0x248f4c(0x1c0)](),Module['SDL2'](),notiMessage(_0x248f4c(0x1ba),0x7d0);}export async function buttonPress(_0x394ce5){const _0x516441=a0_0x4e04ed;Module[_0x516441(0x175)](_0x394ce5);}export async function buttonUnpress(_0x205519){const _0x35a6a6=a0_0x4e04ed;Module[_0x35a6a6(0x168)](_0x205519);}export async function screenShot(_0x435bb4){const _0x326d28=a0_0x4e04ed,_0x1b5463=gameName[_0x326d28(0x15b)](/\.(gba|gbc|gb|zip)$/,'_'+_0x435bb4+_0x326d28(0x16c)),_0x483059=await getData(gameName,_0x435bb4,_0x326d28(0x1c1))||'';console[_0x326d28(0x19e)](_0x483059),await Module['screenshot'](_0x1b5463),await setData(gameName,_0x435bb4,_0x326d28(0x16e),formatDateTime(Date[_0x326d28(0x1b8)]()),_0x483059);}export async function dowloadScreenShot(_0x361500){try{const _0x5f233d=await fileToBase64(Module['downloadFile'](_0x361500));return _0x5f233d;}catch{}}export async function captureOCR(_0x3fb663){const _0x5d1ca4=a0_0x4e04ed;Module['screenshot'](_0x3fb663);const _0x5a328b=Module[_0x5d1ca4(0x1a6)](_0x5d1ca4(0x14c)+_0x3fb663);return _0x5a328b;}export async function setFastForwardMultiplier(_0x3f3a9f){const _0x209bcc=a0_0x4e04ed;Module[_0x209bcc(0x198)](_0x3f3a9f);}export async function uploadCheats(_0x49e6f0){const _0x493407=a0_0x4e04ed;Module[_0x493407(0x15d)](),Module[_0x493407(0x184)](_0x49e6f0,async()=>{});}export function setVolume(_0x4d04ba){Module['setVolume'](_0x4d04ba);}export async function setData(_0x4a2e11,_0x55eb1f,_0x3b919c,_0x1144cc,_0xb6a7cf=''){const _0x5a5f1d=a0_0x4e04ed,_0x30c818=_0x4a2e11[_0x5a5f1d(0x15b)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x16c427=_0x5a5f1d(0x14c)+_0x30c818+'_'+_0x55eb1f+_0x5a5f1d(0x16c);let _0x2a3e6e;try{_0x2a3e6e=await fileToBase64(Module['downloadFile'](_0x16c427));}catch(_0x17a2a3){await Module[_0x5a5f1d(0x1ad)](_0x30c818+'_'+_0x55eb1f+_0x5a5f1d(0x16c)),await delay(0xc8),_0x2a3e6e=await fileToBase64(Module[_0x5a5f1d(0x1a6)](_0x16c427));}let _0x4a6a28=atob(_0x2a3e6e[_0x5a5f1d(0x162)](',')[0x1]),_0x16b24d=_0x5a5f1d(0x15f),_0x4cce34=_0x4a6a28[_0x5a5f1d(0x155)](_0x16b24d),_0xe0d4ab={};if(_0x4cce34!==-0x1||_0xb6a7cf[_0x5a5f1d(0x178)]()!==''){let _0xb32c79=_0x4cce34!==-0x1?_0x4a6a28[_0x5a5f1d(0x1c7)](_0x4cce34+_0x16b24d[_0x5a5f1d(0x1a5)]):_0xb6a7cf,_0x18027f=/(\w+)\s*:\s*([^|]*)/g,_0x213b40;while((_0x213b40=_0x18027f[_0x5a5f1d(0x160)](_0xb32c79))!==null){_0xe0d4ab[_0x213b40[0x1][_0x5a5f1d(0x178)]()]=_0x213b40[0x2][_0x5a5f1d(0x178)]();}_0x4cce34!==-0x1&&(_0x4a6a28=_0x4a6a28[_0x5a5f1d(0x1c7)](0x0,_0x4cce34));}_0xe0d4ab[_0x3b919c]=_0x1144cc;let _0x1e9fa6=Object[_0x5a5f1d(0x179)](_0xe0d4ab)[_0x5a5f1d(0x1a9)](([_0x562418,_0x1fd219])=>_0x562418+_0x5a5f1d(0x176)+_0x1fd219)[_0x5a5f1d(0x167)]('\x20|\x20'),_0x29f1b6=new TextEncoder()[_0x5a5f1d(0x149)](_0x16b24d+'\x20'+_0x1e9fa6),_0x309999=new Uint8Array([..._0x4a6a28]['map'](_0x571b42=>_0x571b42['charCodeAt'](0x0))[_0x5a5f1d(0x156)]([..._0x29f1b6])),_0x729a57=new File([new Blob([_0x309999],{'type':_0x5a5f1d(0x1ac)})],_0x30c818+'_'+_0x55eb1f+_0x5a5f1d(0x16c),{'type':_0x5a5f1d(0x1ac)});Module[_0x5a5f1d(0x184)](_0x729a57,async()=>{});}export async function getData(_0x191f85,_0x573223,_0x159b0f){const _0x42dc7e=a0_0x4e04ed;try{const _0x1cb32b=_0x191f85[_0x42dc7e(0x15b)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x20ef96=_0x42dc7e(0x14c)+_0x1cb32b+'_'+_0x573223+_0x42dc7e(0x16c);let _0x227add;try{_0x227add=await fileToBase64(Module[_0x42dc7e(0x1a6)](_0x20ef96));}catch(_0x3ec091){return null;}let _0x146016=atob(_0x227add[_0x42dc7e(0x162)](',')[0x1]),_0x5cff02=_0x42dc7e(0x15f),_0x557942=_0x146016[_0x42dc7e(0x155)](_0x5cff02);if(_0x557942!==-0x1){let _0x26cabe=_0x146016[_0x42dc7e(0x1c7)](_0x557942+_0x5cff02[_0x42dc7e(0x1a5)]);if(_0x159b0f===_0x42dc7e(0x1c1))return _0x26cabe[_0x42dc7e(0x178)]();let _0x207cc5=new RegExp(_0x159b0f+_0x42dc7e(0x1c3)),_0x1a09dc=_0x26cabe[_0x42dc7e(0x18c)](_0x207cc5);if(_0x1a09dc)return _0x1a09dc[0x1][_0x42dc7e(0x178)]();}}catch(_0x222070){return console[_0x42dc7e(0x164)]({'romName':_0x191f85,'slot':_0x573223,'type':_0x159b0f}),null;}}export async function ledSave(_0x3904fb){const _0x39cde6=a0_0x4e04ed,_0x3a2cba=parseInt(await getData(gameName,'0',_0x39cde6(0x1c4))),_0x29432e=_0x3a2cba===0x1?'led01':_0x3a2cba===0x2?_0x39cde6(0x1c5):_0x3a2cba===0x3?_0x39cde6(0x189):_0x3a2cba===0x4?_0x39cde6(0x182):_0x3a2cba===0x5?_0x39cde6(0x1c6):_0x3a2cba===0x6?_0x39cde6(0x1a7):_0x3a2cba===0x7?_0x39cde6(0x14f):_0x39cde6(0x14d);try{for(let _0x8d3d48=0x0;_0x8d3d48<=0x7;_0x8d3d48++){document[_0x39cde6(0x14b)](_0x39cde6(0x19a)+_0x8d3d48)[_0x39cde6(0x197)]['fill']=_0x39cde6(0x157);}await delay(0x3e8);for(let _0x2a040f=0x0;_0x2a040f<=0x7;_0x2a040f++){document[_0x39cde6(0x14b)](_0x39cde6(0x19a)+_0x2a040f)[_0x39cde6(0x197)][_0x39cde6(0x1c2)]=_0x39cde6(0x157);}document[_0x39cde6(0x14b)](_0x29432e)[_0x39cde6(0x197)][_0x39cde6(0x1c2)]=_0x3904fb;}catch(_0x12faa1){console[_0x39cde6(0x164)](_0x39cde6(0x1bc),_0x12faa1);}};function a0_0x5cba(_0x11e0e5,_0x2e2da9){const _0x575a7a=a0_0x575a();return a0_0x5cba=function(_0x5cbafd,_0x56e459){_0x5cbafd=_0x5cbafd-0x147;let _0x38e130=_0x575a7a[_0x5cbafd];return _0x38e130;},a0_0x5cba(_0x11e0e5,_0x2e2da9);}export async function notiMessage(_0x1d3073,_0xb8ed73,_0xb357a2=![]){const _0x53ae1e=a0_0x4e04ed;var _0x391a71=document[_0x53ae1e(0x14b)](_0x53ae1e(0x1b1));const _0x4c74b5=parseInt(await getData(gameName,'0','slotStateSaved'))||0x0;_0x391a71['style'][_0x53ae1e(0x1a2)]===_0x53ae1e(0x194)&&(clearTimeout(messageTimeout),_0x391a71[_0x53ae1e(0x197)][_0x53ae1e(0x1a2)]='0'),_0x391a71[_0x53ae1e(0x17d)]=_0x1d3073,_0x391a71[_0x53ae1e(0x197)][_0x53ae1e(0x1a2)]=_0x53ae1e(0x194),messageTimeout=setTimeout(()=>{const _0x2c5c70=_0x53ae1e;_0x391a71[_0x2c5c70(0x17d)]='['+_0x4c74b5+']\x20'+gameName[_0x2c5c70(0x1c7)](0x0,gameName[_0x2c5c70(0x153)]('.')),_0x391a71[_0x2c5c70(0x197)][_0x2c5c70(0x1a2)]=_0x2c5c70(0x194);},_0xb8ed73),_0xb357a2&&(canvas['classList'][_0x53ae1e(0x161)](_0x53ae1e(0x1a3)),setTimeout(()=>{const _0x4ca2ce=_0x53ae1e;canvas['classList'][_0x4ca2ce(0x16b)](_0x4ca2ce(0x1a3));},0x258));}export async function FSSync(){const _0x4654c7=a0_0x4e04ed;Module[_0x4654c7(0x177)]();}export function rewind(_0x3510f3){Module['toggleRewind'](_0x3510f3);}