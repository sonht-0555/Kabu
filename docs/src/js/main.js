function a0_0x4163(_0x2ba1c6,_0x575d5a){const _0x359e1c=a0_0x359e();return a0_0x4163=function(_0x4163f0,_0x25b407){_0x4163f0=_0x4163f0-0x123;let _0x14aef0=_0x359e1c[_0x4163f0];return _0x14aef0;},a0_0x4163(_0x2ba1c6,_0x575d5a);}const a0_0x54c585=a0_0x4163;(function(_0x17a100,_0x59f20d){const _0x3dbbad=a0_0x4163,_0x20328c=_0x17a100();while(!![]){try{const _0x345dc9=parseInt(_0x3dbbad(0x183))/0x1*(parseInt(_0x3dbbad(0x14f))/0x2)+parseInt(_0x3dbbad(0x134))/0x3*(-parseInt(_0x3dbbad(0x15c))/0x4)+-parseInt(_0x3dbbad(0x128))/0x5+-parseInt(_0x3dbbad(0x154))/0x6+parseInt(_0x3dbbad(0x182))/0x7+parseInt(_0x3dbbad(0x15e))/0x8*(parseInt(_0x3dbbad(0x16b))/0x9)+parseInt(_0x3dbbad(0x17e))/0xa;if(_0x345dc9===_0x59f20d)break;else _0x20328c['push'](_0x20328c['shift']());}catch(_0x6ebe55){_0x20328c['push'](_0x20328c['shift']());}}}(a0_0x359e,0x34358));import a0_0x572556 from'../core/mgba.js';import*as a0_0x332fdc from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x54c585(0x14b)](a0_0x54c585(0x167))};function initializeCore(_0x115e0d,_0x3956f0){const _0x3656a4=a0_0x54c585;_0x115e0d(_0x3956f0)[_0x3656a4(0x153)](function(_0x3d4683){const _0x358792=_0x3656a4;_0x3d4683[_0x358792(0x13b)]();});}initializeCore(a0_0x572556,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x54c585(0x14b)](a0_0x54c585(0x167)),savedTurboState=localStorage['getItem'](a0_0x54c585(0x163)),controlSetting=document[a0_0x54c585(0x14b)](a0_0x54c585(0x184));function handleVisibilityChange(_0x158eb1){const _0x382410=a0_0x54c585;document[_0x382410(0x181)]==='hidden'||_0x158eb1?.[_0x382410(0x158)]===_0x382410(0x176)||_0x158eb1?.[_0x382410(0x155)]?(pauseGame(),canvas[_0x382410(0x125)][_0x382410(0x13a)](_0x382410(0x132))):(setTimeout(()=>{const _0x684a0d=_0x382410;canvas[_0x684a0d(0x125)][_0x684a0d(0x17f)](_0x684a0d(0x132));},0x258),controlSetting['classList']['contains'](_0x382410(0x132))&&resumeGame());}async function statusShow(){const _0x139087=a0_0x54c585;document[_0x139087(0x138)]('pagehide',handleVisibilityChange),document['addEventListener'](_0x139087(0x14a),handleVisibilityChange),window[_0x139087(0x138)](_0x139087(0x176),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x332fdc[_0x139087(0x151)](turboState)),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(localStorage['getItem'](_0x139087(0x168)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x55b903=a0_0x54c585;await ledSave(_0x55b903(0x124)),await Module[_0x55b903(0x175)](0x0),await Module[_0x55b903(0x135)](),await screenShot(0x0),console[_0x55b903(0x189)]('Auto\x20save\x20'+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x2ab902=a0_0x54c585,_0x1fc6bf=localStorage['getItem'](_0x2ab902(0x17c)),_0x74836=_0x1fc6bf['replace'](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x393baa=localStorage['getItem'](_0x2ab902(0x150)),_0xf09e47=localStorage[_0x2ab902(0x172)](_0x1fc6bf+_0x2ab902(0x179)),_0xd3792d=localStorage[_0x2ab902(0x172)](_0x1fc6bf+_0x2ab902(0x14e));if(navigator[_0x2ab902(0x130)]){if(_0x393baa){await ledSave(_0x2ab902(0x147)),await delay(0x3e8),await dpUploadFile(_0x74836,Module['downloadFile'](_0x2ab902(0x142)+_0x74836));if(_0xf09e47!==null){const _0x48254d=_0xf09e47+'\x0a\x0a'+_0xd3792d,_0x5af07a=new Blob([_0x48254d],{'type':_0x2ab902(0x13d)});await dpUploadFile(_0x1fc6bf+'_slot0.txt',_0x5af07a);}else console['log'](_0x2ab902(0x149));await lockNoti('',_0x2ab902(0x17b)+ ++countUpload+_0x2ab902(0x16a),0x7d0);}else console[_0x2ab902(0x189)]('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0x2ab902(0x189)](_0x2ab902(0x171));}function startTimer(){let [_0x3a23d3,_0x16088b,_0x59057d,_0x50741e,_0x4cada4]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x6300=a0_0x4163;_0x59057d++,_0x50741e++,_0x4cada4++;if(_0x59057d===0x3c)[_0x59057d,_0x16088b]=[0x0,_0x16088b+0x1];if(_0x16088b===0x3c)[_0x16088b,_0x3a23d3]=[0x0,_0x3a23d3+0x1];document['getElementById'](_0x6300(0x131))[_0x6300(0x141)]=_0x3a23d3+'h'+_0x16088b[_0x6300(0x166)]()[_0x6300(0x17a)](0x2,'0')+'.'+_0x59057d[_0x6300(0x166)]()['padStart'](0x2,'0');_0x50741e===0x3c&&(saveStatePeriodically(),_0x50741e=0x0);;_0x4cada4===0xe10&&(saveStateInCloud(),_0x4cada4=0x0);;},0x3e8);}export async function uploadGame(_0x5f0ea5){const _0x533a99=a0_0x54c585,_0xcbcc56=_0x5f0ea5[_0x533a99(0x164)][0x0];Module[_0x533a99(0x13c)](_0xcbcc56,()=>{Module['FSSync']();});}export async function loadGame(_0x36208b){const _0x4dfa5a=a0_0x54c585,_0x4847fa=_0x36208b['replace'](/\.(gba|gbc|gb|zip)$/,_0x4dfa5a(0x126)),_0x30f7e6=Module[_0x4dfa5a(0x162)]()[_0x4dfa5a(0x133)](_0x4f2a23=>_0x4f2a23!=='.'&&_0x4f2a23!=='..');intro[_0x4dfa5a(0x125)][_0x4dfa5a(0x13a)](_0x4dfa5a(0x170)),errorLogElements[0x0]['style']['bottom']='0',ingame[_0x4dfa5a(0x125)][_0x4dfa5a(0x17f)](_0x4dfa5a(0x170)),_0x36208b['endsWith'](_0x4dfa5a(0x14c))||_0x36208b['endsWith'](_0x4dfa5a(0x14d))?(canvas[_0x4dfa5a(0x125)][_0x4dfa5a(0x13a)](_0x4dfa5a(0x13f)),areaTrans['classList'][_0x4dfa5a(0x13a)](_0x4dfa5a(0x148)),localStorage[_0x4dfa5a(0x16c)](_0x4dfa5a(0x13e),_0x4dfa5a(0x18b)+(window[_0x4dfa5a(0x12b)]-0xe6)+','+(window[_0x4dfa5a(0x12b)]-0xe6)*0x9/0xa)):localStorage[_0x4dfa5a(0x16c)](_0x4dfa5a(0x13e),_0x4dfa5a(0x18b)+(window[_0x4dfa5a(0x12b)]-0x96)+','+(window[_0x4dfa5a(0x12b)]-0x96)*0x2/0x3),_0x30f7e6['includes'](_0x4847fa)?(await Module[_0x4dfa5a(0x12c)](_0x4dfa5a(0x177)+_0x36208b),confirm(_0x4dfa5a(0x180))&&(await Module[_0x4dfa5a(0x12e)](0x0),localStorage[_0x4dfa5a(0x16c)](_0x4dfa5a(0x17c),_0x36208b),console[_0x4dfa5a(0x189)](_0x36208b))):(await Module[_0x4dfa5a(0x12c)]('/data/games/'+_0x36208b),localStorage[_0x4dfa5a(0x16c)](_0x4dfa5a(0x17c),_0x36208b),console[_0x4dfa5a(0x189)](_0x36208b)),await statusShow();}export async function saveState(_0x495246){const _0x242106=a0_0x54c585;await Module[_0x242106(0x175)](_0x495246),await Module[_0x242106(0x135)]();}export async function loadState(_0x3c72e4){await Module['loadState'](_0x3c72e4);}export async function downloadFile(_0x34f417,_0x57eb20){const _0x4ee527=a0_0x54c585,_0x6ee540=Module['downloadFile'](_0x34f417),_0xf5ba51=document[_0x4ee527(0x12f)]('a');document['body'][_0x4ee527(0x160)](_0xf5ba51),_0xf5ba51[_0x4ee527(0x161)]=_0x57eb20;const _0x47e5ba=new Blob([_0x6ee540],{'type':'application/octet-stream'});_0xf5ba51[_0x4ee527(0x169)]=URL[_0x4ee527(0x127)](_0x47e5ba),_0xf5ba51[_0x4ee527(0x136)](),URL[_0x4ee527(0x178)](_0x47e5ba),_0xf5ba51[_0x4ee527(0x17f)]();}export function downloadFileInCloud(_0x375197){const _0x5be55f=a0_0x54c585,_0xb3f63c=Module[_0x5be55f(0x123)](_0x375197);return _0xb3f63c;}export async function uploadFile(_0x19ddf6){const _0x2f07f5=a0_0x54c585,_0x2252cf=_0x19ddf6[_0x2f07f5(0x164)][0x0];Module['uploadSaveOrSaveState'](_0x2252cf,()=>{const _0xe2782=_0x2f07f5;Module[_0xe2782(0x135)]();});}export async function editFile(_0x3ea2bb,_0x187d79,_0xebf81b){const _0x34f264=a0_0x54c585;await Module['editFileName'](_0x3ea2bb,_0x187d79,_0xebf81b),await Module[_0x34f264(0x135)]();}export async function deleteFile(_0x43baef){const _0x1edafb=a0_0x54c585;await Module['deleteFile'](_0x43baef),await Module[_0x1edafb(0x135)]();}export function listGame(){const _0x253287=a0_0x54c585,_0xd18977=Module[_0x253287(0x16f)]()['filter'](_0x5d72ba=>_0x5d72ba!=='.'&&_0x5d72ba!=='..');return _0xd18977;}export function listSave(){const _0x161852=a0_0x54c585,_0x272ee2=Module[_0x161852(0x188)]()[_0x161852(0x133)](_0x29a1f6=>_0x29a1f6!=='.'&&_0x29a1f6!=='..');return _0x272ee2;}export function listState(){const _0x4741b9=a0_0x54c585,_0x7dd9a0=Module[_0x4741b9(0x162)]()[_0x4741b9(0x133)](_0x5cba30=>_0x5cba30!=='.'&&_0x5cba30!=='..');return _0x7dd9a0;}export function listCheat(){const _0x26d2ab=a0_0x54c585,_0x591f7e=Module[_0x26d2ab(0x156)]()[_0x26d2ab(0x133)](_0x32ed31=>_0x32ed31!=='.'&&_0x32ed31!=='..');return _0x591f7e;}export function listScreenshot(){const _0x112666=a0_0x54c585,_0x23e287=Module[_0x112666(0x137)]()[_0x112666(0x133)](_0x3177f1=>_0x3177f1!=='.'&&_0x3177f1!=='..');return _0x23e287;}export function embedTextInPngFile(_0x1f78f9,_0x955ce4,_0x1ff2b4){const _0x5eef82=a0_0x54c585;let _0x511229=atob(_0x1f78f9[_0x5eef82(0x145)](',')[0x1]),_0x470689=new Uint8Array(_0x511229['length']);for(let _0x170cd6=0x0;_0x170cd6<_0x511229[_0x5eef82(0x187)];_0x170cd6++){_0x470689[_0x170cd6]=_0x511229['charCodeAt'](_0x170cd6);}let _0x3576cc=new TextEncoder()['encode'](_0x5eef82(0x140)+_0x955ce4),_0x29c2fd=new Uint8Array(_0x470689[_0x5eef82(0x187)]+_0x3576cc['length']);_0x29c2fd[_0x5eef82(0x144)](_0x470689,0x0),_0x29c2fd[_0x5eef82(0x144)](_0x3576cc,_0x470689[_0x5eef82(0x187)]);let _0x29f09f=new Blob([_0x29c2fd],{'type':_0x5eef82(0x165)}),_0x3a9b82=new File([_0x29f09f],_0x1ff2b4,{'type':_0x5eef82(0x165)});return _0x3a9b82;}export function extractTextFromPngBase64(_0x22d67d){const _0x5618e1=a0_0x54c585;let _0x355447=atob(_0x22d67d[_0x5618e1(0x145)](',')[0x1]),_0x34209c=_0x5618e1(0x140),_0x13b1f6=_0x355447['indexOf'](_0x34209c);if(_0x13b1f6!==-0x1)return _0x355447['substring'](_0x13b1f6+_0x34209c[_0x5618e1(0x187)]);return null;}export function fileSize(_0x53500f){const _0x57c437=a0_0x54c585,_0x3097c9=Module[_0x57c437(0x18a)](_0x53500f);return _0x3097c9;}export async function uploadCheat(_0x31c360){const _0x244eef=a0_0x54c585;try{const _0x3b99c7=_0x31c360[_0x244eef(0x164)][0x0];await Module[_0x244eef(0x129)](_0x3b99c7,()=>{const _0x3050d9=_0x244eef;console['log']('Cheat\x20uploaded\x20successfully:',_0x3b99c7[_0x3050d9(0x16d)]),localStorageFile(),Module[_0x3050d9(0x135)]();});}catch(_0x3e7b61){console[_0x244eef(0x12a)](_0x244eef(0x186),_0x3e7b61);}}export async function uploadSavSta(_0x469d76){const _0x2288e7=a0_0x54c585;try{const _0x2bf2fe=_0x469d76[_0x2288e7(0x164)][0x0];await Module[_0x2288e7(0x139)](_0x2bf2fe,()=>{const _0x1e292d=_0x2288e7;console[_0x1e292d(0x189)](_0x1e292d(0x173),_0x2bf2fe[_0x1e292d(0x16d)]),localStorageFile(),Module[_0x1e292d(0x135)]();});}catch(_0xbfa507){console[_0x2288e7(0x12a)](_0x2288e7(0x15d),_0xbfa507);}}export async function uploadFileInCloud(_0x418c06){const _0x47d01c=a0_0x54c585;Module[_0x47d01c(0x139)](_0x418c06,()=>{const _0x11cc7b=_0x47d01c;localStorageFile(),Module[_0x11cc7b(0x135)]();});}export async function resumeGame(){const _0x19fee2=a0_0x54c585;Module[_0x19fee2(0x146)](),Module[_0x19fee2(0x15a)](),notiMessage(_0x19fee2(0x174),0x7d0);}export async function pauseGame(){const _0x17e8b9=a0_0x54c585;Module['pauseGame'](),Module[_0x17e8b9(0x15a)](),notiMessage(_0x17e8b9(0x185),0x7d0);}export async function buttonPress(_0x527aa5){const _0x203684=a0_0x54c585;Module[_0x203684(0x12d)](_0x527aa5);}export async function buttonUnpress(_0x80a622){Module['buttonUnpress'](_0x80a622);}function a0_0x359e(){const _0x480b4b=['text/plain','screenSize','gbc','tEXtComment\x00','textContent','/data/states/','setFastForwardMultiplier','set','split','resumeGame','#E0C068','gbc1','No\x20screenshot!','visibilitychange','getElementById','.gbc','.gb','_dateState0','458818ohrKga','uId','turboF','autoLoadCheats','then','2124618HhaXXh','persisted','listCheats','_savedCheats','type','.png','SDL2','Cheat\x20Enabled!','104ggbYRb','Error\x20uploadSavSta:','8ESEmjU','screenshot','appendChild','download','listStates','turboState','files','image/png','toString','canvas','slotStateSaved','href','\x20time(s)','3657249MHtyTI','setItem','name','replace','listRoms','disable','Online!','getItem','Save/State\x20uploaded\x20successfully:','Resumed!','saveState','beforeunload','/data/games/','revokeObjectURL','_imageState0','padStart','Cloud\x20upload\x20','gameName','now','1615580fYOKSN','remove','Do\x20you\x20want\x20to\x20load\x20save\x20state?','visibilityState','1587264ymUwCI','1gtzCwq','control-setting','Paused!','Error\x20uploadCheat:','length','listSaves','log','fileSize','0,0,','downloadFile','#20A5A6','classList','.ss0','createObjectURL','793315HwPuCe','uploadCheats','error','innerWidth','loadGame','buttonPress','loadState','createElement','onLine','timer','visible','filter','34323TILSjz','FSSync','click','listScreenshots','addEventListener','uploadSaveOrSaveState','add','FSInit','uploadRom'];a0_0x359e=function(){return _0x480b4b;};return a0_0x359e();}export async function screenShot(_0x231126){const _0x11ed10=a0_0x54c585,_0x52f84d=localStorage[_0x11ed10(0x172)](_0x11ed10(0x17c))[_0x11ed10(0x16e)](/\.(gba|gbc|gb|zip)$/,''),_0x11b069=_0x52f84d+'_'+_0x231126+_0x11ed10(0x159);await Module[_0x11ed10(0x15f)](_0x11b069),await Module[_0x11ed10(0x135)]();const _0x42c791=await fileToBase64(Module[_0x11ed10(0x123)]('/data/screenshots/'+_0x11b069)),_0x20dd42=embedTextInPngFile(_0x42c791,formatDateTime(Date[_0x11ed10(0x17d)]()),_0x11b069);await uploadSaveOrSaveState(_0x20dd42);}export async function dowloadScreenShot(_0x1d29f0){const _0x5f2f16=a0_0x54c585;try{const _0x4ea315=await fileToBase64(Module[_0x5f2f16(0x123)](_0x1d29f0));return _0x4ea315;}catch{}}export async function captureOCR(_0x5af9b5){const _0x5e1f2e=a0_0x54c585;Module[_0x5e1f2e(0x15f)](_0x5af9b5);const _0x3cc312=Module[_0x5e1f2e(0x123)]('/data/screenshots/'+_0x5af9b5);return _0x3cc312;}export async function setFastForwardMultiplier(_0x2910dd){const _0x2415ae=a0_0x54c585;Module[_0x2415ae(0x143)](_0x2910dd);}export function uploadCheats(_0x1d2bca,_0x27f623,_0x4bb0f6,_0x3cec09,_0x7c15e7){const _0x5d6156=a0_0x54c585;Module[_0x5d6156(0x129)](_0x1d2bca,()=>{const _0x4b775c=_0x5d6156;Module[_0x4b775c(0x152)](),setTimeout(()=>{const _0x314e0d=_0x4b775c;Module[_0x314e0d(0x135)]();},0x1f4),_0x3cec09&&(localStorage['setItem'](_0x27f623+_0x4b775c(0x157),_0x4bb0f6),notiMessage(_0x4b775c(0x15b),0x5dc)),_0x7c15e7[_0x4b775c(0x141)]=localStorage[_0x4b775c(0x172)](_0x27f623+_0x4b775c(0x157)||'Off');});}