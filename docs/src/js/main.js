const a0_0x3493d0=a0_0x26ce;(function(_0x48c7fb,_0x4b7fb2){const _0x4d3cea=a0_0x26ce,_0x5e8ef3=_0x48c7fb();while(!![]){try{const _0x2c3e58=-parseInt(_0x4d3cea(0x162))/0x1*(parseInt(_0x4d3cea(0x14c))/0x2)+parseInt(_0x4d3cea(0x139))/0x3+-parseInt(_0x4d3cea(0x15b))/0x4*(-parseInt(_0x4d3cea(0x12c))/0x5)+-parseInt(_0x4d3cea(0x187))/0x6+-parseInt(_0x4d3cea(0x164))/0x7*(-parseInt(_0x4d3cea(0x181))/0x8)+parseInt(_0x4d3cea(0x184))/0x9*(-parseInt(_0x4d3cea(0x158))/0xa)+-parseInt(_0x4d3cea(0x14d))/0xb;if(_0x2c3e58===_0x4b7fb2)break;else _0x5e8ef3['push'](_0x5e8ef3['shift']());}catch(_0x105ab8){_0x5e8ef3['push'](_0x5e8ef3['shift']());}}}(a0_0x3ab8,0xaa7f1));import a0_0x300e4a from'../core/mgba.js';import*as a0_0x3511f6 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x3493d0(0x171)]('canvas')};function initializeCore(_0x3c8f74,_0x12ed2c){const _0x52413b=a0_0x3493d0;_0x3c8f74(_0x12ed2c)[_0x52413b(0x155)](function(_0x170fd3){const _0x54a098=_0x52413b;_0x170fd3[_0x54a098(0x18c)]();});}initializeCore(a0_0x300e4a,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x3493d0(0x137)),savedTurboState=localStorage[a0_0x3493d0(0x16d)]('turboState'),controlSetting=document[a0_0x3493d0(0x171)](a0_0x3493d0(0x16b));function handleVisibilityChange(_0x5d3366){const _0x140a26=a0_0x3493d0;document[_0x140a26(0x14a)]==='hidden'||_0x5d3366?.[_0x140a26(0x13c)]===_0x140a26(0x182)||_0x5d3366?.[_0x140a26(0x12d)]?(pauseGame(),canvas[_0x140a26(0x17f)][_0x140a26(0x156)](_0x140a26(0x154))):(setTimeout(()=>{const _0x1ea202=_0x140a26;canvas[_0x1ea202(0x17f)][_0x1ea202(0x17e)](_0x1ea202(0x154));},0x258),controlSetting['classList']['contains']('visible')&&resumeGame());}async function statusShow(){const _0x19693d=a0_0x3493d0;document[_0x19693d(0x159)]('pagehide',handleVisibilityChange),document[_0x19693d(0x159)](_0x19693d(0x12e),handleVisibilityChange),window[_0x19693d(0x159)](_0x19693d(0x182),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x3511f6[_0x19693d(0x188)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x19693d(0x16d)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x15b386=a0_0x3493d0;await ledSave(_0x15b386(0x140)),await Module[_0x15b386(0x14b)](0x0),await Module[_0x15b386(0x165)](),await screenShot(0x0),console[_0x15b386(0x185)](_0x15b386(0x157)+ ++countAutoSave+_0x15b386(0x136));}async function saveStateInCloud(){const _0x2203ea=a0_0x3493d0,_0x2b4467=localStorage['getItem'](_0x2203ea(0x186)),_0x13cc40=_0x2b4467[_0x2203ea(0x131)](_0x2203ea(0x14f),_0x2203ea(0x17c)),_0x4cd0f6=localStorage[_0x2203ea(0x16d)](_0x2203ea(0x15d)),_0x1d67b2=localStorage['getItem'](_0x2b4467+_0x2203ea(0x150)),_0x2b70f3=localStorage[_0x2203ea(0x16d)](_0x2b4467+'_dateState0');if(navigator['onLine']){if(_0x4cd0f6){await ledSave(_0x2203ea(0x172)),await delay(0x3e8),await dpUploadFile(_0x13cc40,Module[_0x2203ea(0x12b)](_0x2203ea(0x135)+_0x13cc40));if(_0x1d67b2!==null){const _0x4ceae9=_0x1d67b2+'\x0a\x0a'+_0x2b70f3,_0x352a6e=new Blob([_0x4ceae9],{'type':_0x2203ea(0x168)});await dpUploadFile(_0x2b4467+'_slot0.txt',_0x352a6e);}else console[_0x2203ea(0x185)](_0x2203ea(0x161));await lockNoti('',_0x2203ea(0x15f)+ ++countUpload+'\x20time(s)',0x7d0);}else console['log']('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0x2203ea(0x185)](_0x2203ea(0x179));}function startTimer(){let [_0x45c754,_0x470256,_0x3901ce,_0x3440d8,_0x386e90]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x3e6b08=a0_0x26ce;_0x3901ce++,_0x3440d8++,_0x386e90++;if(_0x3901ce===0x3c)[_0x3901ce,_0x470256]=[0x0,_0x470256+0x1];if(_0x470256===0x3c)[_0x470256,_0x45c754]=[0x0,_0x45c754+0x1];document['getElementById'](_0x3e6b08(0x15c))[_0x3e6b08(0x12f)]=_0x45c754+'h'+_0x470256['toString']()['padStart'](0x2,'0')+'.'+_0x3901ce[_0x3e6b08(0x145)]()[_0x3e6b08(0x177)](0x2,'0');_0x3440d8===0x3c&&(saveStatePeriodically(),_0x3440d8=0x0);;_0x3440d8===0xe10&&(saveStateInCloud(),_0x386e90=0x0);;},0x3e8);}function a0_0x3ab8(){const _0x335ae5=['body','FSInit','revokeObjectURL','downloadFile','5BfRYYa','persisted','visibilitychange','textContent','name','replace','listStates','Cheat\x20Enabled!','listSaves','/data/states/','\x20time(s)','canvas','screenshot','1520169CXWoPI','_dateState','files','type','buttonPress','Cheat\x20uploaded\x20successfully:','error','#20A5A6','loadState','/data/screenshots/','.gb','listCheats','toString','loadGame','Resumed!','Off','endsWith','visibilityState','saveState','98YvXrYA','7436077oVvqyN','_savedCheats','.gba','_imageState0','uploadCheats','pauseGame','href','visible','then','add','Auto\x20save\x20','8380yTHATq','addEventListener','buttonUnpress','5145476KzWpmQ','timer','uId','SDL2','Cloud\x20upload\x20','autoLoadCheats','No\x20screenshot!','8535FbSIEe','screenSize','28yTerTr','FSSync','0,0,','Paused!','text/plain','gbc','resumeGame','control-setting','listScreenshots','getItem','.png','deleteFile','click','getElementById','#E0C068','bottom','innerWidth','style','includes','padStart','setItem','Online!','.gbc','application/octet-stream','.ss0','fileSize','remove','classList','/data/games/','894896SDQDCk','beforeunload','uploadSaveOrSaveState','1350JDrfvl','log','gameName','1933590lIeiBd','turboF','_imageState','gbc1'];a0_0x3ab8=function(){return _0x335ae5;};return a0_0x3ab8();}export async function uploadGame(_0x5024f8){const _0x5cec0e=a0_0x3493d0,_0x81b271=_0x5024f8[_0x5cec0e(0x13b)][0x0];Module['uploadRom'](_0x81b271,()=>{const _0x27e64b=_0x5cec0e;Module[_0x27e64b(0x165)]();});}export async function loadGame(_0x1bb1f2){const _0x31a2b0=a0_0x3493d0,_0x351b54=_0x1bb1f2[_0x31a2b0(0x131)](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x4aeda2=Module[_0x31a2b0(0x132)]();intro['classList'][_0x31a2b0(0x156)]('disable'),errorLogElements[0x0][_0x31a2b0(0x175)][_0x31a2b0(0x173)]='0',ingame[_0x31a2b0(0x17f)][_0x31a2b0(0x17e)]('disable'),_0x1bb1f2[_0x31a2b0(0x149)](_0x31a2b0(0x17a))||_0x1bb1f2[_0x31a2b0(0x149)](_0x31a2b0(0x143))?(canvas['classList'][_0x31a2b0(0x156)](_0x31a2b0(0x169)),areaTrans['classList']['add'](_0x31a2b0(0x18a)),localStorage['setItem']('screenSize','0,0,'+(window[_0x31a2b0(0x174)]-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage['setItem'](_0x31a2b0(0x163),_0x31a2b0(0x166)+(window['innerWidth']-0x96)+','+(window[_0x31a2b0(0x174)]-0x96)*0x2/0x3),_0x4aeda2[_0x31a2b0(0x176)](_0x351b54)?(await Module[_0x31a2b0(0x146)](_0x31a2b0(0x180)+_0x1bb1f2),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module[_0x31a2b0(0x141)](0x0),localStorage[_0x31a2b0(0x178)](_0x31a2b0(0x186),_0x1bb1f2),console['log'](_0x1bb1f2))):(await Module[_0x31a2b0(0x146)](_0x31a2b0(0x180)+_0x1bb1f2),localStorage[_0x31a2b0(0x178)]('gameName',_0x1bb1f2)),await statusShow();}export async function saveState(_0x20a134){const _0x1d8d94=a0_0x3493d0;await Module[_0x1d8d94(0x14b)](_0x20a134),await Module[_0x1d8d94(0x165)]();}export async function loadState(_0x437702){const _0x34a51b=a0_0x3493d0;await Module[_0x34a51b(0x141)](_0x437702);}export async function downloadFile(_0x2085c2,_0x42f599){const _0x341fda=a0_0x3493d0,_0x580700=Module['downloadFile'](_0x2085c2),_0x45ef18=document['createElement']('a');document[_0x341fda(0x18b)]['appendChild'](_0x45ef18),_0x45ef18['download']=_0x42f599;const _0x4475c2=new Blob([_0x580700],{'type':_0x341fda(0x17b)});_0x45ef18[_0x341fda(0x153)]=URL['createObjectURL'](_0x4475c2),_0x45ef18[_0x341fda(0x170)](),URL[_0x341fda(0x12a)](_0x4475c2),_0x45ef18[_0x341fda(0x17e)]();}export function downloadFileInCloud(_0x2f1da7){const _0x5ef160=a0_0x3493d0,_0x2cfe8e=Module[_0x5ef160(0x12b)](_0x2f1da7);return _0x2cfe8e;}export async function uploadFile(_0x1946af){const _0xe77624=a0_0x3493d0,_0x30debc=_0x1946af[_0xe77624(0x13b)][0x0];Module[_0xe77624(0x183)](_0x30debc,()=>{const _0x4d6832=_0xe77624;Module[_0x4d6832(0x165)]();});}export async function editFile(_0x1cf647,_0x6f47b9,_0x52d7d0){await Module['editFileName'](_0x1cf647,_0x6f47b9,_0x52d7d0),await Module['FSSync']();}export async function deleteFile(_0x3aa19c){const _0x12f6b0=a0_0x3493d0;await Module[_0x12f6b0(0x16f)](_0x3aa19c),await Module[_0x12f6b0(0x165)]();}export function listGame(){const _0x380c19=Module['listGames']();return _0x380c19;}export function listSave(){const _0x531b1c=a0_0x3493d0,_0x3eb606=Module[_0x531b1c(0x134)]();return _0x3eb606;}export function listState(){const _0x521d1e=a0_0x3493d0,_0x1de20f=Module[_0x521d1e(0x132)]();return _0x1de20f;}export function listCheat(){const _0x44cc5e=a0_0x3493d0,_0x1e2ee8=Module[_0x44cc5e(0x144)]();return _0x1e2ee8;}export function listScreenshot(){const _0x3f5ed7=a0_0x3493d0,_0x21dada=Module[_0x3f5ed7(0x16c)]();return _0x21dada;}export function fileSize(_0xa857de){const _0x427523=a0_0x3493d0,_0x57a8f9=Module[_0x427523(0x17d)](_0xa857de);return _0x57a8f9;}export async function uploadCheat(_0x3cbf0c){const _0x1a268f=a0_0x3493d0;try{const _0x2f2836=_0x3cbf0c['files'][0x0];await Module['uploadCheats'](_0x2f2836,()=>{const _0x89e359=a0_0x26ce;console[_0x89e359(0x185)](_0x89e359(0x13e),_0x2f2836[_0x89e359(0x130)]),localStorageFile(),Module[_0x89e359(0x165)]();});}catch(_0x3cda2f){console[_0x1a268f(0x13f)]('Error\x20uploadCheat:',_0x3cda2f);}}export async function uploadSavSta(_0x566879){const _0x4132a6=a0_0x3493d0;try{const _0x512aa4=_0x566879[_0x4132a6(0x13b)][0x0];await Module['uploadSaveOrSaveState'](_0x512aa4,()=>{const _0x467ef8=_0x4132a6;console[_0x467ef8(0x185)]('Save/State\x20uploaded\x20successfully:',_0x512aa4[_0x467ef8(0x130)]),localStorageFile(),Module[_0x467ef8(0x165)]();});}catch(_0x14f467){console['error']('Error\x20uploadSavSta:',_0x14f467);}}function a0_0x26ce(_0x1c643c,_0x16709c){const _0x3ab86c=a0_0x3ab8();return a0_0x26ce=function(_0x26ce19,_0x1ba42b){_0x26ce19=_0x26ce19-0x12a;let _0x5e1764=_0x3ab86c[_0x26ce19];return _0x5e1764;},a0_0x26ce(_0x1c643c,_0x16709c);}export async function uploadSaveOrSaveState(_0x4eb2d2){const _0x1e7fb1=a0_0x3493d0;Module[_0x1e7fb1(0x183)](_0x4eb2d2,()=>{const _0x3119d6=_0x1e7fb1;localStorageFile(),Module[_0x3119d6(0x165)]();});}export async function resumeGame(){const _0x175e74=a0_0x3493d0;Module[_0x175e74(0x16a)](),Module[_0x175e74(0x15e)](),notiMessage(_0x175e74(0x147),0x7d0);}export async function pauseGame(){const _0x2f92fe=a0_0x3493d0;Module[_0x2f92fe(0x152)](),Module[_0x2f92fe(0x15e)](),notiMessage(_0x2f92fe(0x167),0x7d0);}export async function buttonPress(_0x4b3677){const _0x289a42=a0_0x3493d0;Module[_0x289a42(0x13d)](_0x4b3677);}export async function buttonUnpress(_0x484136){const _0xe00da9=a0_0x3493d0;Module[_0xe00da9(0x15a)](_0x484136);}export async function screenShot(_0x64faf8){const _0x37bf32=a0_0x3493d0,_0xf02bd5=localStorage[_0x37bf32(0x16d)](_0x37bf32(0x186)),_0x2cb091=_0xf02bd5[_0x37bf32(0x131)](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x2cb091+_0x64faf8+_0x37bf32(0x16e)),await Module[_0x37bf32(0x165)]();const _0xc22ce3=await fileToBase64(Module[_0x37bf32(0x12b)]('/data/screenshots/'+_0x2cb091+_0x64faf8+_0x37bf32(0x16e))),_0x5d5fdf=Date['now'](),_0x1354b3=formatDateTime(_0x5d5fdf);localStorage[_0x37bf32(0x178)](_0xf02bd5+_0x37bf32(0x13a)+_0x64faf8,_0x1354b3),localStorage[_0x37bf32(0x178)](_0xf02bd5+_0x37bf32(0x189)+_0x64faf8,_0xc22ce3);}export async function captureOCR(_0x46cc84){const _0x2c7331=a0_0x3493d0;Module[_0x2c7331(0x138)](_0x46cc84);const _0x564596=Module[_0x2c7331(0x12b)](_0x2c7331(0x142)+_0x46cc84);return _0x564596;}export async function setFastForwardMultiplier(_0x533c4c){Module['setFastForwardMultiplier'](_0x533c4c);}export function uploadCheats(_0x3b2e70,_0x212928,_0x1b8e0c,_0x3ee621,_0x2a9aab){const _0x54e890=a0_0x3493d0;Module[_0x54e890(0x151)](_0x3b2e70,()=>{const _0x25e38a=_0x54e890;Module[_0x25e38a(0x160)](),setTimeout(()=>{Module['FSSync']();},0x1f4),_0x3ee621&&(localStorage['setItem'](_0x212928+'_savedCheats',_0x1b8e0c),notiMessage(_0x25e38a(0x133),0x5dc)),_0x2a9aab[_0x25e38a(0x12f)]=localStorage[_0x25e38a(0x16d)](_0x212928+_0x25e38a(0x14e)||_0x25e38a(0x148));});}