const a0_0x425047=a0_0x3508;(function(_0x1f3920,_0x533efc){const _0xd1c136=a0_0x3508,_0x3b5cfc=_0x1f3920();while(!![]){try{const _0x284aa2=-parseInt(_0xd1c136(0xef))/0x1+-parseInt(_0xd1c136(0x104))/0x2+parseInt(_0xd1c136(0xd8))/0x3*(-parseInt(_0xd1c136(0x11e))/0x4)+-parseInt(_0xd1c136(0xdb))/0x5*(parseInt(_0xd1c136(0xf8))/0x6)+parseInt(_0xd1c136(0xdd))/0x7*(parseInt(_0xd1c136(0xd3))/0x8)+-parseInt(_0xd1c136(0x11a))/0x9*(-parseInt(_0xd1c136(0xe8))/0xa)+parseInt(_0xd1c136(0x121))/0xb;if(_0x284aa2===_0x533efc)break;else _0x3b5cfc['push'](_0x3b5cfc['shift']());}catch(_0x570c1c){_0x3b5cfc['push'](_0x3b5cfc['shift']());}}}(a0_0x4f8d,0x3788c));function a0_0x4f8d(){const _0x3455a2=['Online!','href','add','length','1547652yatrGb','listScreenshots','/data/games/','SDL2','click','image/png','classList','innerWidth','_slot0.txt','deleteFile','Off','screenshot','29292Csyhsh','appendChild','setFastForwardMultiplier','uploadRom','listRoms','pauseGame','substring','listSaves','uploadAll','_savedCheats','0,0,','_imageState0','FSSync','Resumed!','hidden','visible','Auto\x20save\x20','/data/screenshots/','includes','.ss0','loadGame','contains','9Bjtdqz','then','addEventListener','charCodeAt','684eIbrNS','Unable\x20to\x20upload\x20to\x20Cloud!','disable','1310815VDsYxX','type','split','set','gbc1','turboF','Cloud\x20upload\x20','No\x20screenshot!','_dateState0','setItem','autoLoadCheats','indexOf','remove','padStart','control-setting','FSInit','onLine','downloadFile','files','turboState','40zXYDVb','body','text/plain','style','log','1869guytwn','listStates','visibilitychange','5BFpXjz','replace','404656RKXdEf','#20A5A6','gameName','.png','application/octet-stream','filter','now','getItem','getElementById','Do\x20you\x20want\x20to\x20load\x20save\x20state?','\x20time(s)','4040250IDdDjU','pagehide','canvas','.gbc','uId','slotStateSaved','#E0C068','205641BswsmZ','buttonPress','screenSize','saveState','loadState'];a0_0x4f8d=function(){return _0x3455a2;};return a0_0x4f8d();}import a0_0x3e3ffe from'../core/mgba.js';import*as a0_0x477359 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document['getElementById']('canvas')};function initializeCore(_0x2b3c23,_0x2a95d4){const _0x242c74=a0_0x3508;_0x2b3c23(_0x2a95d4)[_0x242c74(0x11b)](function(_0xe6f52){const _0x5b519f=_0x242c74;_0xe6f52[_0x5b519f(0xce)]();});}function a0_0x3508(_0x3daca9,_0x27c900){const _0x4f8dde=a0_0x4f8d();return a0_0x3508=function(_0x350823,_0x55ebcc){_0x350823=_0x350823-0xc3;let _0x2f01b9=_0x4f8dde[_0x350823];return _0x2f01b9;},a0_0x3508(_0x3daca9,_0x27c900);}initializeCore(a0_0x3e3ffe,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x425047(0xe5)](a0_0x425047(0xea)),savedTurboState=localStorage['getItem'](a0_0x425047(0xd2)),controlSetting=document[a0_0x425047(0xe5)](a0_0x425047(0xcd));function handleVisibilityChange(_0x3b87b8){const _0x4b5f37=a0_0x425047;document['visibilityState']===_0x4b5f37(0x112)||_0x3b87b8?.[_0x4b5f37(0x122)]==='beforeunload'||_0x3b87b8?.['persisted']?(pauseGame(),canvas[_0x4b5f37(0xfe)]['add'](_0x4b5f37(0x113))):(setTimeout(()=>{const _0x4f27e3=_0x4b5f37;canvas[_0x4f27e3(0xfe)][_0x4f27e3(0xcb)](_0x4f27e3(0x113));},0x258),controlSetting['classList'][_0x4b5f37(0x119)](_0x4b5f37(0x113))&&resumeGame());}async function statusShow(){const _0x547587=a0_0x425047;document[_0x547587(0x11c)](_0x547587(0xe9),handleVisibilityChange),document['addEventListener'](_0x547587(0xda),handleVisibilityChange),window['addEventListener']('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x477359[_0x547587(0xc4)](turboState)),await delay(0xc8),await Module[_0x547587(0xfb)](),await delay(0x320),await led(parseInt(localStorage[_0x547587(0xe4)](_0x547587(0xed)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x37d795=a0_0x425047;await ledSave(_0x37d795(0xde)),await Module[_0x37d795(0xf2)](0x0),await Module[_0x37d795(0x110)](),await screenShot(0x0),console['log'](_0x37d795(0x114)+ ++countAutoSave+_0x37d795(0xe7));}async function saveStateInCloud(){const _0x3086d6=a0_0x425047,_0x31af4e=localStorage['getItem'](_0x3086d6(0xdf)),_0x3b4dec=_0x31af4e['replace'](/\.(zip|gb|gbc|gba)$/,_0x3086d6(0x117)),_0x16d23b=localStorage[_0x3086d6(0xe4)](_0x3086d6(0xec)),_0x2750d2=localStorage[_0x3086d6(0xe4)](_0x31af4e+_0x3086d6(0x10f)),_0x780f6=localStorage[_0x3086d6(0xe4)](_0x31af4e+_0x3086d6(0xc7));if(navigator[_0x3086d6(0xcf)]){if(_0x16d23b){await ledSave(_0x3086d6(0xee)),await delay(0x3e8),await dpUploadFile(_0x3b4dec,Module['downloadFile']('/data/states/'+_0x3b4dec));if(_0x2750d2!==null){const _0x1f0a79=_0x2750d2+'\x0a\x0a'+_0x780f6,_0x584261=new Blob([_0x1f0a79],{'type':_0x3086d6(0xd5)});await dpUploadFile(_0x31af4e+_0x3086d6(0x100),_0x584261);}else console['log'](_0x3086d6(0xc6));await lockNoti('',_0x3086d6(0xc5)+ ++countUpload+_0x3086d6(0xe7),0x7d0);}else console[_0x3086d6(0xd7)](_0x3086d6(0x11f));}else console[_0x3086d6(0xd7)](_0x3086d6(0xf4));}function startTimer(){let [_0x1bacc1,_0x1d4770,_0x7a85c5,_0x1cef57,_0x54de6e]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x33c16c=a0_0x3508;_0x7a85c5++,_0x1cef57++,_0x54de6e++;if(_0x7a85c5===0x3c)[_0x7a85c5,_0x1d4770]=[0x0,_0x1d4770+0x1];if(_0x1d4770===0x3c)[_0x1d4770,_0x1bacc1]=[0x0,_0x1bacc1+0x1];document[_0x33c16c(0xe5)]('timer')['textContent']=_0x1bacc1+'h'+_0x1d4770['toString']()['padStart'](0x2,'0')+'.'+_0x7a85c5['toString']()[_0x33c16c(0xcc)](0x2,'0');_0x1cef57===0x3c&&(saveStatePeriodically(),_0x1cef57=0x0);;_0x54de6e===0xe10&&(saveStateInCloud(),_0x54de6e=0x0);;},0x3e8);}export async function uploadGame(_0x1a3545){const _0x49d850=a0_0x425047,_0x4c9b2e=_0x1a3545['files'][0x0];Module[_0x49d850(0x107)](_0x4c9b2e,()=>{const _0x3c526a=_0x49d850;Module[_0x3c526a(0x110)]();});}export async function loadGame(_0x23af77){const _0x259927=a0_0x425047,_0x5bd6af=_0x23af77[_0x259927(0xdc)](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x2cf40f=Module[_0x259927(0xd9)]()['filter'](_0x64b557=>_0x64b557!=='.'&&_0x64b557!=='..');intro[_0x259927(0xfe)][_0x259927(0xf6)]('disable'),errorLogElements[0x0][_0x259927(0xd6)]['bottom']='0',ingame[_0x259927(0xfe)][_0x259927(0xcb)](_0x259927(0x120)),_0x23af77['endsWith'](_0x259927(0xeb))||_0x23af77['endsWith']('.gb')?(canvas[_0x259927(0xfe)][_0x259927(0xf6)]('gbc'),areaTrans[_0x259927(0xfe)][_0x259927(0xf6)](_0x259927(0xc3)),localStorage[_0x259927(0xc8)](_0x259927(0xf1),_0x259927(0x10e)+(window[_0x259927(0xff)]-0xe6)+','+(window[_0x259927(0xff)]-0xe6)*0x9/0xa)):localStorage[_0x259927(0xc8)](_0x259927(0xf1),_0x259927(0x10e)+(window[_0x259927(0xff)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x2cf40f[_0x259927(0x116)](_0x5bd6af)?(await Module[_0x259927(0x118)](_0x259927(0xfa)+_0x23af77),confirm(_0x259927(0xe6))&&(await Module[_0x259927(0xf3)](0x0),localStorage[_0x259927(0xc8)]('gameName',_0x23af77),console['log'](_0x23af77))):(await Module['loadGame'](_0x259927(0xfa)+_0x23af77),localStorage[_0x259927(0xc8)]('gameName',_0x23af77),console['log'](_0x23af77)),await statusShow();}export async function saveState(_0x4f18d8){const _0x36213a=a0_0x425047;await Module['saveState'](_0x4f18d8),await Module[_0x36213a(0x110)]();}export async function loadState(_0x33954f){const _0x996083=a0_0x425047;await Module[_0x996083(0xf3)](_0x33954f);}export async function downloadFile(_0x2c7afd,_0x413141){const _0x1cd378=a0_0x425047,_0x12f4f9=Module[_0x1cd378(0xd0)](_0x2c7afd),_0x1bd275=document['createElement']('a');document[_0x1cd378(0xd4)][_0x1cd378(0x105)](_0x1bd275),_0x1bd275['download']=_0x413141;const _0x59197b=new Blob([_0x12f4f9],{'type':_0x1cd378(0xe1)});_0x1bd275[_0x1cd378(0xf5)]=URL['createObjectURL'](_0x59197b),_0x1bd275[_0x1cd378(0xfc)](),URL['revokeObjectURL'](_0x59197b),_0x1bd275[_0x1cd378(0xcb)]();}export function downloadFileInCloud(_0x120f63){const _0xff5408=a0_0x425047,_0x234d3d=Module[_0xff5408(0xd0)](_0x120f63);return _0x234d3d;}export async function uploadFile(_0x401b5f){const _0x4c43e3=a0_0x425047,_0x34b878=_0x401b5f[_0x4c43e3(0xd1)][0x0];Module[_0x4c43e3(0x10c)](_0x34b878,()=>{const _0x16e6c5=_0x4c43e3;localStorageFile(),Module[_0x16e6c5(0x110)]();});}export async function editFile(_0x2e2940,_0x59d145,_0x1ff8b1){const _0x20d137=a0_0x425047;await Module['editFileName'](_0x2e2940,_0x59d145,_0x1ff8b1),await Module[_0x20d137(0x110)]();}export async function deleteFile(_0x18c2d1){const _0x195093=a0_0x425047;await Module[_0x195093(0x101)](_0x18c2d1),await Module[_0x195093(0x110)]();}export function listGame(){const _0x27712b=a0_0x425047,_0x17136d=Module[_0x27712b(0x108)]()[_0x27712b(0xe2)](_0x4b57e4=>_0x4b57e4!=='.'&&_0x4b57e4!=='..');return _0x17136d;}export function listSave(){const _0x24725a=a0_0x425047,_0x52e416=Module[_0x24725a(0x10b)]()[_0x24725a(0xe2)](_0x4ff98d=>_0x4ff98d!=='.'&&_0x4ff98d!=='..');return _0x52e416;}export function listState(){const _0x5a5f56=a0_0x425047,_0x20f31d=Module[_0x5a5f56(0xd9)]()[_0x5a5f56(0xe2)](_0x4d9056=>_0x4d9056!=='.'&&_0x4d9056!=='..');return _0x20f31d;}export function listCheat(){const _0x2b4938=a0_0x425047,_0x41b9a7=Module['listCheats']()[_0x2b4938(0xe2)](_0x467004=>_0x467004!=='.'&&_0x467004!=='..');return _0x41b9a7;}export function listScreenshot(){const _0x5e0ad6=a0_0x425047,_0x536c1d=Module[_0x5e0ad6(0xf9)]()[_0x5e0ad6(0xe2)](_0x482443=>_0x482443!=='.'&&_0x482443!=='..');return _0x536c1d;}export function embedTextInPngFile(_0x10ec12,_0x1bc0ba,_0x27123f){const _0x2719bf=a0_0x425047;let _0x483a72=atob(_0x10ec12[_0x2719bf(0x123)](',')[0x1]),_0x2cb34e=new Uint8Array(_0x483a72[_0x2719bf(0xf7)]);for(let _0x4941b5=0x0;_0x4941b5<_0x483a72[_0x2719bf(0xf7)];_0x4941b5++){_0x2cb34e[_0x4941b5]=_0x483a72[_0x2719bf(0x11d)](_0x4941b5);}let _0x37fe36=new TextEncoder()['encode']('tEXtComment\x00'+_0x1bc0ba),_0x3a40c8=new Uint8Array(_0x2cb34e[_0x2719bf(0xf7)]+_0x37fe36['length']);_0x3a40c8[_0x2719bf(0x124)](_0x2cb34e,0x0),_0x3a40c8[_0x2719bf(0x124)](_0x37fe36,_0x2cb34e['length']);let _0x5a618c=new Blob([_0x3a40c8],{'type':_0x2719bf(0xfd)}),_0xf6e415=new File([_0x5a618c],_0x27123f,{'type':_0x2719bf(0xfd)});return _0xf6e415;}export function extractTextFromPngBase64(_0x57091d){const _0x26ac2a=a0_0x425047;let _0x32826e=atob(_0x57091d[_0x26ac2a(0x123)](',')[0x1]),_0x54f388='tEXtComment\x00',_0x423147=_0x32826e[_0x26ac2a(0xca)](_0x54f388);if(_0x423147!==-0x1)return _0x32826e[_0x26ac2a(0x10a)](_0x423147+_0x54f388[_0x26ac2a(0xf7)]);return null;}export function fileSize(_0x83dfa){const _0x4b7282=Module['fileSize'](_0x83dfa);return _0x4b7282;}export async function resumeGame(){const _0x1b28f7=a0_0x425047;Module['resumeGame'](),Module[_0x1b28f7(0xfb)](),notiMessage(_0x1b28f7(0x111),0x7d0);}export async function pauseGame(){const _0x59ebd7=a0_0x425047;Module[_0x59ebd7(0x109)](),Module[_0x59ebd7(0xfb)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x443c8d){const _0x240ed8=a0_0x425047;Module[_0x240ed8(0xf0)](_0x443c8d);}export async function buttonUnpress(_0x3cc443){Module['buttonUnpress'](_0x3cc443);}export async function screenShot(_0x247be5){const _0x2edef8=a0_0x425047,_0x137e1e=localStorage[_0x2edef8(0xe4)](_0x2edef8(0xdf))[_0x2edef8(0xdc)](/\.(gba|gbc|gb|zip)$/,''),_0x5a055f=_0x137e1e+'_'+_0x247be5+_0x2edef8(0xe0);await Module[_0x2edef8(0x103)](_0x5a055f),await Module[_0x2edef8(0x110)]();const _0x96e535=await fileToBase64(Module[_0x2edef8(0xd0)](_0x2edef8(0x115)+_0x5a055f)),_0x422970=embedTextInPngFile(_0x96e535,formatDateTime(Date[_0x2edef8(0xe3)]()),_0x5a055f);await uploadSaveOrSaveState(_0x422970);}export async function dowloadScreenShot(_0x12d3fe){try{const _0x40c110=await fileToBase64(Module['downloadFile'](_0x12d3fe));return _0x40c110;}catch{}}export async function captureOCR(_0x2c9f7a){const _0x351db3=a0_0x425047;Module['screenshot'](_0x2c9f7a);const _0x15df89=Module[_0x351db3(0xd0)](_0x351db3(0x115)+_0x2c9f7a);return _0x15df89;}export async function setFastForwardMultiplier(_0x3af4a0){const _0x3f8698=a0_0x425047;Module[_0x3f8698(0x106)](_0x3af4a0);}export function uploadCheats(_0x1e009f,_0x3d30ae,_0x2d0f12,_0x1280a8,_0x4cd95f){const _0x37f9a1=a0_0x425047;Module[_0x37f9a1(0x10c)](_0x1e009f,()=>{const _0x4ff536=_0x37f9a1;Module[_0x4ff536(0xc9)](),setTimeout(()=>{const _0x198320=_0x4ff536;Module[_0x198320(0x110)]();},0x1f4),_0x1280a8&&(localStorage['setItem'](_0x3d30ae+_0x4ff536(0x10d),_0x2d0f12),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x4cd95f['textContent']=localStorage[_0x4ff536(0xe4)](_0x3d30ae+_0x4ff536(0x10d)||_0x4ff536(0x102));});}