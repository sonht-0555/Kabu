const a0_0xb9a578=a0_0x2e6e;(function(_0x46eba9,_0x4404c5){const _0x11d28b=a0_0x2e6e,_0x94b23f=_0x46eba9();while(!![]){try{const _0x3389ea=-parseInt(_0x11d28b(0xb4))/0x1+parseInt(_0x11d28b(0xb2))/0x2*(-parseInt(_0x11d28b(0xcf))/0x3)+-parseInt(_0x11d28b(0xcc))/0x4+parseInt(_0x11d28b(0xce))/0x5*(-parseInt(_0x11d28b(0xbc))/0x6)+parseInt(_0x11d28b(0xd3))/0x7+-parseInt(_0x11d28b(0xb5))/0x8*(parseInt(_0x11d28b(0xa0))/0x9)+parseInt(_0x11d28b(0xec))/0xa;if(_0x3389ea===_0x4404c5)break;else _0x94b23f['push'](_0x94b23f['shift']());}catch(_0x5e4495){_0x94b23f['push'](_0x94b23f['shift']());}}}(a0_0x5c66,0x8e438));import a0_0x171d12 from'../core/mgba.js';import*as a0_0x2e9876 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document['getElementById'](a0_0xb9a578(0xde))};function initializeCore(_0x4b3274,_0x1b0fe0){const _0x2dd3e3=a0_0xb9a578;_0x4b3274(_0x1b0fe0)[_0x2dd3e3(0xd0)](function(_0x2110e7){_0x2110e7['FSInit']();});}initializeCore(a0_0x171d12,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0xb9a578(0xd2)](a0_0xb9a578(0xde)),savedTurboState=localStorage[a0_0xb9a578(0xf7)]('turboState'),controlSetting=document['getElementById']('control-setting');function handleVisibilityChange(_0x2bd251){const _0x2a6753=a0_0xb9a578;document[_0x2a6753(0xc7)]===_0x2a6753(0xa9)||_0x2bd251?.['type']===_0x2a6753(0xe0)||_0x2bd251?.[_0x2a6753(0xaa)]?(pauseGame(),canvas['classList'][_0x2a6753(0xfa)](_0x2a6753(0xb8))):(setTimeout(()=>{const _0x542d66=_0x2a6753;canvas[_0x542d66(0xc2)]['remove'](_0x542d66(0xb8));},0x258),controlSetting[_0x2a6753(0xc2)]['contains'](_0x2a6753(0xb8))&&resumeGame());}async function statusShow(){const _0x4e1b28=a0_0xb9a578;document['addEventListener'](_0x4e1b28(0xc3),handleVisibilityChange),document[_0x4e1b28(0xbb)](_0x4e1b28(0xa8),handleVisibilityChange),window[_0x4e1b28(0xbb)](_0x4e1b28(0xe0),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x2e9876[_0x4e1b28(0xa4)](turboState)),await delay(0xc8),await Module[_0x4e1b28(0xe1)](),await delay(0x320),await led(parseInt(localStorage[_0x4e1b28(0xf7)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x485f4e=a0_0xb9a578;await ledSave(_0x485f4e(0xa5)),await Module[_0x485f4e(0xd7)](0x0),await Module[_0x485f4e(0xbe)](),await screenShot(0x0),console[_0x485f4e(0xf4)](_0x485f4e(0x9e)+ ++countAutoSave+_0x485f4e(0xb3));}async function saveStateInCloud(){const _0x14f117=a0_0xb9a578,_0x31b4a0=localStorage[_0x14f117(0xf7)](_0x14f117(0xd8)),_0x4a2a05=_0x31b4a0[_0x14f117(0xf0)](/\.(zip|gb|gbc|gba)$/,_0x14f117(0xd6)),_0x33f42e=localStorage['getItem'](_0x14f117(0xed));navigator[_0x14f117(0xf9)]&&(_0x33f42e&&(await ledSave(_0x14f117(0xb1)),await delay(0x3e8),await dpUploadFile(_0x4a2a05,Module[_0x14f117(0xea)](_0x14f117(0xdc)+_0x4a2a05),_0x14f117(0xc8)),await lockNoti('',_0x14f117(0xe9)+ ++countUpload+_0x14f117(0xb3),0x7d0)));}function startTimer(){let [_0x2d89b7,_0x57873e,_0x5b6bac,_0x1836d3,_0xc9930e]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x41b346=a0_0x2e6e;_0x5b6bac++,_0x1836d3++,_0xc9930e++;if(_0x5b6bac===0x3c)[_0x5b6bac,_0x57873e]=[0x0,_0x57873e+0x1];if(_0x57873e===0x3c)[_0x57873e,_0x2d89b7]=[0x0,_0x2d89b7+0x1];document[_0x41b346(0xd2)](_0x41b346(0xa2))[_0x41b346(0xa3)]=_0x2d89b7+'h'+_0x57873e[_0x41b346(0xf5)]()[_0x41b346(0xdd)](0x2,'0')+'.'+_0x5b6bac[_0x41b346(0xf5)]()[_0x41b346(0xdd)](0x2,'0');_0x1836d3===0x3c&&(saveStatePeriodically(),_0x1836d3=0x0);;_0xc9930e===0x708&&(saveStateInCloud(),_0xc9930e=0x0);;},0x3e8);}function a0_0x5c66(){const _0xd0c31=['listRoms','25282760eYJCYb','uId','image/png','createElement','replace','listScreenshots','disable','.png','log','toString','Off','getItem','style','onLine','add','appendChild','screenSize','Auto\x20save\x20','pauseGame','9CGKtCf','indexOf','timer','textContent','turboF','#20A5A6','buttonPress','_savedCheats','visibilitychange','hidden','persisted','/data/screenshots/','Do\x20you\x20want\x20to\x20load\x20save\x20state?','listSaves','Paused!','remove','loadState','#E0C068','1838zrUzTw','\x20time(s)','35922ArkBVg','8673752MQwGvC','length','fileSize','visible','files','uploadAll','addEventListener','132FPtgQC','body','FSSync','deleteFile','/data/games/','Resumed!','classList','pagehide','substring','buttonUnpress','href','visibilityState','state','setItem','tEXtComment\x00','bottom','498300kdxQuO','set','63095sqvUOr','3291hJxyBp','then','encode','getElementById','4094391RieVoM','split','Cheat\x20Enabled!','.ss0','saveState','gameName','application/octet-stream','now','filter','/data/states/','padStart','canvas','autoLoadCheats','beforeunload','SDL2','editFileName','innerWidth','endsWith','download','uploadRom','loadGame','setFastForwardMultiplier','Cloud\x20upload\x20','downloadFile'];a0_0x5c66=function(){return _0xd0c31;};return a0_0x5c66();}export async function uploadGame(_0x5a28a1){const _0x27f02d=a0_0xb9a578,_0x50236e=_0x5a28a1[_0x27f02d(0xb9)][0x0];Module[_0x27f02d(0xe6)](_0x50236e,()=>{const _0x522c6e=_0x27f02d;Module[_0x522c6e(0xbe)]();});}export async function loadGame(_0x559d08){const _0x25ab10=a0_0xb9a578,_0x3fd2aa=_0x559d08[_0x25ab10(0xf0)](/\.(gba|gbc|gb|zip)$/,_0x25ab10(0xd6)),_0x3cd2c1=Module['listStates']()[_0x25ab10(0xdb)](_0x49562d=>_0x49562d!=='.'&&_0x49562d!=='..');intro[_0x25ab10(0xc2)]['add'](_0x25ab10(0xf2)),errorLogElements[0x0][_0x25ab10(0xf8)][_0x25ab10(0xcb)]='0',ingame[_0x25ab10(0xc2)]['remove']('disable'),_0x559d08['endsWith']('.gbc')||_0x559d08[_0x25ab10(0xe4)]('.gb')?(canvas[_0x25ab10(0xc2)]['add']('gbc'),areaTrans[_0x25ab10(0xc2)]['add']('gbc1'),localStorage['setItem'](_0x25ab10(0xfc),'0,0,'+(window[_0x25ab10(0xe3)]-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage[_0x25ab10(0xc9)](_0x25ab10(0xfc),'0,0,'+(window[_0x25ab10(0xe3)]-0x96)+','+(window[_0x25ab10(0xe3)]-0x96)*0x2/0x3),_0x3cd2c1['includes'](_0x3fd2aa)?(await Module[_0x25ab10(0xe7)]('/data/games/'+_0x559d08),confirm(_0x25ab10(0xac))&&(await Module[_0x25ab10(0xb0)](0x0),localStorage[_0x25ab10(0xc9)](_0x25ab10(0xd8),_0x559d08),console['log'](_0x559d08))):(await Module[_0x25ab10(0xe7)](_0x25ab10(0xc0)+_0x559d08),localStorage['setItem'](_0x25ab10(0xd8),_0x559d08),console[_0x25ab10(0xf4)](_0x559d08)),await statusShow();}export async function saveState(_0x16bc9c){const _0x2d9417=a0_0xb9a578;await Module[_0x2d9417(0xd7)](_0x16bc9c),await Module['FSSync']();}export async function loadState(_0x40f36f){await Module['loadState'](_0x40f36f);}export async function downloadFile(_0x5ec622,_0x5c5e18){const _0x23948e=a0_0xb9a578,_0x657201=Module[_0x23948e(0xea)](_0x5ec622),_0x804e15=document[_0x23948e(0xef)]('a');document[_0x23948e(0xbd)][_0x23948e(0xfb)](_0x804e15),_0x804e15[_0x23948e(0xe5)]=_0x5c5e18;const _0x2040f1=new Blob([_0x657201],{'type':_0x23948e(0xd9)});_0x804e15[_0x23948e(0xc6)]=URL['createObjectURL'](_0x2040f1),_0x804e15['click'](),URL['revokeObjectURL'](_0x2040f1),_0x804e15[_0x23948e(0xaf)]();}export function downloadFileInCloud(_0xbdc2bb){const _0x298e2e=a0_0xb9a578,_0x5d7c9f=Module[_0x298e2e(0xea)](_0xbdc2bb);return _0x5d7c9f;}export async function uploadFileInCloud(_0x356b8f){const _0x1d00ae=a0_0xb9a578;Module[_0x1d00ae(0xba)](_0x356b8f,()=>{const _0xa2a913=_0x1d00ae;localStorageFile(),Module[_0xa2a913(0xbe)]();});}export async function uploadFile(_0x283b67){const _0xc6206a=_0x283b67['files'][0x0];Module['uploadAll'](_0xc6206a,()=>{const _0x4e8a64=a0_0x2e6e;localStorageFile(),Module[_0x4e8a64(0xbe)]();});}export async function editFile(_0x4b886b,_0x24947d,_0x6b20dc){const _0x27f9b1=a0_0xb9a578;await Module[_0x27f9b1(0xe2)](_0x4b886b,_0x24947d,_0x6b20dc),await Module[_0x27f9b1(0xbe)]();}export async function deleteFile(_0x38b9cb){const _0x5979c5=a0_0xb9a578;await Module[_0x5979c5(0xbf)](_0x38b9cb),await Module[_0x5979c5(0xbe)]();}export function listGame(){const _0x504e82=a0_0xb9a578,_0x57c692=Module[_0x504e82(0xeb)]()['filter'](_0x239e3b=>_0x239e3b!=='.'&&_0x239e3b!=='..');return _0x57c692;}export function listSave(){const _0x41aec0=a0_0xb9a578,_0x4d7160=Module[_0x41aec0(0xad)]()[_0x41aec0(0xdb)](_0x389d9c=>_0x389d9c!=='.'&&_0x389d9c!=='..');return _0x4d7160;}export function listState(){const _0x44176d=a0_0xb9a578,_0x1b65cc=Module['listStates']()[_0x44176d(0xdb)](_0x1c67ee=>_0x1c67ee!=='.'&&_0x1c67ee!=='..');return _0x1b65cc;}export function listCheat(){const _0x104d93=a0_0xb9a578,_0x44fd7d=Module['listCheats']()[_0x104d93(0xdb)](_0x32a107=>_0x32a107!=='.'&&_0x32a107!=='..');return _0x44fd7d;}export function listScreenshot(){const _0x336414=a0_0xb9a578,_0x470be1=Module[_0x336414(0xf1)]()[_0x336414(0xdb)](_0x255102=>_0x255102!=='.'&&_0x255102!=='..');return _0x470be1;}export function embedTextInPngFile(_0x4a5826,_0x2b5ebb,_0x3a7f9e){const _0x2971fa=a0_0xb9a578;let _0x40832a=atob(_0x4a5826[_0x2971fa(0xd4)](',')[0x1]),_0x22ae64=new Uint8Array(_0x40832a[_0x2971fa(0xb6)]);for(let _0x59b308=0x0;_0x59b308<_0x40832a[_0x2971fa(0xb6)];_0x59b308++){_0x22ae64[_0x59b308]=_0x40832a['charCodeAt'](_0x59b308);}let _0x484ddb=new TextEncoder()[_0x2971fa(0xd1)](_0x2971fa(0xca)+_0x2b5ebb),_0x264ab2=new Uint8Array(_0x22ae64[_0x2971fa(0xb6)]+_0x484ddb[_0x2971fa(0xb6)]);_0x264ab2[_0x2971fa(0xcd)](_0x22ae64,0x0),_0x264ab2['set'](_0x484ddb,_0x22ae64[_0x2971fa(0xb6)]);let _0x4d3b7d=new Blob([_0x264ab2],{'type':_0x2971fa(0xee)}),_0x31fcf8=new File([_0x4d3b7d],_0x3a7f9e,{'type':'image/png'});return _0x31fcf8;}export function extractTextFromPngBase64(_0x426367){const _0x1b9ac9=a0_0xb9a578;let _0x1db326=atob(_0x426367[_0x1b9ac9(0xd4)](',')[0x1]),_0x31f74d=_0x1b9ac9(0xca),_0x553a24=_0x1db326[_0x1b9ac9(0xa1)](_0x31f74d);if(_0x553a24!==-0x1)return _0x1db326[_0x1b9ac9(0xc4)](_0x553a24+_0x31f74d[_0x1b9ac9(0xb6)]);return null;}export function fileSize(_0x349865){const _0x5a4a91=a0_0xb9a578,_0x13ca42=Module[_0x5a4a91(0xb7)](_0x349865);return _0x13ca42;}export async function resumeGame(){const _0x1cfb37=a0_0xb9a578;Module['resumeGame'](),Module[_0x1cfb37(0xe1)](),notiMessage(_0x1cfb37(0xc1),0x7d0);}export async function pauseGame(){const _0xf1afd7=a0_0xb9a578;Module[_0xf1afd7(0x9f)](),Module[_0xf1afd7(0xe1)](),notiMessage(_0xf1afd7(0xae),0x7d0);}export async function buttonPress(_0x3fcd0c){const _0x297220=a0_0xb9a578;Module[_0x297220(0xa6)](_0x3fcd0c);}export async function buttonUnpress(_0x5369b4){const _0x4d1537=a0_0xb9a578;Module[_0x4d1537(0xc5)](_0x5369b4);}export async function screenShot(_0x32c9fa){const _0x5f13e5=a0_0xb9a578,_0x55a5ce=localStorage[_0x5f13e5(0xf7)](_0x5f13e5(0xd8))[_0x5f13e5(0xf0)](/\.(gba|gbc|gb|zip)$/,''),_0x4c47fc=_0x55a5ce+'_'+_0x32c9fa+_0x5f13e5(0xf3);await Module['screenshot'](_0x4c47fc),await Module[_0x5f13e5(0xbe)]();const _0x5ea2de=await fileToBase64(Module[_0x5f13e5(0xea)](_0x5f13e5(0xab)+_0x4c47fc)),_0x5194c1=embedTextInPngFile(_0x5ea2de,formatDateTime(Date[_0x5f13e5(0xda)]()),_0x4c47fc);Module[_0x5f13e5(0xba)](_0x5194c1,()=>{const _0x43d873=_0x5f13e5;localStorageFile(),Module[_0x43d873(0xbe)]();});}function a0_0x2e6e(_0x3c50b5,_0x24b458){const _0x5c6682=a0_0x5c66();return a0_0x2e6e=function(_0x2e6e4c,_0xc01641){_0x2e6e4c=_0x2e6e4c-0x9e;let _0x1c4b9e=_0x5c6682[_0x2e6e4c];return _0x1c4b9e;},a0_0x2e6e(_0x3c50b5,_0x24b458);}export async function dowloadScreenShot(_0x41eef8){try{const _0xe67e7=await fileToBase64(Module['downloadFile'](_0x41eef8));return _0xe67e7;}catch{}}export async function captureOCR(_0x26bc36){const _0x5e438d=a0_0xb9a578;Module['screenshot'](_0x26bc36);const _0xff1cb9=Module[_0x5e438d(0xea)](_0x5e438d(0xab)+_0x26bc36);return _0xff1cb9;}export async function setFastForwardMultiplier(_0x15c059){const _0x2c81aa=a0_0xb9a578;Module[_0x2c81aa(0xe8)](_0x15c059);}export function uploadCheats(_0xfd971a,_0x5ed08d,_0xdd60ad,_0x4ed553,_0x1fda77){Module['uploadAll'](_0xfd971a,()=>{const _0xf6a546=a0_0x2e6e;Module[_0xf6a546(0xdf)](),setTimeout(()=>{Module['FSSync']();},0x1f4),_0x4ed553&&(localStorage[_0xf6a546(0xc9)](_0x5ed08d+'_savedCheats',_0xdd60ad),notiMessage(_0xf6a546(0xd5),0x5dc)),_0x1fda77[_0xf6a546(0xa3)]=localStorage[_0xf6a546(0xf7)](_0x5ed08d+_0xf6a546(0xa7)||_0xf6a546(0xf6));});}export function setVolume(_0x261740){Module['setVolume'](_0x261740);}