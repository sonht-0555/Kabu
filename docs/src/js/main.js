function a0_0x4396(){const _0x435bff=['getElementById','createObjectURL','\x20time(s)','autoLoadCheats','61fSnIyo','loadState','persisted','_imageState','#20A5A6','listRoms','application/octet-stream','5hJITOV','turboF','FSInit','innerWidth','setFastForwardMultiplier','FSSync','uploadRom','name','.png','loadGame','Error\x20uploadCheat:','canvas','visibilitychange','.gb','add','padStart','beforeunload','uploadSaveOrSaveState','disable','turboState','pagehide','373794lAzftR','error','buttonUnpress','type','log','remove','listStates','uId','saveState','Resumed!','filter','pauseGame','download','includes','uploadCheats','Error\x20uploadSavSta:','style','buttonPress','Off','visibilityState','screenSize','gameName','Unable\x20to\x20upload\x20to\x20Cloud!','Paused!','text/plain','href','Cheat\x20uploaded\x20successfully:','classList','visible','listSaves','setItem','hidden','3592528UKCSeY','click','listScreenshots','addEventListener','40KsfoJg','resumeGame','/data/games/','toString','Save/State\x20uploaded\x20successfully:','bottom','appendChild','onLine','0,0,','12054163AhbWlH','downloadFile','7JzopvV','files','1064226vMLnYe','22062SODicz','No\x20screenshot!','timer','createElement','_imageState0','/data/screenshots/','editFileName','replace','contains','_savedCheats','Cheat\x20Enabled!','slotStateSaved','229707RBkIIH','SDL2','getItem','.ss0','1851800xMxeRL','endsWith','screenshot','textContent','fileSize','Auto\x20save\x20'];a0_0x4396=function(){return _0x435bff;};return a0_0x4396();}const a0_0x3c30d6=a0_0x253a;(function(_0x308aab,_0x5b3a66){const _0x49e28e=a0_0x253a,_0x209f24=_0x308aab();while(!![]){try{const _0x18db85=parseInt(_0x49e28e(0x13c))/0x1*(parseInt(_0x49e28e(0x18a))/0x2)+parseInt(_0x49e28e(0x158))/0x3+parseInt(_0x49e28e(0x19a))/0x4*(parseInt(_0x49e28e(0x143))/0x5)+-parseInt(_0x49e28e(0x189))/0x6+-parseInt(_0x49e28e(0x187))/0x7*(-parseInt(_0x49e28e(0x178))/0x8)+parseInt(_0x49e28e(0x196))/0x9*(parseInt(_0x49e28e(0x17c))/0xa)+-parseInt(_0x49e28e(0x185))/0xb;if(_0x18db85===_0x5b3a66)break;else _0x209f24['push'](_0x209f24['shift']());}catch(_0x4636bf){_0x209f24['push'](_0x209f24['shift']());}}}(a0_0x4396,0x83719));import a0_0x4d0d20 from'../core/mgba.js';import*as a0_0xcaef0 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document['getElementById']('canvas')};function initializeCore(_0x23bc0f,_0x2295a3){_0x23bc0f(_0x2295a3)['then'](function(_0x5f55c4){const _0x2ad348=a0_0x253a;_0x5f55c4[_0x2ad348(0x145)]();});}initializeCore(a0_0x4d0d20,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x3c30d6(0x138)](a0_0x3c30d6(0x14e)),savedTurboState=localStorage[a0_0x3c30d6(0x198)](a0_0x3c30d6(0x156)),controlSetting=document[a0_0x3c30d6(0x138)]('control-setting');function handleVisibilityChange(_0x39538c){const _0x4d79de=a0_0x3c30d6;document[_0x4d79de(0x16b)]===_0x4d79de(0x177)||_0x39538c?.[_0x4d79de(0x15b)]==='beforeunload'||_0x39538c?.[_0x4d79de(0x13e)]?(pauseGame(),canvas[_0x4d79de(0x173)][_0x4d79de(0x151)](_0x4d79de(0x174))):(setTimeout(()=>{const _0x1f7f3a=_0x4d79de;canvas[_0x1f7f3a(0x173)][_0x1f7f3a(0x15d)](_0x1f7f3a(0x174));},0x258),controlSetting[_0x4d79de(0x173)][_0x4d79de(0x192)](_0x4d79de(0x174))&&resumeGame());}async function statusShow(){const _0x10611d=a0_0x3c30d6;document[_0x10611d(0x17b)](_0x10611d(0x157),handleVisibilityChange),document[_0x10611d(0x17b)](_0x10611d(0x14f),handleVisibilityChange),window[_0x10611d(0x17b)](_0x10611d(0x153),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0xcaef0[_0x10611d(0x144)](turboState)),await delay(0x1f4),await Module[_0x10611d(0x197)](),await led(parseInt(localStorage[_0x10611d(0x198)](_0x10611d(0x195)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0xe33641=a0_0x3c30d6;await ledSave(_0xe33641(0x140)),await Module['saveState'](0x0),await Module[_0xe33641(0x148)](),await screenShot(0x0),console[_0xe33641(0x15c)](_0xe33641(0x137)+ ++countAutoSave+_0xe33641(0x13a));}async function saveStateInCloud(){const _0x4bd9bb=a0_0x3c30d6,_0x321db6=localStorage[_0x4bd9bb(0x198)](_0x4bd9bb(0x16d)),_0x2f2b0f=_0x321db6[_0x4bd9bb(0x191)]('.gba',_0x4bd9bb(0x199)),_0x148d25=localStorage[_0x4bd9bb(0x198)](_0x4bd9bb(0x15f)),_0x1fd4eb=localStorage[_0x4bd9bb(0x198)](_0x321db6+_0x4bd9bb(0x18e)),_0x1680eb=localStorage['getItem'](_0x321db6+'_dateState0');if(navigator[_0x4bd9bb(0x183)]){if(_0x148d25){await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x2f2b0f,Module['downloadFile']('/data/states/'+_0x2f2b0f));if(_0x1fd4eb!==null){const _0x4aa4aa=_0x1fd4eb+'\x0a\x0a'+_0x1680eb,_0x1fbc43=new Blob([_0x4aa4aa],{'type':_0x4bd9bb(0x170)});await dpUploadFile(_0x321db6+'_slot0.txt',_0x1fbc43);}else console['log'](_0x4bd9bb(0x18b));await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x4bd9bb(0x13a),0x7d0);}else console[_0x4bd9bb(0x15c)](_0x4bd9bb(0x16e));}else console[_0x4bd9bb(0x15c)]('Online!');}function startTimer(){let [_0x9e5ff1,_0x1637d4,_0x38121d,_0x58c023,_0x24ccdb]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x115d9d=a0_0x253a;_0x38121d++,_0x58c023++,_0x24ccdb++;if(_0x38121d===0x3c)[_0x38121d,_0x1637d4]=[0x0,_0x1637d4+0x1];if(_0x1637d4===0x3c)[_0x1637d4,_0x9e5ff1]=[0x0,_0x9e5ff1+0x1];document['getElementById'](_0x115d9d(0x18c))[_0x115d9d(0x19d)]=_0x9e5ff1+'h'+_0x1637d4['toString']()[_0x115d9d(0x152)](0x2,'0')+'.'+_0x38121d[_0x115d9d(0x17f)]()[_0x115d9d(0x152)](0x2,'0');_0x58c023===0x3c&&(saveStatePeriodically(),_0x58c023=0x0);;_0x58c023===0xe10&&(saveStateInCloud(),_0x24ccdb=0x0);;},0x3e8);}export async function uploadGame(_0x386656){const _0x5dbf4b=a0_0x3c30d6,_0x460172=_0x386656[_0x5dbf4b(0x188)][0x0];Module[_0x5dbf4b(0x149)](_0x460172,()=>{const _0x27b46d=_0x5dbf4b;Module[_0x27b46d(0x148)]();});}export async function loadGame(_0x59d5cf){const _0x451128=a0_0x3c30d6,_0xc03e35=_0x59d5cf[_0x451128(0x191)](/\.(gba|gbc|gb|zip)$/,_0x451128(0x199)),_0x1adfb7=Module[_0x451128(0x15e)]()[_0x451128(0x162)](_0x266e34=>_0x266e34!=='.'&&_0x266e34!=='..');intro[_0x451128(0x173)][_0x451128(0x151)](_0x451128(0x155)),errorLogElements[0x0][_0x451128(0x168)][_0x451128(0x181)]='0',ingame[_0x451128(0x173)][_0x451128(0x15d)]('disable'),_0x59d5cf[_0x451128(0x19b)]('.gbc')||_0x59d5cf[_0x451128(0x19b)](_0x451128(0x150))?(canvas['classList'][_0x451128(0x151)]('gbc'),areaTrans['classList'][_0x451128(0x151)]('gbc1'),localStorage[_0x451128(0x176)](_0x451128(0x16c),_0x451128(0x184)+(window[_0x451128(0x146)]-0xe6)+','+(window[_0x451128(0x146)]-0xe6)*0x9/0xa)):localStorage[_0x451128(0x176)](_0x451128(0x16c),_0x451128(0x184)+(window[_0x451128(0x146)]-0x96)+','+(window[_0x451128(0x146)]-0x96)*0x2/0x3),_0x1adfb7[_0x451128(0x165)](_0xc03e35)?(await Module[_0x451128(0x14c)](_0x451128(0x17e)+_0x59d5cf),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module[_0x451128(0x13d)](0x0),localStorage[_0x451128(0x176)](_0x451128(0x16d),_0x59d5cf),console[_0x451128(0x15c)](_0x59d5cf))):(await Module[_0x451128(0x14c)](_0x451128(0x17e)+_0x59d5cf),localStorage[_0x451128(0x176)](_0x451128(0x16d),_0x59d5cf)),await statusShow();}export async function saveState(_0x3b7c3c){const _0x134b7b=a0_0x3c30d6;await Module[_0x134b7b(0x160)](_0x3b7c3c),await Module['FSSync']();}export async function loadState(_0x289c25){await Module['loadState'](_0x289c25);}export async function downloadFile(_0x1184c7,_0x2f5566){const _0x271269=a0_0x3c30d6,_0x71ffd7=Module['downloadFile'](_0x1184c7),_0xac2d3b=document[_0x271269(0x18d)]('a');document['body'][_0x271269(0x182)](_0xac2d3b),_0xac2d3b[_0x271269(0x164)]=_0x2f5566;const _0x4dec23=new Blob([_0x71ffd7],{'type':_0x271269(0x142)});_0xac2d3b[_0x271269(0x171)]=URL[_0x271269(0x139)](_0x4dec23),_0xac2d3b[_0x271269(0x179)](),URL['revokeObjectURL'](_0x4dec23),_0xac2d3b[_0x271269(0x15d)]();}export function downloadFileInCloud(_0x4bf1bd){const _0x15fb1a=Module['downloadFile'](_0x4bf1bd);return _0x15fb1a;}export async function uploadFile(_0x43f031){const _0xc56c71=a0_0x3c30d6,_0x3c8ac1=_0x43f031[_0xc56c71(0x188)][0x0];Module[_0xc56c71(0x154)](_0x3c8ac1,()=>{const _0x3aa6ce=_0xc56c71;Module[_0x3aa6ce(0x148)]();});}export async function editFile(_0x40a877,_0x4fe9f4,_0xa862aa){const _0xbd3473=a0_0x3c30d6;await Module[_0xbd3473(0x190)](_0x40a877,_0x4fe9f4,_0xa862aa),await Module[_0xbd3473(0x148)]();}export async function deleteFile(_0x485784){const _0x2888d1=a0_0x3c30d6;await Module['deleteFile'](_0x485784),await Module[_0x2888d1(0x148)]();}export function listGame(){const _0x4bdebd=a0_0x3c30d6,_0x34fdcb=Module[_0x4bdebd(0x141)]()[_0x4bdebd(0x162)](_0x4b8a10=>_0x4b8a10!=='.'&&_0x4b8a10!=='..');return _0x34fdcb;}export function listSave(){const _0x19ae80=a0_0x3c30d6,_0x157115=Module[_0x19ae80(0x175)]()[_0x19ae80(0x162)](_0x3b09cc=>_0x3b09cc!=='.'&&_0x3b09cc!=='..');return _0x157115;}export function listState(){const _0x95846=Module['listStates']()['filter'](_0x48cda6=>_0x48cda6!=='.'&&_0x48cda6!=='..');return _0x95846;}export function listCheat(){const _0xda45fe=a0_0x3c30d6,_0x5e8214=Module['listCheats']()[_0xda45fe(0x162)](_0x3a0985=>_0x3a0985!=='.'&&_0x3a0985!=='..');return _0x5e8214;}export function listScreenshot(){const _0x39a87a=a0_0x3c30d6,_0x2f1668=Module[_0x39a87a(0x17a)]()[_0x39a87a(0x162)](_0x18960e=>_0x18960e!=='.'&&_0x18960e!=='..');return _0x2f1668;}function a0_0x253a(_0x469ba9,_0x42fcb4){const _0x4396fa=a0_0x4396();return a0_0x253a=function(_0x253a47,_0x37cb5b){_0x253a47=_0x253a47-0x137;let _0x2d8f4c=_0x4396fa[_0x253a47];return _0x2d8f4c;},a0_0x253a(_0x469ba9,_0x42fcb4);}export function fileSize(_0xfa1aa7){const _0x4d29a6=a0_0x3c30d6,_0x3a20d7=Module[_0x4d29a6(0x19e)](_0xfa1aa7);return _0x3a20d7;}export async function uploadCheat(_0x291902){const _0x4d3083=a0_0x3c30d6;try{const _0x2eb8fa=_0x291902[_0x4d3083(0x188)][0x0];await Module[_0x4d3083(0x166)](_0x2eb8fa,()=>{const _0x2a4d65=_0x4d3083;console[_0x2a4d65(0x15c)](_0x2a4d65(0x172),_0x2eb8fa['name']),localStorageFile(),Module['FSSync']();});}catch(_0x107b41){console[_0x4d3083(0x159)](_0x4d3083(0x14d),_0x107b41);}}export async function uploadSavSta(_0x329e9a){const _0x3b350a=a0_0x3c30d6;try{const _0x3bcded=_0x329e9a['files'][0x0];await Module[_0x3b350a(0x154)](_0x3bcded,()=>{const _0x39bc37=_0x3b350a;console[_0x39bc37(0x15c)](_0x39bc37(0x180),_0x3bcded[_0x39bc37(0x14a)]),localStorageFile(),Module[_0x39bc37(0x148)]();});}catch(_0x39ca3f){console['error'](_0x3b350a(0x167),_0x39ca3f);}}export async function uploadSaveOrSaveState(_0x18dc40){Module['uploadSaveOrSaveState'](_0x18dc40,()=>{const _0x305f61=a0_0x253a;localStorageFile(),Module[_0x305f61(0x148)]();});}export async function resumeGame(){const _0x20ca06=a0_0x3c30d6;Module[_0x20ca06(0x17d)](),Module[_0x20ca06(0x197)](),notiMessage(_0x20ca06(0x161),0x7d0);}export async function pauseGame(){const _0xee0dad=a0_0x3c30d6;Module[_0xee0dad(0x163)](),Module[_0xee0dad(0x197)](),notiMessage(_0xee0dad(0x16f),0x7d0);}export async function buttonPress(_0x33d38a){const _0x269ad3=a0_0x3c30d6;Module[_0x269ad3(0x169)](_0x33d38a);}export async function buttonUnpress(_0x28f1b2){const _0x585fbd=a0_0x3c30d6;Module[_0x585fbd(0x15a)](_0x28f1b2);}export async function screenShot(_0x1236ed){const _0x3a0347=a0_0x3c30d6,_0x1e03f9=localStorage[_0x3a0347(0x198)](_0x3a0347(0x16d)),_0x9a150f=_0x1e03f9[_0x3a0347(0x191)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x3a0347(0x19c)](''+_0x9a150f+_0x1236ed+_0x3a0347(0x14b)),await Module[_0x3a0347(0x148)]();const _0x177ff7=await fileToBase64(Module[_0x3a0347(0x186)](_0x3a0347(0x18f)+_0x9a150f+_0x1236ed+'.png')),_0x15cc4c=Date['now'](),_0x21cf5a=formatDateTime(_0x15cc4c);localStorage[_0x3a0347(0x176)](_0x1e03f9+'_dateState'+_0x1236ed,_0x21cf5a),localStorage[_0x3a0347(0x176)](_0x1e03f9+_0x3a0347(0x13f)+_0x1236ed,_0x177ff7);}export async function captureOCR(_0x7331bd){const _0x30ed9d=a0_0x3c30d6;Module[_0x30ed9d(0x19c)](_0x7331bd);const _0x3453bc=Module[_0x30ed9d(0x186)](_0x30ed9d(0x18f)+_0x7331bd);return _0x3453bc;}export async function setFastForwardMultiplier(_0x1498b6){const _0x49a26d=a0_0x3c30d6;Module[_0x49a26d(0x147)](_0x1498b6);}export function uploadCheats(_0x3d0197,_0x186d74,_0x5b10e0,_0x3ab545,_0x418c58){const _0x2f484d=a0_0x3c30d6;Module[_0x2f484d(0x166)](_0x3d0197,()=>{const _0x49eca0=_0x2f484d;Module[_0x49eca0(0x13b)](),setTimeout(()=>{const _0x597932=_0x49eca0;Module[_0x597932(0x148)]();},0x1f4),_0x3ab545&&(localStorage[_0x49eca0(0x176)](_0x186d74+_0x49eca0(0x193),_0x5b10e0),notiMessage(_0x49eca0(0x194),0x5dc)),_0x418c58[_0x49eca0(0x19d)]=localStorage['getItem'](_0x186d74+'_savedCheats'||_0x49eca0(0x16a));});}