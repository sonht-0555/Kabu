const a0_0x501082=a0_0x570d;(function(_0x3530ba,_0x1a7b6f){const _0x8688e9=a0_0x570d,_0x29473f=_0x3530ba();while(!![]){try{const _0x3d84e5=-parseInt(_0x8688e9(0x13a))/0x1*(-parseInt(_0x8688e9(0x15d))/0x2)+parseInt(_0x8688e9(0x16d))/0x3+-parseInt(_0x8688e9(0x14c))/0x4+parseInt(_0x8688e9(0x15a))/0x5*(-parseInt(_0x8688e9(0x143))/0x6)+parseInt(_0x8688e9(0x154))/0x7+parseInt(_0x8688e9(0x164))/0x8*(-parseInt(_0x8688e9(0x129))/0x9)+parseInt(_0x8688e9(0x15e))/0xa*(-parseInt(_0x8688e9(0x12d))/0xb);if(_0x3d84e5===_0x1a7b6f)break;else _0x29473f['push'](_0x29473f['shift']());}catch(_0x4175a0){_0x29473f['push'](_0x29473f['shift']());}}}(a0_0x334d,0xecc75));import a0_0x36d398 from'../core/mgba.js';import*as a0_0x42e8e9 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';const Module={'canvas':document['getElementById']('canvas')};function a0_0x334d(){const _0x2c702f=['visibilitychange','#20A5A6','now','visibilityState','state','textContent','9313650VnIQUf','application/octet-stream','click','.ss0','11xzebdV','remove','FSSync','\x20time(s)','fileSize','listCheats','innerWidth','tEXtComment\x00','uploadAll','hidden','files','autoLoadCheats','gbc1','5651jxbKjQ','setItem','endsWith','replace','Paused!','addEventListener','beforeunload','/data/games/','getItem','6WarTvz','gameName','setFastForwardMultiplier','type','revokeObjectURL','saveState','log','appendChild','toString','4029656kFraIN','set','buttonPress','resumeGame','buttonUnpress','0,0,','includes','loadGame','5856060oxwVTB','bottom','getElementById','length','listSaves','onLine','857005aBGroI','filter','turboState','472HAWOhE','1838170ZblbgK','image/png','encode','split','uId','disable','8AfirNy','downloadFile','body','classList','#E0C068','padStart','gbc','listStates','screenSize','3591333tdPUoe','charCodeAt','SDL2','persisted','_savedCheats','indexOf','screenshot','turboF','listRoms','.png','editFileName','Cheat\x20Enabled!','createElement','Do\x20you\x20want\x20to\x20load\x20save\x20state?','then','pagehide','deleteFile','add','visible','/data/screenshots/','download','createObjectURL','timer','Resumed!'];a0_0x334d=function(){return _0x2c702f;};return a0_0x334d();}function initializeCore(_0x44e825,_0x591f70){const _0x4d0d41=a0_0x570d;_0x44e825(_0x591f70)[_0x4d0d41(0x119)](function(_0x588e60){_0x588e60['FSInit']();});}initializeCore(a0_0x36d398,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x501082(0x156)]('canvas'),savedTurboState=localStorage[a0_0x501082(0x142)](a0_0x501082(0x15c)),controlSetting=document[a0_0x501082(0x156)]('control-setting');function handleVisibilityChange(_0x5e0655){const _0x32a34c=a0_0x501082;document[_0x32a34c(0x126)]===_0x32a34c(0x136)||_0x5e0655?.[_0x32a34c(0x146)]===_0x32a34c(0x140)||_0x5e0655?.[_0x32a34c(0x10e)]?(pauseGame(),canvas[_0x32a34c(0x167)][_0x32a34c(0x11c)](_0x32a34c(0x11d))):(setTimeout(()=>{const _0x58b50a=_0x32a34c;canvas[_0x58b50a(0x167)][_0x58b50a(0x12e)](_0x58b50a(0x11d));},0x258),controlSetting[_0x32a34c(0x167)]['contains'](_0x32a34c(0x11d))&&resumeGame());}async function statusShow(){const _0x4782af=a0_0x501082;document[_0x4782af(0x13f)](_0x4782af(0x11a),handleVisibilityChange),document['addEventListener'](_0x4782af(0x123),handleVisibilityChange),window[_0x4782af(0x13f)](_0x4782af(0x140),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x42e8e9[_0x4782af(0x112)](turboState)),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(localStorage['getItem']('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x4f46ea=a0_0x501082;await ledSave(_0x4f46ea(0x124)),await Module[_0x4f46ea(0x148)](0x0),await Module[_0x4f46ea(0x12f)](),await screenShot(0x0),console[_0x4f46ea(0x149)]('Auto\x20save\x20'+ ++countAutoSave+_0x4f46ea(0x130));}async function saveStateInCloud(){const _0x110f61=a0_0x501082,_0x7302f6=localStorage[_0x110f61(0x142)]('gameName'),_0x3045f0=_0x7302f6['replace'](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x3219ba=localStorage[_0x110f61(0x142)](_0x110f61(0x162));navigator[_0x110f61(0x159)]&&(_0x3219ba&&(await ledSave(_0x110f61(0x168)),await delay(0x3e8),await dpUploadFile(_0x3045f0,Module['downloadFile']('/data/states/'+_0x3045f0),_0x110f61(0x127)),await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x110f61(0x130),0x7d0)));}function startTimer(){let [_0x59784c,_0x2f4721,_0x1c7d97,_0x33f038,_0x1b301d]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x1704bd=a0_0x570d;_0x1c7d97++,_0x33f038++,_0x1b301d++;if(_0x1c7d97===0x3c)[_0x1c7d97,_0x2f4721]=[0x0,_0x2f4721+0x1];if(_0x2f4721===0x3c)[_0x2f4721,_0x59784c]=[0x0,_0x59784c+0x1];document[_0x1704bd(0x156)](_0x1704bd(0x121))[_0x1704bd(0x128)]=_0x59784c+'h'+_0x2f4721[_0x1704bd(0x14b)]()[_0x1704bd(0x169)](0x2,'0')+'.'+_0x1c7d97['toString']()['padStart'](0x2,'0');_0x33f038===0x3c&&(saveStatePeriodically(),_0x33f038=0x0);;_0x1b301d===0x708&&(saveStateInCloud(),_0x1b301d=0x0);;},0x3e8);}export async function uploadGame(_0x20ee1a){const _0x5e1c2b=a0_0x501082,_0xe01036=_0x20ee1a[_0x5e1c2b(0x137)][0x0];Module['uploadRom'](_0xe01036,()=>{Module['FSSync']();});}export async function loadGame(_0x4321d8){const _0x5dfcbd=a0_0x501082,_0x456be8=_0x4321d8[_0x5dfcbd(0x13d)](/\.(gba|gbc|gb|zip)$/,_0x5dfcbd(0x12c)),_0x1edf08=Module[_0x5dfcbd(0x16b)]()['filter'](_0x24e538=>_0x24e538!=='.'&&_0x24e538!=='..');intro['classList'][_0x5dfcbd(0x11c)](_0x5dfcbd(0x163)),errorLogElements[0x0]['style'][_0x5dfcbd(0x155)]='0',ingame[_0x5dfcbd(0x167)][_0x5dfcbd(0x12e)](_0x5dfcbd(0x163)),_0x4321d8[_0x5dfcbd(0x13c)]('.gbc')||_0x4321d8['endsWith']('.gb')?(canvas['classList'][_0x5dfcbd(0x11c)](_0x5dfcbd(0x16a)),areaTrans[_0x5dfcbd(0x167)]['add'](_0x5dfcbd(0x139)),localStorage['setItem']('screenSize',_0x5dfcbd(0x151)+(window[_0x5dfcbd(0x133)]-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage[_0x5dfcbd(0x13b)](_0x5dfcbd(0x16c),'0,0,'+(window[_0x5dfcbd(0x133)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x1edf08[_0x5dfcbd(0x152)](_0x456be8)?(await Module[_0x5dfcbd(0x153)](_0x5dfcbd(0x141)+_0x4321d8),confirm(_0x5dfcbd(0x118))&&(await Module['loadState'](0x0),localStorage['setItem'](_0x5dfcbd(0x144),_0x4321d8),await shaderData(),console[_0x5dfcbd(0x149)](_0x4321d8))):(await Module[_0x5dfcbd(0x153)](_0x5dfcbd(0x141)+_0x4321d8),localStorage[_0x5dfcbd(0x13b)](_0x5dfcbd(0x144),_0x4321d8),await shaderData(),console[_0x5dfcbd(0x149)](_0x4321d8)),await statusShow();}export async function saveState(_0x97072f){const _0x3370dd=a0_0x501082;await Module[_0x3370dd(0x148)](_0x97072f),await Module[_0x3370dd(0x12f)]();}export async function loadState(_0x3e48fe){await Module['loadState'](_0x3e48fe);}export async function downloadFile(_0x1790b7,_0x5055fe){const _0x264421=a0_0x501082,_0x5240e9=Module[_0x264421(0x165)](_0x1790b7),_0x1779ed=document[_0x264421(0x117)]('a');document[_0x264421(0x166)][_0x264421(0x14a)](_0x1779ed),_0x1779ed[_0x264421(0x11f)]=_0x5055fe;const _0x423553=new Blob([_0x5240e9],{'type':_0x264421(0x12a)});_0x1779ed['href']=URL[_0x264421(0x120)](_0x423553),_0x1779ed[_0x264421(0x12b)](),URL[_0x264421(0x147)](_0x423553),_0x1779ed[_0x264421(0x12e)]();}export function downloadFileInCloud(_0xe7b693){const _0x40b0f3=a0_0x501082,_0x46b794=Module[_0x40b0f3(0x165)](_0xe7b693);return _0x46b794;}export async function uploadFileInCloud(_0x19a77f){Module['uploadAll'](_0x19a77f,()=>{const _0x1496b0=a0_0x570d;localStorageFile(),Module[_0x1496b0(0x12f)]();});}export async function uploadFile(_0x2672ed){const _0x54d52e=a0_0x501082,_0x59b9a6=_0x2672ed[_0x54d52e(0x137)][0x0];Module[_0x54d52e(0x135)](_0x59b9a6,()=>{const _0x4dfb62=_0x54d52e;localStorageFile(),Module[_0x4dfb62(0x12f)]();});}export async function editFile(_0x5c4b4a,_0x3f67e4,_0x3e770d){const _0x4b669b=a0_0x501082;await Module[_0x4b669b(0x115)](_0x5c4b4a,_0x3f67e4,_0x3e770d),await Module[_0x4b669b(0x12f)]();}export async function deleteFile(_0x1d2602){const _0x14ed93=a0_0x501082;await Module[_0x14ed93(0x11b)](_0x1d2602),await Module[_0x14ed93(0x12f)]();}export function listGame(){const _0x3c45cb=a0_0x501082,_0x1ece2c=Module[_0x3c45cb(0x113)]()[_0x3c45cb(0x15b)](_0xa55ecf=>_0xa55ecf!=='.'&&_0xa55ecf!=='..');return _0x1ece2c;}export function listSave(){const _0x47b9aa=a0_0x501082,_0x5bd426=Module[_0x47b9aa(0x158)]()[_0x47b9aa(0x15b)](_0x4cc1cd=>_0x4cc1cd!=='.'&&_0x4cc1cd!=='..');return _0x5bd426;}export function listState(){const _0x24f603=a0_0x501082,_0x2d276f=Module[_0x24f603(0x16b)]()['filter'](_0x4c283f=>_0x4c283f!=='.'&&_0x4c283f!=='..');return _0x2d276f;}export function listCheat(){const _0x9f84f1=a0_0x501082,_0x5443b9=Module[_0x9f84f1(0x132)]()[_0x9f84f1(0x15b)](_0x49a00f=>_0x49a00f!=='.'&&_0x49a00f!=='..');return _0x5443b9;}export function listScreenshot(){const _0x50e562=a0_0x501082,_0x54beba=Module['listScreenshots']()[_0x50e562(0x15b)](_0x4260be=>_0x4260be!=='.'&&_0x4260be!=='..');return _0x54beba;}export function embedTextInPngFile(_0x6a365e,_0x1d12c7,_0x17ea04){const _0x1ca68d=a0_0x501082;let _0x5d9e58=atob(_0x6a365e['split'](',')[0x1]),_0xe688b9=new Uint8Array(_0x5d9e58[_0x1ca68d(0x157)]);for(let _0x4b5629=0x0;_0x4b5629<_0x5d9e58[_0x1ca68d(0x157)];_0x4b5629++){_0xe688b9[_0x4b5629]=_0x5d9e58[_0x1ca68d(0x10c)](_0x4b5629);}let _0x21c83c=new TextEncoder()[_0x1ca68d(0x160)]('tEXtComment\x00'+_0x1d12c7),_0x4851a4=new Uint8Array(_0xe688b9[_0x1ca68d(0x157)]+_0x21c83c[_0x1ca68d(0x157)]);_0x4851a4[_0x1ca68d(0x14d)](_0xe688b9,0x0),_0x4851a4[_0x1ca68d(0x14d)](_0x21c83c,_0xe688b9[_0x1ca68d(0x157)]);let _0x1e4081=new Blob([_0x4851a4],{'type':_0x1ca68d(0x15f)}),_0x253297=new File([_0x1e4081],_0x17ea04,{'type':'image/png'});return _0x253297;}export function extractTextFromPngBase64(_0x5e632a){const _0x13e7c1=a0_0x501082;let _0x4439d8=atob(_0x5e632a[_0x13e7c1(0x161)](',')[0x1]),_0x355886=_0x13e7c1(0x134),_0x687f9c=_0x4439d8[_0x13e7c1(0x110)](_0x355886);if(_0x687f9c!==-0x1)return _0x4439d8['substring'](_0x687f9c+_0x355886[_0x13e7c1(0x157)]);return null;}export function fileSize(_0x314444){const _0xe2c69=a0_0x501082,_0x4288c4=Module[_0xe2c69(0x131)](_0x314444);return _0x4288c4;}export async function resumeGame(){const _0x3c20c1=a0_0x501082;Module[_0x3c20c1(0x14f)](),Module[_0x3c20c1(0x10d)](),notiMessage(_0x3c20c1(0x122),0x7d0);}export async function pauseGame(){const _0x3288c4=a0_0x501082;Module['pauseGame'](),Module[_0x3288c4(0x10d)](),notiMessage(_0x3288c4(0x13e),0x7d0);}export async function buttonPress(_0x35a04c){const _0x133943=a0_0x501082;Module[_0x133943(0x14e)](_0x35a04c);}export async function buttonUnpress(_0x482ab8){const _0x48ac33=a0_0x501082;Module[_0x48ac33(0x150)](_0x482ab8);}export async function screenShot(_0x1c2091){const _0x3fd981=a0_0x501082,_0x6f469=localStorage[_0x3fd981(0x142)](_0x3fd981(0x144))[_0x3fd981(0x13d)](/\.(gba|gbc|gb|zip)$/,''),_0x181130=_0x6f469+'_'+_0x1c2091+_0x3fd981(0x114);await Module['screenshot'](_0x181130),await Module[_0x3fd981(0x12f)]();const _0x600796=await fileToBase64(Module[_0x3fd981(0x165)](_0x3fd981(0x11e)+_0x181130)),_0x4178d5=embedTextInPngFile(_0x600796,formatDateTime(Date[_0x3fd981(0x125)]()),_0x181130);Module[_0x3fd981(0x135)](_0x4178d5,()=>{const _0x4ae211=_0x3fd981;localStorageFile(),Module[_0x4ae211(0x12f)]();});}function a0_0x570d(_0x4e339d,_0x53231b){const _0x334d94=a0_0x334d();return a0_0x570d=function(_0x570dd3,_0x4ab232){_0x570dd3=_0x570dd3-0x10c;let _0x1a7cf6=_0x334d94[_0x570dd3];return _0x1a7cf6;},a0_0x570d(_0x4e339d,_0x53231b);}export async function dowloadScreenShot(_0x4635d5){const _0x42b1cc=a0_0x501082;try{const _0x53354d=await fileToBase64(Module[_0x42b1cc(0x165)](_0x4635d5));return _0x53354d;}catch{}}export async function captureOCR(_0x3045fb){const _0x69837e=a0_0x501082;Module[_0x69837e(0x111)](_0x3045fb);const _0x353522=Module[_0x69837e(0x165)]('/data/screenshots/'+_0x3045fb);return _0x353522;}export async function setFastForwardMultiplier(_0x12544f){const _0x143b19=a0_0x501082;Module[_0x143b19(0x145)](_0x12544f);}export function uploadCheats(_0x5a345d,_0x3d4eab,_0xb30c8c,_0x188c65,_0x13de19){const _0x47e51e=a0_0x501082;Module[_0x47e51e(0x135)](_0x5a345d,()=>{const _0x2f963a=_0x47e51e;Module[_0x2f963a(0x138)](),setTimeout(()=>{const _0x22b6e0=_0x2f963a;Module[_0x22b6e0(0x12f)]();},0x1f4),_0x188c65&&(localStorage[_0x2f963a(0x13b)](_0x3d4eab+_0x2f963a(0x10f),_0xb30c8c),notiMessage(_0x2f963a(0x116),0x5dc)),_0x13de19[_0x2f963a(0x128)]=localStorage['getItem'](_0x3d4eab+'_savedCheats'||'Off');});}export function setVolume(_0xcb71ef){Module['setVolume'](_0xcb71ef);}