const a0_0x176935=a0_0xd5b4;(function(_0x1422fe,_0x4fede8){const _0x5dfdfc=a0_0xd5b4,_0x957f3b=_0x1422fe();while(!![]){try{const _0x1c427e=-parseInt(_0x5dfdfc(0x88))/0x1+parseInt(_0x5dfdfc(0xdb))/0x2+-parseInt(_0x5dfdfc(0xbc))/0x3+parseInt(_0x5dfdfc(0xce))/0x4*(-parseInt(_0x5dfdfc(0xb6))/0x5)+parseInt(_0x5dfdfc(0x8a))/0x6*(-parseInt(_0x5dfdfc(0xbb))/0x7)+parseInt(_0x5dfdfc(0x9b))/0x8+parseInt(_0x5dfdfc(0xbd))/0x9*(parseInt(_0x5dfdfc(0xb5))/0xa);if(_0x1c427e===_0x4fede8)break;else _0x957f3b['push'](_0x957f3b['shift']());}catch(_0x237847){_0x957f3b['push'](_0x957f3b['shift']());}}}(a0_0x18d3,0x5b4a9));import a0_0x1f73ea from'../core/mgba.js';import*as a0_0x17761b from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';function a0_0x18d3(){const _0x35549e=['autoLoadCheats','Auto\x20save\x20','FSInit','SDL2','uploadSaveOrSaveState','replace','listGames','files','getElementById','_slot0.txt','name','Cloud\x20upload\x20','toString','includes','2765690MKFYfF','10RFXoxI','_imageState0','now','error','setItem','3533313cdyuiC','778968oevpco','9mZqyrt','listSaves','control-setting','remove','application/octet-stream','Resumed!','_imageState','click','pauseGame','textContent','setFastForwardMultiplier','Cheat\x20Enabled!','loadGame','body','.ss0','text/plain','editFileName','270212XtGzyu','onLine','download','beforeunload','createElement','FSSync','#20A5A6','visible','contains','getItem','.gb','visibilitychange','gbc','1296706nTvZYF','No\x20screenshot!','_dateState','pagehide','then','disable','saveState','Online!','screenSize','_savedCheats','downloadFile','uploadRom','/data/screenshots/','padStart','/data/games/','log','add','202046EJciYP','turboF','6DrkwnN','listStates','Save/State\x20uploaded\x20successfully:','classList','gameName','appendChild','loadState','endsWith','uId','screenshot','innerWidth','buttonPress','bottom','timer','#E0C068','/data/states/','uploadCheats','4404592rVZzeO','gbc1','Do\x20you\x20want\x20to\x20load\x20save\x20state?','Unable\x20to\x20upload\x20to\x20Cloud!','Off','addEventListener','canvas','fileSize','.png','Error\x20uploadCheat:','slotStateSaved','revokeObjectURL'];a0_0x18d3=function(){return _0x35549e;};return a0_0x18d3();}const Module={'canvas':document[a0_0x176935(0xaf)]('canvas')};function initializeCore(_0x2638af,_0x60a886){const _0x37ea9d=a0_0x176935;_0x2638af(_0x60a886)[_0x37ea9d(0xdf)](function(_0x495fc8){const _0x2536ea=_0x37ea9d;_0x495fc8[_0x2536ea(0xa9)]();});}initializeCore(a0_0x1f73ea,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;function a0_0xd5b4(_0x27c1cf,_0x5c5031){const _0x18d31f=a0_0x18d3();return a0_0xd5b4=function(_0xd5b441,_0x368f71){_0xd5b441=_0xd5b441-0x85;let _0x1329d4=_0x18d31f[_0xd5b441];return _0x1329d4;},a0_0xd5b4(_0x27c1cf,_0x5c5031);}const canvas=document[a0_0x176935(0xaf)](a0_0x176935(0xa1)),savedTurboState=localStorage[a0_0x176935(0xd7)]('turboState'),controlSetting=document['getElementById'](a0_0x176935(0xbf));function handleVisibilityChange(_0x511520){const _0x4d8d7a=a0_0x176935;document['visibilityState']==='hidden'||_0x511520?.['type']===_0x4d8d7a(0xd1)||_0x511520?.['persisted']?(pauseGame(),canvas[_0x4d8d7a(0x8d)][_0x4d8d7a(0x87)]('visible')):(setTimeout(()=>{const _0x5d08ea=_0x4d8d7a;canvas['classList']['remove'](_0x5d08ea(0xd5));},0x258),controlSetting['classList'][_0x4d8d7a(0xd6)](_0x4d8d7a(0xd5))&&resumeGame());}async function statusShow(){const _0x294379=a0_0x176935;document[_0x294379(0xa0)](_0x294379(0xde),handleVisibilityChange),document[_0x294379(0xa0)](_0x294379(0xd9),handleVisibilityChange),window[_0x294379(0xa0)](_0x294379(0xd1),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x17761b[_0x294379(0x89)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x294379(0xd7)](_0x294379(0xa5)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x59fad6=a0_0x176935;await ledSave(_0x59fad6(0xd4)),await Module[_0x59fad6(0xe1)](0x0),await Module[_0x59fad6(0xd3)](),await screenShot(0x0),console['log'](_0x59fad6(0xa8)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x5183d8=a0_0x176935,_0x33f3cf=localStorage[_0x5183d8(0xd7)](_0x5183d8(0x8e)),_0x91c2ee=_0x33f3cf[_0x5183d8(0xac)]('.gba',_0x5183d8(0xcb)),_0x5b2b5e=localStorage[_0x5183d8(0xd7)](_0x5183d8(0x92)),_0x5e16c8=localStorage[_0x5183d8(0xd7)](_0x33f3cf+_0x5183d8(0xb7)),_0x2a1f04=localStorage[_0x5183d8(0xd7)](_0x33f3cf+'_dateState0');if(navigator[_0x5183d8(0xcf)]){if(_0x5b2b5e){await ledSave(_0x5183d8(0x98)),await delay(0x3e8),await dpUploadFile(_0x91c2ee,Module[_0x5183d8(0xe5)](_0x5183d8(0x99)+_0x91c2ee));if(_0x5e16c8!==null){const _0x30eb5b=_0x5e16c8+'\x0a\x0a'+_0x2a1f04,_0x1312a5=new Blob([_0x30eb5b],{'type':_0x5183d8(0xcc)});await dpUploadFile(_0x33f3cf+_0x5183d8(0xb0),_0x1312a5);}else console[_0x5183d8(0x86)](_0x5183d8(0xdc));await lockNoti('',_0x5183d8(0xb2)+ ++countUpload+'\x20time(s)',0x7d0);}else console[_0x5183d8(0x86)](_0x5183d8(0x9e));}else console[_0x5183d8(0x86)](_0x5183d8(0xe2));}function startTimer(){let [_0xf7caa6,_0x26348d,_0x568a4c,_0x2aac35,_0x41e565]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x142744=a0_0xd5b4;_0x568a4c++,_0x2aac35++,_0x41e565++;if(_0x568a4c===0x3c)[_0x568a4c,_0x26348d]=[0x0,_0x26348d+0x1];if(_0x26348d===0x3c)[_0x26348d,_0xf7caa6]=[0x0,_0xf7caa6+0x1];document[_0x142744(0xaf)](_0x142744(0x97))[_0x142744(0xc6)]=_0xf7caa6+'h'+_0x26348d[_0x142744(0xb3)]()[_0x142744(0xe8)](0x2,'0')+'.'+_0x568a4c[_0x142744(0xb3)]()[_0x142744(0xe8)](0x2,'0');_0x2aac35===0x3c&&(saveStatePeriodically(),_0x2aac35=0x0);;_0x2aac35===0xe10&&(saveStateInCloud(),_0x41e565=0x0);;},0x3e8);}export async function uploadGame(_0x213301){const _0x30e1fc=a0_0x176935,_0x4faa68=_0x213301[_0x30e1fc(0xae)][0x0];Module[_0x30e1fc(0xe6)](_0x4faa68,()=>{const _0x179885=_0x30e1fc;Module[_0x179885(0xd3)]();});}export async function loadGame(_0x42788e){const _0x48d5c9=a0_0x176935,_0x44777f=_0x42788e[_0x48d5c9(0xac)](/\.(gba|gbc|gb|zip)$/,_0x48d5c9(0xcb)),_0x1e3ac2=Module[_0x48d5c9(0x8b)]();intro[_0x48d5c9(0x8d)][_0x48d5c9(0x87)](_0x48d5c9(0xe0)),errorLogElements[0x0]['style'][_0x48d5c9(0x96)]='0',ingame[_0x48d5c9(0x8d)][_0x48d5c9(0xc0)](_0x48d5c9(0xe0)),_0x42788e[_0x48d5c9(0x91)]('.gbc')||_0x42788e[_0x48d5c9(0x91)](_0x48d5c9(0xd8))?(canvas['classList'][_0x48d5c9(0x87)](_0x48d5c9(0xda)),areaTrans['classList'][_0x48d5c9(0x87)](_0x48d5c9(0x9c)),localStorage['setItem'](_0x48d5c9(0xe3),'0,0,'+(window[_0x48d5c9(0x94)]-0xe6)+','+(window[_0x48d5c9(0x94)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x48d5c9(0xe3),'0,0,'+(window['innerWidth']-0x96)+','+(window[_0x48d5c9(0x94)]-0x96)*0x2/0x3),_0x1e3ac2[_0x48d5c9(0xb4)](_0x44777f)?(await Module[_0x48d5c9(0xc9)](_0x48d5c9(0x85)+_0x42788e),confirm(_0x48d5c9(0x9d))&&(await Module[_0x48d5c9(0x90)](0x0),localStorage[_0x48d5c9(0xba)](_0x48d5c9(0x8e),_0x42788e),console[_0x48d5c9(0x86)](_0x42788e))):(await Module['loadGame']('/data/games/'+_0x42788e),localStorage['setItem']('gameName',_0x42788e)),await statusShow();}export async function saveState(_0x1b7f56){const _0x3aea2a=a0_0x176935;await Module[_0x3aea2a(0xe1)](_0x1b7f56),await Module['FSSync']();}export async function loadState(_0x442ef8){const _0x383388=a0_0x176935;await Module[_0x383388(0x90)](_0x442ef8);}export async function downloadFile(_0x29dc19,_0x4ec98c){const _0x23154f=a0_0x176935,_0x577e3e=Module[_0x23154f(0xe5)](_0x29dc19),_0x141192=document[_0x23154f(0xd2)]('a');document[_0x23154f(0xca)][_0x23154f(0x8f)](_0x141192),_0x141192[_0x23154f(0xd0)]=_0x4ec98c;const _0x45873d=new Blob([_0x577e3e],{'type':_0x23154f(0xc1)});_0x141192['href']=URL['createObjectURL'](_0x45873d),_0x141192[_0x23154f(0xc4)](),URL[_0x23154f(0xa6)](_0x45873d),_0x141192[_0x23154f(0xc0)]();}export function downloadFileInCloud(_0x1b975c){const _0x3a1907=Module['downloadFile'](_0x1b975c);return _0x3a1907;}export async function uploadFile(_0x2337fe){const _0x2d87a6=a0_0x176935,_0x18142c=_0x2337fe[_0x2d87a6(0xae)][0x0];Module[_0x2d87a6(0xab)](_0x18142c,()=>{const _0x36117a=_0x2d87a6;Module[_0x36117a(0xd3)]();});}export async function editFile(_0x3b4c1c,_0xc3900c,_0x4b9a9e){const _0x1eca48=a0_0x176935;await Module[_0x1eca48(0xcd)](_0x3b4c1c,_0xc3900c,_0x4b9a9e),await Module['FSSync']();}export async function deleteFile(_0x5a8fba){const _0x18f9a1=a0_0x176935;await Module['deleteFile'](_0x5a8fba),await Module[_0x18f9a1(0xd3)]();}export function listGame(){const _0x1cb8c5=a0_0x176935,_0x3d2f49=Module[_0x1cb8c5(0xad)]();return _0x3d2f49;}export function listSave(){const _0x3aeda9=a0_0x176935,_0xc96d67=Module[_0x3aeda9(0xbe)]();return _0xc96d67;}export function listState(){const _0x49e51c=a0_0x176935,_0xb78066=Module[_0x49e51c(0x8b)]();return _0xb78066;}export function listCheat(){const _0xf27e79=Module['listCheats']();return _0xf27e79;}export function listScreenshot(){const _0x19b0d6=Module['listScreenshots']();return _0x19b0d6;}export function fileSize(_0x495069){const _0x2ddbc3=a0_0x176935,_0x461031=Module[_0x2ddbc3(0xa2)](_0x495069);return _0x461031;}export async function uploadCheat(_0x45456b){const _0x573a37=a0_0x176935;try{const _0x454817=_0x45456b['files'][0x0];await Module[_0x573a37(0x9a)](_0x454817,()=>{const _0x5b8f82=_0x573a37;console[_0x5b8f82(0x86)]('Cheat\x20uploaded\x20successfully:',_0x454817[_0x5b8f82(0xb1)]),localStorageFile(),Module['FSSync']();});}catch(_0x2eedb0){console[_0x573a37(0xb9)](_0x573a37(0xa4),_0x2eedb0);}}export async function uploadSavSta(_0x558e57){const _0x432f94=a0_0x176935;try{const _0x413f91=_0x558e57[_0x432f94(0xae)][0x0];await Module[_0x432f94(0xab)](_0x413f91,()=>{const _0x5e40d0=_0x432f94;console['log'](_0x5e40d0(0x8c),_0x413f91[_0x5e40d0(0xb1)]),localStorageFile(),Module[_0x5e40d0(0xd3)]();});}catch(_0x50c94b){console[_0x432f94(0xb9)]('Error\x20uploadSavSta:',_0x50c94b);}}export async function uploadSaveOrSaveState(_0x366eea){const _0x23b8ad=a0_0x176935;Module[_0x23b8ad(0xab)](_0x366eea,()=>{localStorageFile(),Module['FSSync']();});}export async function resumeGame(){const _0x5117c6=a0_0x176935;Module['resumeGame'](),Module[_0x5117c6(0xaa)](),notiMessage(_0x5117c6(0xc2),0x7d0);}export async function pauseGame(){const _0x1a8737=a0_0x176935;Module[_0x1a8737(0xc5)](),Module[_0x1a8737(0xaa)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x6c59f4){const _0x4a444a=a0_0x176935;Module[_0x4a444a(0x95)](_0x6c59f4);}export async function buttonUnpress(_0x55a3ca){Module['buttonUnpress'](_0x55a3ca);}export async function screenShot(_0x9bb3c5){const _0x20daca=a0_0x176935,_0x38b7b0=localStorage[_0x20daca(0xd7)](_0x20daca(0x8e)),_0x17848a=_0x38b7b0[_0x20daca(0xac)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x20daca(0x93)](''+_0x17848a+_0x9bb3c5+_0x20daca(0xa3)),await Module[_0x20daca(0xd3)]();const _0x341e46=await fileToBase64(Module['downloadFile'](_0x20daca(0xe7)+_0x17848a+_0x9bb3c5+'.png')),_0x565c69=Date[_0x20daca(0xb8)](),_0x18e7ad=formatDateTime(_0x565c69);localStorage['setItem'](_0x38b7b0+_0x20daca(0xdd)+_0x9bb3c5,_0x18e7ad),localStorage[_0x20daca(0xba)](_0x38b7b0+_0x20daca(0xc3)+_0x9bb3c5,_0x341e46);}export async function captureOCR(_0x157a38){const _0x34e1e8=a0_0x176935;Module[_0x34e1e8(0x93)](_0x157a38);const _0x37b0ae=Module['downloadFile'](_0x34e1e8(0xe7)+_0x157a38);return _0x37b0ae;}export async function setFastForwardMultiplier(_0x387637){const _0x3c4b5a=a0_0x176935;Module[_0x3c4b5a(0xc7)](_0x387637);}export function uploadCheats(_0x2fdc6b,_0x3b8da1,_0xc6ff36,_0x3f6547,_0x3259a4){const _0x14c151=a0_0x176935;Module[_0x14c151(0x9a)](_0x2fdc6b,()=>{const _0x2f833b=_0x14c151;Module[_0x2f833b(0xa7)](),setTimeout(()=>{Module['FSSync']();},0x1f4),_0x3f6547&&(localStorage['setItem'](_0x3b8da1+'_savedCheats',_0xc6ff36),notiMessage(_0x2f833b(0xc8),0x5dc)),_0x3259a4[_0x2f833b(0xc6)]=localStorage['getItem'](_0x3b8da1+_0x2f833b(0xe4)||_0x2f833b(0x9f));});}