function a0_0xb3a2(){const _0x59443f=['contains','application/octet-stream','padStart','gbc1','style','/data/games/','slotStateSaved','turboF','Off','body','.png','4010380jUfQBe','charCodeAt','remove','438190YIJWDj','tEXtComment\x00','appendChild','SDL2','downloadFile','getElementById','getItem','4PJLfOX','Cheat\x20Enabled!','uploadAll','.gb','Unable\x20to\x20upload\x20to\x20Cloud!','turboState','log','now','timer','.ss0','split','_imageState0','_dateState0','Online!','text/plain','innerWidth','1828740xvyMtx','revokeObjectURL','Cloud\x20upload\x20','gameName','endsWith','Paused!','download','loadState','type','/data/states/','pauseGame','listStates','listSaves','image/png','#E0C068','disable','resumeGame','Do\x20you\x20want\x20to\x20load\x20save\x20state?','4428936QgbFpA','setItem','textContent','files','fileSize','canvas','pagehide','listRoms','4377296fmHNos','hidden','replace','visible','autoLoadCheats','add','classList','FSSync','loadGame','27RMFySb','beforeunload','/data/screenshots/','buttonUnpress','substring','filter','0,0,','gbc','createObjectURL','click','control-setting','addEventListener','_savedCheats','toString','editFileName','screenSize','10368281gOYcfR','bottom','No\x20screenshot!','onLine','encode','listScreenshots','set','\x20time(s)','screenshot','#20A5A6','includes','length','uploadRom','84tONFIf','Resumed!','877033ClWwEX'];a0_0xb3a2=function(){return _0x59443f;};return a0_0xb3a2();}const a0_0x2b720c=a0_0x3ce8;(function(_0x4ad9eb,_0x1ff9d1){const _0x1eef83=a0_0x3ce8,_0x512103=_0x4ad9eb();while(!![]){try{const _0x2cebf7=-parseInt(_0x1eef83(0x1ea))/0x1+-parseInt(_0x1eef83(0x200))/0x2*(-parseInt(_0x1eef83(0x210))/0x3)+-parseInt(_0x1eef83(0x1c2))/0x4+parseInt(_0x1eef83(0x1f9))/0x5*(parseInt(_0x1eef83(0x1e8))/0x6)+-parseInt(_0x1eef83(0x1db))/0x7+parseInt(_0x1eef83(0x222))/0x8+-parseInt(_0x1eef83(0x1cb))/0x9*(-parseInt(_0x1eef83(0x1f6))/0xa);if(_0x2cebf7===_0x1ff9d1)break;else _0x512103['push'](_0x512103['shift']());}catch(_0x13f1f0){_0x512103['push'](_0x512103['shift']());}}}(a0_0xb3a2,0xb72cb));import a0_0x1ad6a5 from'../core/mgba.js';import*as a0_0x24c97c from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x2b720c(0x1fe)](a0_0x2b720c(0x1bf))};function initializeCore(_0x22ecab,_0xa21820){_0x22ecab(_0xa21820)['then'](function(_0x1d0921){_0x1d0921['FSInit']();});}initializeCore(a0_0x1ad6a5,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;function a0_0x3ce8(_0xea48a8,_0x1e278f){const _0xb3a2e=a0_0xb3a2();return a0_0x3ce8=function(_0x3ce8f7,_0x28115f){_0x3ce8f7=_0x3ce8f7-0x1bb;let _0x19aaa3=_0xb3a2e[_0x3ce8f7];return _0x19aaa3;},a0_0x3ce8(_0xea48a8,_0x1e278f);}const canvas=document[a0_0x2b720c(0x1fe)]('canvas'),savedTurboState=localStorage[a0_0x2b720c(0x1ff)](a0_0x2b720c(0x205)),controlSetting=document['getElementById'](a0_0x2b720c(0x1d5));function handleVisibilityChange(_0x41432){const _0x527850=a0_0x2b720c;document['visibilityState']===_0x527850(0x1c3)||_0x41432?.[_0x527850(0x218)]===_0x527850(0x1cc)||_0x41432?.['persisted']?(pauseGame(),canvas[_0x527850(0x1c8)]['add'](_0x527850(0x1c5))):(setTimeout(()=>{const _0x2fa5bc=_0x527850;canvas[_0x2fa5bc(0x1c8)][_0x2fa5bc(0x1f8)](_0x2fa5bc(0x1c5));},0x258),controlSetting[_0x527850(0x1c8)][_0x527850(0x1eb)](_0x527850(0x1c5))&&resumeGame());}async function statusShow(){const _0xcf63dc=a0_0x2b720c;document[_0xcf63dc(0x1d6)](_0xcf63dc(0x1c0),handleVisibilityChange),document[_0xcf63dc(0x1d6)]('visibilitychange',handleVisibilityChange),window[_0xcf63dc(0x1d6)](_0xcf63dc(0x1cc),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x24c97c[_0xcf63dc(0x1f2)](turboState)),await delay(0xc8),await Module[_0xcf63dc(0x1fc)](),await delay(0x320),await led(parseInt(localStorage[_0xcf63dc(0x1ff)](_0xcf63dc(0x1f1)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x21a8ed=a0_0x2b720c;await ledSave(_0x21a8ed(0x1e4)),await Module['saveState'](0x0),await Module[_0x21a8ed(0x1c9)](),await screenShot(0x0),console['log']('Auto\x20save\x20'+ ++countAutoSave+_0x21a8ed(0x1e2));}async function saveStateInCloud(){const _0xb4e97a=a0_0x2b720c,_0x14ce54=localStorage[_0xb4e97a(0x1ff)](_0xb4e97a(0x213)),_0x5eba57=_0x14ce54[_0xb4e97a(0x1c4)](/\.(zip|gb|gbc|gba)$/,_0xb4e97a(0x209)),_0x5b92c9=localStorage[_0xb4e97a(0x1ff)]('uId'),_0x2f67e0=localStorage[_0xb4e97a(0x1ff)](_0x14ce54+_0xb4e97a(0x20b)),_0x36e6a7=localStorage[_0xb4e97a(0x1ff)](_0x14ce54+_0xb4e97a(0x20c));if(navigator[_0xb4e97a(0x1de)]){if(_0x5b92c9){await ledSave(_0xb4e97a(0x21e)),await delay(0x3e8),await dpUploadFile(_0x5eba57,Module[_0xb4e97a(0x1fd)](_0xb4e97a(0x219)+_0x5eba57));if(_0x2f67e0!==null){const _0x37a2ae=_0x2f67e0+'\x0a\x0a'+_0x36e6a7,_0x53da47=new Blob([_0x37a2ae],{'type':_0xb4e97a(0x20e)});await dpUploadFile(_0x14ce54+'_slot0.txt',_0x53da47);}else console['log'](_0xb4e97a(0x1dd));await lockNoti('',_0xb4e97a(0x212)+ ++countUpload+_0xb4e97a(0x1e2),0x7d0);}else console[_0xb4e97a(0x206)](_0xb4e97a(0x204));}else console[_0xb4e97a(0x206)](_0xb4e97a(0x20d));}function startTimer(){let [_0x368560,_0x1756d3,_0x563809,_0x4b8602,_0x20a693]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x27b62a=a0_0x3ce8;_0x563809++,_0x4b8602++,_0x20a693++;if(_0x563809===0x3c)[_0x563809,_0x1756d3]=[0x0,_0x1756d3+0x1];if(_0x1756d3===0x3c)[_0x1756d3,_0x368560]=[0x0,_0x368560+0x1];document[_0x27b62a(0x1fe)](_0x27b62a(0x208))[_0x27b62a(0x1bc)]=_0x368560+'h'+_0x1756d3[_0x27b62a(0x1d8)]()[_0x27b62a(0x1ed)](0x2,'0')+'.'+_0x563809[_0x27b62a(0x1d8)]()[_0x27b62a(0x1ed)](0x2,'0');_0x4b8602===0x3c&&(saveStatePeriodically(),_0x4b8602=0x0);;_0x20a693===0xe10&&(saveStateInCloud(),_0x20a693=0x0);;},0x3e8);}export async function uploadGame(_0xfcd569){const _0xe28482=a0_0x2b720c,_0x511520=_0xfcd569[_0xe28482(0x1bd)][0x0];Module[_0xe28482(0x1e7)](_0x511520,()=>{const _0x3ed3cc=_0xe28482;Module[_0x3ed3cc(0x1c9)]();});}export async function loadGame(_0x283f2b){const _0x246783=a0_0x2b720c,_0x593fe6=_0x283f2b['replace'](/\.(gba|gbc|gb|zip)$/,_0x246783(0x209)),_0x4f7e4b=Module[_0x246783(0x21b)]()[_0x246783(0x1d0)](_0x37d167=>_0x37d167!=='.'&&_0x37d167!=='..');intro[_0x246783(0x1c8)]['add'](_0x246783(0x21f)),errorLogElements[0x0][_0x246783(0x1ef)][_0x246783(0x1dc)]='0',ingame[_0x246783(0x1c8)]['remove'](_0x246783(0x21f)),_0x283f2b['endsWith']('.gbc')||_0x283f2b[_0x246783(0x214)](_0x246783(0x203))?(canvas[_0x246783(0x1c8)][_0x246783(0x1c7)](_0x246783(0x1d2)),areaTrans[_0x246783(0x1c8)][_0x246783(0x1c7)](_0x246783(0x1ee)),localStorage[_0x246783(0x1bb)](_0x246783(0x1da),_0x246783(0x1d1)+(window['innerWidth']-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage[_0x246783(0x1bb)]('screenSize',_0x246783(0x1d1)+(window[_0x246783(0x20f)]-0x96)+','+(window[_0x246783(0x20f)]-0x96)*0x2/0x3),_0x4f7e4b[_0x246783(0x1e5)](_0x593fe6)?(await Module[_0x246783(0x1ca)](_0x246783(0x1f0)+_0x283f2b),confirm(_0x246783(0x221))&&(await Module[_0x246783(0x217)](0x0),localStorage[_0x246783(0x1bb)](_0x246783(0x213),_0x283f2b),console[_0x246783(0x206)](_0x283f2b))):(await Module[_0x246783(0x1ca)](_0x246783(0x1f0)+_0x283f2b),localStorage['setItem']('gameName',_0x283f2b),console[_0x246783(0x206)](_0x283f2b)),await statusShow();}export async function saveState(_0x5e082e){const _0x510e64=a0_0x2b720c;await Module['saveState'](_0x5e082e),await Module[_0x510e64(0x1c9)]();}export async function loadState(_0x435e2d){const _0x39555e=a0_0x2b720c;await Module[_0x39555e(0x217)](_0x435e2d);}export async function downloadFile(_0x207f79,_0x3bbe94){const _0x7a5544=a0_0x2b720c,_0x3431c5=Module['downloadFile'](_0x207f79),_0x36d685=document['createElement']('a');document[_0x7a5544(0x1f4)][_0x7a5544(0x1fb)](_0x36d685),_0x36d685[_0x7a5544(0x216)]=_0x3bbe94;const _0x3b3a84=new Blob([_0x3431c5],{'type':_0x7a5544(0x1ec)});_0x36d685['href']=URL[_0x7a5544(0x1d3)](_0x3b3a84),_0x36d685[_0x7a5544(0x1d4)](),URL[_0x7a5544(0x211)](_0x3b3a84),_0x36d685[_0x7a5544(0x1f8)]();}export function downloadFileInCloud(_0x4bd591){const _0x565867=a0_0x2b720c,_0xe24fc8=Module[_0x565867(0x1fd)](_0x4bd591);return _0xe24fc8;}export async function uploadFile(_0x457e69){const _0x3fb3c3=a0_0x2b720c,_0x4e9127=_0x457e69['files'][0x0];Module[_0x3fb3c3(0x202)](_0x4e9127,()=>{const _0xc66d02=_0x3fb3c3;localStorageFile(),Module[_0xc66d02(0x1c9)]();});}export async function editFile(_0x2f2699,_0x30bb79,_0x536a0c){const _0x336a1b=a0_0x2b720c;await Module[_0x336a1b(0x1d9)](_0x2f2699,_0x30bb79,_0x536a0c),await Module['FSSync']();}export async function deleteFile(_0x4b96ab){const _0x122696=a0_0x2b720c;await Module['deleteFile'](_0x4b96ab),await Module[_0x122696(0x1c9)]();}export function listGame(){const _0x2a5673=a0_0x2b720c,_0x9b53fa=Module[_0x2a5673(0x1c1)]()[_0x2a5673(0x1d0)](_0xb2844a=>_0xb2844a!=='.'&&_0xb2844a!=='..');return _0x9b53fa;}export function listSave(){const _0x10f0f7=a0_0x2b720c,_0x5191ea=Module[_0x10f0f7(0x21c)]()[_0x10f0f7(0x1d0)](_0x42ff78=>_0x42ff78!=='.'&&_0x42ff78!=='..');return _0x5191ea;}export function listState(){const _0x280c23=a0_0x2b720c,_0x3e8d7a=Module[_0x280c23(0x21b)]()['filter'](_0xc19a46=>_0xc19a46!=='.'&&_0xc19a46!=='..');return _0x3e8d7a;}export function listCheat(){const _0x89d4a7=Module['listCheats']()['filter'](_0xdea63e=>_0xdea63e!=='.'&&_0xdea63e!=='..');return _0x89d4a7;}export function listScreenshot(){const _0x5aee34=a0_0x2b720c,_0x5c07ac=Module[_0x5aee34(0x1e0)]()[_0x5aee34(0x1d0)](_0xf01999=>_0xf01999!=='.'&&_0xf01999!=='..');return _0x5c07ac;}export function embedTextInPngFile(_0x24b21d,_0x1c9767,_0x2566cb){const _0x4d2b8b=a0_0x2b720c;let _0xdfa2e9=atob(_0x24b21d[_0x4d2b8b(0x20a)](',')[0x1]),_0x4a1f83=new Uint8Array(_0xdfa2e9[_0x4d2b8b(0x1e6)]);for(let _0x3a31aa=0x0;_0x3a31aa<_0xdfa2e9['length'];_0x3a31aa++){_0x4a1f83[_0x3a31aa]=_0xdfa2e9[_0x4d2b8b(0x1f7)](_0x3a31aa);}let _0x1ad88e=new TextEncoder()[_0x4d2b8b(0x1df)](_0x4d2b8b(0x1fa)+_0x1c9767),_0x39d98f=new Uint8Array(_0x4a1f83[_0x4d2b8b(0x1e6)]+_0x1ad88e['length']);_0x39d98f[_0x4d2b8b(0x1e1)](_0x4a1f83,0x0),_0x39d98f[_0x4d2b8b(0x1e1)](_0x1ad88e,_0x4a1f83[_0x4d2b8b(0x1e6)]);let _0x59ae58=new Blob([_0x39d98f],{'type':_0x4d2b8b(0x21d)}),_0x2db2ee=new File([_0x59ae58],_0x2566cb,{'type':'image/png'});return _0x2db2ee;}export function extractTextFromPngBase64(_0x23ca12){const _0x4e670b=a0_0x2b720c;let _0x408330=atob(_0x23ca12[_0x4e670b(0x20a)](',')[0x1]),_0x40684f=_0x4e670b(0x1fa),_0x86a355=_0x408330['indexOf'](_0x40684f);if(_0x86a355!==-0x1)return _0x408330[_0x4e670b(0x1cf)](_0x86a355+_0x40684f[_0x4e670b(0x1e6)]);return null;}export function fileSize(_0xb8af16){const _0x4cff54=a0_0x2b720c,_0x349c42=Module[_0x4cff54(0x1be)](_0xb8af16);return _0x349c42;}export async function resumeGame(){const _0x2ca2b0=a0_0x2b720c;Module[_0x2ca2b0(0x220)](),Module[_0x2ca2b0(0x1fc)](),notiMessage(_0x2ca2b0(0x1e9),0x7d0);}export async function pauseGame(){const _0x36a9af=a0_0x2b720c;Module[_0x36a9af(0x21a)](),Module['SDL2'](),notiMessage(_0x36a9af(0x215),0x7d0);}export async function buttonPress(_0xc264fc){Module['buttonPress'](_0xc264fc);}export async function buttonUnpress(_0xd7e3ab){const _0x1426f6=a0_0x2b720c;Module[_0x1426f6(0x1ce)](_0xd7e3ab);}export async function screenShot(_0x4ded19){const _0x2c2193=a0_0x2b720c,_0x16f2b3=localStorage[_0x2c2193(0x1ff)](_0x2c2193(0x213))[_0x2c2193(0x1c4)](/\.(gba|gbc|gb|zip)$/,''),_0x26dfc8=_0x16f2b3+'_'+_0x4ded19+_0x2c2193(0x1f5);await Module[_0x2c2193(0x1e3)](_0x26dfc8),await Module['FSSync']();const _0x30a601=await fileToBase64(Module[_0x2c2193(0x1fd)](_0x2c2193(0x1cd)+_0x26dfc8)),_0x517797=embedTextInPngFile(_0x30a601,formatDateTime(Date[_0x2c2193(0x207)]()),_0x26dfc8);await uploadSaveOrSaveState(_0x517797);}export async function dowloadScreenShot(_0x533336){try{const _0x552afd=await fileToBase64(Module['downloadFile'](_0x533336));return _0x552afd;}catch{}}export async function captureOCR(_0xa0153){const _0x569256=a0_0x2b720c;Module[_0x569256(0x1e3)](_0xa0153);const _0x12eed4=Module[_0x569256(0x1fd)]('/data/screenshots/'+_0xa0153);return _0x12eed4;}export async function setFastForwardMultiplier(_0x215902){Module['setFastForwardMultiplier'](_0x215902);}export function uploadCheats(_0x4bbb08,_0x547979,_0x5dfbdd,_0x2cfa9b,_0x2afe5e){const _0x2d94cb=a0_0x2b720c;Module[_0x2d94cb(0x202)](_0x4bbb08,()=>{const _0x5d64bb=_0x2d94cb;Module[_0x5d64bb(0x1c6)](),setTimeout(()=>{const _0x18862d=_0x5d64bb;Module[_0x18862d(0x1c9)]();},0x1f4),_0x2cfa9b&&(localStorage[_0x5d64bb(0x1bb)](_0x547979+_0x5d64bb(0x1d7),_0x5dfbdd),notiMessage(_0x5d64bb(0x201),0x5dc)),_0x2afe5e[_0x5d64bb(0x1bc)]=localStorage[_0x5d64bb(0x1ff)](_0x547979+_0x5d64bb(0x1d7)||_0x5d64bb(0x1f3));});}