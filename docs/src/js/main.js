const a0_0x4e5dbb=a0_0x239d;(function(_0x518dd7,_0x17c691){const _0x2d9642=a0_0x239d,_0x1a6366=_0x518dd7();while(!![]){try{const _0x353ff3=-parseInt(_0x2d9642(0x125))/0x1+parseInt(_0x2d9642(0xe1))/0x2*(parseInt(_0x2d9642(0x108))/0x3)+parseInt(_0x2d9642(0xc7))/0x4*(parseInt(_0x2d9642(0x11b))/0x5)+parseInt(_0x2d9642(0xe7))/0x6*(-parseInt(_0x2d9642(0xe0))/0x7)+parseInt(_0x2d9642(0x109))/0x8*(parseInt(_0x2d9642(0xf1))/0x9)+parseInt(_0x2d9642(0x115))/0xa*(-parseInt(_0x2d9642(0x117))/0xb)+-parseInt(_0x2d9642(0xf6))/0xc*(parseInt(_0x2d9642(0x11d))/0xd);if(_0x353ff3===_0x17c691)break;else _0x1a6366['push'](_0x1a6366['shift']());}catch(_0x509ab0){_0x1a6366['push'](_0x1a6366['shift']());}}}(a0_0x2b26,0x5fb8c));import a0_0x5195b3 from'../core/mgba.js';import*as a0_0x1e6a6b from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x4e5dbb(0xe9)](a0_0x4e5dbb(0xc5))};function initializeCore(_0x1f31c3,_0x4938c6){const _0x40aede=a0_0x4e5dbb;_0x1f31c3(_0x4938c6)[_0x40aede(0xf9)](function(_0x25fbb4){const _0x48c787=_0x40aede;_0x25fbb4[_0x48c787(0xc9)]();});}initializeCore(a0_0x5195b3,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x4e5dbb(0xc5)),savedTurboState=localStorage[a0_0x4e5dbb(0xf5)]('turboState'),controlSetting=document['getElementById'](a0_0x4e5dbb(0xd9));function handleVisibilityChange(_0x553d33){const _0x45f154=a0_0x4e5dbb;document[_0x45f154(0xd4)]===_0x45f154(0x116)||_0x553d33?.[_0x45f154(0xd8)]===_0x45f154(0x11a)||_0x553d33?.[_0x45f154(0xde)]?(pauseGame(),canvas[_0x45f154(0xea)]['add'](_0x45f154(0x11f))):(setTimeout(()=>{const _0x5d2cc6=_0x45f154;canvas[_0x5d2cc6(0xea)][_0x5d2cc6(0xe6)](_0x5d2cc6(0x11f));},0x258),controlSetting['classList'][_0x45f154(0xfe)]('visible')&&resumeGame());}async function statusShow(){const _0x3259f3=a0_0x4e5dbb;document[_0x3259f3(0x103)](_0x3259f3(0x10a),handleVisibilityChange),document['addEventListener'](_0x3259f3(0xd6),handleVisibilityChange),window[_0x3259f3(0x103)](_0x3259f3(0x11a),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x1e6a6b[_0x3259f3(0x102)](turboState)),await delay(0xc8),await Module[_0x3259f3(0xef)](),await delay(0x320),await led(parseInt(localStorage[_0x3259f3(0xf5)](_0x3259f3(0xd3)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x1b8eff=a0_0x4e5dbb;await ledSave(_0x1b8eff(0xe4)),await Module[_0x1b8eff(0x111)](0x0),await Module[_0x1b8eff(0x123)](),await screenShot(0x0),console['log'](_0x1b8eff(0xd5)+ ++countAutoSave+_0x1b8eff(0xe3));}function a0_0x2b26(){const _0x3ee349=['visibilitychange','/data/games/','type','control-setting','Do\x20you\x20want\x20to\x20load\x20save\x20state?','uploadRom','now','Resumed!','persisted','Cheat\x20Enabled!','15141VuhnWA','14096hucmnq','listRoms','\x20time(s)','#20A5A6','innerWidth','remove','198nuOcUp','Cheat\x20uploaded\x20successfully:','getElementById','classList','_dateState','application/octet-stream','gbc1','click','SDL2','uId','189sxTgZL','deleteFile','loadState','log','getItem','5939052wmqBJS','gbc','add','then','/data/states/','screenshot','setItem','gameName','contains','listStates','/data/screenshots/','listCheats','turboF','addEventListener','uploadCheats','autoLoadCheats','listSaves','fileSize','129CSMZZD','136824HsuNOx','pagehide','Paused!','files','onLine','createObjectURL','screenSize','replace','saveState','downloadFile','padStart','.png','10vzMtOu','hidden','3585593CnBngs','listScreenshots','bottom','beforeunload','18385KsLtuu','Error\x20uploadCheat:','13vRLrVw','filter','visible','loadGame','_savedCheats','.ss0','FSSync','resumeGame','131673aRUMaS','name','Cloud\x20upload\x20','disable','createElement','canvas','_imageState0','820uwDFMe','toString','FSInit','buttonPress','.gba','error','0,0,','.gb','Save/State\x20uploaded\x20successfully:','revokeObjectURL','Off','_dateState0','slotStateSaved','visibilityState','Auto\x20save\x20'];a0_0x2b26=function(){return _0x3ee349;};return a0_0x2b26();}async function saveStateInCloud(){const _0xb81bb2=a0_0x4e5dbb,_0x19632b=localStorage[_0xb81bb2(0xf5)](_0xb81bb2(0xfd)),_0x3f069d=_0x19632b[_0xb81bb2(0x110)](_0xb81bb2(0xcb),'.ss0'),_0x789c0c=localStorage[_0xb81bb2(0xf5)](_0xb81bb2(0xf0)),_0x675164=localStorage[_0xb81bb2(0xf5)](_0x19632b+_0xb81bb2(0xc6)),_0x2229d2=localStorage['getItem'](_0x19632b+_0xb81bb2(0xd2));if(navigator[_0xb81bb2(0x10d)]){if(_0x789c0c){await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x3f069d,Module['downloadFile'](_0xb81bb2(0xfa)+_0x3f069d));if(_0x675164!==null){const _0x2aed79=_0x675164+'\x0a\x0a'+_0x2229d2,_0x54f917=new Blob([_0x2aed79],{'type':'text/plain'});await dpUploadFile(_0x19632b+'_slot0.txt',_0x54f917);}else console[_0xb81bb2(0xf4)]('No\x20screenshot!');await lockNoti('',_0xb81bb2(0x127)+ ++countUpload+_0xb81bb2(0xe3),0x7d0);}else console['log']('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0xb81bb2(0xf4)]('Online!');}function startTimer(){let [_0x5f295e,_0x3d6b2d,_0x439b32,_0x5d311e,_0xde164f]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x2038ba=a0_0x239d;_0x439b32++,_0x5d311e++,_0xde164f++;if(_0x439b32===0x3c)[_0x439b32,_0x3d6b2d]=[0x0,_0x3d6b2d+0x1];if(_0x3d6b2d===0x3c)[_0x3d6b2d,_0x5f295e]=[0x0,_0x5f295e+0x1];document[_0x2038ba(0xe9)]('timer')['textContent']=_0x5f295e+'h'+_0x3d6b2d[_0x2038ba(0xc8)]()[_0x2038ba(0x113)](0x2,'0')+'.'+_0x439b32[_0x2038ba(0xc8)]()[_0x2038ba(0x113)](0x2,'0');_0x5d311e===0x3c&&(saveStatePeriodically(),_0x5d311e=0x0);;_0xde164f===0xe10&&(saveStateInCloud(),_0xde164f=0x0);;},0x3e8);}export async function uploadGame(_0x209fbb){const _0x43d2ec=a0_0x4e5dbb,_0x512376=_0x209fbb[_0x43d2ec(0x10c)][0x0];Module[_0x43d2ec(0xdb)](_0x512376,()=>{Module['FSSync']();});}function a0_0x239d(_0x5f0ad0,_0x302d1d){const _0x2b2643=a0_0x2b26();return a0_0x239d=function(_0x239d99,_0x22a23b){_0x239d99=_0x239d99-0xc4;let _0x290b5c=_0x2b2643[_0x239d99];return _0x290b5c;},a0_0x239d(_0x5f0ad0,_0x302d1d);}export async function loadGame(_0x260b3d){const _0x1801a3=a0_0x4e5dbb,_0xb95bc7=_0x260b3d[_0x1801a3(0x110)](/\.(gba|gbc|gb|zip)$/,_0x1801a3(0x122)),_0x4113e0=Module[_0x1801a3(0xff)]()[_0x1801a3(0x11e)](_0x58efdb=>_0x58efdb!=='.'&&_0x58efdb!=='..');intro['classList'][_0x1801a3(0xf8)](_0x1801a3(0x128)),errorLogElements[0x0]['style'][_0x1801a3(0x119)]='0',ingame[_0x1801a3(0xea)][_0x1801a3(0xe6)](_0x1801a3(0x128)),_0x260b3d['endsWith']('.gbc')||_0x260b3d['endsWith'](_0x1801a3(0xce))?(canvas[_0x1801a3(0xea)]['add'](_0x1801a3(0xf7)),areaTrans[_0x1801a3(0xea)][_0x1801a3(0xf8)](_0x1801a3(0xed)),localStorage['setItem'](_0x1801a3(0x10f),_0x1801a3(0xcd)+(window['innerWidth']-0xe6)+','+(window[_0x1801a3(0xe5)]-0xe6)*0x9/0xa)):localStorage[_0x1801a3(0xfc)]('screenSize',_0x1801a3(0xcd)+(window[_0x1801a3(0xe5)]-0x96)+','+(window[_0x1801a3(0xe5)]-0x96)*0x2/0x3),_0x4113e0['includes'](_0xb95bc7)?(await Module[_0x1801a3(0x120)](_0x1801a3(0xd7)+_0x260b3d),confirm(_0x1801a3(0xda))&&(await Module[_0x1801a3(0xf3)](0x0),localStorage[_0x1801a3(0xfc)](_0x1801a3(0xfd),_0x260b3d),console[_0x1801a3(0xf4)](_0x260b3d))):(await Module[_0x1801a3(0x120)](_0x1801a3(0xd7)+_0x260b3d),localStorage[_0x1801a3(0xfc)]('gameName',_0x260b3d)),await statusShow();}export async function saveState(_0x426e19){const _0x31b527=a0_0x4e5dbb;await Module[_0x31b527(0x111)](_0x426e19),await Module[_0x31b527(0x123)]();}export async function loadState(_0x5ded60){const _0x5f2106=a0_0x4e5dbb;await Module[_0x5f2106(0xf3)](_0x5ded60);}export async function downloadFile(_0x421000,_0x2a517c){const _0x54322e=a0_0x4e5dbb,_0x578327=Module[_0x54322e(0x112)](_0x421000),_0x42b847=document[_0x54322e(0xc4)]('a');document['body']['appendChild'](_0x42b847),_0x42b847['download']=_0x2a517c;const _0x22eac1=new Blob([_0x578327],{'type':_0x54322e(0xec)});_0x42b847['href']=URL[_0x54322e(0x10e)](_0x22eac1),_0x42b847[_0x54322e(0xee)](),URL[_0x54322e(0xd0)](_0x22eac1),_0x42b847[_0x54322e(0xe6)]();}export function downloadFileInCloud(_0x37c72b){const _0x4b8e9b=a0_0x4e5dbb,_0x289c69=Module[_0x4b8e9b(0x112)](_0x37c72b);return _0x289c69;}export async function uploadFile(_0x38cd28){const _0x12fb52=a0_0x4e5dbb,_0x72d9db=_0x38cd28[_0x12fb52(0x10c)][0x0];Module['uploadSaveOrSaveState'](_0x72d9db,()=>{const _0xe58cfb=_0x12fb52;Module[_0xe58cfb(0x123)]();});}export async function editFile(_0x2614da,_0xcef244,_0x406698){const _0x1ebb24=a0_0x4e5dbb;await Module['editFileName'](_0x2614da,_0xcef244,_0x406698),await Module[_0x1ebb24(0x123)]();}export async function deleteFile(_0x4aeb68){const _0x59e90f=a0_0x4e5dbb;await Module[_0x59e90f(0xf2)](_0x4aeb68),await Module['FSSync']();}export function listGame(){const _0x5be89c=a0_0x4e5dbb,_0x2e5867=Module[_0x5be89c(0xe2)]()[_0x5be89c(0x11e)](_0x474ea8=>_0x474ea8!=='.'&&_0x474ea8!=='..');return _0x2e5867;}export function listSave(){const _0x2cd097=a0_0x4e5dbb,_0x30242a=Module[_0x2cd097(0x106)]()[_0x2cd097(0x11e)](_0x33e0b9=>_0x33e0b9!=='.'&&_0x33e0b9!=='..');return _0x30242a;}export function listState(){const _0x20255e=Module['listStates']()['filter'](_0x4f8c54=>_0x4f8c54!=='.'&&_0x4f8c54!=='..');return _0x20255e;}export function listCheat(){const _0x130b2e=a0_0x4e5dbb,_0x49b91d=Module[_0x130b2e(0x101)]()[_0x130b2e(0x11e)](_0x4c3882=>_0x4c3882!=='.'&&_0x4c3882!=='..');return _0x49b91d;}export function listScreenshot(){const _0x27fa03=a0_0x4e5dbb,_0x4fcda4=Module[_0x27fa03(0x118)]()[_0x27fa03(0x11e)](_0x3a4cf7=>_0x3a4cf7!=='.'&&_0x3a4cf7!=='..');return _0x4fcda4;}export function fileSize(_0x585e3f){const _0x5c492c=a0_0x4e5dbb,_0x4e9c5a=Module[_0x5c492c(0x107)](_0x585e3f);return _0x4e9c5a;}export async function uploadCheat(_0xe04c10){const _0x1ad771=a0_0x4e5dbb;try{const _0x3d3a02=_0xe04c10[_0x1ad771(0x10c)][0x0];await Module[_0x1ad771(0x104)](_0x3d3a02,()=>{const _0x56ad5c=_0x1ad771;console['log'](_0x56ad5c(0xe8),_0x3d3a02[_0x56ad5c(0x126)]),localStorageFile(),Module[_0x56ad5c(0x123)]();});}catch(_0x4fe0fb){console[_0x1ad771(0xcc)](_0x1ad771(0x11c),_0x4fe0fb);}}export async function uploadSavSta(_0x4291ea){const _0x2d27a0=a0_0x4e5dbb;try{const _0x3f5e21=_0x4291ea['files'][0x0];await Module['uploadSaveOrSaveState'](_0x3f5e21,()=>{const _0x5852fa=a0_0x239d;console[_0x5852fa(0xf4)](_0x5852fa(0xcf),_0x3f5e21[_0x5852fa(0x126)]),localStorageFile(),Module['FSSync']();});}catch(_0xd95580){console[_0x2d27a0(0xcc)]('Error\x20uploadSavSta:',_0xd95580);}}export async function uploadSaveOrSaveState(_0x2fb544){Module['uploadSaveOrSaveState'](_0x2fb544,()=>{const _0x1c7ddf=a0_0x239d;localStorageFile(),Module[_0x1c7ddf(0x123)]();});}export async function resumeGame(){const _0x3fb4da=a0_0x4e5dbb;Module[_0x3fb4da(0x124)](),Module[_0x3fb4da(0xef)](),notiMessage(_0x3fb4da(0xdd),0x7d0);}export async function pauseGame(){const _0x137915=a0_0x4e5dbb;Module['pauseGame'](),Module[_0x137915(0xef)](),notiMessage(_0x137915(0x10b),0x7d0);}export async function buttonPress(_0x1e5624){const _0x346d52=a0_0x4e5dbb;Module[_0x346d52(0xca)](_0x1e5624);}export async function buttonUnpress(_0x98403f){Module['buttonUnpress'](_0x98403f);}export async function screenShot(_0x5eb83f){const _0xc4804e=a0_0x4e5dbb,_0x369bc5=localStorage[_0xc4804e(0xf5)](_0xc4804e(0xfd))?.[_0xc4804e(0x110)](/\.(zip|gb|gbc)$/,_0xc4804e(0xcb)),_0x8f1156=_0x369bc5[_0xc4804e(0x110)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0xc4804e(0xfb)](''+_0x8f1156+_0x5eb83f+_0xc4804e(0x114)),await Module['FSSync']();const _0x31693e=await fileToBase64(Module[_0xc4804e(0x112)](_0xc4804e(0x100)+_0x8f1156+_0x5eb83f+'.png')),_0x73a9cb=Date[_0xc4804e(0xdc)](),_0x213ffc=formatDateTime(_0x73a9cb);localStorage[_0xc4804e(0xfc)](_0x369bc5+_0xc4804e(0xeb)+_0x5eb83f,_0x213ffc),localStorage[_0xc4804e(0xfc)](_0x369bc5+'_imageState'+_0x5eb83f,_0x31693e);}export async function captureOCR(_0x539952){const _0x299a91=a0_0x4e5dbb;Module['screenshot'](_0x539952);const _0x52598f=Module[_0x299a91(0x112)](_0x299a91(0x100)+_0x539952);return _0x52598f;}export async function setFastForwardMultiplier(_0x2d416b){Module['setFastForwardMultiplier'](_0x2d416b);}export function uploadCheats(_0x5e80ef,_0x28e159,_0x42853,_0x51cb46,_0x5d4ef1){const _0x381baa=a0_0x4e5dbb;Module[_0x381baa(0x104)](_0x5e80ef,()=>{const _0x137ce5=_0x381baa;Module[_0x137ce5(0x105)](),setTimeout(()=>{const _0x4e43f3=_0x137ce5;Module[_0x4e43f3(0x123)]();},0x1f4),_0x51cb46&&(localStorage[_0x137ce5(0xfc)](_0x28e159+_0x137ce5(0x121),_0x42853),notiMessage(_0x137ce5(0xdf),0x5dc)),_0x5d4ef1['textContent']=localStorage[_0x137ce5(0xf5)](_0x28e159+_0x137ce5(0x121)||_0x137ce5(0xd1));});}