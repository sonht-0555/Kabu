const a0_0x56c300=a0_0x813c;(function(_0x2ca28e,_0x47d72f){const _0x3a7901=a0_0x813c,_0xca7e56=_0x2ca28e();while(!![]){try{const _0x38697b=-parseInt(_0x3a7901(0x189))/0x1+-parseInt(_0x3a7901(0x197))/0x2*(-parseInt(_0x3a7901(0x1b6))/0x3)+parseInt(_0x3a7901(0x1c4))/0x4+-parseInt(_0x3a7901(0x196))/0x5*(parseInt(_0x3a7901(0x1c8))/0x6)+-parseInt(_0x3a7901(0x1b9))/0x7+parseInt(_0x3a7901(0x18d))/0x8*(-parseInt(_0x3a7901(0x193))/0x9)+-parseInt(_0x3a7901(0x1a4))/0xa*(-parseInt(_0x3a7901(0x1b5))/0xb);if(_0x38697b===_0x47d72f)break;else _0xca7e56['push'](_0xca7e56['shift']());}catch(_0x257131){_0xca7e56['push'](_0xca7e56['shift']());}}}(a0_0x4fb9,0x409aa));import a0_0x3a7357 from'../core/mgba.js';import*as a0_0x22fe8c from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x56c300(0x1b2)](a0_0x56c300(0x19a))};function initializeCore(_0x311198,_0x541567){_0x311198(_0x541567)['then'](function(_0x41790b){_0x41790b['FSInit']();});}initializeCore(a0_0x3a7357,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x56c300(0x1b2)]('canvas'),savedTurboState=localStorage[a0_0x56c300(0x16d)](a0_0x56c300(0x18b)),controlSetting=document[a0_0x56c300(0x1b2)]('control-setting');function handleVisibilityChange(_0x29a22f){const _0xd2d76c=a0_0x56c300;document[_0xd2d76c(0x1ad)]===_0xd2d76c(0x18f)||_0x29a22f?.['type']==='beforeunload'||_0x29a22f?.['persisted']?(pauseGame(),canvas[_0xd2d76c(0x1a7)][_0xd2d76c(0x190)](_0xd2d76c(0x17c))):(setTimeout(()=>{const _0x29f105=_0xd2d76c;canvas[_0x29f105(0x1a7)][_0x29f105(0x19c)]('visible');},0x258),controlSetting[_0xd2d76c(0x1a7)]['contains'](_0xd2d76c(0x17c))&&resumeGame());}async function statusShow(){const _0x27435b=a0_0x56c300;document[_0x27435b(0x1b7)]('pagehide',handleVisibilityChange),document['addEventListener'](_0x27435b(0x184),handleVisibilityChange),window[_0x27435b(0x1b7)](_0x27435b(0x18c),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x22fe8c['turboF'](turboState)),await delay(0x3e8),await led(parseInt(localStorage['getItem'](_0x27435b(0x1c7)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x25c642=a0_0x56c300;await ledSave(_0x25c642(0x168)),await Module[_0x25c642(0x1a2)](0x0),await Module[_0x25c642(0x17e)](),await screenShot(0x0),console[_0x25c642(0x1c6)]('Auto\x20save\x20'+ ++countAutoSave+_0x25c642(0x16e));}async function saveStateInCloud(){const _0x36bc8e=a0_0x56c300,_0x19b12c=localStorage[_0x36bc8e(0x16d)]('gameName'),_0xc52a30=_0x19b12c[_0x36bc8e(0x179)](_0x36bc8e(0x19f),'.ss0'),_0x2b7137=localStorage[_0x36bc8e(0x16d)]('uId'),_0x560b08=localStorage[_0x36bc8e(0x16d)](_0x19b12c+_0x36bc8e(0x167)),_0x441baf=localStorage[_0x36bc8e(0x16d)](_0x19b12c+_0x36bc8e(0x1ab));if(navigator[_0x36bc8e(0x1a9)]){if(_0x2b7137){await ledSave(_0x36bc8e(0x191)),await delay(0x3e8),await dpUploadFile(_0xc52a30,Module[_0x36bc8e(0x17b)](_0x36bc8e(0x17f)+_0xc52a30));if(_0x560b08!==null){const _0x14202b=_0x560b08+'\x0a\x0a'+_0x441baf,_0xc32cfc=new Blob([_0x14202b],{'type':'text/plain'});await dpUploadFile(_0x19b12c+_0x36bc8e(0x1b1),_0xc32cfc);}else console[_0x36bc8e(0x1c6)](_0x36bc8e(0x1ba));await lockNoti('',_0x36bc8e(0x177)+ ++countUpload+_0x36bc8e(0x16e),0x7d0);}else console[_0x36bc8e(0x1c6)](_0x36bc8e(0x170));}else console[_0x36bc8e(0x1c6)](_0x36bc8e(0x16c));}function a0_0x813c(_0x24513e,_0x1d653c){const _0x4fb918=a0_0x4fb9();return a0_0x813c=function(_0x813c65,_0x5dac00){_0x813c65=_0x813c65-0x163;let _0x3c29a9=_0x4fb918[_0x813c65];return _0x3c29a9;},a0_0x813c(_0x24513e,_0x1d653c);}function startTimer(){let [_0x51d6b2,_0x5be74f,_0x10a890,_0x56725b,_0x58c731]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x16eda5=a0_0x813c;_0x10a890++,_0x56725b++,_0x58c731++;if(_0x10a890===0x3c)[_0x10a890,_0x5be74f]=[0x0,_0x5be74f+0x1];if(_0x5be74f===0x3c)[_0x5be74f,_0x51d6b2]=[0x0,_0x51d6b2+0x1];document[_0x16eda5(0x1b2)](_0x16eda5(0x183))[_0x16eda5(0x182)]=_0x51d6b2+'h'+_0x5be74f['toString']()[_0x16eda5(0x185)](0x2,'0')+'.'+_0x10a890[_0x16eda5(0x164)]()[_0x16eda5(0x185)](0x2,'0');_0x56725b===0x3c&&(saveStatePeriodically(),_0x56725b=0x0);;_0x56725b===0xe10&&(saveStateInCloud(),_0x58c731=0x0);;},0x3e8);}export async function uploadGame(_0x30ade1){const _0x1e91b9=a0_0x56c300,_0x1059b8=_0x30ade1[_0x1e91b9(0x1a3)][0x0];Module[_0x1e91b9(0x1c1)](_0x1059b8,()=>{const _0x3983f3=_0x1e91b9;Module[_0x3983f3(0x17e)]();});}export async function loadGame(_0x434606){const _0x3fe7a6=a0_0x56c300,_0x13e477=_0x434606[_0x3fe7a6(0x179)](/\.(gba|gbc|gb|zip)$/,_0x3fe7a6(0x198)),_0x13c037=Module[_0x3fe7a6(0x1bc)]();intro['classList'][_0x3fe7a6(0x190)]('disable'),ingame[_0x3fe7a6(0x1a7)][_0x3fe7a6(0x19c)](_0x3fe7a6(0x1c2)),_0x434606['endsWith']('.gbc')||_0x434606[_0x3fe7a6(0x17d)](_0x3fe7a6(0x1be))?(canvas[_0x3fe7a6(0x1a7)][_0x3fe7a6(0x190)]('gbc'),areaTrans[_0x3fe7a6(0x1a7)][_0x3fe7a6(0x190)](_0x3fe7a6(0x178)),localStorage[_0x3fe7a6(0x172)](_0x3fe7a6(0x16f),_0x3fe7a6(0x1c0)+(window['innerWidth']-0xe6)+','+(window[_0x3fe7a6(0x1bb)]-0xe6)*0x9/0xa)):localStorage['setItem']('screenSize',_0x3fe7a6(0x1c0)+(window[_0x3fe7a6(0x1bb)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x13c037['includes'](_0x13e477)?(await Module[_0x3fe7a6(0x16b)](_0x3fe7a6(0x1bf)+_0x434606),confirm(_0x3fe7a6(0x175))&&(await Module[_0x3fe7a6(0x1aa)](0x0),localStorage[_0x3fe7a6(0x172)](_0x3fe7a6(0x19e),_0x434606),console[_0x3fe7a6(0x1c6)](_0x434606))):(await Module[_0x3fe7a6(0x16b)](_0x3fe7a6(0x1bf)+_0x434606),localStorage[_0x3fe7a6(0x172)]('gameName',_0x434606)),await statusShow();}export async function saveState(_0xe454d2){const _0x3c2a02=a0_0x56c300;await Module[_0x3c2a02(0x1a2)](_0xe454d2),await Module[_0x3c2a02(0x17e)]();}export async function loadState(_0x2af4eb){const _0x58360b=a0_0x56c300;await Module[_0x58360b(0x1aa)](_0x2af4eb);}export async function downloadFile(_0x119c48,_0x3ce36d){const _0x18231e=a0_0x56c300,_0x2f46be=Module['downloadFile'](_0x119c48),_0x4201e5=document[_0x18231e(0x192)]('a');document[_0x18231e(0x187)][_0x18231e(0x169)](_0x4201e5),_0x4201e5[_0x18231e(0x180)]=_0x3ce36d;const _0x2c21c4=new Blob([_0x2f46be],{'type':_0x18231e(0x1ac)});_0x4201e5[_0x18231e(0x1b3)]=URL[_0x18231e(0x188)](_0x2c21c4),_0x4201e5[_0x18231e(0x163)](),URL[_0x18231e(0x1c5)](_0x2c21c4),_0x4201e5[_0x18231e(0x19c)]();}export function downloadFileInCloud(_0x80d94a){const _0x39aa9e=Module['downloadFile'](_0x80d94a);return _0x39aa9e;}export async function uploadFile(_0x3a895d){const _0x17636a=a0_0x56c300,_0x62624e=_0x3a895d[_0x17636a(0x1a3)][0x0];Module[_0x17636a(0x1b8)](_0x62624e,()=>{Module['FSSync']();});}export async function editFile(_0x1ce5b4,_0x143f14,_0x1390ea){const _0x365647=a0_0x56c300;await Module[_0x365647(0x16a)](_0x1ce5b4,_0x143f14,_0x1390ea),await Module[_0x365647(0x17e)]();}export async function deleteFile(_0x9258e1){const _0x30dd62=a0_0x56c300;await Module[_0x30dd62(0x174)](_0x9258e1),await Module[_0x30dd62(0x17e)]();}export function listGame(){const _0x485be7=a0_0x56c300,_0x52c619=Module[_0x485be7(0x1af)]();return _0x52c619;}export function listSave(){const _0x459206=a0_0x56c300,_0x1a0166=Module[_0x459206(0x186)]();return _0x1a0166;}export function listState(){const _0x5ad1ee=a0_0x56c300,_0x456398=Module[_0x5ad1ee(0x1bc)]();return _0x456398;}export function listCheat(){const _0x4faaa6=a0_0x56c300,_0x1a539a=Module[_0x4faaa6(0x176)]();return _0x1a539a;}function a0_0x4fb9(){const _0x5591f6=['listGames','setFastForwardMultiplier','_slot0.txt','getElementById','href','listScreenshots','22czNMJS','27816tuuLjJ','addEventListener','uploadSaveOrSaveState','3196410rRFkXY','No\x20screenshot!','innerWidth','listStates','buttonUnpress','.gb','/data/games/','0,0,','uploadRom','disable','_savedCheats','1712988RUuDKL','revokeObjectURL','log','slotStateSaved','834Felikd','click','toString','error','SDL2','_imageState0','#20A5A6','appendChild','editFileName','loadGame','Online!','getItem','\x20time(s)','screenSize','Unable\x20to\x20upload\x20to\x20Cloud!','Error\x20uploadCheat:','setItem','/data/screenshots/','deleteFile','Do\x20you\x20want\x20to\x20load\x20save\x20state?','listCheats','Cloud\x20upload\x20','gbc1','replace','Resumed!','downloadFile','visible','endsWith','FSSync','/data/states/','download','Cheat\x20Enabled!','textContent','timer','visibilitychange','padStart','listSaves','body','createObjectURL','186165MdDgMk','pauseGame','turboState','beforeunload','152sLnSyV','Off','hidden','add','#E0C068','createElement','195813GIfpiW','Paused!','now','18295ENJrFp','86bKCucX','.ss0','.png','canvas','name','remove','uploadCheats','gameName','.gba','buttonPress','resumeGame','saveState','files','5012270MydLRg','autoLoadCheats','screenshot','classList','_imageState','onLine','loadState','_dateState0','application/octet-stream','visibilityState','Save/State\x20uploaded\x20successfully:'];a0_0x4fb9=function(){return _0x5591f6;};return a0_0x4fb9();}export function listScreenshot(){const _0x2a4e79=a0_0x56c300,_0x75d051=Module[_0x2a4e79(0x1b4)]();return _0x75d051;}export function fileSize(_0x44e505){const _0x4db35a=Module['fileSize'](_0x44e505);return _0x4db35a;}export async function uploadCheat(_0x29ac59){const _0x52e726=a0_0x56c300;try{const _0x220370=_0x29ac59[_0x52e726(0x1a3)][0x0];await Module[_0x52e726(0x19d)](_0x220370,()=>{const _0x49b45a=_0x52e726;console[_0x49b45a(0x1c6)]('Cheat\x20uploaded\x20successfully:',_0x220370[_0x49b45a(0x19b)]),localStorageFile(),Module[_0x49b45a(0x17e)]();});}catch(_0x16a27c){console[_0x52e726(0x165)](_0x52e726(0x171),_0x16a27c);}}export async function uploadSavSta(_0x14f893){const _0x27c954=a0_0x56c300;try{const _0x5b7d4c=_0x14f893[_0x27c954(0x1a3)][0x0];await Module['uploadSaveOrSaveState'](_0x5b7d4c,()=>{const _0x430b43=_0x27c954;console[_0x430b43(0x1c6)](_0x430b43(0x1ae),_0x5b7d4c[_0x430b43(0x19b)]),localStorageFile(),Module[_0x430b43(0x17e)]();});}catch(_0x3e529b){console[_0x27c954(0x165)]('Error\x20uploadSavSta:',_0x3e529b);}}export async function uploadSaveOrSaveState(_0x1ccf75){const _0x28952f=a0_0x56c300;Module[_0x28952f(0x1b8)](_0x1ccf75,()=>{localStorageFile(),Module['FSSync']();});}export async function resumeGame(){const _0x1f381c=a0_0x56c300;Module[_0x1f381c(0x1a1)](),Module[_0x1f381c(0x166)](),notiMessage(_0x1f381c(0x17a),0x7d0);}export async function pauseGame(){const _0x3815bb=a0_0x56c300;Module[_0x3815bb(0x18a)](),Module[_0x3815bb(0x166)](),notiMessage(_0x3815bb(0x194),0x7d0);}export async function buttonPress(_0x2ebd44){const _0x3269e3=a0_0x56c300;Module[_0x3269e3(0x1a0)](_0x2ebd44);}export async function buttonUnpress(_0x1a238f){const _0x5bac93=a0_0x56c300;Module[_0x5bac93(0x1bd)](_0x1a238f);}export async function screenShot(_0x56740e){const _0x229711=a0_0x56c300,_0x12da7e=localStorage[_0x229711(0x16d)]('gameName'),_0x21632e=_0x12da7e[_0x229711(0x179)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x229711(0x1a6)](''+_0x21632e+_0x56740e+_0x229711(0x199)),await Module[_0x229711(0x17e)]();const _0xe6d1c9=await fileToBase64(Module[_0x229711(0x17b)](_0x229711(0x173)+_0x21632e+_0x56740e+_0x229711(0x199))),_0x2fe017=Date[_0x229711(0x195)](),_0x372156=formatDateTime(_0x2fe017);localStorage[_0x229711(0x172)](_0x12da7e+'_dateState'+_0x56740e,_0x372156),localStorage[_0x229711(0x172)](_0x12da7e+_0x229711(0x1a8)+_0x56740e,_0xe6d1c9);}export async function captureOCR(_0x5badaa){const _0x33f5af=a0_0x56c300;Module['screenshot'](_0x5badaa);const _0x3f7d51=Module[_0x33f5af(0x17b)](_0x33f5af(0x173)+_0x5badaa);return _0x3f7d51;}export async function setFastForwardMultiplier(_0x2043f4){const _0x44bf89=a0_0x56c300;Module[_0x44bf89(0x1b0)](_0x2043f4);}export function uploadCheats(_0x4a8e56,_0xa8cd7,_0x4ad0a6,_0x4c7093,_0x1f8225){const _0x25e7fe=a0_0x56c300;Module[_0x25e7fe(0x19d)](_0x4a8e56,()=>{const _0x352042=_0x25e7fe;Module[_0x352042(0x1a5)](),setTimeout(()=>{Module['FSSync']();},0x1f4),_0x4c7093&&(localStorage[_0x352042(0x172)](_0xa8cd7+_0x352042(0x1c3),_0x4ad0a6),notiMessage(_0x352042(0x181),0x5dc)),_0x1f8225[_0x352042(0x182)]=localStorage['getItem'](_0xa8cd7+_0x352042(0x1c3)||_0x352042(0x18e));});}