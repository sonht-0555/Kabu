const a0_0x5cb15c=a0_0x36b7;(function(_0x7227f6,_0x1b6e7e){const _0x5c6b23=a0_0x36b7,_0x415176=_0x7227f6();while(!![]){try{const _0xaa2ddb=-parseInt(_0x5c6b23(0x195))/0x1+parseInt(_0x5c6b23(0x1b3))/0x2+parseInt(_0x5c6b23(0x187))/0x3*(parseInt(_0x5c6b23(0x17b))/0x4)+-parseInt(_0x5c6b23(0x18e))/0x5+parseInt(_0x5c6b23(0x1a5))/0x6*(-parseInt(_0x5c6b23(0x1bf))/0x7)+parseInt(_0x5c6b23(0x186))/0x8+-parseInt(_0x5c6b23(0x1d3))/0x9*(-parseInt(_0x5c6b23(0x1b0))/0xa);if(_0xaa2ddb===_0x1b6e7e)break;else _0x415176['push'](_0x415176['shift']());}catch(_0x16e19f){_0x415176['push'](_0x415176['shift']());}}}(a0_0x3904,0xe215c));import a0_0x2e0c94 from'../core/mgba.js';import*as a0_0x2da04 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document['getElementById']('canvas')};function initializeCore(_0x540e83,_0x1f569b){const _0x9e7bc6=a0_0x36b7;_0x540e83(_0x1f569b)[_0x9e7bc6(0x1bc)](function(_0x20c36c){const _0x44ae53=_0x9e7bc6;_0x20c36c[_0x44ae53(0x17f)]();});}initializeCore(a0_0x2e0c94,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x5cb15c(0x194)]('canvas'),savedTurboState=localStorage['getItem'](a0_0x5cb15c(0x1a9)),controlSetting=document['getElementById'](a0_0x5cb15c(0x18b));function handleVisibilityChange(_0x2ca4f8){const _0x2dc257=a0_0x5cb15c;document[_0x2dc257(0x189)]===_0x2dc257(0x19f)||_0x2ca4f8?.[_0x2dc257(0x1d5)]===_0x2dc257(0x19a)||_0x2ca4f8?.['persisted']?(pauseGame(),canvas[_0x2dc257(0x1cc)][_0x2dc257(0x17c)](_0x2dc257(0x1ae))):(setTimeout(()=>{const _0x21cffd=_0x2dc257;canvas[_0x21cffd(0x1cc)][_0x21cffd(0x1c9)](_0x21cffd(0x1ae));},0x258),controlSetting['classList']['contains'](_0x2dc257(0x1ae))&&resumeGame());}async function statusShow(){const _0x3f4663=a0_0x5cb15c;document[_0x3f4663(0x193)]('pagehide',handleVisibilityChange),document[_0x3f4663(0x193)]('visibilitychange',handleVisibilityChange),window['addEventListener'](_0x3f4663(0x19a),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x2da04[_0x3f4663(0x17e)](turboState)),await delay(0x3e8),await led(parseInt(localStorage['getItem']('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x3b53b5=a0_0x5cb15c;await ledSave(_0x3b53b5(0x1cf)),await Module[_0x3b53b5(0x188)](0x0),await Module[_0x3b53b5(0x1d0)](),await screenShot(0x0),console[_0x3b53b5(0x1ab)]('Auto\x20save\x20'+ ++countAutoSave+_0x3b53b5(0x1a3));}function a0_0x36b7(_0x44edb7,_0x125adc){const _0x3904db=a0_0x3904();return a0_0x36b7=function(_0x36b753,_0x44f2e0){_0x36b753=_0x36b753-0x177;let _0x4cbbad=_0x3904db[_0x36b753];return _0x4cbbad;},a0_0x36b7(_0x44edb7,_0x125adc);}async function saveStateInCloud(){const _0x531d18=a0_0x5cb15c,_0x135276=localStorage[_0x531d18(0x1d9)](_0x531d18(0x178)),_0x144672=_0x135276[_0x531d18(0x191)](_0x531d18(0x1c7),_0x531d18(0x1a7)),_0x3d5ff9=localStorage[_0x531d18(0x1d9)](_0x531d18(0x190)),_0xb7b18e=localStorage[_0x531d18(0x1d9)](_0x135276+_0x531d18(0x1d8)),_0x2eab53=localStorage[_0x531d18(0x1d9)](_0x135276+_0x531d18(0x1c6));if(navigator[_0x531d18(0x199)]){if(_0x3d5ff9){await ledSave(_0x531d18(0x180)),await delay(0x3e8),await dpUploadFile(_0x144672,Module[_0x531d18(0x1b4)](_0x531d18(0x1b1)+_0x144672));if(_0xb7b18e!==null){const _0x42612e=_0xb7b18e+'\x0a\x0a'+_0x2eab53,_0x14e7ad=new Blob([_0x42612e],{'type':'text/plain'});await dpUploadFile(_0x135276+_0x531d18(0x1aa),_0x14e7ad);}else console[_0x531d18(0x1ab)](_0x531d18(0x1cb));await lockNoti('',_0x531d18(0x1a1)+ ++countUpload+_0x531d18(0x1a3),0x7d0);}else console[_0x531d18(0x1ab)](_0x531d18(0x177));}else console['log']('Online!');}function startTimer(){let [_0x23a5e9,_0x4b24a8,_0x1312de,_0x5f214c,_0x390459]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x5d2d95=a0_0x36b7;_0x1312de++,_0x5f214c++,_0x390459++;if(_0x1312de===0x3c)[_0x1312de,_0x4b24a8]=[0x0,_0x4b24a8+0x1];if(_0x4b24a8===0x3c)[_0x4b24a8,_0x23a5e9]=[0x0,_0x23a5e9+0x1];document['getElementById'](_0x5d2d95(0x1b8))[_0x5d2d95(0x1bb)]=_0x23a5e9+'h'+_0x4b24a8[_0x5d2d95(0x1ce)]()[_0x5d2d95(0x1a0)](0x2,'0')+'.'+_0x1312de['toString']()['padStart'](0x2,'0');_0x5f214c===0x3c&&(saveStatePeriodically(),_0x5f214c=0x0);;_0x5f214c===0xe10&&(saveStateInCloud(),_0x390459=0x0);;},0x3e8);}export async function uploadGame(_0x554ecf){const _0x424cdd=a0_0x5cb15c,_0x23cef1=_0x554ecf[_0x424cdd(0x1b5)][0x0];Module[_0x424cdd(0x1a2)](_0x23cef1,()=>{Module['FSSync']();});}export async function loadGame(_0x260fde){const _0x45ede7=a0_0x5cb15c,_0x135103=_0x260fde[_0x45ede7(0x191)](/\.(gba|gbc|gb)$/,'.ss0'),_0x240086=Module[_0x45ede7(0x1ca)]();intro[_0x45ede7(0x1cc)][_0x45ede7(0x17c)](_0x45ede7(0x1b9)),ingame[_0x45ede7(0x1cc)][_0x45ede7(0x1c9)](_0x45ede7(0x1b9)),_0x260fde[_0x45ede7(0x19e)](_0x45ede7(0x18f))||_0x260fde[_0x45ede7(0x19e)](_0x45ede7(0x1ac))?(canvas['classList']['add'](_0x45ede7(0x19d)),areaTrans[_0x45ede7(0x1cc)][_0x45ede7(0x17c)](_0x45ede7(0x1a8)),localStorage[_0x45ede7(0x1c1)](_0x45ede7(0x197),'0,0,'+(window[_0x45ede7(0x1d7)]-0xe6)+','+(window[_0x45ede7(0x1d7)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x45ede7(0x197),_0x45ede7(0x198)+(window[_0x45ede7(0x1d7)]-0x96)+','+(window[_0x45ede7(0x1d7)]-0x96)*0x2/0x3),_0x240086['includes'](_0x135103)?(await Module[_0x45ede7(0x182)](_0x45ede7(0x19b)+_0x260fde),confirm(_0x45ede7(0x1b6))&&(await Module[_0x45ede7(0x1ad)](0x0),localStorage[_0x45ede7(0x1c1)](_0x45ede7(0x178),_0x260fde),console[_0x45ede7(0x1ab)](_0x260fde))):(await Module[_0x45ede7(0x182)](_0x45ede7(0x19b)+_0x260fde),localStorage[_0x45ede7(0x1c1)](_0x45ede7(0x178),_0x260fde)),await statusShow();}export async function saveState(_0x2e71a9){const _0x422795=a0_0x5cb15c;await Module[_0x422795(0x188)](_0x2e71a9),await Module['FSSync']();}export async function loadState(_0x580c01){const _0x428cea=a0_0x5cb15c;await Module[_0x428cea(0x1ad)](_0x580c01);}export async function downloadFile(_0x4705d1,_0x36106a){const _0x29d820=a0_0x5cb15c,_0x2c78d1=Module['downloadFile'](_0x4705d1),_0x5d927e=document[_0x29d820(0x1c0)]('a');document['body'][_0x29d820(0x1a6)](_0x5d927e),_0x5d927e[_0x29d820(0x196)]=_0x36106a;const _0x5be2fb=new Blob([_0x2c78d1],{'type':_0x29d820(0x1c5)});_0x5d927e['href']=URL[_0x29d820(0x18d)](_0x5be2fb),_0x5d927e['click'](),URL['revokeObjectURL'](_0x5be2fb),_0x5d927e['remove']();}export function downloadFileInCloud(_0x3338d0){const _0x1d39fd=Module['downloadFile'](_0x3338d0);return _0x1d39fd;}export async function uploadFile(_0x38e959){const _0x1f8b05=a0_0x5cb15c,_0x2e2c7a=_0x38e959[_0x1f8b05(0x1b5)][0x0];Module[_0x1f8b05(0x1c3)](_0x2e2c7a,()=>{const _0x79b9d1=_0x1f8b05;Module[_0x79b9d1(0x1d0)]();});}export async function editFile(_0x1afd5e,_0x414ee5,_0x1fe4da){const _0x5f3317=a0_0x5cb15c;await Module['editFileName'](_0x1afd5e,_0x414ee5,_0x1fe4da),await Module[_0x5f3317(0x1d0)]();}export async function deleteFile(_0xeaaa2){const _0x3a6707=a0_0x5cb15c;await Module[_0x3a6707(0x185)](_0xeaaa2),await Module[_0x3a6707(0x1d0)]();}function a0_0x3904(){const _0x5e5c2a=['deleteFile','2105408CIaZWi','1086cSBfBi','saveState','visibilityState','_dateState','control-setting','Error\x20uploadSavSta:','createObjectURL','5955785nFAEKH','.gbc','uId','replace','.png','addEventListener','getElementById','1316868yTcmJa','download','screenSize','0,0,','onLine','beforeunload','/data/games/','Error\x20uploadCheat:','gbc','endsWith','hidden','padStart','Cloud\x20upload\x20','uploadGame','\x20time(s)','Cheat\x20Enabled!','66XmuTHJ','appendChild','.ss0','gbc1','turboState','_slot0.txt','log','.gb','loadState','visible','buttonPress','1448270icVUPv','/data/states/','name','3371396ArAQdE','downloadFile','files','Do\x20you\x20want\x20to\x20load\x20save\x20state?','screenshot','timer','disable','buttonUnpress','textContent','then','listScreenshots','listSaves','421582vRNbZs','createElement','setItem','resumeGame','uploadSaveOrSaveState','pauseGame','application/octet-stream','_dateState0','.gba','now','remove','listStates','No\x20screenshot!','classList','listCheats','toString','#20A5A6','FSSync','autoLoadCheats','listGames','99OxxvEB','_savedCheats','type','fileSize','innerWidth','_imageState0','getItem','Unable\x20to\x20upload\x20to\x20Cloud!','gameName','error','/data/screenshots/','6128CLmWHl','add','Off','turboF','FSInit','#E0C068','Paused!','loadGame','uploadCheats','Cheat\x20uploaded\x20successfully:'];a0_0x3904=function(){return _0x5e5c2a;};return a0_0x3904();}export function listGame(){const _0x3fe68f=a0_0x5cb15c,_0x2f7769=Module[_0x3fe68f(0x1d2)]();return _0x2f7769;}export function listSave(){const _0x579668=a0_0x5cb15c,_0x1f0171=Module[_0x579668(0x1be)]();return _0x1f0171;}export function listState(){const _0x2d7937=a0_0x5cb15c,_0x15dcbd=Module[_0x2d7937(0x1ca)]();return _0x15dcbd;}export function listCheat(){const _0x133d3b=a0_0x5cb15c,_0x5b8761=Module[_0x133d3b(0x1cd)]();return _0x5b8761;}export function listScreenshot(){const _0x28d82f=a0_0x5cb15c,_0x2446a7=Module[_0x28d82f(0x1bd)]();return _0x2446a7;}export function fileSize(_0x10c27c){const _0x41fac3=a0_0x5cb15c,_0x5d4e88=Module[_0x41fac3(0x1d6)](_0x10c27c);return _0x5d4e88;}export async function uploadCheat(_0x5e64c9){const _0x37fdad=a0_0x5cb15c;try{const _0x3e0eeb=_0x5e64c9['files'][0x0];await Module['uploadCheats'](_0x3e0eeb,()=>{const _0xb63396=a0_0x36b7;console[_0xb63396(0x1ab)](_0xb63396(0x184),_0x3e0eeb[_0xb63396(0x1b2)]),localStorageFile(),Module[_0xb63396(0x1d0)]();});}catch(_0x3e24f1){console[_0x37fdad(0x179)](_0x37fdad(0x19c),_0x3e24f1);}}export async function uploadSavSta(_0x4d8d38){const _0x2af585=a0_0x5cb15c;try{const _0x34a2ba=_0x4d8d38[_0x2af585(0x1b5)][0x0];await Module[_0x2af585(0x1c3)](_0x34a2ba,()=>{const _0x322d73=_0x2af585;console[_0x322d73(0x1ab)]('Save/State\x20uploaded\x20successfully:',_0x34a2ba['name']),localStorageFile(),Module[_0x322d73(0x1d0)]();});}catch(_0x549a29){console[_0x2af585(0x179)](_0x2af585(0x18c),_0x549a29);}}export async function uploadSaveOrSaveState(_0x3af7df){Module['uploadSaveOrSaveState'](_0x3af7df,()=>{const _0x736ee2=a0_0x36b7;localStorageFile(),Module[_0x736ee2(0x1d0)]();});}export async function resumeGame(){const _0x590ef4=a0_0x5cb15c;Module[_0x590ef4(0x1c2)](),Module['SDL2'](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x3391cf=a0_0x5cb15c;Module[_0x3391cf(0x1c4)](),Module['SDL2'](),notiMessage(_0x3391cf(0x181),0x7d0);}export async function buttonPress(_0x5b544e){const _0x51ae33=a0_0x5cb15c;Module[_0x51ae33(0x1af)](_0x5b544e);}export async function buttonUnpress(_0x5e78e6){const _0x4aa1c8=a0_0x5cb15c;Module[_0x4aa1c8(0x1ba)](_0x5e78e6);}export async function screenShot(_0x6e0445){const _0x3fd762=a0_0x5cb15c,_0xde19da=localStorage[_0x3fd762(0x1d9)](_0x3fd762(0x178)),_0x37da98=_0xde19da[_0x3fd762(0x191)](/\.(gba|gbc|gb)$/,'_');await Module[_0x3fd762(0x1b7)](''+_0x37da98+_0x6e0445+_0x3fd762(0x192)),await Module[_0x3fd762(0x1d0)]();const _0x310050=await fileToBase64(Module[_0x3fd762(0x1b4)](_0x3fd762(0x17a)+_0x37da98+_0x6e0445+_0x3fd762(0x192))),_0x427d39=Date[_0x3fd762(0x1c8)](),_0x30e37b=formatDateTime(_0x427d39);localStorage[_0x3fd762(0x1c1)](_0xde19da+_0x3fd762(0x18a)+_0x6e0445,_0x30e37b),localStorage['setItem'](_0xde19da+'_imageState'+_0x6e0445,_0x310050);}export async function captureOCR(_0x394d49){const _0x125ee3=a0_0x5cb15c;Module[_0x125ee3(0x1b7)](_0x394d49);const _0x3022ce=Module[_0x125ee3(0x1b4)](_0x125ee3(0x17a)+_0x394d49);return _0x3022ce;}export async function setFastForwardMultiplier(_0x6bf453){Module['setFastForwardMultiplier'](_0x6bf453);}export function uploadCheats(_0x33bfc6,_0x2bea47,_0x29d048,_0x583160,_0x8d4002){const _0xb516df=a0_0x5cb15c;Module[_0xb516df(0x183)](_0x33bfc6,()=>{const _0x323f42=_0xb516df;Module[_0x323f42(0x1d1)](),setTimeout(()=>{const _0x4dd7c4=_0x323f42;Module[_0x4dd7c4(0x1d0)]();},0x1f4),_0x583160&&(localStorage[_0x323f42(0x1c1)](_0x2bea47+_0x323f42(0x1d4),_0x29d048),notiMessage(_0x323f42(0x1a4),0x5dc)),_0x8d4002[_0x323f42(0x1bb)]=localStorage[_0x323f42(0x1d9)](_0x2bea47+_0x323f42(0x1d4)||_0x323f42(0x17d));});}