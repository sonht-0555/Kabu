const a0_0x20a86f=a0_0x13b4;(function(_0x26c8c7,_0x47a64b){const _0x193814=a0_0x13b4,_0x58c566=_0x26c8c7();while(!![]){try{const _0x472fcf=-parseInt(_0x193814(0x131))/0x1+-parseInt(_0x193814(0x130))/0x2*(parseInt(_0x193814(0x170))/0x3)+parseInt(_0x193814(0x15c))/0x4+-parseInt(_0x193814(0x15f))/0x5*(-parseInt(_0x193814(0x127))/0x6)+-parseInt(_0x193814(0x141))/0x7*(-parseInt(_0x193814(0x150))/0x8)+parseInt(_0x193814(0x16c))/0x9*(parseInt(_0x193814(0x14e))/0xa)+parseInt(_0x193814(0x175))/0xb;if(_0x472fcf===_0x47a64b)break;else _0x58c566['push'](_0x58c566['shift']());}catch(_0x1d0492){_0x58c566['push'](_0x58c566['shift']());}}}(a0_0x1a78,0x59550));import a0_0x55263b from'../core/mgba.js';import*as a0_0x32e422 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x20a86f(0x15e)](a0_0x20a86f(0x144))};function initializeCore(_0x209fe0,_0x29c6f6){const _0x20be53=a0_0x20a86f;_0x209fe0(_0x29c6f6)[_0x20be53(0x169)](function(_0x4668a6){_0x4668a6['FSInit']();});}initializeCore(a0_0x55263b,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x20a86f(0x144)),savedTurboState=localStorage[a0_0x20a86f(0x17d)]('turboState'),controlSetting=document[a0_0x20a86f(0x15e)](a0_0x20a86f(0x16a));function handleVisibilityChange(_0x10f334){const _0xfa0a90=a0_0x20a86f;document[_0xfa0a90(0x12e)]===_0xfa0a90(0x164)||_0x10f334?.['type']===_0xfa0a90(0x132)||_0x10f334?.[_0xfa0a90(0x13c)]?(pauseGame(),canvas[_0xfa0a90(0x153)][_0xfa0a90(0x183)](_0xfa0a90(0x159))):(setTimeout(()=>{const _0x388fce=_0xfa0a90;canvas[_0x388fce(0x153)][_0x388fce(0x165)](_0x388fce(0x159));},0x258),controlSetting[_0xfa0a90(0x153)][_0xfa0a90(0x16f)](_0xfa0a90(0x159))&&resumeGame());}async function statusShow(){const _0x556460=a0_0x20a86f;document[_0x556460(0x129)]('pagehide',handleVisibilityChange),document[_0x556460(0x129)]('visibilitychange',handleVisibilityChange),window[_0x556460(0x129)](_0x556460(0x132),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x32e422[_0x556460(0x171)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x556460(0x17d)](_0x556460(0x17e)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x198a2b=a0_0x20a86f;await ledSave('#20A5A6'),await Module[_0x198a2b(0x14d)](0x0),await Module[_0x198a2b(0x15d)](),await screenShot(0x0),console[_0x198a2b(0x12f)](_0x198a2b(0x138)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x4dbab2=a0_0x20a86f,_0x25e408=localStorage[_0x4dbab2(0x17d)](_0x4dbab2(0x135)),_0x2beb61=_0x25e408[_0x4dbab2(0x136)](_0x4dbab2(0x123),_0x4dbab2(0x181)),_0x3c500f=localStorage['getItem'](_0x4dbab2(0x142)),_0x1739fc=localStorage[_0x4dbab2(0x17d)](_0x25e408+_0x4dbab2(0x179)),_0x212bbf=localStorage[_0x4dbab2(0x17d)](_0x25e408+_0x4dbab2(0x143));if(navigator[_0x4dbab2(0x160)]){if(_0x3c500f){await ledSave(_0x4dbab2(0x124)),await delay(0x3e8),await dpUploadFile(_0x2beb61,Module[_0x4dbab2(0x157)](_0x4dbab2(0x12b)+_0x2beb61));if(_0x1739fc!==null){const _0xc1a37b=_0x1739fc+'\x0a\x0a'+_0x212bbf,_0x4d00be=new Blob([_0xc1a37b],{'type':_0x4dbab2(0x134)});await dpUploadFile(_0x25e408+_0x4dbab2(0x161),_0x4d00be);}else console[_0x4dbab2(0x12f)](_0x4dbab2(0x151));await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x4dbab2(0x13d),0x7d0);}else console[_0x4dbab2(0x12f)](_0x4dbab2(0x13b));}else console[_0x4dbab2(0x12f)]('Online!');}function startTimer(){let [_0x173695,_0x3767d4,_0x2543f2,_0x15c995,_0x2373e4]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x4ce99f=a0_0x13b4;_0x2543f2++,_0x15c995++,_0x2373e4++;if(_0x2543f2===0x3c)[_0x2543f2,_0x3767d4]=[0x0,_0x3767d4+0x1];if(_0x3767d4===0x3c)[_0x3767d4,_0x173695]=[0x0,_0x173695+0x1];document[_0x4ce99f(0x15e)](_0x4ce99f(0x158))['textContent']=_0x173695+'h'+_0x3767d4[_0x4ce99f(0x126)]()[_0x4ce99f(0x172)](0x2,'0')+'.'+_0x2543f2[_0x4ce99f(0x126)]()['padStart'](0x2,'0');_0x15c995===0x3c&&(saveStatePeriodically(),_0x15c995=0x0);;_0x15c995===0xe10&&(saveStateInCloud(),_0x2373e4=0x0);;},0x3e8);}function a0_0x13b4(_0x1e0ecd,_0x1f1aef){const _0x1a78b6=a0_0x1a78();return a0_0x13b4=function(_0x13b492,_0x301902){_0x13b492=_0x13b492-0x122;let _0x5e066e=_0x1a78b6[_0x13b492];return _0x5e066e;},a0_0x13b4(_0x1e0ecd,_0x1f1aef);}export async function uploadGame(_0x599bd6){const _0x49e5a3=a0_0x20a86f,_0xfc7f93=_0x599bd6[_0x49e5a3(0x168)][0x0];Module[_0x49e5a3(0x182)](_0xfc7f93,()=>{const _0x11976b=_0x49e5a3;Module[_0x11976b(0x15d)]();});}export async function loadGame(_0x477520){const _0x30553c=a0_0x20a86f,_0xf57891=_0x477520[_0x30553c(0x136)](/\.(gba|gbc|gb|zip)$/,_0x30553c(0x181)),_0x26175d=Module['listStates']();intro[_0x30553c(0x153)][_0x30553c(0x183)](_0x30553c(0x128)),errorLogElements[0x0][_0x30553c(0x17c)]['bottom']='0',ingame['classList'][_0x30553c(0x165)]('disable'),_0x477520[_0x30553c(0x156)](_0x30553c(0x17f))||_0x477520[_0x30553c(0x156)]('.gb')?(canvas[_0x30553c(0x153)][_0x30553c(0x183)](_0x30553c(0x167)),areaTrans[_0x30553c(0x153)][_0x30553c(0x183)](_0x30553c(0x139)),localStorage['setItem'](_0x30553c(0x16d),'0,0,'+(window['innerWidth']-0xe6)+','+(window[_0x30553c(0x12a)]-0xe6)*0x9/0xa)):localStorage[_0x30553c(0x154)](_0x30553c(0x16d),_0x30553c(0x17b)+(window[_0x30553c(0x12a)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x26175d[_0x30553c(0x162)](_0xf57891)?(await Module[_0x30553c(0x174)]('/data/games/'+_0x477520),confirm(_0x30553c(0x13a))&&(await Module[_0x30553c(0x177)](0x0),localStorage[_0x30553c(0x154)]('gameName',_0x477520),console[_0x30553c(0x12f)](_0x477520))):(await Module[_0x30553c(0x174)]('/data/games/'+_0x477520),localStorage['setItem'](_0x30553c(0x135),_0x477520)),await statusShow();}export async function saveState(_0x5705d1){const _0x1bd489=a0_0x20a86f;await Module[_0x1bd489(0x14d)](_0x5705d1),await Module[_0x1bd489(0x15d)]();}export async function loadState(_0x4a67e2){const _0x388923=a0_0x20a86f;await Module[_0x388923(0x177)](_0x4a67e2);}export async function downloadFile(_0x43b43e,_0x37dccd){const _0x2d435f=a0_0x20a86f,_0x7742e=Module['downloadFile'](_0x43b43e),_0xc66380=document[_0x2d435f(0x16b)]('a');document[_0x2d435f(0x14a)][_0x2d435f(0x149)](_0xc66380),_0xc66380[_0x2d435f(0x12c)]=_0x37dccd;const _0x2f45bc=new Blob([_0x7742e],{'type':_0x2d435f(0x152)});_0xc66380[_0x2d435f(0x163)]=URL[_0x2d435f(0x137)](_0x2f45bc),_0xc66380[_0x2d435f(0x12d)](),URL[_0x2d435f(0x178)](_0x2f45bc),_0xc66380[_0x2d435f(0x165)]();}export function downloadFileInCloud(_0x5a4beb){const _0x2149e2=a0_0x20a86f,_0xc641fd=Module[_0x2149e2(0x157)](_0x5a4beb);return _0xc641fd;}export async function uploadFile(_0x5a13e7){const _0x2776f4=a0_0x20a86f,_0x2bce97=_0x5a13e7[_0x2776f4(0x168)][0x0];Module[_0x2776f4(0x145)](_0x2bce97,()=>{const _0x3f7112=_0x2776f4;Module[_0x3f7112(0x15d)]();});}export async function editFile(_0x3cf3e2,_0x347c0d,_0x48a6cf){await Module['editFileName'](_0x3cf3e2,_0x347c0d,_0x48a6cf),await Module['FSSync']();}export async function deleteFile(_0x5f4b55){const _0x22bdd9=a0_0x20a86f;await Module[_0x22bdd9(0x17a)](_0x5f4b55),await Module[_0x22bdd9(0x15d)]();}function a0_0x1a78(){const _0x1dee2f=['add','_savedCheats','listCheats','.gba','#E0C068','_imageState','toString','2228034ZRKQeh','disable','addEventListener','innerWidth','/data/states/','download','click','visibilityState','log','108802jCMFOW','618737qlTktD','beforeunload','_dateState','text/plain','gameName','replace','createObjectURL','Auto\x20save\x20','gbc1','Do\x20you\x20want\x20to\x20load\x20save\x20state?','Unable\x20to\x20upload\x20to\x20Cloud!','persisted','\x20time(s)','Cheat\x20Enabled!','textContent','Cheat\x20uploaded\x20successfully:','7LtZJdY','uId','_dateState0','canvas','uploadSaveOrSaveState','Off','Paused!','name','appendChild','body','error','listStates','saveState','3490330XkXRPr','setFastForwardMultiplier','4830296jYUdyJ','No\x20screenshot!','application/octet-stream','classList','setItem','listScreenshots','endsWith','downloadFile','timer','visible','SDL2','screenshot','1028132BVwQzX','FSSync','getElementById','5ZhNihU','onLine','_slot0.txt','includes','href','hidden','remove','now','gbc','files','then','control-setting','createElement','9mkxQIO','screenSize','Resumed!','contains','33SyjFfw','turboF','padStart','pauseGame','loadGame','20460SZQGRs','.png','loadState','revokeObjectURL','_imageState0','deleteFile','0,0,','style','getItem','slotStateSaved','.gbc','/data/screenshots/','.ss0','uploadRom'];a0_0x1a78=function(){return _0x1dee2f;};return a0_0x1a78();}export function listGame(){const _0x2b188f=Module['listGames']();return _0x2b188f;}export function listSave(){const _0x56ebf0=Module['listSaves']();return _0x56ebf0;}export function listState(){const _0x3c54a2=a0_0x20a86f,_0x571275=Module[_0x3c54a2(0x14c)]();return _0x571275;}export function listCheat(){const _0x1a297e=a0_0x20a86f,_0x4e1e7f=Module[_0x1a297e(0x122)]();return _0x4e1e7f;}export function listScreenshot(){const _0x2c0fd0=a0_0x20a86f,_0x18aefb=Module[_0x2c0fd0(0x155)]();return _0x18aefb;}export function fileSize(_0x1c1614){const _0x32c9eb=Module['fileSize'](_0x1c1614);return _0x32c9eb;}export async function uploadCheat(_0x4196ed){const _0xea46dc=a0_0x20a86f;try{const _0x36e9e9=_0x4196ed[_0xea46dc(0x168)][0x0];await Module['uploadCheats'](_0x36e9e9,()=>{const _0xbab79b=_0xea46dc;console[_0xbab79b(0x12f)](_0xbab79b(0x140),_0x36e9e9[_0xbab79b(0x148)]),localStorageFile(),Module[_0xbab79b(0x15d)]();});}catch(_0x531276){console[_0xea46dc(0x14b)]('Error\x20uploadCheat:',_0x531276);}}export async function uploadSavSta(_0x2ac4b4){const _0x3f6826=a0_0x20a86f;try{const _0x3f6419=_0x2ac4b4[_0x3f6826(0x168)][0x0];await Module[_0x3f6826(0x145)](_0x3f6419,()=>{const _0x59e131=_0x3f6826;console[_0x59e131(0x12f)]('Save/State\x20uploaded\x20successfully:',_0x3f6419[_0x59e131(0x148)]),localStorageFile(),Module[_0x59e131(0x15d)]();});}catch(_0x337c64){console[_0x3f6826(0x14b)]('Error\x20uploadSavSta:',_0x337c64);}}export async function uploadSaveOrSaveState(_0x13ef6e){const _0xf262e7=a0_0x20a86f;Module[_0xf262e7(0x145)](_0x13ef6e,()=>{localStorageFile(),Module['FSSync']();});}export async function resumeGame(){const _0x2dabc5=a0_0x20a86f;Module['resumeGame'](),Module[_0x2dabc5(0x15a)](),notiMessage(_0x2dabc5(0x16e),0x7d0);}export async function pauseGame(){const _0x5edd16=a0_0x20a86f;Module[_0x5edd16(0x173)](),Module['SDL2'](),notiMessage(_0x5edd16(0x147),0x7d0);}export async function buttonPress(_0x2eb4a7){Module['buttonPress'](_0x2eb4a7);}export async function buttonUnpress(_0x3c3964){Module['buttonUnpress'](_0x3c3964);}export async function screenShot(_0x33af11){const _0x8e9c50=a0_0x20a86f,_0x4f386a=localStorage[_0x8e9c50(0x17d)](_0x8e9c50(0x135)),_0x48c096=_0x4f386a[_0x8e9c50(0x136)](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x48c096+_0x33af11+_0x8e9c50(0x176)),await Module[_0x8e9c50(0x15d)]();const _0x146efe=await fileToBase64(Module[_0x8e9c50(0x157)]('/data/screenshots/'+_0x48c096+_0x33af11+'.png')),_0x597622=Date[_0x8e9c50(0x166)](),_0x26df2a=formatDateTime(_0x597622);localStorage['setItem'](_0x4f386a+_0x8e9c50(0x133)+_0x33af11,_0x26df2a),localStorage[_0x8e9c50(0x154)](_0x4f386a+_0x8e9c50(0x125)+_0x33af11,_0x146efe);}export async function captureOCR(_0xfdbf7){const _0x9b8ac9=a0_0x20a86f;Module[_0x9b8ac9(0x15b)](_0xfdbf7);const _0x409173=Module[_0x9b8ac9(0x157)](_0x9b8ac9(0x180)+_0xfdbf7);return _0x409173;}export async function setFastForwardMultiplier(_0x20bf7e){const _0x5e71d6=a0_0x20a86f;Module[_0x5e71d6(0x14f)](_0x20bf7e);}export function uploadCheats(_0x4007a0,_0x594d38,_0xd70300,_0x505322,_0x3a9147){Module['uploadCheats'](_0x4007a0,()=>{const _0x4528e7=a0_0x13b4;Module['autoLoadCheats'](),setTimeout(()=>{const _0x17f306=a0_0x13b4;Module[_0x17f306(0x15d)]();},0x1f4),_0x505322&&(localStorage[_0x4528e7(0x154)](_0x594d38+_0x4528e7(0x184),_0xd70300),notiMessage(_0x4528e7(0x13e),0x5dc)),_0x3a9147[_0x4528e7(0x13f)]=localStorage['getItem'](_0x594d38+_0x4528e7(0x184)||_0x4528e7(0x146));});}