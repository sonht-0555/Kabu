const a0_0x3e5da4=a0_0x5e7f;(function(_0xc8cfbe,_0x4a1a86){const _0x2d0261=a0_0x5e7f,_0x122253=_0xc8cfbe();while(!![]){try{const _0x2c6cab=-parseInt(_0x2d0261(0x1cc))/0x1*(parseInt(_0x2d0261(0x1da))/0x2)+parseInt(_0x2d0261(0x1f7))/0x3*(parseInt(_0x2d0261(0x1b9))/0x4)+-parseInt(_0x2d0261(0x1fe))/0x5*(parseInt(_0x2d0261(0x1cb))/0x6)+parseInt(_0x2d0261(0x1ed))/0x7+-parseInt(_0x2d0261(0x1d2))/0x8*(-parseInt(_0x2d0261(0x1f6))/0x9)+parseInt(_0x2d0261(0x1f1))/0xa+-parseInt(_0x2d0261(0x1ac))/0xb;if(_0x2c6cab===_0x4a1a86)break;else _0x122253['push'](_0x122253['shift']());}catch(_0x4569a0){_0x122253['push'](_0x122253['shift']());}}}(a0_0x193a,0xbdf6e));import a0_0x31cbd9 from'../core/mgba.js';import*as a0_0x35d0b0 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document['getElementById'](a0_0x3e5da4(0x1db))};function initializeCore(_0x272d6b,_0x4c65cc){const _0x32590f=a0_0x3e5da4;_0x272d6b(_0x4c65cc)[_0x32590f(0x1f5)](function(_0x54058d){const _0xbaa6a=_0x32590f;_0x54058d[_0xbaa6a(0x1d0)]();});}initializeCore(a0_0x31cbd9,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x3e5da4(0x1eb)](a0_0x3e5da4(0x1db)),savedTurboState=localStorage[a0_0x3e5da4(0x1a4)](a0_0x3e5da4(0x1e2)),controlSetting=document[a0_0x3e5da4(0x1eb)](a0_0x3e5da4(0x1ca));function handleVisibilityChange(_0x460828){const _0xd38726=a0_0x3e5da4;document[_0xd38726(0x1ff)]===_0xd38726(0x1b7)||_0x460828?.[_0xd38726(0x1e3)]===_0xd38726(0x1ee)||_0x460828?.[_0xd38726(0x1d1)]?(pauseGame(),canvas[_0xd38726(0x1d3)]['add'](_0xd38726(0x1e7))):(setTimeout(()=>{const _0x30173b=_0xd38726;canvas['classList']['remove'](_0x30173b(0x1e7));},0x258),controlSetting[_0xd38726(0x1d3)][_0xd38726(0x1ba)](_0xd38726(0x1e7))&&resumeGame());}async function statusShow(){const _0xdbd955=a0_0x3e5da4;document['addEventListener'](_0xdbd955(0x200),handleVisibilityChange),document[_0xdbd955(0x1a6)](_0xdbd955(0x1e8),handleVisibilityChange),window[_0xdbd955(0x1a6)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x35d0b0[_0xdbd955(0x207)](turboState)),await delay(0x3e8),await led(parseInt(localStorage['getItem'](_0xdbd955(0x1ce)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x323656=a0_0x3e5da4;await ledSave(_0x323656(0x206)),await Module['saveState'](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x323656(0x1fa)](_0x323656(0x208)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x59e6c7=a0_0x3e5da4,_0x31ca8d=localStorage[_0x59e6c7(0x1a4)](_0x59e6c7(0x1c3)),_0x2c90cc=_0x31ca8d[_0x59e6c7(0x1ab)](_0x59e6c7(0x1d6),_0x59e6c7(0x203)),_0x573a91=localStorage[_0x59e6c7(0x1a4)](_0x59e6c7(0x1e4)),_0x505349=localStorage[_0x59e6c7(0x1a4)](_0x31ca8d+_0x59e6c7(0x1bc)),_0x192ecf=localStorage[_0x59e6c7(0x1a4)](_0x31ca8d+_0x59e6c7(0x1c8));if(navigator[_0x59e6c7(0x1e0)]){if(_0x573a91){await ledSave(_0x59e6c7(0x1c9)),await delay(0x3e8),await dpUploadFile(_0x2c90cc,Module['downloadFile'](_0x59e6c7(0x1f8)+_0x2c90cc));if(_0x505349!==null){const _0x174885=_0x505349+'\x0a\x0a'+_0x192ecf,_0x5bd0cc=new Blob([_0x174885],{'type':'text/plain'});await dpUploadFile(_0x31ca8d+_0x59e6c7(0x1e1),_0x5bd0cc);}else console['log'](_0x59e6c7(0x1c5));await lockNoti('',_0x59e6c7(0x1a5)+ ++countUpload+'\x20time(s)',0x7d0);}else console[_0x59e6c7(0x1fa)](_0x59e6c7(0x1f3));}else console[_0x59e6c7(0x1fa)](_0x59e6c7(0x1dc));}function startTimer(){let [_0x193919,_0x36f06e,_0x179058,_0x566c55,_0x2e8f5c]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x269d43=a0_0x5e7f;_0x179058++,_0x566c55++,_0x2e8f5c++;if(_0x179058===0x3c)[_0x179058,_0x36f06e]=[0x0,_0x36f06e+0x1];if(_0x36f06e===0x3c)[_0x36f06e,_0x193919]=[0x0,_0x193919+0x1];document[_0x269d43(0x1eb)](_0x269d43(0x1d9))[_0x269d43(0x1dd)]=_0x193919+'h'+_0x36f06e['toString']()[_0x269d43(0x1bf)](0x2,'0')+'.'+_0x179058[_0x269d43(0x1ea)]()[_0x269d43(0x1bf)](0x2,'0');_0x566c55===0x3c&&(saveStatePeriodically(),_0x566c55=0x0);;_0x566c55===0xe10&&(saveStateInCloud(),_0x2e8f5c=0x0);;},0x3e8);}export async function uploadGame(_0x5247e7){const _0x533767=a0_0x3e5da4,_0x466145=_0x5247e7['files'][0x0];Module[_0x533767(0x1b5)](_0x466145,()=>{const _0x597ff0=_0x533767;Module[_0x597ff0(0x1f4)]();});}export async function loadGame(_0x3ccca0){const _0x52eff4=a0_0x3e5da4,_0x3da73d=_0x3ccca0['replace'](/\.(gba|gbc|gb|zip)$/,_0x52eff4(0x203)),_0x486a9b=Module[_0x52eff4(0x1f9)]();intro[_0x52eff4(0x1d3)]['add'](_0x52eff4(0x1c4)),errorLogElements[0x0][_0x52eff4(0x1d8)]['bottom']='0',ingame['classList'][_0x52eff4(0x1b4)](_0x52eff4(0x1c4)),_0x3ccca0[_0x52eff4(0x1a8)](_0x52eff4(0x1e6))||_0x3ccca0[_0x52eff4(0x1a8)]('.gb')?(canvas[_0x52eff4(0x1d3)]['add'](_0x52eff4(0x1fd)),areaTrans[_0x52eff4(0x1d3)][_0x52eff4(0x201)](_0x52eff4(0x1c0)),localStorage[_0x52eff4(0x1b6)](_0x52eff4(0x1b2),'0,0,'+(window[_0x52eff4(0x1f2)]-0xe6)+','+(window[_0x52eff4(0x1f2)]-0xe6)*0x9/0xa)):localStorage[_0x52eff4(0x1b6)]('screenSize','0,0,'+(window['innerWidth']-0x96)+','+(window[_0x52eff4(0x1f2)]-0x96)*0x2/0x3),_0x486a9b['includes'](_0x3da73d)?(await Module['loadGame'](_0x52eff4(0x1c1)+_0x3ccca0),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module['loadState'](0x0),localStorage[_0x52eff4(0x1b6)](_0x52eff4(0x1c3),_0x3ccca0),console[_0x52eff4(0x1fa)](_0x3ccca0))):(await Module[_0x52eff4(0x1b1)](_0x52eff4(0x1c1)+_0x3ccca0),localStorage[_0x52eff4(0x1b6)](_0x52eff4(0x1c3),_0x3ccca0)),await statusShow();}export async function saveState(_0x591095){const _0x4a0410=a0_0x3e5da4;await Module[_0x4a0410(0x1e5)](_0x591095),await Module['FSSync']();}export async function loadState(_0x95af48){const _0xe8b691=a0_0x3e5da4;await Module[_0xe8b691(0x1c2)](_0x95af48);}export async function downloadFile(_0x49b46f,_0x7d9e25){const _0x2e14f7=a0_0x3e5da4,_0x4733b9=Module[_0x2e14f7(0x1c7)](_0x49b46f),_0x527f6e=document['createElement']('a');document[_0x2e14f7(0x1b3)][_0x2e14f7(0x1df)](_0x527f6e),_0x527f6e[_0x2e14f7(0x1a7)]=_0x7d9e25;const _0x2be1e7=new Blob([_0x4733b9],{'type':_0x2e14f7(0x1af)});_0x527f6e[_0x2e14f7(0x1ae)]=URL[_0x2e14f7(0x1ad)](_0x2be1e7),_0x527f6e['click'](),URL[_0x2e14f7(0x205)](_0x2be1e7),_0x527f6e['remove']();}export function downloadFileInCloud(_0x44687b){const _0x582f68=a0_0x3e5da4,_0xd86b39=Module[_0x582f68(0x1c7)](_0x44687b);return _0xd86b39;}export async function uploadFile(_0x33a700){const _0x57e5ed=a0_0x3e5da4,_0x4fa405=_0x33a700[_0x57e5ed(0x1fb)][0x0];Module[_0x57e5ed(0x1d4)](_0x4fa405,()=>{Module['FSSync']();});}export async function editFile(_0x4b542a,_0x486b45,_0x51858c){const _0x576ef6=a0_0x3e5da4;await Module['editFileName'](_0x4b542a,_0x486b45,_0x51858c),await Module[_0x576ef6(0x1f4)]();}export async function deleteFile(_0x5b8561){const _0x28d386=a0_0x3e5da4;await Module[_0x28d386(0x1b8)](_0x5b8561),await Module['FSSync']();}function a0_0x5e7f(_0x3609ed,_0x538e32){const _0x193a29=a0_0x193a();return a0_0x5e7f=function(_0x5e7ffb,_0x2944ed){_0x5e7ffb=_0x5e7ffb-0x1a4;let _0x5beec0=_0x193a29[_0x5e7ffb];return _0x5beec0;},a0_0x5e7f(_0x3609ed,_0x538e32);}export function listGame(){const _0x2f7dbc=Module['listGames']();return _0x2f7dbc;}export function listSave(){const _0x2c5525=a0_0x3e5da4,_0x8fb3ad=Module[_0x2c5525(0x1a9)]();return _0x8fb3ad;}export function listState(){const _0x35b939=a0_0x3e5da4,_0xd8932a=Module[_0x35b939(0x1f9)]();return _0xd8932a;}export function listCheat(){const _0x59ffaa=a0_0x3e5da4,_0x2fb9ee=Module[_0x59ffaa(0x1b0)]();return _0x2fb9ee;}export function listScreenshot(){const _0x18a377=Module['listScreenshots']();return _0x18a377;}export function fileSize(_0xa0aa14){const _0x3183c4=Module['fileSize'](_0xa0aa14);return _0x3183c4;}export async function uploadCheat(_0xa6a108){const _0x3ac78d=a0_0x3e5da4;try{const _0x5599ef=_0xa6a108['files'][0x0];await Module['uploadCheats'](_0x5599ef,()=>{const _0x1681a8=a0_0x5e7f;console[_0x1681a8(0x1fa)](_0x1681a8(0x204),_0x5599ef[_0x1681a8(0x1f0)]),localStorageFile(),Module[_0x1681a8(0x1f4)]();});}catch(_0x3ef52b){console[_0x3ac78d(0x1cd)]('Error\x20uploadCheat:',_0x3ef52b);}}export async function uploadSavSta(_0x166e1f){const _0x3f0baf=a0_0x3e5da4;try{const _0x44253f=_0x166e1f[_0x3f0baf(0x1fb)][0x0];await Module[_0x3f0baf(0x1d4)](_0x44253f,()=>{const _0x1d074d=_0x3f0baf;console[_0x1d074d(0x1fa)]('Save/State\x20uploaded\x20successfully:',_0x44253f[_0x1d074d(0x1f0)]),localStorageFile(),Module[_0x1d074d(0x1f4)]();});}catch(_0x640c59){console['error']('Error\x20uploadSavSta:',_0x640c59);}}export async function uploadSaveOrSaveState(_0x739f28){const _0x1f9be1=a0_0x3e5da4;Module[_0x1f9be1(0x1d4)](_0x739f28,()=>{const _0x4256ff=_0x1f9be1;localStorageFile(),Module[_0x4256ff(0x1f4)]();});}export async function resumeGame(){const _0xe657a6=a0_0x3e5da4;Module[_0xe657a6(0x1e9)](),Module['SDL2'](),notiMessage(_0xe657a6(0x1d7),0x7d0);}export async function pauseGame(){const _0x4c6a51=a0_0x3e5da4;Module[_0x4c6a51(0x1aa)](),Module['SDL2'](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x2c6fd2){const _0xdb72ef=a0_0x3e5da4;Module[_0xdb72ef(0x1cf)](_0x2c6fd2);}export async function buttonUnpress(_0x3a8e00){const _0x497029=a0_0x3e5da4;Module[_0x497029(0x1ef)](_0x3a8e00);}export async function screenShot(_0x13a643){const _0x34277d=a0_0x3e5da4,_0x4e64d1=localStorage['getItem']('gameName'),_0x318c9c=_0x4e64d1[_0x34277d(0x1ab)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x34277d(0x1fc)](''+_0x318c9c+_0x13a643+'.png'),await Module[_0x34277d(0x1f4)]();const _0x3ff566=await fileToBase64(Module[_0x34277d(0x1c7)]('/data/screenshots/'+_0x318c9c+_0x13a643+_0x34277d(0x1bd))),_0x47fa43=Date[_0x34277d(0x202)](),_0x4c31b6=formatDateTime(_0x47fa43);localStorage['setItem'](_0x4e64d1+_0x34277d(0x209)+_0x13a643,_0x4c31b6),localStorage[_0x34277d(0x1b6)](_0x4e64d1+'_imageState'+_0x13a643,_0x3ff566);}export async function captureOCR(_0x4437bd){const _0x3ea51b=a0_0x3e5da4;Module[_0x3ea51b(0x1fc)](_0x4437bd);const _0x1cd2d5=Module[_0x3ea51b(0x1c7)](_0x3ea51b(0x1d5)+_0x4437bd);return _0x1cd2d5;}export async function setFastForwardMultiplier(_0x1e893e){const _0x4be4c7=a0_0x3e5da4;Module[_0x4be4c7(0x1be)](_0x1e893e);}export function uploadCheats(_0x3c8ef0,_0x3a59cb,_0x35ed7f,_0x586de1,_0x3fba15){const _0x410679=a0_0x3e5da4;Module[_0x410679(0x1de)](_0x3c8ef0,()=>{const _0x94adf4=_0x410679;Module[_0x94adf4(0x1bb)](),setTimeout(()=>{const _0x550433=_0x94adf4;Module[_0x550433(0x1f4)]();},0x1f4),_0x586de1&&(localStorage[_0x94adf4(0x1b6)](_0x3a59cb+_0x94adf4(0x1ec),_0x35ed7f),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x3fba15[_0x94adf4(0x1dd)]=localStorage['getItem'](_0x3a59cb+_0x94adf4(0x1ec)||_0x94adf4(0x1c6));});}function a0_0x193a(){const _0x4e9659=['listSaves','pauseGame','replace','5884274JVXkIy','createObjectURL','href','application/octet-stream','listCheats','loadGame','screenSize','body','remove','uploadRom','setItem','hidden','deleteFile','1155536wCPJbR','contains','autoLoadCheats','_imageState0','.png','setFastForwardMultiplier','padStart','gbc1','/data/games/','loadState','gameName','disable','No\x20screenshot!','Off','downloadFile','_dateState0','#E0C068','control-setting','898326ZnAIEy','201Dxwtyw','error','slotStateSaved','buttonPress','FSInit','persisted','80shouQB','classList','uploadSaveOrSaveState','/data/screenshots/','.gba','Resumed!','style','timer','4168QfVKKr','canvas','Online!','textContent','uploadCheats','appendChild','onLine','_slot0.txt','turboState','type','uId','saveState','.gbc','visible','visibilitychange','resumeGame','toString','getElementById','_savedCheats','4593603CMAjsh','beforeunload','buttonUnpress','name','9232140HnxLTB','innerWidth','Unable\x20to\x20upload\x20to\x20Cloud!','FSSync','then','550971MQlPDA','3buUoiI','/data/states/','listStates','log','files','screenshot','gbc','25qkZIWQ','visibilityState','pagehide','add','now','.ss0','Cheat\x20uploaded\x20successfully:','revokeObjectURL','#20A5A6','turboF','Auto\x20save\x20','_dateState','getItem','Cloud\x20upload\x20','addEventListener','download','endsWith'];a0_0x193a=function(){return _0x4e9659;};return a0_0x193a();}