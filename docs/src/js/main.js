const a0_0x17381d=a0_0x31c7;(function(_0x40df3e,_0x3f6269){const _0x3f7a7b=a0_0x31c7,_0x308ae0=_0x40df3e();while(!![]){try{const _0x56c58d=parseInt(_0x3f7a7b(0xef))/0x1*(-parseInt(_0x3f7a7b(0x92))/0x2)+-parseInt(_0x3f7a7b(0xaa))/0x3*(parseInt(_0x3f7a7b(0xb4))/0x4)+-parseInt(_0x3f7a7b(0x88))/0x5+parseInt(_0x3f7a7b(0xdc))/0x6+-parseInt(_0x3f7a7b(0xe6))/0x7*(parseInt(_0x3f7a7b(0xb7))/0x8)+-parseInt(_0x3f7a7b(0xc4))/0x9*(-parseInt(_0x3f7a7b(0xe4))/0xa)+parseInt(_0x3f7a7b(0xd6))/0xb;if(_0x56c58d===_0x3f6269)break;else _0x308ae0['push'](_0x308ae0['shift']());}catch(_0x86f24f){_0x308ae0['push'](_0x308ae0['shift']());}}}(a0_0x3bef,0x4bb30));import a0_0x33978e from'../core/1.1.0/mgba.js';import a0_0x3a6f3c from'../core/2.0.0/mgba.js';import*as a0_0x32feae from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x33978e,'2.0.0':a0_0x3a6f3c};let currentVersion=localStorage[a0_0x17381d(0xd3)](a0_0x17381d(0xee))||a0_0x17381d(0xc7),mGBA=versions[currentVersion];document[a0_0x17381d(0xf0)](a0_0x17381d(0xee))['textContent']=a0_0x17381d(0xc1)+currentVersion,document['getElementById'](a0_0x17381d(0xee))[a0_0x17381d(0xba)]('click',()=>{const _0x31dbce=a0_0x17381d,_0x492bf4=Object[_0x31dbce(0xdd)](versions);let _0x495c61=_0x492bf4[_0x31dbce(0xd5)](currentVersion);currentVersion=_0x492bf4[(_0x495c61+0x1)%_0x492bf4['length']],localStorage[_0x31dbce(0xb1)](_0x31dbce(0xee),currentVersion),document['getElementById'](_0x31dbce(0xee))[_0x31dbce(0xb5)]='Wasm_©'+currentVersion,setTimeout(()=>{const _0x574742=_0x31dbce;window[_0x574742(0xe5)]['reload']();},0x3e8);});const Module={'canvas':document[a0_0x17381d(0xf0)](a0_0x17381d(0xe8))};function initializeCore(_0x35744b,_0x5e08ff){const _0x32ade2=a0_0x17381d;_0x35744b(_0x5e08ff)[_0x32ade2(0xfb)](function(_0x5f3ba5){const _0x1fff0f=_0x32ade2;_0x5f3ba5[_0x1fff0f(0xa9)]();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document['getElementById'](a0_0x17381d(0xe8)),controlSetting=document[a0_0x17381d(0xf0)](a0_0x17381d(0x84));function handleVisibilityChange(_0xffdc43){const _0x19c242=a0_0x17381d;document[_0x19c242(0xc0)]===_0x19c242(0x86)||_0xffdc43?.[_0x19c242(0x8a)]===_0x19c242(0x99)||_0xffdc43?.['persisted']?(Module[_0x19c242(0x9e)](),pauseGame(),canvas[_0x19c242(0xfe)][_0x19c242(0xe0)]('visible')):(setTimeout(()=>{const _0x3bc526=_0x19c242;canvas[_0x3bc526(0xfe)][_0x3bc526(0x94)](_0x3bc526(0xf2));},0x258),controlSetting[_0x19c242(0xfe)][_0x19c242(0xff)]('visible')&&resumeGame());}async function statusShow(){const _0x5edd6c=a0_0x17381d;document[_0x5edd6c(0xba)]('pagehide',handleVisibilityChange),document[_0x5edd6c(0xba)](_0x5edd6c(0x96),handleVisibilityChange),window[_0x5edd6c(0xba)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),await a0_0x32feae[_0x5edd6c(0xc6)](parseInt(await getData(gameName,'0',_0x5edd6c(0xde)))),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x5edd6c(0x83)))),await notiMessage('W_©'+currentVersion,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x163744=a0_0x17381d;await ledSave(_0x163744(0x8b)),await Module[_0x163744(0xf3)](0x0),await Module[_0x163744(0x9e)](),await screenShot(0x0),console['log'](_0x163744(0xf6)+ ++countAutoSave+_0x163744(0xda));}async function saveStateInCloud(){const _0x7a2e8c=a0_0x17381d,_0x13ad02=gameName[_0x7a2e8c(0xdf)](/\.(zip|gb|gbc|gba)$/,_0x7a2e8c(0xf1)),_0x2a7b5a=localStorage[_0x7a2e8c(0xd3)](_0x7a2e8c(0xd9));navigator[_0x7a2e8c(0xf5)]&&(_0x2a7b5a&&(await ledSave(_0x7a2e8c(0xf7)),await delay(0x3e8),await dpUploadFile(_0x13ad02,Module['downloadFile'](_0x7a2e8c(0xeb)+_0x13ad02),_0x7a2e8c(0x8f)),await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x7a2e8c(0xda),0x7d0)));}function startTimer(){let [_0x5e6eab,_0x14a3bb,_0xc41517,_0x3fc903,_0x2128bc]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x22e103=a0_0x31c7;_0xc41517++,_0x3fc903++,_0x2128bc++;if(_0xc41517===0x3c)[_0xc41517,_0x14a3bb]=[0x0,_0x14a3bb+0x1];if(_0x14a3bb===0x3c)[_0x14a3bb,_0x5e6eab]=[0x0,_0x5e6eab+0x1];document[_0x22e103(0xf0)]('timer')[_0x22e103(0xb5)]=_0x5e6eab+'h'+_0x14a3bb[_0x22e103(0xc3)]()[_0x22e103(0xfa)](0x2,'0')+'.'+_0xc41517['toString']()['padStart'](0x2,'0');_0x3fc903===0x3c&&(saveStatePeriodically(),_0x3fc903=0x0);;_0x2128bc===0x708&&(saveStateInCloud(),_0x2128bc=0x0);;},0x3e8);}export async function uploadGame(_0x324738){const _0x41e899=_0x324738['files'][0x0];Module['uploadRom'](_0x41e899,()=>{const _0x3b1e40=a0_0x31c7;Module[_0x3b1e40(0x9e)]();});}export async function loadGame(_0x515dcc){const _0x4e99f1=a0_0x17381d,_0x1960e7=_0x515dcc['replace'](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0xc3a2a7=Module[_0x4e99f1(0x100)](_0x4e99f1(0x97))[_0x4e99f1(0xdb)](_0x4e46e8=>_0x4e46e8!=='.'&&_0x4e46e8!=='..');intro[_0x4e99f1(0xfe)]['add'](_0x4e99f1(0xa5)),errorLogElements[0x0]['style']['bottom']='0',ingame['classList'][_0x4e99f1(0x94)](_0x4e99f1(0xa5)),_0x515dcc[_0x4e99f1(0x8c)](_0x4e99f1(0x9a))||_0x515dcc['endsWith'](_0x4e99f1(0xbd))?(canvas['classList'][_0x4e99f1(0xe0)](_0x4e99f1(0x9b)),areaTrans[_0x4e99f1(0xfe)][_0x4e99f1(0xe0)]('gbc1'),localStorage[_0x4e99f1(0xb1)](_0x4e99f1(0xd7),_0x4e99f1(0xac)+(window[_0x4e99f1(0xce)]-0xe6)+','+(window[_0x4e99f1(0xce)]-0xe6)*0x9/0xa)):localStorage[_0x4e99f1(0xb1)](_0x4e99f1(0xd7),_0x4e99f1(0xac)+(window[_0x4e99f1(0xce)]-0x96)+','+(window[_0x4e99f1(0xce)]-0x96)*0x2/0x3),_0xc3a2a7[_0x4e99f1(0xfd)](_0x1960e7)?(await Module[_0x4e99f1(0xed)]('/data/games/'+_0x515dcc),confirm(_0x4e99f1(0xcd))&&(await delay(0x64),await Module[_0x4e99f1(0x89)](0x0),await shaderData())):(await Module[_0x4e99f1(0xed)](_0x4e99f1(0x91)+_0x515dcc),await shaderData()),await statusShow();}export async function saveState(_0x1790de){const _0x4cdd11=a0_0x17381d;await Module[_0x4cdd11(0xf3)](_0x1790de);}function a0_0x3bef(){const _0x45848b=['GBAver','7223LDgxcm','getElementById','.ss0','visible','saveState','uploadAll','onLine','Auto\x20save\x20','#E0C068','listCheats','All','padStart','then','tEXtComment\x00','includes','classList','contains','listFiles','download','led01','saveTime','slotStateSaved','control-setting','exec','hidden','concat','433375bgMmCE','loadState','type','#20A5A6','endsWith','style','trim','state','led06','/data/games/','68sdMqkr','image/png','remove','map','visibilitychange','states','files','beforeunload','.gbc','gbc','setFastForwardMultiplier','createElement','FSSync','buttonPress','opacity','led0','downloadFile','match','error','disable','fill','revokeObjectURL','noti-mess','FSInit','301899iTIzsx','length','0,0,','log','.png','led02','split','setItem','resumeGame','listScreenshots','4tHHTpU','textContent','led07','472568ykRyim','\x20|\x20','rgba(245,\x20232,\x20209,\x200.4)','addEventListener','led05','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','.gb','led00','Error\x20ledSave:','visibilityState','Wasm_©','buttonUnpress','toString','9JUaScg','0.4','turboF','1.1.0','\x20:\x20','lastIndexOf','charCodeAt','autoLoadCheats','screenshot','Do\x20you\x20want\x20to\x20load\x20save\x20state?','innerWidth','createObjectURL','substring','listStates','body','getItem','encode','indexOf','2464671ktEeEp','screenSize','now','uId','\x20time(s)','filter','1609098UoNgHb','keys','turboState','replace','add','Paused!','toggleRewind','pauseGame','5460650btnbrL','location','35wwOSJV','join','canvas','setVolume','click','/data/states/','/data/screenshots/','loadGame'];a0_0x3bef=function(){return _0x45848b;};return a0_0x3bef();}export async function loadState(_0x3ea766){const _0x160772=a0_0x17381d;await Module[_0x160772(0x89)](_0x3ea766);}export async function downloadFile(_0x42b725,_0x72308a){const _0x35896d=a0_0x17381d,_0x2c8ecb=Module['downloadFile'](_0x42b725),_0x2b0b8e=document[_0x35896d(0x9d)]('a');document[_0x35896d(0xd2)]['appendChild'](_0x2b0b8e),_0x2b0b8e[_0x35896d(0x101)]=_0x72308a;const _0x5a1288=new Blob([_0x2c8ecb],{'type':'application/octet-stream'});_0x2b0b8e['href']=URL[_0x35896d(0xcf)](_0x5a1288),_0x2b0b8e[_0x35896d(0xea)](),URL[_0x35896d(0xa7)](_0x5a1288),_0x2b0b8e[_0x35896d(0x94)]();}export function downloadFileInCloud(_0x1281c2){try{const _0x5cc63a=Module['downloadFile'](_0x1281c2);return _0x5cc63a;}catch(_0x3e831f){return null;}}export async function uploadFileInCloud(_0x5a1b0e){const _0x3b7b5d=a0_0x17381d;Module[_0x3b7b5d(0xf4)](_0x5a1b0e,async()=>{const _0xea3f16=_0x3b7b5d;localStorageFile(),await Module[_0xea3f16(0x9e)]();});}export async function uploadFile(_0x409403){const _0x3cb23c=a0_0x17381d,_0x422527=_0x409403[_0x3cb23c(0x98)][0x0];Module[_0x3cb23c(0xf4)](_0x422527,async()=>{const _0x193c60=_0x3cb23c;localStorageFile(),await Module[_0x193c60(0x9e)]();});}export async function editFile(_0x241180,_0x55eb7e,_0x5a89f8){await Module['editFileName'](_0x241180,_0x55eb7e,_0x5a89f8);}export async function deleteFile(_0x2b59b0){const _0x28fcb4=a0_0x17381d;try{return await Module['deleteFile'](_0x2b59b0),!![];}catch(_0x17ec6d){return console[_0x28fcb4(0xa4)](_0x2b59b0),null;}}export function listFiles(_0x222302){const _0x8dd056=a0_0x17381d,_0x1249ff=Module[_0x8dd056(0x100)](_0x222302)[_0x8dd056(0xdb)](_0x361f1e=>_0x361f1e!=='.'&&_0x361f1e!=='..');return _0x1249ff;}export function listGame(){const _0x3ca105=Module['listRoms']()['filter'](_0x8df401=>_0x8df401!=='.'&&_0x8df401!=='..');return _0x3ca105;}export function listSave(){const _0x18d544=a0_0x17381d,_0x429013=Module['listSaves']()[_0x18d544(0xdb)](_0x18a23f=>_0x18a23f!=='.'&&_0x18a23f!=='..');return _0x429013;}export function listState(){const _0x18e709=a0_0x17381d,_0x1618b5=Module[_0x18e709(0xd1)]()[_0x18e709(0xdb)](_0x56e8ba=>_0x56e8ba!=='.'&&_0x56e8ba!=='..');return _0x1618b5;}export function listCheat(){const _0x1969aa=a0_0x17381d,_0x2334cd=Module[_0x1969aa(0xf8)]()[_0x1969aa(0xdb)](_0x555e03=>_0x555e03!=='.'&&_0x555e03!=='..');return _0x2334cd;}export function listScreenshot(){const _0x5115ec=a0_0x17381d,_0x3741e1=Module[_0x5115ec(0xb3)]()[_0x5115ec(0xdb)](_0x5c4682=>_0x5c4682!=='.'&&_0x5c4682!=='..');return _0x3741e1;}export function fileSize(_0x5cdf75){const _0x5e09ac=Module['fileSize'](_0x5cdf75);return _0x5e09ac;}export async function resumeGame(){const _0x547f7c=a0_0x17381d;Module[_0x547f7c(0xb2)](),Module['SDL2'](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x334c50=a0_0x17381d;Module[_0x334c50(0xe3)](),Module['SDL2'](),notiMessage(_0x334c50(0xe1),0x7d0);}export async function buttonPress(_0xeeb4e9){const _0x5d027e=a0_0x17381d;Module[_0x5d027e(0x9f)](_0xeeb4e9);}export async function buttonUnpress(_0x1781e9){const _0x2579d7=a0_0x17381d;Module[_0x2579d7(0xc2)](_0x1781e9);}export async function screenShot(_0x3be211){const _0x50ecb5=a0_0x17381d,_0x2ff555=gameName[_0x50ecb5(0xdf)](/\.(gba|gbc|gb|zip)$/,'_'+_0x3be211+'.png'),_0x438cfd=await getData(gameName,_0x3be211,'All')||'';console[_0x50ecb5(0xad)](_0x438cfd),await Module['screenshot'](_0x2ff555),await setData(gameName,_0x3be211,_0x50ecb5(0x82),formatDateTime(Date[_0x50ecb5(0xd8)]()),_0x438cfd);}function a0_0x31c7(_0x58f712,_0x4a1195){const _0x3befd9=a0_0x3bef();return a0_0x31c7=function(_0x31c7c0,_0x2a5201){_0x31c7c0=_0x31c7c0-0x81;let _0xab517f=_0x3befd9[_0x31c7c0];return _0xab517f;},a0_0x31c7(_0x58f712,_0x4a1195);}export async function dowloadScreenShot(_0x2146db){const _0x4325af=a0_0x17381d;try{const _0xbd1aa=await fileToBase64(Module[_0x4325af(0xa2)](_0x2146db));return _0xbd1aa;}catch{}}export async function captureOCR(_0x2db3df){const _0x453e76=a0_0x17381d;Module['screenshot'](_0x2db3df);const _0x245a9c=Module[_0x453e76(0xa2)]('/data/screenshots/'+_0x2db3df);return _0x245a9c;}export async function setFastForwardMultiplier(_0x400b6a){const _0x2da4ec=a0_0x17381d;Module[_0x2da4ec(0x9c)](_0x400b6a);}export async function uploadCheats(_0x733a03){const _0x453177=a0_0x17381d;Module[_0x453177(0xcb)](),Module[_0x453177(0xf4)](_0x733a03,async()=>{});}export function setVolume(_0x19d4a0){const _0x105e67=a0_0x17381d;Module[_0x105e67(0xe9)](_0x19d4a0);}export async function setData(_0x29db93,_0x2958a1,_0x26895,_0x5cfcad,_0x342995=''){const _0x2f1c34=a0_0x17381d,_0x2b9014=_0x29db93[_0x2f1c34(0xdf)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x422a67=_0x2f1c34(0xec)+_0x2b9014+'_'+_0x2958a1+_0x2f1c34(0xae);let _0x27ef23;try{_0x27ef23=await fileToBase64(Module['downloadFile'](_0x422a67));}catch(_0x1d45f0){await Module[_0x2f1c34(0xcc)](_0x2b9014+'_'+_0x2958a1+_0x2f1c34(0xae)),await delay(0xc8),_0x27ef23=await fileToBase64(Module[_0x2f1c34(0xa2)](_0x422a67));}let _0x9c5f02=atob(_0x27ef23[_0x2f1c34(0xb0)](',')[0x1]),_0x2f9307=_0x2f1c34(0xfc),_0x288a02=_0x9c5f02['indexOf'](_0x2f9307),_0x3cea7f={};if(_0x288a02!==-0x1||_0x342995['trim']()!==''){let _0x334203=_0x288a02!==-0x1?_0x9c5f02[_0x2f1c34(0xd0)](_0x288a02+_0x2f9307['length']):_0x342995,_0x781b8c=/(\w+)\s*:\s*([^|]*)/g,_0x236483;while((_0x236483=_0x781b8c[_0x2f1c34(0x85)](_0x334203))!==null){_0x3cea7f[_0x236483[0x1]['trim']()]=_0x236483[0x2][_0x2f1c34(0x8e)]();}_0x288a02!==-0x1&&(_0x9c5f02=_0x9c5f02[_0x2f1c34(0xd0)](0x0,_0x288a02));}_0x3cea7f[_0x26895]=_0x5cfcad;let _0x3cc39e=Object['entries'](_0x3cea7f)['map'](([_0x1fe781,_0xdc12a7])=>_0x1fe781+_0x2f1c34(0xc8)+_0xdc12a7)[_0x2f1c34(0xe7)](_0x2f1c34(0xb8)),_0x4c78ee=new TextEncoder()[_0x2f1c34(0xd4)](_0x2f9307+'\x20'+_0x3cc39e),_0x99c107=new Uint8Array([..._0x9c5f02][_0x2f1c34(0x95)](_0x5db978=>_0x5db978[_0x2f1c34(0xca)](0x0))[_0x2f1c34(0x87)]([..._0x4c78ee])),_0x44a732=new File([new Blob([_0x99c107],{'type':_0x2f1c34(0x93)})],_0x2b9014+'_'+_0x2958a1+_0x2f1c34(0xae),{'type':'image/png'});Module[_0x2f1c34(0xf4)](_0x44a732,async()=>{});}export async function getData(_0xa3817d,_0x46568d,_0x16698a){const _0x507b7d=a0_0x17381d;try{const _0x50fbe5=_0xa3817d[_0x507b7d(0xdf)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x2e4654='/data/screenshots/'+_0x50fbe5+'_'+_0x46568d+_0x507b7d(0xae);let _0x5e3594;try{_0x5e3594=await fileToBase64(Module['downloadFile'](_0x2e4654));}catch(_0xaa6a3a){return null;}let _0x22d85f=atob(_0x5e3594['split'](',')[0x1]),_0x15c031=_0x507b7d(0xfc),_0x129042=_0x22d85f[_0x507b7d(0xd5)](_0x15c031);if(_0x129042!==-0x1){let _0xd8010d=_0x22d85f[_0x507b7d(0xd0)](_0x129042+_0x15c031[_0x507b7d(0xab)]);if(_0x16698a===_0x507b7d(0xf9))return _0xd8010d['trim']();let _0x1799d4=new RegExp(_0x16698a+_0x507b7d(0xbc)),_0xa47e8c=_0xd8010d[_0x507b7d(0xa3)](_0x1799d4);if(_0xa47e8c)return _0xa47e8c[0x1][_0x507b7d(0x8e)]();}}catch(_0xf58bde){return console[_0x507b7d(0xa4)]({'romName':_0xa3817d,'slot':_0x46568d,'type':_0x16698a}),null;}}export async function ledSave(_0xd30954){const _0x18ae23=a0_0x17381d,_0x76fea3=parseInt(await getData(gameName,'0',_0x18ae23(0x83))),_0x1e0ae0=_0x76fea3===0x1?_0x18ae23(0x81):_0x76fea3===0x2?_0x18ae23(0xaf):_0x76fea3===0x3?'led03':_0x76fea3===0x4?'led04':_0x76fea3===0x5?_0x18ae23(0xbb):_0x76fea3===0x6?_0x18ae23(0x90):_0x76fea3===0x7?_0x18ae23(0xb6):_0x18ae23(0xbe);try{for(let _0x63b262=0x0;_0x63b262<=0x7;_0x63b262++){document['getElementById'](_0x18ae23(0xa1)+_0x63b262)[_0x18ae23(0x8d)][_0x18ae23(0xa6)]=_0x18ae23(0xb9);}await delay(0x3e8);for(let _0x5e1d1c=0x0;_0x5e1d1c<=0x7;_0x5e1d1c++){document['getElementById'](_0x18ae23(0xa1)+_0x5e1d1c)['style']['fill']=_0x18ae23(0xb9);}document[_0x18ae23(0xf0)](_0x1e0ae0)['style'][_0x18ae23(0xa6)]=_0xd30954;}catch(_0x162ea8){console[_0x18ae23(0xa4)](_0x18ae23(0xbf),_0x162ea8);}};export async function notiMessage(_0x2da0be,_0x21e657,_0x69674f=![]){const _0x46b328=a0_0x17381d;var _0x33263d=document[_0x46b328(0xf0)](_0x46b328(0xa8));const _0x2e3851=parseInt(await getData(gameName,'0','slotStateSaved'))||0x0;_0x33263d['style'][_0x46b328(0xa0)]===_0x46b328(0xc5)&&(clearTimeout(messageTimeout),_0x33263d[_0x46b328(0x8d)]['opacity']='0'),_0x33263d[_0x46b328(0xb5)]=_0x2da0be,_0x33263d[_0x46b328(0x8d)][_0x46b328(0xa0)]='0.4',messageTimeout=setTimeout(()=>{const _0x4675c5=_0x46b328;_0x33263d[_0x4675c5(0xb5)]='['+_0x2e3851+']\x20'+gameName['substring'](0x0,gameName[_0x4675c5(0xc9)]('.')),_0x33263d[_0x4675c5(0x8d)][_0x4675c5(0xa0)]=_0x4675c5(0xc5);},_0x21e657),_0x69674f&&(canvas[_0x46b328(0xfe)]['add']('visible'),setTimeout(()=>{const _0x472318=_0x46b328;canvas[_0x472318(0xfe)][_0x472318(0x94)]('visible');},0x258));}export async function FSSync(){const _0xb11f69=a0_0x17381d;Module[_0xb11f69(0x9e)]();}export const rewind=_0x1da9c4=>Module[a0_0x17381d(0xe2)]?.(_0x1da9c4)||null;