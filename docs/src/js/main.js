const a0_0xdcd882=a0_0x9f21;(function(_0x388aee,_0x34176b){const _0x49858=a0_0x9f21,_0x4c260c=_0x388aee();while(!![]){try{const _0xd76361=-parseInt(_0x49858(0x13b))/0x1*(parseInt(_0x49858(0x171))/0x2)+parseInt(_0x49858(0x175))/0x3*(-parseInt(_0x49858(0x146))/0x4)+parseInt(_0x49858(0x161))/0x5+parseInt(_0x49858(0x185))/0x6*(-parseInt(_0x49858(0x138))/0x7)+parseInt(_0x49858(0x155))/0x8+-parseInt(_0x49858(0x18b))/0x9+parseInt(_0x49858(0x15a))/0xa*(parseInt(_0x49858(0x168))/0xb);if(_0xd76361===_0x34176b)break;else _0x4c260c['push'](_0x4c260c['shift']());}catch(_0x111bda){_0x4c260c['push'](_0x4c260c['shift']());}}}(a0_0x4e39,0xd89a5));import a0_0x642364 from'../core/mgba.js';import*as a0_0x5af7c6 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document['getElementById'](a0_0xdcd882(0x18d))};function initializeCore(_0x4b899e,_0x5e1122){_0x4b899e(_0x5e1122)['then'](function(_0x3b91f7){_0x3b91f7['FSInit']();});}initializeCore(a0_0x642364,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0xdcd882(0x18d)),savedTurboState=localStorage['getItem'](a0_0xdcd882(0x195)),controlSetting=document[a0_0xdcd882(0x183)](a0_0xdcd882(0x14c));function handleVisibilityChange(_0x54e376){const _0x53b8e5=a0_0xdcd882;document[_0x53b8e5(0x150)]===_0x53b8e5(0x15d)||_0x54e376?.[_0x53b8e5(0x153)]===_0x53b8e5(0x152)||_0x54e376?.[_0x53b8e5(0x16c)]?(pauseGame(),canvas['classList']['add'](_0x53b8e5(0x147))):(setTimeout(()=>{const _0x5d7cdd=_0x53b8e5;canvas[_0x5d7cdd(0x181)][_0x5d7cdd(0x13f)](_0x5d7cdd(0x147));},0x258),controlSetting[_0x53b8e5(0x181)][_0x53b8e5(0x158)]('visible')&&resumeGame());}async function statusShow(){const _0x51cb8a=a0_0xdcd882;document['addEventListener']('pagehide',handleVisibilityChange),document[_0x51cb8a(0x156)](_0x51cb8a(0x188),handleVisibilityChange),window[_0x51cb8a(0x156)](_0x51cb8a(0x152),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x5af7c6[_0x51cb8a(0x197)](turboState)),await delay(0xc8),await Module[_0x51cb8a(0x163)](),await delay(0x320),await led(parseInt(localStorage[_0x51cb8a(0x17a)](_0x51cb8a(0x189)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x21059d=a0_0xdcd882;await ledSave('#20A5A6'),await Module[_0x21059d(0x192)](0x0),await Module[_0x21059d(0x157)](),await screenShot(0x0),console[_0x21059d(0x167)](_0x21059d(0x166)+ ++countAutoSave+_0x21059d(0x13d));}async function saveStateInCloud(){const _0x244196=a0_0xdcd882,_0x303efa=localStorage['getItem'](_0x244196(0x176)),_0x191eb6=_0x303efa['replace'](/\.(zip|gb|gbc|gba)$/,_0x244196(0x190)),_0x525c2f=localStorage['getItem'](_0x244196(0x173));navigator[_0x244196(0x149)]&&(_0x525c2f&&(await ledSave(_0x244196(0x186)),await delay(0x3e8),await dpUploadFile(_0x191eb6,Module[_0x244196(0x15b)](_0x244196(0x148)+_0x191eb6),_0x244196(0x16b)),await lockNoti('',_0x244196(0x16e)+ ++countUpload+_0x244196(0x13d),0x7d0)));}function startTimer(){let [_0x4514e8,_0x4366da,_0x3c8c8b,_0x106b39,_0xe6bfd5]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x4a1103=a0_0x9f21;_0x3c8c8b++,_0x106b39++,_0xe6bfd5++;if(_0x3c8c8b===0x3c)[_0x3c8c8b,_0x4366da]=[0x0,_0x4366da+0x1];if(_0x4366da===0x3c)[_0x4366da,_0x4514e8]=[0x0,_0x4514e8+0x1];document[_0x4a1103(0x183)](_0x4a1103(0x191))['textContent']=_0x4514e8+'h'+_0x4366da[_0x4a1103(0x193)]()[_0x4a1103(0x170)](0x2,'0')+'.'+_0x3c8c8b[_0x4a1103(0x193)]()[_0x4a1103(0x170)](0x2,'0');_0x106b39===0x3c&&(saveStatePeriodically(),_0x106b39=0x0);;_0xe6bfd5===0x708&&(saveStateInCloud(),_0xe6bfd5=0x0);;},0x3e8);}function a0_0x9f21(_0x20056b,_0x3161c7){const _0x4e394f=a0_0x4e39();return a0_0x9f21=function(_0x9f210d,_0x1efebc){_0x9f210d=_0x9f210d-0x137;let _0x4a45e8=_0x4e394f[_0x9f210d];return _0x4a45e8;},a0_0x9f21(_0x20056b,_0x3161c7);}export async function uploadGame(_0x3fb1b1){const _0x488e51=a0_0xdcd882,_0x5a44bf=_0x3fb1b1['files'][0x0];Module[_0x488e51(0x18e)](_0x5a44bf,()=>{const _0x984403=_0x488e51;Module[_0x984403(0x157)]();});}export async function loadGame(_0x579787){const _0x432054=a0_0xdcd882,_0x2c7f52=_0x579787[_0x432054(0x144)](/\.(gba|gbc|gb|zip)$/,_0x432054(0x190)),_0x23c42b=Module[_0x432054(0x139)]()[_0x432054(0x14d)](_0x4da881=>_0x4da881!=='.'&&_0x4da881!=='..');intro[_0x432054(0x181)][_0x432054(0x184)](_0x432054(0x187)),errorLogElements[0x0][_0x432054(0x13c)][_0x432054(0x16d)]='0',ingame[_0x432054(0x181)][_0x432054(0x13f)](_0x432054(0x187)),_0x579787['endsWith']('.gbc')||_0x579787['endsWith'](_0x432054(0x137))?(canvas['classList']['add'](_0x432054(0x13e)),areaTrans['classList']['add'](_0x432054(0x151)),localStorage[_0x432054(0x169)]('screenSize',_0x432054(0x182)+(window[_0x432054(0x15f)]-0xe6)+','+(window[_0x432054(0x15f)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x432054(0x143),_0x432054(0x182)+(window[_0x432054(0x15f)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x23c42b[_0x432054(0x164)](_0x2c7f52)?(await Module[_0x432054(0x18c)](_0x432054(0x13a)+_0x579787),confirm(_0x432054(0x174))&&(await Module[_0x432054(0x14a)](0x0),localStorage[_0x432054(0x169)](_0x432054(0x176),_0x579787),console[_0x432054(0x167)](_0x579787))):(await Module['loadGame'](_0x432054(0x13a)+_0x579787),localStorage[_0x432054(0x169)]('gameName',_0x579787),console[_0x432054(0x167)](_0x579787)),await statusShow();}export async function saveState(_0x5ed1c4){await Module['saveState'](_0x5ed1c4),await Module['FSSync']();}export async function loadState(_0x4e696d){const _0x2ef36d=a0_0xdcd882;await Module[_0x2ef36d(0x14a)](_0x4e696d);}export async function downloadFile(_0x5b5de5,_0x26f4ae){const _0x475e2b=a0_0xdcd882,_0x5b72f1=Module[_0x475e2b(0x15b)](_0x5b5de5),_0x2ca7b2=document[_0x475e2b(0x165)]('a');document['body'][_0x475e2b(0x180)](_0x2ca7b2),_0x2ca7b2['download']=_0x26f4ae;const _0x4cca12=new Blob([_0x5b72f1],{'type':'application/octet-stream'});_0x2ca7b2[_0x475e2b(0x194)]=URL['createObjectURL'](_0x4cca12),_0x2ca7b2[_0x475e2b(0x14b)](),URL[_0x475e2b(0x142)](_0x4cca12),_0x2ca7b2[_0x475e2b(0x13f)]();}export function downloadFileInCloud(_0x2528b3){const _0x8a8855=Module['downloadFile'](_0x2528b3);return _0x8a8855;}export async function uploadFileInCloud(_0x4ad6e3){Module['uploadAll'](_0x4ad6e3,()=>{const _0x16a268=a0_0x9f21;localStorageFile(),Module[_0x16a268(0x157)]();});}export async function uploadFile(_0x7732db){const _0x283660=a0_0xdcd882,_0x53bebc=_0x7732db[_0x283660(0x141)][0x0];Module[_0x283660(0x14f)](_0x53bebc,()=>{const _0x42d9c6=_0x283660;localStorageFile(),Module[_0x42d9c6(0x157)]();});}export async function editFile(_0x402cdc,_0x579d8b,_0x3baa71){const _0x42c68c=a0_0xdcd882;await Module[_0x42c68c(0x179)](_0x402cdc,_0x579d8b,_0x3baa71),await Module[_0x42c68c(0x157)]();}export async function deleteFile(_0x1c6001){const _0x1db900=a0_0xdcd882;await Module['deleteFile'](_0x1c6001),await Module[_0x1db900(0x157)]();}export function listGame(){const _0x1420ec=a0_0xdcd882,_0x3704b1=Module[_0x1420ec(0x17d)]()[_0x1420ec(0x14d)](_0x51cc6d=>_0x51cc6d!=='.'&&_0x51cc6d!=='..');return _0x3704b1;}export function listSave(){const _0x31343f=a0_0xdcd882,_0x942ce2=Module[_0x31343f(0x145)]()['filter'](_0xd882bf=>_0xd882bf!=='.'&&_0xd882bf!=='..');return _0x942ce2;}export function listState(){const _0x437df8=a0_0xdcd882,_0x569f16=Module[_0x437df8(0x139)]()[_0x437df8(0x14d)](_0x3f8949=>_0x3f8949!=='.'&&_0x3f8949!=='..');return _0x569f16;}export function listCheat(){const _0x5112a0=a0_0xdcd882,_0x24702e=Module[_0x5112a0(0x15e)]()[_0x5112a0(0x14d)](_0x9cebd=>_0x9cebd!=='.'&&_0x9cebd!=='..');return _0x24702e;}export function listScreenshot(){const _0x5d544e=Module['listScreenshots']()['filter'](_0xf960b5=>_0xf960b5!=='.'&&_0xf960b5!=='..');return _0x5d544e;}export function embedTextInPngFile(_0x5c8a6d,_0xdca408,_0x4a8907){const _0x3e0f1b=a0_0xdcd882;let _0x4f0cdf=atob(_0x5c8a6d[_0x3e0f1b(0x172)](',')[0x1]),_0x580190=new Uint8Array(_0x4f0cdf[_0x3e0f1b(0x154)]);for(let _0x32a644=0x0;_0x32a644<_0x4f0cdf[_0x3e0f1b(0x154)];_0x32a644++){_0x580190[_0x32a644]=_0x4f0cdf['charCodeAt'](_0x32a644);}let _0x2c115c=new TextEncoder()[_0x3e0f1b(0x162)](_0x3e0f1b(0x196)+_0xdca408),_0x19f4ed=new Uint8Array(_0x580190[_0x3e0f1b(0x154)]+_0x2c115c[_0x3e0f1b(0x154)]);_0x19f4ed[_0x3e0f1b(0x159)](_0x580190,0x0),_0x19f4ed[_0x3e0f1b(0x159)](_0x2c115c,_0x580190[_0x3e0f1b(0x154)]);let _0x5a7ea6=new Blob([_0x19f4ed],{'type':'image/png'}),_0x5acbff=new File([_0x5a7ea6],_0x4a8907,{'type':_0x3e0f1b(0x15c)});return _0x5acbff;}export function extractTextFromPngBase64(_0x54948a){const _0x3e8377=a0_0xdcd882;let _0x4d486a=atob(_0x54948a[_0x3e8377(0x172)](',')[0x1]),_0x30e919='tEXtComment\x00',_0x58d616=_0x4d486a['indexOf'](_0x30e919);if(_0x58d616!==-0x1)return _0x4d486a['substring'](_0x58d616+_0x30e919['length']);return null;}export function fileSize(_0x33c817){const _0x3ed411=Module['fileSize'](_0x33c817);return _0x3ed411;}export async function resumeGame(){const _0x13b322=a0_0xdcd882;Module[_0x13b322(0x18f)](),Module[_0x13b322(0x163)](),notiMessage(_0x13b322(0x17f),0x7d0);}export async function pauseGame(){const _0x9b0413=a0_0xdcd882;Module['pauseGame'](),Module[_0x9b0413(0x163)](),notiMessage(_0x9b0413(0x16f),0x7d0);}export async function buttonPress(_0x48ae53){Module['buttonPress'](_0x48ae53);}export async function buttonUnpress(_0x589b8f){const _0x4f44f0=a0_0xdcd882;Module[_0x4f44f0(0x178)](_0x589b8f);}export async function screenShot(_0x13e259){const _0x2aa4bb=a0_0xdcd882,_0x5ddc0b=localStorage[_0x2aa4bb(0x17a)]('gameName')[_0x2aa4bb(0x144)](/\.(gba|gbc|gb|zip)$/,''),_0x3c3ea3=_0x5ddc0b+'_'+_0x13e259+_0x2aa4bb(0x17e);await Module[_0x2aa4bb(0x160)](_0x3c3ea3),await Module[_0x2aa4bb(0x157)]();const _0x56c3a0=await fileToBase64(Module[_0x2aa4bb(0x15b)](_0x2aa4bb(0x17b)+_0x3c3ea3)),_0x30a347=embedTextInPngFile(_0x56c3a0,formatDateTime(Date['now']()),_0x3c3ea3);Module[_0x2aa4bb(0x14f)](_0x30a347,()=>{const _0x17075d=_0x2aa4bb;localStorageFile(),Module[_0x17075d(0x157)]();});}export async function dowloadScreenShot(_0x3ae675){const _0x30556f=a0_0xdcd882;try{const _0x9620e9=await fileToBase64(Module[_0x30556f(0x15b)](_0x3ae675));return _0x9620e9;}catch{}}export async function captureOCR(_0x1689b5){const _0x360f1b=a0_0xdcd882;Module[_0x360f1b(0x160)](_0x1689b5);const _0x1d59cc=Module[_0x360f1b(0x15b)]('/data/screenshots/'+_0x1689b5);return _0x1d59cc;}function a0_0x4e39(){const _0x30124d=['textContent','uploadAll','visibilityState','gbc1','beforeunload','type','length','4277744mHHQCZ','addEventListener','FSSync','contains','set','8517650SaDvXW','downloadFile','image/png','hidden','listCheats','innerWidth','screenshot','5787130MaznlH','encode','SDL2','includes','createElement','Auto\x20save\x20','log','44lhtpZy','setItem','setVolume','state','persisted','bottom','Cloud\x20upload\x20','Paused!','padStart','64kFqkwp','split','uId','Do\x20you\x20want\x20to\x20load\x20save\x20state?','168JbwWOV','gameName','Cheat\x20Enabled!','buttonUnpress','editFileName','getItem','/data/screenshots/','Off','listRoms','.png','Resumed!','appendChild','classList','0,0,','getElementById','add','220470jIinGr','#E0C068','disable','visibilitychange','slotStateSaved','setFastForwardMultiplier','7103925kTmQSQ','loadGame','canvas','uploadRom','resumeGame','.ss0','timer','saveState','toString','href','turboState','tEXtComment\x00','turboF','.gb','238pYgAaM','listStates','/data/games/','53203igEmsG','style','\x20time(s)','gbc','remove','_savedCheats','files','revokeObjectURL','screenSize','replace','listSaves','33632RGsRFS','visible','/data/states/','onLine','loadState','click','control-setting','filter'];a0_0x4e39=function(){return _0x30124d;};return a0_0x4e39();}export async function setFastForwardMultiplier(_0x5807af){const _0x3feda3=a0_0xdcd882;Module[_0x3feda3(0x18a)](_0x5807af);}export function uploadCheats(_0x8c1f56,_0x328c8c,_0x53a607,_0x23aeca,_0x2930b5){const _0x3b1b21=a0_0xdcd882;Module[_0x3b1b21(0x14f)](_0x8c1f56,()=>{const _0x450eec=_0x3b1b21;Module['autoLoadCheats'](),setTimeout(()=>{const _0x473fd1=a0_0x9f21;Module[_0x473fd1(0x157)]();},0x1f4),_0x23aeca&&(localStorage[_0x450eec(0x169)](_0x328c8c+_0x450eec(0x140),_0x53a607),notiMessage(_0x450eec(0x177),0x5dc)),_0x2930b5[_0x450eec(0x14e)]=localStorage[_0x450eec(0x17a)](_0x328c8c+_0x450eec(0x140)||_0x450eec(0x17c));});}export function setVolume(_0x2c8a0b){const _0x11c994=a0_0xdcd882;Module[_0x11c994(0x16a)](_0x2c8a0b);}