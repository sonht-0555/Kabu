const a0_0x36f7fa=a0_0x3f9f;(function(_0x1c7702,_0x287952){const _0x55956d=a0_0x3f9f,_0x599e7e=_0x1c7702();while(!![]){try{const _0x4beb30=parseInt(_0x55956d(0x197))/0x1+-parseInt(_0x55956d(0x15c))/0x2+parseInt(_0x55956d(0x14c))/0x3+-parseInt(_0x55956d(0x180))/0x4*(parseInt(_0x55956d(0x147))/0x5)+parseInt(_0x55956d(0x156))/0x6*(-parseInt(_0x55956d(0x166))/0x7)+-parseInt(_0x55956d(0x192))/0x8*(-parseInt(_0x55956d(0x182))/0x9)+parseInt(_0x55956d(0x163))/0xa*(parseInt(_0x55956d(0x17e))/0xb);if(_0x4beb30===_0x287952)break;else _0x599e7e['push'](_0x599e7e['shift']());}catch(_0x2c9913){_0x599e7e['push'](_0x599e7e['shift']());}}}(a0_0x123d,0xd6017));import a0_0xea216a from'../core/mgba.js';import*as a0_0x11f028 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document['getElementById'](a0_0x36f7fa(0x19c))};function initializeCore(_0xf7abd2,_0x162237){const _0x1b92f0=a0_0x36f7fa;_0xf7abd2(_0x162237)[_0x1b92f0(0x18a)](function(_0x4f84d4){const _0xc185bb=_0x1b92f0;_0x4f84d4[_0xc185bb(0x1a9)]();});}initializeCore(a0_0xea216a,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x36f7fa(0x1a7)](a0_0x36f7fa(0x19c)),savedTurboState=localStorage[a0_0x36f7fa(0x16e)](a0_0x36f7fa(0x16c)),controlSetting=document[a0_0x36f7fa(0x1a7)](a0_0x36f7fa(0x184));function handleVisibilityChange(_0x517844){const _0x44ca33=a0_0x36f7fa;document[_0x44ca33(0x14a)]===_0x44ca33(0x173)||_0x517844?.['type']===_0x44ca33(0x162)||_0x517844?.['persisted']?(pauseGame(),canvas[_0x44ca33(0x154)]['add'](_0x44ca33(0x160))):(setTimeout(()=>{const _0x269d40=_0x44ca33;canvas[_0x269d40(0x154)]['remove'](_0x269d40(0x160));},0x258),controlSetting[_0x44ca33(0x154)][_0x44ca33(0x17c)](_0x44ca33(0x160))&&resumeGame());}async function statusShow(){const _0x2ce83e=a0_0x36f7fa;document[_0x2ce83e(0x183)](_0x2ce83e(0x181),handleVisibilityChange),document[_0x2ce83e(0x183)]('visibilitychange',handleVisibilityChange),window[_0x2ce83e(0x183)](_0x2ce83e(0x162),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x11f028[_0x2ce83e(0x1af)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x2ce83e(0x16e)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x3ee578=a0_0x36f7fa;await ledSave(_0x3ee578(0x150)),await Module[_0x3ee578(0x17d)](0x0),await Module[_0x3ee578(0x170)](),await screenShot(0x0),console['log'](_0x3ee578(0x1ae)+ ++countAutoSave+_0x3ee578(0x168));}async function saveStateInCloud(){const _0x4145f1=a0_0x36f7fa,_0x5d3a20=localStorage[_0x4145f1(0x16e)](_0x4145f1(0x178)),_0x1df844=_0x5d3a20[_0x4145f1(0x188)](_0x4145f1(0x16d),_0x4145f1(0x1a1)),_0xb56487=localStorage[_0x4145f1(0x16e)](_0x4145f1(0x176)),_0x59507e=localStorage[_0x4145f1(0x16e)](_0x5d3a20+_0x4145f1(0x18c)),_0x586523=localStorage[_0x4145f1(0x16e)](_0x5d3a20+_0x4145f1(0x152));if(navigator[_0x4145f1(0x1a0)]){if(_0xb56487){await ledSave(_0x4145f1(0x185)),await delay(0x3e8),await dpUploadFile(_0x1df844,Module[_0x4145f1(0x187)](_0x4145f1(0x1ad)+_0x1df844));if(_0x59507e!==null){const _0x315ce6=_0x59507e+'\x0a\x0a'+_0x586523,_0x4e6a45=new Blob([_0x315ce6],{'type':_0x4145f1(0x17f)});await dpUploadFile(_0x5d3a20+_0x4145f1(0x1ab),_0x4e6a45);}else console['log'](_0x4145f1(0x169));await lockNoti('',_0x4145f1(0x19f)+ ++countUpload+_0x4145f1(0x168),0x7d0);}else console[_0x4145f1(0x18b)](_0x4145f1(0x196));}else console[_0x4145f1(0x18b)](_0x4145f1(0x153));}function startTimer(){let [_0x38a369,_0x2b1e37,_0x467e7b,_0x59958d,_0x5e90e9]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x1f003b=a0_0x3f9f;_0x467e7b++,_0x59958d++,_0x5e90e9++;if(_0x467e7b===0x3c)[_0x467e7b,_0x2b1e37]=[0x0,_0x2b1e37+0x1];if(_0x2b1e37===0x3c)[_0x2b1e37,_0x38a369]=[0x0,_0x38a369+0x1];document[_0x1f003b(0x1a7)](_0x1f003b(0x161))['textContent']=_0x38a369+'h'+_0x2b1e37[_0x1f003b(0x15f)]()[_0x1f003b(0x189)](0x2,'0')+'.'+_0x467e7b['toString']()[_0x1f003b(0x189)](0x2,'0');_0x59958d===0x3c&&(saveStatePeriodically(),_0x59958d=0x0);;_0x59958d===0xe10&&(saveStateInCloud(),_0x5e90e9=0x0);;},0x3e8);}export async function uploadGame(_0x223d08){const _0x4fa334=a0_0x36f7fa,_0xc65d93=_0x223d08[_0x4fa334(0x199)][0x0];Module[_0x4fa334(0x1a2)](_0xc65d93,()=>{const _0x5e5d16=_0x4fa334;Module[_0x5e5d16(0x170)]();});}export async function loadGame(_0x42b203){const _0x1d07be=a0_0x36f7fa,_0x2311e8=_0x42b203[_0x1d07be(0x188)](/\.(gba|gbc|gb|zip)$/,_0x1d07be(0x1a1)),_0x4b77d6=Module[_0x1d07be(0x14f)]();intro[_0x1d07be(0x154)][_0x1d07be(0x157)](_0x1d07be(0x177)),errorLogElements[0x0][_0x1d07be(0x14b)]['bottom']='0',ingame[_0x1d07be(0x154)][_0x1d07be(0x145)]('disable'),_0x42b203[_0x1d07be(0x1a6)]('.gbc')||_0x42b203[_0x1d07be(0x1a6)](_0x1d07be(0x19a))?(canvas[_0x1d07be(0x154)][_0x1d07be(0x157)]('gbc'),areaTrans['classList'][_0x1d07be(0x157)](_0x1d07be(0x1aa)),localStorage[_0x1d07be(0x17b)](_0x1d07be(0x175),'0,0,'+(window[_0x1d07be(0x159)]-0xe6)+','+(window[_0x1d07be(0x159)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x1d07be(0x175),_0x1d07be(0x172)+(window[_0x1d07be(0x159)]-0x96)+','+(window[_0x1d07be(0x159)]-0x96)*0x2/0x3),_0x4b77d6[_0x1d07be(0x1a4)](_0x2311e8)?(await Module[_0x1d07be(0x15d)](_0x1d07be(0x194)+_0x42b203),confirm(_0x1d07be(0x1ac))&&(await Module[_0x1d07be(0x1a3)](0x0),localStorage[_0x1d07be(0x17b)](_0x1d07be(0x178),_0x42b203),console[_0x1d07be(0x18b)](_0x42b203))):(await Module[_0x1d07be(0x15d)]('/data/games/'+_0x42b203),localStorage[_0x1d07be(0x17b)](_0x1d07be(0x178),_0x42b203)),await statusShow();}export async function saveState(_0x978cad){const _0x5b4d72=a0_0x36f7fa;await Module[_0x5b4d72(0x17d)](_0x978cad),await Module['FSSync']();}export async function loadState(_0x35661d){const _0xb4ae30=a0_0x36f7fa;await Module[_0xb4ae30(0x1a3)](_0x35661d);}export async function downloadFile(_0x5debe8,_0x436c51){const _0x5cad9e=a0_0x36f7fa,_0x11b0bb=Module[_0x5cad9e(0x187)](_0x5debe8),_0x2fd69a=document['createElement']('a');document[_0x5cad9e(0x164)][_0x5cad9e(0x174)](_0x2fd69a),_0x2fd69a[_0x5cad9e(0x16b)]=_0x436c51;const _0x45b351=new Blob([_0x11b0bb],{'type':'application/octet-stream'});_0x2fd69a[_0x5cad9e(0x14e)]=URL['createObjectURL'](_0x45b351),_0x2fd69a[_0x5cad9e(0x18d)](),URL[_0x5cad9e(0x18f)](_0x45b351),_0x2fd69a[_0x5cad9e(0x145)]();}export function downloadFileInCloud(_0x24008e){const _0x203e61=a0_0x36f7fa,_0x205bd5=Module[_0x203e61(0x187)](_0x24008e);return _0x205bd5;}export async function uploadFile(_0x7d03df){const _0x10986e=a0_0x36f7fa,_0x4a16f=_0x7d03df[_0x10986e(0x199)][0x0];Module[_0x10986e(0x1a5)](_0x4a16f,()=>{Module['FSSync']();});}export async function editFile(_0x4cda45,_0x50d399,_0xabc499){const _0x485d63=a0_0x36f7fa;await Module[_0x485d63(0x186)](_0x4cda45,_0x50d399,_0xabc499),await Module[_0x485d63(0x170)]();}export async function deleteFile(_0xcf28f0){const _0x5b164c=a0_0x36f7fa;await Module[_0x5b164c(0x18e)](_0xcf28f0),await Module[_0x5b164c(0x170)]();}export function listGame(){const _0x2ca56f=a0_0x36f7fa,_0x472d00=Module[_0x2ca56f(0x190)]();return _0x472d00;}export function listSave(){const _0x150073=a0_0x36f7fa,_0x1835a1=Module[_0x150073(0x148)]();return _0x1835a1;}function a0_0x3f9f(_0x3718e9,_0x2aa407){const _0x123d87=a0_0x123d();return a0_0x3f9f=function(_0x3f9f0f,_0xeb0306){_0x3f9f0f=_0x3f9f0f-0x145;let _0x4f103e=_0x123d87[_0x3f9f0f];return _0x4f103e;},a0_0x3f9f(_0x3718e9,_0x2aa407);}export function listState(){const _0x39b21c=a0_0x36f7fa,_0x2f4afc=Module[_0x39b21c(0x14f)]();return _0x2f4afc;}export function listCheat(){const _0xde4db2=a0_0x36f7fa,_0x4d9d92=Module[_0xde4db2(0x17a)]();return _0x4d9d92;}export function listScreenshot(){const _0x11bdfb=a0_0x36f7fa,_0x2cdbe7=Module[_0x11bdfb(0x179)]();return _0x2cdbe7;}export function fileSize(_0x54d2c5){const _0x5090a1=a0_0x36f7fa,_0x51a6ac=Module[_0x5090a1(0x1a8)](_0x54d2c5);return _0x51a6ac;}export async function uploadCheat(_0x58e90b){const _0x4e09e9=a0_0x36f7fa;try{const _0x51685c=_0x58e90b[_0x4e09e9(0x199)][0x0];await Module[_0x4e09e9(0x149)](_0x51685c,()=>{const _0x25557e=_0x4e09e9;console['log'](_0x25557e(0x167),_0x51685c[_0x25557e(0x151)]),localStorageFile(),Module[_0x25557e(0x170)]();});}catch(_0x1ccd72){console[_0x4e09e9(0x146)]('Error\x20uploadCheat:',_0x1ccd72);}}export async function uploadSavSta(_0x39c32b){const _0x240fff=a0_0x36f7fa;try{const _0x195710=_0x39c32b[_0x240fff(0x199)][0x0];await Module[_0x240fff(0x1a5)](_0x195710,()=>{const _0x1c3c20=_0x240fff;console['log'](_0x1c3c20(0x19e),_0x195710['name']),localStorageFile(),Module['FSSync']();});}catch(_0x19cd56){console['error'](_0x240fff(0x15a),_0x19cd56);}}export async function uploadSaveOrSaveState(_0x542da9){const _0x4fe01c=a0_0x36f7fa;Module[_0x4fe01c(0x1a5)](_0x542da9,()=>{localStorageFile(),Module['FSSync']();});}export async function resumeGame(){const _0x4f6402=a0_0x36f7fa;Module[_0x4f6402(0x165)](),Module['SDL2'](),notiMessage(_0x4f6402(0x193),0x7d0);}export async function pauseGame(){const _0x54af90=a0_0x36f7fa;Module[_0x54af90(0x15e)](),Module['SDL2'](),notiMessage(_0x54af90(0x14d),0x7d0);}export async function buttonPress(_0x19677b){const _0x41e794=a0_0x36f7fa;Module[_0x41e794(0x198)](_0x19677b);}export async function buttonUnpress(_0x900ad6){const _0x3a0af5=a0_0x36f7fa;Module[_0x3a0af5(0x171)](_0x900ad6);}export async function screenShot(_0x43abfc){const _0x27cbf7=a0_0x36f7fa,_0x48ed97=localStorage[_0x27cbf7(0x16e)](_0x27cbf7(0x178)),_0x1c37d7=_0x48ed97['replace'](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x1c37d7+_0x43abfc+_0x27cbf7(0x191)),await Module[_0x27cbf7(0x170)]();const _0x35e4af=await fileToBase64(Module[_0x27cbf7(0x187)](_0x27cbf7(0x19d)+_0x1c37d7+_0x43abfc+'.png')),_0x4cb05a=Date[_0x27cbf7(0x16f)](),_0xf0d89f=formatDateTime(_0x4cb05a);localStorage['setItem'](_0x48ed97+_0x27cbf7(0x19b)+_0x43abfc,_0xf0d89f),localStorage['setItem'](_0x48ed97+'_imageState'+_0x43abfc,_0x35e4af);}function a0_0x123d(){const _0x54201e=['1959736hnkNoO','loadGame','pauseGame','toString','visible','timer','beforeunload','4025300iiaUqL','body','resumeGame','56xYoGYa','Cheat\x20uploaded\x20successfully:','\x20time(s)','No\x20screenshot!','autoLoadCheats','download','turboState','.gba','getItem','now','FSSync','buttonUnpress','0,0,','hidden','appendChild','screenSize','uId','disable','gameName','listScreenshots','listCheats','setItem','contains','saveState','66MJdJOx','text/plain','1142312LzRFrM','pagehide','9MxvmKG','addEventListener','control-setting','#E0C068','editFileName','downloadFile','replace','padStart','then','log','_imageState0','click','deleteFile','revokeObjectURL','listGames','.png','7236784SVxphN','Resumed!','/data/games/','textContent','Unable\x20to\x20upload\x20to\x20Cloud!','2696JDllno','buttonPress','files','.gb','_dateState','canvas','/data/screenshots/','Save/State\x20uploaded\x20successfully:','Cloud\x20upload\x20','onLine','.ss0','uploadRom','loadState','includes','uploadSaveOrSaveState','endsWith','getElementById','fileSize','FSInit','gbc1','_slot0.txt','Do\x20you\x20want\x20to\x20load\x20save\x20state?','/data/states/','Auto\x20save\x20','turboF','remove','error','5StPcLp','listSaves','uploadCheats','visibilityState','style','1320681dZoskN','Paused!','href','listStates','#20A5A6','name','_dateState0','Online!','classList','screenshot','1215516JyXvgJ','add','Off','innerWidth','Error\x20uploadSavSta:','_savedCheats'];a0_0x123d=function(){return _0x54201e;};return a0_0x123d();}export async function captureOCR(_0x4483a3){const _0x5cb85e=a0_0x36f7fa;Module[_0x5cb85e(0x155)](_0x4483a3);const _0x2b7df7=Module[_0x5cb85e(0x187)]('/data/screenshots/'+_0x4483a3);return _0x2b7df7;}export async function setFastForwardMultiplier(_0xa12578){Module['setFastForwardMultiplier'](_0xa12578);}export function uploadCheats(_0x4d8aa1,_0x431f17,_0x4f21a7,_0x480fd0,_0x2dc4b8){const _0x5853ab=a0_0x36f7fa;Module[_0x5853ab(0x149)](_0x4d8aa1,()=>{const _0x35b186=_0x5853ab;Module[_0x35b186(0x16a)](),setTimeout(()=>{const _0x1b9a04=_0x35b186;Module[_0x1b9a04(0x170)]();},0x1f4),_0x480fd0&&(localStorage['setItem'](_0x431f17+_0x35b186(0x15b),_0x4f21a7),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x2dc4b8[_0x35b186(0x195)]=localStorage[_0x35b186(0x16e)](_0x431f17+_0x35b186(0x15b)||_0x35b186(0x158));});}