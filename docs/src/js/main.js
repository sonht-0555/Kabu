const a0_0xe6146f=a0_0x2b9e;(function(_0x24e856,_0xb7754d){const _0x8d737c=a0_0x2b9e,_0x3e7f04=_0x24e856();while(!![]){try{const _0x1e447e=parseInt(_0x8d737c(0x1fc))/0x1+-parseInt(_0x8d737c(0x230))/0x2+parseInt(_0x8d737c(0x20d))/0x3+-parseInt(_0x8d737c(0x226))/0x4*(-parseInt(_0x8d737c(0x1e2))/0x5)+parseInt(_0x8d737c(0x1e7))/0x6*(parseInt(_0x8d737c(0x1f0))/0x7)+-parseInt(_0x8d737c(0x1ef))/0x8+parseInt(_0x8d737c(0x203))/0x9;if(_0x1e447e===_0xb7754d)break;else _0x3e7f04['push'](_0x3e7f04['shift']());}catch(_0x5f110c){_0x3e7f04['push'](_0x3e7f04['shift']());}}}(a0_0x5939,0xc599b));import a0_0x4c41b7 from'../core/mgba.js';import*as a0_0x515f22 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document['getElementById']('canvas')};function initializeCore(_0x27b988,_0x18dd2e){const _0x3da885=a0_0x2b9e;_0x27b988(_0x18dd2e)[_0x3da885(0x21e)](function(_0x3677f4){const _0x277b01=_0x3da885;_0x3677f4[_0x277b01(0x1e4)]();});}initializeCore(a0_0x4c41b7,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0xe6146f(0x234)](a0_0xe6146f(0x233)),savedTurboState=localStorage[a0_0xe6146f(0x1f9)]('turboState'),controlSetting=document[a0_0xe6146f(0x234)](a0_0xe6146f(0x21f));function handleVisibilityChange(_0x510c56){const _0xb8958a=a0_0xe6146f;document['visibilityState']===_0xb8958a(0x1fb)||_0x510c56?.[_0xb8958a(0x1f8)]===_0xb8958a(0x23d)||_0x510c56?.[_0xb8958a(0x1f2)]?(pauseGame(),canvas[_0xb8958a(0x221)][_0xb8958a(0x204)](_0xb8958a(0x236))):(setTimeout(()=>{const _0x564d14=_0xb8958a;canvas[_0x564d14(0x221)][_0x564d14(0x218)](_0x564d14(0x236));},0x258),controlSetting[_0xb8958a(0x221)]['contains'](_0xb8958a(0x236))&&resumeGame());}async function statusShow(){const _0x106a6a=a0_0xe6146f;document[_0x106a6a(0x1dd)](_0x106a6a(0x237),handleVisibilityChange),document[_0x106a6a(0x1dd)](_0x106a6a(0x21b),handleVisibilityChange),window[_0x106a6a(0x1dd)](_0x106a6a(0x23d),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x515f22[_0x106a6a(0x21d)](turboState)),await delay(0xc8),await Module[_0x106a6a(0x205)](),await delay(0x320),await led(parseInt(localStorage[_0x106a6a(0x1f9)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x959fc4=a0_0xe6146f;await ledSave('#20A5A6'),await Module[_0x959fc4(0x1df)](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x959fc4(0x1f5)]('Auto\x20save\x20'+ ++countAutoSave+_0x959fc4(0x1ea));}async function saveStateInCloud(){const _0x51aabe=a0_0xe6146f,_0x2a140d=localStorage[_0x51aabe(0x1f9)]('gameName'),_0x3ac664=_0x2a140d[_0x51aabe(0x217)](_0x51aabe(0x214),'.ss0'),_0x3b2963=localStorage[_0x51aabe(0x1f9)]('uId'),_0x148fbe=localStorage[_0x51aabe(0x1f9)](_0x2a140d+_0x51aabe(0x238)),_0x5ef39f=localStorage[_0x51aabe(0x1f9)](_0x2a140d+_0x51aabe(0x1dc));if(navigator['onLine']){if(_0x3b2963){await ledSave(_0x51aabe(0x22e)),await delay(0x3e8),await dpUploadFile(_0x3ac664,Module[_0x51aabe(0x1e0)](_0x51aabe(0x229)+_0x3ac664));if(_0x148fbe!==null){const _0x2b126f=_0x148fbe+'\x0a\x0a'+_0x5ef39f,_0x27ff76=new Blob([_0x2b126f],{'type':_0x51aabe(0x1e5)});await dpUploadFile(_0x2a140d+_0x51aabe(0x1db),_0x27ff76);}else console[_0x51aabe(0x1f5)]('No\x20screenshot!');await lockNoti('',_0x51aabe(0x212)+ ++countUpload+_0x51aabe(0x1ea),0x7d0);}else console[_0x51aabe(0x1f5)](_0x51aabe(0x222));}else console[_0x51aabe(0x1f5)](_0x51aabe(0x23e));}function startTimer(){let [_0x4067bf,_0x4071e9,_0x288e98,_0x488f7d,_0xe37604]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x560fce=a0_0x2b9e;_0x288e98++,_0x488f7d++,_0xe37604++;if(_0x288e98===0x3c)[_0x288e98,_0x4071e9]=[0x0,_0x4071e9+0x1];if(_0x4071e9===0x3c)[_0x4071e9,_0x4067bf]=[0x0,_0x4067bf+0x1];document['getElementById'](_0x560fce(0x1eb))[_0x560fce(0x22d)]=_0x4067bf+'h'+_0x4071e9[_0x560fce(0x1da)]()[_0x560fce(0x20e)](0x2,'0')+'.'+_0x288e98[_0x560fce(0x1da)]()[_0x560fce(0x20e)](0x2,'0');_0x488f7d===0x3c&&(saveStatePeriodically(),_0x488f7d=0x0);;_0x488f7d===0xe10&&(saveStateInCloud(),_0xe37604=0x0);;},0x3e8);}export async function uploadGame(_0x57b62c){const _0x555d1c=a0_0xe6146f,_0x44b419=_0x57b62c[_0x555d1c(0x201)][0x0];Module['uploadRom'](_0x44b419,()=>{Module['FSSync']();});}export async function loadGame(_0x49f569){const _0x29cf8c=a0_0xe6146f,_0x3fd076=_0x49f569[_0x29cf8c(0x217)](/\.(gba|gbc|gb|zip)$/,_0x29cf8c(0x225)),_0x37e1ce=Module[_0x29cf8c(0x20b)]()[_0x29cf8c(0x1d9)](_0x32d1c6=>_0x32d1c6!=='.'&&_0x32d1c6!=='..');intro[_0x29cf8c(0x221)][_0x29cf8c(0x204)](_0x29cf8c(0x1fe)),errorLogElements[0x0][_0x29cf8c(0x1de)][_0x29cf8c(0x22a)]='0',ingame[_0x29cf8c(0x221)][_0x29cf8c(0x218)](_0x29cf8c(0x1fe)),_0x49f569[_0x29cf8c(0x1ff)](_0x29cf8c(0x1f7))||_0x49f569['endsWith'](_0x29cf8c(0x215))?(canvas[_0x29cf8c(0x221)][_0x29cf8c(0x204)](_0x29cf8c(0x1f3)),areaTrans[_0x29cf8c(0x221)][_0x29cf8c(0x204)](_0x29cf8c(0x1f4)),localStorage[_0x29cf8c(0x1d8)](_0x29cf8c(0x227),_0x29cf8c(0x207)+(window[_0x29cf8c(0x206)]-0xe6)+','+(window[_0x29cf8c(0x206)]-0xe6)*0x9/0xa)):localStorage[_0x29cf8c(0x1d8)]('screenSize',_0x29cf8c(0x207)+(window['innerWidth']-0x96)+','+(window[_0x29cf8c(0x206)]-0x96)*0x2/0x3),_0x37e1ce[_0x29cf8c(0x1fd)](_0x3fd076)?(await Module[_0x29cf8c(0x20f)](_0x29cf8c(0x23c)+_0x49f569),confirm(_0x29cf8c(0x208))&&(await Module[_0x29cf8c(0x1ee)](0x0),localStorage[_0x29cf8c(0x1d8)]('gameName',_0x49f569),console[_0x29cf8c(0x1f5)](_0x49f569))):(await Module['loadGame'](_0x29cf8c(0x23c)+_0x49f569),localStorage[_0x29cf8c(0x1d8)](_0x29cf8c(0x209),_0x49f569)),await statusShow();}export async function saveState(_0x3a0669){const _0x4cf193=a0_0xe6146f;await Module[_0x4cf193(0x1df)](_0x3a0669),await Module[_0x4cf193(0x20c)]();}export async function loadState(_0x14ded7){const _0x1fcbb4=a0_0xe6146f;await Module[_0x1fcbb4(0x1ee)](_0x14ded7);}export async function downloadFile(_0x9be1e9,_0x37102b){const _0x4258c0=a0_0xe6146f,_0x43902a=Module[_0x4258c0(0x1e0)](_0x9be1e9),_0x1803dd=document[_0x4258c0(0x1e1)]('a');document['body'][_0x4258c0(0x228)](_0x1803dd),_0x1803dd[_0x4258c0(0x235)]=_0x37102b;const _0x52699c=new Blob([_0x43902a],{'type':_0x4258c0(0x1e6)});_0x1803dd[_0x4258c0(0x23b)]=URL[_0x4258c0(0x223)](_0x52699c),_0x1803dd[_0x4258c0(0x216)](),URL[_0x4258c0(0x1e3)](_0x52699c),_0x1803dd[_0x4258c0(0x218)]();}export function downloadFileInCloud(_0x37e727){const _0x4e1232=a0_0xe6146f,_0x36d09e=Module[_0x4e1232(0x1e0)](_0x37e727);return _0x36d09e;}export async function uploadFile(_0x198a8f){const _0x2b6b41=a0_0xe6146f,_0x3dd1a8=_0x198a8f[_0x2b6b41(0x201)][0x0];Module[_0x2b6b41(0x224)](_0x3dd1a8,()=>{Module['FSSync']();});}export async function editFile(_0x37cd9c,_0x1922bb,_0x1b7000){await Module['editFileName'](_0x37cd9c,_0x1922bb,_0x1b7000),await Module['FSSync']();}export async function deleteFile(_0x46e90f){const _0x1ee630=a0_0xe6146f;await Module[_0x1ee630(0x213)](_0x46e90f),await Module[_0x1ee630(0x20c)]();}export function listGame(){const _0x2f5e0a=a0_0xe6146f,_0x1958c8=Module['listRoms']()[_0x2f5e0a(0x1d9)](_0x9abe6f=>_0x9abe6f!=='.'&&_0x9abe6f!=='..');return _0x1958c8;}export function listSave(){const _0x50b978=a0_0xe6146f,_0xd196f6=Module['listSaves']()[_0x50b978(0x1d9)](_0x5c2e60=>_0x5c2e60!=='.'&&_0x5c2e60!=='..');return _0xd196f6;}export function listState(){const _0x5075c6=a0_0xe6146f,_0x15a7a7=Module['listStates']()[_0x5075c6(0x1d9)](_0x818db7=>_0x818db7!=='.'&&_0x818db7!=='..');return _0x15a7a7;}export function listCheat(){const _0x1e9dcb=a0_0xe6146f,_0xd777ec=Module[_0x1e9dcb(0x239)]()['filter'](_0x2110a7=>_0x2110a7!=='.'&&_0x2110a7!=='..');return _0xd777ec;}export function listScreenshot(){const _0x59b239=a0_0xe6146f,_0xd44251=Module['listScreenshots']()[_0x59b239(0x1d9)](_0x1b5e9a=>_0x1b5e9a!=='.'&&_0x1b5e9a!=='..');return _0xd44251;}export function fileSize(_0x42bdd6){const _0x122e4c=Module['fileSize'](_0x42bdd6);return _0x122e4c;}export async function uploadCheat(_0x42f083){const _0x400d00=a0_0xe6146f;try{const _0x5e6e96=_0x42f083[_0x400d00(0x201)][0x0];await Module['uploadCheats'](_0x5e6e96,()=>{const _0x41ce29=_0x400d00;console['log'](_0x41ce29(0x211),_0x5e6e96[_0x41ce29(0x1e9)]),localStorageFile(),Module[_0x41ce29(0x20c)]();});}catch(_0x5e142e){console[_0x400d00(0x22f)]('Error\x20uploadCheat:',_0x5e142e);}}function a0_0x2b9e(_0x2a7102,_0x5c773f){const _0x593974=a0_0x5939();return a0_0x2b9e=function(_0x2b9eb0,_0x4eb89f){_0x2b9eb0=_0x2b9eb0-0x1d8;let _0x1e2541=_0x593974[_0x2b9eb0];return _0x1e2541;},a0_0x2b9e(_0x2a7102,_0x5c773f);}export async function uploadSavSta(_0x1fc32b){const _0x4d0606=a0_0xe6146f;try{const _0x4d8ef9=_0x1fc32b['files'][0x0];await Module[_0x4d0606(0x224)](_0x4d8ef9,()=>{const _0xe10b9e=_0x4d0606;console[_0xe10b9e(0x1f5)](_0xe10b9e(0x1f6),_0x4d8ef9[_0xe10b9e(0x1e9)]),localStorageFile(),Module[_0xe10b9e(0x20c)]();});}catch(_0x2388a6){console[_0x4d0606(0x22f)](_0x4d0606(0x210),_0x2388a6);}}export async function uploadSaveOrSaveState(_0x2c226e){const _0x43f6fa=a0_0xe6146f;Module[_0x43f6fa(0x224)](_0x2c226e,()=>{const _0x49087e=_0x43f6fa;localStorageFile(),Module[_0x49087e(0x20c)]();});}export async function resumeGame(){const _0x258266=a0_0xe6146f;Module[_0x258266(0x200)](),Module[_0x258266(0x205)](),notiMessage(_0x258266(0x220),0x7d0);}function a0_0x5939(){const _0x24e080=['loadGame','Error\x20uploadSavSta:','Cheat\x20uploaded\x20successfully:','Cloud\x20upload\x20','deleteFile','.gba','.gb','click','replace','remove','_savedCheats','screenshot','visibilitychange','Cheat\x20Enabled!','turboF','then','control-setting','Resumed!','classList','Unable\x20to\x20upload\x20to\x20Cloud!','createObjectURL','uploadSaveOrSaveState','.ss0','534916euazJb','screenSize','appendChild','/data/states/','bottom','/data/screenshots/','.png','textContent','#E0C068','error','2428224orvCGE','_imageState','autoLoadCheats','canvas','getElementById','download','visible','pagehide','_imageState0','listCheats','now','href','/data/games/','beforeunload','Online!','setItem','filter','toString','_slot0.txt','_dateState0','addEventListener','style','saveState','downloadFile','createElement','5nZyVMS','revokeObjectURL','FSInit','text/plain','application/octet-stream','8382kPftmi','pauseGame','name','\x20time(s)','timer','buttonPress','_dateState','loadState','12877576BkHTGL','3661xTqVVd','uploadCheats','persisted','gbc','gbc1','log','Save/State\x20uploaded\x20successfully:','.gbc','type','getItem','Off','hidden','1597884RHDlTv','includes','disable','endsWith','resumeGame','files','buttonUnpress','6293043YrDEyO','add','SDL2','innerWidth','0,0,','Do\x20you\x20want\x20to\x20load\x20save\x20state?','gameName','Paused!','listStates','FSSync','1415127hCCtVR','padStart'];a0_0x5939=function(){return _0x24e080;};return a0_0x5939();}export async function pauseGame(){const _0x23c67c=a0_0xe6146f;Module[_0x23c67c(0x1e8)](),Module[_0x23c67c(0x205)](),notiMessage(_0x23c67c(0x20a),0x7d0);}export async function buttonPress(_0x220894){const _0x3ed642=a0_0xe6146f;Module[_0x3ed642(0x1ec)](_0x220894);}export async function buttonUnpress(_0x486d8c){const _0x7e9609=a0_0xe6146f;Module[_0x7e9609(0x202)](_0x486d8c);}export async function screenShot(_0x30c62a){const _0x3face6=a0_0xe6146f,_0x4fb71b=localStorage[_0x3face6(0x1f9)](_0x3face6(0x209)),_0x4ac513=_0x4fb71b['replace'](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x3face6(0x21a)](''+_0x4ac513+_0x30c62a+'.png'),await Module[_0x3face6(0x20c)]();const _0x56f9ab=await fileToBase64(Module[_0x3face6(0x1e0)](_0x3face6(0x22b)+_0x4ac513+_0x30c62a+_0x3face6(0x22c))),_0x435413=Date[_0x3face6(0x23a)](),_0x1578c8=formatDateTime(_0x435413);localStorage[_0x3face6(0x1d8)](_0x4fb71b+_0x3face6(0x1ed)+_0x30c62a,_0x1578c8),localStorage[_0x3face6(0x1d8)](_0x4fb71b+_0x3face6(0x231)+_0x30c62a,_0x56f9ab);}export async function captureOCR(_0x4a6dc5){Module['screenshot'](_0x4a6dc5);const _0x4e9991=Module['downloadFile']('/data/screenshots/'+_0x4a6dc5);return _0x4e9991;}export async function setFastForwardMultiplier(_0x1978c6){Module['setFastForwardMultiplier'](_0x1978c6);}export function uploadCheats(_0x21fab7,_0x2dc94d,_0x301bbf,_0x1a008b,_0x2f24e0){const _0x1f248b=a0_0xe6146f;Module[_0x1f248b(0x1f1)](_0x21fab7,()=>{const _0x50c2c9=_0x1f248b;Module[_0x50c2c9(0x232)](),setTimeout(()=>{const _0x5299b3=_0x50c2c9;Module[_0x5299b3(0x20c)]();},0x1f4),_0x1a008b&&(localStorage[_0x50c2c9(0x1d8)](_0x2dc94d+_0x50c2c9(0x219),_0x301bbf),notiMessage(_0x50c2c9(0x21c),0x5dc)),_0x2f24e0['textContent']=localStorage[_0x50c2c9(0x1f9)](_0x2dc94d+_0x50c2c9(0x219)||_0x50c2c9(0x1fa));});}