const a0_0x1b0252=a0_0x545a;(function(_0x2f5277,_0x206b66){const _0x53db74=a0_0x545a,_0x41c318=_0x2f5277();while(!![]){try{const _0x3c7fcc=parseInt(_0x53db74(0x116))/0x1+parseInt(_0x53db74(0x115))/0x2+parseInt(_0x53db74(0x132))/0x3*(-parseInt(_0x53db74(0x13a))/0x4)+-parseInt(_0x53db74(0x145))/0x5*(-parseInt(_0x53db74(0x11a))/0x6)+-parseInt(_0x53db74(0x12e))/0x7*(parseInt(_0x53db74(0x111))/0x8)+parseInt(_0x53db74(0x150))/0x9*(parseInt(_0x53db74(0x122))/0xa)+-parseInt(_0x53db74(0x10a))/0xb;if(_0x3c7fcc===_0x206b66)break;else _0x41c318['push'](_0x41c318['shift']());}catch(_0x4dcdf8){_0x41c318['push'](_0x41c318['shift']());}}}(a0_0x202c,0x40d14));import a0_0x279457 from'../core/2.1.1/mgba.js';import*as a0_0x79e4f0 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const Module={'canvas':document['getElementById']('canvas')};function a0_0x202c(){const _0x1c8290=['toString','/data/games/','saveState','pauseGame','buttonPress','listRoms','2px','631150SKkflU','inputText','querySelectorAll','listCheats','saveTime','setVolume','addEventListener','revokeObjectURL','replace','uploadAll','.stateImg','SDL2','98595NfagIW','\x20|\x20','entries','listFiles','2004IwbUqb','persisted','download','setFastForwardMultiplier','contains','padStart','turboState','.png','1156Uncrgk','concat','#20A5A6','hidden','listSaves','FSSync','fill','disable','style','split','encode','5yqFgxF','FSInit','.ss1','filter','state-container','tEXtComment\x00','createObjectURL','loading-icon','pagehide','fileSize','getElementById','9ZLqBDe','image/png','[_]\x20Paused!','body','forEach','add','/data/states/','listScreenshots','getItem','Sync\x20error:','visibilityState','slotStateSaved','error','substring','loadGame','map','listStates','visible','.zip','textContent','setCoreSettings','uId','led03','length','endsWith','beforeunload','indexOf','Error\x20ledSave:','remove','log','/data/screenshots/','canvas','0.4','buttonUnpress','match','downloadFile','classList','gap','Cloud\x20upload\x20','rgba(245,\x20232,\x20209,\x200.14)','createElement','uploadRom','4px\x205px\x202px\x205px','function','getPixelData','timer','type','paddingRight','turboF','states','element.style.aspectRatio','files','led0','gbcs','application/octet-stream','163306EcGbSI','includes','opacity','All','state','screenshot','.gba','40zCpelv','\x20time(s)','loadState','\x20:\x20','134706ncGQfu','152134qkVzQe','.stateInfo','led01','resumeGame','1567278ggZMUr'];a0_0x202c=function(){return _0x1c8290;};return a0_0x202c();}function initializeCore(_0x1c4044,_0x34db06){_0x1c4044(_0x34db06)['then'](function(_0x336df1){const _0x2e8b3a=a0_0x545a;_0x336df1[_0x2e8b3a(0x146)]();});}initializeCore(a0_0x279457,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x1b0252(0x14f)](a0_0x1b0252(0xf2)),controlSetting=document[a0_0x1b0252(0x14f)]('control-setting'),loadingIcon=document[a0_0x1b0252(0x14f)](a0_0x1b0252(0x14c));let canSave=!![];function handleVisibilityChange(_0x25dfa1){const _0x7763d6=a0_0x1b0252;document[_0x7763d6(0x15a)]===_0x7763d6(0x13d)||_0x25dfa1?.[_0x7763d6(0x101)]===_0x7763d6(0xec)||_0x25dfa1?.[_0x7763d6(0x133)]?(Module['FSSync'](),pauseGame()):controlSetting[_0x7763d6(0xf7)][_0x7763d6(0x136)](_0x7763d6(0xe4))&&resumeGame();}async function statusShow(){const _0x3cf2fb=a0_0x1b0252;document[_0x3cf2fb(0x128)](_0x3cf2fb(0x14d),handleVisibilityChange),document[_0x3cf2fb(0x128)]('visibilitychange',handleVisibilityChange),window[_0x3cf2fb(0x128)](_0x3cf2fb(0xec),handleVisibilityChange),restoreArea(),setupStyle(),setTimeout(()=>{const _0x5e2a55=_0x3cf2fb;canvas[_0x5e2a55(0xf7)][_0x5e2a55(0xef)](_0x5e2a55(0xe4));},0x12c),shaderData(),startTimer(),await a0_0x79e4f0[_0x3cf2fb(0x103)](parseInt(await getData(gameName,'1',_0x3cf2fb(0x138)))),await delay(0xc8),await Module[_0x3cf2fb(0x12d)](),await delay(0x320),await led(parseInt(await getData(gameName,'1',_0x3cf2fb(0xde)))),await wrapContent();}async function saveStatePeriodically(){const _0x221a4a=a0_0x1b0252;await ledSave(_0x221a4a(0x13c)),await Module[_0x221a4a(0x11d)](0x1),await screenShot(0x1),await Module['FSSync'](),console[_0x221a4a(0xf0)]('Auto\x20save\x20'+ ++countAutoSave+_0x221a4a(0x112));}async function saveStateInCloud(){const _0x4e0e32=a0_0x1b0252,_0x4c3781=gameName[_0x4e0e32(0x12a)](/\.(zip|gb|gbc|gba)$/,_0x4e0e32(0x147)),_0x20c1c3=localStorage[_0x4e0e32(0x158)](_0x4e0e32(0xe8));navigator['onLine']&&(_0x20c1c3&&(await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x4c3781,Module[_0x4e0e32(0xf6)](_0x4e0e32(0x156)+_0x4c3781),_0x4e0e32(0x10e)),await lockNoti('',_0x4e0e32(0xf9)+ ++countUpload+_0x4e0e32(0x112),0x7d0)));}function startTimer(){let [_0x5b0f6c,_0x19123f,_0x2a875f,_0x55596c,_0x47c747]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x3a32e0=a0_0x545a;_0x2a875f++,_0x55596c++,_0x47c747++;if(_0x2a875f===0x3c)[_0x2a875f,_0x19123f]=[0x0,_0x19123f+0x1];if(_0x19123f===0x3c)[_0x19123f,_0x5b0f6c]=[0x0,_0x5b0f6c+0x1];document[_0x3a32e0(0x14f)](_0x3a32e0(0x100))[_0x3a32e0(0xe6)]=_0x5b0f6c+'h'+_0x19123f[_0x3a32e0(0x11b)]()[_0x3a32e0(0x137)](0x2,'0')+'.'+_0x2a875f[_0x3a32e0(0x11b)]()[_0x3a32e0(0x137)](0x2,'0');_0x55596c===0x3c&&(saveStatePeriodically(),_0x55596c=0x0);;_0x47c747===0x708&&(saveStateInCloud(),_0x47c747=0x0);;},0x3e8);}export async function uploadGame(_0x35bae8){const _0x367518=a0_0x1b0252,_0x4e6f20=_0x35bae8[_0x367518(0x106)][0x0];Module[_0x367518(0xfc)](_0x4e6f20,()=>{Module['FSSync']();});}export async function loadGame(_0x42dd0d){const _0x5424f5=a0_0x1b0252,_0x10dde4=_0x42dd0d['replace'](/\.(gba|gbc|gb|zip)$/,_0x5424f5(0x147)),_0x17bf61=Module[_0x5424f5(0x131)](_0x5424f5(0x104))[_0x5424f5(0x148)](_0x31ab95=>_0x31ab95!=='.'&&_0x31ab95!=='..');intro[_0x5424f5(0xf7)][_0x5424f5(0x155)](_0x5424f5(0x141)),errorLogElements[0x0][_0x5424f5(0x142)]['bottom']='0',ingame['classList'][_0x5424f5(0xef)]('disable');_0x17bf61[_0x5424f5(0x10b)](_0x10dde4)?(await Module[_0x5424f5(0xe1)](_0x5424f5(0x11c)+_0x42dd0d),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await delay(0x64),await Module[_0x5424f5(0x113)](0x1))):await Module[_0x5424f5(0xe1)](_0x5424f5(0x11c)+_0x42dd0d);if(_0x42dd0d['endsWith']('.gbc')||_0x42dd0d[_0x5424f5(0xeb)]('.gb'))document[_0x5424f5(0x124)](_0x5424f5(0x12c))[_0x5424f5(0x154)](function(_0x61cf8b){const _0x1c1a27=_0x5424f5;_0x61cf8b[_0x1c1a27(0xf7)][_0x1c1a27(0x155)](_0x1c1a27(0x108)),console[_0x1c1a27(0xf0)](_0x1c1a27(0x105));});else(_0x42dd0d[_0x5424f5(0xeb)](_0x5424f5(0x110))||_0x42dd0d['endsWith'](_0x5424f5(0xe5)))&&(document[_0x5424f5(0x14f)](_0x5424f5(0x149))[_0x5424f5(0x142)][_0x5424f5(0x102)]='54px',document[_0x5424f5(0x14f)](_0x5424f5(0x149))['style'][_0x5424f5(0xf8)]=_0x5424f5(0x121),document[_0x5424f5(0x124)](_0x5424f5(0x117))[_0x5424f5(0x154)](function(_0x4e0627){const _0x163891=_0x5424f5;_0x4e0627[_0x163891(0x142)]['padding']=_0x163891(0xfd);}));await statusShow();}export async function saveState(_0x1d9953){const _0x52beac=a0_0x1b0252;if(!canSave)return;canSave=![];try{await Module[_0x52beac(0x11d)](_0x1d9953),await loadding();}catch(_0x1257d4){console[_0x52beac(0xdf)](_0x52beac(0x159),_0x1257d4);}finally{setTimeout(()=>{canSave=!![];},0x7d0);}}export async function loadState(_0x822c4a){const _0x771f79=a0_0x1b0252;await Module[_0x771f79(0x113)](_0x822c4a);}export async function downloadFile(_0x145f0b,_0x391e06){const _0xe26111=a0_0x1b0252,_0x25fbba=Module[_0xe26111(0xf6)](_0x145f0b),_0x5841d2=document[_0xe26111(0xfb)]('a');document[_0xe26111(0x153)]['appendChild'](_0x5841d2),_0x5841d2[_0xe26111(0x134)]=_0x391e06;const _0x30702c=new Blob([_0x25fbba],{'type':_0xe26111(0x109)});_0x5841d2['href']=URL[_0xe26111(0x14b)](_0x30702c),_0x5841d2['click'](),URL[_0xe26111(0x129)](_0x30702c),_0x5841d2[_0xe26111(0xef)]();}export function downloadFileInCloud(_0x2fb6ef){try{const _0xf3c1f7=Module['downloadFile'](_0x2fb6ef);return _0xf3c1f7;}catch(_0x4e54ab){return null;}}export async function uploadFileInCloud(_0x302306){const _0xeab21a=a0_0x1b0252;Module[_0xeab21a(0x12b)](_0x302306,async()=>{localStorageFile(),await Module['FSSync']();});}export async function uploadFile(_0x4d50d2){const _0x5b25f3=a0_0x1b0252,_0x296178=_0x4d50d2[_0x5b25f3(0x106)][0x0];Module['uploadAll'](_0x296178,async()=>{const _0x4f5c88=_0x5b25f3;localStorageFile(),await Module[_0x4f5c88(0x13f)]();});}export async function editFile(_0x3ffc45,_0x5dc590,_0x5f3fbe){await Module['editFileName'](_0x3ffc45,_0x5dc590,_0x5f3fbe);}export async function deleteFile(_0x1c0bf6){const _0x212dd9=a0_0x1b0252;try{return await Module['deleteFile'](_0x1c0bf6),!![];}catch(_0x534ecf){return console[_0x212dd9(0xdf)](_0x1c0bf6),null;}}export function listFiles(_0x4fd0b9){const _0x3f0f99=a0_0x1b0252,_0x4d85cc=Module[_0x3f0f99(0x131)](_0x4fd0b9)[_0x3f0f99(0x148)](_0x241311=>_0x241311!=='.'&&_0x241311!=='..');return _0x4d85cc;}export function getPixelData(){const _0x502804=a0_0x1b0252,_0x8b10fa=Module[_0x502804(0xff)]();return _0x8b10fa;}export function listGame(){const _0x1d91be=a0_0x1b0252,_0x245fa4=Module[_0x1d91be(0x120)]()[_0x1d91be(0x148)](_0x627633=>_0x627633!=='.'&&_0x627633!=='..');return _0x245fa4;}export function listSave(){const _0x36088b=a0_0x1b0252,_0xe04fc7=Module[_0x36088b(0x13e)]()['filter'](_0x4c0f2d=>_0x4c0f2d!=='.'&&_0x4c0f2d!=='..');return _0xe04fc7;}export function listState(){const _0x1a822f=a0_0x1b0252,_0x25e9d1=Module[_0x1a822f(0xe3)]()[_0x1a822f(0x148)](_0x18ba20=>_0x18ba20!=='.'&&_0x18ba20!=='..');return _0x25e9d1;}export function listCheat(){const _0x5e96bd=a0_0x1b0252,_0x535d51=Module[_0x5e96bd(0x125)]()[_0x5e96bd(0x148)](_0x53c0ac=>_0x53c0ac!=='.'&&_0x53c0ac!=='..');return _0x535d51;}export function listScreenshot(){const _0x1861fc=a0_0x1b0252,_0x533e7c=Module[_0x1861fc(0x157)]()['filter'](_0x59ccc5=>_0x59ccc5!=='.'&&_0x59ccc5!=='..');return _0x533e7c;}export function fileSize(_0xc88cf3){const _0x229eba=a0_0x1b0252,_0x2a23d5=Module[_0x229eba(0x14e)](_0xc88cf3);return _0x2a23d5;}export async function resumeGame(){const _0xf9e1b3=a0_0x1b0252;await Module[_0xf9e1b3(0x119)](),Module[_0xf9e1b3(0x12d)](),notiMessage('[_]\x20Resumed!',0x7d0);}export async function pauseGame(){const _0x3fdd45=a0_0x1b0252;Module[_0x3fdd45(0x11e)](),Module['SDL2'](),notiMessage(_0x3fdd45(0x152),0x7d0);}export async function loadding(){const _0x1ae8ed=a0_0x1b0252;await Module[_0x1ae8ed(0x11e)](),loadingIcon[_0x1ae8ed(0xf7)][_0x1ae8ed(0xef)](_0x1ae8ed(0xe4)),await delay(0x3e8),loadingIcon[_0x1ae8ed(0xf7)]['add'](_0x1ae8ed(0xe4)),await delay(0xc8),await Module['resumeGame'](),Module['SDL2']();}export async function buttonPress(_0x1aa2a0){const _0x1e7a65=a0_0x1b0252;Module[_0x1e7a65(0x11f)](_0x1aa2a0);}export async function buttonUnpress(_0x409080){const _0xeaca00=a0_0x1b0252;Module[_0xeaca00(0xf4)](_0x409080);}export async function screenShot(_0x4a934b){const _0x1aab02=a0_0x1b0252,_0xeb402c=gameName[_0x1aab02(0x12a)](/\.(gba|gbc|gb|zip)$/,'_'+_0x4a934b+'.png'),_0x5dba17=await getData(gameName,_0x4a934b,_0x1aab02(0x10d))||'';console[_0x1aab02(0xf0)](_0x5dba17),await Module[_0x1aab02(0x10f)](_0xeb402c),await setData(gameName,_0x4a934b,_0x1aab02(0x126),formatDateTime(Date['now']()),_0x5dba17);}export async function dowloadScreenShot(_0x5d05c0){try{const _0x400b81=await fileToBase64(Module['downloadFile'](_0x5d05c0));return _0x400b81;}catch{}}export async function captureOCR(_0x12b6f8){const _0x348446=a0_0x1b0252;Module[_0x348446(0x10f)](_0x12b6f8);const _0x51b0a3=Module[_0x348446(0xf6)]('/data/screenshots/'+_0x12b6f8);return _0x51b0a3;}export async function setFastForwardMultiplier(_0x4531cd){const _0x1e599a=a0_0x1b0252;Module[_0x1e599a(0x135)](_0x4531cd);}function a0_0x545a(_0x537c6d,_0xb662bc){const _0x202cc0=a0_0x202c();return a0_0x545a=function(_0x545a5b,_0x2cfc51){_0x545a5b=_0x545a5b-0xde;let _0x566af1=_0x202cc0[_0x545a5b];return _0x566af1;},a0_0x545a(_0x537c6d,_0xb662bc);}export async function uploadCheats(_0x16f890){Module['autoLoadCheats'](),Module['uploadAll'](_0x16f890,async()=>{});}export function setVolume(_0x45b721){const _0x54218c=a0_0x1b0252;Module[_0x54218c(0x127)](_0x45b721);}export async function setData(_0x40051d,_0x49a062,_0x3ef5bd,_0xf52860,_0x1190ae=''){const _0x3a68d2=a0_0x1b0252,_0x4fec1b=_0x40051d['replace'](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x1eada5='/data/screenshots/'+_0x4fec1b+'_'+_0x49a062+_0x3a68d2(0x139);let _0x23084d;try{_0x23084d=await fileToBase64(Module[_0x3a68d2(0xf6)](_0x1eada5));}catch(_0x2b7cde){await Module[_0x3a68d2(0x10f)](_0x4fec1b+'_'+_0x49a062+_0x3a68d2(0x139)),await delay(0xc8),_0x23084d=await fileToBase64(Module[_0x3a68d2(0xf6)](_0x1eada5));}let _0xff5ac6=atob(_0x23084d[_0x3a68d2(0x143)](',')[0x1]),_0x41cf9c=_0x3a68d2(0x14a),_0x306587=_0xff5ac6[_0x3a68d2(0xed)](_0x41cf9c),_0x56d685={};if(_0x306587!==-0x1||_0x1190ae['trim']()!==''){let _0x42822b=_0x306587!==-0x1?_0xff5ac6[_0x3a68d2(0xe0)](_0x306587+_0x41cf9c[_0x3a68d2(0xea)]):_0x1190ae,_0x15d037=/(\w+)\s*:\s*([^|]*)/g,_0x2cfd1a;while((_0x2cfd1a=_0x15d037['exec'](_0x42822b))!==null){_0x56d685[_0x2cfd1a[0x1]['trim']()]=_0x2cfd1a[0x2]['trim']();}_0x306587!==-0x1&&(_0xff5ac6=_0xff5ac6[_0x3a68d2(0xe0)](0x0,_0x306587));}_0x56d685[_0x3ef5bd]=_0xf52860;let _0x513098=Object[_0x3a68d2(0x130)](_0x56d685)['map'](([_0x480388,_0xf76922])=>_0x480388+_0x3a68d2(0x114)+_0xf76922)['join'](_0x3a68d2(0x12f)),_0x8ca0b0=new TextEncoder()[_0x3a68d2(0x144)](_0x41cf9c+'\x20'+_0x513098),_0x15edf1=new Uint8Array([..._0xff5ac6][_0x3a68d2(0xe2)](_0x3fa476=>_0x3fa476['charCodeAt'](0x0))[_0x3a68d2(0x13b)]([..._0x8ca0b0])),_0xc571df=new File([new Blob([_0x15edf1],{'type':_0x3a68d2(0x151)})],_0x4fec1b+'_'+_0x49a062+_0x3a68d2(0x139),{'type':_0x3a68d2(0x151)});Module['uploadAll'](_0xc571df,async()=>{});}export async function getData(_0x514984,_0x5ad7f7,_0x1154e3){const _0x730406=a0_0x1b0252;try{const _0x1b95eb=_0x514984[_0x730406(0x12a)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x2d5176=_0x730406(0xf1)+_0x1b95eb+'_'+_0x5ad7f7+'.png';let _0x2c9d14;try{_0x2c9d14=await fileToBase64(Module[_0x730406(0xf6)](_0x2d5176));}catch(_0x1e96ba){return null;}let _0x56d166=atob(_0x2c9d14['split'](',')[0x1]),_0x157f50=_0x730406(0x14a),_0x5afb=_0x56d166['indexOf'](_0x157f50);if(_0x5afb!==-0x1){let _0x1c0db2=_0x56d166['substring'](_0x5afb+_0x157f50[_0x730406(0xea)]);if(_0x1154e3===_0x730406(0x10d))return _0x1c0db2['trim']();let _0x3b94a2=new RegExp(_0x1154e3+'\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)'),_0x3023a1=_0x1c0db2[_0x730406(0xf5)](_0x3b94a2);if(_0x3023a1)return _0x3023a1[0x1]['trim']();}}catch(_0xae98b5){return console[_0x730406(0xdf)]({'romName':_0x514984,'slot':_0x5ad7f7,'type':_0x1154e3}),null;}}export async function ledSave(_0x5d2137){const _0x102ac2=a0_0x1b0252,_0x493a66=parseInt(await getData(gameName,'1',_0x102ac2(0xde))),_0x2e9440=_0x493a66===0x2?'led02':_0x493a66===0x3?_0x102ac2(0xe9):_0x102ac2(0x118);try{for(let _0x50a191=0x1;_0x50a191<=0x3;_0x50a191++){document[_0x102ac2(0x14f)](_0x102ac2(0x107)+_0x50a191)['style'][_0x102ac2(0x140)]=_0x102ac2(0xfa);}await delay(0x3e8);for(let _0x37f2a1=0x1;_0x37f2a1<=0x3;_0x37f2a1++){document[_0x102ac2(0x14f)]('led0'+_0x37f2a1)['style'][_0x102ac2(0x140)]=_0x102ac2(0xfa);}document[_0x102ac2(0x14f)](_0x2e9440)['style']['fill']=_0x5d2137;}catch(_0x8c5380){console[_0x102ac2(0xdf)](_0x102ac2(0xee),_0x8c5380);}};export async function notiMessage(_0x25f196,_0x36f72d,_0x178665=![]){const _0x32781c=a0_0x1b0252;var _0x30301c=document[_0x32781c(0x14f)]('noti-mess');document[_0x32781c(0x14f)](_0x32781c(0x123))['textContent']='';const _0x228499=parseInt(await getData(gameName,'1',_0x32781c(0xde)))||0x0;_0x30301c[_0x32781c(0x142)][_0x32781c(0x10c)]===_0x32781c(0xf3)&&(clearTimeout(messageTimeout),_0x30301c[_0x32781c(0x142)][_0x32781c(0x10c)]='0'),_0x30301c[_0x32781c(0xe6)]=_0x25f196,_0x30301c['style'][_0x32781c(0x10c)]=_0x32781c(0xf3),messageTimeout=setTimeout(()=>{const _0x3d4c6c=_0x32781c;_0x30301c[_0x3d4c6c(0xe6)]='['+_0x228499+']\x20'+gameName[_0x3d4c6c(0xe0)](0x0,gameName['lastIndexOf']('.')),_0x30301c['style'][_0x3d4c6c(0x10c)]=_0x3d4c6c(0xf3);},_0x36f72d),_0x178665&&(canvas['classList'][_0x32781c(0x155)](_0x32781c(0xe4)),setTimeout(()=>{const _0xfb5ace=_0x32781c;canvas[_0xfb5ace(0xf7)][_0xfb5ace(0xef)](_0xfb5ace(0xe4));},0x258));}let canSync=!![];export async function FSSync(){const _0x500a37=a0_0x1b0252;if(!canSync)return;canSync=![];try{await Module[_0x500a37(0x13f)]();}catch(_0x4f72d2){console[_0x500a37(0xdf)](_0x500a37(0x159),_0x4f72d2);}finally{setTimeout(()=>{canSync=!![];},0xbb8);}}export const rewind=_0x581c0c=>Module['toggleRewind']?.(_0x581c0c)||null;export function setCoreSettings(_0x599f8f,_0x1b19a7){const _0x1c445b=a0_0x1b0252;if(typeof Module[_0x1c445b(0xe7)]===_0x1c445b(0xfe))Module[_0x1c445b(0xe7)](_0x599f8f,_0x1b19a7);else return null;}