const a0_0x3bcd7d=a0_0x5ccf;(function(_0x45f1cc,_0x1d890a){const _0x3a4f02=a0_0x5ccf,_0x83c97e=_0x45f1cc();while(!![]){try{const _0x24f777=parseInt(_0x3a4f02(0x156))/0x1*(-parseInt(_0x3a4f02(0x128))/0x2)+parseInt(_0x3a4f02(0x149))/0x3+parseInt(_0x3a4f02(0x115))/0x4+-parseInt(_0x3a4f02(0x124))/0x5+parseInt(_0x3a4f02(0x14d))/0x6*(-parseInt(_0x3a4f02(0x154))/0x7)+-parseInt(_0x3a4f02(0x162))/0x8+parseInt(_0x3a4f02(0x135))/0x9;if(_0x24f777===_0x1d890a)break;else _0x83c97e['push'](_0x83c97e['shift']());}catch(_0xf4c403){_0x83c97e['push'](_0x83c97e['shift']());}}}(a0_0x2f97,0xc5cfe));import a0_0x36dd7c from'../core/mgba.js';import*as a0_0x7de55 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document[a0_0x3bcd7d(0x15b)](a0_0x3bcd7d(0x109))};function initializeCore(_0xdc6b08,_0x1941b7){const _0x348cf6=a0_0x3bcd7d;_0xdc6b08(_0x1941b7)[_0x348cf6(0x13f)](function(_0x6bbb9b){const _0x6bb870=_0x348cf6;_0x6bbb9b[_0x6bb870(0x143)]();});}initializeCore(a0_0x36dd7c,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x3bcd7d(0x15b)](a0_0x3bcd7d(0x109)),savedTurboState=localStorage[a0_0x3bcd7d(0x160)](a0_0x3bcd7d(0x11d)),controlSetting=document[a0_0x3bcd7d(0x15b)]('control-setting');function handleVisibilityChange(_0x3231b5){const _0x1f2ecf=a0_0x3bcd7d;document[_0x1f2ecf(0x123)]===_0x1f2ecf(0x161)||_0x3231b5?.['type']==='beforeunload'||_0x3231b5?.[_0x1f2ecf(0x14a)]?(pauseGame(),canvas[_0x1f2ecf(0x152)][_0x1f2ecf(0x138)]('visible')):(setTimeout(()=>{const _0x36adf6=_0x1f2ecf;canvas[_0x36adf6(0x152)][_0x36adf6(0x13a)](_0x36adf6(0x15a));},0x258),controlSetting[_0x1f2ecf(0x152)]['contains'](_0x1f2ecf(0x15a))&&resumeGame());}async function statusShow(){const _0x517340=a0_0x3bcd7d;document[_0x517340(0x110)](_0x517340(0x148),handleVisibilityChange),document[_0x517340(0x110)]('visibilitychange',handleVisibilityChange),window[_0x517340(0x110)](_0x517340(0x13e),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x7de55['turboF'](turboState)),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(localStorage[_0x517340(0x160)](_0x517340(0x13b)))),await notiMessage(gameVer,0x3e8);}function a0_0x2f97(){const _0x5bb0bb=['1487716VXUhBF','buttonUnpress','gameName','Paused!','\x20time(s)','listScreenshots','autoLoadCheats','_savedCheats','turboState','now','0,0,','onLine','createObjectURL','charCodeAt','visibilityState','4837170YKDPJo','uploadAll','image/png','/data/screenshots/','2arhQEa','gbc','listStates','innerWidth','listCheats','encode','Auto\x20save\x20','style','includes','/data/states/','padStart','listRoms','bottom','29790585LFDHTN','editFileName','disable','add','body','remove','slotStateSaved','gbc1','download','beforeunload','then','/data/games/','.ss0','Do\x20you\x20want\x20to\x20load\x20save\x20state?','FSInit','deleteFile','revokeObjectURL','length','state','pagehide','4691181TwEvGV','persisted','resumeGame','substring','135684REBMsQ','files','set','setFastForwardMultiplier','toString','classList','saveState','189Ifpyab','#20A5A6','1333797fbvahy','click','tEXtComment\x00','endsWith','visible','getElementById','FSSync','appendChild','replace','listSaves','getItem','hidden','12189392UEWLGX','downloadFile','.gbc','canvas','.gb','filter','loadGame','screenshot','indexOf','uploadRom','addEventListener','split','setItem','loadState','createElement'];a0_0x2f97=function(){return _0x5bb0bb;};return a0_0x2f97();}async function saveStatePeriodically(){const _0x183e5a=a0_0x3bcd7d;await ledSave(_0x183e5a(0x155)),await Module[_0x183e5a(0x153)](0x0),await Module[_0x183e5a(0x15c)](),await screenShot(0x0),console['log'](_0x183e5a(0x12e)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0xf32b5=a0_0x3bcd7d,_0x599641=localStorage[_0xf32b5(0x160)](_0xf32b5(0x117)),_0x34ba03=_0x599641['replace'](/\.(zip|gb|gbc|gba)$/,_0xf32b5(0x141)),_0x241b3d=localStorage[_0xf32b5(0x160)]('uId');navigator[_0xf32b5(0x120)]&&(_0x241b3d&&(await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x34ba03,Module['downloadFile'](_0xf32b5(0x131)+_0x34ba03),_0xf32b5(0x147)),await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0xf32b5(0x119),0x7d0)));}function startTimer(){let [_0x53a295,_0x453767,_0x179118,_0x139ce9,_0x258d6c]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x5432b4=a0_0x5ccf;_0x179118++,_0x139ce9++,_0x258d6c++;if(_0x179118===0x3c)[_0x179118,_0x453767]=[0x0,_0x453767+0x1];if(_0x453767===0x3c)[_0x453767,_0x53a295]=[0x0,_0x53a295+0x1];document[_0x5432b4(0x15b)]('timer')['textContent']=_0x53a295+'h'+_0x453767[_0x5432b4(0x151)]()[_0x5432b4(0x132)](0x2,'0')+'.'+_0x179118[_0x5432b4(0x151)]()['padStart'](0x2,'0');_0x139ce9===0x3c&&(saveStatePeriodically(),_0x139ce9=0x0);;_0x258d6c===0x708&&(saveStateInCloud(),_0x258d6c=0x0);;},0x3e8);}export async function uploadGame(_0x26d71c){const _0xfe79b4=a0_0x3bcd7d,_0x55c916=_0x26d71c[_0xfe79b4(0x14e)][0x0];Module[_0xfe79b4(0x10f)](_0x55c916,()=>{const _0x425046=_0xfe79b4;Module[_0x425046(0x15c)]();});}export async function loadGame(_0x6dce8){const _0x3db3d9=a0_0x3bcd7d,_0x214b53=_0x6dce8[_0x3db3d9(0x15e)](/\.(gba|gbc|gb|zip)$/,_0x3db3d9(0x141)),_0x263bab=Module[_0x3db3d9(0x12a)]()['filter'](_0x54c97b=>_0x54c97b!=='.'&&_0x54c97b!=='..');intro[_0x3db3d9(0x152)][_0x3db3d9(0x138)](_0x3db3d9(0x137)),errorLogElements[0x0][_0x3db3d9(0x12f)][_0x3db3d9(0x134)]='0',ingame[_0x3db3d9(0x152)][_0x3db3d9(0x13a)]('disable'),_0x6dce8[_0x3db3d9(0x159)](_0x3db3d9(0x108))||_0x6dce8[_0x3db3d9(0x159)](_0x3db3d9(0x10a))?(canvas[_0x3db3d9(0x152)][_0x3db3d9(0x138)](_0x3db3d9(0x129)),areaTrans['classList'][_0x3db3d9(0x138)](_0x3db3d9(0x13c)),localStorage[_0x3db3d9(0x112)]('screenSize',_0x3db3d9(0x11f)+(window[_0x3db3d9(0x12b)]-0xe6)+','+(window[_0x3db3d9(0x12b)]-0xe6)*0x9/0xa)):localStorage[_0x3db3d9(0x112)]('screenSize',_0x3db3d9(0x11f)+(window[_0x3db3d9(0x12b)]-0x96)+','+(window[_0x3db3d9(0x12b)]-0x96)*0x2/0x3),_0x263bab[_0x3db3d9(0x130)](_0x214b53)?(await Module['loadGame'](_0x3db3d9(0x140)+_0x6dce8),confirm(_0x3db3d9(0x142))&&(await Module[_0x3db3d9(0x113)](0x0),localStorage[_0x3db3d9(0x112)](_0x3db3d9(0x117),_0x6dce8),console['log'](_0x6dce8))):(await Module[_0x3db3d9(0x10c)](_0x3db3d9(0x140)+_0x6dce8),localStorage[_0x3db3d9(0x112)](_0x3db3d9(0x117),_0x6dce8),console['log'](_0x6dce8)),await statusShow();}export async function saveState(_0x4f6a7a){await Module['saveState'](_0x4f6a7a),await Module['FSSync']();}export async function loadState(_0x425db8){const _0x304c72=a0_0x3bcd7d;await Module[_0x304c72(0x113)](_0x425db8);}export async function downloadFile(_0x96154e,_0x1c1b3c){const _0x5d9b79=a0_0x3bcd7d,_0x1d307a=Module[_0x5d9b79(0x107)](_0x96154e),_0x2e6ac8=document[_0x5d9b79(0x114)]('a');document[_0x5d9b79(0x139)][_0x5d9b79(0x15d)](_0x2e6ac8),_0x2e6ac8[_0x5d9b79(0x13d)]=_0x1c1b3c;const _0x3b870d=new Blob([_0x1d307a],{'type':'application/octet-stream'});_0x2e6ac8['href']=URL[_0x5d9b79(0x121)](_0x3b870d),_0x2e6ac8[_0x5d9b79(0x157)](),URL[_0x5d9b79(0x145)](_0x3b870d),_0x2e6ac8[_0x5d9b79(0x13a)]();}export function downloadFileInCloud(_0x23e4f9){const _0x138600=Module['downloadFile'](_0x23e4f9);return _0x138600;}export async function uploadFileInCloud(_0x5455d1){const _0x32f179=a0_0x3bcd7d;Module[_0x32f179(0x125)](_0x5455d1,()=>{const _0x4134aa=_0x32f179;localStorageFile(),Module[_0x4134aa(0x15c)]();});}export async function uploadFile(_0xa7b3e9){const _0x1b44de=a0_0x3bcd7d,_0x664716=_0xa7b3e9[_0x1b44de(0x14e)][0x0];Module[_0x1b44de(0x125)](_0x664716,()=>{const _0x2f5a35=_0x1b44de;localStorageFile(),Module[_0x2f5a35(0x15c)]();});}export async function editFile(_0xb0041e,_0x544366,_0x4fd0cf){const _0x2687af=a0_0x3bcd7d;await Module[_0x2687af(0x136)](_0xb0041e,_0x544366,_0x4fd0cf),await Module['FSSync']();}export async function deleteFile(_0x889921){const _0x154577=a0_0x3bcd7d;await Module[_0x154577(0x144)](_0x889921),await Module['FSSync']();}export function listGame(){const _0x3452d4=a0_0x3bcd7d,_0x3419f6=Module[_0x3452d4(0x133)]()[_0x3452d4(0x10b)](_0x20b0da=>_0x20b0da!=='.'&&_0x20b0da!=='..');return _0x3419f6;}export function listSave(){const _0x3dd4b3=a0_0x3bcd7d,_0x39c6bd=Module[_0x3dd4b3(0x15f)]()['filter'](_0x4ffd39=>_0x4ffd39!=='.'&&_0x4ffd39!=='..');return _0x39c6bd;}export function listState(){const _0xfda536=a0_0x3bcd7d,_0x211fc4=Module[_0xfda536(0x12a)]()[_0xfda536(0x10b)](_0x4616c1=>_0x4616c1!=='.'&&_0x4616c1!=='..');return _0x211fc4;}export function listCheat(){const _0x4fd556=a0_0x3bcd7d,_0x1f3219=Module[_0x4fd556(0x12c)]()[_0x4fd556(0x10b)](_0x44dafe=>_0x44dafe!=='.'&&_0x44dafe!=='..');return _0x1f3219;}export function listScreenshot(){const _0x1e1a58=a0_0x3bcd7d,_0x94459f=Module[_0x1e1a58(0x11a)]()[_0x1e1a58(0x10b)](_0x485fbf=>_0x485fbf!=='.'&&_0x485fbf!=='..');return _0x94459f;}export function embedTextInPngFile(_0x5629fe,_0x2c7ab1,_0x2a8ba0){const _0x3cfbec=a0_0x3bcd7d;let _0x29c4da=atob(_0x5629fe[_0x3cfbec(0x111)](',')[0x1]),_0x2c3d30=new Uint8Array(_0x29c4da[_0x3cfbec(0x146)]);for(let _0x450a7e=0x0;_0x450a7e<_0x29c4da[_0x3cfbec(0x146)];_0x450a7e++){_0x2c3d30[_0x450a7e]=_0x29c4da[_0x3cfbec(0x122)](_0x450a7e);}let _0x2fc52f=new TextEncoder()[_0x3cfbec(0x12d)](_0x3cfbec(0x158)+_0x2c7ab1),_0x48f1b9=new Uint8Array(_0x2c3d30['length']+_0x2fc52f[_0x3cfbec(0x146)]);_0x48f1b9[_0x3cfbec(0x14f)](_0x2c3d30,0x0),_0x48f1b9['set'](_0x2fc52f,_0x2c3d30[_0x3cfbec(0x146)]);let _0x4788be=new Blob([_0x48f1b9],{'type':_0x3cfbec(0x126)}),_0x45e630=new File([_0x4788be],_0x2a8ba0,{'type':_0x3cfbec(0x126)});return _0x45e630;}export function extractTextFromPngBase64(_0x34e20e){const _0x5110bc=a0_0x3bcd7d;let _0x1cb011=atob(_0x34e20e[_0x5110bc(0x111)](',')[0x1]),_0x43ff08=_0x5110bc(0x158),_0x4a4b83=_0x1cb011[_0x5110bc(0x10e)](_0x43ff08);if(_0x4a4b83!==-0x1)return _0x1cb011[_0x5110bc(0x14c)](_0x4a4b83+_0x43ff08[_0x5110bc(0x146)]);return null;}function a0_0x5ccf(_0x425083,_0x6b46d0){const _0x2f975c=a0_0x2f97();return a0_0x5ccf=function(_0x5ccf7a,_0x30d0dd){_0x5ccf7a=_0x5ccf7a-0x107;let _0x14c3ba=_0x2f975c[_0x5ccf7a];return _0x14c3ba;},a0_0x5ccf(_0x425083,_0x6b46d0);}export function fileSize(_0x580ab4){const _0x5d55c4=Module['fileSize'](_0x580ab4);return _0x5d55c4;}export async function resumeGame(){const _0x58778f=a0_0x3bcd7d;Module[_0x58778f(0x14b)](),Module['SDL2'](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x38180a=a0_0x3bcd7d;Module['pauseGame'](),Module['SDL2'](),notiMessage(_0x38180a(0x118),0x7d0);}export async function buttonPress(_0x3e271b){Module['buttonPress'](_0x3e271b);}export async function buttonUnpress(_0x29d1d0){const _0x980bd0=a0_0x3bcd7d;Module[_0x980bd0(0x116)](_0x29d1d0);}export async function screenShot(_0x4547c2){const _0x2c82fc=a0_0x3bcd7d,_0x2a5463=localStorage['getItem'](_0x2c82fc(0x117))[_0x2c82fc(0x15e)](/\.(gba|gbc|gb|zip)$/,''),_0x2900cc=_0x2a5463+'_'+_0x4547c2+'.png';await Module[_0x2c82fc(0x10d)](_0x2900cc),await Module[_0x2c82fc(0x15c)]();const _0x3e6469=await fileToBase64(Module[_0x2c82fc(0x107)](_0x2c82fc(0x127)+_0x2900cc)),_0x15c5da=embedTextInPngFile(_0x3e6469,formatDateTime(Date[_0x2c82fc(0x11e)]()),_0x2900cc);Module[_0x2c82fc(0x125)](_0x15c5da,()=>{const _0x210a7f=_0x2c82fc;localStorageFile(),Module[_0x210a7f(0x15c)]();});}export async function dowloadScreenShot(_0x4df5da){try{const _0x1c8f34=await fileToBase64(Module['downloadFile'](_0x4df5da));return _0x1c8f34;}catch{}}export async function captureOCR(_0x197c97){const _0xf354cc=a0_0x3bcd7d;Module[_0xf354cc(0x10d)](_0x197c97);const _0x50c463=Module[_0xf354cc(0x107)]('/data/screenshots/'+_0x197c97);return _0x50c463;}export async function setFastForwardMultiplier(_0x14e65c){const _0xa7805e=a0_0x3bcd7d;Module[_0xa7805e(0x150)](_0x14e65c);}export function uploadCheats(_0x451033,_0x10632d,_0x14671b,_0x1b223b,_0x19c7c1){const _0x4f95dd=a0_0x3bcd7d;Module[_0x4f95dd(0x125)](_0x451033,()=>{const _0x659b80=_0x4f95dd;Module[_0x659b80(0x11b)](),setTimeout(()=>{const _0xb092da=_0x659b80;Module[_0xb092da(0x15c)]();},0x1f4),_0x1b223b&&(localStorage[_0x659b80(0x112)](_0x10632d+_0x659b80(0x11c),_0x14671b),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x19c7c1['textContent']=localStorage[_0x659b80(0x160)](_0x10632d+_0x659b80(0x11c)||'Off');});}export function setVolume(_0x2c6a46){Module['setVolume'](_0x2c6a46);}