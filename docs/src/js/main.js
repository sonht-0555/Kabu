const a0_0x1bbb53=a0_0x24e6;(function(_0x506c0c,_0x266999){const _0x1a1921=a0_0x24e6,_0x3c2baa=_0x506c0c();while(!![]){try{const _0x5ac187=parseInt(_0x1a1921(0x1d6))/0x1+-parseInt(_0x1a1921(0x196))/0x2*(parseInt(_0x1a1921(0x191))/0x3)+-parseInt(_0x1a1921(0x18f))/0x4*(-parseInt(_0x1a1921(0x1af))/0x5)+-parseInt(_0x1a1921(0x1bd))/0x6*(parseInt(_0x1a1921(0x1bf))/0x7)+-parseInt(_0x1a1921(0x19b))/0x8+-parseInt(_0x1a1921(0x1df))/0x9*(-parseInt(_0x1a1921(0x1ac))/0xa)+-parseInt(_0x1a1921(0x186))/0xb;if(_0x5ac187===_0x266999)break;else _0x3c2baa['push'](_0x3c2baa['shift']());}catch(_0x2a5300){_0x3c2baa['push'](_0x3c2baa['shift']());}}}(a0_0xabe8,0x51b0d));import a0_0x2a2ca1 from'../core/mgba.js';import*as a0_0x16e013 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x1bbb53(0x176)](a0_0x1bbb53(0x1ad))};function initializeCore(_0x3fccb6,_0x30fda3){const _0x5ad220=a0_0x1bbb53;_0x3fccb6(_0x30fda3)[_0x5ad220(0x197)](function(_0x3bc19c){const _0x1bb1fa=_0x5ad220;_0x3bc19c[_0x1bb1fa(0x1cf)]();});}function a0_0x24e6(_0x38bfe9,_0x35f48c){const _0xabe841=a0_0xabe8();return a0_0x24e6=function(_0x24e61d,_0x5eed8e){_0x24e61d=_0x24e61d-0x174;let _0x202e81=_0xabe841[_0x24e61d];return _0x202e81;},a0_0x24e6(_0x38bfe9,_0x35f48c);}initializeCore(a0_0x2a2ca1,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x1bbb53(0x1ad)),savedTurboState=localStorage[a0_0x1bbb53(0x1c2)](a0_0x1bbb53(0x1a3)),controlSetting=document['getElementById'](a0_0x1bbb53(0x1c9));function handleVisibilityChange(_0x2631af){const _0x272af4=a0_0x1bbb53;document['visibilityState']===_0x272af4(0x1d8)||_0x2631af?.['type']==='beforeunload'||_0x2631af?.[_0x272af4(0x1ca)]?(pauseGame(),canvas[_0x272af4(0x1b2)][_0x272af4(0x1a5)](_0x272af4(0x18b))):(setTimeout(()=>{const _0xced70b=_0x272af4;canvas[_0xced70b(0x1b2)]['remove'](_0xced70b(0x18b));},0x258),controlSetting[_0x272af4(0x1b2)][_0x272af4(0x1c5)](_0x272af4(0x18b))&&resumeGame());}async function statusShow(){const _0x54752b=a0_0x1bbb53;document['addEventListener'](_0x54752b(0x1a0),handleVisibilityChange),document[_0x54752b(0x1b3)](_0x54752b(0x1dd),handleVisibilityChange),window[_0x54752b(0x1b3)](_0x54752b(0x192),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x16e013['turboF'](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x54752b(0x1c2)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x3fd71b=a0_0x1bbb53;await ledSave(_0x3fd71b(0x178)),await Module['saveState'](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x3fd71b(0x189)]('Auto\x20save\x20'+ ++countAutoSave+_0x3fd71b(0x1d5));}async function saveStateInCloud(){const _0x42fbba=a0_0x1bbb53,_0x38aabe=localStorage[_0x42fbba(0x1c2)](_0x42fbba(0x177)),_0x4c8a1f=_0x38aabe[_0x42fbba(0x1c6)](_0x42fbba(0x1b0),_0x42fbba(0x18e)),_0x10fb4c=localStorage['getItem'](_0x42fbba(0x1b8)),_0x294222=localStorage['getItem'](_0x38aabe+_0x42fbba(0x181)),_0x127ff3=localStorage[_0x42fbba(0x1c2)](_0x38aabe+_0x42fbba(0x1a9));if(navigator[_0x42fbba(0x1a8)]){if(_0x10fb4c){await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x4c8a1f,Module[_0x42fbba(0x182)](_0x42fbba(0x180)+_0x4c8a1f));if(_0x294222!==null){const _0x364471=_0x294222+'\x0a\x0a'+_0x127ff3,_0xa0052a=new Blob([_0x364471],{'type':_0x42fbba(0x1c3)});await dpUploadFile(_0x38aabe+_0x42fbba(0x1d4),_0xa0052a);}else console[_0x42fbba(0x189)](_0x42fbba(0x17f));await lockNoti('',_0x42fbba(0x19e)+ ++countUpload+_0x42fbba(0x1d5),0x7d0);}else console[_0x42fbba(0x189)]('Unable\x20to\x20upload\x20to\x20Cloud!');}else console['log'](_0x42fbba(0x1d1));}function startTimer(){let [_0x187221,_0x2df792,_0x2830b1,_0x5e0d4f,_0x257258]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x1262d1=a0_0x24e6;_0x2830b1++,_0x5e0d4f++,_0x257258++;if(_0x2830b1===0x3c)[_0x2830b1,_0x2df792]=[0x0,_0x2df792+0x1];if(_0x2df792===0x3c)[_0x2df792,_0x187221]=[0x0,_0x187221+0x1];document[_0x1262d1(0x176)]('timer')['textContent']=_0x187221+'h'+_0x2df792[_0x1262d1(0x18c)]()[_0x1262d1(0x194)](0x2,'0')+'.'+_0x2830b1[_0x1262d1(0x18c)]()[_0x1262d1(0x194)](0x2,'0');_0x5e0d4f===0x3c&&(saveStatePeriodically(),_0x5e0d4f=0x0);;_0x5e0d4f===0xe10&&(saveStateInCloud(),_0x257258=0x0);;},0x3e8);}export async function uploadGame(_0x396160){const _0x105e3d=a0_0x1bbb53,_0x37440a=_0x396160[_0x105e3d(0x17a)][0x0];Module[_0x105e3d(0x1ce)](_0x37440a,()=>{const _0x4db3c8=_0x105e3d;Module[_0x4db3c8(0x17b)]();});}export async function loadGame(_0x51eca2){const _0x202ca4=a0_0x1bbb53,_0x52c002=_0x51eca2[_0x202ca4(0x1c6)](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x457686=Module[_0x202ca4(0x1b7)]()[_0x202ca4(0x1aa)](_0x5bd6d6=>_0x5bd6d6!=='.'&&_0x5bd6d6!=='..');intro[_0x202ca4(0x1b2)][_0x202ca4(0x1a5)](_0x202ca4(0x19f)),errorLogElements[0x0][_0x202ca4(0x1cb)][_0x202ca4(0x19d)]='0',ingame[_0x202ca4(0x1b2)][_0x202ca4(0x190)](_0x202ca4(0x19f)),_0x51eca2[_0x202ca4(0x198)](_0x202ca4(0x174))||_0x51eca2[_0x202ca4(0x198)](_0x202ca4(0x183))?(canvas[_0x202ca4(0x1b2)][_0x202ca4(0x1a5)](_0x202ca4(0x1b6)),areaTrans['classList']['add'](_0x202ca4(0x1de)),localStorage[_0x202ca4(0x184)](_0x202ca4(0x1da),'0,0,'+(window['innerWidth']-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage[_0x202ca4(0x184)]('screenSize','0,0,'+(window[_0x202ca4(0x1b9)]-0x96)+','+(window[_0x202ca4(0x1b9)]-0x96)*0x2/0x3),_0x457686[_0x202ca4(0x18a)](_0x52c002)?(await Module[_0x202ca4(0x1dc)](_0x202ca4(0x188)+_0x51eca2),confirm(_0x202ca4(0x1be))&&(await Module[_0x202ca4(0x1a2)](0x0),await Module[_0x202ca4(0x1a4)](),await Module[_0x202ca4(0x1b1)](),await Module[_0x202ca4(0x195)](),localStorage[_0x202ca4(0x184)]('gameName',_0x51eca2),console[_0x202ca4(0x189)](_0x51eca2))):(await Module[_0x202ca4(0x1dc)](_0x202ca4(0x188)+_0x51eca2),await Module[_0x202ca4(0x1a4)](),await Module[_0x202ca4(0x1b1)](),await Module[_0x202ca4(0x195)](),localStorage[_0x202ca4(0x184)](_0x202ca4(0x177),_0x51eca2)),await statusShow();}export async function saveState(_0x39d139){const _0x230f00=a0_0x1bbb53;await Module[_0x230f00(0x185)](_0x39d139),await Module[_0x230f00(0x17b)]();}export async function loadState(_0x5c7a48){const _0x4115e4=a0_0x1bbb53;await Module[_0x4115e4(0x1a2)](_0x5c7a48);}export async function downloadFile(_0x3bda19,_0x1a8b7f){const _0x114479=a0_0x1bbb53,_0x4d8b52=Module[_0x114479(0x182)](_0x3bda19),_0x5ccd92=document['createElement']('a');document[_0x114479(0x18d)][_0x114479(0x1d3)](_0x5ccd92),_0x5ccd92[_0x114479(0x199)]=_0x1a8b7f;const _0x42cea5=new Blob([_0x4d8b52],{'type':_0x114479(0x17c)});_0x5ccd92[_0x114479(0x1c1)]=URL[_0x114479(0x1bc)](_0x42cea5),_0x5ccd92[_0x114479(0x1db)](),URL[_0x114479(0x1cd)](_0x42cea5),_0x5ccd92[_0x114479(0x190)]();}export function downloadFileInCloud(_0x20486e){const _0x21810d=a0_0x1bbb53,_0x5d6cbe=Module[_0x21810d(0x182)](_0x20486e);return _0x5d6cbe;}export async function uploadFile(_0x4e9ab3){const _0x374796=_0x4e9ab3['files'][0x0];Module['uploadSaveOrSaveState'](_0x374796,()=>{Module['FSSync']();});}export async function editFile(_0x37b3fb,_0x30a4c5,_0x4718c2){const _0x29016d=a0_0x1bbb53;await Module[_0x29016d(0x17d)](_0x37b3fb,_0x30a4c5,_0x4718c2),await Module[_0x29016d(0x17b)]();}export async function deleteFile(_0x42bbb8){const _0x13c78f=a0_0x1bbb53;await Module[_0x13c78f(0x1a7)](_0x42bbb8),await Module['FSSync']();}export function listGame(){const _0x534b50=a0_0x1bbb53,_0xf5664a=Module[_0x534b50(0x1c0)]()[_0x534b50(0x1aa)](_0x2ed197=>_0x2ed197!=='.'&&_0x2ed197!=='..');return _0xf5664a;}export function listSave(){const _0xc1d3e2=a0_0x1bbb53,_0xab9a89=Module[_0xc1d3e2(0x1c8)]()[_0xc1d3e2(0x1aa)](_0xc9bfb0=>_0xc9bfb0!=='.'&&_0xc9bfb0!=='..');return _0xab9a89;}export function listState(){const _0x1d42cb=a0_0x1bbb53,_0x170fe5=Module[_0x1d42cb(0x1b7)]()[_0x1d42cb(0x1aa)](_0x431e80=>_0x431e80!=='.'&&_0x431e80!=='..');return _0x170fe5;}export function listCheat(){const _0x1fc0db=a0_0x1bbb53,_0x12a506=Module[_0x1fc0db(0x1cc)]()[_0x1fc0db(0x1aa)](_0x383547=>_0x383547!=='.'&&_0x383547!=='..');return _0x12a506;}export function listScreenshot(){const _0xbcee56=a0_0x1bbb53,_0x14c2f4=Module['listScreenshots']()[_0xbcee56(0x1aa)](_0x39c42c=>_0x39c42c!=='.'&&_0x39c42c!=='..');return _0x14c2f4;}export function fileSize(_0x15375e){const _0x37418a=a0_0x1bbb53,_0x1f8cc7=Module[_0x37418a(0x175)](_0x15375e);return _0x1f8cc7;}export async function uploadCheat(_0x23e841){const _0x4adea1=a0_0x1bbb53;try{const _0x133515=_0x23e841[_0x4adea1(0x17a)][0x0];await Module['uploadCheats'](_0x133515,()=>{const _0x2984f7=_0x4adea1;console[_0x2984f7(0x189)](_0x2984f7(0x19c),_0x133515[_0x2984f7(0x1a6)]),localStorageFile(),Module[_0x2984f7(0x17b)]();});}catch(_0x558c3f){console[_0x4adea1(0x1d7)](_0x4adea1(0x1d9),_0x558c3f);}}function a0_0xabe8(){const _0x1d8d59=['text/plain','.png','contains','replace','textContent','listSaves','control-setting','persisted','style','listCheats','revokeObjectURL','uploadRom','FSInit','setFastForwardMultiplier','Online!','Error\x20uploadSavSta:','appendChild','_slot0.txt','\x20time(s)','343021JVJssT','error','hidden','Error\x20uploadCheat:','screenSize','click','loadGame','visibilitychange','gbc1','9wgXKvS','.gbc','fileSize','getElementById','gameName','#20A5A6','_savedCheats','files','FSSync','application/octet-stream','editFileName','screenshot','No\x20screenshot!','/data/states/','_imageState0','downloadFile','.gb','setItem','saveState','147752OPnqec','Paused!','/data/games/','log','includes','visible','toString','body','.ss0','148EXtPKn','remove','687djUPVf','beforeunload','_dateState','padStart','SDL2','1528qyWDxi','then','endsWith','download','buttonUnpress','2237088WoaYlj','Cheat\x20uploaded\x20successfully:','bottom','Cloud\x20upload\x20','disable','pagehide','Save/State\x20uploaded\x20successfully:','loadState','turboState','pauseGame','add','name','deleteFile','onLine','_dateState0','filter','now','3217730Drenjf','canvas','uploadSaveOrSaveState','58805TGdowT','.gba','resumeGame','classList','addEventListener','uploadCheats','Resumed!','gbc','listStates','uId','innerWidth','Cheat\x20Enabled!','/data/screenshots/','createObjectURL','891966XrDKXC','Do\x20you\x20want\x20to\x20load\x20save\x20state?','14tJhWiM','listRoms','href','getItem'];a0_0xabe8=function(){return _0x1d8d59;};return a0_0xabe8();}export async function uploadSavSta(_0x3e193a){const _0x26dc27=a0_0x1bbb53;try{const _0x418c4a=_0x3e193a[_0x26dc27(0x17a)][0x0];await Module[_0x26dc27(0x1ae)](_0x418c4a,()=>{const _0x469bfa=_0x26dc27;console[_0x469bfa(0x189)](_0x469bfa(0x1a1),_0x418c4a[_0x469bfa(0x1a6)]),localStorageFile(),Module['FSSync']();});}catch(_0x1bd3a6){console['error'](_0x26dc27(0x1d2),_0x1bd3a6);}}export async function uploadSaveOrSaveState(_0x1948db){const _0x440d73=a0_0x1bbb53;Module[_0x440d73(0x1ae)](_0x1948db,()=>{const _0x387dea=_0x440d73;localStorageFile(),Module[_0x387dea(0x17b)]();});}export async function resumeGame(){const _0x4800bd=a0_0x1bbb53;Module[_0x4800bd(0x1b1)](),Module[_0x4800bd(0x195)](),notiMessage(_0x4800bd(0x1b5),0x7d0);}export async function pauseGame(){const _0x45cb8e=a0_0x1bbb53;Module[_0x45cb8e(0x1a4)](),Module[_0x45cb8e(0x195)](),notiMessage(_0x45cb8e(0x187),0x7d0);}export async function buttonPress(_0x39b270){Module['buttonPress'](_0x39b270);}export async function buttonUnpress(_0x42100a){const _0x4a05af=a0_0x1bbb53;Module[_0x4a05af(0x19a)](_0x42100a);}export async function screenShot(_0xcbe75){const _0x5e077c=a0_0x1bbb53,_0x176846=localStorage[_0x5e077c(0x1c2)](_0x5e077c(0x177)),_0x3212b6=_0x176846[_0x5e077c(0x1c6)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x5e077c(0x17e)](''+_0x3212b6+_0xcbe75+_0x5e077c(0x1c4)),await Module[_0x5e077c(0x17b)]();const _0x4d20ea=await fileToBase64(Module[_0x5e077c(0x182)](_0x5e077c(0x1bb)+_0x3212b6+_0xcbe75+_0x5e077c(0x1c4))),_0xbcf9ed=Date[_0x5e077c(0x1ab)](),_0x497d9a=formatDateTime(_0xbcf9ed);localStorage[_0x5e077c(0x184)](_0x176846+_0x5e077c(0x193)+_0xcbe75,_0x497d9a),localStorage[_0x5e077c(0x184)](_0x176846+'_imageState'+_0xcbe75,_0x4d20ea);}export async function captureOCR(_0x7b5f21){const _0xb5fec8=a0_0x1bbb53;Module[_0xb5fec8(0x17e)](_0x7b5f21);const _0x938b52=Module[_0xb5fec8(0x182)](_0xb5fec8(0x1bb)+_0x7b5f21);return _0x938b52;}export async function setFastForwardMultiplier(_0x2ceb35){const _0x14febe=a0_0x1bbb53;Module[_0x14febe(0x1d0)](_0x2ceb35);}export function uploadCheats(_0x20cfd5,_0x40e23f,_0x39b586,_0x420492,_0x3225a3){const _0x3f1121=a0_0x1bbb53;Module[_0x3f1121(0x1b4)](_0x20cfd5,()=>{const _0x3b90d1=_0x3f1121;Module['autoLoadCheats'](),setTimeout(()=>{Module['FSSync']();},0x1f4),_0x420492&&(localStorage[_0x3b90d1(0x184)](_0x40e23f+'_savedCheats',_0x39b586),notiMessage(_0x3b90d1(0x1ba),0x5dc)),_0x3225a3[_0x3b90d1(0x1c7)]=localStorage[_0x3b90d1(0x1c2)](_0x40e23f+_0x3b90d1(0x179)||'Off');});}