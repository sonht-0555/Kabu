const a0_0xd50ec1=a0_0x11c9;(function(_0x8d78f0,_0x1c11a3){const _0x2a3ad7=a0_0x11c9,_0xa70a7c=_0x8d78f0();while(!![]){try{const _0x1ae391=-parseInt(_0x2a3ad7(0x248))/0x1*(parseInt(_0x2a3ad7(0x203))/0x2)+-parseInt(_0x2a3ad7(0x211))/0x3*(parseInt(_0x2a3ad7(0x238))/0x4)+-parseInt(_0x2a3ad7(0x21f))/0x5+-parseInt(_0x2a3ad7(0x21c))/0x6*(parseInt(_0x2a3ad7(0x24a))/0x7)+parseInt(_0x2a3ad7(0x244))/0x8+parseInt(_0x2a3ad7(0x220))/0x9+parseInt(_0x2a3ad7(0x21d))/0xa*(parseInt(_0x2a3ad7(0x209))/0xb);if(_0x1ae391===_0x1c11a3)break;else _0xa70a7c['push'](_0xa70a7c['shift']());}catch(_0x2a89cc){_0xa70a7c['push'](_0xa70a7c['shift']());}}}(a0_0x53ad,0x53a26));import a0_0x1a926a from'../core/mgba.js';import*as a0_0x4c68a3 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0xd50ec1(0x22f)](a0_0xd50ec1(0x217))};function a0_0x53ad(){const _0x59de48=['.gba','beforeunload','listRoms','2eLeRRb','/data/screenshots/','listSaves','Error\x20uploadSavSta:','addEventListener','turboF','11LQQjHx','innerWidth','slotStateSaved','filter','setItem','fileSize','gameName','autoLoadCheats','3xJcmln','Resumed!','Off','.gbc','listCheats','.png','canvas','style','pauseGame','No\x20screenshot!','appendChild','6sjOumi','10947590BxXnJe','now','447185vEPSoP','4698297eBEUTl','uploadSaveOrSaveState','hidden','persisted','FSInit','\x20time(s)','getItem','toString','SDL2','/data/games/','createObjectURL','click','_slot0.txt','saveState','setFastForwardMultiplier','getElementById','Unable\x20to\x20upload\x20to\x20Cloud!','Cheat\x20uploaded\x20successfully:','name','Cheat\x20Enabled!','endsWith','uId','loadGame','files','1253352IHkHtP','visibilityState','padStart','Save/State\x20uploaded\x20successfully:','uploadRom','application/octet-stream','disable','_dateState','listStates','log','.ss0','timer','1839528KzYQts','then','downloadFile','loadState','632134fuTYbF','_imageState0','3284806dztkLK','Cloud\x20upload\x20','/data/states/','Error\x20uploadCheat:','remove','createElement','replace','error','_dateState0','buttonPress','visible','FSSync','_imageState','_savedCheats','uploadCheats','turboState','Paused!','.gb','0,0,','classList','add','buttonUnpress','href','screenSize','listScreenshots','pagehide','control-setting'];a0_0x53ad=function(){return _0x59de48;};return a0_0x53ad();}function initializeCore(_0x422961,_0x41749b){const _0x2e08ff=a0_0xd50ec1;_0x422961(_0x41749b)[_0x2e08ff(0x245)](function(_0x422e90){const _0x5ba78d=_0x2e08ff;_0x422e90[_0x5ba78d(0x224)]();});}initializeCore(a0_0x1a926a,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0xd50ec1(0x217)),savedTurboState=localStorage[a0_0xd50ec1(0x226)](a0_0xd50ec1(0x1f4)),controlSetting=document[a0_0xd50ec1(0x22f)](a0_0xd50ec1(0x1ff));function handleVisibilityChange(_0x3ab806){const _0x86f78=a0_0xd50ec1;document[_0x86f78(0x239)]===_0x86f78(0x222)||_0x3ab806?.['type']===_0x86f78(0x201)||_0x3ab806?.[_0x86f78(0x223)]?(pauseGame(),canvas[_0x86f78(0x1f8)][_0x86f78(0x1f9)](_0x86f78(0x1ef))):(setTimeout(()=>{const _0x936613=_0x86f78;canvas[_0x936613(0x1f8)]['remove'](_0x936613(0x1ef));},0x258),controlSetting['classList']['contains'](_0x86f78(0x1ef))&&resumeGame());}async function statusShow(){const _0x560679=a0_0xd50ec1;document[_0x560679(0x207)](_0x560679(0x1fe),handleVisibilityChange),document[_0x560679(0x207)]('visibilitychange',handleVisibilityChange),window[_0x560679(0x207)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x4c68a3[_0x560679(0x208)](turboState)),await delay(0xc8),await Module[_0x560679(0x228)](),await delay(0x320),await led(parseInt(localStorage[_0x560679(0x226)](_0x560679(0x20b)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x289e06=a0_0xd50ec1;await ledSave('#20A5A6'),await Module[_0x289e06(0x22d)](0x0),await Module[_0x289e06(0x1f0)](),await screenShot(0x0),console['log']('Auto\x20save\x20'+ ++countAutoSave+_0x289e06(0x225));}async function saveStateInCloud(){const _0x8a3f3a=a0_0xd50ec1,_0xb9642a=localStorage['getItem'](_0x8a3f3a(0x20f)),_0x5c78a5=_0xb9642a[_0x8a3f3a(0x250)](_0x8a3f3a(0x200),_0x8a3f3a(0x242)),_0x123516=localStorage['getItem'](_0x8a3f3a(0x235)),_0x39d15a=localStorage[_0x8a3f3a(0x226)](_0xb9642a+_0x8a3f3a(0x249)),_0x576fc7=localStorage[_0x8a3f3a(0x226)](_0xb9642a+_0x8a3f3a(0x1ed));if(navigator['onLine']){if(_0x123516){await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x5c78a5,Module['downloadFile'](_0x8a3f3a(0x24c)+_0x5c78a5));if(_0x39d15a!==null){const _0x439ec0=_0x39d15a+'\x0a\x0a'+_0x576fc7,_0x1e36d3=new Blob([_0x439ec0],{'type':'text/plain'});await dpUploadFile(_0xb9642a+_0x8a3f3a(0x22c),_0x1e36d3);}else console[_0x8a3f3a(0x241)](_0x8a3f3a(0x21a));await lockNoti('',_0x8a3f3a(0x24b)+ ++countUpload+_0x8a3f3a(0x225),0x7d0);}else console['log'](_0x8a3f3a(0x230));}else console['log']('Online!');}function startTimer(){let [_0x2e8f48,_0x70c663,_0x160612,_0x48a1d8,_0xe0be9e]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x1e3d26=a0_0x11c9;_0x160612++,_0x48a1d8++,_0xe0be9e++;if(_0x160612===0x3c)[_0x160612,_0x70c663]=[0x0,_0x70c663+0x1];if(_0x70c663===0x3c)[_0x70c663,_0x2e8f48]=[0x0,_0x2e8f48+0x1];document[_0x1e3d26(0x22f)](_0x1e3d26(0x243))['textContent']=_0x2e8f48+'h'+_0x70c663['toString']()['padStart'](0x2,'0')+'.'+_0x160612[_0x1e3d26(0x227)]()[_0x1e3d26(0x23a)](0x2,'0');_0x48a1d8===0x3c&&(saveStatePeriodically(),_0x48a1d8=0x0);;_0xe0be9e===0xe10&&(saveStateInCloud(),_0xe0be9e=0x0);;},0x3e8);}export async function uploadGame(_0x592d9e){const _0x11af2d=a0_0xd50ec1,_0x5e47bf=_0x592d9e[_0x11af2d(0x237)][0x0];Module[_0x11af2d(0x23c)](_0x5e47bf,()=>{const _0x502cef=_0x11af2d;Module[_0x502cef(0x1f0)]();});}export async function loadGame(_0xdfd236){const _0x4c444e=a0_0xd50ec1,_0x1559e0=_0xdfd236['replace'](/\.(gba|gbc|gb|zip)$/,_0x4c444e(0x242)),_0x25c833=Module[_0x4c444e(0x240)]()[_0x4c444e(0x20c)](_0xafe863=>_0xafe863!=='.'&&_0xafe863!=='..');intro[_0x4c444e(0x1f8)][_0x4c444e(0x1f9)](_0x4c444e(0x23e)),errorLogElements[0x0][_0x4c444e(0x218)]['bottom']='0',ingame[_0x4c444e(0x1f8)][_0x4c444e(0x24e)](_0x4c444e(0x23e)),_0xdfd236[_0x4c444e(0x234)](_0x4c444e(0x214))||_0xdfd236[_0x4c444e(0x234)](_0x4c444e(0x1f6))?(canvas[_0x4c444e(0x1f8)][_0x4c444e(0x1f9)]('gbc'),areaTrans[_0x4c444e(0x1f8)][_0x4c444e(0x1f9)]('gbc1'),localStorage['setItem'](_0x4c444e(0x1fc),_0x4c444e(0x1f7)+(window[_0x4c444e(0x20a)]-0xe6)+','+(window[_0x4c444e(0x20a)]-0xe6)*0x9/0xa)):localStorage[_0x4c444e(0x20d)](_0x4c444e(0x1fc),_0x4c444e(0x1f7)+(window[_0x4c444e(0x20a)]-0x96)+','+(window[_0x4c444e(0x20a)]-0x96)*0x2/0x3),_0x25c833['includes'](_0x1559e0)?(await Module[_0x4c444e(0x236)](_0x4c444e(0x229)+_0xdfd236),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module[_0x4c444e(0x247)](0x0),localStorage[_0x4c444e(0x20d)](_0x4c444e(0x20f),_0xdfd236),console['log'](_0xdfd236))):(await Module[_0x4c444e(0x236)]('/data/games/'+_0xdfd236),localStorage[_0x4c444e(0x20d)](_0x4c444e(0x20f),_0xdfd236)),await statusShow();}export async function saveState(_0x48f3d7){const _0x594de4=a0_0xd50ec1;await Module[_0x594de4(0x22d)](_0x48f3d7),await Module[_0x594de4(0x1f0)]();}export async function loadState(_0x1346a7){const _0x796124=a0_0xd50ec1;await Module[_0x796124(0x247)](_0x1346a7);}export async function downloadFile(_0x4f8581,_0x501e6d){const _0x548f07=a0_0xd50ec1,_0x50e1b3=Module[_0x548f07(0x246)](_0x4f8581),_0x57560d=document[_0x548f07(0x24f)]('a');document['body'][_0x548f07(0x21b)](_0x57560d),_0x57560d['download']=_0x501e6d;const _0x18fc9f=new Blob([_0x50e1b3],{'type':_0x548f07(0x23d)});_0x57560d[_0x548f07(0x1fb)]=URL[_0x548f07(0x22a)](_0x18fc9f),_0x57560d[_0x548f07(0x22b)](),URL['revokeObjectURL'](_0x18fc9f),_0x57560d[_0x548f07(0x24e)]();}export function downloadFileInCloud(_0x535485){const _0x508d75=a0_0xd50ec1,_0x54e6b7=Module[_0x508d75(0x246)](_0x535485);return _0x54e6b7;}export async function uploadFile(_0x76fd7d){const _0x20ca7b=a0_0xd50ec1,_0x433ef2=_0x76fd7d[_0x20ca7b(0x237)][0x0];Module[_0x20ca7b(0x221)](_0x433ef2,()=>{Module['FSSync']();});}export async function editFile(_0xde2681,_0x858512,_0x577427){const _0x362fbc=a0_0xd50ec1;await Module['editFileName'](_0xde2681,_0x858512,_0x577427),await Module[_0x362fbc(0x1f0)]();}export async function deleteFile(_0x165dd1){const _0x91ff03=a0_0xd50ec1;await Module['deleteFile'](_0x165dd1),await Module[_0x91ff03(0x1f0)]();}export function listGame(){const _0x3cbdb1=a0_0xd50ec1,_0x58e713=Module[_0x3cbdb1(0x202)]()[_0x3cbdb1(0x20c)](_0x558aed=>_0x558aed!=='.'&&_0x558aed!=='..');return _0x58e713;}export function listSave(){const _0xea4e45=a0_0xd50ec1,_0x4a68f5=Module[_0xea4e45(0x205)]()[_0xea4e45(0x20c)](_0x4040ef=>_0x4040ef!=='.'&&_0x4040ef!=='..');return _0x4a68f5;}export function listState(){const _0x5e9500=a0_0xd50ec1,_0x163324=Module[_0x5e9500(0x240)]()[_0x5e9500(0x20c)](_0x228c54=>_0x228c54!=='.'&&_0x228c54!=='..');return _0x163324;}export function listCheat(){const _0x11deb3=a0_0xd50ec1,_0x39e0bb=Module[_0x11deb3(0x215)]()[_0x11deb3(0x20c)](_0x1e5b78=>_0x1e5b78!=='.'&&_0x1e5b78!=='..');return _0x39e0bb;}function a0_0x11c9(_0x5cb19a,_0x519cf3){const _0x53ad09=a0_0x53ad();return a0_0x11c9=function(_0x11c968,_0x1e4a75){_0x11c968=_0x11c968-0x1ec;let _0x1b3f6f=_0x53ad09[_0x11c968];return _0x1b3f6f;},a0_0x11c9(_0x5cb19a,_0x519cf3);}export function listScreenshot(){const _0x2eda96=a0_0xd50ec1,_0x952e5d=Module[_0x2eda96(0x1fd)]()['filter'](_0x60b3f9=>_0x60b3f9!=='.'&&_0x60b3f9!=='..');return _0x952e5d;}export function fileSize(_0x86280e){const _0x468060=a0_0xd50ec1,_0x1d2bda=Module[_0x468060(0x20e)](_0x86280e);return _0x1d2bda;}export async function uploadCheat(_0x569ee6){const _0x585130=a0_0xd50ec1;try{const _0x999be1=_0x569ee6[_0x585130(0x237)][0x0];await Module[_0x585130(0x1f3)](_0x999be1,()=>{const _0xb0ca41=_0x585130;console[_0xb0ca41(0x241)](_0xb0ca41(0x231),_0x999be1[_0xb0ca41(0x232)]),localStorageFile(),Module[_0xb0ca41(0x1f0)]();});}catch(_0x13826e){console['error'](_0x585130(0x24d),_0x13826e);}}export async function uploadSavSta(_0x695131){const _0x23ec73=a0_0xd50ec1;try{const _0x259477=_0x695131[_0x23ec73(0x237)][0x0];await Module['uploadSaveOrSaveState'](_0x259477,()=>{const _0x3e78cb=_0x23ec73;console[_0x3e78cb(0x241)](_0x3e78cb(0x23b),_0x259477[_0x3e78cb(0x232)]),localStorageFile(),Module[_0x3e78cb(0x1f0)]();});}catch(_0x305461){console[_0x23ec73(0x1ec)](_0x23ec73(0x206),_0x305461);}}export async function uploadSaveOrSaveState(_0x18ddb3){const _0x141142=a0_0xd50ec1;Module[_0x141142(0x221)](_0x18ddb3,()=>{localStorageFile(),Module['FSSync']();});}export async function resumeGame(){const _0x10ceab=a0_0xd50ec1;Module['resumeGame'](),Module[_0x10ceab(0x228)](),notiMessage(_0x10ceab(0x212),0x7d0);}export async function pauseGame(){const _0x8fa4b0=a0_0xd50ec1;Module[_0x8fa4b0(0x219)](),Module[_0x8fa4b0(0x228)](),notiMessage(_0x8fa4b0(0x1f5),0x7d0);}export async function buttonPress(_0x358e65){const _0x4baa0a=a0_0xd50ec1;Module[_0x4baa0a(0x1ee)](_0x358e65);}export async function buttonUnpress(_0xbc1f1){const _0x4f99d=a0_0xd50ec1;Module[_0x4f99d(0x1fa)](_0xbc1f1);}export async function screenShot(_0x81c758){const _0x3b62b6=a0_0xd50ec1,_0x1dd44d=localStorage[_0x3b62b6(0x226)](_0x3b62b6(0x20f)),_0x4c8565=_0x1dd44d['replace'](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x4c8565+_0x81c758+'.png'),await Module[_0x3b62b6(0x1f0)]();const _0x1c31ef=await fileToBase64(Module[_0x3b62b6(0x246)](_0x3b62b6(0x204)+_0x4c8565+_0x81c758+_0x3b62b6(0x216))),_0x3af43b=Date[_0x3b62b6(0x21e)](),_0x2e6ddb=formatDateTime(_0x3af43b);localStorage[_0x3b62b6(0x20d)](_0x1dd44d+_0x3b62b6(0x23f)+_0x81c758,_0x2e6ddb),localStorage[_0x3b62b6(0x20d)](_0x1dd44d+_0x3b62b6(0x1f1)+_0x81c758,_0x1c31ef);}export async function captureOCR(_0x2887b6){const _0x3b39b4=a0_0xd50ec1;Module['screenshot'](_0x2887b6);const _0x47f740=Module[_0x3b39b4(0x246)]('/data/screenshots/'+_0x2887b6);return _0x47f740;}export async function setFastForwardMultiplier(_0x5769d8){const _0xd5e940=a0_0xd50ec1;Module[_0xd5e940(0x22e)](_0x5769d8);}export function uploadCheats(_0x18b9c8,_0x564ac3,_0xd7a6e2,_0x46c270,_0x36565b){Module['uploadCheats'](_0x18b9c8,()=>{const _0x1cdd30=a0_0x11c9;Module[_0x1cdd30(0x210)](),setTimeout(()=>{const _0x53dcf5=_0x1cdd30;Module[_0x53dcf5(0x1f0)]();},0x1f4),_0x46c270&&(localStorage[_0x1cdd30(0x20d)](_0x564ac3+_0x1cdd30(0x1f2),_0xd7a6e2),notiMessage(_0x1cdd30(0x233),0x5dc)),_0x36565b['textContent']=localStorage['getItem'](_0x564ac3+_0x1cdd30(0x1f2)||_0x1cdd30(0x213));});}