const a0_0xd54f31=a0_0xf79f;(function(_0x5ee6f6,_0x297590){const _0x4b0d1b=a0_0xf79f,_0x17e8ec=_0x5ee6f6();while(!![]){try{const _0x2c8d8e=parseInt(_0x4b0d1b(0xa1))/0x1*(-parseInt(_0x4b0d1b(0xc9))/0x2)+parseInt(_0x4b0d1b(0xcc))/0x3+parseInt(_0x4b0d1b(0xc3))/0x4*(parseInt(_0x4b0d1b(0x8e))/0x5)+-parseInt(_0x4b0d1b(0x91))/0x6+-parseInt(_0x4b0d1b(0xb7))/0x7*(-parseInt(_0x4b0d1b(0x85))/0x8)+parseInt(_0x4b0d1b(0xd3))/0x9+parseInt(_0x4b0d1b(0xd5))/0xa;if(_0x2c8d8e===_0x297590)break;else _0x17e8ec['push'](_0x17e8ec['shift']());}catch(_0x79cfec){_0x17e8ec['push'](_0x17e8ec['shift']());}}}(a0_0x3626,0x29e25));import a0_0x88344c from'../core/mgba.js';import*as a0_0x8fcd18 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0xd54f31(0x84)]('canvas')};function initializeCore(_0x290dd1,_0xa5e696){const _0x48f71f=a0_0xd54f31;_0x290dd1(_0xa5e696)[_0x48f71f(0xc0)](function(_0x5690aa){const _0x5a95f6=_0x48f71f;_0x5690aa[_0x5a95f6(0xae)]();});}initializeCore(a0_0x88344c,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById']('canvas'),savedTurboState=localStorage[a0_0xd54f31(0xa8)](a0_0xd54f31(0x94)),controlSetting=document[a0_0xd54f31(0x84)](a0_0xd54f31(0xdb));function handleVisibilityChange(_0x4f31d8){const _0x290192=a0_0xd54f31;document[_0x290192(0x98)]===_0x290192(0xd9)||_0x4f31d8?.[_0x290192(0x89)]===_0x290192(0xcd)||_0x4f31d8?.['persisted']?(pauseGame(),canvas[_0x290192(0x93)][_0x290192(0x92)]('visible')):(setTimeout(()=>{const _0x591b7e=_0x290192;canvas['classList'][_0x591b7e(0xd8)](_0x591b7e(0x87));},0x258),controlSetting[_0x290192(0x93)]['contains'](_0x290192(0x87))&&resumeGame());}async function statusShow(){const _0x2e6419=a0_0xd54f31;document[_0x2e6419(0x96)](_0x2e6419(0xa7),handleVisibilityChange),document['addEventListener']('visibilitychange',handleVisibilityChange),window[_0x2e6419(0x96)](_0x2e6419(0xcd),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x8fcd18['turboF'](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x2e6419(0xa8)](_0x2e6419(0xc5)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x3ea3d5=a0_0xd54f31;await ledSave(_0x3ea3d5(0xb0)),await Module[_0x3ea3d5(0xa6)](0x0),await Module[_0x3ea3d5(0x8a)](),await screenShot(0x0),console[_0x3ea3d5(0x8c)](_0x3ea3d5(0xa2)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x586054=a0_0xd54f31,_0x1f14cc=localStorage[_0x586054(0xa8)](_0x586054(0xd2)),_0x5a7f1a=_0x1f14cc['replace'](_0x586054(0xca),_0x586054(0xb8)),_0x2cc967=localStorage[_0x586054(0xa8)]('uId'),_0x55228c=localStorage['getItem'](_0x1f14cc+_0x586054(0xc8)),_0x74f899=localStorage[_0x586054(0xa8)](_0x1f14cc+_0x586054(0xaa));if(navigator['onLine']){if(_0x2cc967){await ledSave(_0x586054(0x7d)),await delay(0x3e8),await dpUploadFile(_0x5a7f1a,Module[_0x586054(0x95)](_0x586054(0xde)+_0x5a7f1a));if(_0x55228c!==null){const _0x161012=_0x55228c+'\x0a\x0a'+_0x74f899,_0x50cc54=new Blob([_0x161012],{'type':'text/plain'});await dpUploadFile(_0x1f14cc+_0x586054(0xd7),_0x50cc54);}else console['log'](_0x586054(0xb1));await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x586054(0x7e),0x7d0);}else console[_0x586054(0x8c)](_0x586054(0xbb));}else console[_0x586054(0x8c)](_0x586054(0xbc));}function startTimer(){let [_0x207fe0,_0x33b4ef,_0x23f1cd,_0x3cf758,_0x20a276]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x3e1684=a0_0xf79f;_0x23f1cd++,_0x3cf758++,_0x20a276++;if(_0x23f1cd===0x3c)[_0x23f1cd,_0x33b4ef]=[0x0,_0x33b4ef+0x1];if(_0x33b4ef===0x3c)[_0x33b4ef,_0x207fe0]=[0x0,_0x207fe0+0x1];document[_0x3e1684(0x84)](_0x3e1684(0xdd))['textContent']=_0x207fe0+'h'+_0x33b4ef['toString']()[_0x3e1684(0x81)](0x2,'0')+'.'+_0x23f1cd[_0x3e1684(0xab)]()['padStart'](0x2,'0');_0x3cf758===0x3c&&(saveStatePeriodically(),_0x3cf758=0x0);;_0x3cf758===0xe10&&(saveStateInCloud(),_0x20a276=0x0);;},0x3e8);}export async function uploadGame(_0x2ee4df){const _0x34951f=a0_0xd54f31,_0x778e3a=_0x2ee4df[_0x34951f(0x99)][0x0];Module[_0x34951f(0xbe)](_0x778e3a,()=>{const _0xe4102f=_0x34951f;Module[_0xe4102f(0x8a)]();});}function a0_0x3626(){const _0x121f80=['/data/states/','innerWidth','#E0C068','\x20time(s)','.png','_savedCheats','padStart','application/octet-stream','Off','getElementById','272eDUgEe','resumeGame','visible','uploadSaveOrSaveState','type','FSSync','disable','log','createObjectURL','5RmHNhq','loadState','_dateState','1183068RQOLrW','add','classList','turboState','downloadFile','addEventListener','listStates','visibilityState','files','.gb','textContent','gbc','includes','now','editFileName','error','1HNgRnv','Auto\x20save\x20','screenshot','autoLoadCheats','Resumed!','saveState','pagehide','getItem','/data/screenshots/','_dateState0','toString','endsWith','screenSize','FSInit','Cheat\x20uploaded\x20successfully:','#20A5A6','No\x20screenshot!','Error\x20uploadCheat:','/data/games/','bottom','Save/State\x20uploaded\x20successfully:','uploadCheats','28651ngPKSX','.ss0','Do\x20you\x20want\x20to\x20load\x20save\x20state?','setItem','Unable\x20to\x20upload\x20to\x20Cloud!','Online!','setFastForwardMultiplier','uploadRom','href','then','buttonPress','replace','31628XLgkvA','loadGame','slotStateSaved','listCheats','deleteFile','_imageState0','581738gEJdZC','.gba','_imageState','326415tbTBgj','beforeunload','Error\x20uploadSavSta:','SDL2','listSaves','name','gameName','2222721IzbgvV','0,0,','1567610XIePps','.gbc','_slot0.txt','remove','hidden','revokeObjectURL','control-setting','style','timer'];a0_0x3626=function(){return _0x121f80;};return a0_0x3626();}export async function loadGame(_0x3750fa){const _0x220e3f=a0_0xd54f31,_0x497b45=_0x3750fa[_0x220e3f(0xc2)](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x31b835=Module[_0x220e3f(0x97)]();intro[_0x220e3f(0x93)][_0x220e3f(0x92)](_0x220e3f(0x8b)),errorLogElements[0x0][_0x220e3f(0xdc)][_0x220e3f(0xb4)]='0',ingame[_0x220e3f(0x93)][_0x220e3f(0xd8)](_0x220e3f(0x8b)),_0x3750fa[_0x220e3f(0xac)](_0x220e3f(0xd6))||_0x3750fa[_0x220e3f(0xac)](_0x220e3f(0x9a))?(canvas['classList'][_0x220e3f(0x92)](_0x220e3f(0x9c)),areaTrans[_0x220e3f(0x93)][_0x220e3f(0x92)]('gbc1'),localStorage['setItem'](_0x220e3f(0xad),_0x220e3f(0xd4)+(window[_0x220e3f(0x7c)]-0xe6)+','+(window[_0x220e3f(0x7c)]-0xe6)*0x9/0xa)):localStorage[_0x220e3f(0xba)](_0x220e3f(0xad),'0,0,'+(window[_0x220e3f(0x7c)]-0x96)+','+(window[_0x220e3f(0x7c)]-0x96)*0x2/0x3),_0x31b835[_0x220e3f(0x9d)](_0x497b45)?(await Module[_0x220e3f(0xc4)](_0x220e3f(0xb3)+_0x3750fa),confirm(_0x220e3f(0xb9))&&(await Module['loadState'](0x0),localStorage[_0x220e3f(0xba)](_0x220e3f(0xd2),_0x3750fa),console[_0x220e3f(0x8c)](_0x3750fa))):(await Module[_0x220e3f(0xc4)](_0x220e3f(0xb3)+_0x3750fa),localStorage[_0x220e3f(0xba)]('gameName',_0x3750fa)),await statusShow();}export async function saveState(_0x2edf24){const _0x190815=a0_0xd54f31;await Module[_0x190815(0xa6)](_0x2edf24),await Module['FSSync']();}export async function loadState(_0x2e329c){const _0x1203c6=a0_0xd54f31;await Module[_0x1203c6(0x8f)](_0x2e329c);}export async function downloadFile(_0x499033,_0x2edd95){const _0x3c545c=a0_0xd54f31,_0x3ce44b=Module['downloadFile'](_0x499033),_0x48d355=document['createElement']('a');document['body']['appendChild'](_0x48d355),_0x48d355['download']=_0x2edd95;const _0x2df219=new Blob([_0x3ce44b],{'type':_0x3c545c(0x82)});_0x48d355[_0x3c545c(0xbf)]=URL[_0x3c545c(0x8d)](_0x2df219),_0x48d355['click'](),URL[_0x3c545c(0xda)](_0x2df219),_0x48d355[_0x3c545c(0xd8)]();}export function downloadFileInCloud(_0x5757a1){const _0x3626e2=a0_0xd54f31,_0x2543e1=Module[_0x3626e2(0x95)](_0x5757a1);return _0x2543e1;}export async function uploadFile(_0x2e906f){const _0x3f4ffe=a0_0xd54f31,_0x1031a2=_0x2e906f['files'][0x0];Module[_0x3f4ffe(0x88)](_0x1031a2,()=>{const _0x49a3ce=_0x3f4ffe;Module[_0x49a3ce(0x8a)]();});}export async function editFile(_0xec08b4,_0x10c757,_0x57b86e){const _0x3acb70=a0_0xd54f31;await Module[_0x3acb70(0x9f)](_0xec08b4,_0x10c757,_0x57b86e),await Module[_0x3acb70(0x8a)]();}export async function deleteFile(_0x459f6e){const _0x15d749=a0_0xd54f31;await Module[_0x15d749(0xc7)](_0x459f6e),await Module[_0x15d749(0x8a)]();}export function listGame(){const _0x24372c=Module['listGames']();return _0x24372c;}export function listSave(){const _0x20be5f=a0_0xd54f31,_0x32c44b=Module[_0x20be5f(0xd0)]();return _0x32c44b;}export function listState(){const _0x55390b=a0_0xd54f31,_0x37b4af=Module[_0x55390b(0x97)]();return _0x37b4af;}export function listCheat(){const _0x4af9d3=a0_0xd54f31,_0xfde308=Module[_0x4af9d3(0xc6)]();return _0xfde308;}export function listScreenshot(){const _0x1fedfa=Module['listScreenshots']();return _0x1fedfa;}export function fileSize(_0x276604){const _0x1b21b0=Module['fileSize'](_0x276604);return _0x1b21b0;}export async function uploadCheat(_0x2f3733){const _0x400a39=a0_0xd54f31;try{const _0x57e5b1=_0x2f3733[_0x400a39(0x99)][0x0];await Module[_0x400a39(0xb6)](_0x57e5b1,()=>{const _0x58fc48=_0x400a39;console[_0x58fc48(0x8c)](_0x58fc48(0xaf),_0x57e5b1[_0x58fc48(0xd1)]),localStorageFile(),Module['FSSync']();});}catch(_0x425a7b){console['error'](_0x400a39(0xb2),_0x425a7b);}}export async function uploadSavSta(_0x5edf3f){const _0x1fc1c1=a0_0xd54f31;try{const _0x1993e1=_0x5edf3f[_0x1fc1c1(0x99)][0x0];await Module[_0x1fc1c1(0x88)](_0x1993e1,()=>{const _0x233bea=_0x1fc1c1;console['log'](_0x233bea(0xb5),_0x1993e1[_0x233bea(0xd1)]),localStorageFile(),Module['FSSync']();});}catch(_0x3241a8){console[_0x1fc1c1(0xa0)](_0x1fc1c1(0xce),_0x3241a8);}}export async function uploadSaveOrSaveState(_0x470c95){Module['uploadSaveOrSaveState'](_0x470c95,()=>{const _0x6cd25b=a0_0xf79f;localStorageFile(),Module[_0x6cd25b(0x8a)]();});}export async function resumeGame(){const _0x2c0208=a0_0xd54f31;Module[_0x2c0208(0x86)](),Module[_0x2c0208(0xcf)](),notiMessage(_0x2c0208(0xa5),0x7d0);}export async function pauseGame(){const _0x161e35=a0_0xd54f31;Module['pauseGame'](),Module[_0x161e35(0xcf)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x10367b){const _0xc6e49a=a0_0xd54f31;Module[_0xc6e49a(0xc1)](_0x10367b);}function a0_0xf79f(_0x199f33,_0x1a84c7){const _0x362691=a0_0x3626();return a0_0xf79f=function(_0xf79f50,_0x9280f0){_0xf79f50=_0xf79f50-0x7c;let _0x219206=_0x362691[_0xf79f50];return _0x219206;},a0_0xf79f(_0x199f33,_0x1a84c7);}export async function buttonUnpress(_0x4fcc21){Module['buttonUnpress'](_0x4fcc21);}export async function screenShot(_0x2ede9a){const _0x1e6619=a0_0xd54f31,_0x304e1e=localStorage[_0x1e6619(0xa8)](_0x1e6619(0xd2)),_0x34fbd7=_0x304e1e[_0x1e6619(0xc2)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x1e6619(0xa3)](''+_0x34fbd7+_0x2ede9a+_0x1e6619(0x7f)),await Module[_0x1e6619(0x8a)]();const _0x25a7b6=await fileToBase64(Module[_0x1e6619(0x95)](_0x1e6619(0xa9)+_0x34fbd7+_0x2ede9a+_0x1e6619(0x7f))),_0x8512e5=Date[_0x1e6619(0x9e)](),_0x38d6e5=formatDateTime(_0x8512e5);localStorage['setItem'](_0x304e1e+_0x1e6619(0x90)+_0x2ede9a,_0x38d6e5),localStorage[_0x1e6619(0xba)](_0x304e1e+_0x1e6619(0xcb)+_0x2ede9a,_0x25a7b6);}export async function captureOCR(_0x592869){const _0x1e314f=a0_0xd54f31;Module['screenshot'](_0x592869);const _0x486a25=Module['downloadFile'](_0x1e314f(0xa9)+_0x592869);return _0x486a25;}export async function setFastForwardMultiplier(_0x25980c){const _0x42c118=a0_0xd54f31;Module[_0x42c118(0xbd)](_0x25980c);}export function uploadCheats(_0x11a88a,_0x1da4b0,_0xb02926,_0x5451d4,_0xb2855e){const _0x130423=a0_0xd54f31;Module[_0x130423(0xb6)](_0x11a88a,()=>{const _0xa62791=_0x130423;Module[_0xa62791(0xa4)](),setTimeout(()=>{Module['FSSync']();},0x1f4),_0x5451d4&&(localStorage['setItem'](_0x1da4b0+'_savedCheats',_0xb02926),notiMessage('Cheat\x20Enabled!',0x5dc)),_0xb2855e[_0xa62791(0x9b)]=localStorage[_0xa62791(0xa8)](_0x1da4b0+_0xa62791(0x80)||_0xa62791(0x83));});}