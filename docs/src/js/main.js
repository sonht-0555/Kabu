const a0_0x242799=a0_0x20b9;(function(_0x3ff9e3,_0x120a0d){const _0x21d97a=a0_0x20b9,_0x32a493=_0x3ff9e3();while(!![]){try{const _0x2fef26=parseInt(_0x21d97a(0x165))/0x1+-parseInt(_0x21d97a(0x15b))/0x2+parseInt(_0x21d97a(0x140))/0x3*(parseInt(_0x21d97a(0x178))/0x4)+-parseInt(_0x21d97a(0x15e))/0x5+-parseInt(_0x21d97a(0x12e))/0x6*(-parseInt(_0x21d97a(0x185))/0x7)+-parseInt(_0x21d97a(0x16b))/0x8*(parseInt(_0x21d97a(0x153))/0x9)+parseInt(_0x21d97a(0x13f))/0xa;if(_0x2fef26===_0x120a0d)break;else _0x32a493['push'](_0x32a493['shift']());}catch(_0x4a8f01){_0x32a493['push'](_0x32a493['shift']());}}}(a0_0x1d37,0x56935));import a0_0x5af599 from'../core/mgba.js';import*as a0_0x4e5fa6 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';function a0_0x1d37(){const _0x4ed558=['disable','246XPfRzj','revokeObjectURL','createObjectURL','charCodeAt','turboF','/data/states/','encode','filter','/data/screenshots/','downloadFile','body','pagehide','set','innerWidth','gbc','Cloud\x20upload\x20','href','8513170tLqPNi','12063XzSpzQ','/data/games/','canvas','Resumed!','buttonUnpress','beforeunload','files','now','_savedCheats','contains','style','visible','getElementById','deleteFile','listScreenshots','hidden','replace','.png','type','27yfggID','#20A5A6','screenSize','listStates','setFastForwardMultiplier','resumeGame','loadGame','setItem','1282434QDUYqL','image/png','remove','339450vyoalb','length','editFileName','padStart','onLine','listSaves','persisted','396516WmVkBQ','tEXtComment\x00','endsWith','Do\x20you\x20want\x20to\x20load\x20save\x20state?','uploadAll','setVolume','1519032qzcLPM','addEventListener','SDL2','saveState','FSSync','0,0,','control-setting','indexOf','timer','FSInit','appendChild','Cheat\x20Enabled!','turboState','220kggByg','getItem','loadState','pauseGame','#E0C068','textContent','listCheats','\x20time(s)','screenshot','add','includes','state','.gbc','28063WWqcjM','split','classList','log','.ss0','toString','uploadRom','gameName'];a0_0x1d37=function(){return _0x4ed558;};return a0_0x1d37();}const Module={'canvas':document[a0_0x242799(0x14c)](a0_0x242799(0x142))};function initializeCore(_0x11d4b6,_0x377a14){_0x11d4b6(_0x377a14)['then'](function(_0x476c0b){const _0x39f1dc=a0_0x20b9;_0x476c0b[_0x39f1dc(0x174)]();});}initializeCore(a0_0x5af599,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x242799(0x14c)]('canvas'),savedTurboState=localStorage[a0_0x242799(0x179)](a0_0x242799(0x177)),controlSetting=document[a0_0x242799(0x14c)](a0_0x242799(0x171));function handleVisibilityChange(_0x4774c7){const _0x458c55=a0_0x242799;document['visibilityState']===_0x458c55(0x14f)||_0x4774c7?.[_0x458c55(0x152)]===_0x458c55(0x145)||_0x4774c7?.[_0x458c55(0x164)]?(pauseGame(),canvas['classList']['add'](_0x458c55(0x14b))):(setTimeout(()=>{const _0x5b8f90=_0x458c55;canvas[_0x5b8f90(0x127)][_0x5b8f90(0x15d)](_0x5b8f90(0x14b));},0x258),controlSetting[_0x458c55(0x127)][_0x458c55(0x149)](_0x458c55(0x14b))&&resumeGame());}async function statusShow(){const _0x1a5eea=a0_0x242799;document[_0x1a5eea(0x16c)](_0x1a5eea(0x139),handleVisibilityChange),document[_0x1a5eea(0x16c)]('visibilitychange',handleVisibilityChange),window[_0x1a5eea(0x16c)](_0x1a5eea(0x145),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x4e5fa6[_0x1a5eea(0x132)](turboState)),await delay(0xc8),await Module[_0x1a5eea(0x16d)](),await delay(0x320),await led(parseInt(localStorage[_0x1a5eea(0x179)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0xba6cbf=a0_0x242799;await ledSave(_0xba6cbf(0x154)),await Module[_0xba6cbf(0x16e)](0x0),await Module[_0xba6cbf(0x16f)](),await screenShot(0x0),console[_0xba6cbf(0x128)]('Auto\x20save\x20'+ ++countAutoSave+_0xba6cbf(0x17f));}async function saveStateInCloud(){const _0x5dfe61=a0_0x242799,_0x46fc95=localStorage[_0x5dfe61(0x179)](_0x5dfe61(0x12c)),_0x1c7f09=_0x46fc95[_0x5dfe61(0x150)](/\.(zip|gb|gbc|gba)$/,_0x5dfe61(0x129)),_0x3fc99c=localStorage[_0x5dfe61(0x179)]('uId');navigator[_0x5dfe61(0x162)]&&(_0x3fc99c&&(await ledSave(_0x5dfe61(0x17c)),await delay(0x3e8),await dpUploadFile(_0x1c7f09,Module[_0x5dfe61(0x137)](_0x5dfe61(0x133)+_0x1c7f09),_0x5dfe61(0x183)),await lockNoti('',_0x5dfe61(0x13d)+ ++countUpload+_0x5dfe61(0x17f),0x7d0)));}function startTimer(){let [_0xb45671,_0x20e59a,_0x39b7af,_0x108488,_0xa5d34c]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x1730b9=a0_0x20b9;_0x39b7af++,_0x108488++,_0xa5d34c++;if(_0x39b7af===0x3c)[_0x39b7af,_0x20e59a]=[0x0,_0x20e59a+0x1];if(_0x20e59a===0x3c)[_0x20e59a,_0xb45671]=[0x0,_0xb45671+0x1];document[_0x1730b9(0x14c)](_0x1730b9(0x173))[_0x1730b9(0x17d)]=_0xb45671+'h'+_0x20e59a[_0x1730b9(0x12a)]()[_0x1730b9(0x161)](0x2,'0')+'.'+_0x39b7af[_0x1730b9(0x12a)]()[_0x1730b9(0x161)](0x2,'0');_0x108488===0x3c&&(saveStatePeriodically(),_0x108488=0x0);;_0xa5d34c===0x708&&(saveStateInCloud(),_0xa5d34c=0x0);;},0x3e8);}export async function uploadGame(_0x1d4924){const _0x23d004=a0_0x242799,_0x513e6b=_0x1d4924[_0x23d004(0x146)][0x0];Module[_0x23d004(0x12b)](_0x513e6b,()=>{const _0x52c2c9=_0x23d004;Module[_0x52c2c9(0x16f)]();});}export async function loadGame(_0x5a7cb8){const _0x450dec=a0_0x242799,_0x3676b5=_0x5a7cb8[_0x450dec(0x150)](/\.(gba|gbc|gb|zip)$/,_0x450dec(0x129)),_0x3844d9=Module[_0x450dec(0x156)]()['filter'](_0x5180a8=>_0x5180a8!=='.'&&_0x5180a8!=='..');intro[_0x450dec(0x127)]['add'](_0x450dec(0x12d)),errorLogElements[0x0][_0x450dec(0x14a)]['bottom']='0',ingame['classList'][_0x450dec(0x15d)](_0x450dec(0x12d)),_0x5a7cb8[_0x450dec(0x167)](_0x450dec(0x184))||_0x5a7cb8[_0x450dec(0x167)]('.gb')?(canvas[_0x450dec(0x127)][_0x450dec(0x181)](_0x450dec(0x13c)),areaTrans[_0x450dec(0x127)][_0x450dec(0x181)]('gbc1'),localStorage[_0x450dec(0x15a)](_0x450dec(0x155),_0x450dec(0x170)+(window[_0x450dec(0x13b)]-0xe6)+','+(window[_0x450dec(0x13b)]-0xe6)*0x9/0xa)):localStorage[_0x450dec(0x15a)](_0x450dec(0x155),_0x450dec(0x170)+(window[_0x450dec(0x13b)]-0x96)+','+(window[_0x450dec(0x13b)]-0x96)*0x2/0x3),_0x3844d9[_0x450dec(0x182)](_0x3676b5)?(await Module['loadGame']('/data/games/'+_0x5a7cb8),confirm(_0x450dec(0x168))&&(await Module[_0x450dec(0x17a)](0x0),localStorage['setItem'](_0x450dec(0x12c),_0x5a7cb8),console['log'](_0x5a7cb8))):(await Module[_0x450dec(0x159)](_0x450dec(0x141)+_0x5a7cb8),localStorage[_0x450dec(0x15a)](_0x450dec(0x12c),_0x5a7cb8),console[_0x450dec(0x128)](_0x5a7cb8)),await statusShow();}export async function saveState(_0x4d6c90){const _0x5c8f35=a0_0x242799;await Module[_0x5c8f35(0x16e)](_0x4d6c90),await Module['FSSync']();}export async function loadState(_0x44dbcf){await Module['loadState'](_0x44dbcf);}function a0_0x20b9(_0x4813d8,_0x537c64){const _0x1d3763=a0_0x1d37();return a0_0x20b9=function(_0x20b918,_0x478e7c){_0x20b918=_0x20b918-0x126;let _0x28b0b4=_0x1d3763[_0x20b918];return _0x28b0b4;},a0_0x20b9(_0x4813d8,_0x537c64);}export async function downloadFile(_0x5cf29b,_0x5b6f8a){const _0x1f6f48=a0_0x242799,_0x59ec14=Module['downloadFile'](_0x5cf29b),_0x2b4f17=document['createElement']('a');document[_0x1f6f48(0x138)][_0x1f6f48(0x175)](_0x2b4f17),_0x2b4f17['download']=_0x5b6f8a;const _0x1f76a4=new Blob([_0x59ec14],{'type':'application/octet-stream'});_0x2b4f17[_0x1f6f48(0x13e)]=URL[_0x1f6f48(0x130)](_0x1f76a4),_0x2b4f17['click'](),URL[_0x1f6f48(0x12f)](_0x1f76a4),_0x2b4f17['remove']();}export function downloadFileInCloud(_0x21696e){const _0x1a7dcf=a0_0x242799,_0xd8b610=Module[_0x1a7dcf(0x137)](_0x21696e);return _0xd8b610;}export async function uploadFileInCloud(_0x810892){const _0x830ff6=a0_0x242799;Module[_0x830ff6(0x169)](_0x810892,()=>{const _0x8e1c5c=_0x830ff6;localStorageFile(),Module[_0x8e1c5c(0x16f)]();});}export async function uploadFile(_0x5ddf0b){const _0x1d4f8a=a0_0x242799,_0x4f6fe5=_0x5ddf0b[_0x1d4f8a(0x146)][0x0];Module[_0x1d4f8a(0x169)](_0x4f6fe5,()=>{const _0x1cccba=_0x1d4f8a;localStorageFile(),Module[_0x1cccba(0x16f)]();});}export async function editFile(_0x4df2bd,_0x40da55,_0x5ae5f4){const _0x3e6bc5=a0_0x242799;await Module[_0x3e6bc5(0x160)](_0x4df2bd,_0x40da55,_0x5ae5f4),await Module[_0x3e6bc5(0x16f)]();}export async function deleteFile(_0xe601bd){const _0x4fcb5b=a0_0x242799;await Module[_0x4fcb5b(0x14d)](_0xe601bd),await Module[_0x4fcb5b(0x16f)]();}export function listGame(){const _0x3d3b9d=a0_0x242799,_0x3e5ce9=Module['listRoms']()[_0x3d3b9d(0x135)](_0x267b1b=>_0x267b1b!=='.'&&_0x267b1b!=='..');return _0x3e5ce9;}export function listSave(){const _0x4b0672=a0_0x242799,_0x58867e=Module[_0x4b0672(0x163)]()[_0x4b0672(0x135)](_0x5c554d=>_0x5c554d!=='.'&&_0x5c554d!=='..');return _0x58867e;}export function listState(){const _0x3683a8=a0_0x242799,_0x2b3e3a=Module[_0x3683a8(0x156)]()[_0x3683a8(0x135)](_0x2de118=>_0x2de118!=='.'&&_0x2de118!=='..');return _0x2b3e3a;}export function listCheat(){const _0x4fcdc8=a0_0x242799,_0x592b8e=Module[_0x4fcdc8(0x17e)]()[_0x4fcdc8(0x135)](_0x282b93=>_0x282b93!=='.'&&_0x282b93!=='..');return _0x592b8e;}export function listScreenshot(){const _0x480337=a0_0x242799,_0x174737=Module[_0x480337(0x14e)]()[_0x480337(0x135)](_0x17df8d=>_0x17df8d!=='.'&&_0x17df8d!=='..');return _0x174737;}export function embedTextInPngFile(_0x507e04,_0x116aa4,_0x460600){const _0x5cfafb=a0_0x242799;let _0x4a1760=atob(_0x507e04[_0x5cfafb(0x126)](',')[0x1]),_0x3cd88b=new Uint8Array(_0x4a1760['length']);for(let _0x5c8c96=0x0;_0x5c8c96<_0x4a1760['length'];_0x5c8c96++){_0x3cd88b[_0x5c8c96]=_0x4a1760[_0x5cfafb(0x131)](_0x5c8c96);}let _0x2cad0c=new TextEncoder()[_0x5cfafb(0x134)](_0x5cfafb(0x166)+_0x116aa4),_0x47149c=new Uint8Array(_0x3cd88b[_0x5cfafb(0x15f)]+_0x2cad0c[_0x5cfafb(0x15f)]);_0x47149c[_0x5cfafb(0x13a)](_0x3cd88b,0x0),_0x47149c[_0x5cfafb(0x13a)](_0x2cad0c,_0x3cd88b[_0x5cfafb(0x15f)]);let _0x3c8445=new Blob([_0x47149c],{'type':_0x5cfafb(0x15c)}),_0x3b605b=new File([_0x3c8445],_0x460600,{'type':_0x5cfafb(0x15c)});return _0x3b605b;}export function extractTextFromPngBase64(_0x2f811c){const _0x5b012e=a0_0x242799;let _0x10a43c=atob(_0x2f811c[_0x5b012e(0x126)](',')[0x1]),_0x36b16a='tEXtComment\x00',_0x4401f2=_0x10a43c[_0x5b012e(0x172)](_0x36b16a);if(_0x4401f2!==-0x1)return _0x10a43c['substring'](_0x4401f2+_0x36b16a[_0x5b012e(0x15f)]);return null;}export function fileSize(_0x267cb9){const _0x5ab9b4=Module['fileSize'](_0x267cb9);return _0x5ab9b4;}export async function resumeGame(){const _0x21a430=a0_0x242799;Module[_0x21a430(0x158)](),Module[_0x21a430(0x16d)](),notiMessage(_0x21a430(0x143),0x7d0);}export async function pauseGame(){const _0x4e9ffa=a0_0x242799;Module[_0x4e9ffa(0x17b)](),Module[_0x4e9ffa(0x16d)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x89cee7){Module['buttonPress'](_0x89cee7);}export async function buttonUnpress(_0x34a811){const _0x336db7=a0_0x242799;Module[_0x336db7(0x144)](_0x34a811);}export async function screenShot(_0x57013b){const _0xdc88d3=a0_0x242799,_0x1d6f58=localStorage[_0xdc88d3(0x179)](_0xdc88d3(0x12c))[_0xdc88d3(0x150)](/\.(gba|gbc|gb|zip)$/,''),_0x3a377c=_0x1d6f58+'_'+_0x57013b+_0xdc88d3(0x151);await Module[_0xdc88d3(0x180)](_0x3a377c),await Module[_0xdc88d3(0x16f)]();const _0x1aa033=await fileToBase64(Module[_0xdc88d3(0x137)](_0xdc88d3(0x136)+_0x3a377c)),_0x4da1a2=embedTextInPngFile(_0x1aa033,formatDateTime(Date[_0xdc88d3(0x147)]()),_0x3a377c);Module['uploadAll'](_0x4da1a2,()=>{const _0x2a7637=_0xdc88d3;localStorageFile(),Module[_0x2a7637(0x16f)]();});}export async function dowloadScreenShot(_0x1941ee){const _0x42dae1=a0_0x242799;try{const _0x2e11ab=await fileToBase64(Module[_0x42dae1(0x137)](_0x1941ee));return _0x2e11ab;}catch{}}export async function captureOCR(_0x406571){const _0x61ab49=a0_0x242799;Module['screenshot'](_0x406571);const _0xb30b0a=Module[_0x61ab49(0x137)]('/data/screenshots/'+_0x406571);return _0xb30b0a;}export async function setFastForwardMultiplier(_0x5e311a){const _0x220e87=a0_0x242799;Module[_0x220e87(0x157)](_0x5e311a);}export function uploadCheats(_0x507b9d,_0x51b12f,_0x13fca6,_0x20c390,_0x490cbf){const _0x5b496d=a0_0x242799;Module[_0x5b496d(0x169)](_0x507b9d,()=>{const _0x3c1dab=_0x5b496d;Module['autoLoadCheats'](),setTimeout(()=>{const _0x1ec6c4=a0_0x20b9;Module[_0x1ec6c4(0x16f)]();},0x1f4),_0x20c390&&(localStorage[_0x3c1dab(0x15a)](_0x51b12f+_0x3c1dab(0x148),_0x13fca6),notiMessage(_0x3c1dab(0x176),0x5dc)),_0x490cbf[_0x3c1dab(0x17d)]=localStorage[_0x3c1dab(0x179)](_0x51b12f+_0x3c1dab(0x148)||'Off');});}export function setVolume(_0x55ac8b){const _0x1ea134=a0_0x242799;Module[_0x1ea134(0x16a)](_0x55ac8b);}