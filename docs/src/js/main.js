const a0_0x4f48b5=a0_0x5d5b;(function(_0x25798b,_0x37ee10){const _0x3a3898=a0_0x5d5b,_0x28e5ca=_0x25798b();while(!![]){try{const _0xfe97ca=-parseInt(_0x3a3898(0x1a7))/0x1+parseInt(_0x3a3898(0x1be))/0x2*(-parseInt(_0x3a3898(0x1c0))/0x3)+-parseInt(_0x3a3898(0x197))/0x4+-parseInt(_0x3a3898(0x17c))/0x5*(-parseInt(_0x3a3898(0x16c))/0x6)+parseInt(_0x3a3898(0x1b4))/0x7*(-parseInt(_0x3a3898(0x1b7))/0x8)+parseInt(_0x3a3898(0x1cb))/0x9*(parseInt(_0x3a3898(0x18e))/0xa)+parseInt(_0x3a3898(0x1b5))/0xb;if(_0xfe97ca===_0x37ee10)break;else _0x28e5ca['push'](_0x28e5ca['shift']());}catch(_0x54cea1){_0x28e5ca['push'](_0x28e5ca['shift']());}}}(a0_0x52e5,0xc626d));import a0_0x28710c from'../core/mgba.js';import*as a0_0x1fa03f from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const Module={'canvas':document[a0_0x4f48b5(0x1d7)](a0_0x4f48b5(0x1bf))};function initializeCore(_0x3de4d4,_0x2c8fc2){const _0x558470=a0_0x4f48b5;_0x3de4d4(_0x2c8fc2)[_0x558470(0x179)](function(_0xa95168){const _0x1c7dec=_0x558470;_0xa95168[_0x1c7dec(0x1ca)]();});}initializeCore(a0_0x28710c,Module);function a0_0x52e5(){const _0x27b8f6=['Paused!','exec','addEventListener','uId','downloadFile','match','disable','led0','\x20|\x20','then','#E0C068','visibilityState','85Smilav','control-setting','type','includes','body','substring','tEXtComment\x00','\x20time(s)','length','gbc1','turboState','pagehide','visible','Cloud\x20upload\x20','screenshot','persisted','FSSync','listStates','2465170jyjSyF','error','href','toString','led01','log','Auto\x20save\x20','led07','fill','4377452drLGDN','/data/games/','classList','/data/states/','slotStateSaved','gbc','replace','Error\x20ledSave:','turboF','image/png','innerWidth','setVolume','noti-mess','createElement','application/octet-stream','hidden','789109sliZQS','Do\x20you\x20want\x20to\x20load\x20save\x20state?','All','split','.ss0','getItem','#20A5A6','setFastForwardMultiplier','revokeObjectURL','filter','0,0,','indexOf','fileSize','5260171wdBwwk','37119137HyAOdq','.png','16LFCxND','rgba(245,\x20232,\x20209,\x200.4)','remove','led05','/data/screenshots/','beforeunload','SDL2','4976CfnZLl','canvas','1398OjNMgy','setItem','led02','screenSize','add','visibilitychange','timer','concat','resumeGame','opacity','FSInit','27JKTKlp','led00','buttonPress','saveState','uploadAll','state','saveTime','endsWith','loadState','listRoms','trim','Resumed!','getElementById','style','entries','editFileName','map','0.4','join','appendChild','uploadRom','lastIndexOf','.gbc','textContent','438846lThUuZ','padStart','files','led04'];a0_0x52e5=function(){return _0x27b8f6;};return a0_0x52e5();}let countAutoSave=0x0,countUpload=0x0;function a0_0x5d5b(_0x1a732,_0x3a46c8){const _0x52e593=a0_0x52e5();return a0_0x5d5b=function(_0x5d5bb5,_0x399ffc){_0x5d5bb5=_0x5d5bb5-0x166;let _0x4d7ae8=_0x52e593[_0x5d5bb5];return _0x4d7ae8;},a0_0x5d5b(_0x1a732,_0x3a46c8);}const canvas=document[a0_0x4f48b5(0x1d7)](a0_0x4f48b5(0x1bf)),controlSetting=document['getElementById'](a0_0x4f48b5(0x17d));function handleVisibilityChange(_0x1d381d){const _0x53bc84=a0_0x4f48b5;document[_0x53bc84(0x17b)]===_0x53bc84(0x1a6)||_0x1d381d?.[_0x53bc84(0x17e)]==='beforeunload'||_0x1d381d?.[_0x53bc84(0x18b)]?(Module['FSSync'](),pauseGame(),canvas[_0x53bc84(0x199)]['add'](_0x53bc84(0x188))):(setTimeout(()=>{const _0x5675df=_0x53bc84;canvas[_0x5675df(0x199)][_0x5675df(0x1b9)](_0x5675df(0x188));},0x258),controlSetting[_0x53bc84(0x199)]['contains'](_0x53bc84(0x188))&&resumeGame());}async function statusShow(){const _0x338a1c=a0_0x4f48b5;document[_0x338a1c(0x172)](_0x338a1c(0x187),handleVisibilityChange),document[_0x338a1c(0x172)](_0x338a1c(0x1c5),handleVisibilityChange),window[_0x338a1c(0x172)](_0x338a1c(0x1bc),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x1fa03f[_0x338a1c(0x19f)](parseInt(await getData(gameName,'0',_0x338a1c(0x186)))),await delay(0xc8),await Module[_0x338a1c(0x1bd)](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x338a1c(0x19b)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x4189ab=a0_0x4f48b5;await ledSave(_0x4189ab(0x1ad)),await Module[_0x4189ab(0x1ce)](0x0),await Module[_0x4189ab(0x18c)](),await screenShot(0x0),console['log'](_0x4189ab(0x194)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x1e9ec6=a0_0x4f48b5,_0x4b0d33=gameName[_0x1e9ec6(0x19d)](/\.(zip|gb|gbc|gba)$/,_0x1e9ec6(0x1ab)),_0x1ceaf5=localStorage[_0x1e9ec6(0x1ac)](_0x1e9ec6(0x173));navigator['onLine']&&(_0x1ceaf5&&(await ledSave(_0x1e9ec6(0x17a)),await delay(0x3e8),await dpUploadFile(_0x4b0d33,Module[_0x1e9ec6(0x174)](_0x1e9ec6(0x19a)+_0x4b0d33),_0x1e9ec6(0x1d0)),await lockNoti('',_0x1e9ec6(0x189)+ ++countUpload+_0x1e9ec6(0x183),0x7d0)));}function startTimer(){let [_0x58c71c,_0x793e4a,_0x29d2c5,_0x22af74,_0x53bedb]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x56fa6b=a0_0x5d5b;_0x29d2c5++,_0x22af74++,_0x53bedb++;if(_0x29d2c5===0x3c)[_0x29d2c5,_0x793e4a]=[0x0,_0x793e4a+0x1];if(_0x793e4a===0x3c)[_0x793e4a,_0x58c71c]=[0x0,_0x58c71c+0x1];document[_0x56fa6b(0x1d7)](_0x56fa6b(0x1c6))['textContent']=_0x58c71c+'h'+_0x793e4a[_0x56fa6b(0x191)]()[_0x56fa6b(0x16d)](0x2,'0')+'.'+_0x29d2c5[_0x56fa6b(0x191)]()[_0x56fa6b(0x16d)](0x2,'0');_0x22af74===0x3c&&(saveStatePeriodically(),_0x22af74=0x0);;_0x53bedb===0x708&&(saveStateInCloud(),_0x53bedb=0x0);;},0x3e8);}export async function uploadGame(_0x2fe08d){const _0x53d89=a0_0x4f48b5,_0x127e5c=_0x2fe08d['files'][0x0];Module[_0x53d89(0x168)](_0x127e5c,()=>{const _0x2b31d7=_0x53d89;Module[_0x2b31d7(0x18c)]();});}export async function loadGame(_0x37cdb7){const _0x1a7f6d=a0_0x4f48b5,_0x631703=_0x37cdb7[_0x1a7f6d(0x19d)](/\.(gba|gbc|gb|zip)$/,_0x1a7f6d(0x1ab)),_0xcdce8b=Module['listStates']()[_0x1a7f6d(0x1b0)](_0x429c60=>_0x429c60!=='.'&&_0x429c60!=='..');intro[_0x1a7f6d(0x199)]['add'](_0x1a7f6d(0x176)),errorLogElements[0x0]['style']['bottom']='0',ingame[_0x1a7f6d(0x199)][_0x1a7f6d(0x1b9)](_0x1a7f6d(0x176)),_0x37cdb7[_0x1a7f6d(0x1d2)](_0x1a7f6d(0x16a))||_0x37cdb7[_0x1a7f6d(0x1d2)]('.gb')?(canvas['classList'][_0x1a7f6d(0x1c4)](_0x1a7f6d(0x19c)),areaTrans[_0x1a7f6d(0x199)]['add'](_0x1a7f6d(0x185)),localStorage[_0x1a7f6d(0x1c1)]('screenSize',_0x1a7f6d(0x1b1)+(window['innerWidth']-0xe6)+','+(window[_0x1a7f6d(0x1a1)]-0xe6)*0x9/0xa)):localStorage[_0x1a7f6d(0x1c1)](_0x1a7f6d(0x1c3),_0x1a7f6d(0x1b1)+(window['innerWidth']-0x96)+','+(window[_0x1a7f6d(0x1a1)]-0x96)*0x2/0x3),_0xcdce8b[_0x1a7f6d(0x17f)](_0x631703)?(await Module['loadGame'](_0x1a7f6d(0x198)+_0x37cdb7),confirm(_0x1a7f6d(0x1a8))&&(await Module['loadState'](0x0),await shaderData())):(await Module['loadGame'](_0x1a7f6d(0x198)+gameName),await shaderData()),await statusShow();}export async function saveState(_0x55a65a){const _0x3d5df0=a0_0x4f48b5;await Module[_0x3d5df0(0x1ce)](_0x55a65a);}export async function loadState(_0xe4932c){const _0x5cb157=a0_0x4f48b5;await Module[_0x5cb157(0x1d3)](_0xe4932c);}export async function downloadFile(_0x29fb4f,_0x42f300){const _0x360759=a0_0x4f48b5,_0x2036ce=Module['downloadFile'](_0x29fb4f),_0x422aeb=document[_0x360759(0x1a4)]('a');document[_0x360759(0x180)][_0x360759(0x167)](_0x422aeb),_0x422aeb['download']=_0x42f300;const _0x294c62=new Blob([_0x2036ce],{'type':_0x360759(0x1a5)});_0x422aeb[_0x360759(0x190)]=URL['createObjectURL'](_0x294c62),_0x422aeb['click'](),URL[_0x360759(0x1af)](_0x294c62),_0x422aeb['remove']();}export function downloadFileInCloud(_0x4d1b06){const _0x20a1a2=a0_0x4f48b5;try{const _0x56014e=Module[_0x20a1a2(0x174)](_0x4d1b06);return _0x56014e;}catch(_0x5db131){return null;}}export async function uploadFileInCloud(_0xe28dec){const _0x5764b0=a0_0x4f48b5;Module[_0x5764b0(0x1cf)](_0xe28dec,async()=>{localStorageFile(),await Module['FSSync']();});}export async function uploadFile(_0x56c326){const _0xf804f2=a0_0x4f48b5,_0x72e48b=_0x56c326[_0xf804f2(0x16e)][0x0];Module['uploadAll'](_0x72e48b,async()=>{localStorageFile(),await Module['FSSync']();});}export async function editFile(_0x4a2f55,_0x4ba124,_0x9fcfd3){const _0x38ed3=a0_0x4f48b5;await Module[_0x38ed3(0x1da)](_0x4a2f55,_0x4ba124,_0x9fcfd3);}export async function deleteFile(_0x44e2f7){const _0x4261ae=a0_0x4f48b5;try{return await Module['deleteFile'](_0x44e2f7),!![];}catch(_0x22273e){return console[_0x4261ae(0x18f)](_0x44e2f7),null;}}export function listGame(){const _0x12cc7e=a0_0x4f48b5,_0x21c9a7=Module[_0x12cc7e(0x1d4)]()[_0x12cc7e(0x1b0)](_0x5669b9=>_0x5669b9!=='.'&&_0x5669b9!=='..');return _0x21c9a7;}export function listSave(){const _0x1d38be=Module['listSaves']()['filter'](_0x5eea4b=>_0x5eea4b!=='.'&&_0x5eea4b!=='..');return _0x1d38be;}export function listState(){const _0x5acc29=a0_0x4f48b5,_0x48be88=Module[_0x5acc29(0x18d)]()['filter'](_0x1c0548=>_0x1c0548!=='.'&&_0x1c0548!=='..');return _0x48be88;}export function listCheat(){const _0x592bde=a0_0x4f48b5,_0x3aa345=Module['listCheats']()[_0x592bde(0x1b0)](_0x256801=>_0x256801!=='.'&&_0x256801!=='..');return _0x3aa345;}export function listScreenshot(){const _0x28c1ee=Module['listScreenshots']()['filter'](_0x3ef8bb=>_0x3ef8bb!=='.'&&_0x3ef8bb!=='..');return _0x28c1ee;}export function fileSize(_0x2918f4){const _0x52aa61=a0_0x4f48b5,_0x42452a=Module[_0x52aa61(0x1b3)](_0x2918f4);return _0x42452a;}export async function resumeGame(){const _0x288d72=a0_0x4f48b5;Module[_0x288d72(0x1c8)](),Module[_0x288d72(0x1bd)](),notiMessage(_0x288d72(0x1d6),0x7d0);}export async function pauseGame(){const _0x594440=a0_0x4f48b5;Module['pauseGame'](),Module[_0x594440(0x1bd)](),notiMessage(_0x594440(0x170),0x7d0);}export async function buttonPress(_0x5eb003){const _0x2c26ee=a0_0x4f48b5;Module[_0x2c26ee(0x1cd)](_0x5eb003);}export async function buttonUnpress(_0x2b2c71){Module['buttonUnpress'](_0x2b2c71);}export async function screenShot(_0x3c3287){const _0x54b928=a0_0x4f48b5,_0x20aa01=gameName[_0x54b928(0x19d)](/\.(gba|gbc|gb|zip)$/,'_'+_0x3c3287+_0x54b928(0x1b6)),_0x473eb2=await getData(gameName,_0x3c3287,_0x54b928(0x1a9))||'';console[_0x54b928(0x193)](_0x473eb2),await Module[_0x54b928(0x18a)](_0x20aa01),await setData(gameName,_0x3c3287,_0x54b928(0x1d1),formatDateTime(Date['now']()),_0x473eb2);}export async function dowloadScreenShot(_0x43b918){const _0x106178=a0_0x4f48b5;try{const _0x5044c8=await fileToBase64(Module[_0x106178(0x174)](_0x43b918));return _0x5044c8;}catch{}}export async function captureOCR(_0x2f6322){const _0x2107f1=a0_0x4f48b5;Module['screenshot'](_0x2f6322);const _0x3603e0=Module['downloadFile'](_0x2107f1(0x1bb)+_0x2f6322);return _0x3603e0;}export async function setFastForwardMultiplier(_0x459eb9){const _0x397be7=a0_0x4f48b5;Module[_0x397be7(0x1ae)](_0x459eb9);}export async function uploadCheats(_0x11efbb){Module['autoLoadCheats'](),Module['uploadAll'](_0x11efbb,async()=>{});}export function setVolume(_0x4b4bbd){const _0x2ad949=a0_0x4f48b5;Module[_0x2ad949(0x1a2)](_0x4b4bbd);}export async function setData(_0x30506c,_0x51ab82,_0xb9822d,_0x3c5927,_0x325024=''){const _0x3c9a1a=a0_0x4f48b5,_0x59d5c6=_0x30506c[_0x3c9a1a(0x19d)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x32907c='/data/screenshots/'+_0x59d5c6+'_'+_0x51ab82+'.png';let _0x71788f;try{_0x71788f=await fileToBase64(Module[_0x3c9a1a(0x174)](_0x32907c));}catch(_0x497dc3){await Module[_0x3c9a1a(0x18a)](_0x59d5c6+'_'+_0x51ab82+_0x3c9a1a(0x1b6)),await delay(0xc8),_0x71788f=await fileToBase64(Module[_0x3c9a1a(0x174)](_0x32907c));}let _0x36b546=atob(_0x71788f[_0x3c9a1a(0x1aa)](',')[0x1]),_0x24be79=_0x3c9a1a(0x182),_0x3de20a=_0x36b546[_0x3c9a1a(0x1b2)](_0x24be79),_0x5f1b5d={};if(_0x3de20a!==-0x1||_0x325024['trim']()!==''){let _0x165700=_0x3de20a!==-0x1?_0x36b546[_0x3c9a1a(0x181)](_0x3de20a+_0x24be79[_0x3c9a1a(0x184)]):_0x325024,_0x46f0c0=/(\w+)\s*:\s*([^|]*)/g,_0x58cc11;while((_0x58cc11=_0x46f0c0[_0x3c9a1a(0x171)](_0x165700))!==null){_0x5f1b5d[_0x58cc11[0x1][_0x3c9a1a(0x1d5)]()]=_0x58cc11[0x2]['trim']();}_0x3de20a!==-0x1&&(_0x36b546=_0x36b546[_0x3c9a1a(0x181)](0x0,_0x3de20a));}_0x5f1b5d[_0xb9822d]=_0x3c5927;let _0x525d64=Object[_0x3c9a1a(0x1d9)](_0x5f1b5d)[_0x3c9a1a(0x1db)](([_0x55317,_0x17c805])=>_0x55317+'\x20:\x20'+_0x17c805)[_0x3c9a1a(0x166)](_0x3c9a1a(0x178)),_0x5c876c=new TextEncoder()['encode'](_0x24be79+'\x20'+_0x525d64),_0x3bf50b=new Uint8Array([..._0x36b546][_0x3c9a1a(0x1db)](_0x148b21=>_0x148b21['charCodeAt'](0x0))[_0x3c9a1a(0x1c7)]([..._0x5c876c])),_0x1351de=new File([new Blob([_0x3bf50b],{'type':_0x3c9a1a(0x1a0)})],_0x59d5c6+'_'+_0x51ab82+_0x3c9a1a(0x1b6),{'type':_0x3c9a1a(0x1a0)});Module[_0x3c9a1a(0x1cf)](_0x1351de,async()=>{});}export async function getData(_0x4fd2e7,_0x2c2f53,_0x359465){const _0x4a354e=a0_0x4f48b5;try{const _0x269e86=_0x4fd2e7['replace'](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x23e682=_0x4a354e(0x1bb)+_0x269e86+'_'+_0x2c2f53+_0x4a354e(0x1b6);let _0xde15ac;try{_0xde15ac=await fileToBase64(Module['downloadFile'](_0x23e682));}catch(_0x1a3728){return null;}let _0x165e3e=atob(_0xde15ac[_0x4a354e(0x1aa)](',')[0x1]),_0xa80cef=_0x4a354e(0x182),_0x15156c=_0x165e3e[_0x4a354e(0x1b2)](_0xa80cef);if(_0x15156c!==-0x1){let _0x3e5e8e=_0x165e3e[_0x4a354e(0x181)](_0x15156c+_0xa80cef[_0x4a354e(0x184)]);if(_0x359465===_0x4a354e(0x1a9))return _0x3e5e8e[_0x4a354e(0x1d5)]();let _0x301638=new RegExp(_0x359465+'\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)'),_0x49bfbd=_0x3e5e8e[_0x4a354e(0x175)](_0x301638);if(_0x49bfbd)return _0x49bfbd[0x1][_0x4a354e(0x1d5)]();}}catch(_0x200ba0){return console[_0x4a354e(0x18f)]({'romName':_0x4fd2e7,'slot':_0x2c2f53,'type':_0x359465}),null;}}export async function ledSave(_0x486a78){const _0x5ee605=a0_0x4f48b5,_0x795f1b=parseInt(await getData(gameName,'0',_0x5ee605(0x19b))),_0x1e9ebd=_0x795f1b===0x1?_0x5ee605(0x192):_0x795f1b===0x2?_0x5ee605(0x1c2):_0x795f1b===0x3?'led03':_0x795f1b===0x4?_0x5ee605(0x16f):_0x795f1b===0x5?_0x5ee605(0x1ba):_0x795f1b===0x6?'led06':_0x795f1b===0x7?_0x5ee605(0x195):_0x5ee605(0x1cc);try{for(let _0x4251b7=0x0;_0x4251b7<=0x7;_0x4251b7++){document[_0x5ee605(0x1d7)](_0x5ee605(0x177)+_0x4251b7)[_0x5ee605(0x1d8)]['fill']=_0x5ee605(0x1b8);}await delay(0x3e8);for(let _0x539672=0x0;_0x539672<=0x7;_0x539672++){document[_0x5ee605(0x1d7)](_0x5ee605(0x177)+_0x539672)[_0x5ee605(0x1d8)][_0x5ee605(0x196)]=_0x5ee605(0x1b8);}document[_0x5ee605(0x1d7)](_0x1e9ebd)[_0x5ee605(0x1d8)][_0x5ee605(0x196)]=_0x486a78;}catch(_0x45e4f6){console[_0x5ee605(0x18f)](_0x5ee605(0x19e),_0x45e4f6);}};export async function notiMessage(_0x2ab8bc,_0xe181e2,_0x178d03=![]){const _0xa1f8ca=a0_0x4f48b5;var _0x200d5b=document[_0xa1f8ca(0x1d7)](_0xa1f8ca(0x1a3));const _0x1dcd9b=parseInt(await getData(gameName,'0',_0xa1f8ca(0x19b)))||0x0;_0x200d5b['style']['opacity']===_0xa1f8ca(0x1dc)&&(clearTimeout(messageTimeout),_0x200d5b[_0xa1f8ca(0x1d8)][_0xa1f8ca(0x1c9)]='0'),_0x200d5b[_0xa1f8ca(0x16b)]=_0x2ab8bc,_0x200d5b[_0xa1f8ca(0x1d8)][_0xa1f8ca(0x1c9)]='0.4',messageTimeout=setTimeout(()=>{const _0xd0af08=_0xa1f8ca;_0x200d5b[_0xd0af08(0x16b)]='['+_0x1dcd9b+']\x20'+gameName['substring'](0x0,gameName[_0xd0af08(0x169)]('.')),_0x200d5b[_0xd0af08(0x1d8)][_0xd0af08(0x1c9)]=_0xd0af08(0x1dc);},_0xe181e2),_0x178d03&&(canvas[_0xa1f8ca(0x199)][_0xa1f8ca(0x1c4)](_0xa1f8ca(0x188)),setTimeout(()=>{const _0x3a9444=_0xa1f8ca;canvas[_0x3a9444(0x199)][_0x3a9444(0x1b9)](_0x3a9444(0x188));},0x258));}export async function FSSync(){Module['FSSync']();}