const a0_0x3f2217=a0_0x299a;(function(_0x19d74b,_0x4f1939){const _0x21a865=a0_0x299a,_0x579cf3=_0x19d74b();while(!![]){try{const _0x4e5bed=-parseInt(_0x21a865(0x137))/0x1*(parseInt(_0x21a865(0x16b))/0x2)+-parseInt(_0x21a865(0x12e))/0x3*(-parseInt(_0x21a865(0x12b))/0x4)+-parseInt(_0x21a865(0x17e))/0x5+-parseInt(_0x21a865(0x127))/0x6+-parseInt(_0x21a865(0x147))/0x7*(-parseInt(_0x21a865(0x13d))/0x8)+-parseInt(_0x21a865(0x14b))/0x9+parseInt(_0x21a865(0x164))/0xa;if(_0x4e5bed===_0x4f1939)break;else _0x579cf3['push'](_0x579cf3['shift']());}catch(_0x50562e){_0x579cf3['push'](_0x579cf3['shift']());}}}(a0_0x3ee0,0x309b7));import a0_0x3bcf59 from'../core/mgba.js';import*as a0_0x47859d from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x3f2217(0x173)](a0_0x3f2217(0x148))};function initializeCore(_0x59d5a,_0x4e7c13){const _0x49b758=a0_0x3f2217;_0x59d5a(_0x4e7c13)[_0x49b758(0x154)](function(_0x290388){_0x290388['FSInit']();});}function a0_0x3ee0(){const _0x442e7f=['gbc','gbc1','0,0,','files','Error\x20uploadCheat:','endsWith','downloadFile','setFastForwardMultiplier','href','name','\x20time(s)','_imageState','Error\x20uploadSavSta:','4920100DdvuMr','visible','disable','loadGame','autoLoadCheats','screenshot','listScreenshots','314fFfSnS','_imageState0','innerWidth','uploadSaveOrSaveState','listStates','Off','createObjectURL','getItem','getElementById','log','loadState','saveState','body','editFileName','uploadCheats','hidden','screenSize','click','No\x20screenshot!','11140wSfjJR','slotStateSaved','createElement','pagehide','SDL2','remove','Cheat\x20uploaded\x20successfully:','replace','type','turboState','1342038adjbTt','onLine','.ss0','visibilityState','4LJkdMs','textContent','#E0C068','43263tkJvmj','uploadGame','fileSize','pauseGame','addEventListener','beforeunload','download','gameName','application/octet-stream','777JTZuRF','buttonPress','Save/State\x20uploaded\x20successfully:','.png','_savedCheats','toString','2355688LjRjhG','error','Cheat\x20Enabled!','#20A5A6','/data/games/','Auto\x20save\x20','.gb','listGames','FSSync','timer','7NjjSpl','canvas','Do\x20you\x20want\x20to\x20load\x20save\x20state?','.gba','2285163uUMldR','/data/screenshots/','padStart','buttonUnpress','resumeGame','Paused!','control-setting','listCheats','setItem','then','classList','add'];a0_0x3ee0=function(){return _0x442e7f;};return a0_0x3ee0();}initializeCore(a0_0x3bcf59,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x3f2217(0x148)),savedTurboState=localStorage[a0_0x3f2217(0x172)](a0_0x3f2217(0x126)),controlSetting=document[a0_0x3f2217(0x173)](a0_0x3f2217(0x151));function handleVisibilityChange(_0x200b73){const _0x2969b6=a0_0x3f2217;document[_0x2969b6(0x12a)]===_0x2969b6(0x17a)||_0x200b73?.[_0x2969b6(0x125)]===_0x2969b6(0x133)||_0x200b73?.['persisted']?(pauseGame(),canvas[_0x2969b6(0x155)][_0x2969b6(0x156)](_0x2969b6(0x165))):(setTimeout(()=>{const _0x18c500=_0x2969b6;canvas[_0x18c500(0x155)][_0x18c500(0x122)](_0x18c500(0x165));},0x258),controlSetting['classList']['contains'](_0x2969b6(0x165))&&resumeGame());}async function statusShow(){const _0x2dfe92=a0_0x3f2217;document[_0x2dfe92(0x132)](_0x2dfe92(0x120),handleVisibilityChange),document[_0x2dfe92(0x132)]('visibilitychange',handleVisibilityChange),window[_0x2dfe92(0x132)](_0x2dfe92(0x133),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x47859d['turboF'](turboState)),await delay(0x3e8),await led(parseInt(localStorage['getItem'](_0x2dfe92(0x17f)))),await notiMessage(gameVer,0x3e8);}function reName(_0x223ae3,_0x3a0372){const _0x1f15d7=a0_0x3f2217;localStorage[_0x1f15d7(0x153)](_0x1f15d7(0x135),_0x223ae3);const _0x529d60=_0x223ae3[_0x1f15d7(0x124)](/\.(gba|gbc|gb)$/,_0x3a0372);return _0x529d60;}async function saveStatePeriodically(){const _0x490490=a0_0x3f2217;await ledSave(_0x490490(0x140)),await Module['saveState'](0x0),await Module[_0x490490(0x145)](),await screenShot(0x0),console['log'](_0x490490(0x142)+ ++countAutoSave+_0x490490(0x161));}async function saveStateInCloud(){const _0x2ea62c=a0_0x3f2217,_0x3beaa9=localStorage[_0x2ea62c(0x172)](_0x2ea62c(0x135)),_0x10d2ae=_0x3beaa9['replace'](_0x2ea62c(0x14a),_0x2ea62c(0x129)),_0x55d9ad=localStorage[_0x2ea62c(0x172)]('uId'),_0x315142=localStorage['getItem'](_0x3beaa9+_0x2ea62c(0x16c)),_0x5a563e=localStorage[_0x2ea62c(0x172)](_0x3beaa9+'_dateState0');if(navigator[_0x2ea62c(0x128)]){if(_0x55d9ad){await ledSave(_0x2ea62c(0x12d)),await delay(0x3e8),await dpUploadFile(_0x10d2ae,Module['downloadFile']('/data/states/'+_0x10d2ae));if(_0x315142!==null){const _0x422a81=_0x315142+'\x0a\x0a'+_0x5a563e,_0x304ef9=new Blob([_0x422a81],{'type':'text/plain'});await dpUploadFile(_0x3beaa9+'_slot0.txt',_0x304ef9);}else console['log'](_0x2ea62c(0x17d));await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x2ea62c(0x161),0x7d0);}else console[_0x2ea62c(0x174)]('Unable\x20to\x20upload\x20to\x20Cloud!');}else console['log']('Online!');}function startTimer(){let [_0x345055,_0x35be4f,_0x11ca54,_0x2a39b8,_0x517745]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0xed68e8=a0_0x299a;_0x11ca54++,_0x2a39b8++,_0x517745++;if(_0x11ca54===0x3c)[_0x11ca54,_0x35be4f]=[0x0,_0x35be4f+0x1];if(_0x35be4f===0x3c)[_0x35be4f,_0x345055]=[0x0,_0x345055+0x1];document[_0xed68e8(0x173)](_0xed68e8(0x146))[_0xed68e8(0x12c)]=_0x345055+'h'+_0x35be4f['toString']()[_0xed68e8(0x14d)](0x2,'0')+'.'+_0x11ca54[_0xed68e8(0x13c)]()[_0xed68e8(0x14d)](0x2,'0');_0x2a39b8===0x3c&&(saveStatePeriodically(),_0x2a39b8=0x0);;_0x2a39b8===0xe10&&(saveStateInCloud(),_0x517745=0x0);;},0x3e8);}export async function uploadGame(_0x4f91ae){const _0x4c4f20=a0_0x3f2217,_0x4ae8c2=_0x4f91ae[_0x4c4f20(0x15a)][0x0];Module[_0x4c4f20(0x12f)](_0x4ae8c2,()=>{const _0xaf9aef=_0x4c4f20;Module[_0xaf9aef(0x145)]();});}export async function loadGame(_0x379c0e){const _0x510c2d=a0_0x3f2217,_0x419948=reName(_0x379c0e,_0x510c2d(0x129)),_0x5b950c=Module[_0x510c2d(0x16f)]();intro[_0x510c2d(0x155)][_0x510c2d(0x156)]('disable'),ingame['classList'][_0x510c2d(0x122)](_0x510c2d(0x166)),_0x379c0e[_0x510c2d(0x15c)]('.gbc')||_0x379c0e[_0x510c2d(0x15c)](_0x510c2d(0x143))?(canvas[_0x510c2d(0x155)][_0x510c2d(0x156)](_0x510c2d(0x157)),areaTrans['classList'][_0x510c2d(0x156)](_0x510c2d(0x158)),localStorage[_0x510c2d(0x153)](_0x510c2d(0x17b),'0,0,'+(window['innerWidth']-0xe6)+','+(window[_0x510c2d(0x16d)]-0xe6)*0x9/0xa)):localStorage[_0x510c2d(0x153)]('screenSize',_0x510c2d(0x159)+(window[_0x510c2d(0x16d)]-0x96)+','+(window[_0x510c2d(0x16d)]-0x96)*0x2/0x3),_0x5b950c['includes'](_0x419948)?(await Module['loadGame'](_0x510c2d(0x141)+_0x379c0e),confirm(_0x510c2d(0x149))&&await Module[_0x510c2d(0x175)](0x0)):await Module[_0x510c2d(0x167)](_0x510c2d(0x141)+_0x379c0e),await statusShow();}export async function saveState(_0x16c610){const _0x3aba4c=a0_0x3f2217;await Module[_0x3aba4c(0x176)](_0x16c610),await Module['FSSync']();}export async function loadState(_0x50f231){await Module['loadState'](_0x50f231);}export async function downloadFile(_0x399fef,_0x5c5567){const _0x58e612=a0_0x3f2217,_0x32fbd5=Module[_0x58e612(0x15d)](_0x399fef),_0x5d1e6e=document[_0x58e612(0x180)]('a');document[_0x58e612(0x177)]['appendChild'](_0x5d1e6e),_0x5d1e6e[_0x58e612(0x134)]=_0x5c5567;const _0x9b361c=new Blob([_0x32fbd5],{'type':_0x58e612(0x136)});_0x5d1e6e[_0x58e612(0x15f)]=URL[_0x58e612(0x171)](_0x9b361c),_0x5d1e6e[_0x58e612(0x17c)](),URL['revokeObjectURL'](_0x9b361c),_0x5d1e6e[_0x58e612(0x122)]();}export function downloadFileInCloud(_0x591bbb){const _0x4ae01c=Module['downloadFile'](_0x591bbb);return _0x4ae01c;}export async function uploadFile(_0x596a63){const _0x5a14ca=_0x596a63['files'][0x0];Module['uploadSaveOrSaveState'](_0x5a14ca,()=>{const _0x1aae5d=a0_0x299a;Module[_0x1aae5d(0x145)]();});}export async function editFile(_0x35225c,_0xcac1fc,_0x4dc829){const _0x769045=a0_0x3f2217;await Module[_0x769045(0x178)](_0x35225c,_0xcac1fc,_0x4dc829),await Module[_0x769045(0x145)]();}export async function deleteFile(_0x13791f){const _0x27b76e=a0_0x3f2217;await Module['deleteFile'](_0x13791f),await Module[_0x27b76e(0x145)]();}export function listGame(){const _0x1688e7=a0_0x3f2217,_0x34bf4e=Module[_0x1688e7(0x144)]();return _0x34bf4e;}export function listSave(){const _0x5ed8be=Module['listSaves']();return _0x5ed8be;}export function listState(){const _0x5a6a06=a0_0x3f2217,_0x18bbf3=Module[_0x5a6a06(0x16f)]();return _0x18bbf3;}export function listCheat(){const _0x3b4d22=a0_0x3f2217,_0x5dfd5b=Module[_0x3b4d22(0x152)]();return _0x5dfd5b;}export function listScreenshot(){const _0x2bb678=a0_0x3f2217,_0xe31030=Module[_0x2bb678(0x16a)]();return _0xe31030;}function a0_0x299a(_0x13adb0,_0x4fa808){const _0x3ee026=a0_0x3ee0();return a0_0x299a=function(_0x299a61,_0x20078f){_0x299a61=_0x299a61-0x120;let _0x326829=_0x3ee026[_0x299a61];return _0x326829;},a0_0x299a(_0x13adb0,_0x4fa808);}export function fileSize(_0x4340cc){const _0x2517ca=a0_0x3f2217,_0xaf6ba1=Module[_0x2517ca(0x130)](_0x4340cc);return _0xaf6ba1;}export async function uploadCheat(_0x5980e1){const _0x21f6b6=a0_0x3f2217;try{const _0x46f5a2=_0x5980e1[_0x21f6b6(0x15a)][0x0];await Module[_0x21f6b6(0x179)](_0x46f5a2,()=>{const _0x3cca4b=_0x21f6b6;console[_0x3cca4b(0x174)](_0x3cca4b(0x123),_0x46f5a2[_0x3cca4b(0x160)]),localStorageFile(),Module['FSSync']();});}catch(_0x54dd08){console[_0x21f6b6(0x13e)](_0x21f6b6(0x15b),_0x54dd08);}}export async function uploadSavSta(_0x187e3b){const _0x1387f9=a0_0x3f2217;try{const _0x57adb2=_0x187e3b['files'][0x0];await Module['uploadSaveOrSaveState'](_0x57adb2,()=>{const _0x42e84f=a0_0x299a;console[_0x42e84f(0x174)](_0x42e84f(0x139),_0x57adb2[_0x42e84f(0x160)]),localStorageFile(),Module[_0x42e84f(0x145)]();});}catch(_0x581d5d){console[_0x1387f9(0x13e)](_0x1387f9(0x163),_0x581d5d);}}export async function uploadSaveOrSaveState(_0x3c4421){const _0xc6bd7c=a0_0x3f2217;Module[_0xc6bd7c(0x16e)](_0x3c4421,()=>{const _0x519152=_0xc6bd7c;localStorageFile(),Module[_0x519152(0x145)]();});}export async function resumeGame(){const _0x5a4af7=a0_0x3f2217;Module[_0x5a4af7(0x14f)](),Module[_0x5a4af7(0x121)](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x26c0e5=a0_0x3f2217;Module[_0x26c0e5(0x131)](),Module[_0x26c0e5(0x121)](),notiMessage(_0x26c0e5(0x150),0x7d0);}export async function buttonPress(_0x5a7444){const _0x47e305=a0_0x3f2217;Module[_0x47e305(0x138)](_0x5a7444);}export async function buttonUnpress(_0x1e698d){const _0x134bd2=a0_0x3f2217;Module[_0x134bd2(0x14e)](_0x1e698d);}export async function screenShot(_0x1ba88f){const _0x683d81=a0_0x3f2217,_0x3c44c4=localStorage['getItem'](_0x683d81(0x135)),_0x27525f=reName(_0x3c44c4,'_');await Module[_0x683d81(0x169)](''+_0x27525f+_0x1ba88f+_0x683d81(0x13a)),await Module[_0x683d81(0x145)]();const _0x2d708f=await fileToBase64(Module['downloadFile'](_0x683d81(0x14c)+_0x27525f+_0x1ba88f+'.png')),_0x4916e7=Date['now'](),_0xbc7548=formatDateTime(_0x4916e7);localStorage[_0x683d81(0x153)](_0x3c44c4+'_dateState'+_0x1ba88f,_0xbc7548),localStorage['setItem'](_0x3c44c4+_0x683d81(0x162)+_0x1ba88f,_0x2d708f);}export async function captureOCR(_0x39f88a){const _0xa40db2=a0_0x3f2217;Module[_0xa40db2(0x169)](_0x39f88a);const _0x427c23=Module['downloadFile'](_0xa40db2(0x14c)+_0x39f88a);return _0x427c23;}export async function setFastForwardMultiplier(_0x43700f){const _0x12348e=a0_0x3f2217;Module[_0x12348e(0x15e)](_0x43700f);}export function uploadCheats(_0x1a0235,_0x58285b,_0x5966c8,_0x411ac9,_0x5632bd){const _0x41d140=a0_0x3f2217;Module[_0x41d140(0x179)](_0x1a0235,()=>{const _0x53c36b=_0x41d140;Module[_0x53c36b(0x168)](),setTimeout(()=>{const _0x5161b5=_0x53c36b;Module[_0x5161b5(0x145)]();},0x1f4),_0x411ac9&&(localStorage[_0x53c36b(0x153)](_0x58285b+_0x53c36b(0x13b),_0x5966c8),notiMessage(_0x53c36b(0x13f),0x5dc)),_0x5632bd['textContent']=localStorage[_0x53c36b(0x172)](_0x58285b+_0x53c36b(0x13b)||_0x53c36b(0x170));});}