function a0_0x5e19(){const _0x3fd3fb=['.gb','canvas','uId','href','setItem','visible','disable','remove','turboState','116431PKJxWn','indexOf','timer','control-setting','innerWidth','toString','addEventListener','appendChild','files','pagehide','charCodeAt','getElementById','FSSync','gameName','uploadAll','pauseGame','includes','saveState','0,0,','getItem','1336ZypISP','listCheats','downloadFile','19828930RkwcZp','Resumed!','encode','gbc','screenshot','.png','add','Cloud\x20upload\x20','slotStateSaved','textContent','Off','filter','length','setFastForwardMultiplier','body','_savedCheats','setVolume','49311hmtGGY','4762140EWwqGg','/data/screenshots/','/data/games/','style','resumeGame','visibilitychange','listStates','buttonUnpress','image/png','turboF','deleteFile','Auto\x20save\x20','tEXtComment\x00','54jUVcnJ','createElement','bottom','buttonPress','contains','createObjectURL','loadGame','hidden','then','set','loadState','#E0C068','48274gdqTkA','FSInit','2377200fOsAFY','Paused!','.ss0','\x20time(s)','SDL2','persisted','split','gbc1','uploadRom','replace','classList','autoLoadCheats','state','.gbc','download','43131kaJmCo','#20A5A6','beforeunload','now','padStart','140xLDtHL','log','Do\x20you\x20want\x20to\x20load\x20save\x20state?','listScreenshots','186jxHFIT'];a0_0x5e19=function(){return _0x3fd3fb;};return a0_0x5e19();}const a0_0x113cd3=a0_0xfb47;(function(_0x283f52,_0x4d75b8){const _0xfa7fcd=a0_0xfb47,_0x3f7ab7=_0x283f52();while(!![]){try{const _0xcef27=-parseInt(_0xfa7fcd(0x15d))/0x1*(parseInt(_0xfa7fcd(0x1b7))/0x2)+parseInt(_0xfa7fcd(0x16e))/0x3*(-parseInt(_0xfa7fcd(0x173))/0x4)+parseInt(_0xfa7fcd(0x1aa))/0x5+parseInt(_0xfa7fcd(0x177))/0x6*(parseInt(_0xfa7fcd(0x181))/0x7)+parseInt(_0xfa7fcd(0x195))/0x8*(-parseInt(_0xfa7fcd(0x1a9))/0x9)+parseInt(_0xfa7fcd(0x15f))/0xa+parseInt(_0xfa7fcd(0x198))/0xb;if(_0xcef27===_0x4d75b8)break;else _0x3f7ab7['push'](_0x3f7ab7['shift']());}catch(_0x4525b7){_0x3f7ab7['push'](_0x3f7ab7['shift']());}}}(a0_0x5e19,0xc017f));import a0_0x4bdbfe from'../core/mgba.js';import*as a0_0x1542e0 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document[a0_0x113cd3(0x18c)](a0_0x113cd3(0x179))};function a0_0xfb47(_0x2d4d8e,_0xa137c8){const _0x5e19a8=a0_0x5e19();return a0_0xfb47=function(_0xfb4765,_0x214fca){_0xfb4765=_0xfb4765-0x156;let _0x3b2257=_0x5e19a8[_0xfb4765];return _0x3b2257;},a0_0xfb47(_0x2d4d8e,_0xa137c8);}function initializeCore(_0x24b594,_0x5d7831){const _0x537a53=a0_0x113cd3;_0x24b594(_0x5d7831)[_0x537a53(0x159)](function(_0xe9460e){const _0x5316cd=_0x537a53;_0xe9460e[_0x5316cd(0x15e)]();});}initializeCore(a0_0x4bdbfe,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x113cd3(0x18c)](a0_0x113cd3(0x179)),savedTurboState=localStorage['getItem'](a0_0x113cd3(0x180)),controlSetting=document[a0_0x113cd3(0x18c)](a0_0x113cd3(0x184));function handleVisibilityChange(_0x37704d){const _0x154245=a0_0x113cd3;document['visibilityState']===_0x154245(0x158)||_0x37704d?.['type']===_0x154245(0x170)||_0x37704d?.[_0x154245(0x164)]?(pauseGame(),canvas['classList'][_0x154245(0x19e)]('visible')):(setTimeout(()=>{const _0x3a25be=_0x154245;canvas[_0x3a25be(0x169)][_0x3a25be(0x17f)](_0x3a25be(0x17d));},0x258),controlSetting[_0x154245(0x169)][_0x154245(0x1bb)](_0x154245(0x17d))&&resumeGame());}async function statusShow(){const _0x173078=a0_0x113cd3;document[_0x173078(0x187)](_0x173078(0x18a),handleVisibilityChange),document['addEventListener'](_0x173078(0x1af),handleVisibilityChange),window[_0x173078(0x187)](_0x173078(0x170),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x1542e0[_0x173078(0x1b3)](turboState)),await delay(0xc8),await Module[_0x173078(0x163)](),await delay(0x320),await led(parseInt(localStorage['getItem'](_0x173078(0x1a0)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x3a089f=a0_0x113cd3;await ledSave(_0x3a089f(0x16f)),await Module[_0x3a089f(0x192)](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x3a089f(0x174)](_0x3a089f(0x1b5)+ ++countAutoSave+'\x20time(s)');}async function saveStateInCloud(){const _0x5e3cc2=a0_0x113cd3,_0x1a8700=localStorage[_0x5e3cc2(0x194)](_0x5e3cc2(0x18e)),_0x493af9=_0x1a8700['replace'](/\.(zip|gb|gbc|gba)$/,_0x5e3cc2(0x161)),_0x5cb448=localStorage[_0x5e3cc2(0x194)](_0x5e3cc2(0x17a));navigator['onLine']&&(_0x5cb448&&(await ledSave(_0x5e3cc2(0x15c)),await delay(0x3e8),await dpUploadFile(_0x493af9,Module[_0x5e3cc2(0x197)]('/data/states/'+_0x493af9),_0x5e3cc2(0x16b)),await lockNoti('',_0x5e3cc2(0x19f)+ ++countUpload+_0x5e3cc2(0x162),0x7d0)));}function startTimer(){let [_0x2b5eb4,_0x2a4c70,_0x1e1679,_0x17d8c2,_0x42a355]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x8690ab=a0_0xfb47;_0x1e1679++,_0x17d8c2++,_0x42a355++;if(_0x1e1679===0x3c)[_0x1e1679,_0x2a4c70]=[0x0,_0x2a4c70+0x1];if(_0x2a4c70===0x3c)[_0x2a4c70,_0x2b5eb4]=[0x0,_0x2b5eb4+0x1];document[_0x8690ab(0x18c)](_0x8690ab(0x183))[_0x8690ab(0x1a1)]=_0x2b5eb4+'h'+_0x2a4c70[_0x8690ab(0x186)]()[_0x8690ab(0x172)](0x2,'0')+'.'+_0x1e1679[_0x8690ab(0x186)]()[_0x8690ab(0x172)](0x2,'0');_0x17d8c2===0x3c&&(saveStatePeriodically(),_0x17d8c2=0x0);;_0x42a355===0x708&&(saveStateInCloud(),_0x42a355=0x0);;},0x3e8);}export async function uploadGame(_0xe40e18){const _0x3a0f85=a0_0x113cd3,_0x54c1b6=_0xe40e18['files'][0x0];Module[_0x3a0f85(0x167)](_0x54c1b6,()=>{const _0x2cd7df=_0x3a0f85;Module[_0x2cd7df(0x18d)]();});}export async function loadGame(_0x1c9f50){const _0x55f029=a0_0x113cd3,_0x2e12c1=_0x1c9f50[_0x55f029(0x168)](/\.(gba|gbc|gb|zip)$/,_0x55f029(0x161)),_0x17d756=Module['listStates']()[_0x55f029(0x1a3)](_0x2ae2c5=>_0x2ae2c5!=='.'&&_0x2ae2c5!=='..');intro[_0x55f029(0x169)][_0x55f029(0x19e)](_0x55f029(0x17e)),errorLogElements[0x0][_0x55f029(0x1ad)][_0x55f029(0x1b9)]='0',ingame[_0x55f029(0x169)][_0x55f029(0x17f)](_0x55f029(0x17e)),_0x1c9f50['endsWith'](_0x55f029(0x16c))||_0x1c9f50['endsWith'](_0x55f029(0x178))?(canvas[_0x55f029(0x169)][_0x55f029(0x19e)](_0x55f029(0x19b)),areaTrans[_0x55f029(0x169)][_0x55f029(0x19e)](_0x55f029(0x166)),localStorage[_0x55f029(0x17c)]('screenSize','0,0,'+(window['innerWidth']-0xe6)+','+(window[_0x55f029(0x185)]-0xe6)*0x9/0xa)):localStorage[_0x55f029(0x17c)]('screenSize',_0x55f029(0x193)+(window['innerWidth']-0x96)+','+(window[_0x55f029(0x185)]-0x96)*0x2/0x3),_0x17d756[_0x55f029(0x191)](_0x2e12c1)?(await Module[_0x55f029(0x157)](_0x55f029(0x1ac)+_0x1c9f50),confirm(_0x55f029(0x175))&&(await Module[_0x55f029(0x15b)](0x0),localStorage[_0x55f029(0x17c)](_0x55f029(0x18e),_0x1c9f50),console['log'](_0x1c9f50))):(await Module[_0x55f029(0x157)](_0x55f029(0x1ac)+_0x1c9f50),localStorage['setItem'](_0x55f029(0x18e),_0x1c9f50),console[_0x55f029(0x174)](_0x1c9f50)),await statusShow();}export async function saveState(_0x30efe7){const _0x14fe92=a0_0x113cd3;await Module[_0x14fe92(0x192)](_0x30efe7),await Module[_0x14fe92(0x18d)]();}export async function loadState(_0x446407){await Module['loadState'](_0x446407);}export async function downloadFile(_0x5b6cec,_0x3e2dc4){const _0xed0f00=a0_0x113cd3,_0x139ddf=Module['downloadFile'](_0x5b6cec),_0x23452c=document[_0xed0f00(0x1b8)]('a');document[_0xed0f00(0x1a6)][_0xed0f00(0x188)](_0x23452c),_0x23452c[_0xed0f00(0x16d)]=_0x3e2dc4;const _0x2089bc=new Blob([_0x139ddf],{'type':'application/octet-stream'});_0x23452c[_0xed0f00(0x17b)]=URL[_0xed0f00(0x156)](_0x2089bc),_0x23452c['click'](),URL['revokeObjectURL'](_0x2089bc),_0x23452c[_0xed0f00(0x17f)]();}export function downloadFileInCloud(_0x1367ef){const _0x17dd68=a0_0x113cd3,_0x1566ee=Module[_0x17dd68(0x197)](_0x1367ef);return _0x1566ee;}export async function uploadFileInCloud(_0xddeace){Module['uploadAll'](_0xddeace,()=>{const _0x4d8d3f=a0_0xfb47;localStorageFile(),Module[_0x4d8d3f(0x18d)]();});}export async function uploadFile(_0xf361e0){const _0x4edfc8=a0_0x113cd3,_0x366489=_0xf361e0[_0x4edfc8(0x189)][0x0];Module[_0x4edfc8(0x18f)](_0x366489,()=>{const _0x379ecc=_0x4edfc8;localStorageFile(),Module[_0x379ecc(0x18d)]();});}export async function editFile(_0x412683,_0x56c84a,_0xd1bb5d){const _0x4415dd=a0_0x113cd3;await Module['editFileName'](_0x412683,_0x56c84a,_0xd1bb5d),await Module[_0x4415dd(0x18d)]();}export async function deleteFile(_0x310358){const _0x43c4eb=a0_0x113cd3;await Module[_0x43c4eb(0x1b4)](_0x310358),await Module['FSSync']();}export function listGame(){const _0x1aa194=a0_0x113cd3,_0x5bf208=Module['listRoms']()[_0x1aa194(0x1a3)](_0xc26f7a=>_0xc26f7a!=='.'&&_0xc26f7a!=='..');return _0x5bf208;}export function listSave(){const _0x3be344=a0_0x113cd3,_0x15d4db=Module['listSaves']()[_0x3be344(0x1a3)](_0xa812db=>_0xa812db!=='.'&&_0xa812db!=='..');return _0x15d4db;}export function listState(){const _0x1b666c=a0_0x113cd3,_0x23773f=Module[_0x1b666c(0x1b0)]()[_0x1b666c(0x1a3)](_0x3e5add=>_0x3e5add!=='.'&&_0x3e5add!=='..');return _0x23773f;}export function listCheat(){const _0x266f2e=a0_0x113cd3,_0x2ec5a8=Module[_0x266f2e(0x196)]()[_0x266f2e(0x1a3)](_0x3d4b79=>_0x3d4b79!=='.'&&_0x3d4b79!=='..');return _0x2ec5a8;}export function listScreenshot(){const _0x34fed0=a0_0x113cd3,_0x57ea56=Module[_0x34fed0(0x176)]()[_0x34fed0(0x1a3)](_0x56a044=>_0x56a044!=='.'&&_0x56a044!=='..');return _0x57ea56;}export function embedTextInPngFile(_0x259a38,_0x3b0742,_0x4dd25f){const _0x4d66ad=a0_0x113cd3;let _0x17a84f=atob(_0x259a38[_0x4d66ad(0x165)](',')[0x1]),_0x31e09c=new Uint8Array(_0x17a84f[_0x4d66ad(0x1a4)]);for(let _0x3ee54e=0x0;_0x3ee54e<_0x17a84f[_0x4d66ad(0x1a4)];_0x3ee54e++){_0x31e09c[_0x3ee54e]=_0x17a84f[_0x4d66ad(0x18b)](_0x3ee54e);}let _0x5b10eb=new TextEncoder()[_0x4d66ad(0x19a)](_0x4d66ad(0x1b6)+_0x3b0742),_0x124c4f=new Uint8Array(_0x31e09c[_0x4d66ad(0x1a4)]+_0x5b10eb[_0x4d66ad(0x1a4)]);_0x124c4f[_0x4d66ad(0x15a)](_0x31e09c,0x0),_0x124c4f[_0x4d66ad(0x15a)](_0x5b10eb,_0x31e09c['length']);let _0x2d1b4f=new Blob([_0x124c4f],{'type':_0x4d66ad(0x1b2)}),_0xcbf5c0=new File([_0x2d1b4f],_0x4dd25f,{'type':_0x4d66ad(0x1b2)});return _0xcbf5c0;}export function extractTextFromPngBase64(_0x4e4bf7){const _0x4f1b45=a0_0x113cd3;let _0x4a0895=atob(_0x4e4bf7[_0x4f1b45(0x165)](',')[0x1]),_0x25d1aa=_0x4f1b45(0x1b6),_0x29b6fe=_0x4a0895[_0x4f1b45(0x182)](_0x25d1aa);if(_0x29b6fe!==-0x1)return _0x4a0895['substring'](_0x29b6fe+_0x25d1aa['length']);return null;}export function fileSize(_0x5e9748){const _0x3ece1a=Module['fileSize'](_0x5e9748);return _0x3ece1a;}export async function resumeGame(){const _0x59772f=a0_0x113cd3;Module[_0x59772f(0x1ae)](),Module[_0x59772f(0x163)](),notiMessage(_0x59772f(0x199),0x7d0);}export async function pauseGame(){const _0x5f107f=a0_0x113cd3;Module[_0x5f107f(0x190)](),Module[_0x5f107f(0x163)](),notiMessage(_0x5f107f(0x160),0x7d0);}export async function buttonPress(_0x57d5e4){const _0x412e8a=a0_0x113cd3;Module[_0x412e8a(0x1ba)](_0x57d5e4);}export async function buttonUnpress(_0x4d0cc4){const _0x95601e=a0_0x113cd3;Module[_0x95601e(0x1b1)](_0x4d0cc4);}export async function screenShot(_0x383f67){const _0x1995dc=a0_0x113cd3,_0x2ca494=localStorage['getItem'](_0x1995dc(0x18e))['replace'](/\.(gba|gbc|gb|zip)$/,''),_0x319721=_0x2ca494+'_'+_0x383f67+_0x1995dc(0x19d);await Module[_0x1995dc(0x19c)](_0x319721),await Module[_0x1995dc(0x18d)]();const _0x15001f=await fileToBase64(Module[_0x1995dc(0x197)](_0x1995dc(0x1ab)+_0x319721)),_0x2939b2=embedTextInPngFile(_0x15001f,formatDateTime(Date[_0x1995dc(0x171)]()),_0x319721);Module[_0x1995dc(0x18f)](_0x2939b2,()=>{localStorageFile(),Module['FSSync']();});}export async function dowloadScreenShot(_0x4acbfc){const _0x349727=a0_0x113cd3;try{const _0x2ddae2=await fileToBase64(Module[_0x349727(0x197)](_0x4acbfc));return _0x2ddae2;}catch{}}export async function captureOCR(_0x346a80){const _0x2aea9b=a0_0x113cd3;Module['screenshot'](_0x346a80);const _0x1efde9=Module[_0x2aea9b(0x197)](_0x2aea9b(0x1ab)+_0x346a80);return _0x1efde9;}export async function setFastForwardMultiplier(_0x3b07fb){const _0x16421b=a0_0x113cd3;Module[_0x16421b(0x1a5)](_0x3b07fb);}export function uploadCheats(_0x485803,_0x1aba6c,_0x323603,_0x3d679e,_0xd22b5){const _0x1ac82c=a0_0x113cd3;Module[_0x1ac82c(0x18f)](_0x485803,()=>{const _0x499acd=_0x1ac82c;Module[_0x499acd(0x16a)](),setTimeout(()=>{const _0x49e8ca=_0x499acd;Module[_0x49e8ca(0x18d)]();},0x1f4),_0x3d679e&&(localStorage[_0x499acd(0x17c)](_0x1aba6c+'_savedCheats',_0x323603),notiMessage('Cheat\x20Enabled!',0x5dc)),_0xd22b5[_0x499acd(0x1a1)]=localStorage['getItem'](_0x1aba6c+_0x499acd(0x1a7)||_0x499acd(0x1a2));});}export function setVolume(_0x39de57){const _0x54d6ac=a0_0x113cd3;Module[_0x54d6ac(0x1a8)](_0x39de57);}