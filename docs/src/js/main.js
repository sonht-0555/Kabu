const a0_0x1d0dd2=a0_0x5aca;(function(_0xef4fda,_0xad192c){const _0x21a38b=a0_0x5aca,_0x442398=_0xef4fda();while(!![]){try{const _0x1525e4=-parseInt(_0x21a38b(0x20d))/0x1*(-parseInt(_0x21a38b(0x1dc))/0x2)+-parseInt(_0x21a38b(0x1ba))/0x3+parseInt(_0x21a38b(0x1c0))/0x4+-parseInt(_0x21a38b(0x1f1))/0x5*(-parseInt(_0x21a38b(0x1d3))/0x6)+parseInt(_0x21a38b(0x1ed))/0x7+-parseInt(_0x21a38b(0x1e9))/0x8*(-parseInt(_0x21a38b(0x1b9))/0x9)+parseInt(_0x21a38b(0x20a))/0xa*(-parseInt(_0x21a38b(0x215))/0xb);if(_0x1525e4===_0xad192c)break;else _0x442398['push'](_0x442398['shift']());}catch(_0x3e5e74){_0x442398['push'](_0x442398['shift']());}}}(a0_0x1125,0x703af));import a0_0x320df4 from'../core/mgba.js';import*as a0_0x57edbd from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x1d0dd2(0x211)](a0_0x1d0dd2(0x205))};function initializeCore(_0x106d0b,_0x61ef96){const _0x47c4fb=a0_0x1d0dd2;_0x106d0b(_0x61ef96)[_0x47c4fb(0x1d1)](function(_0xd2e0c7){const _0x545169=_0x47c4fb;_0xd2e0c7[_0x545169(0x1eb)]();});}initializeCore(a0_0x320df4,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x1d0dd2(0x211)](a0_0x1d0dd2(0x205)),savedTurboState=localStorage[a0_0x1d0dd2(0x1e5)]('turboState'),controlSetting=document[a0_0x1d0dd2(0x211)](a0_0x1d0dd2(0x1bf));function handleVisibilityChange(_0x2a9b85){const _0x47ce7d=a0_0x1d0dd2;document[_0x47ce7d(0x20e)]===_0x47ce7d(0x1f8)||_0x2a9b85?.[_0x47ce7d(0x1f9)]===_0x47ce7d(0x1ef)||_0x2a9b85?.['persisted']?(pauseGame(),canvas[_0x47ce7d(0x1b8)]['add']('visible')):(setTimeout(()=>{const _0x2962ab=_0x47ce7d;canvas[_0x2962ab(0x1b8)][_0x2962ab(0x207)]('visible');},0x258),controlSetting[_0x47ce7d(0x1b8)]['contains'](_0x47ce7d(0x1c1))&&resumeGame());}async function statusShow(){const _0x15ed79=a0_0x1d0dd2;document[_0x15ed79(0x206)]('pagehide',handleVisibilityChange),document[_0x15ed79(0x206)](_0x15ed79(0x219),handleVisibilityChange),window[_0x15ed79(0x206)](_0x15ed79(0x1ef),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x57edbd[_0x15ed79(0x1fa)](turboState)),await delay(0xc8),await Module[_0x15ed79(0x1e7)](),await delay(0x320),await led(parseInt(localStorage[_0x15ed79(0x1e5)](_0x15ed79(0x1e3)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x5de519=a0_0x1d0dd2;await ledSave('#20A5A6'),await Module[_0x5de519(0x1f5)](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x5de519(0x20c)](_0x5de519(0x1e0)+ ++countAutoSave+_0x5de519(0x1fe));}async function saveStateInCloud(){const _0x13e2b6=a0_0x1d0dd2,_0x5658df=localStorage[_0x13e2b6(0x1e5)](_0x13e2b6(0x1d6)),_0x2f13cd=_0x5658df[_0x13e2b6(0x1ff)](/\.(zip|gb|gbc|gba)$/,_0x13e2b6(0x21b)),_0x5bdb6e=localStorage['getItem']('uId'),_0x2c3556=localStorage['getItem'](_0x5658df+_0x13e2b6(0x1be)),_0x4b0853=localStorage[_0x13e2b6(0x1e5)](_0x5658df+_0x13e2b6(0x1fd));if(navigator[_0x13e2b6(0x1e1)]){if(_0x5bdb6e){await ledSave(_0x13e2b6(0x1db)),await delay(0x3e8),await dpUploadFile(_0x2f13cd,Module[_0x13e2b6(0x1df)](_0x13e2b6(0x1c5)+_0x2f13cd));if(_0x2c3556!==null){const _0x385bd9=_0x2c3556+'\x0a\x0a'+_0x4b0853,_0x36a852=new Blob([_0x385bd9],{'type':_0x13e2b6(0x1bc)});await dpUploadFile(_0x5658df+_0x13e2b6(0x1ca),_0x36a852);}else console[_0x13e2b6(0x20c)](_0x13e2b6(0x1cf));await lockNoti('',_0x13e2b6(0x1da)+ ++countUpload+_0x13e2b6(0x1fe),0x7d0);}else console[_0x13e2b6(0x20c)](_0x13e2b6(0x1d9));}else console[_0x13e2b6(0x20c)](_0x13e2b6(0x1d4));}function startTimer(){let [_0x9867d2,_0x3314bd,_0x4e6f70,_0x27462d,_0x1c4df5]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x461032=a0_0x5aca;_0x4e6f70++,_0x27462d++,_0x1c4df5++;if(_0x4e6f70===0x3c)[_0x4e6f70,_0x3314bd]=[0x0,_0x3314bd+0x1];if(_0x3314bd===0x3c)[_0x3314bd,_0x9867d2]=[0x0,_0x9867d2+0x1];document['getElementById']('timer')[_0x461032(0x1ee)]=_0x9867d2+'h'+_0x3314bd['toString']()[_0x461032(0x1e2)](0x2,'0')+'.'+_0x4e6f70['toString']()['padStart'](0x2,'0');_0x27462d===0x3c&&(saveStatePeriodically(),_0x27462d=0x0);;_0x1c4df5===0xe10&&(saveStateInCloud(),_0x1c4df5=0x0);;},0x3e8);}export async function uploadGame(_0x4cfb95){const _0x1d8a6a=a0_0x1d0dd2,_0x2618ef=_0x4cfb95['files'][0x0];Module[_0x1d8a6a(0x1ec)](_0x2618ef,()=>{const _0x3339e4=_0x1d8a6a;Module[_0x3339e4(0x1d8)]();});}export async function loadGame(_0x562a5d){const _0x315c91=a0_0x1d0dd2,_0x1710e4=_0x562a5d[_0x315c91(0x1ff)](/\.(gba|gbc|gb|zip)$/,_0x315c91(0x21b)),_0x2e540c=Module[_0x315c91(0x209)]()[_0x315c91(0x1f4)](_0x365120=>_0x365120!=='.'&&_0x365120!=='..');intro['classList'][_0x315c91(0x1ea)]('disable'),errorLogElements[0x0]['style'][_0x315c91(0x1cb)]='0',ingame[_0x315c91(0x1b8)]['remove'](_0x315c91(0x1fb)),_0x562a5d[_0x315c91(0x204)]('.gbc')||_0x562a5d[_0x315c91(0x204)](_0x315c91(0x20b))?(canvas[_0x315c91(0x1b8)]['add']('gbc'),areaTrans[_0x315c91(0x1b8)][_0x315c91(0x1ea)](_0x315c91(0x1d2)),localStorage[_0x315c91(0x1fc)](_0x315c91(0x1bd),_0x315c91(0x20f)+(window[_0x315c91(0x213)]-0xe6)+','+(window[_0x315c91(0x213)]-0xe6)*0x9/0xa)):localStorage['setItem']('screenSize',_0x315c91(0x20f)+(window[_0x315c91(0x213)]-0x96)+','+(window[_0x315c91(0x213)]-0x96)*0x2/0x3),_0x2e540c[_0x315c91(0x1c9)](_0x1710e4)?(await Module[_0x315c91(0x1f0)](_0x315c91(0x1d0)+_0x562a5d),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module[_0x315c91(0x200)](0x0),localStorage[_0x315c91(0x1fc)](_0x315c91(0x1d6),_0x562a5d),console[_0x315c91(0x20c)](_0x562a5d))):(await Module[_0x315c91(0x1f0)](_0x315c91(0x1d0)+_0x562a5d),localStorage[_0x315c91(0x1fc)]('gameName',_0x562a5d),console[_0x315c91(0x20c)](_0x562a5d)),await statusShow();}export async function saveState(_0x377845){const _0x276255=a0_0x1d0dd2;await Module[_0x276255(0x1f5)](_0x377845),await Module[_0x276255(0x1d8)]();}export async function loadState(_0x51797b){const _0x6f0e78=a0_0x1d0dd2;await Module[_0x6f0e78(0x200)](_0x51797b);}export async function downloadFile(_0x393cfc,_0x5e71c6){const _0x298b03=a0_0x1d0dd2,_0x59b850=Module['downloadFile'](_0x393cfc),_0x5e33b9=document['createElement']('a');document[_0x298b03(0x203)][_0x298b03(0x208)](_0x5e33b9),_0x5e33b9['download']=_0x5e71c6;const _0x83dcb8=new Blob([_0x59b850],{'type':'application/octet-stream'});_0x5e33b9[_0x298b03(0x202)]=URL[_0x298b03(0x21c)](_0x83dcb8),_0x5e33b9[_0x298b03(0x1c7)](),URL[_0x298b03(0x1dd)](_0x83dcb8),_0x5e33b9['remove']();}export function downloadFileInCloud(_0x399e7f){const _0x563169=a0_0x1d0dd2,_0x4fd049=Module[_0x563169(0x1df)](_0x399e7f);return _0x4fd049;}export async function uploadFile(_0x40957b){const _0x5c5e57=a0_0x1d0dd2,_0x3e26b3=_0x40957b[_0x5c5e57(0x1c3)][0x0];Module[_0x5c5e57(0x210)](_0x3e26b3,()=>{const _0x1a2f4b=_0x5c5e57;localStorageFile(),Module[_0x1a2f4b(0x1d8)]();});}export async function editFile(_0x1ff041,_0x31a36a,_0x2db9a7){const _0x1c39a9=a0_0x1d0dd2;await Module[_0x1c39a9(0x214)](_0x1ff041,_0x31a36a,_0x2db9a7),await Module[_0x1c39a9(0x1d8)]();}export async function deleteFile(_0x232942){const _0x194bb0=a0_0x1d0dd2;await Module[_0x194bb0(0x216)](_0x232942),await Module['FSSync']();}export function listGame(){const _0x10d640=a0_0x1d0dd2,_0x49b078=Module['listRoms']()[_0x10d640(0x1f4)](_0x359c1f=>_0x359c1f!=='.'&&_0x359c1f!=='..');return _0x49b078;}export function listSave(){const _0x216cab=a0_0x1d0dd2,_0x48f282=Module['listSaves']()[_0x216cab(0x1f4)](_0x4481e0=>_0x4481e0!=='.'&&_0x4481e0!=='..');return _0x48f282;}export function listState(){const _0x14b9f5=a0_0x1d0dd2,_0x8c32ae=Module['listStates']()[_0x14b9f5(0x1f4)](_0x41867d=>_0x41867d!=='.'&&_0x41867d!=='..');return _0x8c32ae;}export function listCheat(){const _0x576166=a0_0x1d0dd2,_0x1caeed=Module['listCheats']()[_0x576166(0x1f4)](_0x5a4ef2=>_0x5a4ef2!=='.'&&_0x5a4ef2!=='..');return _0x1caeed;}export function listScreenshot(){const _0x44e98b=a0_0x1d0dd2,_0x4d71cb=Module[_0x44e98b(0x1c2)]()['filter'](_0x404688=>_0x404688!=='.'&&_0x404688!=='..');return _0x4d71cb;}export function embedTextInPngFile(_0x428527,_0x10c79c,_0xfea77c){const _0x5e10bd=a0_0x1d0dd2;let _0x5e4dda=atob(_0x428527[_0x5e10bd(0x1f6)](',')[0x1]),_0x48705f=new Uint8Array(_0x5e4dda[_0x5e10bd(0x1c8)]);for(let _0x26a0fa=0x0;_0x26a0fa<_0x5e4dda['length'];_0x26a0fa++){_0x48705f[_0x26a0fa]=_0x5e4dda[_0x5e10bd(0x1ce)](_0x26a0fa);}let _0x5b4b15=new TextEncoder()[_0x5e10bd(0x218)]('tEXtComment\x00'+_0x10c79c),_0x55b4af=new Uint8Array(_0x48705f['length']+_0x5b4b15['length']);_0x55b4af[_0x5e10bd(0x1cd)](_0x48705f,0x0),_0x55b4af['set'](_0x5b4b15,_0x48705f['length']);let _0x2b4b31=new Blob([_0x55b4af],{'type':_0x5e10bd(0x212)}),_0x5016be=new File([_0x2b4b31],_0xfea77c,{'type':'image/png'});return _0x5016be;}export function extractTextFromPngBase64(_0x502d65){const _0x2a7177=a0_0x1d0dd2;let _0x84c4a0=atob(_0x502d65[_0x2a7177(0x1f6)](',')[0x1]),_0x3de36f='tEXtComment\x00',_0x3dbc0e=_0x84c4a0[_0x2a7177(0x1d5)](_0x3de36f);if(_0x3dbc0e!==-0x1)return _0x84c4a0[_0x2a7177(0x1e8)](_0x3dbc0e+_0x3de36f[_0x2a7177(0x1c8)]);return null;}export function fileSize(_0x262c9d){const _0x41f5d9=a0_0x1d0dd2,_0x46d897=Module[_0x41f5d9(0x1cc)](_0x262c9d);return _0x46d897;}function a0_0x1125(){const _0x84f73a=['listScreenshots','files','_savedCheats','/data/states/','Paused!','click','length','includes','_slot0.txt','bottom','fileSize','set','charCodeAt','No\x20screenshot!','/data/games/','then','gbc1','96zymTqo','Online!','indexOf','gameName','autoLoadCheats','FSSync','Unable\x20to\x20upload\x20to\x20Cloud!','Cloud\x20upload\x20','#E0C068','216962QfQjoZ','revokeObjectURL','Off','downloadFile','Auto\x20save\x20','onLine','padStart','slotStateSaved','Resumed!','getItem','/data/screenshots/','SDL2','substring','16SRDTwC','add','FSInit','uploadRom','4967571JTzeiM','textContent','beforeunload','loadGame','134965gJCiag','buttonPress','resumeGame','filter','saveState','split','buttonUnpress','hidden','type','turboF','disable','setItem','_dateState0','\x20time(s)','replace','loadState','screenshot','href','body','endsWith','canvas','addEventListener','remove','appendChild','listStates','69340tOkmZo','.gb','log','2uNHfqf','visibilityState','0,0,','uploadAll','getElementById','image/png','innerWidth','editFileName','1793wuwcLM','deleteFile','pauseGame','encode','visibilitychange','.png','.ss0','createObjectURL','classList','732033SUGPPB','836328idUhkI','setFastForwardMultiplier','text/plain','screenSize','_imageState0','control-setting','1390144BaGTVZ','visible'];a0_0x1125=function(){return _0x84f73a;};return a0_0x1125();}export async function resumeGame(){const _0x3398b4=a0_0x1d0dd2;Module[_0x3398b4(0x1f3)](),Module[_0x3398b4(0x1e7)](),notiMessage(_0x3398b4(0x1e4),0x7d0);}export async function pauseGame(){const _0x176c51=a0_0x1d0dd2;Module[_0x176c51(0x217)](),Module['SDL2'](),notiMessage(_0x176c51(0x1c6),0x7d0);}export async function buttonPress(_0x23e62f){const _0xcc009a=a0_0x1d0dd2;Module[_0xcc009a(0x1f2)](_0x23e62f);}export async function buttonUnpress(_0x26b076){const _0x396f2e=a0_0x1d0dd2;Module[_0x396f2e(0x1f7)](_0x26b076);}export async function screenShot(_0x2e76b1){const _0x4d92a1=a0_0x1d0dd2,_0x17bee9=localStorage[_0x4d92a1(0x1e5)](_0x4d92a1(0x1d6))[_0x4d92a1(0x1ff)](/\.(gba|gbc|gb|zip)$/,''),_0x4afb5c=_0x17bee9+'_'+_0x2e76b1+_0x4d92a1(0x21a);await Module[_0x4d92a1(0x201)](_0x4afb5c),await Module[_0x4d92a1(0x1d8)]();const _0x2cf011=await fileToBase64(Module['downloadFile'](_0x4d92a1(0x1e6)+_0x4afb5c)),_0x5b0c67=embedTextInPngFile(_0x2cf011,formatDateTime(Date['now']()),_0x4afb5c);await uploadSaveOrSaveState(_0x5b0c67);}export async function dowloadScreenShot(_0x1b4f0f){const _0x2ef1c6=a0_0x1d0dd2;try{const _0x3522d4=await fileToBase64(Module[_0x2ef1c6(0x1df)](_0x1b4f0f));return _0x3522d4;}catch{}}export async function captureOCR(_0x16a9bf){const _0x1a8a34=a0_0x1d0dd2;Module[_0x1a8a34(0x201)](_0x16a9bf);const _0x36cecb=Module[_0x1a8a34(0x1df)](_0x1a8a34(0x1e6)+_0x16a9bf);return _0x36cecb;}export async function setFastForwardMultiplier(_0x2f8605){const _0x1fb246=a0_0x1d0dd2;Module[_0x1fb246(0x1bb)](_0x2f8605);}function a0_0x5aca(_0x6b2312,_0x5f45c3){const _0x112508=a0_0x1125();return a0_0x5aca=function(_0x5aca67,_0x3220d3){_0x5aca67=_0x5aca67-0x1b8;let _0x138820=_0x112508[_0x5aca67];return _0x138820;},a0_0x5aca(_0x6b2312,_0x5f45c3);}export function uploadCheats(_0x12bc46,_0x5042a0,_0x2eedf3,_0x55f7dd,_0x1f6eaf){Module['uploadAll'](_0x12bc46,()=>{const _0x2b2bde=a0_0x5aca;Module[_0x2b2bde(0x1d7)](),setTimeout(()=>{const _0x3756fa=_0x2b2bde;Module[_0x3756fa(0x1d8)]();},0x1f4),_0x55f7dd&&(localStorage[_0x2b2bde(0x1fc)](_0x5042a0+_0x2b2bde(0x1c4),_0x2eedf3),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x1f6eaf[_0x2b2bde(0x1ee)]=localStorage['getItem'](_0x5042a0+_0x2b2bde(0x1c4)||_0x2b2bde(0x1de));});}