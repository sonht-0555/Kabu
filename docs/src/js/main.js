const a0_0x3b0340=a0_0x596f;(function(_0x590126,_0x5b4cb4){const _0x59340c=a0_0x596f,_0x2b86b9=_0x590126();while(!![]){try{const _0x1662d8=parseInt(_0x59340c(0x1d6))/0x1*(-parseInt(_0x59340c(0x1fa))/0x2)+-parseInt(_0x59340c(0x1c1))/0x3+-parseInt(_0x59340c(0x1b2))/0x4*(parseInt(_0x59340c(0x1dd))/0x5)+-parseInt(_0x59340c(0x1bd))/0x6*(-parseInt(_0x59340c(0x1bf))/0x7)+-parseInt(_0x59340c(0x1c2))/0x8*(parseInt(_0x59340c(0x1cb))/0x9)+-parseInt(_0x59340c(0x1f4))/0xa+parseInt(_0x59340c(0x1ee))/0xb;if(_0x1662d8===_0x5b4cb4)break;else _0x2b86b9['push'](_0x2b86b9['shift']());}catch(_0x33d134){_0x2b86b9['push'](_0x2b86b9['shift']());}}}(a0_0x2ee0,0xcf877));import a0_0x38a4d6 from'../core/mgba.js';import*as a0_0x30c52e from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document[a0_0x3b0340(0x1a3)](a0_0x3b0340(0x1e4))};function initializeCore(_0x17baa8,_0x50d706){const _0x18c512=a0_0x3b0340;_0x17baa8(_0x50d706)[_0x18c512(0x1c4)](function(_0x186372){const _0x1826e7=_0x18c512;_0x186372[_0x1826e7(0x1da)]();});}initializeCore(a0_0x38a4d6,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x3b0340(0x1a3)](a0_0x3b0340(0x1e4)),savedTurboState=localStorage[a0_0x3b0340(0x1d9)]('turboState'),controlSetting=document['getElementById'](a0_0x3b0340(0x1f6));function handleVisibilityChange(_0x35774f){const _0x241fd7=a0_0x3b0340;document[_0x241fd7(0x1d0)]===_0x241fd7(0x205)||_0x35774f?.[_0x241fd7(0x1e9)]==='beforeunload'||_0x35774f?.[_0x241fd7(0x1b6)]?(pauseGame(),canvas['classList']['add'](_0x241fd7(0x1d4))):(setTimeout(()=>{const _0x534282=_0x241fd7;canvas[_0x534282(0x1f2)][_0x534282(0x1b9)](_0x534282(0x1d4));},0x258),controlSetting[_0x241fd7(0x1f2)]['contains'](_0x241fd7(0x1d4))&&resumeGame());}async function statusShow(){const _0x57d9bf=a0_0x3b0340;document['addEventListener'](_0x57d9bf(0x1a4),handleVisibilityChange),document[_0x57d9bf(0x1e0)]('visibilitychange',handleVisibilityChange),window[_0x57d9bf(0x1e0)](_0x57d9bf(0x1ef),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x30c52e[_0x57d9bf(0x1e7)](turboState)),await delay(0xc8),await Module[_0x57d9bf(0x1bb)](),await delay(0x320),await led(parseInt(localStorage[_0x57d9bf(0x1d9)](_0x57d9bf(0x1a9)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x1b1cb9=a0_0x3b0340;await ledSave(_0x1b1cb9(0x1de)),await Module['saveState'](0x0),await Module[_0x1b1cb9(0x1ea)](),await screenShot(0x0),console[_0x1b1cb9(0x1a2)](_0x1b1cb9(0x203)+ ++countAutoSave+_0x1b1cb9(0x1cd));}async function saveStateInCloud(){const _0x36ac8f=a0_0x3b0340,_0x146dc6=localStorage['getItem'](_0x36ac8f(0x1e5)),_0x2bae00=_0x146dc6[_0x36ac8f(0x1e8)](/\.(zip|gb|gbc|gba)$/,_0x36ac8f(0x1cc)),_0xd957ed=localStorage[_0x36ac8f(0x1d9)]('uId');navigator[_0x36ac8f(0x1ce)]&&(_0xd957ed&&(await ledSave(_0x36ac8f(0x1ac)),await delay(0x3e8),await dpUploadFile(_0x2bae00,Module['downloadFile']('/data/states/'+_0x2bae00),_0x36ac8f(0x1d2)),await lockNoti('',_0x36ac8f(0x1c8)+ ++countUpload+_0x36ac8f(0x1cd),0x7d0)));}function startTimer(){let [_0xf2c12f,_0x31e1b3,_0x6be432,_0x2733c3,_0x523ed3]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x4d7532=a0_0x596f;_0x6be432++,_0x2733c3++,_0x523ed3++;if(_0x6be432===0x3c)[_0x6be432,_0x31e1b3]=[0x0,_0x31e1b3+0x1];if(_0x31e1b3===0x3c)[_0x31e1b3,_0xf2c12f]=[0x0,_0xf2c12f+0x1];document[_0x4d7532(0x1a3)](_0x4d7532(0x1be))['textContent']=_0xf2c12f+'h'+_0x31e1b3[_0x4d7532(0x1af)]()[_0x4d7532(0x1f5)](0x2,'0')+'.'+_0x6be432[_0x4d7532(0x1af)]()['padStart'](0x2,'0');_0x2733c3===0x3c&&(saveStatePeriodically(),_0x2733c3=0x0);;_0x523ed3===0x708&&(saveStateInCloud(),_0x523ed3=0x0);;},0x3e8);}export async function uploadGame(_0x5a5ee0){const _0x218421=a0_0x3b0340,_0xf34d84=_0x5a5ee0[_0x218421(0x1fd)][0x0];Module['uploadRom'](_0xf34d84,()=>{const _0x1f541b=_0x218421;Module[_0x1f541b(0x1ea)]();});}export async function loadGame(_0xaebb8e){const _0x50e9c4=a0_0x3b0340,_0x25ab27=_0xaebb8e[_0x50e9c4(0x1e8)](/\.(gba|gbc|gb|zip)$/,_0x50e9c4(0x1cc)),_0x23e880=Module[_0x50e9c4(0x1a8)]()[_0x50e9c4(0x1fe)](_0x3e2800=>_0x3e2800!=='.'&&_0x3e2800!=='..');intro[_0x50e9c4(0x1f2)][_0x50e9c4(0x1cf)](_0x50e9c4(0x1d7)),errorLogElements[0x0][_0x50e9c4(0x1e2)]['bottom']='0',ingame[_0x50e9c4(0x1f2)]['remove']('disable'),_0xaebb8e['endsWith'](_0x50e9c4(0x1f9))||_0xaebb8e[_0x50e9c4(0x1c0)](_0x50e9c4(0x1b8))?(canvas[_0x50e9c4(0x1f2)][_0x50e9c4(0x1cf)](_0x50e9c4(0x1a6)),areaTrans[_0x50e9c4(0x1f2)][_0x50e9c4(0x1cf)]('gbc1'),localStorage[_0x50e9c4(0x1aa)](_0x50e9c4(0x1fb),'0,0,'+(window['innerWidth']-0xe6)+','+(window[_0x50e9c4(0x1c5)]-0xe6)*0x9/0xa)):localStorage[_0x50e9c4(0x1aa)]('screenSize','0,0,'+(window['innerWidth']-0x96)+','+(window[_0x50e9c4(0x1c5)]-0x96)*0x2/0x3),_0x23e880[_0x50e9c4(0x1ad)](_0x25ab27)?(await Module[_0x50e9c4(0x1c9)](_0x50e9c4(0x1e1)+_0xaebb8e),confirm(_0x50e9c4(0x1f7))&&(await Module[_0x50e9c4(0x1d5)](0x0),localStorage[_0x50e9c4(0x1aa)](_0x50e9c4(0x1e5),_0xaebb8e),console[_0x50e9c4(0x1a2)](_0xaebb8e))):(await Module[_0x50e9c4(0x1c9)](_0x50e9c4(0x1e1)+_0xaebb8e),localStorage[_0x50e9c4(0x1aa)](_0x50e9c4(0x1e5),_0xaebb8e),console[_0x50e9c4(0x1a2)](_0xaebb8e)),await statusShow();}export async function saveState(_0x342586){const _0x352125=a0_0x3b0340;await Module[_0x352125(0x1ba)](_0x342586),await Module[_0x352125(0x1ea)]();}export async function loadState(_0x464b09){const _0x46c2a6=a0_0x3b0340;await Module[_0x46c2a6(0x1d5)](_0x464b09);}export async function downloadFile(_0x26db93,_0x3757ec){const _0x18a072=a0_0x3b0340,_0x5cd694=Module['downloadFile'](_0x26db93),_0x524966=document['createElement']('a');document[_0x18a072(0x1fc)][_0x18a072(0x1ec)](_0x524966),_0x524966[_0x18a072(0x1df)]=_0x3757ec;const _0x3f98a5=new Blob([_0x5cd694],{'type':_0x18a072(0x1b3)});_0x524966[_0x18a072(0x1c7)]=URL[_0x18a072(0x1ae)](_0x3f98a5),_0x524966[_0x18a072(0x1c6)](),URL['revokeObjectURL'](_0x3f98a5),_0x524966[_0x18a072(0x1b9)]();}export function downloadFileInCloud(_0x3d3299){const _0x211840=Module['downloadFile'](_0x3d3299);return _0x211840;}export async function uploadFileInCloud(_0x136cb4){const _0x1f2025=a0_0x3b0340;Module[_0x1f2025(0x1b7)](_0x136cb4,()=>{const _0x4d1306=_0x1f2025;localStorageFile(),Module[_0x4d1306(0x1ea)]();});}export async function uploadFile(_0x5b80a7){const _0x42c895=a0_0x3b0340,_0x36d2fd=_0x5b80a7[_0x42c895(0x1fd)][0x0];Module[_0x42c895(0x1b7)](_0x36d2fd,()=>{const _0x15f0b5=_0x42c895;localStorageFile(),Module[_0x15f0b5(0x1ea)]();});}export async function editFile(_0x522e57,_0x28585a,_0x5c9155){const _0x3b2d35=a0_0x3b0340;await Module[_0x3b2d35(0x202)](_0x522e57,_0x28585a,_0x5c9155),await Module[_0x3b2d35(0x1ea)]();}export async function deleteFile(_0x33fbf6){const _0x27421b=a0_0x3b0340;await Module[_0x27421b(0x1ab)](_0x33fbf6),await Module['FSSync']();}export function listGame(){const _0x2b4bf9=a0_0x3b0340,_0x1be706=Module[_0x2b4bf9(0x200)]()['filter'](_0x2cf775=>_0x2cf775!=='.'&&_0x2cf775!=='..');return _0x1be706;}export function listSave(){const _0x55e55d=a0_0x3b0340,_0x1436fb=Module['listSaves']()[_0x55e55d(0x1fe)](_0x58e942=>_0x58e942!=='.'&&_0x58e942!=='..');return _0x1436fb;}export function listState(){const _0x1009b9=a0_0x3b0340,_0x390171=Module[_0x1009b9(0x1a8)]()[_0x1009b9(0x1fe)](_0x1e08ab=>_0x1e08ab!=='.'&&_0x1e08ab!=='..');return _0x390171;}function a0_0x2ee0(){const _0x1b1393=['setFastForwardMultiplier','Off','persisted','uploadAll','.gb','remove','saveState','SDL2','pauseGame','48rZvzzG','timer','1220730DTfKkT','endsWith','3868920ZVvefu','16KuxCWR','image/png','then','innerWidth','click','href','Cloud\x20upload\x20','loadGame','now','2422737quOGMq','.ss0','\x20time(s)','onLine','add','visibilityState','encode','state','Cheat\x20Enabled!','visible','loadState','7986kBhNXc','disable','charCodeAt','getItem','FSInit','fileSize','.png','85VhxoVB','#20A5A6','download','addEventListener','/data/games/','style','listScreenshots','canvas','gameName','length','turboF','replace','type','FSSync','tEXtComment\x00','appendChild','textContent','47351381ColSEu','beforeunload','screenshot','split','classList','Resumed!','14060590QhahrS','padStart','control-setting','Do\x20you\x20want\x20to\x20load\x20save\x20state?','substring','.gbc','100HqPsKv','screenSize','body','files','filter','_savedCheats','listRoms','downloadFile','editFileName','Auto\x20save\x20','buttonPress','hidden','log','getElementById','pagehide','set','gbc','autoLoadCheats','listStates','slotStateSaved','setItem','deleteFile','#E0C068','includes','createObjectURL','toString','/data/screenshots/','resumeGame','286204wRewXC','application/octet-stream'];a0_0x2ee0=function(){return _0x1b1393;};return a0_0x2ee0();}export function listCheat(){const _0x2a3fc2=Module['listCheats']()['filter'](_0x15c774=>_0x15c774!=='.'&&_0x15c774!=='..');return _0x2a3fc2;}export function listScreenshot(){const _0x385eec=a0_0x3b0340,_0x3fdcb9=Module[_0x385eec(0x1e3)]()[_0x385eec(0x1fe)](_0x2c9334=>_0x2c9334!=='.'&&_0x2c9334!=='..');return _0x3fdcb9;}export function embedTextInPngFile(_0x5d17a0,_0x5e1671,_0x44ba43){const _0x486dde=a0_0x3b0340;let _0x573260=atob(_0x5d17a0[_0x486dde(0x1f1)](',')[0x1]),_0x3767dc=new Uint8Array(_0x573260[_0x486dde(0x1e6)]);for(let _0x2dd600=0x0;_0x2dd600<_0x573260[_0x486dde(0x1e6)];_0x2dd600++){_0x3767dc[_0x2dd600]=_0x573260[_0x486dde(0x1d8)](_0x2dd600);}let _0x36ec8e=new TextEncoder()[_0x486dde(0x1d1)](_0x486dde(0x1eb)+_0x5e1671),_0x4176be=new Uint8Array(_0x3767dc[_0x486dde(0x1e6)]+_0x36ec8e[_0x486dde(0x1e6)]);_0x4176be[_0x486dde(0x1a5)](_0x3767dc,0x0),_0x4176be[_0x486dde(0x1a5)](_0x36ec8e,_0x3767dc[_0x486dde(0x1e6)]);let _0x208fe1=new Blob([_0x4176be],{'type':_0x486dde(0x1c3)}),_0x541ba1=new File([_0x208fe1],_0x44ba43,{'type':_0x486dde(0x1c3)});return _0x541ba1;}export function extractTextFromPngBase64(_0x56893b){const _0x297fd1=a0_0x3b0340;let _0x4db9fb=atob(_0x56893b[_0x297fd1(0x1f1)](',')[0x1]),_0x1b1cbc='tEXtComment\x00',_0x2879ed=_0x4db9fb['indexOf'](_0x1b1cbc);if(_0x2879ed!==-0x1)return _0x4db9fb[_0x297fd1(0x1f8)](_0x2879ed+_0x1b1cbc['length']);return null;}export function fileSize(_0x584f07){const _0x6dcd0a=a0_0x3b0340,_0x54f1b3=Module[_0x6dcd0a(0x1db)](_0x584f07);return _0x54f1b3;}export async function resumeGame(){const _0x2708dc=a0_0x3b0340;Module[_0x2708dc(0x1b1)](),Module[_0x2708dc(0x1bb)](),notiMessage(_0x2708dc(0x1f3),0x7d0);}export async function pauseGame(){const _0x4b2d57=a0_0x3b0340;Module[_0x4b2d57(0x1bc)](),Module[_0x4b2d57(0x1bb)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x197049){const _0x20d32b=a0_0x3b0340;Module[_0x20d32b(0x204)](_0x197049);}export async function buttonUnpress(_0x17a269){Module['buttonUnpress'](_0x17a269);}export async function screenShot(_0x123d20){const _0x39442d=a0_0x3b0340,_0x5c4404=localStorage['getItem'](_0x39442d(0x1e5))[_0x39442d(0x1e8)](/\.(gba|gbc|gb|zip)$/,''),_0x4cf31d=_0x5c4404+'_'+_0x123d20+_0x39442d(0x1dc);await Module[_0x39442d(0x1f0)](_0x4cf31d),await Module[_0x39442d(0x1ea)]();const _0x56f9ba=await fileToBase64(Module[_0x39442d(0x201)](_0x39442d(0x1b0)+_0x4cf31d)),_0x314451=embedTextInPngFile(_0x56f9ba,formatDateTime(Date[_0x39442d(0x1ca)]()),_0x4cf31d);Module[_0x39442d(0x1b7)](_0x314451,()=>{const _0x3bb299=_0x39442d;localStorageFile(),Module[_0x3bb299(0x1ea)]();});}export async function dowloadScreenShot(_0x44291a){const _0x1370ca=a0_0x3b0340;try{const _0x2b8c24=await fileToBase64(Module[_0x1370ca(0x201)](_0x44291a));return _0x2b8c24;}catch{}}function a0_0x596f(_0x313bdd,_0xda5f4){const _0x2ee037=a0_0x2ee0();return a0_0x596f=function(_0x596fbb,_0x389073){_0x596fbb=_0x596fbb-0x1a2;let _0x3edd9e=_0x2ee037[_0x596fbb];return _0x3edd9e;},a0_0x596f(_0x313bdd,_0xda5f4);}export async function captureOCR(_0xc0e37e){const _0x55654c=a0_0x3b0340;Module[_0x55654c(0x1f0)](_0xc0e37e);const _0x453dc3=Module['downloadFile']('/data/screenshots/'+_0xc0e37e);return _0x453dc3;}export async function setFastForwardMultiplier(_0x297b3e){const _0x2753d2=a0_0x3b0340;Module[_0x2753d2(0x1b4)](_0x297b3e);}export function uploadCheats(_0x584a2c,_0x2f1ba0,_0x2def57,_0x3faa38,_0x3c6d62){const _0x9814be=a0_0x3b0340;Module[_0x9814be(0x1b7)](_0x584a2c,()=>{const _0x2536fd=_0x9814be;Module[_0x2536fd(0x1a7)](),setTimeout(()=>{Module['FSSync']();},0x1f4),_0x3faa38&&(localStorage[_0x2536fd(0x1aa)](_0x2f1ba0+_0x2536fd(0x1ff),_0x2def57),notiMessage(_0x2536fd(0x1d3),0x5dc)),_0x3c6d62[_0x2536fd(0x1ed)]=localStorage[_0x2536fd(0x1d9)](_0x2f1ba0+_0x2536fd(0x1ff)||_0x2536fd(0x1b5));});}export function setVolume(_0x2eada5){Module['setVolume'](_0x2eada5);}