const a0_0x150e3a=a0_0x1b46;(function(_0x39cdb3,_0xb7eb0a){const _0x5b61f8=a0_0x1b46,_0x45b95d=_0x39cdb3();while(!![]){try{const _0x1b4aa4=parseInt(_0x5b61f8(0x1d3))/0x1+-parseInt(_0x5b61f8(0x1ea))/0x2*(-parseInt(_0x5b61f8(0x191))/0x3)+-parseInt(_0x5b61f8(0x1e3))/0x4+parseInt(_0x5b61f8(0x1da))/0x5+parseInt(_0x5b61f8(0x1e2))/0x6+parseInt(_0x5b61f8(0x1c8))/0x7+-parseInt(_0x5b61f8(0x1f1))/0x8;if(_0x1b4aa4===_0xb7eb0a)break;else _0x45b95d['push'](_0x45b95d['shift']());}catch(_0x16356a){_0x45b95d['push'](_0x45b95d['shift']());}}}(a0_0x3f0e,0xc256f));import a0_0x5a715a from'../core/mgba.js';import*as a0_0x212e29 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x150e3a(0x1a1)](a0_0x150e3a(0x1ab))};function initializeCore(_0xd4eb23,_0x234fb6){_0xd4eb23(_0x234fb6)['then'](function(_0x91873b){const _0x509da9=a0_0x1b46;_0x91873b[_0x509da9(0x1b5)]();});}initializeCore(a0_0x5a715a,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;function a0_0x1b46(_0x5b3b72,_0x13907a){const _0x3f0e1a=a0_0x3f0e();return a0_0x1b46=function(_0x1b46d3,_0x438f48){_0x1b46d3=_0x1b46d3-0x191;let _0x4d2744=_0x3f0e1a[_0x1b46d3];return _0x4d2744;},a0_0x1b46(_0x5b3b72,_0x13907a);}const canvas=document[a0_0x150e3a(0x1a1)](a0_0x150e3a(0x1ab)),savedTurboState=localStorage[a0_0x150e3a(0x1cd)](a0_0x150e3a(0x1b6)),controlSetting=document[a0_0x150e3a(0x1a1)](a0_0x150e3a(0x1a0));function handleVisibilityChange(_0x276371){const _0x11b0e1=a0_0x150e3a;document[_0x11b0e1(0x1e7)]===_0x11b0e1(0x1bb)||_0x276371?.[_0x11b0e1(0x1a8)]===_0x11b0e1(0x1b3)||_0x276371?.[_0x11b0e1(0x1b2)]?(pauseGame(),canvas[_0x11b0e1(0x1bd)][_0x11b0e1(0x1bc)]('visible')):(setTimeout(()=>{const _0x308107=_0x11b0e1;canvas[_0x308107(0x1bd)][_0x308107(0x1ce)](_0x308107(0x1d1));},0x258),controlSetting[_0x11b0e1(0x1bd)][_0x11b0e1(0x1a9)](_0x11b0e1(0x1d1))&&resumeGame());}async function statusShow(){const _0x4e89a1=a0_0x150e3a;document[_0x4e89a1(0x195)](_0x4e89a1(0x1a4),handleVisibilityChange),document['addEventListener'](_0x4e89a1(0x1b0),handleVisibilityChange),window[_0x4e89a1(0x195)](_0x4e89a1(0x1b3),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x212e29[_0x4e89a1(0x1df)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x4e89a1(0x1cd)]('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x4e3276=a0_0x150e3a;await ledSave(_0x4e3276(0x1c5)),await Module[_0x4e3276(0x1ba)](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x4e3276(0x1f0)](_0x4e3276(0x1e9)+ ++countAutoSave+_0x4e3276(0x19f));}async function saveStateInCloud(){const _0x205a56=a0_0x150e3a,_0x13a248=localStorage['getItem'](_0x205a56(0x1b1)),_0x44e86c=_0x13a248[_0x205a56(0x1eb)]('.gba',_0x205a56(0x1dd)),_0x10d3c7=localStorage[_0x205a56(0x1cd)](_0x205a56(0x1d7)),_0x216745=localStorage[_0x205a56(0x1cd)](_0x13a248+_0x205a56(0x1b7)),_0x5893c0=localStorage['getItem'](_0x13a248+_0x205a56(0x1bf));if(navigator['onLine']){if(_0x10d3c7){await ledSave(_0x205a56(0x1c2)),await delay(0x3e8),await dpUploadFile(_0x44e86c,Module[_0x205a56(0x1ee)](_0x205a56(0x1ad)+_0x44e86c));if(_0x216745!==null){const _0x4b33a4=_0x216745+'\x0a\x0a'+_0x5893c0,_0x251291=new Blob([_0x4b33a4],{'type':_0x205a56(0x1d9)});await dpUploadFile(_0x13a248+_0x205a56(0x1f5),_0x251291);}else console['log'](_0x205a56(0x1db));await lockNoti('',_0x205a56(0x1be)+ ++countUpload+_0x205a56(0x19f),0x7d0);}else console[_0x205a56(0x1f0)](_0x205a56(0x1d4));}else console[_0x205a56(0x1f0)](_0x205a56(0x1e8));}function startTimer(){let [_0xac40fd,_0x58f100,_0x4a4ffb,_0x1fc1a7,_0x3acb08]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x24b32e=a0_0x1b46;_0x4a4ffb++,_0x1fc1a7++,_0x3acb08++;if(_0x4a4ffb===0x3c)[_0x4a4ffb,_0x58f100]=[0x0,_0x58f100+0x1];if(_0x58f100===0x3c)[_0x58f100,_0xac40fd]=[0x0,_0xac40fd+0x1];document[_0x24b32e(0x1a1)](_0x24b32e(0x1cf))['textContent']=_0xac40fd+'h'+_0x58f100[_0x24b32e(0x1e0)]()['padStart'](0x2,'0')+'.'+_0x4a4ffb['toString']()['padStart'](0x2,'0');_0x1fc1a7===0x3c&&(saveStatePeriodically(),_0x1fc1a7=0x0);;_0x1fc1a7===0xe10&&(saveStateInCloud(),_0x3acb08=0x0);;},0x3e8);}export async function uploadGame(_0x455ba2){const _0x4cf651=a0_0x150e3a,_0x593c5c=_0x455ba2[_0x4cf651(0x1fb)][0x0];Module[_0x4cf651(0x1e6)](_0x593c5c,()=>{const _0x46589c=_0x4cf651;Module[_0x46589c(0x1f2)]();});}export async function loadGame(_0x1f829a){const _0x5cc63c=a0_0x150e3a,_0x494679=_0x1f829a[_0x5cc63c(0x1eb)](/\.(gba|gbc|gb|zip)$/,_0x5cc63c(0x1dd)),_0x3a3f07=Module[_0x5cc63c(0x198)]()[_0x5cc63c(0x1b8)](_0x505518=>_0x505518!=='.'&&_0x505518!=='..');intro['classList'][_0x5cc63c(0x1bc)](_0x5cc63c(0x193)),errorLogElements[0x0][_0x5cc63c(0x1ed)][_0x5cc63c(0x1f3)]='0',ingame[_0x5cc63c(0x1bd)][_0x5cc63c(0x1ce)](_0x5cc63c(0x193)),_0x1f829a[_0x5cc63c(0x1a6)]('.gbc')||_0x1f829a[_0x5cc63c(0x1a6)](_0x5cc63c(0x1cb))?(canvas[_0x5cc63c(0x1bd)]['add'](_0x5cc63c(0x1e4)),areaTrans[_0x5cc63c(0x1bd)][_0x5cc63c(0x1bc)](_0x5cc63c(0x1c3)),localStorage[_0x5cc63c(0x1ae)](_0x5cc63c(0x1a7),_0x5cc63c(0x1a2)+(window[_0x5cc63c(0x196)]-0xe6)+','+(window[_0x5cc63c(0x196)]-0xe6)*0x9/0xa)):localStorage['setItem'](_0x5cc63c(0x1a7),'0,0,'+(window[_0x5cc63c(0x196)]-0x96)+','+(window[_0x5cc63c(0x196)]-0x96)*0x2/0x3),_0x3a3f07[_0x5cc63c(0x1dc)](_0x494679)?(await Module['loadGame']('/data/games/'+_0x1f829a),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await Module[_0x5cc63c(0x1e5)](0x0),localStorage[_0x5cc63c(0x1ae)](_0x5cc63c(0x1b1),_0x1f829a),console['log'](_0x1f829a))):(await Module[_0x5cc63c(0x19a)](_0x5cc63c(0x1ac)+_0x1f829a),localStorage[_0x5cc63c(0x1ae)](_0x5cc63c(0x1b1),_0x1f829a)),await statusShow();}export async function saveState(_0x263e20){const _0x3d4ce0=a0_0x150e3a;await Module[_0x3d4ce0(0x1ba)](_0x263e20),await Module[_0x3d4ce0(0x1f2)]();}export async function loadState(_0x19b90b){const _0x44eeb3=a0_0x150e3a;await Module[_0x44eeb3(0x1e5)](_0x19b90b);}export async function downloadFile(_0x1edac4,_0x299d69){const _0x3739c6=a0_0x150e3a,_0x34a8fe=Module['downloadFile'](_0x1edac4),_0x974c0=document[_0x3739c6(0x1ca)]('a');document[_0x3739c6(0x1f7)][_0x3739c6(0x192)](_0x974c0),_0x974c0[_0x3739c6(0x1f4)]=_0x299d69;const _0x5ee230=new Blob([_0x34a8fe],{'type':'application/octet-stream'});_0x974c0[_0x3739c6(0x19b)]=URL[_0x3739c6(0x1d8)](_0x5ee230),_0x974c0[_0x3739c6(0x1c0)](),URL[_0x3739c6(0x1b4)](_0x5ee230),_0x974c0['remove']();}export function downloadFileInCloud(_0x46704e){const _0x5c2a3f=Module['downloadFile'](_0x46704e);return _0x5c2a3f;}export async function uploadFile(_0xfd69fb){const _0x2d1fd1=a0_0x150e3a,_0x16d47b=_0xfd69fb['files'][0x0];Module[_0x2d1fd1(0x1d2)](_0x16d47b,()=>{const _0x2709e7=_0x2d1fd1;Module[_0x2709e7(0x1f2)]();});}export async function editFile(_0x10ec05,_0x3b2e15,_0x31131a){const _0x5e1b25=a0_0x150e3a;await Module[_0x5e1b25(0x1f8)](_0x10ec05,_0x3b2e15,_0x31131a),await Module[_0x5e1b25(0x1f2)]();}export async function deleteFile(_0x130e25){const _0x407737=a0_0x150e3a;await Module[_0x407737(0x1c7)](_0x130e25),await Module[_0x407737(0x1f2)]();}export function listGame(){const _0x58f89b=a0_0x150e3a,_0x44161d=Module['listRoms']()[_0x58f89b(0x1b8)](_0x454fac=>_0x454fac!=='.'&&_0x454fac!=='..');return _0x44161d;}export function listSave(){const _0x4913c3=a0_0x150e3a,_0x4eb683=Module[_0x4913c3(0x1c6)]()[_0x4913c3(0x1b8)](_0x1e3e3f=>_0x1e3e3f!=='.'&&_0x1e3e3f!=='..');return _0x4eb683;}export function listState(){const _0x25c993=a0_0x150e3a,_0x3e7ebb=Module[_0x25c993(0x198)]()[_0x25c993(0x1b8)](_0x3fd5da=>_0x3fd5da!=='.'&&_0x3fd5da!=='..');return _0x3e7ebb;}export function listCheat(){const _0x875f8d=a0_0x150e3a,_0xb1e9e9=Module[_0x875f8d(0x199)]()[_0x875f8d(0x1b8)](_0x38f6f4=>_0x38f6f4!=='.'&&_0x38f6f4!=='..');return _0xb1e9e9;}export function listScreenshot(){const _0x273409=a0_0x150e3a,_0x443ffb=Module[_0x273409(0x19c)]()[_0x273409(0x1b8)](_0x3c3eb8=>_0x3c3eb8!=='.'&&_0x3c3eb8!=='..');return _0x443ffb;}export function fileSize(_0xc22270){const _0x43d9e3=a0_0x150e3a,_0x5acb74=Module[_0x43d9e3(0x1c1)](_0xc22270);return _0x5acb74;}export async function uploadCheat(_0x1c6e6b){const _0x156dba=a0_0x150e3a;try{const _0x1959b6=_0x1c6e6b[_0x156dba(0x1fb)][0x0];await Module[_0x156dba(0x1aa)](_0x1959b6,()=>{const _0x2e4b56=_0x156dba;console[_0x2e4b56(0x1f0)](_0x2e4b56(0x1ec),_0x1959b6[_0x2e4b56(0x1b9)]),localStorageFile(),Module[_0x2e4b56(0x1f2)]();});}catch(_0x573abf){console[_0x156dba(0x1e1)](_0x156dba(0x1d0),_0x573abf);}}export async function uploadSavSta(_0x1a9ebf){const _0x3e22d5=a0_0x150e3a;try{const _0x2e8a0c=_0x1a9ebf[_0x3e22d5(0x1fb)][0x0];await Module[_0x3e22d5(0x1d2)](_0x2e8a0c,()=>{const _0x5bd23f=_0x3e22d5;console['log']('Save/State\x20uploaded\x20successfully:',_0x2e8a0c[_0x5bd23f(0x1b9)]),localStorageFile(),Module[_0x5bd23f(0x1f2)]();});}catch(_0x1939f8){console['error'](_0x3e22d5(0x1d5),_0x1939f8);}}export async function uploadSaveOrSaveState(_0x17acd8){Module['uploadSaveOrSaveState'](_0x17acd8,()=>{const _0x5f0013=a0_0x1b46;localStorageFile(),Module[_0x5f0013(0x1f2)]();});}export async function resumeGame(){const _0x4a9d97=a0_0x150e3a;Module[_0x4a9d97(0x1f6)](),Module[_0x4a9d97(0x1af)](),notiMessage(_0x4a9d97(0x194),0x7d0);}export async function pauseGame(){const _0x1eb680=a0_0x150e3a;Module[_0x1eb680(0x1fa)](),Module[_0x1eb680(0x1af)](),notiMessage(_0x1eb680(0x1a5),0x7d0);}export async function buttonPress(_0x259808){const _0x37de6a=a0_0x150e3a;Module[_0x37de6a(0x1f9)](_0x259808);}export async function buttonUnpress(_0x25ec0){const _0x986836=a0_0x150e3a;Module[_0x986836(0x1a3)](_0x25ec0);}export async function screenShot(_0x3c6141){const _0x4d7da3=a0_0x150e3a,_0x2f1d4a=localStorage['getItem'](_0x4d7da3(0x1b1)),_0x41812b=_0x2f1d4a[_0x4d7da3(0x1eb)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x4d7da3(0x1de)](''+_0x41812b+_0x3c6141+_0x4d7da3(0x1ef)),await Module[_0x4d7da3(0x1f2)]();const _0x211714=await fileToBase64(Module[_0x4d7da3(0x1ee)](_0x4d7da3(0x1d6)+_0x41812b+_0x3c6141+_0x4d7da3(0x1ef))),_0x48e7a=Date[_0x4d7da3(0x19d)](),_0x4274ee=formatDateTime(_0x48e7a);localStorage[_0x4d7da3(0x1ae)](_0x2f1d4a+_0x4d7da3(0x1c9)+_0x3c6141,_0x4274ee),localStorage[_0x4d7da3(0x1ae)](_0x2f1d4a+'_imageState'+_0x3c6141,_0x211714);}export async function captureOCR(_0x5a98da){const _0x2503d7=a0_0x150e3a;Module[_0x2503d7(0x1de)](_0x5a98da);const _0x5a0cca=Module['downloadFile'](_0x2503d7(0x1d6)+_0x5a98da);return _0x5a0cca;}export async function setFastForwardMultiplier(_0x3a9025){const _0x23d856=a0_0x150e3a;Module[_0x23d856(0x1cc)](_0x3a9025);}export function uploadCheats(_0x330d7f,_0x4a9272,_0x39d470,_0x292e32,_0x3bb309){const _0x3c7c8a=a0_0x150e3a;Module[_0x3c7c8a(0x1aa)](_0x330d7f,()=>{const _0x4c7830=_0x3c7c8a;Module[_0x4c7830(0x1c4)](),setTimeout(()=>{const _0x26b99e=_0x4c7830;Module[_0x26b99e(0x1f2)]();},0x1f4),_0x292e32&&(localStorage[_0x4c7830(0x1ae)](_0x4a9272+'_savedCheats',_0x39d470),notiMessage(_0x4c7830(0x197),0x5dc)),_0x3bb309['textContent']=localStorage[_0x4c7830(0x1cd)](_0x4a9272+'_savedCheats'||_0x4c7830(0x19e));});}function a0_0x3f0e(){const _0xddccc7=['/data/games/','/data/states/','setItem','SDL2','visibilitychange','gameName','persisted','beforeunload','revokeObjectURL','FSInit','turboState','_imageState0','filter','name','saveState','hidden','add','classList','Cloud\x20upload\x20','_dateState0','click','fileSize','#E0C068','gbc1','autoLoadCheats','#20A5A6','listSaves','deleteFile','7710878CJHpDm','_dateState','createElement','.gb','setFastForwardMultiplier','getItem','remove','timer','Error\x20uploadCheat:','visible','uploadSaveOrSaveState','1449674DYFUWI','Unable\x20to\x20upload\x20to\x20Cloud!','Error\x20uploadSavSta:','/data/screenshots/','uId','createObjectURL','text/plain','3266130OsaHkL','No\x20screenshot!','includes','.ss0','screenshot','turboF','toString','error','9267258IdVjeg','1733760fuEOmN','gbc','loadState','uploadRom','visibilityState','Online!','Auto\x20save\x20','62dlerFH','replace','Cheat\x20uploaded\x20successfully:','style','downloadFile','.png','log','35269720dJTeUt','FSSync','bottom','download','_slot0.txt','resumeGame','body','editFileName','buttonPress','pauseGame','files','86049jKVVYc','appendChild','disable','Resumed!','addEventListener','innerWidth','Cheat\x20Enabled!','listStates','listCheats','loadGame','href','listScreenshots','now','Off','\x20time(s)','control-setting','getElementById','0,0,','buttonUnpress','pagehide','Paused!','endsWith','screenSize','type','contains','uploadCheats','canvas'];a0_0x3f0e=function(){return _0xddccc7;};return a0_0x3f0e();}