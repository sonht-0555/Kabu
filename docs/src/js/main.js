const a0_0x1b871a=a0_0x5a43;(function(_0x2b51c8,_0x336ade){const _0x3d3b0e=a0_0x5a43,_0x2402f7=_0x2b51c8();while(!![]){try{const _0xeb7136=parseInt(_0x3d3b0e(0x1ad))/0x1+-parseInt(_0x3d3b0e(0x173))/0x2*(parseInt(_0x3d3b0e(0x18f))/0x3)+-parseInt(_0x3d3b0e(0x194))/0x4+parseInt(_0x3d3b0e(0x187))/0x5*(parseInt(_0x3d3b0e(0x1b9))/0x6)+-parseInt(_0x3d3b0e(0x177))/0x7*(-parseInt(_0x3d3b0e(0x1a1))/0x8)+parseInt(_0x3d3b0e(0x18b))/0x9*(-parseInt(_0x3d3b0e(0x1a5))/0xa)+parseInt(_0x3d3b0e(0x193))/0xb*(-parseInt(_0x3d3b0e(0x18c))/0xc);if(_0xeb7136===_0x336ade)break;else _0x2402f7['push'](_0x2402f7['shift']());}catch(_0x3c51b9){_0x2402f7['push'](_0x2402f7['shift']());}}}(a0_0x3215,0x747a2));import a0_0x253f2b from'../core/mgba.js';import*as a0_0x4e752c from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document['getElementById']('canvas')};function initializeCore(_0x449c55,_0x1a5be1){_0x449c55(_0x1a5be1)['then'](function(_0x3d67e3){_0x3d67e3['FSInit']();});}initializeCore(a0_0x253f2b,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x1b871a(0x1c1)),savedTurboState=localStorage['getItem'](a0_0x1b871a(0x1bd)),controlSetting=document[a0_0x1b871a(0x1bb)](a0_0x1b871a(0x1a9));function handleVisibilityChange(_0xf3eb95){const _0x1d9e47=a0_0x1b871a;document[_0x1d9e47(0x18e)]==='hidden'||_0xf3eb95?.[_0x1d9e47(0x17c)]===_0x1d9e47(0x1ac)||_0xf3eb95?.[_0x1d9e47(0x16e)]?(pauseGame(),canvas[_0x1d9e47(0x1bc)][_0x1d9e47(0x17f)](_0x1d9e47(0x1af))):(setTimeout(()=>{const _0x5e3c40=_0x1d9e47;canvas[_0x5e3c40(0x1bc)][_0x5e3c40(0x179)]('visible');},0x258),controlSetting[_0x1d9e47(0x1bc)][_0x1d9e47(0x183)](_0x1d9e47(0x1af))&&resumeGame());}async function statusShow(){const _0x546391=a0_0x1b871a;document[_0x546391(0x192)](_0x546391(0x196),handleVisibilityChange),document[_0x546391(0x192)](_0x546391(0x19c),handleVisibilityChange),window[_0x546391(0x192)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x4e752c[_0x546391(0x1aa)](turboState)),await delay(0xc8),await Module[_0x546391(0x1c8)](),await delay(0x320),await led(parseInt(localStorage['getItem'](_0x546391(0x19d)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x2e45f6=a0_0x1b871a;await ledSave(_0x2e45f6(0x1b0)),await Module['saveState'](0x0),await Module[_0x2e45f6(0x1c7)](),await screenShot(0x0),console[_0x2e45f6(0x1c2)](_0x2e45f6(0x1a4)+ ++countAutoSave+_0x2e45f6(0x190));}async function saveStateInCloud(){const _0x5c76b8=a0_0x1b871a,_0x28a21a=localStorage[_0x5c76b8(0x178)](_0x5c76b8(0x1a3)),_0x193ab1=_0x28a21a[_0x5c76b8(0x1ae)](_0x5c76b8(0x19a),_0x5c76b8(0x1b8)),_0x3d850b=localStorage[_0x5c76b8(0x178)](_0x5c76b8(0x1ce)),_0x163cfe=localStorage['getItem'](_0x28a21a+_0x5c76b8(0x171)),_0x5b8664=localStorage[_0x5c76b8(0x178)](_0x28a21a+'_dateState0');if(navigator['onLine']){if(_0x3d850b){await ledSave(_0x5c76b8(0x1ca)),await delay(0x3e8),await dpUploadFile(_0x193ab1,Module[_0x5c76b8(0x19e)](_0x5c76b8(0x1b3)+_0x193ab1));if(_0x163cfe!==null){const _0x3d99fb=_0x163cfe+'\x0a\x0a'+_0x5b8664,_0xa597ac=new Blob([_0x3d99fb],{'type':_0x5c76b8(0x1b4)});await dpUploadFile(_0x28a21a+'_slot0.txt',_0xa597ac);}else console[_0x5c76b8(0x1c2)](_0x5c76b8(0x16f));await lockNoti('',_0x5c76b8(0x174)+ ++countUpload+_0x5c76b8(0x190),0x7d0);}else console['log'](_0x5c76b8(0x1c0));}else console['log']('Online!');}function startTimer(){let [_0x1dd86f,_0x5057ea,_0x5ac606,_0x10ab5c,_0xc68ace]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x4db4bc=a0_0x5a43;_0x5ac606++,_0x10ab5c++,_0xc68ace++;if(_0x5ac606===0x3c)[_0x5ac606,_0x5057ea]=[0x0,_0x5057ea+0x1];if(_0x5057ea===0x3c)[_0x5057ea,_0x1dd86f]=[0x0,_0x1dd86f+0x1];document[_0x4db4bc(0x1bb)](_0x4db4bc(0x1b2))[_0x4db4bc(0x19b)]=_0x1dd86f+'h'+_0x5057ea['toString']()[_0x4db4bc(0x1c3)](0x2,'0')+'.'+_0x5ac606['toString']()[_0x4db4bc(0x1c3)](0x2,'0');_0x10ab5c===0x3c&&(saveStatePeriodically(),_0x10ab5c=0x0);;_0x10ab5c===0xe10&&(saveStateInCloud(),_0xc68ace=0x0);;},0x3e8);}export async function uploadGame(_0x25f145){const _0x5a15b8=a0_0x1b871a,_0x3ee306=_0x25f145[_0x5a15b8(0x1c4)][0x0];Module[_0x5a15b8(0x180)](_0x3ee306,()=>{Module['FSSync']();});}export async function loadGame(_0x182ec2){const _0x1636e8=a0_0x1b871a,_0x253262=_0x182ec2['replace'](/\.(gba|gbc|gb|zip)$/,_0x1636e8(0x1b8)),_0x9421dc=Module[_0x1636e8(0x1b6)]()[_0x1636e8(0x1d2)](_0x16cb24=>_0x16cb24!=='.'&&_0x16cb24!=='..');intro[_0x1636e8(0x1bc)][_0x1636e8(0x17f)](_0x1636e8(0x1d0)),errorLogElements[0x0]['style'][_0x1636e8(0x1b1)]='0',ingame[_0x1636e8(0x1bc)][_0x1636e8(0x179)](_0x1636e8(0x1d0)),_0x182ec2[_0x1636e8(0x18d)](_0x1636e8(0x1cb))||_0x182ec2[_0x1636e8(0x18d)](_0x1636e8(0x1ab))?(canvas[_0x1636e8(0x1bc)][_0x1636e8(0x17f)](_0x1636e8(0x181)),areaTrans[_0x1636e8(0x1bc)][_0x1636e8(0x17f)](_0x1636e8(0x182)),localStorage[_0x1636e8(0x17e)](_0x1636e8(0x1ba),_0x1636e8(0x17b)+(window[_0x1636e8(0x184)]-0xe6)+','+(window[_0x1636e8(0x184)]-0xe6)*0x9/0xa)):localStorage['setItem']('screenSize',_0x1636e8(0x17b)+(window['innerWidth']-0x96)+','+(window[_0x1636e8(0x184)]-0x96)*0x2/0x3),_0x9421dc[_0x1636e8(0x172)](_0x253262)?(await Module[_0x1636e8(0x186)](_0x1636e8(0x1cf)+_0x182ec2),confirm(_0x1636e8(0x1a0))&&(await Module[_0x1636e8(0x1c6)](0x0),localStorage[_0x1636e8(0x17e)](_0x1636e8(0x1a3),_0x182ec2),console[_0x1636e8(0x1c2)](_0x182ec2))):(await Module['loadGame'](_0x1636e8(0x1cf)+_0x182ec2),localStorage[_0x1636e8(0x17e)](_0x1636e8(0x1a3),_0x182ec2)),await statusShow();}export async function saveState(_0x1f4fc9){const _0x456c54=a0_0x1b871a;await Module[_0x456c54(0x185)](_0x1f4fc9),await Module[_0x456c54(0x1c7)]();}export async function loadState(_0x4013d1){const _0x1381d6=a0_0x1b871a;await Module[_0x1381d6(0x1c6)](_0x4013d1);}export async function downloadFile(_0x166669,_0x146c8c){const _0x571792=a0_0x1b871a,_0x254e1f=Module[_0x571792(0x19e)](_0x166669),_0xb3c5f5=document[_0x571792(0x19f)]('a');document['body'][_0x571792(0x1d3)](_0xb3c5f5),_0xb3c5f5[_0x571792(0x1b7)]=_0x146c8c;const _0x5041bc=new Blob([_0x254e1f],{'type':'application/octet-stream'});_0xb3c5f5[_0x571792(0x18a)]=URL['createObjectURL'](_0x5041bc),_0xb3c5f5[_0x571792(0x1a7)](),URL[_0x571792(0x1d1)](_0x5041bc),_0xb3c5f5[_0x571792(0x179)]();}export function downloadFileInCloud(_0x296255){const _0x18aa5f=Module['downloadFile'](_0x296255);return _0x18aa5f;}export async function uploadFile(_0x2ab248){const _0x37e844=a0_0x1b871a,_0x1a9357=_0x2ab248[_0x37e844(0x1c4)][0x0];Module[_0x37e844(0x195)](_0x1a9357,()=>{const _0x5578cd=_0x37e844;Module[_0x5578cd(0x1c7)]();});}export async function editFile(_0x76e5e8,_0x11574,_0x5b5b3f){const _0x1d2ed0=a0_0x1b871a;await Module['editFileName'](_0x76e5e8,_0x11574,_0x5b5b3f),await Module[_0x1d2ed0(0x1c7)]();}function a0_0x5a43(_0x530d23,_0xfa319f){const _0x32155f=a0_0x3215();return a0_0x5a43=function(_0x5a4325,_0x587cad){_0x5a4325=_0x5a4325-0x16e;let _0x47f224=_0x32155f[_0x5a4325];return _0x47f224;},a0_0x5a43(_0x530d23,_0xfa319f);}export async function deleteFile(_0x23a49e){const _0x5dddea=a0_0x1b871a;await Module[_0x5dddea(0x176)](_0x23a49e),await Module[_0x5dddea(0x1c7)]();}export function listGame(){const _0x28b941=a0_0x1b871a,_0x449b0d=Module['listRoms']()[_0x28b941(0x1d2)](_0x5afed9=>_0x5afed9!=='.'&&_0x5afed9!=='..');return _0x449b0d;}export function listSave(){const _0x115090=a0_0x1b871a,_0x457d5c=Module[_0x115090(0x1bf)]()['filter'](_0x176789=>_0x176789!=='.'&&_0x176789!=='..');return _0x457d5c;}export function listState(){const _0x4f9470=a0_0x1b871a,_0x405935=Module['listStates']()[_0x4f9470(0x1d2)](_0x2be892=>_0x2be892!=='.'&&_0x2be892!=='..');return _0x405935;}export function listCheat(){const _0x4c46e8=a0_0x1b871a,_0xfaf378=Module[_0x4c46e8(0x189)]()[_0x4c46e8(0x1d2)](_0x3ed6cb=>_0x3ed6cb!=='.'&&_0x3ed6cb!=='..');return _0xfaf378;}export function listScreenshot(){const _0x1ced2e=a0_0x1b871a,_0x3bc642=Module[_0x1ced2e(0x198)]()[_0x1ced2e(0x1d2)](_0x5c79d5=>_0x5c79d5!=='.'&&_0x5c79d5!=='..');return _0x3bc642;}export function fileSize(_0x591d1a){const _0x384ac6=Module['fileSize'](_0x591d1a);return _0x384ac6;}export async function uploadCheat(_0x5d2649){const _0x12fe95=a0_0x1b871a;try{const _0x57e3e7=_0x5d2649[_0x12fe95(0x1c4)][0x0];await Module[_0x12fe95(0x1a2)](_0x57e3e7,()=>{const _0x6b389e=_0x12fe95;console['log'](_0x6b389e(0x1c5),_0x57e3e7[_0x6b389e(0x17d)]),localStorageFile(),Module[_0x6b389e(0x1c7)]();});}catch(_0x519b8f){console['error']('Error\x20uploadCheat:',_0x519b8f);}}export async function uploadSavSta(_0x26de4e){const _0x1fa2e0=a0_0x1b871a;try{const _0x2078ce=_0x26de4e['files'][0x0];await Module[_0x1fa2e0(0x195)](_0x2078ce,()=>{const _0x32a4c9=_0x1fa2e0;console[_0x32a4c9(0x1c2)]('Save/State\x20uploaded\x20successfully:',_0x2078ce[_0x32a4c9(0x17d)]),localStorageFile(),Module[_0x32a4c9(0x1c7)]();});}catch(_0x3433db){console[_0x1fa2e0(0x197)](_0x1fa2e0(0x1a8),_0x3433db);}}export async function uploadSaveOrSaveState(_0x2f3535){const _0x18fdfd=a0_0x1b871a;Module[_0x18fdfd(0x195)](_0x2f3535,()=>{const _0x151845=_0x18fdfd;localStorageFile(),Module[_0x151845(0x1c7)]();});}export async function resumeGame(){const _0x23da25=a0_0x1b871a;Module[_0x23da25(0x199)](),Module[_0x23da25(0x1c8)](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x15e549=a0_0x1b871a;Module[_0x15e549(0x170)](),Module['SDL2'](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x48cba2){const _0xe8b711=a0_0x1b871a;Module[_0xe8b711(0x1be)](_0x48cba2);}function a0_0x3215(){const _0x1d5c9e=['slotStateSaved','downloadFile','createElement','Do\x20you\x20want\x20to\x20load\x20save\x20state?','7255288SILHTc','uploadCheats','gameName','Auto\x20save\x20','70mimZyx','Cheat\x20Enabled!','click','Error\x20uploadSavSta:','control-setting','turboF','.gb','beforeunload','567281KPDJxf','replace','visible','#20A5A6','bottom','timer','/data/states/','text/plain','screenshot','listStates','download','.ss0','5450772aCVlQi','screenSize','getElementById','classList','turboState','buttonPress','listSaves','Unable\x20to\x20upload\x20to\x20Cloud!','canvas','log','padStart','files','Cheat\x20uploaded\x20successfully:','loadState','FSSync','SDL2','autoLoadCheats','#E0C068','.gbc','Off','/data/screenshots/','uId','/data/games/','disable','revokeObjectURL','filter','appendChild','persisted','No\x20screenshot!','pauseGame','_imageState0','includes','1374jLCGuT','Cloud\x20upload\x20','_savedCheats','deleteFile','7RpntpP','getItem','remove','setFastForwardMultiplier','0,0,','type','name','setItem','add','uploadRom','gbc','gbc1','contains','innerWidth','saveState','loadGame','5TfZAZG','_imageState','listCheats','href','927126QtAQJR','6602124emchNh','endsWith','visibilityState','363qpmLbK','\x20time(s)','.png','addEventListener','11BHNlVs','2204648EWQrIF','uploadSaveOrSaveState','pagehide','error','listScreenshots','resumeGame','.gba','textContent','visibilitychange'];a0_0x3215=function(){return _0x1d5c9e;};return a0_0x3215();}export async function buttonUnpress(_0x20dfcb){Module['buttonUnpress'](_0x20dfcb);}export async function screenShot(_0x5dabbb){const _0x16348e=a0_0x1b871a,_0x5624e9=localStorage[_0x16348e(0x178)](_0x16348e(0x1a3)),_0x23c525=_0x5624e9[_0x16348e(0x1ae)](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x23c525+_0x5dabbb+_0x16348e(0x191)),await Module[_0x16348e(0x1c7)]();const _0x342db2=await fileToBase64(Module[_0x16348e(0x19e)](_0x16348e(0x1cd)+_0x23c525+_0x5dabbb+'.png')),_0x466bcf=Date['now'](),_0x4a02b7=formatDateTime(_0x466bcf);localStorage[_0x16348e(0x17e)](_0x5624e9+'_dateState'+_0x5dabbb,_0x4a02b7),localStorage[_0x16348e(0x17e)](_0x5624e9+_0x16348e(0x188)+_0x5dabbb,_0x342db2);}export async function captureOCR(_0x336de0){const _0x455614=a0_0x1b871a;Module[_0x455614(0x1b5)](_0x336de0);const _0x9d511f=Module[_0x455614(0x19e)]('/data/screenshots/'+_0x336de0);return _0x9d511f;}export async function setFastForwardMultiplier(_0x45d0ea){const _0x3d25dc=a0_0x1b871a;Module[_0x3d25dc(0x17a)](_0x45d0ea);}export function uploadCheats(_0x2fede4,_0x22cc04,_0x3739fa,_0x2a1cf1,_0x5bedb3){Module['uploadCheats'](_0x2fede4,()=>{const _0x2f36f2=a0_0x5a43;Module[_0x2f36f2(0x1c9)](),setTimeout(()=>{Module['FSSync']();},0x1f4),_0x2a1cf1&&(localStorage[_0x2f36f2(0x17e)](_0x22cc04+_0x2f36f2(0x175),_0x3739fa),notiMessage(_0x2f36f2(0x1a6),0x5dc)),_0x5bedb3[_0x2f36f2(0x19b)]=localStorage['getItem'](_0x22cc04+_0x2f36f2(0x175)||_0x2f36f2(0x1cc));});}