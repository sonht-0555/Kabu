const a0_0x216808=a0_0xf35d;(function(_0x563d28,_0x57178c){const _0x2d5564=a0_0xf35d,_0x4e4f23=_0x563d28();while(!![]){try{const _0x265cc4=parseInt(_0x2d5564(0x231))/0x1*(parseInt(_0x2d5564(0x1d9))/0x2)+parseInt(_0x2d5564(0x217))/0x3+-parseInt(_0x2d5564(0x226))/0x4+-parseInt(_0x2d5564(0x236))/0x5*(-parseInt(_0x2d5564(0x1cc))/0x6)+-parseInt(_0x2d5564(0x1d4))/0x7*(parseInt(_0x2d5564(0x1db))/0x8)+-parseInt(_0x2d5564(0x1dc))/0x9+-parseInt(_0x2d5564(0x1c2))/0xa*(-parseInt(_0x2d5564(0x1f7))/0xb);if(_0x265cc4===_0x57178c)break;else _0x4e4f23['push'](_0x4e4f23['shift']());}catch(_0x1e2fe3){_0x4e4f23['push'](_0x4e4f23['shift']());}}}(a0_0x8684,0x9b5d5));import a0_0x5043f8 from'../core/1.1.0/mgba.js';import a0_0x5bb9cb from'../core/2.0.0/mgba.js';import*as a0_0x43c92d from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x5043f8,'2.0.0':a0_0x5bb9cb};let currentVersion=localStorage[a0_0x216808(0x210)]('GBAver')||a0_0x216808(0x209),mGBA=versions[currentVersion];function a0_0xf35d(_0x422003,_0x5dc8bc){const _0x8684e3=a0_0x8684();return a0_0xf35d=function(_0xf35d41,_0x375f6e){_0xf35d41=_0xf35d41-0x1bc;let _0x530396=_0x8684e3[_0xf35d41];return _0x530396;},a0_0xf35d(_0x422003,_0x5dc8bc);}document[a0_0x216808(0x1f4)](a0_0x216808(0x1e5))[a0_0x216808(0x1ef)]=a0_0x216808(0x239)+currentVersion,document['getElementById'](a0_0x216808(0x1e5))['addEventListener']('click',()=>{const _0x4846de=a0_0x216808,_0x484a06=Object[_0x4846de(0x1f1)](versions);let _0x10b927=_0x484a06[_0x4846de(0x1df)](currentVersion);currentVersion=_0x484a06[(_0x10b927+0x1)%_0x484a06[_0x4846de(0x1e4)]],localStorage[_0x4846de(0x21d)](_0x4846de(0x1e5),currentVersion),document['getElementById'](_0x4846de(0x1e5))[_0x4846de(0x1ef)]='Wasm_©'+currentVersion;});const Module={'canvas':document[a0_0x216808(0x1f4)](a0_0x216808(0x1cf))};function initializeCore(_0x14cd02,_0x17778a){const _0xda1d17=a0_0x216808;_0x14cd02(_0x17778a)[_0xda1d17(0x1d3)](function(_0x209a74){const _0x38c1bb=_0xda1d17;_0x209a74[_0x38c1bb(0x1fd)]();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x216808(0x1f4)](a0_0x216808(0x1cf)),controlSetting=document[a0_0x216808(0x1f4)]('control-setting');function handleVisibilityChange(_0x5d4b7c){const _0x54b023=a0_0x216808;document[_0x54b023(0x1bd)]===_0x54b023(0x206)||_0x5d4b7c?.[_0x54b023(0x203)]==='beforeunload'||_0x5d4b7c?.['persisted']?(Module[_0x54b023(0x233)](),pauseGame(),canvas[_0x54b023(0x208)][_0x54b023(0x1f8)](_0x54b023(0x1c5))):(setTimeout(()=>{const _0x3c76f6=_0x54b023;canvas[_0x3c76f6(0x208)][_0x3c76f6(0x1f0)]('visible');},0x258),controlSetting[_0x54b023(0x208)]['contains'](_0x54b023(0x1c5))&&resumeGame());}async function statusShow(){const _0x2d5965=a0_0x216808;document[_0x2d5965(0x1c0)]('pagehide',handleVisibilityChange),document[_0x2d5965(0x1c0)](_0x2d5965(0x201),handleVisibilityChange),window[_0x2d5965(0x1c0)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),await a0_0x43c92d[_0x2d5965(0x20e)](parseInt(await getData(gameName,'0',_0x2d5965(0x1be)))),await delay(0xc8),await Module[_0x2d5965(0x1e0)](),await delay(0x320),await led(parseInt(await getData(gameName,'0','slotStateSaved'))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x598dca=a0_0x216808;await ledSave(_0x598dca(0x21c)),await Module['saveState'](0x0),await Module[_0x598dca(0x233)](),await screenShot(0x0),console[_0x598dca(0x1cb)](_0x598dca(0x219)+ ++countAutoSave+_0x598dca(0x228));}async function saveStateInCloud(){const _0x13b5bb=a0_0x216808,_0x27cfb4=gameName[_0x13b5bb(0x229)](/\.(zip|gb|gbc|gba)$/,_0x13b5bb(0x214)),_0x1d6447=localStorage['getItem']('uId');navigator[_0x13b5bb(0x1d6)]&&(_0x1d6447&&(await ledSave(_0x13b5bb(0x1e9)),await delay(0x3e8),await dpUploadFile(_0x27cfb4,Module[_0x13b5bb(0x222)](_0x13b5bb(0x1fe)+_0x27cfb4),_0x13b5bb(0x1f9)),await lockNoti('',_0x13b5bb(0x216)+ ++countUpload+_0x13b5bb(0x228),0x7d0)));}function startTimer(){let [_0x4fe8cb,_0x36432c,_0x18bc2b,_0x545aa0,_0x286b33]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0xe6aaa8=a0_0xf35d;_0x18bc2b++,_0x545aa0++,_0x286b33++;if(_0x18bc2b===0x3c)[_0x18bc2b,_0x36432c]=[0x0,_0x36432c+0x1];if(_0x36432c===0x3c)[_0x36432c,_0x4fe8cb]=[0x0,_0x4fe8cb+0x1];document[_0xe6aaa8(0x1f4)](_0xe6aaa8(0x215))[_0xe6aaa8(0x1ef)]=_0x4fe8cb+'h'+_0x36432c['toString']()[_0xe6aaa8(0x220)](0x2,'0')+'.'+_0x18bc2b['toString']()[_0xe6aaa8(0x220)](0x2,'0');_0x545aa0===0x3c&&(saveStatePeriodically(),_0x545aa0=0x0);;_0x286b33===0x708&&(saveStateInCloud(),_0x286b33=0x0);;},0x3e8);}export async function uploadGame(_0x343376){const _0x1030db=a0_0x216808,_0x1bfef2=_0x343376[_0x1030db(0x202)][0x0];Module[_0x1030db(0x20d)](_0x1bfef2,()=>{const _0x515827=_0x1030db;Module[_0x515827(0x233)]();});}export async function loadGame(_0x345443){const _0x1d9d41=a0_0x216808,_0x253ec8=_0x345443[_0x1d9d41(0x229)](/\.(gba|gbc|gb|zip)$/,_0x1d9d41(0x214)),_0x3d7364=Module[_0x1d9d41(0x230)](_0x1d9d41(0x20f))['filter'](_0x3d7d51=>_0x3d7d51!=='.'&&_0x3d7d51!=='..');intro[_0x1d9d41(0x208)][_0x1d9d41(0x1f8)](_0x1d9d41(0x227)),errorLogElements[0x0]['style'][_0x1d9d41(0x22c)]='0',ingame['classList'][_0x1d9d41(0x1f0)](_0x1d9d41(0x227)),_0x345443[_0x1d9d41(0x22f)](_0x1d9d41(0x221))||_0x345443[_0x1d9d41(0x22f)]('.gb')?(canvas[_0x1d9d41(0x208)][_0x1d9d41(0x1f8)](_0x1d9d41(0x22a)),areaTrans[_0x1d9d41(0x208)]['add'](_0x1d9d41(0x1d7)),localStorage['setItem'](_0x1d9d41(0x238),_0x1d9d41(0x1d2)+(window[_0x1d9d41(0x204)]-0xe6)+','+(window[_0x1d9d41(0x204)]-0xe6)*0x9/0xa)):localStorage[_0x1d9d41(0x21d)](_0x1d9d41(0x238),'0,0,'+(window[_0x1d9d41(0x204)]-0x96)+','+(window[_0x1d9d41(0x204)]-0x96)*0x2/0x3),_0x3d7364['includes'](_0x253ec8)?(await Module[_0x1d9d41(0x1ee)]('/data/games/'+_0x345443),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await delay(0x64),await Module[_0x1d9d41(0x225)](0x0),await shaderData())):(await Module[_0x1d9d41(0x1ee)]('/data/games/'+_0x345443),await shaderData()),await statusShow();}export async function saveState(_0x3393cc){const _0x42fa12=a0_0x216808;await Module[_0x42fa12(0x20a)](_0x3393cc);}export async function loadState(_0x4e1ad5){const _0x5b740e=a0_0x216808;await Module[_0x5b740e(0x225)](_0x4e1ad5);}export async function downloadFile(_0x572d9e,_0x268c85){const _0x3ef0ee=a0_0x216808,_0xe95284=Module[_0x3ef0ee(0x222)](_0x572d9e),_0x396890=document['createElement']('a');document['body'][_0x3ef0ee(0x1fb)](_0x396890),_0x396890[_0x3ef0ee(0x1d5)]=_0x268c85;const _0x38ccae=new Blob([_0xe95284],{'type':_0x3ef0ee(0x1fc)});_0x396890[_0x3ef0ee(0x1c8)]=URL[_0x3ef0ee(0x1f5)](_0x38ccae),_0x396890[_0x3ef0ee(0x1eb)](),URL['revokeObjectURL'](_0x38ccae),_0x396890[_0x3ef0ee(0x1f0)]();}function a0_0x8684(){const _0x346e1c=['indexOf','SDL2','\x20|\x20','split','slotStateSaved','length','GBAver','tEXtComment\x00','led04','\x20:\x20','#E0C068','fill','click','toggleRewind','rgba(245,\x20232,\x20209,\x200.4)','loadGame','textContent','remove','keys','All','listStates','getElementById','createObjectURL','Paused!','2924240efxCCW','add','state','led06','appendChild','application/octet-stream','FSInit','/data/states/','entries','led0','visibilitychange','files','type','innerWidth','pauseGame','hidden','listSaves','classList','1.1.0','saveState','map','editFileName','uploadRom','turboF','states','getItem','opacity','substring','0.4','.ss0','timer','Cloud\x20upload\x20','844557kzuxvb','charCodeAt','Auto\x20save\x20','Resumed!','match','#20A5A6','setItem','exec','deleteFile','padStart','.gbc','downloadFile','buttonUnpress','Error\x20ledSave:','loadState','294368COXCwU','disable','\x20time(s)','replace','gbc','join','bottom','encode','led07','endsWith','listFiles','9077ETbrNZ','noti-mess','FSSync','trim','.png','188295WlDRYp','fileSize','screenSize','Wasm_©','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','/data/screenshots/','visibilityState','turboState','uploadAll','addEventListener','filter','20hUvTHA','autoLoadCheats','style','visible','now','led01','href','lastIndexOf','setVolume','log','42oIDwav','concat','image/png','canvas','led03','listRoms','0,0,','then','7XYHZSP','download','onLine','gbc1','screenshot','266RkBhfn','led00','6789616lkbKNw','6528474cFpMKs','led05','buttonPress'];a0_0x8684=function(){return _0x346e1c;};return a0_0x8684();}export function downloadFileInCloud(_0xc883d3){const _0x2add26=a0_0x216808;try{const _0x558463=Module[_0x2add26(0x222)](_0xc883d3);return _0x558463;}catch(_0x13481c){return null;}}export async function uploadFileInCloud(_0x55b06f){const _0x3de26b=a0_0x216808;Module[_0x3de26b(0x1bf)](_0x55b06f,async()=>{const _0x5d7ac6=_0x3de26b;localStorageFile(),await Module[_0x5d7ac6(0x233)]();});}export async function uploadFile(_0x122373){const _0x29d280=a0_0x216808,_0x3f5ab1=_0x122373[_0x29d280(0x202)][0x0];Module['uploadAll'](_0x3f5ab1,async()=>{const _0x28d91d=_0x29d280;localStorageFile(),await Module[_0x28d91d(0x233)]();});}export async function editFile(_0x2e7bc7,_0x2b9cdb,_0x58905e){const _0x742be7=a0_0x216808;await Module[_0x742be7(0x20c)](_0x2e7bc7,_0x2b9cdb,_0x58905e);}export async function deleteFile(_0x3f4761){const _0x46da72=a0_0x216808;try{return await Module[_0x46da72(0x21f)](_0x3f4761),!![];}catch(_0x1bcdef){return console['error'](_0x3f4761),null;}}export function listFiles(_0xb3ca18){const _0xe965ee=Module['listFiles'](_0xb3ca18)['filter'](_0x23366d=>_0x23366d!=='.'&&_0x23366d!=='..');return _0xe965ee;}export function listGame(){const _0x516843=a0_0x216808,_0x28cd9a=Module[_0x516843(0x1d1)]()[_0x516843(0x1c1)](_0x1d4a8d=>_0x1d4a8d!=='.'&&_0x1d4a8d!=='..');return _0x28cd9a;}export function listSave(){const _0x3b38a2=a0_0x216808,_0xeb27aa=Module[_0x3b38a2(0x207)]()[_0x3b38a2(0x1c1)](_0x21192c=>_0x21192c!=='.'&&_0x21192c!=='..');return _0xeb27aa;}export function listState(){const _0x4aa6ca=a0_0x216808,_0x2a51a2=Module[_0x4aa6ca(0x1f3)]()[_0x4aa6ca(0x1c1)](_0x1ce69a=>_0x1ce69a!=='.'&&_0x1ce69a!=='..');return _0x2a51a2;}export function listCheat(){const _0x4f7ffb=a0_0x216808,_0x4ad1d3=Module['listCheats']()[_0x4f7ffb(0x1c1)](_0xd0973c=>_0xd0973c!=='.'&&_0xd0973c!=='..');return _0x4ad1d3;}export function listScreenshot(){const _0x52666c=Module['listScreenshots']()['filter'](_0x2f1092=>_0x2f1092!=='.'&&_0x2f1092!=='..');return _0x52666c;}export function fileSize(_0x34c421){const _0xef9e95=a0_0x216808,_0x4b63e8=Module[_0xef9e95(0x237)](_0x34c421);return _0x4b63e8;}export async function resumeGame(){const _0x1177c4=a0_0x216808;Module['resumeGame'](),Module[_0x1177c4(0x1e0)](),notiMessage(_0x1177c4(0x21a),0x7d0);}export async function pauseGame(){const _0x21d993=a0_0x216808;Module[_0x21d993(0x205)](),Module['SDL2'](),notiMessage(_0x21d993(0x1f6),0x7d0);}export async function buttonPress(_0x5c67c6){const _0x129633=a0_0x216808;Module[_0x129633(0x1de)](_0x5c67c6);}export async function buttonUnpress(_0x2fd6c8){const _0x6255d=a0_0x216808;Module[_0x6255d(0x223)](_0x2fd6c8);}export async function screenShot(_0x1fc6dc){const _0x2b7908=a0_0x216808,_0x59ea21=gameName[_0x2b7908(0x229)](/\.(gba|gbc|gb|zip)$/,'_'+_0x1fc6dc+_0x2b7908(0x235)),_0x3c83c0=await getData(gameName,_0x1fc6dc,'All')||'';console['log'](_0x3c83c0),await Module[_0x2b7908(0x1d8)](_0x59ea21),await setData(gameName,_0x1fc6dc,'saveTime',formatDateTime(Date[_0x2b7908(0x1c6)]()),_0x3c83c0);}export async function dowloadScreenShot(_0x2e4c17){const _0x56a628=a0_0x216808;try{const _0x587e65=await fileToBase64(Module[_0x56a628(0x222)](_0x2e4c17));return _0x587e65;}catch{}}export async function captureOCR(_0x3e5411){const _0x4b6278=a0_0x216808;Module[_0x4b6278(0x1d8)](_0x3e5411);const _0x5c5caf=Module[_0x4b6278(0x222)]('/data/screenshots/'+_0x3e5411);return _0x5c5caf;}export async function setFastForwardMultiplier(_0x59a235){Module['setFastForwardMultiplier'](_0x59a235);}export async function uploadCheats(_0x58457c){const _0x45c169=a0_0x216808;Module[_0x45c169(0x1c3)](),Module['uploadAll'](_0x58457c,async()=>{});}export function setVolume(_0x7d4959){const _0x4c923e=a0_0x216808;Module[_0x4c923e(0x1ca)](_0x7d4959);}export async function setData(_0x216484,_0x11d1cf,_0x52815c,_0x17e08e,_0x269f21=''){const _0x52de2c=a0_0x216808,_0x1702de=_0x216484[_0x52de2c(0x229)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x1c0502='/data/screenshots/'+_0x1702de+'_'+_0x11d1cf+'.png';let _0xd4ce89;try{_0xd4ce89=await fileToBase64(Module['downloadFile'](_0x1c0502));}catch(_0x175a4f){await Module[_0x52de2c(0x1d8)](_0x1702de+'_'+_0x11d1cf+_0x52de2c(0x235)),await delay(0xc8),_0xd4ce89=await fileToBase64(Module[_0x52de2c(0x222)](_0x1c0502));}let _0x229fd7=atob(_0xd4ce89[_0x52de2c(0x1e2)](',')[0x1]),_0x3b93e4=_0x52de2c(0x1e6),_0x39c201=_0x229fd7[_0x52de2c(0x1df)](_0x3b93e4),_0x52e704={};if(_0x39c201!==-0x1||_0x269f21['trim']()!==''){let _0x3c42f3=_0x39c201!==-0x1?_0x229fd7[_0x52de2c(0x212)](_0x39c201+_0x3b93e4[_0x52de2c(0x1e4)]):_0x269f21,_0x1b43e1=/(\w+)\s*:\s*([^|]*)/g,_0x3bb916;while((_0x3bb916=_0x1b43e1[_0x52de2c(0x21e)](_0x3c42f3))!==null){_0x52e704[_0x3bb916[0x1]['trim']()]=_0x3bb916[0x2][_0x52de2c(0x234)]();}_0x39c201!==-0x1&&(_0x229fd7=_0x229fd7[_0x52de2c(0x212)](0x0,_0x39c201));}_0x52e704[_0x52815c]=_0x17e08e;let _0xa586c5=Object[_0x52de2c(0x1ff)](_0x52e704)[_0x52de2c(0x20b)](([_0x47b074,_0x41a3b6])=>_0x47b074+_0x52de2c(0x1e8)+_0x41a3b6)[_0x52de2c(0x22b)](_0x52de2c(0x1e1)),_0x11e859=new TextEncoder()[_0x52de2c(0x22d)](_0x3b93e4+'\x20'+_0xa586c5),_0x4cfbd9=new Uint8Array([..._0x229fd7]['map'](_0x56144b=>_0x56144b[_0x52de2c(0x218)](0x0))[_0x52de2c(0x1cd)]([..._0x11e859])),_0x55b511=new File([new Blob([_0x4cfbd9],{'type':_0x52de2c(0x1ce)})],_0x1702de+'_'+_0x11d1cf+'.png',{'type':_0x52de2c(0x1ce)});Module[_0x52de2c(0x1bf)](_0x55b511,async()=>{});}export async function getData(_0x5b4cbd,_0x490e64,_0x313601){const _0x4d5a82=a0_0x216808;try{const _0x4eb10d=_0x5b4cbd[_0x4d5a82(0x229)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x2054c6=_0x4d5a82(0x1bc)+_0x4eb10d+'_'+_0x490e64+_0x4d5a82(0x235);let _0x393821;try{_0x393821=await fileToBase64(Module[_0x4d5a82(0x222)](_0x2054c6));}catch(_0x2a93f7){return null;}let _0x5296f3=atob(_0x393821[_0x4d5a82(0x1e2)](',')[0x1]),_0x1529b8=_0x4d5a82(0x1e6),_0x5773a2=_0x5296f3['indexOf'](_0x1529b8);if(_0x5773a2!==-0x1){let _0x1c046f=_0x5296f3['substring'](_0x5773a2+_0x1529b8[_0x4d5a82(0x1e4)]);if(_0x313601===_0x4d5a82(0x1f2))return _0x1c046f[_0x4d5a82(0x234)]();let _0x4c363e=new RegExp(_0x313601+_0x4d5a82(0x23a)),_0x2d4e93=_0x1c046f[_0x4d5a82(0x21b)](_0x4c363e);if(_0x2d4e93)return _0x2d4e93[0x1][_0x4d5a82(0x234)]();}}catch(_0xc80c){return console['error']({'romName':_0x5b4cbd,'slot':_0x490e64,'type':_0x313601}),null;}}export async function ledSave(_0x43f594){const _0x1e11f2=a0_0x216808,_0x4701bc=parseInt(await getData(gameName,'0',_0x1e11f2(0x1e3))),_0x1ed0c0=_0x4701bc===0x1?_0x1e11f2(0x1c7):_0x4701bc===0x2?'led02':_0x4701bc===0x3?_0x1e11f2(0x1d0):_0x4701bc===0x4?_0x1e11f2(0x1e7):_0x4701bc===0x5?_0x1e11f2(0x1dd):_0x4701bc===0x6?_0x1e11f2(0x1fa):_0x4701bc===0x7?_0x1e11f2(0x22e):_0x1e11f2(0x1da);try{for(let _0x35e051=0x0;_0x35e051<=0x7;_0x35e051++){document[_0x1e11f2(0x1f4)](_0x1e11f2(0x200)+_0x35e051)[_0x1e11f2(0x1c4)][_0x1e11f2(0x1ea)]='rgba(245,\x20232,\x20209,\x200.4)';}await delay(0x3e8);for(let _0x14ddc7=0x0;_0x14ddc7<=0x7;_0x14ddc7++){document['getElementById'](_0x1e11f2(0x200)+_0x14ddc7)['style']['fill']=_0x1e11f2(0x1ed);}document[_0x1e11f2(0x1f4)](_0x1ed0c0)[_0x1e11f2(0x1c4)]['fill']=_0x43f594;}catch(_0x369d4d){console['error'](_0x1e11f2(0x224),_0x369d4d);}};export async function notiMessage(_0x143592,_0x4d7520,_0xe18b62=![]){const _0x4fd8c1=a0_0x216808;var _0x351632=document['getElementById'](_0x4fd8c1(0x232));const _0x466347=parseInt(await getData(gameName,'0',_0x4fd8c1(0x1e3)))||0x0;_0x351632['style'][_0x4fd8c1(0x211)]===_0x4fd8c1(0x213)&&(clearTimeout(messageTimeout),_0x351632['style'][_0x4fd8c1(0x211)]='0'),_0x351632[_0x4fd8c1(0x1ef)]=_0x143592,_0x351632[_0x4fd8c1(0x1c4)]['opacity']=_0x4fd8c1(0x213),messageTimeout=setTimeout(()=>{const _0xddee6a=_0x4fd8c1;_0x351632['textContent']='['+_0x466347+']\x20'+gameName['substring'](0x0,gameName[_0xddee6a(0x1c9)]('.')),_0x351632[_0xddee6a(0x1c4)][_0xddee6a(0x211)]='0.4';},_0x4d7520),_0xe18b62&&(canvas[_0x4fd8c1(0x208)][_0x4fd8c1(0x1f8)]('visible'),setTimeout(()=>{const _0x1012c5=_0x4fd8c1;canvas[_0x1012c5(0x208)]['remove']('visible');},0x258));}export async function FSSync(){const _0xed989f=a0_0x216808;Module[_0xed989f(0x233)]();}export const rewind=_0x1965af=>Module[a0_0x216808(0x1ec)]?.(_0x1965af)||null;