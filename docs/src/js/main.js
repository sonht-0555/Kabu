const a0_0x564b01=a0_0x3b74;(function(_0x3cdf88,_0x1d7d8b){const _0x4502a9=a0_0x3b74,_0x4588e5=_0x3cdf88();while(!![]){try{const _0x35fd8d=-parseInt(_0x4502a9(0x169))/0x1*(parseInt(_0x4502a9(0x1b5))/0x2)+-parseInt(_0x4502a9(0x1b1))/0x3+parseInt(_0x4502a9(0x16f))/0x4+-parseInt(_0x4502a9(0x163))/0x5*(parseInt(_0x4502a9(0x196))/0x6)+-parseInt(_0x4502a9(0x19c))/0x7*(parseInt(_0x4502a9(0x182))/0x8)+parseInt(_0x4502a9(0x1ba))/0x9*(-parseInt(_0x4502a9(0x1a2))/0xa)+parseInt(_0x4502a9(0x1af))/0xb*(parseInt(_0x4502a9(0x19d))/0xc);if(_0x35fd8d===_0x1d7d8b)break;else _0x4588e5['push'](_0x4588e5['shift']());}catch(_0x4a86ef){_0x4588e5['push'](_0x4588e5['shift']());}}}(a0_0x469d,0x92c92));import a0_0x103218 from'../core/mgba.js';import*as a0_0x3ebebc from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x564b01(0x1a1)](a0_0x564b01(0x1bb))};function initializeCore(_0x58b8cc,_0x46222f){const _0x14a307=a0_0x564b01;_0x58b8cc(_0x46222f)[_0x14a307(0x1c6)](function(_0x2b2bcd){const _0x4afc22=_0x14a307;_0x2b2bcd[_0x4afc22(0x16c)]();});}initializeCore(a0_0x103218,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;function a0_0x469d(){const _0x3069a5=['listSaves','34389xWkBHh','canvas','editFileName','Off','control-setting','No\x20screenshot!','#20A5A6','visibilityState','0,0,','screenshot','uploadCheats','autoLoadCheats','then','.gbc','.gb','pagehide','listScreenshots','replace','toString','beforeunload','65EFZcOM','text/plain','innerWidth','endsWith','.png','files','112VnHUIw','add','padStart','FSInit','uId','download','4753868Hqncgv','Do\x20you\x20want\x20to\x20load\x20save\x20state?','fileSize','click','#E0C068','gbc','screenSize','Cloud\x20upload\x20','onLine','timer','error','gbc1','Error\x20uploadSavSta:','classList','uploadGame','href','downloadFile','contains','_imageState0','188424TjSttO','.ss0','FSSync','pauseGame','createElement','/data/games/','hidden','Save/State\x20uploaded\x20successfully:','_savedCheats','_dateState','_slot0.txt','Error\x20uploadCheat:','type','textContent','addEventListener','log','loadGame','Cheat\x20uploaded\x20successfully:','Unable\x20to\x20upload\x20to\x20Cloud!','visible','201504oDdMGj','includes','.gba','_imageState','\x20time(s)','_dateState0','91UQuazZ','12cgYBRZ','resumeGame','persisted','buttonUnpress','getElementById','2270ajjDpW','Auto\x20save\x20','setItem','appendChild','visibilitychange','saveState','listGames','loadState','Resumed!','getItem','Online!','gameName','body','25171102IaCUMh','/data/screenshots/','2954757ErtdcK','listStates','remove','revokeObjectURL','5008ezBmhT','disable','buttonPress','SDL2'];a0_0x469d=function(){return _0x3069a5;};return a0_0x469d();}const canvas=document[a0_0x564b01(0x1a1)]('canvas'),savedTurboState=localStorage[a0_0x564b01(0x1ab)]('turboState'),controlSetting=document[a0_0x564b01(0x1a1)](a0_0x564b01(0x1be));function handleVisibilityChange(_0x427d43){const _0x62083c=a0_0x564b01;document[_0x62083c(0x1c1)]===_0x62083c(0x188)||_0x427d43?.[_0x62083c(0x18e)]===_0x62083c(0x162)||_0x427d43?.[_0x62083c(0x19f)]?(pauseGame(),canvas[_0x62083c(0x17c)][_0x62083c(0x16a)](_0x62083c(0x195))):(setTimeout(()=>{const _0x5d28e8=_0x62083c;canvas['classList']['remove'](_0x5d28e8(0x195));},0x258),controlSetting[_0x62083c(0x17c)][_0x62083c(0x180)](_0x62083c(0x195))&&resumeGame());}async function statusShow(){const _0xaead2a=a0_0x564b01;document[_0xaead2a(0x190)](_0xaead2a(0x1c9),handleVisibilityChange),document[_0xaead2a(0x190)](_0xaead2a(0x1a6),handleVisibilityChange),window[_0xaead2a(0x190)](_0xaead2a(0x162),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x3ebebc['turboF'](turboState)),await delay(0x3e8),await led(parseInt(localStorage['getItem']('slotStateSaved'))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x41c8d7=a0_0x564b01;await ledSave(_0x41c8d7(0x1c0)),await Module[_0x41c8d7(0x1a7)](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x41c8d7(0x191)](_0x41c8d7(0x1a3)+ ++countAutoSave+_0x41c8d7(0x19a));}async function saveStateInCloud(){const _0x346ee9=a0_0x564b01,_0xfb8b60=localStorage[_0x346ee9(0x1ab)](_0x346ee9(0x1ad)),_0x6a87c4=_0xfb8b60[_0x346ee9(0x1cb)](_0x346ee9(0x198),_0x346ee9(0x183)),_0x489d76=localStorage[_0x346ee9(0x1ab)](_0x346ee9(0x16d)),_0x47f41b=localStorage[_0x346ee9(0x1ab)](_0xfb8b60+_0x346ee9(0x181)),_0x39ce62=localStorage[_0x346ee9(0x1ab)](_0xfb8b60+_0x346ee9(0x19b));if(navigator[_0x346ee9(0x177)]){if(_0x489d76){await ledSave(_0x346ee9(0x173)),await delay(0x3e8),await dpUploadFile(_0x6a87c4,Module[_0x346ee9(0x17f)]('/data/states/'+_0x6a87c4));if(_0x47f41b!==null){const _0x3ac4c2=_0x47f41b+'\x0a\x0a'+_0x39ce62,_0x476f1f=new Blob([_0x3ac4c2],{'type':_0x346ee9(0x164)});await dpUploadFile(_0xfb8b60+_0x346ee9(0x18c),_0x476f1f);}else console[_0x346ee9(0x191)](_0x346ee9(0x1bf));await lockNoti('',_0x346ee9(0x176)+ ++countUpload+'\x20time(s)',0x7d0);}else console['log'](_0x346ee9(0x194));}else console[_0x346ee9(0x191)](_0x346ee9(0x1ac));}function startTimer(){let [_0x4c20c1,_0x4a8fef,_0x2979d4,_0x3d570a,_0x166ba6]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x3e026b=a0_0x3b74;_0x2979d4++,_0x3d570a++,_0x166ba6++;if(_0x2979d4===0x3c)[_0x2979d4,_0x4a8fef]=[0x0,_0x4a8fef+0x1];if(_0x4a8fef===0x3c)[_0x4a8fef,_0x4c20c1]=[0x0,_0x4c20c1+0x1];document[_0x3e026b(0x1a1)](_0x3e026b(0x178))[_0x3e026b(0x18f)]=_0x4c20c1+'h'+_0x4a8fef['toString']()[_0x3e026b(0x16b)](0x2,'0')+'.'+_0x2979d4[_0x3e026b(0x161)]()[_0x3e026b(0x16b)](0x2,'0');_0x3d570a===0x3c&&(saveStatePeriodically(),_0x3d570a=0x0);;_0x3d570a===0xe10&&(saveStateInCloud(),_0x166ba6=0x0);;},0x3e8);}export async function uploadGame(_0x937ee4){const _0x8b30bb=a0_0x564b01,_0x2c2610=_0x937ee4[_0x8b30bb(0x168)][0x0];Module[_0x8b30bb(0x17d)](_0x2c2610,()=>{const _0x1ccce4=_0x8b30bb;Module[_0x1ccce4(0x184)]();});}export async function loadGame(_0x168d97){const _0x541f82=a0_0x564b01,_0x32a5f6=_0x168d97[_0x541f82(0x1cb)](/\.(gba|gbc|gb)$/,'.ss0'),_0x1de309=Module[_0x541f82(0x1b2)]();intro[_0x541f82(0x17c)][_0x541f82(0x16a)](_0x541f82(0x1b6)),ingame[_0x541f82(0x17c)][_0x541f82(0x1b3)]('disable'),_0x168d97['endsWith'](_0x541f82(0x1c7))||_0x168d97[_0x541f82(0x166)](_0x541f82(0x1c8))?(canvas['classList'][_0x541f82(0x16a)](_0x541f82(0x174)),areaTrans[_0x541f82(0x17c)]['add'](_0x541f82(0x17a)),localStorage['setItem'](_0x541f82(0x175),_0x541f82(0x1c2)+(window['innerWidth']-0xe6)+','+(window[_0x541f82(0x165)]-0xe6)*0x9/0xa)):localStorage[_0x541f82(0x1a4)]('screenSize','0,0,'+(window[_0x541f82(0x165)]-0x96)+','+(window[_0x541f82(0x165)]-0x96)*0x2/0x3),_0x1de309[_0x541f82(0x197)](_0x32a5f6)?(await Module[_0x541f82(0x192)](_0x541f82(0x187)+_0x168d97),confirm(_0x541f82(0x170))&&(await Module[_0x541f82(0x1a9)](0x0),localStorage[_0x541f82(0x1a4)](_0x541f82(0x1ad),_0x168d97),console[_0x541f82(0x191)](_0x168d97))):(await Module[_0x541f82(0x192)](_0x541f82(0x187)+_0x168d97),localStorage[_0x541f82(0x1a4)](_0x541f82(0x1ad),_0x168d97)),await statusShow();}export async function saveState(_0x4c022b){const _0x57742e=a0_0x564b01;await Module[_0x57742e(0x1a7)](_0x4c022b),await Module[_0x57742e(0x184)]();}export async function loadState(_0x2e955d){const _0x5ca414=a0_0x564b01;await Module[_0x5ca414(0x1a9)](_0x2e955d);}export async function downloadFile(_0x29fb10,_0x3af998){const _0x4c1332=a0_0x564b01,_0x26f986=Module[_0x4c1332(0x17f)](_0x29fb10),_0x853232=document[_0x4c1332(0x186)]('a');document[_0x4c1332(0x1ae)][_0x4c1332(0x1a5)](_0x853232),_0x853232[_0x4c1332(0x16e)]=_0x3af998;const _0x3f685b=new Blob([_0x26f986],{'type':'application/octet-stream'});_0x853232[_0x4c1332(0x17e)]=URL['createObjectURL'](_0x3f685b),_0x853232[_0x4c1332(0x172)](),URL[_0x4c1332(0x1b4)](_0x3f685b),_0x853232['remove']();}export function downloadFileInCloud(_0x212ba9){const _0x45b38d=a0_0x564b01,_0x46d39b=Module[_0x45b38d(0x17f)](_0x212ba9);return _0x46d39b;}function a0_0x3b74(_0x41fa5c,_0x27f3a0){const _0x469d0d=a0_0x469d();return a0_0x3b74=function(_0x3b74cc,_0x5a5fab){_0x3b74cc=_0x3b74cc-0x161;let _0x185279=_0x469d0d[_0x3b74cc];return _0x185279;},a0_0x3b74(_0x41fa5c,_0x27f3a0);}export async function uploadFile(_0x3f8f80){const _0x3e9fa8=a0_0x564b01,_0x21bb48=_0x3f8f80[_0x3e9fa8(0x168)][0x0];Module['uploadSaveOrSaveState'](_0x21bb48,()=>{const _0xf30b94=_0x3e9fa8;Module[_0xf30b94(0x184)]();});}export async function editFile(_0x3fb262,_0x3ed971,_0x34be7a){const _0x36093e=a0_0x564b01;await Module[_0x36093e(0x1bc)](_0x3fb262,_0x3ed971,_0x34be7a),await Module[_0x36093e(0x184)]();}export async function deleteFile(_0x26267d){const _0x38f6ef=a0_0x564b01;await Module['deleteFile'](_0x26267d),await Module[_0x38f6ef(0x184)]();}export function listGame(){const _0x461c15=a0_0x564b01,_0x95359c=Module[_0x461c15(0x1a8)]();return _0x95359c;}export function listSave(){const _0x107474=a0_0x564b01,_0x4040d1=Module[_0x107474(0x1b9)]();return _0x4040d1;}export function listState(){const _0x2c7cd8=Module['listStates']();return _0x2c7cd8;}export function listCheat(){const _0x29c0e0=Module['listCheats']();return _0x29c0e0;}export function listScreenshot(){const _0x39b928=a0_0x564b01,_0x4d7a80=Module[_0x39b928(0x1ca)]();return _0x4d7a80;}export function fileSize(_0x27557f){const _0x3148b6=a0_0x564b01,_0x30b9a6=Module[_0x3148b6(0x171)](_0x27557f);return _0x30b9a6;}export async function uploadCheat(_0xb777c){const _0x5afee0=a0_0x564b01;try{const _0x5b1187=_0xb777c[_0x5afee0(0x168)][0x0];await Module[_0x5afee0(0x1c4)](_0x5b1187,()=>{const _0x355eaf=_0x5afee0;console[_0x355eaf(0x191)](_0x355eaf(0x193),_0x5b1187['name']),localStorageFile(),Module[_0x355eaf(0x184)]();});}catch(_0x2876f9){console[_0x5afee0(0x179)](_0x5afee0(0x18d),_0x2876f9);}}export async function uploadSavSta(_0x251c38){const _0xb4d88d=a0_0x564b01;try{const _0x1f9275=_0x251c38['files'][0x0];await Module['uploadSaveOrSaveState'](_0x1f9275,()=>{const _0x27e7a4=a0_0x3b74;console[_0x27e7a4(0x191)](_0x27e7a4(0x189),_0x1f9275['name']),localStorageFile(),Module[_0x27e7a4(0x184)]();});}catch(_0xeba1b1){console[_0xb4d88d(0x179)](_0xb4d88d(0x17b),_0xeba1b1);}}export async function uploadSaveOrSaveState(_0x473391){Module['uploadSaveOrSaveState'](_0x473391,()=>{const _0x534d8f=a0_0x3b74;localStorageFile(),Module[_0x534d8f(0x184)]();});}export async function resumeGame(){const _0x55b7a9=a0_0x564b01;Module[_0x55b7a9(0x19e)](),Module[_0x55b7a9(0x1b8)](),notiMessage(_0x55b7a9(0x1aa),0x7d0);}export async function pauseGame(){const _0x863144=a0_0x564b01;Module[_0x863144(0x185)](),Module[_0x863144(0x1b8)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x3efad8){const _0x29c200=a0_0x564b01;Module[_0x29c200(0x1b7)](_0x3efad8);}export async function buttonUnpress(_0x2dc16f){const _0x46ef2e=a0_0x564b01;Module[_0x46ef2e(0x1a0)](_0x2dc16f);}export async function screenShot(_0x2c355b){const _0x318dee=a0_0x564b01,_0x1b9448=localStorage['getItem']('gameName'),_0x20c462=_0x1b9448[_0x318dee(0x1cb)](/\.(gba|gbc|gb)$/,'_');await Module[_0x318dee(0x1c3)](''+_0x20c462+_0x2c355b+_0x318dee(0x167)),await Module[_0x318dee(0x184)]();const _0x5b8a23=await fileToBase64(Module['downloadFile']('/data/screenshots/'+_0x20c462+_0x2c355b+_0x318dee(0x167))),_0xdedddf=Date['now'](),_0x3a1512=formatDateTime(_0xdedddf);localStorage['setItem'](_0x1b9448+_0x318dee(0x18b)+_0x2c355b,_0x3a1512),localStorage[_0x318dee(0x1a4)](_0x1b9448+_0x318dee(0x199)+_0x2c355b,_0x5b8a23);}export async function captureOCR(_0x30dbab){const _0x29807d=a0_0x564b01;Module[_0x29807d(0x1c3)](_0x30dbab);const _0x1533b6=Module[_0x29807d(0x17f)](_0x29807d(0x1b0)+_0x30dbab);return _0x1533b6;}export async function setFastForwardMultiplier(_0x5a045f){Module['setFastForwardMultiplier'](_0x5a045f);}export function uploadCheats(_0x23a311,_0x410b5d,_0x285f3e,_0x5ecbb6,_0x5a7889){const _0x8cf3ef=a0_0x564b01;Module[_0x8cf3ef(0x1c4)](_0x23a311,()=>{const _0x30286e=_0x8cf3ef;Module[_0x30286e(0x1c5)](),setTimeout(()=>{const _0x4e921a=_0x30286e;Module[_0x4e921a(0x184)]();},0x1f4),_0x5ecbb6&&(localStorage['setItem'](_0x410b5d+_0x30286e(0x18a),_0x285f3e),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x5a7889[_0x30286e(0x18f)]=localStorage[_0x30286e(0x1ab)](_0x410b5d+_0x30286e(0x18a)||_0x30286e(0x1bd));});}