const a0_0x3873dd=a0_0x1c71;(function(_0x218711,_0x1390e3){const _0x4b2245=a0_0x1c71,_0x72f4ba=_0x218711();while(!![]){try{const _0x1e54e5=-parseInt(_0x4b2245(0x8d))/0x1*(-parseInt(_0x4b2245(0xa1))/0x2)+parseInt(_0x4b2245(0xb2))/0x3*(parseInt(_0x4b2245(0xc4))/0x4)+parseInt(_0x4b2245(0xc2))/0x5*(parseInt(_0x4b2245(0xbd))/0x6)+parseInt(_0x4b2245(0xcb))/0x7+parseInt(_0x4b2245(0x7f))/0x8+parseInt(_0x4b2245(0xc0))/0x9*(-parseInt(_0x4b2245(0x93))/0xa)+parseInt(_0x4b2245(0xca))/0xb*(-parseInt(_0x4b2245(0xc7))/0xc);if(_0x1e54e5===_0x1390e3)break;else _0x72f4ba['push'](_0x72f4ba['shift']());}catch(_0x2aff10){_0x72f4ba['push'](_0x72f4ba['shift']());}}}(a0_0xa1f2,0x4bbc6));function a0_0x1c71(_0x21a5ec,_0x30df62){const _0xa1f21=a0_0xa1f2();return a0_0x1c71=function(_0x1c71af,_0x50d2b5){_0x1c71af=_0x1c71af-0x6a;let _0x1d7e54=_0xa1f21[_0x1c71af];return _0x1d7e54;},a0_0x1c71(_0x21a5ec,_0x30df62);}import a0_0xc48ce3 from'../core/mgba.js';import*as a0_0x422095 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x3873dd(0x88)](a0_0x3873dd(0xc3))};function a0_0xa1f2(){const _0x58171c=['416253iLECzm','replace','loadGame','Online!','name','body','gameName','.gba','appendChild','createElement','control-setting','8022UZtcRk','FSSync','SDL2','432leVsQS','/data/screenshots/','2080XoqTKm','canvas','12DQarxH','listScreenshots','hidden','2076qSbMTQ','_dateState0','toString','59609AkYfQf','303856bENxuj','slotStateSaved','padStart','screenSize','log','createObjectURL','Auto\x20save\x20','autoLoadCheats','_imageState0','/data/games/','Save/State\x20uploaded\x20successfully:','loadState','Do\x20you\x20want\x20to\x20load\x20save\x20state?','Unable\x20to\x20upload\x20to\x20Cloud!','type','onLine','getItem','editFileName','uploadSaveOrSaveState','error','add','textContent','listGames','Cloud\x20upload\x20','.png','3735312zYpYVh','text/plain','revokeObjectURL','buttonPress','Cheat\x20uploaded\x20successfully:','setItem','fileSize','includes','.ss0','getElementById','visibilityState','Error\x20uploadSavSta:','disable','\x20time(s)','1QxkPiZ','Error\x20uploadCheat:','#E0C068','then','screenshot','turboState','106350FYLaKg','setFastForwardMultiplier','style','Off','addEventListener','No\x20screenshot!','Cheat\x20Enabled!','saveState','downloadFile','/data/states/','remove','visible','#20A5A6','files','550828NSjeKj','uploadCheats','resumeGame','pauseGame','contains','listStates','endsWith','classList','deleteFile','innerWidth','turboF','FSInit','_savedCheats','application/octet-stream','download','href','0,0,'];a0_0xa1f2=function(){return _0x58171c;};return a0_0xa1f2();}function initializeCore(_0x9b57d8,_0x3d7a56){const _0x53b267=a0_0x3873dd;_0x9b57d8(_0x3d7a56)[_0x53b267(0x90)](function(_0x5aba0e){const _0x367eec=_0x53b267;_0x5aba0e[_0x367eec(0xac)]();});}initializeCore(a0_0xc48ce3,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById']('canvas'),savedTurboState=localStorage['getItem'](a0_0x3873dd(0x92)),controlSetting=document[a0_0x3873dd(0x88)](a0_0x3873dd(0xbc));function handleVisibilityChange(_0x47d70c){const _0x4b91f8=a0_0x3873dd;document[_0x4b91f8(0x89)]===_0x4b91f8(0xc6)||_0x47d70c?.[_0x4b91f8(0x74)]==='beforeunload'||_0x47d70c?.['persisted']?(pauseGame(),canvas['classList']['add'](_0x4b91f8(0x9e))):(setTimeout(()=>{const _0xbd8bc4=_0x4b91f8;canvas[_0xbd8bc4(0xa8)][_0xbd8bc4(0x9d)](_0xbd8bc4(0x9e));},0x258),controlSetting['classList'][_0x4b91f8(0xa5)]('visible')&&resumeGame());}async function statusShow(){const _0x5c7e40=a0_0x3873dd;document[_0x5c7e40(0x97)]('pagehide',handleVisibilityChange),document[_0x5c7e40(0x97)]('visibilitychange',handleVisibilityChange),window[_0x5c7e40(0x97)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x422095[_0x5c7e40(0xab)](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x5c7e40(0x76)](_0x5c7e40(0xcc)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x3aa64a=a0_0x3873dd;await ledSave(_0x3aa64a(0x9f)),await Module[_0x3aa64a(0x9a)](0x0),await Module['FSSync'](),await screenShot(0x0),console['log'](_0x3aa64a(0x6c)+ ++countAutoSave+_0x3aa64a(0x8c));}async function saveStateInCloud(){const _0x344de9=a0_0x3873dd,_0x3f08bd=localStorage[_0x344de9(0x76)]('gameName'),_0x4eabdb=_0x3f08bd[_0x344de9(0xb3)](_0x344de9(0xb9),_0x344de9(0x87)),_0x456330=localStorage[_0x344de9(0x76)]('uId'),_0x112c9c=localStorage[_0x344de9(0x76)](_0x3f08bd+_0x344de9(0x6e)),_0x4a8ef5=localStorage[_0x344de9(0x76)](_0x3f08bd+_0x344de9(0xc8));if(navigator[_0x344de9(0x75)]){if(_0x456330){await ledSave(_0x344de9(0x8f)),await delay(0x3e8),await dpUploadFile(_0x4eabdb,Module[_0x344de9(0x9b)](_0x344de9(0x9c)+_0x4eabdb));if(_0x112c9c!==null){const _0x2cb51a=_0x112c9c+'\x0a\x0a'+_0x4a8ef5,_0x343765=new Blob([_0x2cb51a],{'type':_0x344de9(0x80)});await dpUploadFile(_0x3f08bd+'_slot0.txt',_0x343765);}else console[_0x344de9(0x6a)](_0x344de9(0x98));await lockNoti('',_0x344de9(0x7d)+ ++countUpload+_0x344de9(0x8c),0x7d0);}else console[_0x344de9(0x6a)](_0x344de9(0x73));}else console['log'](_0x344de9(0xb5));}function startTimer(){let [_0x5be498,_0x2ac049,_0xcfc93c,_0x3a64ae,_0x2e814a]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x4fa6bf=a0_0x1c71;_0xcfc93c++,_0x3a64ae++,_0x2e814a++;if(_0xcfc93c===0x3c)[_0xcfc93c,_0x2ac049]=[0x0,_0x2ac049+0x1];if(_0x2ac049===0x3c)[_0x2ac049,_0x5be498]=[0x0,_0x5be498+0x1];document[_0x4fa6bf(0x88)]('timer')[_0x4fa6bf(0x7b)]=_0x5be498+'h'+_0x2ac049['toString']()[_0x4fa6bf(0xcd)](0x2,'0')+'.'+_0xcfc93c[_0x4fa6bf(0xc9)]()[_0x4fa6bf(0xcd)](0x2,'0');_0x3a64ae===0x3c&&(saveStatePeriodically(),_0x3a64ae=0x0);;_0x3a64ae===0xe10&&(saveStateInCloud(),_0x2e814a=0x0);;},0x3e8);}export async function uploadGame(_0x34b2a8){const _0x46d413=a0_0x3873dd,_0x14e54e=_0x34b2a8[_0x46d413(0xa0)][0x0];Module['uploadRom'](_0x14e54e,()=>{const _0x2abaee=_0x46d413;Module[_0x2abaee(0xbe)]();});}export async function loadGame(_0xf4405){const _0x2cd328=a0_0x3873dd,_0x2f3eb5=_0xf4405[_0x2cd328(0xb3)](/\.(gba|gbc|gb|zip)$/,_0x2cd328(0x87)),_0x1cbd6f=Module[_0x2cd328(0xa6)]();intro['classList'][_0x2cd328(0x7a)](_0x2cd328(0x8b)),errorLogElements[0x0][_0x2cd328(0x95)]['bottom']='0',ingame[_0x2cd328(0xa8)]['remove'](_0x2cd328(0x8b)),_0xf4405[_0x2cd328(0xa7)]('.gbc')||_0xf4405['endsWith']('.gb')?(canvas['classList'][_0x2cd328(0x7a)]('gbc'),areaTrans[_0x2cd328(0xa8)][_0x2cd328(0x7a)]('gbc1'),localStorage['setItem'](_0x2cd328(0xce),'0,0,'+(window['innerWidth']-0xe6)+','+(window[_0x2cd328(0xaa)]-0xe6)*0x9/0xa)):localStorage[_0x2cd328(0x84)](_0x2cd328(0xce),_0x2cd328(0xb1)+(window[_0x2cd328(0xaa)]-0x96)+','+(window[_0x2cd328(0xaa)]-0x96)*0x2/0x3),_0x1cbd6f[_0x2cd328(0x86)](_0x2f3eb5)?(await Module[_0x2cd328(0xb4)](_0x2cd328(0x6f)+_0xf4405),confirm(_0x2cd328(0x72))&&(await Module['loadState'](0x0),localStorage[_0x2cd328(0x84)]('gameName',_0xf4405),console[_0x2cd328(0x6a)](_0xf4405))):(await Module[_0x2cd328(0xb4)](_0x2cd328(0x6f)+_0xf4405),localStorage[_0x2cd328(0x84)](_0x2cd328(0xb8),_0xf4405)),await statusShow();}export async function saveState(_0x26a083){const _0x1f9745=a0_0x3873dd;await Module['saveState'](_0x26a083),await Module[_0x1f9745(0xbe)]();}export async function loadState(_0x27378d){const _0x1fdbe6=a0_0x3873dd;await Module[_0x1fdbe6(0x71)](_0x27378d);}export async function downloadFile(_0x346e44,_0x55d94e){const _0x237fa4=a0_0x3873dd,_0x5dc98e=Module[_0x237fa4(0x9b)](_0x346e44),_0x245200=document[_0x237fa4(0xbb)]('a');document[_0x237fa4(0xb7)][_0x237fa4(0xba)](_0x245200),_0x245200[_0x237fa4(0xaf)]=_0x55d94e;const _0x213491=new Blob([_0x5dc98e],{'type':_0x237fa4(0xae)});_0x245200[_0x237fa4(0xb0)]=URL[_0x237fa4(0x6b)](_0x213491),_0x245200['click'](),URL[_0x237fa4(0x81)](_0x213491),_0x245200[_0x237fa4(0x9d)]();}export function downloadFileInCloud(_0x38a0ba){const _0x19a954=Module['downloadFile'](_0x38a0ba);return _0x19a954;}export async function uploadFile(_0x5357ae){const _0x30a701=a0_0x3873dd,_0x51126b=_0x5357ae[_0x30a701(0xa0)][0x0];Module[_0x30a701(0x78)](_0x51126b,()=>{const _0x1362c4=_0x30a701;Module[_0x1362c4(0xbe)]();});}export async function editFile(_0x565c15,_0x55bf87,_0x5cddc2){const _0x229d85=a0_0x3873dd;await Module[_0x229d85(0x77)](_0x565c15,_0x55bf87,_0x5cddc2),await Module[_0x229d85(0xbe)]();}export async function deleteFile(_0x9938cb){const _0x4299d7=a0_0x3873dd;await Module[_0x4299d7(0xa9)](_0x9938cb),await Module[_0x4299d7(0xbe)]();}export function listGame(){const _0x1c796f=a0_0x3873dd,_0x11e7fa=Module[_0x1c796f(0x7c)]();return _0x11e7fa;}export function listSave(){const _0x575d7b=Module['listSaves']();return _0x575d7b;}export function listState(){const _0x49ccad=Module['listStates']();return _0x49ccad;}export function listCheat(){const _0x1a037c=Module['listCheats']();return _0x1a037c;}export function listScreenshot(){const _0x1869ed=a0_0x3873dd,_0x97ea86=Module[_0x1869ed(0xc5)]();return _0x97ea86;}export function fileSize(_0x5c1512){const _0x1ba3fa=a0_0x3873dd,_0x340b77=Module[_0x1ba3fa(0x85)](_0x5c1512);return _0x340b77;}export async function uploadCheat(_0x416364){const _0x1bed15=a0_0x3873dd;try{const _0x143016=_0x416364[_0x1bed15(0xa0)][0x0];await Module[_0x1bed15(0xa2)](_0x143016,()=>{const _0x320892=_0x1bed15;console[_0x320892(0x6a)](_0x320892(0x83),_0x143016[_0x320892(0xb6)]),localStorageFile(),Module[_0x320892(0xbe)]();});}catch(_0xf79a53){console[_0x1bed15(0x79)](_0x1bed15(0x8e),_0xf79a53);}}export async function uploadSavSta(_0x40aede){const _0x2163df=a0_0x3873dd;try{const _0x59050d=_0x40aede[_0x2163df(0xa0)][0x0];await Module['uploadSaveOrSaveState'](_0x59050d,()=>{const _0x21e1da=_0x2163df;console['log'](_0x21e1da(0x70),_0x59050d[_0x21e1da(0xb6)]),localStorageFile(),Module[_0x21e1da(0xbe)]();});}catch(_0x23172c){console[_0x2163df(0x79)](_0x2163df(0x8a),_0x23172c);}}export async function uploadSaveOrSaveState(_0x59974a){const _0x2b96e8=a0_0x3873dd;Module[_0x2b96e8(0x78)](_0x59974a,()=>{const _0x1c2dbf=_0x2b96e8;localStorageFile(),Module[_0x1c2dbf(0xbe)]();});}export async function resumeGame(){const _0x4c7d8c=a0_0x3873dd;Module[_0x4c7d8c(0xa3)](),Module[_0x4c7d8c(0xbf)](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x1aaa48=a0_0x3873dd;Module[_0x1aaa48(0xa4)](),Module['SDL2'](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x5b0962){const _0x41117c=a0_0x3873dd;Module[_0x41117c(0x82)](_0x5b0962);}export async function buttonUnpress(_0x10175f){Module['buttonUnpress'](_0x10175f);}export async function screenShot(_0x5e6e5e){const _0x25187d=a0_0x3873dd,_0x17c64c=localStorage[_0x25187d(0x76)](_0x25187d(0xb8)),_0x1ae784=_0x17c64c[_0x25187d(0xb3)](/\.(gba|gbc|gb|zip)$/,'_');await Module['screenshot'](''+_0x1ae784+_0x5e6e5e+'.png'),await Module['FSSync']();const _0xc0401c=await fileToBase64(Module['downloadFile'](_0x25187d(0xc1)+_0x1ae784+_0x5e6e5e+_0x25187d(0x7e))),_0x409548=Date['now'](),_0x5ee68f=formatDateTime(_0x409548);localStorage[_0x25187d(0x84)](_0x17c64c+'_dateState'+_0x5e6e5e,_0x5ee68f),localStorage[_0x25187d(0x84)](_0x17c64c+'_imageState'+_0x5e6e5e,_0xc0401c);}export async function captureOCR(_0x329061){const _0x513d5e=a0_0x3873dd;Module[_0x513d5e(0x91)](_0x329061);const _0x4d4dfe=Module[_0x513d5e(0x9b)](_0x513d5e(0xc1)+_0x329061);return _0x4d4dfe;}export async function setFastForwardMultiplier(_0x54035c){const _0x2ad083=a0_0x3873dd;Module[_0x2ad083(0x94)](_0x54035c);}export function uploadCheats(_0x19dfdf,_0x42005c,_0x229cc0,_0x48c057,_0x5dab34){Module['uploadCheats'](_0x19dfdf,()=>{const _0x2142ce=a0_0x1c71;Module[_0x2142ce(0x6d)](),setTimeout(()=>{const _0x21218b=_0x2142ce;Module[_0x21218b(0xbe)]();},0x1f4),_0x48c057&&(localStorage[_0x2142ce(0x84)](_0x42005c+_0x2142ce(0xad),_0x229cc0),notiMessage(_0x2142ce(0x99),0x5dc)),_0x5dab34[_0x2142ce(0x7b)]=localStorage['getItem'](_0x42005c+_0x2142ce(0xad)||_0x2142ce(0x96));});}