const a0_0x1b3205=a0_0x1ca6;(function(_0x8393e6,_0x505b70){const _0x56dede=a0_0x1ca6,_0x3bc8c5=_0x8393e6();while(!![]){try{const _0x4cd35b=-parseInt(_0x56dede(0x218))/0x1*(parseInt(_0x56dede(0x1ea))/0x2)+parseInt(_0x56dede(0x206))/0x3*(parseInt(_0x56dede(0x1f4))/0x4)+parseInt(_0x56dede(0x1ff))/0x5*(parseInt(_0x56dede(0x1cf))/0x6)+parseInt(_0x56dede(0x20e))/0x7+-parseInt(_0x56dede(0x1ee))/0x8*(parseInt(_0x56dede(0x205))/0x9)+-parseInt(_0x56dede(0x1f9))/0xa+parseInt(_0x56dede(0x224))/0xb*(-parseInt(_0x56dede(0x1dc))/0xc);if(_0x4cd35b===_0x505b70)break;else _0x3bc8c5['push'](_0x3bc8c5['shift']());}catch(_0x1864d4){_0x3bc8c5['push'](_0x3bc8c5['shift']());}}}(a0_0x28f1,0xa19ab));import a0_0x3a4371 from'../core/mgba.js';import*as a0_0x45d5e7 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document[a0_0x1b3205(0x1f1)](a0_0x1b3205(0x21e))};function initializeCore(_0x5c61e9,_0x548155){const _0x268cd1=a0_0x1b3205;_0x5c61e9(_0x548155)[_0x268cd1(0x228)](function(_0x546da9){const _0x246d75=_0x268cd1;_0x546da9[_0x246d75(0x227)]();});}initializeCore(a0_0x3a4371,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x1b3205(0x1f1)](a0_0x1b3205(0x21e)),savedTurboState=localStorage[a0_0x1b3205(0x20f)](a0_0x1b3205(0x1d2)),controlSetting=document[a0_0x1b3205(0x1f1)](a0_0x1b3205(0x1f7));function handleVisibilityChange(_0x351a02){const _0x50967b=a0_0x1b3205;document[_0x50967b(0x1e3)]===_0x50967b(0x1dd)||_0x351a02?.[_0x50967b(0x1d5)]==='beforeunload'||_0x351a02?.['persisted']?(pauseGame(),canvas[_0x50967b(0x1e2)][_0x50967b(0x215)](_0x50967b(0x1ec))):(setTimeout(()=>{const _0x179cda=_0x50967b;canvas[_0x179cda(0x1e2)]['remove'](_0x179cda(0x1ec));},0x258),controlSetting[_0x50967b(0x1e2)]['contains'](_0x50967b(0x1ec))&&resumeGame());}async function statusShow(){const _0x1af665=a0_0x1b3205;document[_0x1af665(0x200)](_0x1af665(0x210),handleVisibilityChange),document['addEventListener'](_0x1af665(0x1f2),handleVisibilityChange),window[_0x1af665(0x200)](_0x1af665(0x1ed),handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x45d5e7['turboF'](turboState)),await delay(0xc8),await Module[_0x1af665(0x212)](),await delay(0x320),await led(parseInt(localStorage[_0x1af665(0x20f)](_0x1af665(0x21c)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x1af1bb=a0_0x1b3205;await ledSave(_0x1af1bb(0x204)),await Module[_0x1af1bb(0x1fa)](0x0),await Module[_0x1af1bb(0x1e8)](),await screenShot(0x0),console['log'](_0x1af1bb(0x214)+ ++countAutoSave+_0x1af1bb(0x1ce));}async function saveStateInCloud(){const _0x252f61=a0_0x1b3205,_0x137cfd=localStorage[_0x252f61(0x20f)]('gameName'),_0x395dad=_0x137cfd[_0x252f61(0x22b)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x3584fb=localStorage[_0x252f61(0x20f)](_0x252f61(0x1e5));navigator['onLine']&&(_0x3584fb&&(await ledSave(_0x252f61(0x1e9)),await delay(0x3e8),await dpUploadFile(_0x395dad,Module['downloadFile'](_0x252f61(0x1eb)+_0x395dad),_0x252f61(0x1e4)),await lockNoti('',_0x252f61(0x1f5)+ ++countUpload+'\x20time(s)',0x7d0)));}function startTimer(){let [_0xa3ba2,_0x4800bb,_0x4172f4,_0x526d46,_0x241e60]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x161358=a0_0x1ca6;_0x4172f4++,_0x526d46++,_0x241e60++;if(_0x4172f4===0x3c)[_0x4172f4,_0x4800bb]=[0x0,_0x4800bb+0x1];if(_0x4800bb===0x3c)[_0x4800bb,_0xa3ba2]=[0x0,_0xa3ba2+0x1];document['getElementById']('timer')[_0x161358(0x1f3)]=_0xa3ba2+'h'+_0x4800bb[_0x161358(0x1db)]()[_0x161358(0x21d)](0x2,'0')+'.'+_0x4172f4[_0x161358(0x1db)]()[_0x161358(0x21d)](0x2,'0');_0x526d46===0x3c&&(saveStatePeriodically(),_0x526d46=0x0);;_0x241e60===0x708&&(saveStateInCloud(),_0x241e60=0x0);;},0x3e8);}export async function uploadGame(_0x2905bf){const _0x21bba4=a0_0x1b3205,_0x909211=_0x2905bf[_0x21bba4(0x1e6)][0x0];Module[_0x21bba4(0x1e7)](_0x909211,()=>{Module['FSSync']();});}export async function loadGame(_0x3bf36f){const _0x15df7a=a0_0x1b3205,_0x5aed22=_0x3bf36f[_0x15df7a(0x22b)](/\.(gba|gbc|gb|zip)$/,_0x15df7a(0x229)),_0xb7bf38=Module['listStates']()['filter'](_0x2b96c8=>_0x2b96c8!=='.'&&_0x2b96c8!=='..');intro[_0x15df7a(0x1e2)][_0x15df7a(0x215)](_0x15df7a(0x220)),errorLogElements[0x0]['style'][_0x15df7a(0x1fc)]='0',ingame[_0x15df7a(0x1e2)]['remove'](_0x15df7a(0x220)),_0x3bf36f[_0x15df7a(0x20b)]('.gbc')||_0x3bf36f[_0x15df7a(0x20b)](_0x15df7a(0x203))?(canvas[_0x15df7a(0x1e2)][_0x15df7a(0x215)](_0x15df7a(0x21f)),areaTrans[_0x15df7a(0x1e2)][_0x15df7a(0x215)](_0x15df7a(0x216)),localStorage[_0x15df7a(0x202)]('screenSize',_0x15df7a(0x1df)+(window[_0x15df7a(0x201)]-0xe6)+','+(window[_0x15df7a(0x201)]-0xe6)*0x9/0xa)):localStorage[_0x15df7a(0x202)](_0x15df7a(0x20a),'0,0,'+(window[_0x15df7a(0x201)]-0x96)+','+(window[_0x15df7a(0x201)]-0x96)*0x2/0x3),_0xb7bf38[_0x15df7a(0x22f)](_0x5aed22)?(await Module[_0x15df7a(0x1da)](_0x15df7a(0x230)+_0x3bf36f),confirm(_0x15df7a(0x209))&&(await Module[_0x15df7a(0x208)](0x0),localStorage[_0x15df7a(0x202)](_0x15df7a(0x222),_0x3bf36f),console[_0x15df7a(0x213)](_0x3bf36f))):(await Module['loadGame']('/data/games/'+_0x3bf36f),localStorage['setItem'](_0x15df7a(0x222),_0x3bf36f),console['log'](_0x3bf36f)),await statusShow();}export async function saveState(_0x43e99d){const _0x2a105b=a0_0x1b3205;await Module[_0x2a105b(0x1fa)](_0x43e99d),await Module[_0x2a105b(0x1e8)]();}export async function loadState(_0x23a3fa){const _0x2d77c1=a0_0x1b3205;await Module[_0x2d77c1(0x208)](_0x23a3fa);}export async function downloadFile(_0x346cdf,_0x371dd0){const _0x42bbb2=a0_0x1b3205,_0x1a5958=Module[_0x42bbb2(0x21a)](_0x346cdf),_0xd40445=document[_0x42bbb2(0x1f6)]('a');document[_0x42bbb2(0x1de)][_0x42bbb2(0x219)](_0xd40445),_0xd40445[_0x42bbb2(0x211)]=_0x371dd0;const _0x5779ec=new Blob([_0x1a5958],{'type':'application/octet-stream'});_0xd40445['href']=URL['createObjectURL'](_0x5779ec),_0xd40445['click'](),URL[_0x42bbb2(0x217)](_0x5779ec),_0xd40445[_0x42bbb2(0x22e)]();}export function downloadFileInCloud(_0x210242){const _0x3337db=Module['downloadFile'](_0x210242);return _0x3337db;}function a0_0x28f1(){const _0x5b5e20=['appendChild','downloadFile','length','slotStateSaved','padStart','canvas','gbc','disable','screenshot','gameName','editFileName','490842ypQAZc','.png','Cheat\x20Enabled!','FSInit','then','.ss0','charCodeAt','replace','pauseGame','listSaves','remove','includes','/data/games/','listCheats','\x20time(s)','10968AOsXRE','Off','set','turboState','filter','buttonUnpress','type','split','now','substring','Resumed!','loadGame','toString','168Bqzapl','hidden','body','0,0,','Paused!','fileSize','classList','visibilityState','state','uId','files','uploadRom','FSSync','#E0C068','19918xVsfQR','/data/states/','visible','beforeunload','8mQLjzj','uploadAll','/data/screenshots/','getElementById','visibilitychange','textContent','4oAPCzG','Cloud\x20upload\x20','createElement','control-setting','_savedCheats','5067130nMQDTP','saveState','setFastForwardMultiplier','bottom','indexOf','autoLoadCheats','3395SQaRCW','addEventListener','innerWidth','setItem','.gb','#20A5A6','8962407HuyPvE','2829921BlCeVR','image/png','loadState','Do\x20you\x20want\x20to\x20load\x20save\x20state?','screenSize','endsWith','tEXtComment\x00','resumeGame','8903363xNLwCL','getItem','pagehide','download','SDL2','log','Auto\x20save\x20','add','gbc1','revokeObjectURL','67iQlHxp'];a0_0x28f1=function(){return _0x5b5e20;};return a0_0x28f1();}export async function uploadFileInCloud(_0xe9c3af){const _0x2ee16b=a0_0x1b3205;Module[_0x2ee16b(0x1ef)](_0xe9c3af,()=>{const _0x3fcec3=_0x2ee16b;localStorageFile(),Module[_0x3fcec3(0x1e8)]();});}export async function uploadFile(_0x5025a0){const _0x14f1b5=a0_0x1b3205,_0x273776=_0x5025a0['files'][0x0];Module[_0x14f1b5(0x1ef)](_0x273776,()=>{const _0x44fef6=_0x14f1b5;localStorageFile(),Module[_0x44fef6(0x1e8)]();});}export async function editFile(_0x355f4c,_0x4abf15,_0x7a8909){const _0x4bfe0b=a0_0x1b3205;await Module[_0x4bfe0b(0x223)](_0x355f4c,_0x4abf15,_0x7a8909),await Module[_0x4bfe0b(0x1e8)]();}export async function deleteFile(_0x5f2321){const _0x4902f9=a0_0x1b3205;await Module['deleteFile'](_0x5f2321),await Module[_0x4902f9(0x1e8)]();}export function listGame(){const _0x5dd7b1=a0_0x1b3205,_0x343d3a=Module['listRoms']()[_0x5dd7b1(0x1d3)](_0x1acd50=>_0x1acd50!=='.'&&_0x1acd50!=='..');return _0x343d3a;}export function listSave(){const _0x2f3676=a0_0x1b3205,_0x16116e=Module[_0x2f3676(0x22d)]()['filter'](_0x1ad27c=>_0x1ad27c!=='.'&&_0x1ad27c!=='..');return _0x16116e;}export function listState(){const _0x17905c=a0_0x1b3205,_0x567ff4=Module['listStates']()[_0x17905c(0x1d3)](_0x21e0a1=>_0x21e0a1!=='.'&&_0x21e0a1!=='..');return _0x567ff4;}export function listCheat(){const _0x4aac4c=a0_0x1b3205,_0x12fbbe=Module[_0x4aac4c(0x1cd)]()[_0x4aac4c(0x1d3)](_0x1e0dfd=>_0x1e0dfd!=='.'&&_0x1e0dfd!=='..');return _0x12fbbe;}export function listScreenshot(){const _0x41dae0=a0_0x1b3205,_0x31fd2e=Module['listScreenshots']()[_0x41dae0(0x1d3)](_0x348662=>_0x348662!=='.'&&_0x348662!=='..');return _0x31fd2e;}export function embedTextInPngFile(_0x3f7cbf,_0x403760,_0x423dbd){const _0x4d026c=a0_0x1b3205;let _0xc5b125=atob(_0x3f7cbf['split'](',')[0x1]),_0x1e25eb=new Uint8Array(_0xc5b125[_0x4d026c(0x21b)]);for(let _0x102629=0x0;_0x102629<_0xc5b125[_0x4d026c(0x21b)];_0x102629++){_0x1e25eb[_0x102629]=_0xc5b125[_0x4d026c(0x22a)](_0x102629);}let _0x5545af=new TextEncoder()['encode'](_0x4d026c(0x20c)+_0x403760),_0x3767ae=new Uint8Array(_0x1e25eb[_0x4d026c(0x21b)]+_0x5545af[_0x4d026c(0x21b)]);_0x3767ae[_0x4d026c(0x1d1)](_0x1e25eb,0x0),_0x3767ae[_0x4d026c(0x1d1)](_0x5545af,_0x1e25eb[_0x4d026c(0x21b)]);let _0x1c0587=new Blob([_0x3767ae],{'type':_0x4d026c(0x207)}),_0x5e4748=new File([_0x1c0587],_0x423dbd,{'type':_0x4d026c(0x207)});return _0x5e4748;}export function extractTextFromPngBase64(_0x58e07f){const _0x3bd5f9=a0_0x1b3205;let _0x544b99=atob(_0x58e07f[_0x3bd5f9(0x1d6)](',')[0x1]),_0x72cf3b='tEXtComment\x00',_0x357977=_0x544b99[_0x3bd5f9(0x1fd)](_0x72cf3b);if(_0x357977!==-0x1)return _0x544b99[_0x3bd5f9(0x1d8)](_0x357977+_0x72cf3b[_0x3bd5f9(0x21b)]);return null;}export function fileSize(_0x5a156b){const _0x5e4147=a0_0x1b3205,_0x3a3307=Module[_0x5e4147(0x1e1)](_0x5a156b);return _0x3a3307;}export async function resumeGame(){const _0x135e6b=a0_0x1b3205;Module[_0x135e6b(0x20d)](),Module['SDL2'](),notiMessage(_0x135e6b(0x1d9),0x7d0);}export async function pauseGame(){const _0x455a1f=a0_0x1b3205;Module[_0x455a1f(0x22c)](),Module[_0x455a1f(0x212)](),notiMessage(_0x455a1f(0x1e0),0x7d0);}export async function buttonPress(_0x5049d9){Module['buttonPress'](_0x5049d9);}export async function buttonUnpress(_0x50088f){const _0x413843=a0_0x1b3205;Module[_0x413843(0x1d4)](_0x50088f);}export async function screenShot(_0x2bb23e){const _0x1b1f3f=a0_0x1b3205,_0x4943f1=localStorage[_0x1b1f3f(0x20f)](_0x1b1f3f(0x222))['replace'](/\.(gba|gbc|gb|zip)$/,''),_0x36ba63=_0x4943f1+'_'+_0x2bb23e+_0x1b1f3f(0x225);await Module[_0x1b1f3f(0x221)](_0x36ba63),await Module[_0x1b1f3f(0x1e8)]();const _0x9b63e9=await fileToBase64(Module[_0x1b1f3f(0x21a)](_0x1b1f3f(0x1f0)+_0x36ba63)),_0x4db595=embedTextInPngFile(_0x9b63e9,formatDateTime(Date[_0x1b1f3f(0x1d7)]()),_0x36ba63);Module[_0x1b1f3f(0x1ef)](_0x4db595,()=>{localStorageFile(),Module['FSSync']();});}function a0_0x1ca6(_0x1b4ea2,_0x37f000){const _0x28f149=a0_0x28f1();return a0_0x1ca6=function(_0x1ca624,_0x5f0063){_0x1ca624=_0x1ca624-0x1cd;let _0x388223=_0x28f149[_0x1ca624];return _0x388223;},a0_0x1ca6(_0x1b4ea2,_0x37f000);}export async function dowloadScreenShot(_0x95f166){try{const _0x2ed6bf=await fileToBase64(Module['downloadFile'](_0x95f166));return _0x2ed6bf;}catch{}}export async function captureOCR(_0x33afe6){const _0x20a8bb=a0_0x1b3205;Module[_0x20a8bb(0x221)](_0x33afe6);const _0x5ddaf8=Module[_0x20a8bb(0x21a)](_0x20a8bb(0x1f0)+_0x33afe6);return _0x5ddaf8;}export async function setFastForwardMultiplier(_0x4d6b41){const _0x2dbd46=a0_0x1b3205;Module[_0x2dbd46(0x1fb)](_0x4d6b41);}export function uploadCheats(_0x46dc10,_0x3c675c,_0x44da34,_0x2088a4,_0x5e58d8){const _0x175bf2=a0_0x1b3205;Module[_0x175bf2(0x1ef)](_0x46dc10,()=>{const _0x423a25=_0x175bf2;Module[_0x423a25(0x1fe)](),setTimeout(()=>{Module['FSSync']();},0x1f4),_0x2088a4&&(localStorage[_0x423a25(0x202)](_0x3c675c+_0x423a25(0x1f8),_0x44da34),notiMessage(_0x423a25(0x226),0x5dc)),_0x5e58d8[_0x423a25(0x1f3)]=localStorage[_0x423a25(0x20f)](_0x3c675c+'_savedCheats'||_0x423a25(0x1d0));});}export function setVolume(_0x1e1c94){Module['setVolume'](_0x1e1c94);}