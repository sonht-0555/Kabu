const a0_0x44cade=a0_0x44b8;(function(_0x599ef7,_0x185e14){const _0x33430b=a0_0x44b8,_0xebf0bf=_0x599ef7();while(!![]){try{const _0x39c3db=-parseInt(_0x33430b(0x1cd))/0x1+parseInt(_0x33430b(0x184))/0x2*(-parseInt(_0x33430b(0x1eb))/0x3)+parseInt(_0x33430b(0x188))/0x4*(parseInt(_0x33430b(0x1d9))/0x5)+parseInt(_0x33430b(0x1ba))/0x6*(parseInt(_0x33430b(0x1c0))/0x7)+-parseInt(_0x33430b(0x1d3))/0x8+-parseInt(_0x33430b(0x1ee))/0x9*(parseInt(_0x33430b(0x1e7))/0xa)+parseInt(_0x33430b(0x183))/0xb;if(_0x39c3db===_0x185e14)break;else _0xebf0bf['push'](_0xebf0bf['shift']());}catch(_0x4956aa){_0xebf0bf['push'](_0xebf0bf['shift']());}}}(a0_0x429c,0xe2248));import a0_0x509977 from'../core/1.1.0/mgba.js';import a0_0x76688b from'../core/2.0.0/mgba.js';import*as a0_0x135215 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x509977,'2.0.0':a0_0x76688b};let currentVersion=localStorage[a0_0x44cade(0x19b)](a0_0x44cade(0x1e3))||a0_0x44cade(0x1ad),mGBA=versions[currentVersion];document[a0_0x44cade(0x19a)]('GBAver')[a0_0x44cade(0x1d6)]=a0_0x44cade(0x1e5)+currentVersion,document[a0_0x44cade(0x19a)]('GBAver')[a0_0x44cade(0x1c4)](a0_0x44cade(0x1e0),()=>{const _0x5153db=a0_0x44cade,_0x3f0351=Object[_0x5153db(0x1b3)](versions);let _0x263e4d=_0x3f0351[_0x5153db(0x1a6)](currentVersion);currentVersion=_0x3f0351[(_0x263e4d+0x1)%_0x3f0351[_0x5153db(0x17e)]],localStorage[_0x5153db(0x1ec)]('GBAver',currentVersion),document[_0x5153db(0x19a)](_0x5153db(0x1e3))[_0x5153db(0x1d6)]=_0x5153db(0x1e5)+currentVersion;});const Module={'canvas':document[a0_0x44cade(0x19a)](a0_0x44cade(0x1bf))};function initializeCore(_0x5bf68a,_0x4c5275){const _0xafda4d=a0_0x44cade;_0x5bf68a(_0x4c5275)[_0xafda4d(0x1a8)](function(_0xd3f021){_0xd3f021['FSInit']();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x44cade(0x19a)]('canvas'),controlSetting=document[a0_0x44cade(0x19a)](a0_0x44cade(0x19c));function handleVisibilityChange(_0x37811b){const _0xe3f75a=a0_0x44cade;document[_0xe3f75a(0x1cb)]===_0xe3f75a(0x1b8)||_0x37811b?.[_0xe3f75a(0x199)]===_0xe3f75a(0x18d)||_0x37811b?.['persisted']?(Module[_0xe3f75a(0x195)](),pauseGame(),canvas['classList'][_0xe3f75a(0x1af)]('visible')):(setTimeout(()=>{const _0x84cc06=_0xe3f75a;canvas[_0x84cc06(0x182)]['remove'](_0x84cc06(0x18c));},0x258),controlSetting['classList'][_0xe3f75a(0x1d7)](_0xe3f75a(0x18c))&&resumeGame());}async function statusShow(){const _0xb7daac=a0_0x44cade;document['addEventListener'](_0xb7daac(0x1dd),handleVisibilityChange),document['addEventListener'](_0xb7daac(0x1d1),handleVisibilityChange),window[_0xb7daac(0x1c4)](_0xb7daac(0x18d),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x135215[_0xb7daac(0x1a0)](parseInt(await getData(gameName,'0','turboState'))),await delay(0xc8),await Module[_0xb7daac(0x1c9)](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0xb7daac(0x18f)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x1654b4=a0_0x44cade;await ledSave('#20A5A6'),await Module[_0x1654b4(0x1c6)](0x0),await Module[_0x1654b4(0x195)](),await screenShot(0x0),console[_0x1654b4(0x1e8)](_0x1654b4(0x1ef)+ ++countAutoSave+_0x1654b4(0x1ea));}async function saveStateInCloud(){const _0x1fcc57=a0_0x44cade,_0x113695=gameName[_0x1fcc57(0x1a5)](/\.(zip|gb|gbc|gba)$/,_0x1fcc57(0x1bb)),_0x4eeefb=localStorage[_0x1fcc57(0x19b)](_0x1fcc57(0x198));navigator['onLine']&&(_0x4eeefb&&(await ledSave('#E0C068'),await delay(0x3e8),await dpUploadFile(_0x113695,Module[_0x1fcc57(0x191)]('/data/states/'+_0x113695),_0x1fcc57(0x1a4)),await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x1fcc57(0x1ea),0x7d0)));}function startTimer(){let [_0x58d03b,_0x24aeb7,_0x1245fe,_0x3b4da9,_0x4b4649]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x65fb3=a0_0x44b8;_0x1245fe++,_0x3b4da9++,_0x4b4649++;if(_0x1245fe===0x3c)[_0x1245fe,_0x24aeb7]=[0x0,_0x24aeb7+0x1];if(_0x24aeb7===0x3c)[_0x24aeb7,_0x58d03b]=[0x0,_0x58d03b+0x1];document['getElementById'](_0x65fb3(0x1c1))['textContent']=_0x58d03b+'h'+_0x24aeb7[_0x65fb3(0x18e)]()[_0x65fb3(0x1da)](0x2,'0')+'.'+_0x1245fe[_0x65fb3(0x18e)]()[_0x65fb3(0x1da)](0x2,'0');_0x3b4da9===0x3c&&(saveStatePeriodically(),_0x3b4da9=0x0);;_0x4b4649===0x708&&(saveStateInCloud(),_0x4b4649=0x0);;},0x3e8);}export async function uploadGame(_0x4b6a7a){const _0x403055=a0_0x44cade,_0x524d22=_0x4b6a7a['files'][0x0];Module[_0x403055(0x1bd)](_0x524d22,()=>{Module['FSSync']();});}export async function loadGame(_0x5db635){const _0x5133fe=a0_0x44cade,_0x3c36ad=_0x5db635[_0x5133fe(0x1a5)](/\.(gba|gbc|gb|zip)$/,_0x5133fe(0x1bb)),_0x162e11=Module[_0x5133fe(0x1a7)](_0x5133fe(0x1b0))[_0x5133fe(0x1e4)](_0x10f4f7=>_0x10f4f7!=='.'&&_0x10f4f7!=='..');intro['classList'][_0x5133fe(0x1af)](_0x5133fe(0x1c7)),errorLogElements[0x0][_0x5133fe(0x19e)][_0x5133fe(0x197)]='0',ingame[_0x5133fe(0x182)][_0x5133fe(0x1c8)](_0x5133fe(0x1c7)),_0x5db635[_0x5133fe(0x19f)](_0x5133fe(0x1b9))||_0x5db635[_0x5133fe(0x19f)]('.gb')?(canvas[_0x5133fe(0x182)]['add']('gbc'),areaTrans[_0x5133fe(0x182)][_0x5133fe(0x1af)]('gbc1'),localStorage[_0x5133fe(0x1ec)](_0x5133fe(0x1b1),_0x5133fe(0x1cf)+(window['innerWidth']-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage[_0x5133fe(0x1ec)](_0x5133fe(0x1b1),'0,0,'+(window[_0x5133fe(0x1dc)]-0x96)+','+(window[_0x5133fe(0x1dc)]-0x96)*0x2/0x3),_0x162e11['includes'](_0x3c36ad)?(await Module[_0x5133fe(0x1df)]('/data/games/'+_0x5db635),confirm('Do\x20you\x20want\x20to\x20load\x20save\x20state?')&&(await delay(0x64),await Module[_0x5133fe(0x1e9)](0x0),await shaderData())):(await Module['loadGame'](_0x5133fe(0x194)+_0x5db635),await shaderData()),await statusShow();}export async function saveState(_0x1778bb){await Module['saveState'](_0x1778bb);}export async function loadState(_0x4e4662){const _0x24138d=a0_0x44cade;await Module[_0x24138d(0x1e9)](_0x4e4662);}function a0_0x429c(){const _0x1bc777=['autoLoadCheats','uploadAll','classList','18918218XzeMQN','6xwXkcp','listCheats','match','Error\x20ledSave:','4UfHJfH','0.4','createObjectURL','fileSize','visible','beforeunload','toString','slotStateSaved','entries','downloadFile','toggleRewind','fill','/data/games/','FSSync','files','bottom','uId','type','getElementById','getItem','control-setting','resumeGame','style','endsWith','turboF','rgba(245,\x20232,\x20209,\x200.4)','revokeObjectURL','encode','state','replace','indexOf','listFiles','then','exec','lastIndexOf','led0','led05','1.1.0','Resumed!','add','states','screenSize','map','keys','charCodeAt','image/png','appendChild','listRoms','hidden','.gbc','384RhCyHv','.ss0','trim','uploadRom','\x20|\x20','canvas','167447prrCbM','timer','led03','concat','addEventListener','screenshot','saveState','disable','remove','SDL2','\x20:\x20','visibilityState','listScreenshots','1509154ujURjP','led00','0,0,','led06','visibilitychange','/data/screenshots/','3621736zImOFV','opacity','split','textContent','contains','substring','8472515BEeLdm','padStart','Paused!','innerWidth','pagehide','led04','loadGame','click','All','editFileName','GBAver','filter','Wasm_Â©','join','13338550eGcMXR','log','loadState','\x20time(s)','723279ictTBV','setItem','.png','9fQtWMz','Auto\x20save\x20','listStates','href','listSaves','error','pauseGame','buttonPress','noti-mess','length','tEXtComment\x00'];a0_0x429c=function(){return _0x1bc777;};return a0_0x429c();}export async function downloadFile(_0x21a64d,_0x28099c){const _0x23141c=a0_0x44cade,_0x452dc4=Module[_0x23141c(0x191)](_0x21a64d),_0x5a07e2=document['createElement']('a');document['body'][_0x23141c(0x1b6)](_0x5a07e2),_0x5a07e2['download']=_0x28099c;const _0x20f4c8=new Blob([_0x452dc4],{'type':'application/octet-stream'});_0x5a07e2[_0x23141c(0x1f1)]=URL[_0x23141c(0x18a)](_0x20f4c8),_0x5a07e2[_0x23141c(0x1e0)](),URL[_0x23141c(0x1a2)](_0x20f4c8),_0x5a07e2[_0x23141c(0x1c8)]();}export function downloadFileInCloud(_0x1298c9){const _0x5cb01f=a0_0x44cade;try{const _0x50beda=Module[_0x5cb01f(0x191)](_0x1298c9);return _0x50beda;}catch(_0x567ffb){return null;}}export async function uploadFileInCloud(_0x1a25e1){const _0xac00db=a0_0x44cade;Module[_0xac00db(0x181)](_0x1a25e1,async()=>{const _0x3a71be=_0xac00db;localStorageFile(),await Module[_0x3a71be(0x195)]();});}export async function uploadFile(_0x240573){const _0x221452=a0_0x44cade,_0x5cc2d7=_0x240573[_0x221452(0x196)][0x0];Module[_0x221452(0x181)](_0x5cc2d7,async()=>{const _0x248048=_0x221452;localStorageFile(),await Module[_0x248048(0x195)]();});}export async function editFile(_0x1c1cb8,_0x513966,_0x4fdbf9){const _0x2c422f=a0_0x44cade;await Module[_0x2c422f(0x1e2)](_0x1c1cb8,_0x513966,_0x4fdbf9);}export async function deleteFile(_0x5edcff){const _0x1324e3=a0_0x44cade;try{return await Module['deleteFile'](_0x5edcff),!![];}catch(_0x200021){return console[_0x1324e3(0x1f3)](_0x5edcff),null;}}export function listFiles(_0x4a2820){const _0x362128=a0_0x44cade,_0x180e33=Module[_0x362128(0x1a7)](_0x4a2820)[_0x362128(0x1e4)](_0x282593=>_0x282593!=='.'&&_0x282593!=='..');return _0x180e33;}export function listGame(){const _0x2d10aa=a0_0x44cade,_0xf5b520=Module[_0x2d10aa(0x1b7)]()[_0x2d10aa(0x1e4)](_0x27dc13=>_0x27dc13!=='.'&&_0x27dc13!=='..');return _0xf5b520;}export function listSave(){const _0x558d7f=a0_0x44cade,_0x252870=Module[_0x558d7f(0x1f2)]()['filter'](_0x1d2a4f=>_0x1d2a4f!=='.'&&_0x1d2a4f!=='..');return _0x252870;}export function listState(){const _0x47c338=a0_0x44cade,_0x2794d9=Module[_0x47c338(0x1f0)]()[_0x47c338(0x1e4)](_0x2134dc=>_0x2134dc!=='.'&&_0x2134dc!=='..');return _0x2794d9;}export function listCheat(){const _0x4a7a1d=a0_0x44cade,_0x2dc355=Module[_0x4a7a1d(0x185)]()[_0x4a7a1d(0x1e4)](_0x300e06=>_0x300e06!=='.'&&_0x300e06!=='..');return _0x2dc355;}export function listScreenshot(){const _0x53a0fa=a0_0x44cade,_0x205b0=Module[_0x53a0fa(0x1cc)]()['filter'](_0x5723af=>_0x5723af!=='.'&&_0x5723af!=='..');return _0x205b0;}export function fileSize(_0x26c533){const _0x1b2826=a0_0x44cade,_0x4e0aaa=Module[_0x1b2826(0x18b)](_0x26c533);return _0x4e0aaa;}export async function resumeGame(){const _0x568dee=a0_0x44cade;Module[_0x568dee(0x19d)](),Module['SDL2'](),notiMessage(_0x568dee(0x1ae),0x7d0);}export async function pauseGame(){const _0x2dbd97=a0_0x44cade;Module[_0x2dbd97(0x17b)](),Module[_0x2dbd97(0x1c9)](),notiMessage(_0x2dbd97(0x1db),0x7d0);}export async function buttonPress(_0xa96eb3){const _0x3bbccd=a0_0x44cade;Module[_0x3bbccd(0x17c)](_0xa96eb3);}export async function buttonUnpress(_0x17a709){Module['buttonUnpress'](_0x17a709);}export async function screenShot(_0x2cf8e0){const _0x335f57=a0_0x44cade,_0x2fe4fb=gameName[_0x335f57(0x1a5)](/\.(gba|gbc|gb|zip)$/,'_'+_0x2cf8e0+_0x335f57(0x1ed)),_0x2d7b74=await getData(gameName,_0x2cf8e0,_0x335f57(0x1e1))||'';console['log'](_0x2d7b74),await Module[_0x335f57(0x1c5)](_0x2fe4fb),await setData(gameName,_0x2cf8e0,'saveTime',formatDateTime(Date['now']()),_0x2d7b74);}export async function dowloadScreenShot(_0x50a8ef){const _0x12fec2=a0_0x44cade;try{const _0x350019=await fileToBase64(Module[_0x12fec2(0x191)](_0x50a8ef));return _0x350019;}catch{}}export async function captureOCR(_0x522927){const _0x895119=a0_0x44cade;Module[_0x895119(0x1c5)](_0x522927);const _0x5d2221=Module['downloadFile'](_0x895119(0x1d2)+_0x522927);return _0x5d2221;}export async function setFastForwardMultiplier(_0x28a7bf){Module['setFastForwardMultiplier'](_0x28a7bf);}export async function uploadCheats(_0x37a27a){const _0x5cdf47=a0_0x44cade;Module[_0x5cdf47(0x180)](),Module[_0x5cdf47(0x181)](_0x37a27a,async()=>{});}export function setVolume(_0x3f6654){Module['setVolume'](_0x3f6654);}function a0_0x44b8(_0xb754e7,_0x223c29){const _0x429c72=a0_0x429c();return a0_0x44b8=function(_0x44b8a4,_0x18010c){_0x44b8a4=_0x44b8a4-0x17b;let _0x1e12e1=_0x429c72[_0x44b8a4];return _0x1e12e1;},a0_0x44b8(_0xb754e7,_0x223c29);}export async function setData(_0x37c360,_0x52a337,_0x4ac02b,_0x2cf843,_0x4baae3=''){const _0x50b29d=a0_0x44cade,_0x2d114e=_0x37c360[_0x50b29d(0x1a5)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x1c6258=_0x50b29d(0x1d2)+_0x2d114e+'_'+_0x52a337+_0x50b29d(0x1ed);let _0x483f7d;try{_0x483f7d=await fileToBase64(Module[_0x50b29d(0x191)](_0x1c6258));}catch(_0x5905f9){await Module[_0x50b29d(0x1c5)](_0x2d114e+'_'+_0x52a337+'.png'),await delay(0xc8),_0x483f7d=await fileToBase64(Module['downloadFile'](_0x1c6258));}let _0x255095=atob(_0x483f7d['split'](',')[0x1]),_0x3f4eb8=_0x50b29d(0x17f),_0x403615=_0x255095['indexOf'](_0x3f4eb8),_0x13811e={};if(_0x403615!==-0x1||_0x4baae3['trim']()!==''){let _0x2a14c2=_0x403615!==-0x1?_0x255095['substring'](_0x403615+_0x3f4eb8['length']):_0x4baae3,_0x947330=/(\w+)\s*:\s*([^|]*)/g,_0x28d99b;while((_0x28d99b=_0x947330[_0x50b29d(0x1a9)](_0x2a14c2))!==null){_0x13811e[_0x28d99b[0x1][_0x50b29d(0x1bc)]()]=_0x28d99b[0x2][_0x50b29d(0x1bc)]();}_0x403615!==-0x1&&(_0x255095=_0x255095[_0x50b29d(0x1d8)](0x0,_0x403615));}_0x13811e[_0x4ac02b]=_0x2cf843;let _0x1edcdf=Object[_0x50b29d(0x190)](_0x13811e)[_0x50b29d(0x1b2)](([_0x21fb65,_0x423742])=>_0x21fb65+_0x50b29d(0x1ca)+_0x423742)[_0x50b29d(0x1e6)](_0x50b29d(0x1be)),_0x1006e1=new TextEncoder()[_0x50b29d(0x1a3)](_0x3f4eb8+'\x20'+_0x1edcdf),_0x541553=new Uint8Array([..._0x255095][_0x50b29d(0x1b2)](_0x167183=>_0x167183[_0x50b29d(0x1b4)](0x0))[_0x50b29d(0x1c3)]([..._0x1006e1])),_0x4fe450=new File([new Blob([_0x541553],{'type':_0x50b29d(0x1b5)})],_0x2d114e+'_'+_0x52a337+'.png',{'type':_0x50b29d(0x1b5)});Module['uploadAll'](_0x4fe450,async()=>{});}export async function getData(_0x54155c,_0x5ac676,_0x391c5a){const _0x146cf4=a0_0x44cade;try{const _0x187ba6=_0x54155c['replace'](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x37dad7='/data/screenshots/'+_0x187ba6+'_'+_0x5ac676+_0x146cf4(0x1ed);let _0xc45467;try{_0xc45467=await fileToBase64(Module[_0x146cf4(0x191)](_0x37dad7));}catch(_0x54f146){return null;}let _0x4e8833=atob(_0xc45467[_0x146cf4(0x1d5)](',')[0x1]),_0x54c0ed=_0x146cf4(0x17f),_0x9cf883=_0x4e8833[_0x146cf4(0x1a6)](_0x54c0ed);if(_0x9cf883!==-0x1){let _0x395815=_0x4e8833['substring'](_0x9cf883+_0x54c0ed[_0x146cf4(0x17e)]);if(_0x391c5a===_0x146cf4(0x1e1))return _0x395815[_0x146cf4(0x1bc)]();let _0x410765=new RegExp(_0x391c5a+'\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)'),_0x1b7ba9=_0x395815[_0x146cf4(0x186)](_0x410765);if(_0x1b7ba9)return _0x1b7ba9[0x1]['trim']();}}catch(_0x377462){return console[_0x146cf4(0x1f3)]({'romName':_0x54155c,'slot':_0x5ac676,'type':_0x391c5a}),null;}}export async function ledSave(_0x758a38){const _0x1be16f=a0_0x44cade,_0x344f8c=parseInt(await getData(gameName,'0','slotStateSaved')),_0x585653=_0x344f8c===0x1?'led01':_0x344f8c===0x2?'led02':_0x344f8c===0x3?_0x1be16f(0x1c2):_0x344f8c===0x4?_0x1be16f(0x1de):_0x344f8c===0x5?_0x1be16f(0x1ac):_0x344f8c===0x6?_0x1be16f(0x1d0):_0x344f8c===0x7?'led07':_0x1be16f(0x1ce);try{for(let _0x203260=0x0;_0x203260<=0x7;_0x203260++){document['getElementById'](_0x1be16f(0x1ab)+_0x203260)[_0x1be16f(0x19e)][_0x1be16f(0x193)]='rgba(245,\x20232,\x20209,\x200.4)';}await delay(0x3e8);for(let _0x179422=0x0;_0x179422<=0x7;_0x179422++){document[_0x1be16f(0x19a)](_0x1be16f(0x1ab)+_0x179422)['style']['fill']=_0x1be16f(0x1a1);}document[_0x1be16f(0x19a)](_0x585653)[_0x1be16f(0x19e)]['fill']=_0x758a38;}catch(_0x2ce9bf){console['error'](_0x1be16f(0x187),_0x2ce9bf);}};export async function notiMessage(_0xa24052,_0x18f920,_0x136a30=![]){const _0x4a953d=a0_0x44cade;var _0x5131b2=document[_0x4a953d(0x19a)](_0x4a953d(0x17d));const _0x507b78=parseInt(await getData(gameName,'0',_0x4a953d(0x18f)))||0x0;_0x5131b2[_0x4a953d(0x19e)][_0x4a953d(0x1d4)]===_0x4a953d(0x189)&&(clearTimeout(messageTimeout),_0x5131b2[_0x4a953d(0x19e)][_0x4a953d(0x1d4)]='0'),_0x5131b2[_0x4a953d(0x1d6)]=_0xa24052,_0x5131b2[_0x4a953d(0x19e)][_0x4a953d(0x1d4)]=_0x4a953d(0x189),messageTimeout=setTimeout(()=>{const _0x1c2e24=_0x4a953d;_0x5131b2[_0x1c2e24(0x1d6)]='['+_0x507b78+']\x20'+gameName['substring'](0x0,gameName[_0x1c2e24(0x1aa)]('.')),_0x5131b2['style'][_0x1c2e24(0x1d4)]=_0x1c2e24(0x189);},_0x18f920),_0x136a30&&(canvas[_0x4a953d(0x182)][_0x4a953d(0x1af)]('visible'),setTimeout(()=>{const _0x53a850=_0x4a953d;canvas[_0x53a850(0x182)]['remove']('visible');},0x258));}export async function FSSync(){const _0x1fe2c9=a0_0x44cade;Module[_0x1fe2c9(0x195)]();}export const rewind=_0x2c17d3=>Module[a0_0x44cade(0x192)]?.(_0x2c17d3)||null;