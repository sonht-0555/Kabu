const a0_0x4bb36d=a0_0x2d5e;(function(_0x2cc581,_0x3b4cac){const _0xae3032=a0_0x2d5e,_0x4d45a8=_0x2cc581();while(!![]){try{const _0x382d54=-parseInt(_0xae3032(0xc1))/0x1+-parseInt(_0xae3032(0xdb))/0x2*(-parseInt(_0xae3032(0xa0))/0x3)+parseInt(_0xae3032(0x96))/0x4+parseInt(_0xae3032(0x97))/0x5*(-parseInt(_0xae3032(0xaa))/0x6)+parseInt(_0xae3032(0x94))/0x7*(parseInt(_0xae3032(0xd5))/0x8)+-parseInt(_0xae3032(0xb5))/0x9*(-parseInt(_0xae3032(0xdf))/0xa)+-parseInt(_0xae3032(0x87))/0xb;if(_0x382d54===_0x3b4cac)break;else _0x4d45a8['push'](_0x4d45a8['shift']());}catch(_0x1df6e3){_0x4d45a8['push'](_0x4d45a8['shift']());}}}(a0_0x3479,0x6b3ae));import a0_0x2ca936 from'../core/mgba.js';import*as a0_0x3955c8 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x4bb36d(0x83)](a0_0x4bb36d(0x90))};function initializeCore(_0x190efc,_0x307108){const _0x9e56cd=a0_0x4bb36d;_0x190efc(_0x307108)[_0x9e56cd(0x9c)](function(_0x58b48f){const _0x960a4f=_0x9e56cd;_0x58b48f[_0x960a4f(0xc2)]();});}initializeCore(a0_0x2ca936,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document['getElementById'](a0_0x4bb36d(0x90)),savedTurboState=localStorage[a0_0x4bb36d(0xcc)](a0_0x4bb36d(0xce)),controlSetting=document[a0_0x4bb36d(0x83)](a0_0x4bb36d(0xb9));function handleVisibilityChange(_0x474744){const _0x446fb4=a0_0x4bb36d;document[_0x446fb4(0x7f)]===_0x446fb4(0xbb)||_0x474744?.['type']===_0x446fb4(0x81)||_0x474744?.[_0x446fb4(0x85)]?(pauseGame(),canvas[_0x446fb4(0xaf)]['add']('visible')):(setTimeout(()=>{const _0x3510cb=_0x446fb4;canvas[_0x3510cb(0xaf)][_0x3510cb(0xa8)](_0x3510cb(0xcd));},0x258),controlSetting[_0x446fb4(0xaf)][_0x446fb4(0x99)]('visible')&&resumeGame());}async function statusShow(){const _0x1478da=a0_0x4bb36d;document[_0x1478da(0x8a)](_0x1478da(0xd1),handleVisibilityChange),document[_0x1478da(0x8a)]('visibilitychange',handleVisibilityChange),window['addEventListener']('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x3955c8['turboF'](turboState)),await delay(0xc8),await Module[_0x1478da(0xad)](),await delay(0x320),await led(parseInt(localStorage[_0x1478da(0xcc)](_0x1478da(0xb4)))),await notiMessage(gameVer,0x3e8);}function a0_0x2d5e(_0x579bc8,_0x256374){const _0x3479a3=a0_0x3479();return a0_0x2d5e=function(_0x2d5ea0,_0x3773ae){_0x2d5ea0=_0x2d5ea0-0x7e;let _0x273f6f=_0x3479a3[_0x2d5ea0];return _0x273f6f;},a0_0x2d5e(_0x579bc8,_0x256374);}async function saveStatePeriodically(){const _0x56b671=a0_0x4bb36d;await ledSave(_0x56b671(0x9a)),await Module[_0x56b671(0xd6)](0x0),await Module[_0x56b671(0xe7)](),await screenShot(0x0),console[_0x56b671(0xbd)](_0x56b671(0xbe)+ ++countAutoSave+_0x56b671(0xb1));}async function saveStateInCloud(){const _0x195df9=a0_0x4bb36d,_0x4b90d7=localStorage[_0x195df9(0xcc)](_0x195df9(0x95)),_0x2cae6b=_0x4b90d7[_0x195df9(0xa7)](/\.(zip|gb|gbc|gba)$/,_0x195df9(0xb3)),_0x2e1b5d=localStorage[_0x195df9(0xcc)](_0x195df9(0xe0)),_0x2d2956=localStorage[_0x195df9(0xcc)](_0x4b90d7+'_imageState0'),_0x2c0a5a=localStorage[_0x195df9(0xcc)](_0x4b90d7+_0x195df9(0xc8));if(navigator[_0x195df9(0xb2)]){if(_0x2e1b5d){await ledSave(_0x195df9(0xa2)),await delay(0x3e8),await dpUploadFile(_0x2cae6b,Module[_0x195df9(0x8f)]('/data/states/'+_0x2cae6b));if(_0x2d2956!==null){const _0x49e569=_0x2d2956+'\x0a\x0a'+_0x2c0a5a,_0x2ed391=new Blob([_0x49e569],{'type':_0x195df9(0xd0)});await dpUploadFile(_0x4b90d7+'_slot0.txt',_0x2ed391);}else console[_0x195df9(0xbd)](_0x195df9(0xab));await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x195df9(0xb1),0x7d0);}else console['log']('Unable\x20to\x20upload\x20to\x20Cloud!');}else console[_0x195df9(0xbd)]('Online!');}function startTimer(){let [_0x7bb09a,_0x4dcd47,_0x30db38,_0x24d0fa,_0x2b6239]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x472d79=a0_0x2d5e;_0x30db38++,_0x24d0fa++,_0x2b6239++;if(_0x30db38===0x3c)[_0x30db38,_0x4dcd47]=[0x0,_0x4dcd47+0x1];if(_0x4dcd47===0x3c)[_0x4dcd47,_0x7bb09a]=[0x0,_0x7bb09a+0x1];document[_0x472d79(0x83)](_0x472d79(0xe2))[_0x472d79(0xa5)]=_0x7bb09a+'h'+_0x4dcd47[_0x472d79(0x88)]()[_0x472d79(0xc3)](0x2,'0')+'.'+_0x30db38['toString']()['padStart'](0x2,'0');_0x24d0fa===0x3c&&(saveStatePeriodically(),_0x24d0fa=0x0);;_0x2b6239===0xe10&&(saveStateInCloud(),_0x2b6239=0x0);;},0x3e8);}export async function uploadGame(_0xda0221){const _0x1bfad3=a0_0x4bb36d,_0x51bcec=_0xda0221[_0x1bfad3(0xc5)][0x0];Module[_0x1bfad3(0xd4)](_0x51bcec,()=>{const _0x209c5c=_0x1bfad3;Module[_0x209c5c(0xe7)]();});}export async function loadGame(_0x209de1){const _0x1111fe=a0_0x4bb36d,_0xc1e69c=_0x209de1['replace'](/\.(gba|gbc|gb|zip)$/,_0x1111fe(0xb3)),_0x14e396=Module[_0x1111fe(0x7e)]()[_0x1111fe(0x86)](_0x117156=>_0x117156!=='.'&&_0x117156!=='..');intro[_0x1111fe(0xaf)]['add'](_0x1111fe(0xa4)),errorLogElements[0x0][_0x1111fe(0xc6)][_0x1111fe(0xda)]='0',ingame[_0x1111fe(0xaf)][_0x1111fe(0xa8)]('disable'),_0x209de1[_0x1111fe(0x8e)]('.gbc')||_0x209de1['endsWith']('.gb')?(canvas[_0x1111fe(0xaf)][_0x1111fe(0xac)](_0x1111fe(0x91)),areaTrans[_0x1111fe(0xaf)][_0x1111fe(0xac)](_0x1111fe(0xcb)),localStorage[_0x1111fe(0x92)](_0x1111fe(0x9f),_0x1111fe(0xba)+(window[_0x1111fe(0xd2)]-0xe6)+','+(window[_0x1111fe(0xd2)]-0xe6)*0x9/0xa)):localStorage[_0x1111fe(0x92)](_0x1111fe(0x9f),_0x1111fe(0xba)+(window[_0x1111fe(0xd2)]-0x96)+','+(window[_0x1111fe(0xd2)]-0x96)*0x2/0x3),_0x14e396[_0x1111fe(0xe4)](_0xc1e69c)?(await Module[_0x1111fe(0xe5)](_0x1111fe(0xe6)+_0x209de1),confirm(_0x1111fe(0xde))&&(await Module[_0x1111fe(0x8d)](0x0),localStorage[_0x1111fe(0x92)](_0x1111fe(0x95),_0x209de1),console['log'](_0x209de1))):(await Module[_0x1111fe(0xe5)](_0x1111fe(0xe6)+_0x209de1),localStorage[_0x1111fe(0x92)]('gameName',_0x209de1),console['log'](_0x209de1)),await statusShow();}export async function saveState(_0x8fca5b){const _0x4cfad8=a0_0x4bb36d;await Module['saveState'](_0x8fca5b),await Module[_0x4cfad8(0xe7)]();}export async function loadState(_0x2852c7){const _0x2fa0b4=a0_0x4bb36d;await Module[_0x2fa0b4(0x8d)](_0x2852c7);}export async function downloadFile(_0x38175c,_0x5d7d9a){const _0x2ace26=a0_0x4bb36d,_0x39a9b3=Module['downloadFile'](_0x38175c),_0x57cd91=document[_0x2ace26(0xdc)]('a');document[_0x2ace26(0xd9)][_0x2ace26(0xa3)](_0x57cd91),_0x57cd91[_0x2ace26(0x80)]=_0x5d7d9a;const _0xbbff5b=new Blob([_0x39a9b3],{'type':'application/octet-stream'});_0x57cd91[_0x2ace26(0xe1)]=URL[_0x2ace26(0xca)](_0xbbff5b),_0x57cd91['click'](),URL['revokeObjectURL'](_0xbbff5b),_0x57cd91['remove']();}export function downloadFileInCloud(_0xf79ad4){const _0x149698=a0_0x4bb36d,_0x159d7c=Module[_0x149698(0x8f)](_0xf79ad4);return _0x159d7c;}export async function uploadFile(_0x472afb){const _0x2ab6cd=a0_0x4bb36d,_0x46a7db=_0x472afb[_0x2ab6cd(0xc5)][0x0];Module[_0x2ab6cd(0x98)](_0x46a7db,()=>{const _0x2ee746=_0x2ab6cd;localStorageFile(),Module[_0x2ee746(0xe7)]();});}export async function editFile(_0x2e73d7,_0x178a70,_0x27e4ec){await Module['editFileName'](_0x2e73d7,_0x178a70,_0x27e4ec),await Module['FSSync']();}export async function deleteFile(_0xc90e8){const _0x5712e6=a0_0x4bb36d;await Module[_0x5712e6(0x9e)](_0xc90e8),await Module[_0x5712e6(0xe7)]();}export function listGame(){const _0x32eae9=a0_0x4bb36d,_0x52a5f3=Module[_0x32eae9(0xd8)]()[_0x32eae9(0x86)](_0x5485df=>_0x5485df!=='.'&&_0x5485df!=='..');return _0x52a5f3;}export function listSave(){const _0x24fc72=a0_0x4bb36d,_0x449ec6=Module[_0x24fc72(0xd7)]()[_0x24fc72(0x86)](_0x1e8004=>_0x1e8004!=='.'&&_0x1e8004!=='..');return _0x449ec6;}export function listState(){const _0x1cc115=a0_0x4bb36d,_0x11cf57=Module[_0x1cc115(0x7e)]()['filter'](_0x5d9e44=>_0x5d9e44!=='.'&&_0x5d9e44!=='..');return _0x11cf57;}export function listCheat(){const _0x2b3fd0=a0_0x4bb36d,_0x49badc=Module[_0x2b3fd0(0xa6)]()[_0x2b3fd0(0x86)](_0x303003=>_0x303003!=='.'&&_0x303003!=='..');return _0x49badc;}export function listScreenshot(){const _0x59a0e9=a0_0x4bb36d,_0x5f3942=Module[_0x59a0e9(0xb7)]()[_0x59a0e9(0x86)](_0x5b73fd=>_0x5b73fd!=='.'&&_0x5b73fd!=='..');return _0x5f3942;}export function embedTextInPngFile(_0x200de9,_0x974ace,_0x11e03a){const _0xdddd3a=a0_0x4bb36d;let _0x1e209f=atob(_0x200de9[_0xdddd3a(0xbf)](',')[0x1]),_0x3bcca9=new Uint8Array(_0x1e209f[_0xdddd3a(0xbc)]);for(let _0x376560=0x0;_0x376560<_0x1e209f['length'];_0x376560++){_0x3bcca9[_0x376560]=_0x1e209f[_0xdddd3a(0xdd)](_0x376560);}let _0xc7e6a0=new TextEncoder()[_0xdddd3a(0xb6)](_0xdddd3a(0xc4)+_0x974ace),_0x2f2bc3=new Uint8Array(_0x3bcca9[_0xdddd3a(0xbc)]+_0xc7e6a0['length']);_0x2f2bc3['set'](_0x3bcca9,0x0),_0x2f2bc3[_0xdddd3a(0xae)](_0xc7e6a0,_0x3bcca9['length']);let _0x817741=new Blob([_0x2f2bc3],{'type':_0xdddd3a(0x9d)}),_0x3af7aa=new File([_0x817741],_0x11e03a,{'type':_0xdddd3a(0x9d)});return _0x3af7aa;}export function extractTextFromPngBase64(_0x31a158){const _0x1b5b59=a0_0x4bb36d;let _0x2bc73e=atob(_0x31a158[_0x1b5b59(0xbf)](',')[0x1]),_0x5a150a=_0x1b5b59(0xc4),_0x227c3d=_0x2bc73e[_0x1b5b59(0x89)](_0x5a150a);if(_0x227c3d!==-0x1)return _0x2bc73e[_0x1b5b59(0xc0)](_0x227c3d+_0x5a150a[_0x1b5b59(0xbc)]);return null;}export function fileSize(_0x1b8fc4){const _0x2325ee=a0_0x4bb36d,_0x4ac499=Module[_0x2325ee(0xe3)](_0x1b8fc4);return _0x4ac499;}export async function resumeGame(){const _0xef8b13=a0_0x4bb36d;Module[_0xef8b13(0x84)](),Module[_0xef8b13(0xad)](),notiMessage(_0xef8b13(0xa9),0x7d0);}export async function pauseGame(){const _0x335951=a0_0x4bb36d;Module[_0x335951(0x93)](),Module[_0x335951(0xad)](),notiMessage(_0x335951(0xb8),0x7d0);}export async function buttonPress(_0x55607a){const _0x3d6121=a0_0x4bb36d;Module[_0x3d6121(0xb0)](_0x55607a);}export async function buttonUnpress(_0xa8d7ce){const _0x5b07c2=a0_0x4bb36d;Module[_0x5b07c2(0xcf)](_0xa8d7ce);}export async function screenShot(_0xd8a133){const _0x42384c=a0_0x4bb36d,_0x72721=localStorage[_0x42384c(0xcc)](_0x42384c(0x95))[_0x42384c(0xa7)](/\.(gba|gbc|gb|zip)$/,''),_0x2667c1=_0x72721+'_'+_0xd8a133+_0x42384c(0xd3);await Module['screenshot'](_0x2667c1),await Module[_0x42384c(0xe7)]();const _0x5d6251=await fileToBase64(Module[_0x42384c(0x8f)](_0x42384c(0xc7)+_0x2667c1)),_0x424b5a=embedTextInPngFile(_0x5d6251,formatDateTime(Date[_0x42384c(0x8c)]()),_0x2667c1);Module[_0x42384c(0x98)](_0x424b5a,()=>{const _0x5bc79a=_0x42384c;localStorageFile(),Module[_0x5bc79a(0xe7)]();});}function a0_0x3479(){const _0x3b48fa=['listScreenshots','Paused!','control-setting','0,0,','hidden','length','log','Auto\x20save\x20','split','substring','115138SuBeLc','FSInit','padStart','tEXtComment\x00','files','style','/data/screenshots/','_dateState0','screenshot','createObjectURL','gbc1','getItem','visible','turboState','buttonUnpress','text/plain','pagehide','innerWidth','.png','uploadRom','543960CJbopx','saveState','listSaves','listRoms','body','bottom','6gbqGBE','createElement','charCodeAt','Do\x20you\x20want\x20to\x20load\x20save\x20state?','10SuUwNr','uId','href','timer','fileSize','includes','loadGame','/data/games/','FSSync','Off','listStates','visibilityState','download','beforeunload','setVolume','getElementById','resumeGame','persisted','filter','11457270SdpgWU','toString','indexOf','addEventListener','setFastForwardMultiplier','now','loadState','endsWith','downloadFile','canvas','gbc','setItem','pauseGame','7bJSbnL','gameName','3256904Uckxpf','10iyEgyS','uploadAll','contains','#20A5A6','_savedCheats','then','image/png','deleteFile','screenSize','847686Zgrmnh','autoLoadCheats','#E0C068','appendChild','disable','textContent','listCheats','replace','remove','Resumed!','998628noqyZX','No\x20screenshot!','add','SDL2','set','classList','buttonPress','\x20time(s)','onLine','.ss0','slotStateSaved','1790019IEeEXO','encode'];a0_0x3479=function(){return _0x3b48fa;};return a0_0x3479();}export async function dowloadScreenShot(_0x106136){const _0x3e6054=a0_0x4bb36d;try{const _0x3d39c5=await fileToBase64(Module[_0x3e6054(0x8f)](_0x106136));return _0x3d39c5;}catch{}}export async function captureOCR(_0x3beee8){const _0x618dc6=a0_0x4bb36d;Module[_0x618dc6(0xc9)](_0x3beee8);const _0x52fc08=Module[_0x618dc6(0x8f)](_0x618dc6(0xc7)+_0x3beee8);return _0x52fc08;}export async function setFastForwardMultiplier(_0x4576dc){const _0x21cf4e=a0_0x4bb36d;Module[_0x21cf4e(0x8b)](_0x4576dc);}export function uploadCheats(_0x38865a,_0x446112,_0x451cdb,_0x15d2dc,_0xbb850a){const _0x5115d9=a0_0x4bb36d;Module[_0x5115d9(0x98)](_0x38865a,()=>{const _0x1d10f2=_0x5115d9;Module[_0x1d10f2(0xa1)](),setTimeout(()=>{const _0x475a12=_0x1d10f2;Module[_0x475a12(0xe7)]();},0x1f4),_0x15d2dc&&(localStorage[_0x1d10f2(0x92)](_0x446112+'_savedCheats',_0x451cdb),notiMessage('Cheat\x20Enabled!',0x5dc)),_0xbb850a['textContent']=localStorage[_0x1d10f2(0xcc)](_0x446112+_0x1d10f2(0x9b)||_0x1d10f2(0xe8));});}export function setVolume(_0x27cd87){const _0xc94505=a0_0x4bb36d;Module[_0xc94505(0x82)](_0x27cd87);}