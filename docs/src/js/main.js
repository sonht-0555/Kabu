const a0_0x11fbc7=a0_0x5260;(function(_0x311a77,_0x91d9c6){const _0x8ed71b=a0_0x5260,_0x10fc96=_0x311a77();while(!![]){try{const _0x1ccc53=-parseInt(_0x8ed71b(0x104))/0x1*(parseInt(_0x8ed71b(0x11b))/0x2)+-parseInt(_0x8ed71b(0x116))/0x3+parseInt(_0x8ed71b(0xe7))/0x4*(parseInt(_0x8ed71b(0xf8))/0x5)+-parseInt(_0x8ed71b(0xf6))/0x6*(parseInt(_0x8ed71b(0xe2))/0x7)+parseInt(_0x8ed71b(0x123))/0x8*(-parseInt(_0x8ed71b(0x10c))/0x9)+-parseInt(_0x8ed71b(0x11d))/0xa+parseInt(_0x8ed71b(0xf4))/0xb;if(_0x1ccc53===_0x91d9c6)break;else _0x10fc96['push'](_0x10fc96['shift']());}catch(_0x4bcb8f){_0x10fc96['push'](_0x10fc96['shift']());}}}(a0_0x13bd,0xbfa26));import a0_0x1c3059 from'../core/mgba.js';import*as a0_0x5c5e9b from'./gamepad.js';import{localStorageFile}from'./storage.js';function a0_0x13bd(){const _0x149590=['No\x20screenshot!','onLine','11686568qdQVIx','uploadCheats','files','saveState','control-setting','#E0C068','padStart','type','endsWith','textContent','_dateState','application/octet-stream','remove','getItem','addEventListener','createElement','Do\x20you\x20want\x20to\x20load\x20save\x20state?','href','error','Auto\x20save\x20','innerWidth','listSaves','download','add','#20A5A6','then','Cheat\x20uploaded\x20successfully:','contains','buttonUnpress','listStates','resumeGame','editFileName','listCheats','log','hidden','Save/State\x20uploaded\x20successfully:','2009AZfeVU','.png','listScreenshots','text/plain','revokeObjectURL','12vwmJcP','/data/screenshots/','Error\x20uploadSavSta:','pagehide','FSSync','Cloud\x20upload\x20','_savedCheats','uId','gbc','loadGame','toString','body','name','51216231Ewaptv','disable','5622rvyOYu','visible','2608720FIctkq','setFastForwardMultiplier','Unable\x20to\x20upload\x20to\x20Cloud!','click','classList','gameName','.ss0','screenSize','/data/games/','bottom','FSInit','Resumed!','327EplOAq','\x20time(s)','0,0,','downloadFile','slotStateSaved','_dateState0','_imageState0','getElementById','9EwNZOY','SDL2','.gbc','uploadSaveOrSaveState','pauseGame','canvas','listGames','loadState','replace','buttonPress','2579025JZxdnZ','screenshot','visibilityState','gbc1','setItem','8852raIbJo','Off','13996020NuBpQF','deleteFile','/data/states/','visibilitychange'];a0_0x13bd=function(){return _0x149590;};return a0_0x13bd();}import{dpUploadFile,dpRefreshToken}from'./cloud.js';const Module={'canvas':document[a0_0x11fbc7(0x10b)](a0_0x11fbc7(0x111))};function initializeCore(_0x2fc827,_0x3a3137){const _0x325365=a0_0x11fbc7;_0x2fc827(_0x3a3137)[_0x325365(0xd7)](function(_0x176143){const _0x85a75d=_0x325365;_0x176143[_0x85a75d(0x102)]();});}initializeCore(a0_0x1c3059,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x11fbc7(0x10b)](a0_0x11fbc7(0x111)),savedTurboState=localStorage['getItem']('turboState'),controlSetting=document[a0_0x11fbc7(0x10b)](a0_0x11fbc7(0x127));function handleVisibilityChange(_0x47cb89){const _0x4a5c7=a0_0x11fbc7;document[_0x4a5c7(0x118)]===_0x4a5c7(0xe0)||_0x47cb89?.[_0x4a5c7(0x12a)]==='beforeunload'||_0x47cb89?.['persisted']?(pauseGame(),canvas[_0x4a5c7(0xfc)][_0x4a5c7(0xd5)](_0x4a5c7(0xf7))):(setTimeout(()=>{const _0x5bfdf6=_0x4a5c7;canvas[_0x5bfdf6(0xfc)][_0x5bfdf6(0x12f)]('visible');},0x258),controlSetting[_0x4a5c7(0xfc)][_0x4a5c7(0xd9)](_0x4a5c7(0xf7))&&resumeGame());}async function statusShow(){const _0x3ef566=a0_0x11fbc7;document[_0x3ef566(0x131)](_0x3ef566(0xea),handleVisibilityChange),document[_0x3ef566(0x131)](_0x3ef566(0x120),handleVisibilityChange),window['addEventListener']('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x5c5e9b['turboF'](turboState)),await delay(0x3e8),await led(parseInt(localStorage[_0x3ef566(0x130)](_0x3ef566(0x108)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x551360=a0_0x11fbc7;await ledSave(_0x551360(0xd6)),await Module[_0x551360(0x126)](0x0),await Module[_0x551360(0xeb)](),await screenShot(0x0),console[_0x551360(0xdf)](_0x551360(0xd1)+ ++countAutoSave+_0x551360(0x105));}async function saveStateInCloud(){const _0x5db4e4=a0_0x11fbc7,_0x5ae493=localStorage[_0x5db4e4(0x130)](_0x5db4e4(0xfd)),_0x2d8c48=_0x5ae493[_0x5db4e4(0x114)]('.gba','.ss0'),_0x3a20ba=localStorage['getItem'](_0x5db4e4(0xee)),_0x57c983=localStorage[_0x5db4e4(0x130)](_0x5ae493+_0x5db4e4(0x10a)),_0x5e5062=localStorage[_0x5db4e4(0x130)](_0x5ae493+_0x5db4e4(0x109));if(navigator[_0x5db4e4(0x122)]){if(_0x3a20ba){await ledSave(_0x5db4e4(0x128)),await delay(0x3e8),await dpUploadFile(_0x2d8c48,Module['downloadFile'](_0x5db4e4(0x11f)+_0x2d8c48));if(_0x57c983!==null){const _0x42f60a=_0x57c983+'\x0a\x0a'+_0x5e5062,_0xb501c7=new Blob([_0x42f60a],{'type':_0x5db4e4(0xe5)});await dpUploadFile(_0x5ae493+'_slot0.txt',_0xb501c7);}else console[_0x5db4e4(0xdf)](_0x5db4e4(0x121));await lockNoti('',_0x5db4e4(0xec)+ ++countUpload+_0x5db4e4(0x105),0x7d0);}else console[_0x5db4e4(0xdf)](_0x5db4e4(0xfa));}else console[_0x5db4e4(0xdf)]('Online!');}function startTimer(){let [_0x26e025,_0x31c4e,_0x23ab00,_0x2225cd,_0x2c081f]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x3f7c3e=a0_0x5260;_0x23ab00++,_0x2225cd++,_0x2c081f++;if(_0x23ab00===0x3c)[_0x23ab00,_0x31c4e]=[0x0,_0x31c4e+0x1];if(_0x31c4e===0x3c)[_0x31c4e,_0x26e025]=[0x0,_0x26e025+0x1];document['getElementById']('timer')[_0x3f7c3e(0x12c)]=_0x26e025+'h'+_0x31c4e['toString']()[_0x3f7c3e(0x129)](0x2,'0')+'.'+_0x23ab00[_0x3f7c3e(0xf1)]()[_0x3f7c3e(0x129)](0x2,'0');_0x2225cd===0x3c&&(saveStatePeriodically(),_0x2225cd=0x0);;_0x2225cd===0xe10&&(saveStateInCloud(),_0x2c081f=0x0);;},0x3e8);}export async function uploadGame(_0x3889f7){const _0x175f28=_0x3889f7['files'][0x0];Module['uploadRom'](_0x175f28,()=>{const _0x33bb8d=a0_0x5260;Module[_0x33bb8d(0xeb)]();});}export async function loadGame(_0x160340){const _0x167f60=a0_0x11fbc7,_0x18651f=_0x160340[_0x167f60(0x114)](/\.(gba|gbc|gb|zip)$/,_0x167f60(0xfe)),_0x4db7c7=Module[_0x167f60(0xdb)]();intro[_0x167f60(0xfc)][_0x167f60(0xd5)](_0x167f60(0xf5)),errorLogElements[0x0]['style'][_0x167f60(0x101)]='0',ingame[_0x167f60(0xfc)][_0x167f60(0x12f)]('disable'),_0x160340[_0x167f60(0x12b)](_0x167f60(0x10e))||_0x160340[_0x167f60(0x12b)]('.gb')?(canvas[_0x167f60(0xfc)][_0x167f60(0xd5)](_0x167f60(0xef)),areaTrans[_0x167f60(0xfc)][_0x167f60(0xd5)](_0x167f60(0x119)),localStorage['setItem'](_0x167f60(0xff),_0x167f60(0x106)+(window[_0x167f60(0xd2)]-0xe6)+','+(window[_0x167f60(0xd2)]-0xe6)*0x9/0xa)):localStorage[_0x167f60(0x11a)](_0x167f60(0xff),_0x167f60(0x106)+(window[_0x167f60(0xd2)]-0x96)+','+(window[_0x167f60(0xd2)]-0x96)*0x2/0x3),_0x4db7c7['includes'](_0x18651f)?(await Module[_0x167f60(0xf0)](_0x167f60(0x100)+_0x160340),confirm(_0x167f60(0x133))&&(await Module[_0x167f60(0x113)](0x0),localStorage[_0x167f60(0x11a)](_0x167f60(0xfd),_0x160340),console['log'](_0x160340))):(await Module[_0x167f60(0xf0)](_0x167f60(0x100)+_0x160340),localStorage['setItem'](_0x167f60(0xfd),_0x160340)),await statusShow();}export async function saveState(_0x37ad1c){const _0x1cf6c0=a0_0x11fbc7;await Module[_0x1cf6c0(0x126)](_0x37ad1c),await Module['FSSync']();}export async function loadState(_0x1e57a1){const _0x2835f3=a0_0x11fbc7;await Module[_0x2835f3(0x113)](_0x1e57a1);}export async function downloadFile(_0x5d4db5,_0x44b093){const _0x29cc87=a0_0x11fbc7,_0x37dbcc=Module[_0x29cc87(0x107)](_0x5d4db5),_0x5ebd2d=document[_0x29cc87(0x132)]('a');document[_0x29cc87(0xf2)]['appendChild'](_0x5ebd2d),_0x5ebd2d[_0x29cc87(0xd4)]=_0x44b093;const _0x10692e=new Blob([_0x37dbcc],{'type':_0x29cc87(0x12e)});_0x5ebd2d[_0x29cc87(0xcf)]=URL['createObjectURL'](_0x10692e),_0x5ebd2d[_0x29cc87(0xfb)](),URL[_0x29cc87(0xe6)](_0x10692e),_0x5ebd2d[_0x29cc87(0x12f)]();}export function downloadFileInCloud(_0x3768f4){const _0x1896a2=a0_0x11fbc7,_0x45cff3=Module[_0x1896a2(0x107)](_0x3768f4);return _0x45cff3;}export async function uploadFile(_0x2cbc2f){const _0x527837=a0_0x11fbc7,_0x5945a4=_0x2cbc2f[_0x527837(0x125)][0x0];Module['uploadSaveOrSaveState'](_0x5945a4,()=>{const _0x227ec1=_0x527837;Module[_0x227ec1(0xeb)]();});}export async function editFile(_0x23316e,_0x2e7160,_0x597063){const _0x305eb8=a0_0x11fbc7;await Module[_0x305eb8(0xdd)](_0x23316e,_0x2e7160,_0x597063),await Module[_0x305eb8(0xeb)]();}export async function deleteFile(_0x5d04d2){const _0x812b9b=a0_0x11fbc7;await Module[_0x812b9b(0x11e)](_0x5d04d2),await Module[_0x812b9b(0xeb)]();}export function listGame(){const _0x43f367=a0_0x11fbc7,_0x458673=Module[_0x43f367(0x112)]();return _0x458673;}export function listSave(){const _0x4362ae=a0_0x11fbc7,_0x1be233=Module[_0x4362ae(0xd3)]();return _0x1be233;}export function listState(){const _0x40384f=Module['listStates']();return _0x40384f;}export function listCheat(){const _0x184427=a0_0x11fbc7,_0x584fa2=Module[_0x184427(0xde)]();return _0x584fa2;}export function listScreenshot(){const _0x48d55f=a0_0x11fbc7,_0x433af8=Module[_0x48d55f(0xe4)]();return _0x433af8;}export function fileSize(_0x1f1454){const _0xeea108=Module['fileSize'](_0x1f1454);return _0xeea108;}export async function uploadCheat(_0x1ceb52){const _0x390b4c=a0_0x11fbc7;try{const _0x494cfe=_0x1ceb52['files'][0x0];await Module[_0x390b4c(0x124)](_0x494cfe,()=>{const _0x5ce6d5=_0x390b4c;console[_0x5ce6d5(0xdf)](_0x5ce6d5(0xd8),_0x494cfe[_0x5ce6d5(0xf3)]),localStorageFile(),Module[_0x5ce6d5(0xeb)]();});}catch(_0x317e16){console[_0x390b4c(0xd0)]('Error\x20uploadCheat:',_0x317e16);}}export async function uploadSavSta(_0x4a0ad8){const _0x39c8ce=a0_0x11fbc7;try{const _0x56d9d7=_0x4a0ad8[_0x39c8ce(0x125)][0x0];await Module[_0x39c8ce(0x10f)](_0x56d9d7,()=>{const _0x57ac9f=_0x39c8ce;console[_0x57ac9f(0xdf)](_0x57ac9f(0xe1),_0x56d9d7[_0x57ac9f(0xf3)]),localStorageFile(),Module['FSSync']();});}catch(_0x54483d){console[_0x39c8ce(0xd0)](_0x39c8ce(0xe9),_0x54483d);}}export async function uploadSaveOrSaveState(_0x1f989f){const _0x2966fd=a0_0x11fbc7;Module[_0x2966fd(0x10f)](_0x1f989f,()=>{const _0x1a2559=_0x2966fd;localStorageFile(),Module[_0x1a2559(0xeb)]();});}function a0_0x5260(_0x499df5,_0x3c4a02){const _0x13bd1e=a0_0x13bd();return a0_0x5260=function(_0x526089,_0x231b99){_0x526089=_0x526089-0xcf;let _0x3a2870=_0x13bd1e[_0x526089];return _0x3a2870;},a0_0x5260(_0x499df5,_0x3c4a02);}export async function resumeGame(){const _0x5748e2=a0_0x11fbc7;Module[_0x5748e2(0xdc)](),Module[_0x5748e2(0x10d)](),notiMessage(_0x5748e2(0x103),0x7d0);}export async function pauseGame(){const _0x18f0e9=a0_0x11fbc7;Module[_0x18f0e9(0x110)](),Module[_0x18f0e9(0x10d)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x48400c){const _0x592923=a0_0x11fbc7;Module[_0x592923(0x115)](_0x48400c);}export async function buttonUnpress(_0x20a956){const _0x21fd1d=a0_0x11fbc7;Module[_0x21fd1d(0xda)](_0x20a956);}export async function screenShot(_0x2486e3){const _0x485984=a0_0x11fbc7,_0x5112b3=localStorage['getItem'](_0x485984(0xfd)),_0x54dd39=_0x5112b3[_0x485984(0x114)](/\.(gba|gbc|gb|zip)$/,'_');await Module[_0x485984(0x117)](''+_0x54dd39+_0x2486e3+_0x485984(0xe3)),await Module[_0x485984(0xeb)]();const _0xe3816=await fileToBase64(Module[_0x485984(0x107)]('/data/screenshots/'+_0x54dd39+_0x2486e3+'.png')),_0x51626b=Date['now'](),_0x45215a=formatDateTime(_0x51626b);localStorage['setItem'](_0x5112b3+_0x485984(0x12d)+_0x2486e3,_0x45215a),localStorage[_0x485984(0x11a)](_0x5112b3+'_imageState'+_0x2486e3,_0xe3816);}export async function captureOCR(_0x341d61){const _0x30a3f4=a0_0x11fbc7;Module['screenshot'](_0x341d61);const _0x130395=Module[_0x30a3f4(0x107)](_0x30a3f4(0xe8)+_0x341d61);return _0x130395;}export async function setFastForwardMultiplier(_0x398aad){const _0x59f285=a0_0x11fbc7;Module[_0x59f285(0xf9)](_0x398aad);}export function uploadCheats(_0x1db9a6,_0x127637,_0x3ec1d7,_0x5878f1,_0x13de28){const _0x10fc08=a0_0x11fbc7;Module[_0x10fc08(0x124)](_0x1db9a6,()=>{const _0x1bb55c=_0x10fc08;Module['autoLoadCheats'](),setTimeout(()=>{const _0x392d3a=a0_0x5260;Module[_0x392d3a(0xeb)]();},0x1f4),_0x5878f1&&(localStorage[_0x1bb55c(0x11a)](_0x127637+'_savedCheats',_0x3ec1d7),notiMessage('Cheat\x20Enabled!',0x5dc)),_0x13de28[_0x1bb55c(0x12c)]=localStorage[_0x1bb55c(0x130)](_0x127637+_0x1bb55c(0xed)||_0x1bb55c(0x11c));});}