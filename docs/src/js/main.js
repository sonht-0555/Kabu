const a0_0x2b96cf=a0_0x560a;(function(_0x193060,_0x14562d){const _0x59b229=a0_0x560a,_0xd06804=_0x193060();while(!![]){try{const _0x48bd79=-parseInt(_0x59b229(0x232))/0x1+parseInt(_0x59b229(0x24e))/0x2*(parseInt(_0x59b229(0x256))/0x3)+parseInt(_0x59b229(0x255))/0x4+-parseInt(_0x59b229(0x210))/0x5*(-parseInt(_0x59b229(0x249))/0x6)+parseInt(_0x59b229(0x217))/0x7+parseInt(_0x59b229(0x225))/0x8*(-parseInt(_0x59b229(0x224))/0x9)+-parseInt(_0x59b229(0x23e))/0xa;if(_0x48bd79===_0x14562d)break;else _0xd06804['push'](_0xd06804['shift']());}catch(_0x6833a9){_0xd06804['push'](_0xd06804['shift']());}}}(a0_0x1560,0x18b51));import a0_0x1b8a4d from'../core/1.1.0/mgba.js';import a0_0x4d8cdd from'../core/2.0.0/mgba.js';import*as a0_0x36fe99 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x1b8a4d,'2.0.0':a0_0x4d8cdd};let currentVersion=localStorage[a0_0x2b96cf(0x1f7)]('GBAver')||a0_0x2b96cf(0x252),mGBA=versions[currentVersion];document[a0_0x2b96cf(0x227)](a0_0x2b96cf(0x251))[a0_0x2b96cf(0x1f4)]=a0_0x2b96cf(0x214)+currentVersion,document[a0_0x2b96cf(0x227)](a0_0x2b96cf(0x251))['addEventListener']('click',()=>{const _0x3936c6=a0_0x2b96cf,_0xc52e37=Object[_0x3936c6(0x1ed)](versions);let _0x3f49d3=_0xc52e37[_0x3936c6(0x23a)](currentVersion);currentVersion=_0xc52e37[(_0x3f49d3+0x1)%_0xc52e37[_0x3936c6(0x211)]],localStorage[_0x3936c6(0x23b)](_0x3936c6(0x251),currentVersion),document[_0x3936c6(0x227)](_0x3936c6(0x251))[_0x3936c6(0x1f4)]=_0x3936c6(0x214)+currentVersion,setTimeout(()=>{const _0xa78bd9=_0x3936c6;window[_0xa78bd9(0x21e)][_0xa78bd9(0x1fe)]();},0x3e8);});const Module={'canvas':document[a0_0x2b96cf(0x227)]('canvas')};function initializeCore(_0x2c13c4,_0xd50322){const _0x1b732f=a0_0x2b96cf;_0x2c13c4(_0xd50322)[_0x1b732f(0x212)](function(_0x31a529){const _0xe247c0=_0x1b732f;_0x31a529[_0xe247c0(0x208)]();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0x2b96cf(0x227)]('canvas'),controlSetting=document[a0_0x2b96cf(0x227)](a0_0x2b96cf(0x239));function handleVisibilityChange(_0x111a3c){const _0x49f042=a0_0x2b96cf;document[_0x49f042(0x1de)]==='hidden'||_0x111a3c?.[_0x49f042(0x1fc)]===_0x49f042(0x1e3)||_0x111a3c?.[_0x49f042(0x21d)]?(Module[_0x49f042(0x1f5)](),pauseGame(),canvas[_0x49f042(0x1e8)][_0x49f042(0x1ff)](_0x49f042(0x1ea))):(setTimeout(()=>{const _0x558f97=_0x49f042;canvas['classList'][_0x558f97(0x20f)](_0x558f97(0x1ea));},0x258),controlSetting['classList']['contains'](_0x49f042(0x1ea))&&resumeGame());}async function statusShow(){const _0x54db0f=a0_0x2b96cf;document[_0x54db0f(0x22c)](_0x54db0f(0x1eb),handleVisibilityChange),document[_0x54db0f(0x22c)](_0x54db0f(0x24f),handleVisibilityChange),window['addEventListener'](_0x54db0f(0x1e3),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x36fe99[_0x54db0f(0x222)](parseInt(await getData(gameName,'0','turboState'))),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x54db0f(0x254)))),await notiMessage(_0x54db0f(0x253)+currentVersion,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x4b2f42=a0_0x2b96cf;await ledSave(_0x4b2f42(0x202)),await Module[_0x4b2f42(0x24b)](0x0),await Module['FSSync'](),await screenShot(0x0),console[_0x4b2f42(0x243)](_0x4b2f42(0x1f9)+ ++countAutoSave+_0x4b2f42(0x22d));}async function saveStateInCloud(){const _0x4ab97d=a0_0x2b96cf,_0x131726=gameName[_0x4ab97d(0x1e9)](/\.(zip|gb|gbc|gba)$/,_0x4ab97d(0x20d)),_0x28ebb2=localStorage[_0x4ab97d(0x1f7)]('uId');navigator['onLine']&&(_0x28ebb2&&(await ledSave(_0x4ab97d(0x241)),await delay(0x3e8),await dpUploadFile(_0x131726,Module[_0x4ab97d(0x207)](_0x4ab97d(0x1f3)+_0x131726),'state'),await lockNoti('',_0x4ab97d(0x20e)+ ++countUpload+_0x4ab97d(0x22d),0x7d0)));}function startTimer(){let [_0x3691fc,_0x24480c,_0x2f85a2,_0x28f1dd,_0x2e13ca]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x17cfc1=a0_0x560a;_0x2f85a2++,_0x28f1dd++,_0x2e13ca++;if(_0x2f85a2===0x3c)[_0x2f85a2,_0x24480c]=[0x0,_0x24480c+0x1];if(_0x24480c===0x3c)[_0x24480c,_0x3691fc]=[0x0,_0x3691fc+0x1];document[_0x17cfc1(0x227)]('timer')[_0x17cfc1(0x1f4)]=_0x3691fc+'h'+_0x24480c[_0x17cfc1(0x236)]()[_0x17cfc1(0x21c)](0x2,'0')+'.'+_0x2f85a2['toString']()[_0x17cfc1(0x21c)](0x2,'0');_0x28f1dd===0x3c&&(saveStatePeriodically(),_0x28f1dd=0x0);;_0x2e13ca===0x708&&(saveStateInCloud(),_0x2e13ca=0x0);;},0x3e8);}export async function uploadGame(_0x4d9972){const _0x44409a=a0_0x2b96cf,_0x1327f0=_0x4d9972[_0x44409a(0x1df)][0x0];Module[_0x44409a(0x237)](_0x1327f0,()=>{const _0x4e3390=_0x44409a;Module[_0x4e3390(0x1f5)]();});}export async function loadGame(_0x2f025a){const _0x269cc9=a0_0x2b96cf,_0x7612f4=_0x2f025a[_0x269cc9(0x1e9)](/\.(gba|gbc|gb|zip)$/,_0x269cc9(0x20d)),_0xf0d580=Module[_0x269cc9(0x216)](_0x269cc9(0x20a))[_0x269cc9(0x1fa)](_0x25f400=>_0x25f400!=='.'&&_0x25f400!=='..');intro['classList']['add'](_0x269cc9(0x215)),errorLogElements[0x0][_0x269cc9(0x240)][_0x269cc9(0x1e6)]='0',ingame[_0x269cc9(0x1e8)][_0x269cc9(0x20f)]('disable'),_0x2f025a[_0x269cc9(0x228)](_0x269cc9(0x203))||_0x2f025a[_0x269cc9(0x228)]('.gb')?(canvas[_0x269cc9(0x1e8)][_0x269cc9(0x1ff)](_0x269cc9(0x1e4)),areaTrans[_0x269cc9(0x1e8)][_0x269cc9(0x1ff)]('gbc1'),localStorage[_0x269cc9(0x23b)](_0x269cc9(0x21f),'0,0,'+(window[_0x269cc9(0x22f)]-0xe6)+','+(window[_0x269cc9(0x22f)]-0xe6)*0x9/0xa)):localStorage[_0x269cc9(0x23b)](_0x269cc9(0x21f),_0x269cc9(0x1e0)+(window[_0x269cc9(0x22f)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0xf0d580[_0x269cc9(0x246)](_0x7612f4)?(await Module['loadGame']('/data/games/'+_0x2f025a),confirm(_0x269cc9(0x244))&&(await delay(0x64),await Module['loadState'](0x0),await shaderData())):(await Module['loadGame'](_0x269cc9(0x23c)+_0x2f025a),await shaderData()),await statusShow();}export async function saveState(_0x1fc520){const _0xc69a7d=a0_0x2b96cf;await Module[_0xc69a7d(0x24b)](_0x1fc520);}export async function loadState(_0x406969){await Module['loadState'](_0x406969);}function a0_0x560a(_0x1ff893,_0x3c3667){const _0x156077=a0_0x1560();return a0_0x560a=function(_0x560a57,_0x38ee8f){_0x560a57=_0x560a57-0x1dd;let _0x450fce=_0x156077[_0x560a57];return _0x450fce;},a0_0x560a(_0x1ff893,_0x3c3667);}export async function downloadFile(_0x58853e,_0x49f03f){const _0x3581e0=a0_0x2b96cf,_0x40bd16=Module[_0x3581e0(0x207)](_0x58853e),_0x3df17b=document[_0x3581e0(0x247)]('a');document[_0x3581e0(0x204)][_0x3581e0(0x223)](_0x3df17b),_0x3df17b[_0x3581e0(0x234)]=_0x49f03f;const _0x5d4d12=new Blob([_0x40bd16],{'type':'application/octet-stream'});_0x3df17b['href']=URL[_0x3581e0(0x23d)](_0x5d4d12),_0x3df17b[_0x3581e0(0x245)](),URL['revokeObjectURL'](_0x5d4d12),_0x3df17b[_0x3581e0(0x20f)]();}export function downloadFileInCloud(_0x5902e3){const _0xc3cdcd=a0_0x2b96cf;try{const _0x2958d7=Module[_0xc3cdcd(0x207)](_0x5902e3);return _0x2958d7;}catch(_0x11569c){return null;}}export async function uploadFileInCloud(_0x490667){Module['uploadAll'](_0x490667,async()=>{const _0x1e043c=a0_0x560a;localStorageFile(),await Module[_0x1e043c(0x1f5)]();});}export async function uploadFile(_0x1c52e0){const _0x1475ce=a0_0x2b96cf,_0x248bbe=_0x1c52e0[_0x1475ce(0x1df)][0x0];Module[_0x1475ce(0x22b)](_0x248bbe,async()=>{const _0x3c5d0f=_0x1475ce;localStorageFile(),await Module[_0x3c5d0f(0x1f5)]();});}export async function editFile(_0x221ffd,_0x9b0625,_0x2d6798){const _0x2adbe1=a0_0x2b96cf;await Module[_0x2adbe1(0x22e)](_0x221ffd,_0x9b0625,_0x2d6798);}export async function deleteFile(_0x391174){const _0x195e2d=a0_0x2b96cf;try{return await Module[_0x195e2d(0x200)](_0x391174),!![];}catch(_0x2c0e76){return console['error'](_0x391174),null;}}export function listFiles(_0x2ea614){const _0x3a14d6=Module['listFiles'](_0x2ea614)['filter'](_0x24aa7f=>_0x24aa7f!=='.'&&_0x24aa7f!=='..');return _0x3a14d6;}export function listGame(){const _0x22f23e=a0_0x2b96cf,_0x7ab418=Module[_0x22f23e(0x1e2)]()[_0x22f23e(0x1fa)](_0x3c690d=>_0x3c690d!=='.'&&_0x3c690d!=='..');return _0x7ab418;}export function listSave(){const _0x52f7b0=a0_0x2b96cf,_0x4d8e87=Module[_0x52f7b0(0x24c)]()[_0x52f7b0(0x1fa)](_0x2b25c9=>_0x2b25c9!=='.'&&_0x2b25c9!=='..');return _0x4d8e87;}export function listState(){const _0x2b4e07=a0_0x2b96cf,_0x9c07f5=Module[_0x2b4e07(0x1f1)]()['filter'](_0xe30e2c=>_0xe30e2c!=='.'&&_0xe30e2c!=='..');return _0x9c07f5;}export function listCheat(){const _0x345453=a0_0x2b96cf,_0x3f2554=Module[_0x345453(0x1fb)]()[_0x345453(0x1fa)](_0x16b315=>_0x16b315!=='.'&&_0x16b315!=='..');return _0x3f2554;}export function listScreenshot(){const _0x2e6d41=a0_0x2b96cf,_0xdf9ee6=Module[_0x2e6d41(0x1e1)]()['filter'](_0x552d0c=>_0x552d0c!=='.'&&_0x552d0c!=='..');return _0xdf9ee6;}export function fileSize(_0x3196eb){const _0x5a2829=Module['fileSize'](_0x3196eb);return _0x5a2829;}export async function resumeGame(){const _0x2cc51c=a0_0x2b96cf;Module[_0x2cc51c(0x24d)](),Module[_0x2cc51c(0x231)](),notiMessage('Resumed!',0x7d0);}export async function pauseGame(){const _0x2d7dfa=a0_0x2b96cf;Module[_0x2d7dfa(0x221)](),Module[_0x2d7dfa(0x231)](),notiMessage('Paused!',0x7d0);}export async function buttonPress(_0x4278f1){const _0x2cc9b2=a0_0x2b96cf;Module[_0x2cc9b2(0x201)](_0x4278f1);}export async function buttonUnpress(_0x1ac51d){Module['buttonUnpress'](_0x1ac51d);}export async function screenShot(_0x48eb04){const _0x4ebe20=a0_0x2b96cf,_0x1a25da=gameName[_0x4ebe20(0x1e9)](/\.(gba|gbc|gb|zip)$/,'_'+_0x48eb04+_0x4ebe20(0x1f8)),_0x344fd4=await getData(gameName,_0x48eb04,_0x4ebe20(0x21a))||'';console['log'](_0x344fd4),await Module[_0x4ebe20(0x242)](_0x1a25da),await setData(gameName,_0x48eb04,_0x4ebe20(0x21b),formatDateTime(Date[_0x4ebe20(0x213)]()),_0x344fd4);}export async function dowloadScreenShot(_0x4dba33){try{const _0x58a930=await fileToBase64(Module['downloadFile'](_0x4dba33));return _0x58a930;}catch{}}export async function captureOCR(_0x12db9f){const _0x20eca4=a0_0x2b96cf;Module['screenshot'](_0x12db9f);const _0x524079=Module[_0x20eca4(0x207)](_0x20eca4(0x233)+_0x12db9f);return _0x524079;}export async function setFastForwardMultiplier(_0x36617a){const _0x304594=a0_0x2b96cf;Module[_0x304594(0x226)](_0x36617a);}export async function uploadCheats(_0x27b304){const _0x163391=a0_0x2b96cf;Module['autoLoadCheats'](),Module[_0x163391(0x22b)](_0x27b304,async()=>{});}export function setVolume(_0x426c7b){const _0x2b6135=a0_0x2b96cf;Module[_0x2b6135(0x235)](_0x426c7b);}export async function setData(_0x248185,_0x4fe26d,_0x82bac1,_0x1b23de,_0x2203e3=''){const _0x48dd3b=a0_0x2b96cf,_0x18759c=_0x248185['replace'](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x54332e=_0x48dd3b(0x233)+_0x18759c+'_'+_0x4fe26d+_0x48dd3b(0x1f8);let _0x483498;try{_0x483498=await fileToBase64(Module[_0x48dd3b(0x207)](_0x54332e));}catch(_0x4a10cf){await Module['screenshot'](_0x18759c+'_'+_0x4fe26d+_0x48dd3b(0x1f8)),await delay(0xc8),_0x483498=await fileToBase64(Module[_0x48dd3b(0x207)](_0x54332e));}let _0x3fae88=atob(_0x483498[_0x48dd3b(0x22a)](',')[0x1]),_0x5c371d='tEXtComment\x00',_0xe1acbf=_0x3fae88[_0x48dd3b(0x23a)](_0x5c371d),_0x262907={};if(_0xe1acbf!==-0x1||_0x2203e3[_0x48dd3b(0x1e5)]()!==''){let _0x59f5b6=_0xe1acbf!==-0x1?_0x3fae88['substring'](_0xe1acbf+_0x5c371d[_0x48dd3b(0x211)]):_0x2203e3,_0xf749d0=/(\w+)\s*:\s*([^|]*)/g,_0x33d407;while((_0x33d407=_0xf749d0[_0x48dd3b(0x1e7)](_0x59f5b6))!==null){_0x262907[_0x33d407[0x1]['trim']()]=_0x33d407[0x2]['trim']();}_0xe1acbf!==-0x1&&(_0x3fae88=_0x3fae88[_0x48dd3b(0x1ec)](0x0,_0xe1acbf));}_0x262907[_0x82bac1]=_0x1b23de;let _0x4bb89f=Object[_0x48dd3b(0x206)](_0x262907)[_0x48dd3b(0x1fd)](([_0x44c77f,_0x3c6761])=>_0x44c77f+_0x48dd3b(0x248)+_0x3c6761)[_0x48dd3b(0x20b)](_0x48dd3b(0x218)),_0xcf07a7=new TextEncoder()['encode'](_0x5c371d+'\x20'+_0x4bb89f),_0x5139a9=new Uint8Array([..._0x3fae88]['map'](_0x205717=>_0x205717[_0x48dd3b(0x238)](0x0))[_0x48dd3b(0x250)]([..._0xcf07a7])),_0x5c4d3d=new File([new Blob([_0x5139a9],{'type':_0x48dd3b(0x1f2)})],_0x18759c+'_'+_0x4fe26d+_0x48dd3b(0x1f8),{'type':_0x48dd3b(0x1f2)});Module['uploadAll'](_0x5c4d3d,async()=>{});}export async function getData(_0x35798d,_0x5b5a76,_0x25e494){const _0x5bb70d=a0_0x2b96cf;try{const _0x3bf231=_0x35798d[_0x5bb70d(0x1e9)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x2829c5=_0x5bb70d(0x233)+_0x3bf231+'_'+_0x5b5a76+'.png';let _0x78a94f;try{_0x78a94f=await fileToBase64(Module[_0x5bb70d(0x207)](_0x2829c5));}catch(_0x2feb7d){return null;}let _0x51acf8=atob(_0x78a94f['split'](',')[0x1]),_0x226383='tEXtComment\x00',_0x23bb5a=_0x51acf8[_0x5bb70d(0x23a)](_0x226383);if(_0x23bb5a!==-0x1){let _0xb1af2d=_0x51acf8['substring'](_0x23bb5a+_0x226383[_0x5bb70d(0x211)]);if(_0x25e494===_0x5bb70d(0x21a))return _0xb1af2d['trim']();let _0x25c36d=new RegExp(_0x25e494+'\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)'),_0xe06332=_0xb1af2d[_0x5bb70d(0x229)](_0x25c36d);if(_0xe06332)return _0xe06332[0x1][_0x5bb70d(0x1e5)]();}}catch(_0x409c3f){return console[_0x5bb70d(0x209)]({'romName':_0x35798d,'slot':_0x5b5a76,'type':_0x25e494}),null;}}export async function ledSave(_0x5339af){const _0x5cf3c3=a0_0x2b96cf,_0x25a157=parseInt(await getData(gameName,'0',_0x5cf3c3(0x254))),_0x159383=_0x25a157===0x1?_0x5cf3c3(0x24a):_0x25a157===0x2?_0x5cf3c3(0x1ee):_0x25a157===0x3?_0x5cf3c3(0x23f):_0x25a157===0x4?'led04':_0x25a157===0x5?'led05':_0x25a157===0x6?_0x5cf3c3(0x230):_0x25a157===0x7?'led07':_0x5cf3c3(0x20c);try{for(let _0x215d7f=0x0;_0x215d7f<=0x7;_0x215d7f++){document[_0x5cf3c3(0x227)]('led0'+_0x215d7f)['style']['fill']=_0x5cf3c3(0x1f0);}await delay(0x3e8);for(let _0x198e60=0x0;_0x198e60<=0x7;_0x198e60++){document['getElementById']('led0'+_0x198e60)[_0x5cf3c3(0x240)]['fill']=_0x5cf3c3(0x1f0);}document[_0x5cf3c3(0x227)](_0x159383)[_0x5cf3c3(0x240)][_0x5cf3c3(0x1f6)]=_0x5339af;}catch(_0x216e81){console['error'](_0x5cf3c3(0x220),_0x216e81);}};export async function notiMessage(_0x82e2a6,_0x32d0d2,_0x4ce096=![]){const _0x1e2c95=a0_0x2b96cf;var _0x135928=document[_0x1e2c95(0x227)](_0x1e2c95(0x205));const _0x4c5099=parseInt(await getData(gameName,'0',_0x1e2c95(0x254)))||0x0;_0x135928[_0x1e2c95(0x240)]['opacity']===_0x1e2c95(0x1dd)&&(clearTimeout(messageTimeout),_0x135928[_0x1e2c95(0x240)][_0x1e2c95(0x219)]='0'),_0x135928[_0x1e2c95(0x1f4)]=_0x82e2a6,_0x135928[_0x1e2c95(0x240)][_0x1e2c95(0x219)]='0.4',messageTimeout=setTimeout(()=>{const _0xed8d38=_0x1e2c95;_0x135928[_0xed8d38(0x1f4)]='['+_0x4c5099+']\x20'+gameName[_0xed8d38(0x1ec)](0x0,gameName[_0xed8d38(0x1ef)]('.')),_0x135928[_0xed8d38(0x240)][_0xed8d38(0x219)]=_0xed8d38(0x1dd);},_0x32d0d2),_0x4ce096&&(canvas[_0x1e2c95(0x1e8)][_0x1e2c95(0x1ff)]('visible'),setTimeout(()=>{const _0x86d5d3=_0x1e2c95;canvas[_0x86d5d3(0x1e8)][_0x86d5d3(0x20f)](_0x86d5d3(0x1ea));},0x258));}export async function FSSync(){const _0x1d618e=a0_0x2b96cf;Module[_0x1d618e(0x1f5)]();}function a0_0x1560(){const _0x5813ed=['FSInit','error','states','join','led00','.ss0','Cloud\x20upload\x20','remove','15RLpcmI','length','then','now','Wasm_©','disable','listFiles','637567ZMSMbu','\x20|\x20','opacity','All','saveTime','padStart','persisted','location','screenSize','Error\x20ledSave:','pauseGame','turboF','appendChild','13347HCPqKX','72MYrCst','setFastForwardMultiplier','getElementById','endsWith','match','split','uploadAll','addEventListener','\x20time(s)','editFileName','innerWidth','led06','SDL2','68903wlnnju','/data/screenshots/','download','setVolume','toString','uploadRom','charCodeAt','control-setting','indexOf','setItem','/data/games/','createObjectURL','2598660UiDsfC','led03','style','#E0C068','screenshot','log','Do\x20you\x20want\x20to\x20load\x20save\x20state?','click','includes','createElement','\x20:\x20','273060zqHJHi','led01','saveState','listSaves','resumeGame','1918fTcLHs','visibilitychange','concat','GBAver','1.1.0','W_©','slotStateSaved','740072CoGyxT','96roTyIk','0.4','visibilityState','files','0,0,','listScreenshots','listRoms','beforeunload','gbc','trim','bottom','exec','classList','replace','visible','pagehide','substring','keys','led02','lastIndexOf','rgba(245,\x20232,\x20209,\x200.4)','listStates','image/png','/data/states/','textContent','FSSync','fill','getItem','.png','Auto\x20save\x20','filter','listCheats','type','map','reload','add','deleteFile','buttonPress','#20A5A6','.gbc','body','noti-mess','entries','downloadFile'];a0_0x1560=function(){return _0x5813ed;};return a0_0x1560();}export const rewind=_0x1a5337=>Module['toggleRewind']?.(_0x1a5337)||null;