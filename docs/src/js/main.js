const a0_0xc17222=a0_0x3e51;(function(_0x63fdeb,_0xbc4ee1){const _0x5309be=a0_0x3e51,_0x27fe41=_0x63fdeb();while(!![]){try{const _0x29a0da=parseInt(_0x5309be(0x1b5))/0x1+parseInt(_0x5309be(0x193))/0x2*(-parseInt(_0x5309be(0x1c2))/0x3)+parseInt(_0x5309be(0x176))/0x4+parseInt(_0x5309be(0x166))/0x5+parseInt(_0x5309be(0x178))/0x6+-parseInt(_0x5309be(0x187))/0x7*(-parseInt(_0x5309be(0x19d))/0x8)+-parseInt(_0x5309be(0x1a8))/0x9*(parseInt(_0x5309be(0x1ba))/0xa);if(_0x29a0da===_0xbc4ee1)break;else _0x27fe41['push'](_0x27fe41['shift']());}catch(_0x38867d){_0x27fe41['push'](_0x27fe41['shift']());}}}(a0_0x4964,0xe98bd));import a0_0x5d4836 from'../core/1.1.0/mgba.js';import a0_0x342590 from'../core/2.0.0/mgba.js';import*as a0_0xb470c2 from'./gamepad.js';function a0_0x3e51(_0x72633b,_0x4953fc){const _0x49642f=a0_0x4964();return a0_0x3e51=function(_0x3e5182,_0x59e278){_0x3e5182=_0x3e5182-0x143;let _0x1ba35f=_0x49642f[_0x3e5182];return _0x1ba35f;},a0_0x3e51(_0x72633b,_0x4953fc);}import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x5d4836,'2.0.0':a0_0x342590};let currentVersion=localStorage[a0_0xc17222(0x167)](a0_0xc17222(0x14e))||a0_0xc17222(0x16f),mGBA=versions[currentVersion];document[a0_0xc17222(0x1ad)]('GBAver')[a0_0xc17222(0x188)]=a0_0xc17222(0x1c1)+currentVersion,document[a0_0xc17222(0x1ad)](a0_0xc17222(0x14e))[a0_0xc17222(0x1b2)](a0_0xc17222(0x14f),()=>{const _0x115075=a0_0xc17222,_0x200629=Object[_0x115075(0x17b)](versions);let _0x48933e=_0x200629[_0x115075(0x15f)](currentVersion);currentVersion=_0x200629[(_0x48933e+0x1)%_0x200629[_0x115075(0x15a)]],localStorage['setItem'](_0x115075(0x14e),currentVersion),document['getElementById'](_0x115075(0x14e))['textContent']=_0x115075(0x1c1)+currentVersion;});const Module={'canvas':document[a0_0xc17222(0x1ad)]('canvas')};function initializeCore(_0x1c2729,_0x422791){_0x1c2729(_0x422791)['then'](function(_0x49e252){const _0x509067=a0_0x3e51;_0x49e252[_0x509067(0x158)]();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document[a0_0xc17222(0x1ad)]('canvas'),controlSetting=document[a0_0xc17222(0x1ad)](a0_0xc17222(0x183));function handleVisibilityChange(_0x3a4f1a){const _0x6e36a=a0_0xc17222;document['visibilityState']===_0x6e36a(0x17e)||_0x3a4f1a?.[_0x6e36a(0x1c0)]==='beforeunload'||_0x3a4f1a?.[_0x6e36a(0x16e)]?(Module['FSSync'](),pauseGame(),canvas[_0x6e36a(0x168)][_0x6e36a(0x196)](_0x6e36a(0x17f))):(setTimeout(()=>{const _0x5ce975=_0x6e36a;canvas[_0x5ce975(0x168)][_0x5ce975(0x161)](_0x5ce975(0x17f));},0x258),controlSetting[_0x6e36a(0x168)][_0x6e36a(0x1bd)](_0x6e36a(0x17f))&&resumeGame());}async function statusShow(){const _0x18b311=a0_0xc17222;document[_0x18b311(0x1b2)](_0x18b311(0x181),handleVisibilityChange),document[_0x18b311(0x1b2)]('visibilitychange',handleVisibilityChange),window[_0x18b311(0x1b2)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),await a0_0xb470c2[_0x18b311(0x17a)](parseInt(await getData(gameName,'0',_0x18b311(0x172)))),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(await getData(gameName,'0','slotStateSaved'))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x579f4b=a0_0xc17222;await ledSave(_0x579f4b(0x182)),await Module[_0x579f4b(0x147)](0x0),await Module[_0x579f4b(0x19b)](),await screenShot(0x0),console[_0x579f4b(0x160)](_0x579f4b(0x1bb)+ ++countAutoSave+_0x579f4b(0x1ac));}async function saveStateInCloud(){const _0x11a97b=a0_0xc17222,_0x4c17fa=gameName[_0x11a97b(0x1af)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x148229=localStorage[_0x11a97b(0x167)](_0x11a97b(0x159));navigator[_0x11a97b(0x1a5)]&&(_0x148229&&(await ledSave(_0x11a97b(0x16a)),await delay(0x3e8),await dpUploadFile(_0x4c17fa,Module[_0x11a97b(0x169)]('/data/states/'+_0x4c17fa),_0x11a97b(0x1a6)),await lockNoti('','Cloud\x20upload\x20'+ ++countUpload+_0x11a97b(0x1ac),0x7d0)));}function startTimer(){let [_0x2752b2,_0x1a2792,_0x87aa92,_0x179c11,_0x3c4b62]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x279c45=a0_0x3e51;_0x87aa92++,_0x179c11++,_0x3c4b62++;if(_0x87aa92===0x3c)[_0x87aa92,_0x1a2792]=[0x0,_0x1a2792+0x1];if(_0x1a2792===0x3c)[_0x1a2792,_0x2752b2]=[0x0,_0x2752b2+0x1];document[_0x279c45(0x1ad)](_0x279c45(0x18d))['textContent']=_0x2752b2+'h'+_0x1a2792['toString']()[_0x279c45(0x17d)](0x2,'0')+'.'+_0x87aa92[_0x279c45(0x1bc)]()[_0x279c45(0x17d)](0x2,'0');_0x179c11===0x3c&&(saveStatePeriodically(),_0x179c11=0x0);;_0x3c4b62===0x708&&(saveStateInCloud(),_0x3c4b62=0x0);;},0x3e8);}export async function uploadGame(_0x1611f3){const _0x2b8bb7=a0_0xc17222,_0x2feeca=_0x1611f3[_0x2b8bb7(0x1b9)][0x0];Module[_0x2b8bb7(0x19a)](_0x2feeca,()=>{const _0x4cacf4=_0x2b8bb7;Module[_0x4cacf4(0x19b)]();});}export async function loadGame(_0x2b0c6a){const _0xebaea0=a0_0xc17222,_0x289b40=_0x2b0c6a[_0xebaea0(0x1af)](/\.(gba|gbc|gb|zip)$/,_0xebaea0(0x17c)),_0x2b7299=Module['listFiles']('states')['filter'](_0x446145=>_0x446145!=='.'&&_0x446145!=='..');intro['classList'][_0xebaea0(0x196)](_0xebaea0(0x164)),errorLogElements[0x0][_0xebaea0(0x191)][_0xebaea0(0x189)]='0',ingame[_0xebaea0(0x168)][_0xebaea0(0x161)](_0xebaea0(0x164)),_0x2b0c6a[_0xebaea0(0x162)](_0xebaea0(0x1a0))||_0x2b0c6a[_0xebaea0(0x162)](_0xebaea0(0x1a7))?(canvas[_0xebaea0(0x168)][_0xebaea0(0x196)](_0xebaea0(0x152)),areaTrans['classList'][_0xebaea0(0x196)](_0xebaea0(0x1b6)),localStorage[_0xebaea0(0x1b3)](_0xebaea0(0x180),_0xebaea0(0x18e)+(window[_0xebaea0(0x184)]-0xe6)+','+(window[_0xebaea0(0x184)]-0xe6)*0x9/0xa)):localStorage[_0xebaea0(0x1b3)]('screenSize','0,0,'+(window[_0xebaea0(0x184)]-0x96)+','+(window[_0xebaea0(0x184)]-0x96)*0x2/0x3),_0x2b7299[_0xebaea0(0x179)](_0x289b40)?(await Module[_0xebaea0(0x19c)](_0xebaea0(0x192)+_0x2b0c6a),confirm(_0xebaea0(0x15c))&&(await delay(0x64),await Module[_0xebaea0(0x175)](0x0),await shaderData())):(await Module[_0xebaea0(0x19c)](_0xebaea0(0x192)+_0x2b0c6a),await shaderData()),await statusShow();}export async function saveState(_0x179a28){await Module['saveState'](_0x179a28);}export async function loadState(_0xc02c90){const _0xf82f4a=a0_0xc17222;await Module[_0xf82f4a(0x175)](_0xc02c90);}export async function downloadFile(_0x28eab6,_0x291bbf){const _0x2f3803=a0_0xc17222,_0x52711a=Module[_0x2f3803(0x169)](_0x28eab6),_0x4851bd=document['createElement']('a');document[_0x2f3803(0x171)][_0x2f3803(0x149)](_0x4851bd),_0x4851bd[_0x2f3803(0x18a)]=_0x291bbf;const _0x26119d=new Blob([_0x52711a],{'type':_0x2f3803(0x1ab)});_0x4851bd['href']=URL['createObjectURL'](_0x26119d),_0x4851bd[_0x2f3803(0x14f)](),URL[_0x2f3803(0x1ae)](_0x26119d),_0x4851bd[_0x2f3803(0x161)]();}export function downloadFileInCloud(_0x250d3d){const _0x33b7d9=a0_0xc17222;try{const _0x47b1e4=Module[_0x33b7d9(0x169)](_0x250d3d);return _0x47b1e4;}catch(_0x5ad11c){return null;}}export async function uploadFileInCloud(_0x2dde43){Module['uploadAll'](_0x2dde43,async()=>{const _0xe6ec05=a0_0x3e51;localStorageFile(),await Module[_0xe6ec05(0x19b)]();});}export async function uploadFile(_0x27d3f8){const _0x215059=a0_0xc17222,_0x4411e1=_0x27d3f8[_0x215059(0x1b9)][0x0];Module[_0x215059(0x174)](_0x4411e1,async()=>{localStorageFile(),await Module['FSSync']();});}export async function editFile(_0x446b23,_0x3ea172,_0x4bcd83){const _0xdf30a7=a0_0xc17222;await Module[_0xdf30a7(0x14a)](_0x446b23,_0x3ea172,_0x4bcd83);}export async function deleteFile(_0x4f2810){const _0x5b643d=a0_0xc17222;try{return await Module[_0x5b643d(0x153)](_0x4f2810),!![];}catch(_0x3989c0){return console[_0x5b643d(0x1c5)](_0x4f2810),null;}}export function listFiles(_0x4f136a){const _0x43f9a3=a0_0xc17222,_0x1ab9b8=Module[_0x43f9a3(0x150)](_0x4f136a)[_0x43f9a3(0x143)](_0x283bbd=>_0x283bbd!=='.'&&_0x283bbd!=='..');return _0x1ab9b8;}export function listGame(){const _0x259b3a=a0_0xc17222,_0x4a4eb1=Module[_0x259b3a(0x14d)]()[_0x259b3a(0x143)](_0x279380=>_0x279380!=='.'&&_0x279380!=='..');return _0x4a4eb1;}export function listSave(){const _0x21be7d=a0_0xc17222,_0x110bd2=Module[_0x21be7d(0x154)]()['filter'](_0x493762=>_0x493762!=='.'&&_0x493762!=='..');return _0x110bd2;}export function listState(){const _0x4b1ab2=a0_0xc17222,_0x10ad68=Module[_0x4b1ab2(0x163)]()[_0x4b1ab2(0x143)](_0x2419f2=>_0x2419f2!=='.'&&_0x2419f2!=='..');return _0x10ad68;}export function listCheat(){const _0x24a1f6=Module['listCheats']()['filter'](_0x2daaeb=>_0x2daaeb!=='.'&&_0x2daaeb!=='..');return _0x24a1f6;}export function listScreenshot(){const _0x32556e=a0_0xc17222,_0x337fad=Module[_0x32556e(0x1b8)]()[_0x32556e(0x143)](_0x388e74=>_0x388e74!=='.'&&_0x388e74!=='..');return _0x337fad;}export function fileSize(_0x5b84b7){const _0x27ade5=a0_0xc17222,_0x3a9567=Module[_0x27ade5(0x1b7)](_0x5b84b7);return _0x3a9567;}export async function resumeGame(){const _0x252588=a0_0xc17222;Module[_0x252588(0x170)](),Module[_0x252588(0x151)](),notiMessage(_0x252588(0x1a2),0x7d0);}export async function pauseGame(){const _0x313906=a0_0xc17222;Module[_0x313906(0x1be)](),Module['SDL2'](),notiMessage(_0x313906(0x177),0x7d0);}export async function buttonPress(_0x1dc252){const _0x100f72=a0_0xc17222;Module[_0x100f72(0x190)](_0x1dc252);}export async function buttonUnpress(_0x503c27){const _0x49c64f=a0_0xc17222;Module[_0x49c64f(0x145)](_0x503c27);}export async function screenShot(_0x21271f){const _0x2f0d8e=a0_0xc17222,_0x48ee6f=gameName[_0x2f0d8e(0x1af)](/\.(gba|gbc|gb|zip)$/,'_'+_0x21271f+_0x2f0d8e(0x155)),_0x55a8f3=await getData(gameName,_0x21271f,'All')||'';console[_0x2f0d8e(0x160)](_0x55a8f3),await Module['screenshot'](_0x48ee6f),await setData(gameName,_0x21271f,_0x2f0d8e(0x165),formatDateTime(Date[_0x2f0d8e(0x144)]()),_0x55a8f3);}export async function dowloadScreenShot(_0x258faf){const _0xf80e30=a0_0xc17222;try{const _0x52c60c=await fileToBase64(Module[_0xf80e30(0x169)](_0x258faf));return _0x52c60c;}catch{}}export async function captureOCR(_0x3cb3cb){const _0x14e935=a0_0xc17222;Module[_0x14e935(0x157)](_0x3cb3cb);const _0x5f2155=Module[_0x14e935(0x169)](_0x14e935(0x1bf)+_0x3cb3cb);return _0x5f2155;}export async function setFastForwardMultiplier(_0x282e77){const _0x19b3c2=a0_0xc17222;Module[_0x19b3c2(0x16c)](_0x282e77);}export async function uploadCheats(_0x117bc7){const _0x2d9bb3=a0_0xc17222;Module[_0x2d9bb3(0x15d)](),Module[_0x2d9bb3(0x174)](_0x117bc7,async()=>{});}export function setVolume(_0x15340b){const _0x1bb43f=a0_0xc17222;Module[_0x1bb43f(0x199)](_0x15340b);}export async function setData(_0x47515b,_0x6679b6,_0x162e50,_0x2d6d8d,_0x50dfb5=''){const _0x4b00fd=a0_0xc17222,_0xbe0600=_0x47515b[_0x4b00fd(0x1af)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x511777=_0x4b00fd(0x1bf)+_0xbe0600+'_'+_0x6679b6+_0x4b00fd(0x155);let _0x272d45;try{_0x272d45=await fileToBase64(Module[_0x4b00fd(0x169)](_0x511777));}catch(_0x296e19){await Module[_0x4b00fd(0x157)](_0xbe0600+'_'+_0x6679b6+'.png'),await delay(0xc8),_0x272d45=await fileToBase64(Module['downloadFile'](_0x511777));}let _0x33d942=atob(_0x272d45[_0x4b00fd(0x1a1)](',')[0x1]),_0x4fa2ce=_0x4b00fd(0x185),_0x3f4c41=_0x33d942[_0x4b00fd(0x15f)](_0x4fa2ce),_0x1a4048={};if(_0x3f4c41!==-0x1||_0x50dfb5[_0x4b00fd(0x14b)]()!==''){let _0x4fdad0=_0x3f4c41!==-0x1?_0x33d942[_0x4b00fd(0x1a3)](_0x3f4c41+_0x4fa2ce['length']):_0x50dfb5,_0x4c9608=/(\w+)\s*:\s*([^|]*)/g,_0x31159f;while((_0x31159f=_0x4c9608[_0x4b00fd(0x146)](_0x4fdad0))!==null){_0x1a4048[_0x31159f[0x1][_0x4b00fd(0x14b)]()]=_0x31159f[0x2][_0x4b00fd(0x14b)]();}_0x3f4c41!==-0x1&&(_0x33d942=_0x33d942[_0x4b00fd(0x1a3)](0x0,_0x3f4c41));}_0x1a4048[_0x162e50]=_0x2d6d8d;let _0x3a2bcc=Object['entries'](_0x1a4048)[_0x4b00fd(0x1aa)](([_0x2ca69a,_0xfbaf41])=>_0x2ca69a+_0x4b00fd(0x186)+_0xfbaf41)[_0x4b00fd(0x19e)]('\x20|\x20'),_0x4216e2=new TextEncoder()[_0x4b00fd(0x194)](_0x4fa2ce+'\x20'+_0x3a2bcc),_0x423321=new Uint8Array([..._0x33d942]['map'](_0x37b31d=>_0x37b31d[_0x4b00fd(0x18b)](0x0))[_0x4b00fd(0x19f)]([..._0x4216e2])),_0x3428c4=new File([new Blob([_0x423321],{'type':_0x4b00fd(0x148)})],_0xbe0600+'_'+_0x6679b6+_0x4b00fd(0x155),{'type':_0x4b00fd(0x148)});Module['uploadAll'](_0x3428c4,async()=>{});}function a0_0x4964(){const _0x164a4f=['log','remove','endsWith','listStates','disable','saveTime','5243190nBRBjq','getItem','classList','downloadFile','#E0C068','All','setFastForwardMultiplier','slotStateSaved','persisted','1.1.0','resumeGame','body','turboState','toggleRewind','uploadAll','loadState','1222132tSYWdj','Paused!','7244436dRBPGY','includes','turboF','keys','.ss0','padStart','hidden','visible','screenSize','pagehide','#20A5A6','control-setting','innerWidth','tEXtComment\x00','\x20:\x20','7FeHNrA','textContent','bottom','download','charCodeAt','led03','timer','0,0,','led07','buttonPress','style','/data/games/','2186378wJoJXz','encode','led06','add','fill','led00','setVolume','uploadRom','FSSync','loadGame','9129904FLvcSM','join','concat','.gbc','split','Resumed!','substring','opacity','onLine','state','.gb','99ueWgfK','rgba(245,\x20232,\x20209,\x200.4)','map','application/octet-stream','\x20time(s)','getElementById','revokeObjectURL','replace','match','led04','addEventListener','setItem','noti-mess','860006NziLPn','gbc1','fileSize','listScreenshots','files','2284570iNMoXW','Auto\x20save\x20','toString','contains','pauseGame','/data/screenshots/','type','Wasm_©','3zebPEk','led05','led02','error','filter','now','buttonUnpress','exec','saveState','image/png','appendChild','editFileName','trim','Error\x20ledSave:','listRoms','GBAver','click','listFiles','SDL2','gbc','deleteFile','listSaves','.png','led0','screenshot','FSInit','uId','length','0.4','Do\x20you\x20want\x20to\x20load\x20save\x20state?','autoLoadCheats','led01','indexOf'];a0_0x4964=function(){return _0x164a4f;};return a0_0x4964();}export async function getData(_0x4f9cb3,_0x434fbf,_0x24ba32){const _0x4c3078=a0_0xc17222;try{const _0x3701a8=_0x4f9cb3['replace'](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x5cbb82='/data/screenshots/'+_0x3701a8+'_'+_0x434fbf+_0x4c3078(0x155);let _0x4c8859;try{_0x4c8859=await fileToBase64(Module[_0x4c3078(0x169)](_0x5cbb82));}catch(_0x51e460){return null;}let _0x5230c8=atob(_0x4c8859[_0x4c3078(0x1a1)](',')[0x1]),_0x4fe388=_0x4c3078(0x185),_0x3dd915=_0x5230c8['indexOf'](_0x4fe388);if(_0x3dd915!==-0x1){let _0x1b8a8e=_0x5230c8[_0x4c3078(0x1a3)](_0x3dd915+_0x4fe388[_0x4c3078(0x15a)]);if(_0x24ba32===_0x4c3078(0x16b))return _0x1b8a8e[_0x4c3078(0x14b)]();let _0x2c6274=new RegExp(_0x24ba32+'\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)'),_0x585296=_0x1b8a8e[_0x4c3078(0x1b0)](_0x2c6274);if(_0x585296)return _0x585296[0x1][_0x4c3078(0x14b)]();}}catch(_0x194662){return console[_0x4c3078(0x1c5)]({'romName':_0x4f9cb3,'slot':_0x434fbf,'type':_0x24ba32}),null;}}export async function ledSave(_0x20c263){const _0x149278=a0_0xc17222,_0x22403b=parseInt(await getData(gameName,'0',_0x149278(0x16d))),_0x5af24e=_0x22403b===0x1?_0x149278(0x15e):_0x22403b===0x2?_0x149278(0x1c4):_0x22403b===0x3?_0x149278(0x18c):_0x22403b===0x4?_0x149278(0x1b1):_0x22403b===0x5?_0x149278(0x1c3):_0x22403b===0x6?_0x149278(0x195):_0x22403b===0x7?_0x149278(0x18f):_0x149278(0x198);try{for(let _0x327994=0x0;_0x327994<=0x7;_0x327994++){document[_0x149278(0x1ad)](_0x149278(0x156)+_0x327994)[_0x149278(0x191)][_0x149278(0x197)]='rgba(245,\x20232,\x20209,\x200.4)';}await delay(0x3e8);for(let _0xf00eb3=0x0;_0xf00eb3<=0x7;_0xf00eb3++){document[_0x149278(0x1ad)](_0x149278(0x156)+_0xf00eb3)[_0x149278(0x191)]['fill']=_0x149278(0x1a9);}document[_0x149278(0x1ad)](_0x5af24e)[_0x149278(0x191)][_0x149278(0x197)]=_0x20c263;}catch(_0xe907a1){console[_0x149278(0x1c5)](_0x149278(0x14c),_0xe907a1);}};export async function notiMessage(_0x1dd081,_0x22e065,_0x4d4681=![]){const _0x1b5c5f=a0_0xc17222;var _0x207a2d=document['getElementById'](_0x1b5c5f(0x1b4));const _0xd37614=parseInt(await getData(gameName,'0',_0x1b5c5f(0x16d)))||0x0;_0x207a2d[_0x1b5c5f(0x191)][_0x1b5c5f(0x1a4)]===_0x1b5c5f(0x15b)&&(clearTimeout(messageTimeout),_0x207a2d[_0x1b5c5f(0x191)][_0x1b5c5f(0x1a4)]='0'),_0x207a2d[_0x1b5c5f(0x188)]=_0x1dd081,_0x207a2d[_0x1b5c5f(0x191)][_0x1b5c5f(0x1a4)]=_0x1b5c5f(0x15b),messageTimeout=setTimeout(()=>{const _0x4ba427=_0x1b5c5f;_0x207a2d[_0x4ba427(0x188)]='['+_0xd37614+']\x20'+gameName[_0x4ba427(0x1a3)](0x0,gameName['lastIndexOf']('.')),_0x207a2d[_0x4ba427(0x191)][_0x4ba427(0x1a4)]='0.4';},_0x22e065),_0x4d4681&&(canvas[_0x1b5c5f(0x168)][_0x1b5c5f(0x196)](_0x1b5c5f(0x17f)),setTimeout(()=>{const _0x2ca9d5=_0x1b5c5f;canvas[_0x2ca9d5(0x168)][_0x2ca9d5(0x161)](_0x2ca9d5(0x17f));},0x258));}export async function FSSync(){Module['FSSync']();}export const rewind=_0x586510=>Module[a0_0xc17222(0x173)]?.(_0x586510)||null;