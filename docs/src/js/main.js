const a0_0x27fb67=a0_0x56a6;(function(_0x9953aa,_0x2c7d72){const _0x560ac1=a0_0x56a6,_0x1e8715=_0x9953aa();while(!![]){try{const _0x2d69b6=parseInt(_0x560ac1(0x1bc))/0x1*(-parseInt(_0x560ac1(0x1fb))/0x2)+-parseInt(_0x560ac1(0x1f2))/0x3*(-parseInt(_0x560ac1(0x1b6))/0x4)+-parseInt(_0x560ac1(0x1ff))/0x5*(-parseInt(_0x560ac1(0x1b0))/0x6)+parseInt(_0x560ac1(0x1ad))/0x7*(-parseInt(_0x560ac1(0x1da))/0x8)+parseInt(_0x560ac1(0x1c2))/0x9+-parseInt(_0x560ac1(0x1dd))/0xa+parseInt(_0x560ac1(0x1b3))/0xb*(-parseInt(_0x560ac1(0x1d9))/0xc);if(_0x2d69b6===_0x2c7d72)break;else _0x1e8715['push'](_0x1e8715['shift']());}catch(_0x51c5a3){_0x1e8715['push'](_0x1e8715['shift']());}}}(a0_0x25df,0x5a28f));import a0_0x27bf56 from'../core/mgba.js';import*as a0_0x4c4cf1 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';const Module={'canvas':document['getElementById'](a0_0x27fb67(0x1b2))};function initializeCore(_0x41191b,_0x2fb8a6){const _0x2d7ca9=a0_0x27fb67;_0x41191b(_0x2fb8a6)[_0x2d7ca9(0x1a0)](function(_0x4711fb){_0x4711fb['FSInit']();});}initializeCore(a0_0x27bf56,Module);let countAutoSave=0x0,turboState=0x1,countUpload=0x0;const canvas=document[a0_0x27fb67(0x1fd)](a0_0x27fb67(0x1b2)),savedTurboState=localStorage[a0_0x27fb67(0x1e0)]('turboState'),controlSetting=document['getElementById'](a0_0x27fb67(0x1f9));function handleVisibilityChange(_0x4d64e0){const _0x1b847a=a0_0x27fb67;document['visibilityState']===_0x1b847a(0x1ec)||_0x4d64e0?.['type']===_0x1b847a(0x1be)||_0x4d64e0?.[_0x1b847a(0x1e9)]?(pauseGame(),canvas['classList'][_0x1b847a(0x1f1)](_0x1b847a(0x1c0))):(setTimeout(()=>{const _0x3b173d=_0x1b847a;canvas[_0x3b173d(0x1c1)][_0x3b173d(0x1c4)](_0x3b173d(0x1c0));},0x258),controlSetting[_0x1b847a(0x1c1)][_0x1b847a(0x1a8)](_0x1b847a(0x1c0))&&resumeGame());}async function statusShow(){const _0x232abd=a0_0x27fb67;document[_0x232abd(0x1f6)](_0x232abd(0x1fc),handleVisibilityChange),document[_0x232abd(0x1f6)](_0x232abd(0x1fa),handleVisibilityChange),window[_0x232abd(0x1f6)]('beforeunload',handleVisibilityChange),restoreArea(),startTimer(),savedTurboState!==null&&(turboState=parseInt(savedTurboState),await a0_0x4c4cf1['turboF'](turboState)),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(localStorage[_0x232abd(0x1e0)](_0x232abd(0x1fe)))),await notiMessage(gameVer,0x3e8);}async function saveStatePeriodically(){const _0x53ec40=a0_0x27fb67;await ledSave(_0x53ec40(0x1e3)),await Module[_0x53ec40(0x1af)](0x0),await Module[_0x53ec40(0x1e5)](),await screenShot(0x0),console[_0x53ec40(0x1f4)](_0x53ec40(0x1f3)+ ++countAutoSave+_0x53ec40(0x19a));}async function saveStateInCloud(){const _0x159f03=a0_0x27fb67,_0x5eca68=localStorage['getItem'](_0x159f03(0x19f)),_0x23e04e=_0x5eca68['replace'](/\.(zip|gb|gbc|gba)$/,_0x159f03(0x1db)),_0x198bea=localStorage[_0x159f03(0x1e0)](_0x159f03(0x1b5));navigator[_0x159f03(0x1f5)]&&(_0x198bea&&(await ledSave(_0x159f03(0x1f8)),await delay(0x3e8),await dpUploadFile(_0x23e04e,Module[_0x159f03(0x1c6)]('/data/states/'+_0x23e04e),'state'),await lockNoti('',_0x159f03(0x1ef)+ ++countUpload+_0x159f03(0x19a),0x7d0)));}function startTimer(){let [_0x119d6a,_0x5f0dd4,_0x28628b,_0x5b3a42,_0x1dfd2d]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x26ccf3=a0_0x56a6;_0x28628b++,_0x5b3a42++,_0x1dfd2d++;if(_0x28628b===0x3c)[_0x28628b,_0x5f0dd4]=[0x0,_0x5f0dd4+0x1];if(_0x5f0dd4===0x3c)[_0x5f0dd4,_0x119d6a]=[0x0,_0x119d6a+0x1];document[_0x26ccf3(0x1fd)]('timer')[_0x26ccf3(0x1b8)]=_0x119d6a+'h'+_0x5f0dd4[_0x26ccf3(0x1d3)]()[_0x26ccf3(0x1e4)](0x2,'0')+'.'+_0x28628b['toString']()[_0x26ccf3(0x1e4)](0x2,'0');_0x5b3a42===0x3c&&(saveStatePeriodically(),_0x5b3a42=0x0);;_0x1dfd2d===0x708&&(saveStateInCloud(),_0x1dfd2d=0x0);;},0x3e8);}export async function uploadGame(_0x150ec7){const _0x2c2295=a0_0x27fb67,_0x2376af=_0x150ec7[_0x2c2295(0x1bf)][0x0];Module[_0x2c2295(0x1dc)](_0x2376af,()=>{const _0x2bb2f3=_0x2c2295;Module[_0x2bb2f3(0x1e5)]();});}export async function loadGame(_0x13670e){const _0x110c3c=a0_0x27fb67,_0xdfda21=_0x13670e['replace'](/\.(gba|gbc|gb|zip)$/,_0x110c3c(0x1db)),_0x1f1eb1=Module[_0x110c3c(0x1a9)]()[_0x110c3c(0x1d1)](_0x549151=>_0x549151!=='.'&&_0x549151!=='..');intro[_0x110c3c(0x1c1)]['add'](_0x110c3c(0x1c5)),errorLogElements[0x0][_0x110c3c(0x19c)][_0x110c3c(0x1bb)]='0',ingame[_0x110c3c(0x1c1)]['remove'](_0x110c3c(0x1c5)),_0x13670e[_0x110c3c(0x1ca)]('.gbc')||_0x13670e[_0x110c3c(0x1ca)]('.gb')?(canvas['classList'][_0x110c3c(0x1f1)](_0x110c3c(0x1d0)),areaTrans[_0x110c3c(0x1c1)]['add'](_0x110c3c(0x1a7)),localStorage['setItem'](_0x110c3c(0x1ee),_0x110c3c(0x1c8)+(window[_0x110c3c(0x1ce)]-0xe6)+','+(window[_0x110c3c(0x1ce)]-0xe6)*0x9/0xa)):localStorage[_0x110c3c(0x19d)](_0x110c3c(0x1ee),_0x110c3c(0x1c8)+(window[_0x110c3c(0x1ce)]-0x96)+','+(window[_0x110c3c(0x1ce)]-0x96)*0x2/0x3),_0x1f1eb1[_0x110c3c(0x1c3)](_0xdfda21)?(await Module[_0x110c3c(0x1a3)](_0x110c3c(0x1f7)+_0x13670e),confirm(_0x110c3c(0x1cb))&&(await Module[_0x110c3c(0x1e2)](0x0),localStorage[_0x110c3c(0x19d)](_0x110c3c(0x19f),_0x13670e),console['log'](_0x13670e))):(await Module[_0x110c3c(0x1a3)]('/data/games/'+_0x13670e),localStorage[_0x110c3c(0x19d)](_0x110c3c(0x19f),_0x13670e),console[_0x110c3c(0x1f4)](_0x13670e)),await statusShow();}function a0_0x25df(){const _0x4a6b7e=['canvas','11MDAUAd','editFileName','uId','358024sclcvR','revokeObjectURL','textContent','body','_savedCheats','bottom','512917ZGiBQh','deleteFile','beforeunload','files','visible','classList','4337766AFOURR','includes','remove','disable','downloadFile','encode','0,0,','setFastForwardMultiplier','endsWith','Do\x20you\x20want\x20to\x20load\x20save\x20state?','Resumed!','.png','innerWidth','pauseGame','gbc','filter','split','toString','createElement','createObjectURL','appendChild','indexOf','/data/screenshots/','1286448RngzUA','2056fzKpQT','.ss0','uploadRom','525770johbBo','length','buttonUnpress','getItem','set','loadState','#20A5A6','padStart','FSSync','image/png','application/octet-stream','listRoms','persisted','Cheat\x20Enabled!','Paused!','hidden','uploadAll','screenSize','Cloud\x20upload\x20','fileSize','add','12YgvWCQ','Auto\x20save\x20','log','onLine','addEventListener','/data/games/','#E0C068','control-setting','visibilitychange','2wEOmJu','pagehide','getElementById','slotStateSaved','427575BXXQJU','href','\x20time(s)','substring','style','setItem','tEXtComment\x00','gameName','then','screenshot','click','loadGame','replace','download','autoLoadCheats','gbc1','contains','listStates','now','SDL2','resumeGame','3815iKYTAw','listSaves','saveState','24RbNMXe','setVolume'];a0_0x25df=function(){return _0x4a6b7e;};return a0_0x25df();}export async function saveState(_0x1bb122){const _0xd48ab9=a0_0x27fb67;await Module[_0xd48ab9(0x1af)](_0x1bb122),await Module[_0xd48ab9(0x1e5)]();}function a0_0x56a6(_0x17b8c4,_0x5c1489){const _0x25dfcf=a0_0x25df();return a0_0x56a6=function(_0x56a62a,_0x24f7d9){_0x56a62a=_0x56a62a-0x199;let _0x44db69=_0x25dfcf[_0x56a62a];return _0x44db69;},a0_0x56a6(_0x17b8c4,_0x5c1489);}export async function loadState(_0x160f51){await Module['loadState'](_0x160f51);}export async function downloadFile(_0x29cd10,_0x29e798){const _0x59850a=a0_0x27fb67,_0x1cc6a6=Module[_0x59850a(0x1c6)](_0x29cd10),_0x5241ee=document[_0x59850a(0x1d4)]('a');document[_0x59850a(0x1b9)][_0x59850a(0x1d6)](_0x5241ee),_0x5241ee[_0x59850a(0x1a5)]=_0x29e798;const _0x216f4e=new Blob([_0x1cc6a6],{'type':_0x59850a(0x1e7)});_0x5241ee[_0x59850a(0x199)]=URL[_0x59850a(0x1d5)](_0x216f4e),_0x5241ee[_0x59850a(0x1a2)](),URL[_0x59850a(0x1b7)](_0x216f4e),_0x5241ee[_0x59850a(0x1c4)]();}export function downloadFileInCloud(_0x2052d6){const _0x56befe=a0_0x27fb67,_0x60548d=Module[_0x56befe(0x1c6)](_0x2052d6);return _0x60548d;}export async function uploadFileInCloud(_0xc1769){Module['uploadAll'](_0xc1769,()=>{const _0x2615be=a0_0x56a6;localStorageFile(),Module[_0x2615be(0x1e5)]();});}export async function uploadFile(_0x516a8a){const _0x20095a=a0_0x27fb67,_0x6130fa=_0x516a8a[_0x20095a(0x1bf)][0x0];Module[_0x20095a(0x1ed)](_0x6130fa,()=>{const _0x49f7d0=_0x20095a;localStorageFile(),Module[_0x49f7d0(0x1e5)]();});}export async function editFile(_0x2d409c,_0x7eee3f,_0x585faf){const _0x2b9175=a0_0x27fb67;await Module[_0x2b9175(0x1b4)](_0x2d409c,_0x7eee3f,_0x585faf),await Module[_0x2b9175(0x1e5)]();}export async function deleteFile(_0x357f75){const _0x235e0d=a0_0x27fb67;await Module[_0x235e0d(0x1bd)](_0x357f75),await Module['FSSync']();}export function listGame(){const _0x415221=a0_0x27fb67,_0x15eaac=Module[_0x415221(0x1e8)]()[_0x415221(0x1d1)](_0x2a335f=>_0x2a335f!=='.'&&_0x2a335f!=='..');return _0x15eaac;}export function listSave(){const _0x41b23b=a0_0x27fb67,_0x2fa640=Module[_0x41b23b(0x1ae)]()[_0x41b23b(0x1d1)](_0x54d744=>_0x54d744!=='.'&&_0x54d744!=='..');return _0x2fa640;}export function listState(){const _0x531fc6=a0_0x27fb67,_0x246dff=Module[_0x531fc6(0x1a9)]()[_0x531fc6(0x1d1)](_0x4b9eae=>_0x4b9eae!=='.'&&_0x4b9eae!=='..');return _0x246dff;}export function listCheat(){const _0x591cc7=a0_0x27fb67,_0x2aa982=Module['listCheats']()[_0x591cc7(0x1d1)](_0x43fdcf=>_0x43fdcf!=='.'&&_0x43fdcf!=='..');return _0x2aa982;}export function listScreenshot(){const _0x3cdecd=Module['listScreenshots']()['filter'](_0x11d21e=>_0x11d21e!=='.'&&_0x11d21e!=='..');return _0x3cdecd;}export function embedTextInPngFile(_0xea609d,_0x3e4e04,_0x27067b){const _0x324144=a0_0x27fb67;let _0x328f74=atob(_0xea609d['split'](',')[0x1]),_0x5653db=new Uint8Array(_0x328f74['length']);for(let _0x373c6c=0x0;_0x373c6c<_0x328f74[_0x324144(0x1de)];_0x373c6c++){_0x5653db[_0x373c6c]=_0x328f74['charCodeAt'](_0x373c6c);}let _0xc37f84=new TextEncoder()[_0x324144(0x1c7)](_0x324144(0x19e)+_0x3e4e04),_0x22dcd2=new Uint8Array(_0x5653db[_0x324144(0x1de)]+_0xc37f84[_0x324144(0x1de)]);_0x22dcd2['set'](_0x5653db,0x0),_0x22dcd2[_0x324144(0x1e1)](_0xc37f84,_0x5653db[_0x324144(0x1de)]);let _0x3a9525=new Blob([_0x22dcd2],{'type':'image/png'}),_0x327dec=new File([_0x3a9525],_0x27067b,{'type':_0x324144(0x1e6)});return _0x327dec;}export function extractTextFromPngBase64(_0x5531e8){const _0x46b158=a0_0x27fb67;let _0x3112a4=atob(_0x5531e8[_0x46b158(0x1d2)](',')[0x1]),_0x545a80='tEXtComment\x00',_0x199e3f=_0x3112a4[_0x46b158(0x1d7)](_0x545a80);if(_0x199e3f!==-0x1)return _0x3112a4[_0x46b158(0x19b)](_0x199e3f+_0x545a80['length']);return null;}export function fileSize(_0x24933d){const _0x3d63b5=a0_0x27fb67,_0x3df55f=Module[_0x3d63b5(0x1f0)](_0x24933d);return _0x3df55f;}export async function resumeGame(){const _0x383f2=a0_0x27fb67;Module[_0x383f2(0x1ac)](),Module[_0x383f2(0x1ab)](),notiMessage(_0x383f2(0x1cc),0x7d0);}export async function pauseGame(){const _0x40844b=a0_0x27fb67;Module[_0x40844b(0x1cf)](),Module['SDL2'](),notiMessage(_0x40844b(0x1eb),0x7d0);}export async function buttonPress(_0xfa4ec2){Module['buttonPress'](_0xfa4ec2);}export async function buttonUnpress(_0x28b21a){const _0x592a27=a0_0x27fb67;Module[_0x592a27(0x1df)](_0x28b21a);}export async function screenShot(_0x201e3f){const _0x220c41=a0_0x27fb67,_0x3e039b=localStorage[_0x220c41(0x1e0)](_0x220c41(0x19f))[_0x220c41(0x1a4)](/\.(gba|gbc|gb|zip)$/,''),_0x449aca=_0x3e039b+'_'+_0x201e3f+_0x220c41(0x1cd);await Module['screenshot'](_0x449aca),await Module[_0x220c41(0x1e5)]();const _0x424f6d=await fileToBase64(Module[_0x220c41(0x1c6)](_0x220c41(0x1d8)+_0x449aca)),_0x3e698a=embedTextInPngFile(_0x424f6d,formatDateTime(Date[_0x220c41(0x1aa)]()),_0x449aca);Module[_0x220c41(0x1ed)](_0x3e698a,()=>{const _0x30d789=_0x220c41;localStorageFile(),Module[_0x30d789(0x1e5)]();});}export async function dowloadScreenShot(_0x768628){const _0x3d2cad=a0_0x27fb67;try{const _0x16b316=await fileToBase64(Module[_0x3d2cad(0x1c6)](_0x768628));return _0x16b316;}catch{}}export async function captureOCR(_0x25db99){const _0x2040c7=a0_0x27fb67;Module[_0x2040c7(0x1a1)](_0x25db99);const _0x7a2da=Module[_0x2040c7(0x1c6)]('/data/screenshots/'+_0x25db99);return _0x7a2da;}export async function setFastForwardMultiplier(_0x51d9f9){const _0x7a695=a0_0x27fb67;Module[_0x7a695(0x1c9)](_0x51d9f9);}export function uploadCheats(_0x15a6af,_0x3c7021,_0x28664a,_0x4c42e8,_0x25cd22){const _0xa150e=a0_0x27fb67;Module[_0xa150e(0x1ed)](_0x15a6af,()=>{const _0x282c95=_0xa150e;Module[_0x282c95(0x1a6)](),setTimeout(()=>{const _0x35a2f8=_0x282c95;Module[_0x35a2f8(0x1e5)]();},0x1f4),_0x4c42e8&&(localStorage[_0x282c95(0x19d)](_0x3c7021+_0x282c95(0x1ba),_0x28664a),notiMessage(_0x282c95(0x1ea),0x5dc)),_0x25cd22['textContent']=localStorage[_0x282c95(0x1e0)](_0x3c7021+_0x282c95(0x1ba)||'Off');});}export function setVolume(_0x14cd03){const _0x5ab7d1=a0_0x27fb67;Module[_0x5ab7d1(0x1b1)](_0x14cd03);}