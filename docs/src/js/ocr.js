const a0_0x3c9f87=a0_0xb845;(function(_0x56cfde,_0x15867d){const _0x1b21a6=a0_0xb845,_0x53fcb3=_0x56cfde();while(!![]){try{const _0x4d763b=-parseInt(_0x1b21a6(0x132))/0x1+parseInt(_0x1b21a6(0x13d))/0x2+parseInt(_0x1b21a6(0x11c))/0x3+parseInt(_0x1b21a6(0x123))/0x4+parseInt(_0x1b21a6(0x143))/0x5+-parseInt(_0x1b21a6(0x125))/0x6+parseInt(_0x1b21a6(0x10d))/0x7;if(_0x4d763b===_0x15867d)break;else _0x53fcb3['push'](_0x53fcb3['shift']());}catch(_0x36a1d2){_0x53fcb3['push'](_0x53fcb3['shift']());}}}(a0_0x4586,0xc638c));import*as a0_0x333321 from'./main.js';var scrollAmount=0x0,scrollSpeed=0.5,runCount=0x0;let isFunctionARunning=![];var maxRunCount=0x2;let clickTurbo=0x0,clickTimeout;const inputText=document['getElementById'](a0_0x3c9f87(0x11a)),turbo=document[a0_0x3c9f87(0x126)](a0_0x3c9f87(0x112)),ID=['A','B','R','L'];async function getImage(){const _0x44dfe6=a0_0x3c9f87;turbo[_0x44dfe6(0x101)]['add'](_0x44dfe6(0xfe));try{const _0x476ac1=gameName[_0x44dfe6(0x130)](/\.(gba|gbc|gb|zip)$/,'.png'),_0x34105b=await a0_0x333321['captureOCR'](_0x476ac1),_0x200890=new Blob([_0x34105b],{'type':'image/png'}),_0x2792fb=await new Promise((_0x331ebe,_0x4a75ca)=>{const _0x52ecf9=_0x44dfe6,_0x579054=new FileReader();_0x579054[_0x52ecf9(0x12f)]=()=>_0x331ebe(_0x579054['result']),_0x579054['onerror']=_0x4a75ca,_0x579054[_0x52ecf9(0x13e)](_0x200890);}),_0x45a46e=new Image();_0x45a46e['src']=_0x2792fb,_0x45a46e[_0x44dfe6(0x144)]=async()=>{const _0x3ac010=_0x44dfe6,_0x5722f4=document['createElement'](_0x3ac010(0x100)),_0x1e7077=_0x5722f4['getContext']('2d'),_0x2eb655=0x4;let _0x50fc25;gameName[_0x3ac010(0x133)](_0x3ac010(0x140))||gameName[_0x3ac010(0x133)](_0x3ac010(0x109))?_0x50fc25=0x3/0x6:_0x50fc25=0x3/0x4;const _0x11e293=localStorage[_0x3ac010(0x113)](gameName+'_setArea')||localStorage['getItem'](_0x3ac010(0x12c)),[_0x72d244,_0x2fbb69,_0x42a2ea,_0x12491a]=_0x11e293[_0x3ac010(0x116)](',')[_0x3ac010(0x131)](Number);_0x5722f4[_0x3ac010(0x138)]=_0x42a2ea*_0x50fc25*_0x2eb655,_0x5722f4['height']=_0x12491a*_0x50fc25*_0x2eb655,_0x1e7077['drawImage'](_0x45a46e,_0x72d244*_0x50fc25,_0x2fbb69*_0x50fc25,_0x42a2ea*_0x50fc25,_0x12491a*_0x50fc25,0x0,0x0,_0x42a2ea*_0x50fc25*_0x2eb655,_0x12491a*_0x50fc25*_0x2eb655);const _0x5e1d80=_0x5722f4[_0x3ac010(0x10e)](_0x3ac010(0x105))['split'](',')[0x1],_0x430049=localStorage[_0x3ac010(0x113)]('ApiAzure');console[_0x3ac010(0x111)](_0x430049),_0x430049?azureServer(_0x5e1d80):freeServer(_0x5e1d80);};}catch(_0x36a7b9){inputText['textContent']=_0x36a7b9[_0x44dfe6(0x145)];}clickTimeout&&clearTimeout(clickTimeout),clickTimeout=setTimeout(()=>{const _0x2b3490=_0x44dfe6;document['getElementById'](_0x2b3490(0x11a))['textContent']='',a0_0x333321['notiMessage']('',0x0);},0x7530);}async function freeServer(_0x3525a3){const _0x1f6edc=a0_0x3c9f87;document[_0x1f6edc(0x126)]('noti-mess')[_0x1f6edc(0x103)]='';let _0x5423f6=0x0;const _0x48f1c1=setInterval(()=>{const _0x1079b6=_0x1f6edc;_0x5423f6+=0x1,_0x5423f6<=0x64&&(inputText[_0x1079b6(0x103)]=_0x1079b6(0x119)+_0x5423f6+'%');},0x64);try{const _0x4fd7a5=dataURItoBlob(_0x3525a3),_0x5bbc69=new FormData();_0x5bbc69['append']('image',_0x4fd7a5,_0x1f6edc(0x12d)),_0x5bbc69['append'](_0x1f6edc(0xfc),_0x1f6edc(0xfd));let _0x3dd33e;try{_0x3dd33e=await fetch(_0x1f6edc(0x10b),{'method':_0x1f6edc(0xfb),'body':_0x5bbc69,'headers':{'Origin':window[_0x1f6edc(0x12b)][_0x1f6edc(0x124)],'X-Requested-With':_0x1f6edc(0x11e),'User-Agent':navigator[_0x1f6edc(0x12e)]}});if(!_0x3dd33e['ok'])throw new Error(_0x1f6edc(0x134)+_0x3dd33e['status']);}catch(_0x42641e){console[_0x1f6edc(0x13c)](_0x1f6edc(0x110)),window['location'][_0x1f6edc(0x13a)]=_0x1f6edc(0x108);return;}const _0xae0603=await _0x3dd33e[_0x1f6edc(0x129)]();if(_0xae0603[_0x1f6edc(0xff)]==='error')throw new Error(_0xae0603[_0x1f6edc(0x12a)][_0x1f6edc(0x145)]);transLogic(_0xae0603[_0x1f6edc(0x128)]);}catch(_0x17566c){inputText['textContent']=_0x17566c[_0x1f6edc(0x145)];}finally{clearInterval(_0x48f1c1),isFunctionARunning=![];}}async function azureServer(_0x428601){const _0x5dbc66=a0_0x3c9f87;document[_0x5dbc66(0x126)](_0x5dbc66(0x141))[_0x5dbc66(0x103)]='',inputText[_0x5dbc66(0x103)]=_0x5dbc66(0x119);const _0x41ef47=localStorage[_0x5dbc66(0x113)](_0x5dbc66(0x127));let [_0x5b09f2,_0x17ae86]=_0x41ef47[_0x5dbc66(0x116)](',');try{const _0x2d37c9=await fetch(_0x17ae86+_0x5dbc66(0x142),{'method':_0x5dbc66(0xfb),'headers':{'Ocp-Apim-Subscription-Key':_0x5b09f2,'Content-Type':'application/octet-stream'},'body':dataURItoBlob(_0x428601)}),_0x1e3028=await _0x2d37c9[_0x5dbc66(0x129)]();if(!_0x2d37c9['ok']||_0x1e3028[_0x5dbc66(0xff)]===_0x5dbc66(0x12a)){const _0x47b8a0=_0x2d37c9['ok']?_0x1e3028['error'][_0x5dbc66(0x145)]:_0x2d37c9[_0x5dbc66(0x118)]===0x1f4?_0x5dbc66(0x11d):(await _0x2d37c9[_0x5dbc66(0x129)]())[_0x5dbc66(0x12a)][_0x5dbc66(0x145)];throw new Error(_0x47b8a0);}const _0x1aa27a=_0x1e3028[_0x5dbc66(0x10c)][_0x5dbc66(0x136)][0x0],_0x4df915=_0x1aa27a[_0x5dbc66(0x13f)]||[],_0x4d0577=_0x4df915['map'](_0x3a9b92=>_0x3a9b92['text'])['join']('\x0a');transLogic(_0x4d0577);}catch(_0xc87250){inputText['textContent']=_0xc87250[_0x5dbc66(0x145)];}finally{isFunctionARunning=![];}}async function translateText(_0x3ee47d,_0xb21dcc,_0x176183){const _0xdd132a=a0_0x3c9f87,_0x19de17=_0x3ee47d['replace'](/[\r\n]+/g,',\x20')[_0xdd132a(0x130)](/([!?.,])\s*,\s*/g,'$1\x20')[_0xdd132a(0x130)](/[^\p{L}\p{N}\s.,;'"?!()]+/gu,'')[_0xdd132a(0x130)](/ {2,}/g,'\x20')[_0xdd132a(0x135)]();var _0x1cf7ce=_0xdd132a(0x102)+_0xb21dcc+_0xdd132a(0x106)+_0x176183+'&dt=t&q='+encodeURIComponent(_0x19de17);try{const _0x29dc01=await fetch(_0x1cf7ce);if(!_0x29dc01['ok']){if(_0x29dc01['status']===0x1f4)throw new Error('Internal\x20Server\x20Error');else{const _0x3b0e18=await _0x29dc01[_0xdd132a(0x129)](),_0x37fa44=new Error(_0x3b0e18[_0xdd132a(0x12a)][_0xdd132a(0x145)]);_0x37fa44['code']=_0x3b0e18[_0xdd132a(0x12a)][_0xdd132a(0x10f)];throw _0x37fa44;}}const _0x2467f0=await _0x29dc01[_0xdd132a(0x129)]();if(Array[_0xdd132a(0x115)](_0x2467f0)&&_0x2467f0[_0xdd132a(0x139)]>0x0&&Array['isArray'](_0x2467f0[0x0])){var _0x45565d=_0x2467f0[0x0][_0xdd132a(0x131)](_0x2389da=>_0x2389da[0x0])[_0xdd132a(0x11b)]('\x20');return document['getElementById'](_0xdd132a(0x141))[_0xdd132a(0x103)]='',inputText['textContent']='.._\x20'+_0x45565d[_0xdd132a(0x130)](/ {2,}/g,'\x20'),setTimeout(()=>{startAutoScroll();},0x7d0),_0x45565d['replace'](/ {2,}/g,'\x20');}else return document[_0xdd132a(0x126)](_0xdd132a(0x141))[_0xdd132a(0x103)]='',inputText['textContent']='.._\x20'+_0x2467f0,_0x2467f0;}catch(_0x42608a){inputText[_0xdd132a(0x103)]=_0x42608a[_0xdd132a(0x145)];throw _0x42608a;}}function a0_0x4586(){const _0x6d207c=['warn','297494WPwlkt','readAsDataURL','lines','.gbc','noti-mess','imageanalysis:analyze?features=caption,read&model-version=latest&api-version=2024-02-01','3201790fgXSrV','onload','message','POST','user','00c7b1f2-0d6b-4e7b-9b0b-0b6c00c7b1f2','turbo-ocr','type','canvas','classList','https://translate.googleapis.com/translate_a/single?client=gtx&sl=','textContent','visible','image/png','&tl=','toggle','https://cors-anywhere.herokuapp.com/corsdemo','.gb','clientWidth','https://cors-anywhere.herokuapp.com/http://158.160.66.115:40000/image_to_text','readResult','1985186VxsNSC','toDataURL','code','Cors-controlers\x20have\x20not\x20been\x20activated.','log','turbo','getItem','touchstart','isArray','split','DOMContentLoaded','status','.._\x20','inputText','join','2356188PvTKGF','500\x20Internal\x20Server\x20Error','XMLHttpRequest','forEach','remove','scrollLeft','Error\x20detecting\x20language:','1783360tguKhA','origin','6557256tYanFt','getElementById','ApiAzure','text','json','error','location','screenSize','image.png','userAgent','onloadend','replace','map','399147LDFndp','endsWith','HTTP\x20Error:\x20','trim','blocks','addEventListener','width','length','href','scrollWidth'];a0_0x4586=function(){return _0x6d207c;};return a0_0x4586();}async function autoScroll(){const _0x805e0d=a0_0x3c9f87;var _0x5621ce=inputText[_0x805e0d(0x13b)]-inputText[_0x805e0d(0x10a)];if(runCount>=maxRunCount)return;scrollAmount+=scrollSpeed,(scrollAmount>=_0x5621ce||scrollAmount<=0x0)&&(scrollSpeed=-scrollSpeed,runCount++),inputText[_0x805e0d(0x121)]=scrollAmount,requestAnimationFrame(autoScroll);}async function startAutoScroll(){scrollAmount=0x0,runCount=0x0,scrollSpeed=0.5,autoScroll();}async function detectLanguage(_0x14df32){const _0x12b1fc=a0_0x3c9f87;var _0x110732='https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&dt=ld&q='+encodeURIComponent(_0x14df32);try{const _0x1c036b=await fetch(_0x110732),_0x274367=await _0x1c036b[_0x12b1fc(0x129)]();var _0x1dfae=_0x274367[0x8][0x0][0x0];return _0x1dfae;}catch(_0x2dbd65){console[_0x12b1fc(0x12a)](_0x12b1fc(0x122),_0x2dbd65);throw _0x2dbd65;}}async function transLogic(_0x48eea3){const _0x5bd928='en';if(_0x5bd928===null){const _0x19f7d9=await detectLanguage(_0x48eea3),_0x35f7f2=await translateText(_0x48eea3,_0x19f7d9,'en');return translateText(_0x35f7f2,'en','vi');}else{if(_0x5bd928==='en')return translateText(_0x48eea3,'en','vi');else{const _0x26c09a=await translateText(_0x48eea3,_0x5bd928,'en');return translateText(_0x26c09a,'en','vi');}}}function dataURItoBlob(_0x29a977){const _0x4e8f64=a0_0x3c9f87,_0x253a4f=atob(_0x29a977),_0x4d383c=new ArrayBuffer(_0x253a4f[_0x4e8f64(0x139)]),_0x1d6d1b=new Uint8Array(_0x4d383c);for(let _0x394bec=0x0;_0x394bec<_0x253a4f['length'];_0x394bec++){_0x1d6d1b[_0x394bec]=_0x253a4f['charCodeAt'](_0x394bec);}return new Blob([_0x4d383c],{'type':'image/png'});}function a0_0xb845(_0x56ea6d,_0x4bd3ea){const _0x4586b3=a0_0x4586();return a0_0xb845=function(_0xb845ea,_0x311770){_0xb845ea=_0xb845ea-0xfb;let _0x2744c8=_0x4586b3[_0xb845ea];return _0x2744c8;},a0_0xb845(_0x56ea6d,_0x4bd3ea);}document[a0_0x3c9f87(0x137)](a0_0x3c9f87(0x117),function(){const _0x453788=a0_0x3c9f87;ID['forEach'](function(_0x584d84){const _0x398883=a0_0xb845,_0x35a9e4=document[_0x398883(0x126)](_0x584d84);_0x35a9e4&&_0x35a9e4[_0x398883(0x137)](_0x398883(0x114),function(){const _0x14a055=_0x398883;!isFunctionARunning&&turbo[_0x14a055(0x101)][_0x14a055(0x120)](_0x14a055(0xfe));});}),['touchend'][_0x453788(0x11f)](_0x25b65f=>{const _0x19a86c=_0x453788;turbo[_0x19a86c(0x137)](_0x25b65f,()=>{clickTurbo++,clearTimeout(clickTimeout),clickTimeout=setTimeout(()=>{clickTurbo===0x1&&(!isFunctionARunning&&(isFunctionARunning=!![],getImage())),clickTurbo=0x0;},0x12c);}),areaSet[_0x19a86c(0x137)](_0x25b65f,()=>{const _0x15d7d1=_0x19a86c;areaTrans['classList'][_0x15d7d1(0x107)](_0x15d7d1(0x104));});});});