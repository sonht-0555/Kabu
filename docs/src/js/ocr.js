const a0_0x2b3986=a0_0x4ade;function a0_0xa337(){const _0x1dcc06=['code','onload','readResult','href','replace','1264962NVxZzO','DOMContentLoaded','drawImage','image/png','20cdImIf','noti-mess','width','onerror','_setArea','toDataURL','text','append','https://cors-anywhere.herokuapp.com/http://158.160.66.115:40000/image_to_text','$1\x20','add','notiMessage','location','addEventListener','763qfYdeV','3434373jsHkds','HTTP\x20Error:\x20','1FmTUkn','src','charCodeAt','Internal\x20Server\x20Error','readAsDataURL','join','turbo','getElementById','https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&dt=ld&q=','error','user','getContext','397236XuJqTe','.png','Error\x20detecting\x20language:','json','17206490NLSZQV','inputText','clientWidth','log','&dt=t&q=','.._\x20','imageanalysis:analyze?features=caption,read&model-version=latest&api-version=2024-02-01','endsWith','image','blocks','lines','&tl=','turbo-ocr','29224NIDFvB','isArray','364678lDHYlE','scrollLeft','trim','canvas','POST','textContent','forEach','2609208AMUjBT','result','scrollWidth','toggle','XMLHttpRequest','split','map','.gb','00c7b1f2-0d6b-4e7b-9b0b-0b6c00c7b1f2','message','status','getItem','touchend','touchstart','type','application/octet-stream','length'];a0_0xa337=function(){return _0x1dcc06;};return a0_0xa337();}(function(_0x44bab1,_0x51f212){const _0x28d8ee=a0_0x4ade,_0x291b46=_0x44bab1();while(!![]){try{const _0xadda00=parseInt(_0x28d8ee(0x151))/0x1*(-parseInt(_0x28d8ee(0x11f))/0x2)+-parseInt(_0x28d8ee(0x13c))/0x3+parseInt(_0x28d8ee(0x15d))/0x4*(-parseInt(_0x28d8ee(0x140))/0x5)+-parseInt(_0x28d8ee(0x126))/0x6+parseInt(_0x28d8ee(0x14e))/0x7*(parseInt(_0x28d8ee(0x11d))/0x8)+-parseInt(_0x28d8ee(0x14f))/0x9+parseInt(_0x28d8ee(0x161))/0xa;if(_0xadda00===_0x51f212)break;else _0x291b46['push'](_0x291b46['shift']());}catch(_0x1839b8){_0x291b46['push'](_0x291b46['shift']());}}}(a0_0xa337,0x4984c));function a0_0x4ade(_0x14218e,_0x1e3ded){const _0xa337a7=a0_0xa337();return a0_0x4ade=function(_0x4aded7,_0x42156d){_0x4aded7=_0x4aded7-0x111;let _0x5c8686=_0xa337a7[_0x4aded7];return _0x5c8686;},a0_0x4ade(_0x14218e,_0x1e3ded);}import*as a0_0x4ec516 from'./main.js';var scrollAmount=0x0,scrollSpeed=0.5,runCount=0x0;let isFunctionARunning=![];var maxRunCount=0x2;let clickTurbo=0x0,clickTimeout;const inputText=document['getElementById'](a0_0x2b3986(0x111)),turbo=document[a0_0x2b3986(0x158)](a0_0x2b3986(0x157)),ID=['A','B','R','L'];async function getImage(){const _0x5d3eb3=a0_0x2b3986;turbo['classList'][_0x5d3eb3(0x14a)](_0x5d3eb3(0x11c));try{const _0x3b3ed9=gameName[_0x5d3eb3(0x13b)](/\.(gba|gbc|gb|zip)$/,_0x5d3eb3(0x15e)),_0x8677e2=await a0_0x4ec516['captureOCR'](_0x3b3ed9),_0x4cc86f=new Blob([_0x8677e2],{'type':'image/png'}),_0x416d5e=await new Promise((_0x1a1ad9,_0x1b9379)=>{const _0xe73035=_0x5d3eb3,_0x4c1958=new FileReader();_0x4c1958['onloadend']=()=>_0x1a1ad9(_0x4c1958[_0xe73035(0x127)]),_0x4c1958[_0xe73035(0x143)]=_0x1b9379,_0x4c1958[_0xe73035(0x155)](_0x4cc86f);}),_0x42e31d=new Image();_0x42e31d[_0x5d3eb3(0x152)]=_0x416d5e,_0x42e31d[_0x5d3eb3(0x138)]=async()=>{const _0x70eaec=_0x5d3eb3,_0x2f8374=document['createElement'](_0x70eaec(0x122)),_0x5ec14b=_0x2f8374[_0x70eaec(0x15c)]('2d'),_0x1949f8=0x4;let _0x265c3d;gameName[_0x70eaec(0x117)]('.gbc')||gameName[_0x70eaec(0x117)](_0x70eaec(0x12d))?_0x265c3d=0x3/0x6:_0x265c3d=0x3/0x4;const _0x4e692c=localStorage[_0x70eaec(0x131)](gameName+_0x70eaec(0x144))||localStorage['getItem']('screenSize'),[_0x2b83b6,_0x54d299,_0x5eacc6,_0x5111ca]=_0x4e692c[_0x70eaec(0x12b)](',')[_0x70eaec(0x12c)](Number);_0x2f8374[_0x70eaec(0x142)]=_0x5eacc6*_0x265c3d*_0x1949f8,_0x2f8374['height']=_0x5111ca*_0x265c3d*_0x1949f8,_0x5ec14b[_0x70eaec(0x13e)](_0x42e31d,_0x2b83b6*_0x265c3d,_0x54d299*_0x265c3d,_0x5eacc6*_0x265c3d,_0x5111ca*_0x265c3d,0x0,0x0,_0x5eacc6*_0x265c3d*_0x1949f8,_0x5111ca*_0x265c3d*_0x1949f8);const _0x2c5bbd=_0x2f8374[_0x70eaec(0x145)]('image/png')['split'](',')[0x1],_0x1a85c0=localStorage[_0x70eaec(0x131)]('ApiAzure');console[_0x70eaec(0x113)](_0x1a85c0),_0x1a85c0?azureServer(_0x2c5bbd):freeServer(_0x2c5bbd);};}catch(_0x42f00e){inputText[_0x5d3eb3(0x124)]=_0x42f00e[_0x5d3eb3(0x12f)];}clickTimeout&&clearTimeout(clickTimeout),clickTimeout=setTimeout(()=>{const _0x222bda=_0x5d3eb3;document[_0x222bda(0x158)](_0x222bda(0x111))[_0x222bda(0x124)]='',a0_0x4ec516[_0x222bda(0x14b)]('',0x0);},0x7530);}async function freeServer(_0x556e7e){const _0x20a4d7=a0_0x2b3986;document[_0x20a4d7(0x158)]('noti-mess')['textContent']='';let _0x5ce08c=0x0;const _0x5e93b4=setInterval(()=>{const _0x3db95a=_0x20a4d7;_0x5ce08c+=0x1,_0x5ce08c<=0x64&&(inputText[_0x3db95a(0x124)]=_0x3db95a(0x115)+_0x5ce08c+'%');},0x64);try{const _0x209d45=dataURItoBlob(_0x556e7e),_0x4b515f=new FormData();_0x4b515f['append'](_0x20a4d7(0x118),_0x209d45,'image.png'),_0x4b515f[_0x20a4d7(0x147)](_0x20a4d7(0x15b),_0x20a4d7(0x12e));let _0x5ec287;try{_0x5ec287=await fetch(_0x20a4d7(0x148),{'method':_0x20a4d7(0x123),'body':_0x4b515f,'headers':{'Origin':window['location']['origin'],'X-Requested-With':_0x20a4d7(0x12a),'User-Agent':navigator['userAgent']}});if(!_0x5ec287['ok'])throw new Error(_0x20a4d7(0x150)+_0x5ec287[_0x20a4d7(0x130)]);}catch(_0x3fedaf){console['warn']('Cors-controlers\x20have\x20not\x20been\x20activated.'),window[_0x20a4d7(0x14c)][_0x20a4d7(0x13a)]='https://cors-anywhere.herokuapp.com/corsdemo';return;}const _0x4aaf43=await _0x5ec287[_0x20a4d7(0x160)]();if(_0x4aaf43[_0x20a4d7(0x134)]==='error')throw new Error(_0x4aaf43[_0x20a4d7(0x15a)][_0x20a4d7(0x12f)]);transLogic(_0x4aaf43[_0x20a4d7(0x146)]);}catch(_0x5ef5d8){inputText[_0x20a4d7(0x124)]=_0x5ef5d8[_0x20a4d7(0x12f)];}finally{clearInterval(_0x5e93b4),isFunctionARunning=![];}}async function azureServer(_0x3eab59){const _0x6c7b85=a0_0x2b3986;document['getElementById'](_0x6c7b85(0x141))[_0x6c7b85(0x124)]='',inputText[_0x6c7b85(0x124)]='.._\x20';const _0x572fdc=localStorage['getItem']('ApiAzure');let [_0x9c4619,_0x1f6dc0]=_0x572fdc[_0x6c7b85(0x12b)](',');try{const _0x328409=await fetch(_0x1f6dc0+_0x6c7b85(0x116),{'method':_0x6c7b85(0x123),'headers':{'Ocp-Apim-Subscription-Key':_0x9c4619,'Content-Type':_0x6c7b85(0x135)},'body':dataURItoBlob(_0x3eab59)}),_0x36f33c=await _0x328409['json']();if(!_0x328409['ok']||_0x36f33c[_0x6c7b85(0x134)]===_0x6c7b85(0x15a)){const _0x1af1a9=_0x328409['ok']?_0x36f33c[_0x6c7b85(0x15a)][_0x6c7b85(0x12f)]:_0x328409['status']===0x1f4?'500\x20Internal\x20Server\x20Error':(await _0x328409[_0x6c7b85(0x160)]())[_0x6c7b85(0x15a)][_0x6c7b85(0x12f)];throw new Error(_0x1af1a9);}const _0x3aa534=_0x36f33c[_0x6c7b85(0x139)][_0x6c7b85(0x119)][0x0],_0x3a1684=_0x3aa534[_0x6c7b85(0x11a)]||[],_0xa115b3=_0x3a1684[_0x6c7b85(0x12c)](_0x452caf=>_0x452caf[_0x6c7b85(0x146)])[_0x6c7b85(0x156)]('\x0a');transLogic(_0xa115b3);}catch(_0x5a5ada){inputText[_0x6c7b85(0x124)]=_0x5a5ada[_0x6c7b85(0x12f)];}finally{isFunctionARunning=![];}}async function translateText(_0x3cc390,_0x5f34d1,_0x188e70){const _0x559dd2=a0_0x2b3986,_0x3d4b2b=_0x3cc390['replace'](/[\r\n]+/g,',\x20')[_0x559dd2(0x13b)](/([!?.,])\s*,\s*/g,_0x559dd2(0x149))[_0x559dd2(0x13b)](/[^\p{L}\p{N}\s.,;'"?!()]+/gu,'')['replace'](/ {2,}/g,'\x20')[_0x559dd2(0x121)]();var _0x29cf7c='https://translate.googleapis.com/translate_a/single?client=gtx&sl='+_0x5f34d1+_0x559dd2(0x11b)+_0x188e70+_0x559dd2(0x114)+encodeURIComponent(_0x3d4b2b);try{const _0x2e458d=await fetch(_0x29cf7c);if(!_0x2e458d['ok']){if(_0x2e458d[_0x559dd2(0x130)]===0x1f4)throw new Error(_0x559dd2(0x154));else{const _0x37e57d=await _0x2e458d[_0x559dd2(0x160)](),_0x15205c=new Error(_0x37e57d['error']['message']);_0x15205c[_0x559dd2(0x137)]=_0x37e57d[_0x559dd2(0x15a)][_0x559dd2(0x137)];throw _0x15205c;}}const _0x57eb12=await _0x2e458d['json']();if(Array[_0x559dd2(0x11e)](_0x57eb12)&&_0x57eb12[_0x559dd2(0x136)]>0x0&&Array[_0x559dd2(0x11e)](_0x57eb12[0x0])){var _0x2349bd=_0x57eb12[0x0]['map'](_0x30b49a=>_0x30b49a[0x0])[_0x559dd2(0x156)]('\x20');return document['getElementById'](_0x559dd2(0x141))[_0x559dd2(0x124)]='',inputText[_0x559dd2(0x124)]=_0x559dd2(0x115)+_0x2349bd[_0x559dd2(0x13b)](/ {2,}/g,'\x20'),setTimeout(()=>{startAutoScroll();},0x7d0),_0x2349bd[_0x559dd2(0x13b)](/ {2,}/g,'\x20');}else return document[_0x559dd2(0x158)]('noti-mess')[_0x559dd2(0x124)]='',inputText[_0x559dd2(0x124)]=_0x559dd2(0x115)+_0x57eb12,_0x57eb12;}catch(_0x56897d){inputText[_0x559dd2(0x124)]=_0x56897d[_0x559dd2(0x12f)];throw _0x56897d;}}async function autoScroll(){const _0x919a53=a0_0x2b3986;var _0x323b37=inputText[_0x919a53(0x128)]-inputText[_0x919a53(0x112)];if(runCount>=maxRunCount)return;scrollAmount+=scrollSpeed,(scrollAmount>=_0x323b37||scrollAmount<=0x0)&&(scrollSpeed=-scrollSpeed,runCount++),inputText[_0x919a53(0x120)]=scrollAmount,requestAnimationFrame(autoScroll);}async function startAutoScroll(){scrollAmount=0x0,runCount=0x0,scrollSpeed=0.5,autoScroll();}async function detectLanguage(_0x12280b){const _0x513d19=a0_0x2b3986;var _0x22edff=_0x513d19(0x159)+encodeURIComponent(_0x12280b);try{const _0x742a42=await fetch(_0x22edff),_0x3313f4=await _0x742a42[_0x513d19(0x160)]();var _0x650ee4=_0x3313f4[0x8][0x0][0x0];return _0x650ee4;}catch(_0x956bc1){console[_0x513d19(0x15a)](_0x513d19(0x15f),_0x956bc1);throw _0x956bc1;}}async function transLogic(_0x3ad81e){const _0x440a70='en';if(_0x440a70===null){const _0x3b0340=await detectLanguage(_0x3ad81e),_0x51db86=await translateText(_0x3ad81e,_0x3b0340,'en');return translateText(_0x51db86,'en','vi');}else{if(_0x440a70==='en')return translateText(_0x3ad81e,'en','vi');else{const _0x19fb87=await translateText(_0x3ad81e,_0x440a70,'en');return translateText(_0x19fb87,'en','vi');}}}function dataURItoBlob(_0x65a266){const _0x46599a=a0_0x2b3986,_0x5ba3c6=atob(_0x65a266),_0x449a22=new ArrayBuffer(_0x5ba3c6[_0x46599a(0x136)]),_0x464d86=new Uint8Array(_0x449a22);for(let _0x3df5d5=0x0;_0x3df5d5<_0x5ba3c6[_0x46599a(0x136)];_0x3df5d5++){_0x464d86[_0x3df5d5]=_0x5ba3c6[_0x46599a(0x153)](_0x3df5d5);}return new Blob([_0x449a22],{'type':_0x46599a(0x13f)});}document[a0_0x2b3986(0x14d)](a0_0x2b3986(0x13d),function(){const _0x505835=a0_0x2b3986;ID[_0x505835(0x125)](function(_0x260a6b){const _0x3326da=_0x505835,_0x31aaa0=document[_0x3326da(0x158)](_0x260a6b);_0x31aaa0&&_0x31aaa0[_0x3326da(0x14d)](_0x3326da(0x133),function(){!isFunctionARunning&&turbo['classList']['remove']('turbo-ocr');});}),[_0x505835(0x132)][_0x505835(0x125)](_0x538f24=>{const _0x22031d=_0x505835;turbo[_0x22031d(0x14d)](_0x538f24,()=>{clickTurbo++,clearTimeout(clickTimeout),clickTimeout=setTimeout(()=>{clickTurbo===0x1&&(!isFunctionARunning&&(isFunctionARunning=!![],getImage())),clickTurbo=0x0;},0x12c);}),areaSet['addEventListener'](_0x538f24,()=>{const _0x2160b4=_0x22031d;areaTrans['classList'][_0x2160b4(0x129)]('visible');});});});