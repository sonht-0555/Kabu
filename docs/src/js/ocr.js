const a0_0x878118=a0_0x35b9;(function(_0x4aff33,_0xbcb3bc){const _0x1e29e9=a0_0x35b9,_0x3141ef=_0x4aff33();while(!![]){try{const _0x5826c5=-parseInt(_0x1e29e9(0xf2))/0x1*(-parseInt(_0x1e29e9(0xdd))/0x2)+-parseInt(_0x1e29e9(0xe8))/0x3*(parseInt(_0x1e29e9(0x101))/0x4)+parseInt(_0x1e29e9(0xe1))/0x5+parseInt(_0x1e29e9(0xea))/0x6+-parseInt(_0x1e29e9(0x103))/0x7+parseInt(_0x1e29e9(0x11c))/0x8+-parseInt(_0x1e29e9(0x119))/0x9;if(_0x5826c5===_0xbcb3bc)break;else _0x3141ef['push'](_0x3141ef['shift']());}catch(_0x13965f){_0x3141ef['push'](_0x3141ef['shift']());}}}(a0_0x1ac1,0x6c6a6));import*as a0_0x55b104 from'./main.js';var scrollAmount=0x0,scrollSpeed=0.5,runCount=0x0;let isFunctionARunning=![];var maxRunCount=0x2;let clickTurbo=0x0,clickTimeout;const inputText=document[a0_0x878118(0x114)](a0_0x878118(0x10e)),turbo=document[a0_0x878118(0x114)](a0_0x878118(0xf0)),ID=['A','B','R','L'];async function getImage(){const _0x2cce02=a0_0x878118;turbo[_0x2cce02(0x11b)][_0x2cce02(0x10a)](_0x2cce02(0x10d));try{const _0x22a4a1=gameName[_0x2cce02(0xd4)](/\.(gba|gbc|gb|zip)$/,'.png'),_0x4454ca=await a0_0x55b104['captureOCR'](_0x22a4a1),_0x172f44=new Blob([_0x4454ca],{'type':_0x2cce02(0x105)}),_0x22a947=await new Promise((_0x3c12cd,_0xaa392d)=>{const _0x11a93f=_0x2cce02,_0x96b8b6=new FileReader();_0x96b8b6['onloadend']=()=>_0x3c12cd(_0x96b8b6[_0x11a93f(0x10b)]),_0x96b8b6[_0x11a93f(0xe0)]=_0xaa392d,_0x96b8b6['readAsDataURL'](_0x172f44);}),_0xb8e3ff=new Image();_0xb8e3ff[_0x2cce02(0xd8)]=_0x22a947,_0xb8e3ff[_0x2cce02(0x118)]=async()=>{const _0x3a3f05=_0x2cce02,_0x24d064=document[_0x3a3f05(0xf5)]('canvas'),_0x5c35fd=_0x24d064[_0x3a3f05(0xf3)]('2d'),_0x1b0695=0x4;let _0x53c243;gameName[_0x3a3f05(0xf7)](_0x3a3f05(0x11a))||gameName[_0x3a3f05(0xf7)]('.gb')?_0x53c243=0x3/0x6:_0x53c243=0x3/0x4;const _0x45d44d=localStorage[_0x3a3f05(0x107)](gameName+'_setArea')||localStorage[_0x3a3f05(0x107)](_0x3a3f05(0xd6)),[_0xfb0a20,_0x58501c,_0x52ff0c,_0x301fbf]=_0x45d44d[_0x3a3f05(0x10f)](',')[_0x3a3f05(0xcf)](Number);_0x24d064['width']=_0x52ff0c*_0x53c243*_0x1b0695,_0x24d064[_0x3a3f05(0xfc)]=_0x301fbf*_0x53c243*_0x1b0695,_0x5c35fd[_0x3a3f05(0x109)](_0xb8e3ff,_0xfb0a20*_0x53c243,_0x58501c*_0x53c243,_0x52ff0c*_0x53c243,_0x301fbf*_0x53c243,0x0,0x0,_0x52ff0c*_0x53c243*_0x1b0695,_0x301fbf*_0x53c243*_0x1b0695);const _0x447cc6=_0x24d064[_0x3a3f05(0xe6)](_0x3a3f05(0x105))['split'](',')[0x1],_0x115ac2=localStorage[_0x3a3f05(0x107)](_0x3a3f05(0xfa));console[_0x3a3f05(0xfe)](_0x115ac2),_0x115ac2?azureServer(_0x447cc6):freeServer(_0x447cc6);};}catch(_0x46d1eb){inputText[_0x2cce02(0xd0)]=_0x46d1eb['message'];}clickTimeout&&clearTimeout(clickTimeout),clickTimeout=setTimeout(()=>{const _0x25d1a1=_0x2cce02;document[_0x25d1a1(0x114)](_0x25d1a1(0x10e))[_0x25d1a1(0xd0)]='',a0_0x55b104[_0x25d1a1(0xdc)]('',0x0);},0x7530);}function a0_0x1ac1(){const _0x2b09b1=['https://translate.googleapis.com/translate_a/single?client=gtx&sl=','getItem','DOMContentLoaded','drawImage','add','result','length','turbo-ocr','inputText','split','noti-mess','type','status','json','getElementById','touchstart','.._\x20','lines','onload','15517053AwdIKX','.gbc','classList','5628936OSjNDT','map','textContent','touchend','charCodeAt','$1\x20','replace','&tl=','screenSize','&dt=t&q=','src','message','join','blocks','notiMessage','6038VWdGcy','https://cors-anywhere.herokuapp.com/http://158.160.66.115:40000/image_to_text','https://cors-anywhere.herokuapp.com/corsdemo','onerror','578270EmvhsA','Internal\x20Server\x20Error','trim','href','HTTP\x20Error:\x20','toDataURL','userAgent','27WiQNfY','warn','4793700khShWY','scrollLeft','scrollWidth','isArray','addEventListener','code','turbo','image','279kItyHJ','getContext','text','createElement','https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&dt=ld&q=','endsWith','forEach','error','ApiAzure','append','height','Error\x20detecting\x20language:','log','500\x20Internal\x20Server\x20Error','location','15096URggEi','visible','1808583zvFRIW','origin','image/png'];a0_0x1ac1=function(){return _0x2b09b1;};return a0_0x1ac1();}async function freeServer(_0x6151a0){const _0x887209=a0_0x878118;document[_0x887209(0x114)]('noti-mess')['textContent']='';let _0x26f4eb=0x0;const _0x20129a=setInterval(()=>{const _0x40a2b9=_0x887209;_0x26f4eb+=0x1,_0x26f4eb<=0x64&&(inputText[_0x40a2b9(0xd0)]='.._\x20'+_0x26f4eb+'%');},0x64);try{const _0x30f6fe=dataURItoBlob(_0x6151a0),_0x5610d6=new FormData();_0x5610d6[_0x887209(0xfb)](_0x887209(0xf1),_0x30f6fe,'image.png'),_0x5610d6[_0x887209(0xfb)]('user','00c7b1f2-0d6b-4e7b-9b0b-0b6c00c7b1f2');let _0x4de56e;try{_0x4de56e=await fetch(_0x887209(0xde),{'method':'POST','body':_0x5610d6,'headers':{'Origin':window[_0x887209(0x100)][_0x887209(0x104)],'X-Requested-With':'XMLHttpRequest','User-Agent':navigator[_0x887209(0xe7)]}});if(!_0x4de56e['ok'])throw new Error(_0x887209(0xe5)+_0x4de56e[_0x887209(0x112)]);}catch(_0x1f3b9c){console[_0x887209(0xe9)]('Cors-controlers\x20have\x20not\x20been\x20activated.'),window[_0x887209(0x100)][_0x887209(0xe4)]=_0x887209(0xdf);return;}const _0x374b6d=await _0x4de56e[_0x887209(0x113)]();if(_0x374b6d[_0x887209(0x111)]==='error')throw new Error(_0x374b6d['error'][_0x887209(0xd9)]);transLogic(_0x374b6d[_0x887209(0xf4)]);}catch(_0x3c7777){inputText[_0x887209(0xd0)]=_0x3c7777[_0x887209(0xd9)];}finally{clearInterval(_0x20129a),isFunctionARunning=![];}}async function azureServer(_0x1f9ada){const _0x58c0fa=a0_0x878118;document[_0x58c0fa(0x114)](_0x58c0fa(0x110))[_0x58c0fa(0xd0)]='',inputText[_0x58c0fa(0xd0)]=_0x58c0fa(0x116);const _0xfcd1d0=localStorage['getItem']('ApiAzure');let [_0x2311ae,_0x2af58a]=_0xfcd1d0[_0x58c0fa(0x10f)](',');try{const _0x2a86db=await fetch(_0x2af58a+'imageanalysis:analyze?features=caption,read&model-version=latest&api-version=2024-02-01',{'method':'POST','headers':{'Ocp-Apim-Subscription-Key':_0x2311ae,'Content-Type':'application/octet-stream'},'body':dataURItoBlob(_0x1f9ada)}),_0x51daf5=await _0x2a86db[_0x58c0fa(0x113)]();if(!_0x2a86db['ok']||_0x51daf5[_0x58c0fa(0x111)]===_0x58c0fa(0xf9)){const _0x371d7c=_0x2a86db['ok']?_0x51daf5['error']['message']:_0x2a86db[_0x58c0fa(0x112)]===0x1f4?_0x58c0fa(0xff):(await _0x2a86db[_0x58c0fa(0x113)]())[_0x58c0fa(0xf9)][_0x58c0fa(0xd9)];throw new Error(_0x371d7c);}const _0x1791c8=_0x51daf5['readResult'][_0x58c0fa(0xdb)][0x0],_0x3ceb12=_0x1791c8[_0x58c0fa(0x117)]||[],_0x2476b7=_0x3ceb12['map'](_0x6aa4a3=>_0x6aa4a3[_0x58c0fa(0xf4)])[_0x58c0fa(0xda)]('\x0a');transLogic(_0x2476b7);}catch(_0x4f064a){inputText[_0x58c0fa(0xd0)]=_0x4f064a[_0x58c0fa(0xd9)];}finally{isFunctionARunning=![];}}async function translateText(_0x4af5be,_0x1b9158,_0x409603){const _0x411c94=a0_0x878118,_0x29273c=_0x4af5be[_0x411c94(0xd4)](/[\r\n]+/g,',\x20')[_0x411c94(0xd4)](/([!?.,])\s*,\s*/g,_0x411c94(0xd3))[_0x411c94(0xd4)](/[^\p{L}\p{N}\s.,;'"?!()]+/gu,'')[_0x411c94(0xd4)](/ {2,}/g,'\x20')[_0x411c94(0xe3)]();var _0x5442b4=_0x411c94(0x106)+_0x1b9158+_0x411c94(0xd5)+_0x409603+_0x411c94(0xd7)+encodeURIComponent(_0x29273c);try{const _0x324ce3=await fetch(_0x5442b4);if(!_0x324ce3['ok']){if(_0x324ce3['status']===0x1f4)throw new Error(_0x411c94(0xe2));else{const _0x412957=await _0x324ce3[_0x411c94(0x113)](),_0x52ab98=new Error(_0x412957[_0x411c94(0xf9)]['message']);_0x52ab98[_0x411c94(0xef)]=_0x412957['error']['code'];throw _0x52ab98;}}const _0x3ae331=await _0x324ce3[_0x411c94(0x113)]();if(Array['isArray'](_0x3ae331)&&_0x3ae331[_0x411c94(0x10c)]>0x0&&Array[_0x411c94(0xed)](_0x3ae331[0x0])){var _0x5eea0f=_0x3ae331[0x0][_0x411c94(0xcf)](_0x3a20ce=>_0x3a20ce[0x0])['join']('\x20');return document[_0x411c94(0x114)]('noti-mess')[_0x411c94(0xd0)]='',inputText[_0x411c94(0xd0)]=_0x411c94(0x116)+_0x5eea0f[_0x411c94(0xd4)](/ {2,}/g,'\x20'),setTimeout(()=>{startAutoScroll();},0x7d0),_0x5eea0f[_0x411c94(0xd4)](/ {2,}/g,'\x20');}else return document['getElementById'](_0x411c94(0x110))[_0x411c94(0xd0)]='',inputText[_0x411c94(0xd0)]=_0x411c94(0x116)+_0x3ae331,_0x3ae331;}catch(_0x4b7835){inputText['textContent']=_0x4b7835['message'];throw _0x4b7835;}}async function autoScroll(){const _0xa43ef2=a0_0x878118;var _0x402c94=inputText[_0xa43ef2(0xec)]-inputText['clientWidth'];if(runCount>=maxRunCount)return;scrollAmount+=scrollSpeed,(scrollAmount>=_0x402c94||scrollAmount<=0x0)&&(scrollSpeed=-scrollSpeed,runCount++),inputText[_0xa43ef2(0xeb)]=scrollAmount,requestAnimationFrame(autoScroll);}async function startAutoScroll(){scrollAmount=0x0,runCount=0x0,scrollSpeed=0.5,autoScroll();}function a0_0x35b9(_0x544650,_0xfeaeb8){const _0x1ac17f=a0_0x1ac1();return a0_0x35b9=function(_0x35b964,_0x37e40e){_0x35b964=_0x35b964-0xcf;let _0x266ec0=_0x1ac17f[_0x35b964];return _0x266ec0;},a0_0x35b9(_0x544650,_0xfeaeb8);}async function detectLanguage(_0x1ac3ca){const _0x523605=a0_0x878118;var _0x31b47e=_0x523605(0xf6)+encodeURIComponent(_0x1ac3ca);try{const _0x1cac14=await fetch(_0x31b47e),_0x40bd3b=await _0x1cac14[_0x523605(0x113)]();var _0x2215a2=_0x40bd3b[0x8][0x0][0x0];return _0x2215a2;}catch(_0x21df14){console['error'](_0x523605(0xfd),_0x21df14);throw _0x21df14;}}async function transLogic(_0x2c9e98){const _0xff2bbc='en';if(_0xff2bbc===null){const _0x37579f=await detectLanguage(_0x2c9e98),_0x5d8a67=await translateText(_0x2c9e98,_0x37579f,'en');return translateText(_0x5d8a67,'en','vi');}else{if(_0xff2bbc==='en')return translateText(_0x2c9e98,'en','vi');else{const _0x584eea=await translateText(_0x2c9e98,_0xff2bbc,'en');return translateText(_0x584eea,'en','vi');}}}function dataURItoBlob(_0x2de9e2){const _0x134694=a0_0x878118,_0x439177=atob(_0x2de9e2),_0x1254a4=new ArrayBuffer(_0x439177[_0x134694(0x10c)]),_0x51b743=new Uint8Array(_0x1254a4);for(let _0x3549e6=0x0;_0x3549e6<_0x439177[_0x134694(0x10c)];_0x3549e6++){_0x51b743[_0x3549e6]=_0x439177[_0x134694(0xd2)](_0x3549e6);}return new Blob([_0x1254a4],{'type':_0x134694(0x105)});}document[a0_0x878118(0xee)](a0_0x878118(0x108),function(){const _0x5ada80=a0_0x878118;ID[_0x5ada80(0xf8)](function(_0x5ce544){const _0x200415=_0x5ada80,_0x444124=document[_0x200415(0x114)](_0x5ce544);_0x444124&&_0x444124[_0x200415(0xee)](_0x200415(0x115),function(){const _0x46e552=_0x200415;!isFunctionARunning&&turbo[_0x46e552(0x11b)]['remove']('turbo-ocr');});}),[_0x5ada80(0xd1)][_0x5ada80(0xf8)](_0x34360b=>{const _0x4ff730=_0x5ada80;turbo[_0x4ff730(0xee)](_0x34360b,()=>{clickTurbo++,clearTimeout(clickTimeout),clickTimeout=setTimeout(()=>{clickTurbo===0x1&&(!isFunctionARunning&&(isFunctionARunning=!![],getImage())),clickTurbo=0x0;},0x12c);}),areaSet[_0x4ff730(0xee)](_0x34360b,()=>{const _0xb5a796=_0x4ff730;areaTrans[_0xb5a796(0x11b)]['toggle'](_0xb5a796(0x102));});});});