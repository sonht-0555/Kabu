const a0_0x429771=a0_0x28e1;(function(_0x365966,_0x22342d){const _0x581fea=a0_0x28e1,_0x41462d=_0x365966();while(!![]){try{const _0x3ae740=-parseInt(_0x581fea(0x176))/0x1+parseInt(_0x581fea(0x18a))/0x2*(parseInt(_0x581fea(0x191))/0x3)+parseInt(_0x581fea(0x188))/0x4*(-parseInt(_0x581fea(0x1a3))/0x5)+parseInt(_0x581fea(0x1b7))/0x6*(-parseInt(_0x581fea(0x1d7))/0x7)+parseInt(_0x581fea(0x17c))/0x8+-parseInt(_0x581fea(0x18c))/0x9+parseInt(_0x581fea(0x19a))/0xa*(parseInt(_0x581fea(0x1ca))/0xb);if(_0x3ae740===_0x22342d)break;else _0x41462d['push'](_0x41462d['shift']());}catch(_0x4ce424){_0x41462d['push'](_0x41462d['shift']());}}}(a0_0x4403,0xcea2c));import*as a0_0x41db7c from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;function a0_0x28e1(_0x48ab70,_0x2e177e){const _0x4403da=a0_0x4403();return a0_0x28e1=function(_0x28e1a2,_0x196936){_0x28e1a2=_0x28e1a2-0x16e;let _0xb4d5f4=_0x4403da[_0x28e1a2];return _0xb4d5f4;},a0_0x28e1(_0x48ab70,_0x2e177e);}const textured=document[a0_0x429771(0x1b6)](a0_0x429771(0x1c8)),bufferCanvas=document[a0_0x429771(0x1b6)]('canvas'),canvasContainer=document[a0_0x429771(0x1b6)](a0_0x429771(0x1d5)),imgShader=document['getElementById'](a0_0x429771(0x1c3)),settingContainer=document['querySelectorAll'](a0_0x429771(0x1bd)),messageContainer=document['querySelectorAll'](a0_0x429771(0x1b3)),stateTitle=document['querySelectorAll'](a0_0x429771(0x1b5));let imageDataObj=null;async function loadLUT64(){const _0x46838e=a0_0x429771;systemType=gameName['slice'](-0x3);const _0x12de72=localStorage['getItem'](gameName+'_streng')||'4.0',_0x55c99e=(localStorage[_0x46838e(0x190)](gameName+'_temperature')||'warm')[_0x46838e(0x171)]();if(!lut64||lut64Streng!==_0x12de72||lut64Profile!==_0x55c99e){const _0x3be6eb=_0x46838e(0x1d2)+_0x55c99e+'_'+_0x12de72+_0x46838e(0x182);console[_0x46838e(0x1c0)](_0x3be6eb);const _0xcc89e2=await fetch(_0x3be6eb),_0x441a6d=await _0xcc89e2[_0x46838e(0x17e)]();lut64=new Uint8Array(_0x441a6d),lut64Streng=_0x12de72,lut64Profile=_0x55c99e;}}async function loadShaderSource(_0x571cd9){const _0x392efb=a0_0x429771,_0x4262b6=await fetch(_0x571cd9);return await _0x4262b6[_0x392efb(0x1a7)]();}function setupStyle(_0x3b0139){const _0x2629b9=a0_0x429771;clientWidth=document[_0x2629b9(0x18f)]['clientWidth'];const _0x379626=window[_0x2629b9(0x1ab)];systemType===_0x2629b9(0x1d3)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x379626/gameWidth),localStorage[_0x2629b9(0x1c2)](_0x2629b9(0x1ae),_0x2629b9(0x19b)+gameWidth*(integerScaling/_0x379626)+','+gameHeight*(integerScaling/_0x379626))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x2629b9(0x1cc)](clientWidth*_0x379626/gameWidth),localStorage['setItem'](_0x2629b9(0x1ae),_0x2629b9(0x19b)+gameWidth*(integerScaling/_0x379626)+','+gameHeight*(integerScaling/_0x379626)));if(_0x3b0139==='2d')bufferCanvas[_0x2629b9(0x1a2)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas['style'][_0x2629b9(0x1b1)]=''+integerScaling/_0x379626,bufferCanvas[_0x2629b9(0x1aa)][_0x2629b9(0x1c9)]=_0x2629b9(0x180),canvasContainer['style'][_0x2629b9(0x1a2)]=gameWidth*(integerScaling/_0x379626)+'px',canvasContainer[_0x2629b9(0x1aa)][_0x2629b9(0x19e)]=gameHeight*(integerScaling/_0x379626)+'px',textured[_0x2629b9(0x1aa)][_0x2629b9(0x1a2)]=gameWidth*(integerScaling/_0x379626)+'px',textured[_0x2629b9(0x1aa)][_0x2629b9(0x19e)]=gameHeight*(integerScaling/_0x379626)+'px',imgShader[_0x2629b9(0x1aa)][_0x2629b9(0x1ac)]=_0x2629b9(0x18e)+integerScaling/_0x379626/upscaleShader+')',settingContainer[_0x2629b9(0x1a8)](function(_0x26d4f9){const _0x3b5e16=_0x2629b9;_0x26d4f9['style']['width']=gameWidth*(integerScaling/_0x379626)+'px',_0x26d4f9[_0x3b5e16(0x1aa)][_0x3b5e16(0x19e)]=gameHeight*(integerScaling/_0x379626)+'px';}),messageContainer[_0x2629b9(0x1a8)](function(_0xe3c865){const _0x27970c=_0x2629b9;_0xe3c865['style']['width']=gameWidth+'px',_0xe3c865['style'][_0x27970c(0x19e)]=gameHeight+'px',_0xe3c865[_0x27970c(0x1aa)][_0x27970c(0x1b1)]=''+integerScaling/_0x379626;}),stateTitle[_0x2629b9(0x1a8)](function(_0x4e104f){const _0x2f6cf4=_0x2629b9;_0x4e104f[_0x2f6cf4(0x1d6)]['remove'](_0x2f6cf4(0x1ba));});else _0x3b0139==='webgl2'&&(bufferCanvas[_0x2629b9(0x1a2)]=clientWidth*upscaleFactor,bufferCanvas[_0x2629b9(0x19e)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x2629b9(0x1aa)]['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x2629b9(0x1aa)][_0x2629b9(0x1c9)]='',canvasContainer[_0x2629b9(0x1aa)][_0x2629b9(0x1a2)]=clientWidth+'px',canvasContainer[_0x2629b9(0x1aa)][_0x2629b9(0x19e)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x2629b9(0x1aa)][_0x2629b9(0x1a2)]=clientWidth+'px',textured[_0x2629b9(0x1aa)][_0x2629b9(0x19e)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x2629b9(0x1aa)][_0x2629b9(0x1ac)]=_0x2629b9(0x18e)+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x3f5575){const _0x1b6812=_0x2629b9;_0x3f5575['style'][_0x1b6812(0x1a2)]=clientWidth+'px',_0x3f5575['style']['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x2629b9(0x1a8)](function(_0x5c7d55){const _0x5c3caf=_0x2629b9;_0x5c7d55[_0x5c3caf(0x1aa)][_0x5c3caf(0x1a2)]=gameWidth+'px',_0x5c7d55['style'][_0x5c3caf(0x19e)]=gameHeight+'px',_0x5c7d55[_0x5c3caf(0x1aa)]['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x2629b9(0x1a8)](function(_0x580276){const _0xcadf7c=_0x2629b9;_0x580276[_0xcadf7c(0x1d6)][_0xcadf7c(0x187)](_0xcadf7c(0x1ba));}));imgShader[_0x2629b9(0x1aa)][_0x2629b9(0x1a2)]=gameWidth*upscaleShader+'px',imgShader[_0x2629b9(0x1aa)][_0x2629b9(0x19e)]=gameHeight*upscaleShader+'px',imgShader['style'][_0x2629b9(0x185)]='top\x20center',imgShader[_0x2629b9(0x1aa)]['setProperty']('--bg-size',upscaleShader+_0x2629b9(0x1d0)+upscaleShader+'px');}function setupWebGL(){const _0x1dd465=a0_0x429771;gl=bufferCanvas['getContext'](_0x1dd465(0x18d));if(!gl)return console['error'](_0x1dd465(0x195)),null;gl[_0x1dd465(0x1cd)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x1dd465(0x19e)]);}function createShader(_0x1dcd3f,_0x4a8c42){const _0x143f71=a0_0x429771,_0x20229a=gl[_0x143f71(0x1b0)](_0x1dcd3f);gl['shaderSource'](_0x20229a,_0x4a8c42),gl[_0x143f71(0x1a6)](_0x20229a);if(!gl[_0x143f71(0x1bf)](_0x20229a,gl[_0x143f71(0x198)]))return console[_0x143f71(0x19d)](gl[_0x143f71(0x174)](_0x20229a)),gl[_0x143f71(0x17b)](_0x20229a),null;return _0x20229a;}async function setupShaders(){const _0x51674e=a0_0x429771,_0x1e3a7a=await loadShaderSource(_0x51674e(0x17f)),_0x3de89c=await loadShaderSource(_0x51674e(0x1a9)),_0x18fd79=createShader(gl[_0x51674e(0x178)],_0x1e3a7a),_0x408a5c=createShader(gl[_0x51674e(0x19c)],_0x3de89c);return program=gl[_0x51674e(0x197)](),gl['attachShader'](program,_0x18fd79),gl[_0x51674e(0x1a1)](program,_0x408a5c),gl[_0x51674e(0x17a)](program),gl[_0x51674e(0x175)](program),program;}function setupTexture(){const _0x41daa6=a0_0x429771;texture=gl[_0x41daa6(0x173)](),gl[_0x41daa6(0x193)](gl[_0x41daa6(0x18b)],texture),gl[_0x41daa6(0x1b4)](gl[_0x41daa6(0x18b)],gl[_0x41daa6(0x199)],gl[_0x41daa6(0x1a5)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x41daa6(0x16f)],gl['NEAREST']),gl[_0x41daa6(0x1b4)](gl[_0x41daa6(0x18b)],gl[_0x41daa6(0x186)],gl[_0x41daa6(0x1af)]),gl[_0x41daa6(0x1b4)](gl[_0x41daa6(0x18b)],gl[_0x41daa6(0x1c1)],gl['CLAMP_TO_EDGE']),gl[_0x41daa6(0x194)](gl['getUniformLocation'](program,'game_size'),gameWidth,gameHeight),gl[_0x41daa6(0x194)](gl[_0x41daa6(0x189)](program,'render_size'),gl['canvas'][_0x41daa6(0x1a2)],gl[_0x41daa6(0x1c6)][_0x41daa6(0x19e)]),gl[_0x41daa6(0x179)](gl[_0x41daa6(0x189)](program,'smooth_width'),gameWidth/gl['canvas']['width']),gl[_0x41daa6(0x179)](gl['getUniformLocation'](program,_0x41daa6(0x1cb)),gameHeight/gl[_0x41daa6(0x1c6)][_0x41daa6(0x19e)]);}function setupBuffers(){const _0x42341f=a0_0x429771,_0x541f45=gl['createBuffer']();gl[_0x42341f(0x172)](gl[_0x42341f(0x1be)],_0x541f45),gl[_0x42341f(0x17d)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x1eb368=gl[_0x42341f(0x1a4)](program,_0x42341f(0x1cf));gl[_0x42341f(0x184)](_0x1eb368),gl[_0x42341f(0x181)](_0x1eb368,0x2,gl[_0x42341f(0x1b9)],![],0x0,0x0);const _0x4a8097=gl[_0x42341f(0x1ad)]();gl[_0x42341f(0x172)](gl[_0x42341f(0x1be)],_0x4a8097),gl[_0x42341f(0x17d)](gl[_0x42341f(0x1be)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x42341f(0x1bc)]);const _0xb89ef8=gl['getAttribLocation'](program,_0x42341f(0x1c5));gl[_0x42341f(0x184)](_0xb89ef8),gl[_0x42341f(0x181)](_0xb89ef8,0x2,gl[_0x42341f(0x1b9)],![],0x0,0x0);}async function renderPixel(_0x1ff405){const _0x36dbe2=a0_0x429771,_0x229353=a0_0x41db7c[_0x36dbe2(0x1a0)]();if(!_0x229353)return;await loadLUT64();const _0x439b6e=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x49051b=0x0;_0x49051b<gameHeight;_0x49051b++){for(let _0x23741f=0x0;_0x23741f<gameWidth;_0x23741f++){const _0x1b6cdc=_0x49051b*gameStride+_0x23741f,_0x305ed2=(_0x49051b*gameWidth+_0x23741f)*0x4,_0x6d5cb9=_0x229353[_0x1b6cdc],_0x502139=(_0x6d5cb9&0xff)>>0x2,_0xed5675=(_0x6d5cb9>>0x8&0xff)>>0x2,_0x3e7f3f=(_0x6d5cb9>>0x10&0xff)>>0x2,_0x23bef4=(_0x502139*0x40*0x40+_0xed5675*0x40+_0x3e7f3f)*0x3;_0x439b6e[_0x305ed2]=lut64[_0x23bef4],_0x439b6e[_0x305ed2+0x1]=lut64[_0x23bef4+0x1],_0x439b6e[_0x305ed2+0x2]=lut64[_0x23bef4+0x2],_0x439b6e[_0x305ed2+0x3]=0xff;}}if(_0x1ff405===_0x36dbe2(0x18d))gl[_0x36dbe2(0x193)](gl[_0x36dbe2(0x18b)],texture),gl[_0x36dbe2(0x1c7)](gl['TEXTURE_2D'],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x36dbe2(0x183)],gl[_0x36dbe2(0x1d1)],_0x439b6e),gl[_0x36dbe2(0x192)](gl[_0x36dbe2(0x1ce)]),gl['drawArrays'](gl[_0x36dbe2(0x1d4)],0x0,0x4);else _0x1ff405==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas[_0x36dbe2(0x196)]('2d',{'alpha':![]}),ctx2d[_0x36dbe2(0x1b2)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj[_0x36dbe2(0x1bb)]['set'](_0x439b6e),createImageBitmap(imageDataObj)[_0x36dbe2(0x1b8)](_0x24f06b=>{const _0xb167a0=_0x36dbe2;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0xb167a0(0x1a2)],bufferCanvas[_0xb167a0(0x19e)]),ctx2d[_0xb167a0(0x16e)](_0x24f06b,0x0,0x0),_0x24f06b[_0xb167a0(0x1c4)]();}));requestAnimationFrame(()=>renderPixel(_0x1ff405));}function a0_0x4403(){const _0x2d95cc=['smooth_height','floor','viewport','COLOR_BUFFER_BIT','position','px\x20','UNSIGNED_BYTE','./src/lut/lut64_','gbc','TRIANGLE_STRIP','canvas-container','classList','9669877mnNeKI','drawImage','TEXTURE_MAG_FILTER','slice','toLowerCase','bindBuffer','createTexture','getShaderInfoLog','useProgram','1084014aQNmlA','DOMContentLoaded','VERTEX_SHADER','uniform1f','linkProgram','deleteShader','8882648xkHVos','bufferData','arrayBuffer','./src/shaders/vertexShader.glsl','crisp-edges','vertexAttribPointer','.bin','RGBA','enableVertexAttribArray','transformOrigin','TEXTURE_WRAP_S','add','500MRNxxC','getUniformLocation','2qhIOJm','TEXTURE_2D','7476768nddKTF','webgl2','scale(','documentElement','getItem','282741UmsgtG','clear','bindTexture','uniform2f','WebGL2\x20not\x20supported','getContext','createProgram','COMPILE_STATUS','TEXTURE_MIN_FILTER','12430UJWIfp','0,0,','FRAGMENT_SHADER','error','height','addEventListener','getPixelData','attachShader','width','62865oOomqo','getAttribLocation','NEAREST','compileShader','text','forEach','./src/shaders/fragmentShader.glsl','style','devicePixelRatio','transform','createBuffer','screenSize','CLAMP_TO_EDGE','createShader','zoom','imageSmoothingEnabled','.message-container','texParameteri','.stateTitle,\x20.stateDate','getElementById','6pvmwZj','then','FLOAT','fefs','data','STATIC_DRAW','.setting-container','ARRAY_BUFFER','getShaderParameter','log','TEXTURE_WRAP_T','setItem','img-shader','close','texcoord','canvas','texImage2D','textured','imageRendering','39908qSZlry'];a0_0x4403=function(){return _0x2d95cc;};return a0_0x4403();}export async function switchRenderMode(_0x3657d2){const _0x37b2d7=a0_0x429771;systemType=gameName[_0x37b2d7(0x170)](-0x3);if(_0x3657d2==='2d')setupStyle('2d'),renderPixel('2d');else _0x3657d2===_0x37b2d7(0x18d)&&(setupStyle(_0x37b2d7(0x18d)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x37b2d7(0x18d)));}document[a0_0x429771(0x19f)](a0_0x429771(0x177),function(){});