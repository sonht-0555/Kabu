const a0_0x5ef848=a0_0x39cd;(function(_0x378872,_0x5ba8c2){const _0x35e184=a0_0x39cd,_0x43359f=_0x378872();while(!![]){try{const _0x18aca6=-parseInt(_0x35e184(0x244))/0x1+-parseInt(_0x35e184(0x24d))/0x2*(parseInt(_0x35e184(0x22f))/0x3)+-parseInt(_0x35e184(0x239))/0x4+parseInt(_0x35e184(0x1f5))/0x5+-parseInt(_0x35e184(0x210))/0x6*(-parseInt(_0x35e184(0x24a))/0x7)+-parseInt(_0x35e184(0x217))/0x8+-parseInt(_0x35e184(0x241))/0x9*(-parseInt(_0x35e184(0x23d))/0xa);if(_0x18aca6===_0x5ba8c2)break;else _0x43359f['push'](_0x43359f['shift']());}catch(_0xfd3520){_0x43359f['push'](_0x43359f['shift']());}}}(a0_0x3e7e,0xb04c6));import*as a0_0x25e821 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x5ef848(0x1fa)](a0_0x5ef848(0x224)),bufferCanvas=document[a0_0x5ef848(0x1fa)](a0_0x5ef848(0x1f9)),canvasContainer=document[a0_0x5ef848(0x1fa)](a0_0x5ef848(0x220)),imgShader=document[a0_0x5ef848(0x1fa)](a0_0x5ef848(0x20e)),settingContainer=document['querySelectorAll']('.setting-container'),messageContainer=document[a0_0x5ef848(0x212)](a0_0x5ef848(0x22c)),stateTitle=document[a0_0x5ef848(0x212)](a0_0x5ef848(0x249));function a0_0x3e7e(){const _0x2f389e=['addEventListener','texParameteri','imageRendering','bufferData','COLOR_BUFFER_BIT','clearRect','error','screenSize','TEXTURE_WRAP_S','shaderSource','ARRAY_BUFFER','smooth_height','gbc','forEach','data','getPixelData','FLOAT','viewport','img-shader','setProperty','98862OZriaG','transform','querySelectorAll','game_size','setItem','uniform1f','crisp-edges','4589056xAnOXO','./src/shaders/fragmentShader.glsl','position','toLowerCase','px\x20','documentElement','then','linkProgram','drawArrays','canvas-container','NEAREST','remove','0,0,','textured','text','STATIC_DRAW','RGBA','WebGL2\x20not\x20supported','TEXTURE_WRAP_T','width','uniform2f','.message-container','COMPILE_STATUS','getItem','20769iBaTqC','getShaderInfoLog','.bin','compileShader','vertexAttribPointer','close','FRAGMENT_SHADER','getAttribLocation','clientWidth','zoom','1519692BfpwRZ','./src/lut/lut64_','enableVertexAttribArray','TEXTURE_2D','13370rnzJmE','useProgram','bindBuffer','render_size','18099qHcxZZ','scale(','webgl2','969453yVYFgR','top\x20center','UNSIGNED_BYTE','getContext','--bg-size','.stateTitle,\x20.stateDate','448IShLGM','slice','./src/shaders/vertexShader.glsl','406AQYXcC','createProgram','texcoord','createBuffer','TEXTURE_MIN_FILTER','clear','bindTexture','VERTEX_SHADER','fefs','style','height','floor','1536300kUvawg','createShader','getUniformLocation','getShaderParameter','canvas','getElementById','attachShader'];a0_0x3e7e=function(){return _0x2f389e;};return a0_0x3e7e();}let imageDataObj=null;async function loadLUT64(){const _0x7e6767=a0_0x5ef848;systemType=gameName[_0x7e6767(0x24b)](-0x3);const _0x3fefea=localStorage[_0x7e6767(0x22e)](gameName+'_streng')||'4.0',_0x43896e=(localStorage[_0x7e6767(0x22e)](gameName+'_temperature')||'warm')[_0x7e6767(0x21a)]();if(!lut64||lut64Streng!==_0x3fefea||lut64Profile!==_0x43896e){const _0x25b4f2=_0x7e6767(0x23a)+_0x43896e+'_'+_0x3fefea+_0x7e6767(0x231);console['log'](_0x25b4f2);const _0x3acada=await fetch(_0x25b4f2),_0x464269=await _0x3acada['arrayBuffer']();lut64=new Uint8Array(_0x464269),lut64Streng=_0x3fefea,lut64Profile=_0x43896e;}}async function loadShaderSource(_0x43c775){const _0x38a231=a0_0x5ef848,_0x8e2a21=await fetch(_0x43c775);return await _0x8e2a21[_0x38a231(0x225)]();}function setupStyle(_0x4840bf){const _0x4a0fd5=a0_0x5ef848;clientWidth=document[_0x4a0fd5(0x21c)][_0x4a0fd5(0x237)];const _0x2d52ba=window['devicePixelRatio'];systemType===_0x4a0fd5(0x208)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x4a0fd5(0x1f4)](clientWidth*_0x2d52ba/gameWidth),localStorage[_0x4a0fd5(0x214)](_0x4a0fd5(0x203),'0,0,'+gameWidth*(integerScaling/_0x2d52ba)+','+gameHeight*(integerScaling/_0x2d52ba))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x4a0fd5(0x1f4)](clientWidth*_0x2d52ba/gameWidth),localStorage[_0x4a0fd5(0x214)]('screenSize',_0x4a0fd5(0x223)+gameWidth*(integerScaling/_0x2d52ba)+','+gameHeight*(integerScaling/_0x2d52ba)));if(_0x4840bf==='2d')bufferCanvas[_0x4a0fd5(0x22a)]=gameWidth,bufferCanvas[_0x4a0fd5(0x1f3)]=gameHeight,bufferCanvas[_0x4a0fd5(0x1f2)]['zoom']=''+integerScaling/_0x2d52ba,bufferCanvas['style'][_0x4a0fd5(0x1fe)]=_0x4a0fd5(0x216),canvasContainer[_0x4a0fd5(0x1f2)]['width']=gameWidth*(integerScaling/_0x2d52ba)+'px',canvasContainer[_0x4a0fd5(0x1f2)][_0x4a0fd5(0x1f3)]=gameHeight*(integerScaling/_0x2d52ba)+'px',textured['style']['width']=gameWidth*(integerScaling/_0x2d52ba)+'px',textured['style']['height']=gameHeight*(integerScaling/_0x2d52ba)+'px',imgShader[_0x4a0fd5(0x1f2)]['transform']='scale('+integerScaling/_0x2d52ba/upscaleShader+')',settingContainer['forEach'](function(_0x4f2bb9){const _0x40fd3f=_0x4a0fd5;_0x4f2bb9[_0x40fd3f(0x1f2)]['width']=gameWidth*(integerScaling/_0x2d52ba)+'px',_0x4f2bb9[_0x40fd3f(0x1f2)][_0x40fd3f(0x1f3)]=gameHeight*(integerScaling/_0x2d52ba)+'px';}),messageContainer['forEach'](function(_0x4a3c7a){const _0x7ff9a5=_0x4a0fd5;_0x4a3c7a[_0x7ff9a5(0x1f2)][_0x7ff9a5(0x22a)]=gameWidth+'px',_0x4a3c7a[_0x7ff9a5(0x1f2)][_0x7ff9a5(0x1f3)]=gameHeight+'px',_0x4a3c7a[_0x7ff9a5(0x1f2)][_0x7ff9a5(0x238)]=''+integerScaling/_0x2d52ba;}),stateTitle[_0x4a0fd5(0x209)](function(_0x2571f8){const _0x3dbe09=_0x4a0fd5;_0x2571f8['classList'][_0x3dbe09(0x222)](_0x3dbe09(0x1f1));});else _0x4840bf===_0x4a0fd5(0x243)&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas[_0x4a0fd5(0x1f3)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x4a0fd5(0x1f2)]['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x4a0fd5(0x1f2)][_0x4a0fd5(0x1fe)]='',canvasContainer[_0x4a0fd5(0x1f2)][_0x4a0fd5(0x22a)]=clientWidth+'px',canvasContainer[_0x4a0fd5(0x1f2)][_0x4a0fd5(0x1f3)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x4a0fd5(0x1f2)][_0x4a0fd5(0x22a)]=clientWidth+'px',textured[_0x4a0fd5(0x1f2)]['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x4a0fd5(0x1f2)][_0x4a0fd5(0x211)]=_0x4a0fd5(0x242)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x4a0fd5(0x209)](function(_0x2cef6a){const _0x59ac38=_0x4a0fd5;_0x2cef6a['style'][_0x59ac38(0x22a)]=clientWidth+'px',_0x2cef6a[_0x59ac38(0x1f2)][_0x59ac38(0x1f3)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x4a0fd5(0x209)](function(_0x357bc1){const _0x57812c=_0x4a0fd5;_0x357bc1['style'][_0x57812c(0x22a)]=gameWidth+'px',_0x357bc1['style'][_0x57812c(0x1f3)]=gameHeight+'px',_0x357bc1[_0x57812c(0x1f2)][_0x57812c(0x238)]=''+clientWidth/gameWidth;}),stateTitle[_0x4a0fd5(0x209)](function(_0x5e8550){const _0x2ac1a3=_0x4a0fd5;_0x5e8550['classList']['add'](_0x2ac1a3(0x1f1));}));imgShader[_0x4a0fd5(0x1f2)][_0x4a0fd5(0x22a)]=gameWidth*upscaleShader+'px',imgShader[_0x4a0fd5(0x1f2)][_0x4a0fd5(0x1f3)]=gameHeight*upscaleShader+'px',imgShader[_0x4a0fd5(0x1f2)]['transformOrigin']=_0x4a0fd5(0x245),imgShader[_0x4a0fd5(0x1f2)][_0x4a0fd5(0x20f)](_0x4a0fd5(0x248),upscaleShader+_0x4a0fd5(0x21b)+upscaleShader+'px');}function setupWebGL(){const _0x3a0962=a0_0x5ef848;gl=bufferCanvas[_0x3a0962(0x247)](_0x3a0962(0x243));if(!gl)return console[_0x3a0962(0x202)](_0x3a0962(0x228)),null;gl[_0x3a0962(0x20d)](0x0,0x0,bufferCanvas[_0x3a0962(0x22a)],bufferCanvas[_0x3a0962(0x1f3)]);}function createShader(_0x32a397,_0x204e3a){const _0x7fe097=a0_0x5ef848,_0x13045a=gl[_0x7fe097(0x1f6)](_0x32a397);gl[_0x7fe097(0x205)](_0x13045a,_0x204e3a),gl[_0x7fe097(0x232)](_0x13045a);if(!gl[_0x7fe097(0x1f8)](_0x13045a,gl[_0x7fe097(0x22d)]))return console[_0x7fe097(0x202)](gl[_0x7fe097(0x230)](_0x13045a)),gl['deleteShader'](_0x13045a),null;return _0x13045a;}async function setupShaders(){const _0xb4e98c=a0_0x5ef848,_0x17fa1e=await loadShaderSource(_0xb4e98c(0x24c)),_0x54b38e=await loadShaderSource(_0xb4e98c(0x218)),_0x1f68fe=createShader(gl[_0xb4e98c(0x1f0)],_0x17fa1e),_0xf5dac1=createShader(gl[_0xb4e98c(0x235)],_0x54b38e);return program=gl[_0xb4e98c(0x1ea)](),gl[_0xb4e98c(0x1fb)](program,_0x1f68fe),gl[_0xb4e98c(0x1fb)](program,_0xf5dac1),gl[_0xb4e98c(0x21e)](program),gl[_0xb4e98c(0x23e)](program),program;}function setupTexture(){const _0x13f490=a0_0x5ef848;texture=gl['createTexture'](),gl[_0x13f490(0x1ef)](gl[_0x13f490(0x23c)],texture),gl[_0x13f490(0x1fd)](gl[_0x13f490(0x23c)],gl[_0x13f490(0x1ed)],gl[_0x13f490(0x221)]),gl['texParameteri'](gl['TEXTURE_2D'],gl['TEXTURE_MAG_FILTER'],gl[_0x13f490(0x221)]),gl['texParameteri'](gl[_0x13f490(0x23c)],gl[_0x13f490(0x204)],gl['CLAMP_TO_EDGE']),gl[_0x13f490(0x1fd)](gl['TEXTURE_2D'],gl[_0x13f490(0x229)],gl['CLAMP_TO_EDGE']),gl[_0x13f490(0x22b)](gl[_0x13f490(0x1f7)](program,_0x13f490(0x213)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x13f490(0x1f7)](program,_0x13f490(0x240)),gl[_0x13f490(0x1f9)][_0x13f490(0x22a)],gl['canvas'][_0x13f490(0x1f3)]),gl[_0x13f490(0x215)](gl[_0x13f490(0x1f7)](program,'smooth_width'),gameWidth/gl[_0x13f490(0x1f9)][_0x13f490(0x22a)]),gl[_0x13f490(0x215)](gl['getUniformLocation'](program,_0x13f490(0x207)),gameHeight/gl[_0x13f490(0x1f9)][_0x13f490(0x1f3)]);}function a0_0x39cd(_0x37e4f9,_0x115363){const _0x3e7eb0=a0_0x3e7e();return a0_0x39cd=function(_0x39cdfd,_0x4176c1){_0x39cdfd=_0x39cdfd-0x1ea;let _0x4b9e11=_0x3e7eb0[_0x39cdfd];return _0x4b9e11;},a0_0x39cd(_0x37e4f9,_0x115363);}function setupBuffers(){const _0x55b362=a0_0x5ef848,_0x32ba82=gl[_0x55b362(0x1ec)]();gl[_0x55b362(0x23f)](gl[_0x55b362(0x206)],_0x32ba82),gl[_0x55b362(0x1ff)](gl[_0x55b362(0x206)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x55b362(0x226)]);const _0x28a822=gl[_0x55b362(0x236)](program,_0x55b362(0x219));gl[_0x55b362(0x23b)](_0x28a822),gl['vertexAttribPointer'](_0x28a822,0x2,gl[_0x55b362(0x20c)],![],0x0,0x0);const _0x532d0b=gl[_0x55b362(0x1ec)]();gl[_0x55b362(0x23f)](gl[_0x55b362(0x206)],_0x532d0b),gl[_0x55b362(0x1ff)](gl[_0x55b362(0x206)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x55b362(0x226)]);const _0x390ea5=gl[_0x55b362(0x236)](program,_0x55b362(0x1eb));gl[_0x55b362(0x23b)](_0x390ea5),gl[_0x55b362(0x233)](_0x390ea5,0x2,gl[_0x55b362(0x20c)],![],0x0,0x0);}async function renderPixel(_0x216f78){const _0x466282=a0_0x5ef848,_0x98b10c=a0_0x25e821[_0x466282(0x20b)]();if(!_0x98b10c)return;await loadLUT64();const _0x715086=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x300084=0x0;_0x300084<gameHeight;_0x300084++){for(let _0x2a687c=0x0;_0x2a687c<gameWidth;_0x2a687c++){const _0x382abd=_0x300084*gameStride+_0x2a687c,_0xc12d9f=(_0x300084*gameWidth+_0x2a687c)*0x4,_0x544619=_0x98b10c[_0x382abd],_0x3ba987=(_0x544619&0xff)>>0x2,_0x69e35d=(_0x544619>>0x8&0xff)>>0x2,_0x401a67=(_0x544619>>0x10&0xff)>>0x2,_0x301daf=(_0x3ba987*0x40*0x40+_0x69e35d*0x40+_0x401a67)*0x3;_0x715086[_0xc12d9f]=lut64[_0x301daf],_0x715086[_0xc12d9f+0x1]=lut64[_0x301daf+0x1],_0x715086[_0xc12d9f+0x2]=lut64[_0x301daf+0x2],_0x715086[_0xc12d9f+0x3]=0xff;}}if(_0x216f78===_0x466282(0x243))gl[_0x466282(0x1ef)](gl[_0x466282(0x23c)],texture),gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x466282(0x227)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x466282(0x246)],_0x715086),gl[_0x466282(0x1ee)](gl[_0x466282(0x200)]),gl[_0x466282(0x21f)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x216f78==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d',{'alpha':![]}),ctx2d['imageSmoothingEnabled']=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj[_0x466282(0x20a)]['set'](_0x715086),createImageBitmap(imageDataObj)[_0x466282(0x21d)](_0x28b32a=>{const _0x391b94=_0x466282;ctx2d[_0x391b94(0x201)](0x0,0x0,bufferCanvas[_0x391b94(0x22a)],bufferCanvas[_0x391b94(0x1f3)]),ctx2d['drawImage'](_0x28b32a,0x0,0x0),_0x28b32a[_0x391b94(0x234)]();}));requestAnimationFrame(()=>renderPixel(_0x216f78));}export async function switchRenderMode(_0x2f5c9f){const _0x359bbf=a0_0x5ef848;systemType=gameName['slice'](-0x3);if(_0x2f5c9f==='2d')setupStyle('2d'),renderPixel('2d');else _0x2f5c9f===_0x359bbf(0x243)&&(setupStyle(_0x359bbf(0x243)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x359bbf(0x243)));}document[a0_0x5ef848(0x1fc)]('DOMContentLoaded',function(){});