const a0_0x41b976=a0_0x4057;(function(_0x5c9f5c,_0x6152cf){const _0x2e23c2=a0_0x4057,_0x569ea2=_0x5c9f5c();while(!![]){try{const _0x1b06cf=parseInt(_0x2e23c2(0x1a1))/0x1+parseInt(_0x2e23c2(0x156))/0x2*(parseInt(_0x2e23c2(0x17b))/0x3)+-parseInt(_0x2e23c2(0x172))/0x4*(parseInt(_0x2e23c2(0x147))/0x5)+-parseInt(_0x2e23c2(0x1a3))/0x6*(parseInt(_0x2e23c2(0x16c))/0x7)+-parseInt(_0x2e23c2(0x188))/0x8+parseInt(_0x2e23c2(0x163))/0x9*(parseInt(_0x2e23c2(0x16e))/0xa)+-parseInt(_0x2e23c2(0x149))/0xb*(-parseInt(_0x2e23c2(0x183))/0xc);if(_0x1b06cf===_0x6152cf)break;else _0x569ea2['push'](_0x569ea2['shift']());}catch(_0x171f05){_0x569ea2['push'](_0x569ea2['shift']());}}}(a0_0x5d97,0x32b04));import*as a0_0x163f31 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x41b976(0x184)](a0_0x41b976(0x190)),bufferCanvas=document[a0_0x41b976(0x184)](a0_0x41b976(0x185)),canvasContainer=document[a0_0x41b976(0x184)]('canvas-container'),imgShader=document['getElementById'](a0_0x41b976(0x171)),settingContainer=document[a0_0x41b976(0x144)](a0_0x41b976(0x165)),messageContainer=document[a0_0x41b976(0x144)]('.message-container'),stateTitle=document[a0_0x41b976(0x144)](a0_0x41b976(0x170));let imageDataObj=null;async function loadLUT64(){const _0x1679e6=a0_0x41b976;systemType=gameName[_0x1679e6(0x192)](-0x3);const _0x2667f0=localStorage['getItem'](gameName+_0x1679e6(0x14e))||_0x1679e6(0x166),_0x5507f2=(localStorage[_0x1679e6(0x19d)](gameName+_0x1679e6(0x167))||'warm')[_0x1679e6(0x19e)]();if(!lut64||lut64Streng!==_0x2667f0||lut64Profile!==_0x5507f2){const _0x2a23df='./src/lut/lut64_'+_0x5507f2+'_'+_0x2667f0+_0x1679e6(0x18a);console[_0x1679e6(0x194)](_0x2a23df);const _0x56ae3d=await fetch(_0x2a23df),_0x3559eb=await _0x56ae3d[_0x1679e6(0x16b)]();lut64=new Uint8Array(_0x3559eb),lut64Streng=_0x2667f0,lut64Profile=_0x5507f2;}}async function loadShaderSource(_0x30c03f){const _0x465900=a0_0x41b976,_0x4622d5=await fetch(_0x30c03f);return await _0x4622d5[_0x465900(0x162)]();}function setupStyle(_0xfed9aa){const _0x2cda9f=a0_0x41b976;clientWidth=document['documentElement']['clientWidth'];const _0x5378f7=window[_0x2cda9f(0x19b)];systemType===_0x2cda9f(0x1a2)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x2cda9f(0x176)](clientWidth*_0x5378f7/gameWidth),localStorage['setItem']('screenSize',_0x2cda9f(0x14b)+gameWidth*(integerScaling/_0x5378f7)+','+gameHeight*(integerScaling/_0x5378f7))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x2cda9f(0x176)](clientWidth*_0x5378f7/gameWidth),localStorage[_0x2cda9f(0x14c)]('screenSize',_0x2cda9f(0x14b)+gameWidth*(integerScaling/_0x5378f7)+','+gameHeight*(integerScaling/_0x5378f7)));if(_0xfed9aa==='2d')bufferCanvas[_0x2cda9f(0x180)]=gameWidth,bufferCanvas[_0x2cda9f(0x1a4)]=gameHeight,bufferCanvas[_0x2cda9f(0x17f)][_0x2cda9f(0x15e)]=''+integerScaling/_0x5378f7,bufferCanvas[_0x2cda9f(0x17f)][_0x2cda9f(0x178)]=_0x2cda9f(0x146),canvasContainer[_0x2cda9f(0x17f)][_0x2cda9f(0x180)]=gameWidth*(integerScaling/_0x5378f7)+'px',canvasContainer[_0x2cda9f(0x17f)][_0x2cda9f(0x1a4)]=gameHeight*(integerScaling/_0x5378f7)+'px',textured[_0x2cda9f(0x17f)][_0x2cda9f(0x180)]=gameWidth*(integerScaling/_0x5378f7)+'px',textured[_0x2cda9f(0x17f)][_0x2cda9f(0x1a4)]=gameHeight*(integerScaling/_0x5378f7)+'px',imgShader[_0x2cda9f(0x17f)]['transform']=_0x2cda9f(0x155)+integerScaling/_0x5378f7/upscaleShader+')',settingContainer[_0x2cda9f(0x17a)](function(_0x8b007a){const _0x4cb23f=_0x2cda9f;_0x8b007a[_0x4cb23f(0x17f)][_0x4cb23f(0x180)]=gameWidth*(integerScaling/_0x5378f7)+'px',_0x8b007a[_0x4cb23f(0x17f)][_0x4cb23f(0x1a4)]=gameHeight*(integerScaling/_0x5378f7)+'px';}),messageContainer[_0x2cda9f(0x17a)](function(_0x4d1c78){const _0x9615a4=_0x2cda9f;_0x4d1c78[_0x9615a4(0x17f)][_0x9615a4(0x180)]=gameWidth+'px',_0x4d1c78[_0x9615a4(0x17f)][_0x9615a4(0x1a4)]=gameHeight+'px',_0x4d1c78[_0x9615a4(0x17f)]['zoom']=''+integerScaling/_0x5378f7;}),stateTitle['forEach'](function(_0x3839c3){const _0x1c6510=_0x2cda9f;_0x3839c3[_0x1c6510(0x145)]['remove'](_0x1c6510(0x161));});else _0xfed9aa===_0x2cda9f(0x1a7)&&(bufferCanvas[_0x2cda9f(0x180)]=clientWidth*upscaleFactor,bufferCanvas[_0x2cda9f(0x1a4)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x2cda9f(0x17f)][_0x2cda9f(0x15e)]=''+0x1/upscaleFactor,bufferCanvas[_0x2cda9f(0x17f)][_0x2cda9f(0x178)]='',canvasContainer[_0x2cda9f(0x17f)][_0x2cda9f(0x180)]=clientWidth+'px',canvasContainer[_0x2cda9f(0x17f)][_0x2cda9f(0x1a4)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x2cda9f(0x17f)][_0x2cda9f(0x180)]=clientWidth+'px',textured[_0x2cda9f(0x17f)][_0x2cda9f(0x1a4)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x2cda9f(0x17f)][_0x2cda9f(0x173)]=_0x2cda9f(0x155)+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x1136a2){const _0x117fae=_0x2cda9f;_0x1136a2[_0x117fae(0x17f)]['width']=clientWidth+'px',_0x1136a2[_0x117fae(0x17f)][_0x117fae(0x1a4)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x2cda9f(0x17a)](function(_0x2f3233){const _0x240996=_0x2cda9f;_0x2f3233[_0x240996(0x17f)]['width']=gameWidth+'px',_0x2f3233[_0x240996(0x17f)]['height']=gameHeight+'px',_0x2f3233[_0x240996(0x17f)]['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x2cda9f(0x17a)](function(_0x4aff6a){const _0x5d8f9c=_0x2cda9f;_0x4aff6a[_0x5d8f9c(0x145)]['add'](_0x5d8f9c(0x161));}));imgShader[_0x2cda9f(0x17f)][_0x2cda9f(0x180)]=gameWidth*upscaleShader+'px',imgShader[_0x2cda9f(0x17f)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x2cda9f(0x17f)][_0x2cda9f(0x158)]=_0x2cda9f(0x1a0),imgShader[_0x2cda9f(0x17f)][_0x2cda9f(0x1a8)]('--bg-size',upscaleShader+_0x2cda9f(0x15f)+upscaleShader+'px');}function a0_0x4057(_0x3a6242,_0x477f49){const _0x5d9799=a0_0x5d97();return a0_0x4057=function(_0x4057b3,_0x2c59c8){_0x4057b3=_0x4057b3-0x144;let _0x4a4143=_0x5d9799[_0x4057b3];return _0x4a4143;},a0_0x4057(_0x3a6242,_0x477f49);}function setupWebGL(){const _0x28edad=a0_0x41b976;gl=bufferCanvas['getContext']('webgl2');if(!gl)return console[_0x28edad(0x154)](_0x28edad(0x152)),null;gl[_0x28edad(0x150)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x28edad(0x1a4)]);}function createShader(_0x47d76b,_0x40332c){const _0x302810=a0_0x41b976,_0x557d87=gl['createShader'](_0x47d76b);gl['shaderSource'](_0x557d87,_0x40332c),gl[_0x302810(0x199)](_0x557d87);if(!gl['getShaderParameter'](_0x557d87,gl[_0x302810(0x16f)]))return console[_0x302810(0x154)](gl['getShaderInfoLog'](_0x557d87)),gl[_0x302810(0x18c)](_0x557d87),null;return _0x557d87;}async function setupShaders(){const _0x4d881f=a0_0x41b976,_0x51b1f5=await loadShaderSource(_0x4d881f(0x1a5)),_0x246d65=await loadShaderSource(_0x4d881f(0x14f)),_0x439d7f=createShader(gl[_0x4d881f(0x159)],_0x51b1f5),_0x16383c=createShader(gl[_0x4d881f(0x1a6)],_0x246d65);return program=gl[_0x4d881f(0x18e)](),gl[_0x4d881f(0x191)](program,_0x439d7f),gl[_0x4d881f(0x191)](program,_0x16383c),gl[_0x4d881f(0x17d)](program),gl[_0x4d881f(0x16d)](program),program;}function setupTexture(){const _0x1b6705=a0_0x41b976;texture=gl[_0x1b6705(0x18d)](),gl[_0x1b6705(0x174)](gl[_0x1b6705(0x197)],texture),gl[_0x1b6705(0x196)](gl[_0x1b6705(0x197)],gl['TEXTURE_MIN_FILTER'],gl[_0x1b6705(0x19c)]),gl[_0x1b6705(0x196)](gl[_0x1b6705(0x197)],gl[_0x1b6705(0x186)],gl['NEAREST']),gl[_0x1b6705(0x196)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0x1b6705(0x14d)]),gl[_0x1b6705(0x196)](gl[_0x1b6705(0x197)],gl[_0x1b6705(0x17e)],gl[_0x1b6705(0x14d)]),gl[_0x1b6705(0x193)](gl[_0x1b6705(0x15b)](program,'game_size'),gameWidth,gameHeight),gl['uniform2f'](gl['getUniformLocation'](program,_0x1b6705(0x19a)),gl[_0x1b6705(0x185)]['width'],gl[_0x1b6705(0x185)][_0x1b6705(0x1a4)]),gl['uniform1f'](gl[_0x1b6705(0x15b)](program,_0x1b6705(0x177)),gameWidth/gl['canvas'][_0x1b6705(0x180)]),gl['uniform1f'](gl[_0x1b6705(0x15b)](program,_0x1b6705(0x153)),gameHeight/gl['canvas'][_0x1b6705(0x1a4)]);}function setupBuffers(){const _0x1a9331=a0_0x41b976,_0x17eeed=gl['createBuffer']();gl[_0x1a9331(0x14a)](gl[_0x1a9331(0x18b)],_0x17eeed),gl[_0x1a9331(0x195)](gl[_0x1a9331(0x18b)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x1a9331(0x15c)]);const _0x5c0138=gl[_0x1a9331(0x187)](program,_0x1a9331(0x179));gl[_0x1a9331(0x148)](_0x5c0138),gl['vertexAttribPointer'](_0x5c0138,0x2,gl['FLOAT'],![],0x0,0x0);const _0x43cc76=gl['createBuffer']();gl['bindBuffer'](gl[_0x1a9331(0x18b)],_0x43cc76),gl[_0x1a9331(0x195)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x1a9331(0x15c)]);const _0x1c3db9=gl[_0x1a9331(0x187)](program,_0x1a9331(0x182));gl['enableVertexAttribArray'](_0x1c3db9),gl[_0x1a9331(0x175)](_0x1c3db9,0x2,gl[_0x1a9331(0x164)],![],0x0,0x0);}async function renderPixel(_0x2595cd){const _0x32d45f=a0_0x41b976,_0x5a1249=a0_0x163f31[_0x32d45f(0x181)]();if(!_0x5a1249)return;await loadLUT64();const _0x20c541=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1b5387=0x0;_0x1b5387<gameHeight;_0x1b5387++){for(let _0x3e6e07=0x0;_0x3e6e07<gameWidth;_0x3e6e07++){const _0x4c9abf=_0x1b5387*gameStride+_0x3e6e07,_0x13a2da=(_0x1b5387*gameWidth+_0x3e6e07)*0x4,_0x2956a7=_0x5a1249[_0x4c9abf],_0x52d5c7=(_0x2956a7&0xff)>>0x2,_0x148700=(_0x2956a7>>0x8&0xff)>>0x2,_0x88b50d=(_0x2956a7>>0x10&0xff)>>0x2,_0x1dfd88=(_0x52d5c7*0x40*0x40+_0x148700*0x40+_0x88b50d)*0x3;_0x20c541[_0x13a2da]=lut64[_0x1dfd88],_0x20c541[_0x13a2da+0x1]=lut64[_0x1dfd88+0x1],_0x20c541[_0x13a2da+0x2]=lut64[_0x1dfd88+0x2],_0x20c541[_0x13a2da+0x3]=0xff;}}if(_0x2595cd===_0x32d45f(0x1a7))gl[_0x32d45f(0x174)](gl[_0x32d45f(0x197)],texture),gl[_0x32d45f(0x151)](gl['TEXTURE_2D'],0x0,gl[_0x32d45f(0x17c)],gameWidth,gameHeight,0x0,gl[_0x32d45f(0x17c)],gl['UNSIGNED_BYTE'],_0x20c541),gl[_0x32d45f(0x15a)](gl[_0x32d45f(0x168)]),gl[_0x32d45f(0x169)](gl[_0x32d45f(0x189)],0x0,0x4);else _0x2595cd==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d',{'alpha':![]}),ctx2d[_0x32d45f(0x157)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj[_0x32d45f(0x18f)][_0x32d45f(0x19f)](_0x20c541),createImageBitmap(imageDataObj)[_0x32d45f(0x160)](_0x1aaa3d=>{const _0x30fc4f=_0x32d45f;ctx2d[_0x30fc4f(0x15d)](0x0,0x0,bufferCanvas[_0x30fc4f(0x180)],bufferCanvas[_0x30fc4f(0x1a4)]),ctx2d[_0x30fc4f(0x198)](_0x1aaa3d,0x0,0x0),_0x1aaa3d['close']();}));requestAnimationFrame(()=>renderPixel(_0x2595cd));}function a0_0x5d97(){const _0x21e252=['setItem','CLAMP_TO_EDGE','_streng','./src/shaders/fragmentShader.glsl','viewport','texImage2D','WebGL2\x20not\x20supported','smooth_height','error','scale(','14xENHyu','imageSmoothingEnabled','transformOrigin','VERTEX_SHADER','clear','getUniformLocation','STATIC_DRAW','clearRect','zoom','px\x20','then','fefs','text','265077QOzNrM','FLOAT','.setting-container','4.0','_temperature','COLOR_BUFFER_BIT','drawArrays','DOMContentLoaded','arrayBuffer','22225TdZMrg','useProgram','30IXUGCA','COMPILE_STATUS','.stateTitle,\x20.stateDate','img-shader','351964yRpMuv','transform','bindTexture','vertexAttribPointer','floor','smooth_width','imageRendering','position','forEach','127545TLAxyk','RGBA','linkProgram','TEXTURE_WRAP_T','style','width','getPixelData','texcoord','9453876BSkuzK','getElementById','canvas','TEXTURE_MAG_FILTER','getAttribLocation','2836912qFELDh','TRIANGLE_STRIP','.bin','ARRAY_BUFFER','deleteShader','createTexture','createProgram','data','textured','attachShader','slice','uniform2f','log','bufferData','texParameteri','TEXTURE_2D','drawImage','compileShader','render_size','devicePixelRatio','NEAREST','getItem','toLowerCase','set','top\x20center','30245qpHfnf','gbc','714gcYwhQ','height','./src/shaders/vertexShader.glsl','FRAGMENT_SHADER','webgl2','setProperty','querySelectorAll','classList','crisp-edges','15oKdzsn','enableVertexAttribArray','11kgmGjq','bindBuffer','0,0,'];a0_0x5d97=function(){return _0x21e252;};return a0_0x5d97();}export async function switchRenderMode(_0x348c40){const _0x591ca7=a0_0x41b976;systemType=gameName[_0x591ca7(0x192)](-0x3);if(_0x348c40==='2d')setupStyle('2d'),renderPixel('2d');else _0x348c40===_0x591ca7(0x1a7)&&(setupStyle(_0x591ca7(0x1a7)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x591ca7(0x1a7)));}document['addEventListener'](a0_0x41b976(0x16a),function(){});