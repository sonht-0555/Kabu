const a0_0x1ac65a=a0_0x131d;(function(_0x47277a,_0x167867){const _0x17931e=a0_0x131d,_0x4dbf17=_0x47277a();while(!![]){try{const _0x31d5b3=-parseInt(_0x17931e(0xbb))/0x1*(-parseInt(_0x17931e(0xb8))/0x2)+-parseInt(_0x17931e(0xd8))/0x3+-parseInt(_0x17931e(0xdf))/0x4*(-parseInt(_0x17931e(0xac))/0x5)+parseInt(_0x17931e(0xc8))/0x6+parseInt(_0x17931e(0xa1))/0x7*(-parseInt(_0x17931e(0xa9))/0x8)+-parseInt(_0x17931e(0xad))/0x9+parseInt(_0x17931e(0xf5))/0xa;if(_0x31d5b3===_0x167867)break;else _0x4dbf17['push'](_0x4dbf17['shift']());}catch(_0x1e822d){_0x4dbf17['push'](_0x4dbf17['shift']());}}}(a0_0x343b,0x3c148));function a0_0x131d(_0x3f7eab,_0x454fde){const _0x343b04=a0_0x343b();return a0_0x131d=function(_0x131d1a,_0x58e173){_0x131d1a=_0x131d1a-0x9e;let _0x52d1ee=_0x343b04[_0x131d1a];return _0x52d1ee;},a0_0x131d(_0x3f7eab,_0x454fde);}import*as a0_0x289101 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x1ac65a(0xcc)](a0_0x1ac65a(0xb0)),bufferCanvas=document['getElementById'](a0_0x1ac65a(0xfa)),canvasContainer=document[a0_0x1ac65a(0xcc)](a0_0x1ac65a(0x104)),imgShader=document[a0_0x1ac65a(0xcc)](a0_0x1ac65a(0xd5)),settingContainer=document[a0_0x1ac65a(0xb5)](a0_0x1ac65a(0x101)),messageContainer=document['querySelectorAll'](a0_0x1ac65a(0xe8)),stateTitle=document['querySelectorAll'](a0_0x1ac65a(0xf0));let imageDataObj=null;async function loadLUT64(){const _0x4dc704=a0_0x1ac65a;systemType=gameName[_0x4dc704(0xcd)](-0x3);const _0x575ef8=localStorage[_0x4dc704(0x103)](gameName+'_streng')||'4.0',_0x2d6133=(localStorage[_0x4dc704(0x103)](gameName+_0x4dc704(0xbc))||'warm')[_0x4dc704(0xf8)]();if(!lut64||lut64Streng!==_0x575ef8||lut64Profile!==_0x2d6133){const _0x24ed5d=_0x4dc704(0xca)+_0x2d6133+'_'+_0x575ef8+_0x4dc704(0xb3);console[_0x4dc704(0xe5)](_0x24ed5d);const _0x37963e=await fetch(_0x24ed5d),_0x3d2f9a=await _0x37963e['arrayBuffer']();lut64=new Uint8Array(_0x3d2f9a),lut64Streng=_0x575ef8,lut64Profile=_0x2d6133;}}async function loadShaderSource(_0x1f33b3){const _0x1735ea=a0_0x1ac65a,_0x57d275=await fetch(_0x1f33b3);return await _0x57d275[_0x1735ea(0xfd)]();}function setupStyle(_0x550c42){const _0x520dd0=a0_0x1ac65a;clientWidth=document['documentElement'][_0x520dd0(0xa4)];const _0xbb3d94=window[_0x520dd0(0xc7)];systemType===_0x520dd0(0xcf)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0xbb3d94/gameWidth),localStorage[_0x520dd0(0xc4)](_0x520dd0(0xe0),_0x520dd0(0xc2)+gameWidth*(integerScaling/_0xbb3d94)+','+gameHeight*(integerScaling/_0xbb3d94))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x520dd0(0xd3)](clientWidth*_0xbb3d94/gameWidth),localStorage['setItem'](_0x520dd0(0xe0),_0x520dd0(0xc2)+gameWidth*(integerScaling/_0xbb3d94)+','+gameHeight*(integerScaling/_0xbb3d94)));if(_0x550c42==='2d')bufferCanvas['width']=gameWidth,bufferCanvas[_0x520dd0(0xf4)]=gameHeight,bufferCanvas['style'][_0x520dd0(0xa3)]=''+integerScaling/_0xbb3d94,bufferCanvas[_0x520dd0(0xc3)][_0x520dd0(0xb2)]=_0x520dd0(0xbd),canvasContainer[_0x520dd0(0xc3)][_0x520dd0(0xd9)]=gameWidth*(integerScaling/_0xbb3d94)+'px',canvasContainer[_0x520dd0(0xc3)][_0x520dd0(0xf4)]=gameHeight*(integerScaling/_0xbb3d94)+'px',textured[_0x520dd0(0xc3)][_0x520dd0(0xd9)]=gameWidth*(integerScaling/_0xbb3d94)+'px',textured[_0x520dd0(0xc3)][_0x520dd0(0xf4)]=gameHeight*(integerScaling/_0xbb3d94)+'px',imgShader['style'][_0x520dd0(0xe2)]=_0x520dd0(0x105)+integerScaling/_0xbb3d94/upscaleShader+')',settingContainer['forEach'](function(_0x4725ab){const _0x2bfed9=_0x520dd0;_0x4725ab[_0x2bfed9(0xc3)]['width']=gameWidth*(integerScaling/_0xbb3d94)+'px',_0x4725ab[_0x2bfed9(0xc3)][_0x2bfed9(0xf4)]=gameHeight*(integerScaling/_0xbb3d94)+'px';}),messageContainer[_0x520dd0(0xf3)](function(_0x51b03d){const _0x4ea65b=_0x520dd0;_0x51b03d[_0x4ea65b(0xc3)][_0x4ea65b(0xd9)]=gameWidth+'px',_0x51b03d[_0x4ea65b(0xc3)][_0x4ea65b(0xf4)]=gameHeight+'px',_0x51b03d[_0x4ea65b(0xc3)]['zoom']=''+integerScaling/_0xbb3d94;}),stateTitle[_0x520dd0(0xf3)](function(_0x3c1150){const _0x4ab548=_0x520dd0;_0x3c1150[_0x4ab548(0xb7)][_0x4ab548(0xa6)](_0x4ab548(0xef));});else _0x550c42===_0x520dd0(0xd7)&&(bufferCanvas[_0x520dd0(0xd9)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x520dd0(0xc3)][_0x520dd0(0xa3)]=''+0x1/upscaleFactor,bufferCanvas[_0x520dd0(0xc3)][_0x520dd0(0xb2)]='',canvasContainer[_0x520dd0(0xc3)]['width']=clientWidth+'px',canvasContainer[_0x520dd0(0xc3)][_0x520dd0(0xf4)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x520dd0(0xc3)][_0x520dd0(0xd9)]=clientWidth+'px',textured[_0x520dd0(0xc3)][_0x520dd0(0xf4)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x520dd0(0xc3)]['transform']=_0x520dd0(0x105)+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x55c6d1){const _0x466294=_0x520dd0;_0x55c6d1[_0x466294(0xc3)][_0x466294(0xd9)]=clientWidth+'px',_0x55c6d1[_0x466294(0xc3)][_0x466294(0xf4)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x520dd0(0xf3)](function(_0x267a57){const _0x20c8d0=_0x520dd0;_0x267a57[_0x20c8d0(0xc3)][_0x20c8d0(0xd9)]=gameWidth+'px',_0x267a57[_0x20c8d0(0xc3)][_0x20c8d0(0xf4)]=gameHeight+'px',_0x267a57[_0x20c8d0(0xc3)]['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x520dd0(0xf3)](function(_0x158e0c){const _0x15a490=_0x520dd0;_0x158e0c[_0x15a490(0xb7)][_0x15a490(0x106)](_0x15a490(0xef));}));imgShader[_0x520dd0(0xc3)]['width']=gameWidth*upscaleShader+'px',imgShader['style'][_0x520dd0(0xf4)]=gameHeight*upscaleShader+'px',imgShader[_0x520dd0(0xc3)][_0x520dd0(0xa0)]=_0x520dd0(0xa2),imgShader['style']['setProperty'](_0x520dd0(0xe6),upscaleShader+_0x520dd0(0xed)+upscaleShader+'px');}function setupWebGL(){const _0x16a412=a0_0x1ac65a;gl=bufferCanvas[_0x16a412(0xf9)](_0x16a412(0xd7));if(!gl)return console[_0x16a412(0x102)](_0x16a412(0xae)),null;gl[_0x16a412(0xd4)](0x0,0x0,bufferCanvas[_0x16a412(0xd9)],bufferCanvas['height']);}function createShader(_0x449658,_0x3f2fbf){const _0x420ee2=a0_0x1ac65a,_0xed9e86=gl['createShader'](_0x449658);gl[_0x420ee2(0xdc)](_0xed9e86,_0x3f2fbf),gl[_0x420ee2(0xeb)](_0xed9e86);if(!gl[_0x420ee2(0xa5)](_0xed9e86,gl['COMPILE_STATUS']))return console[_0x420ee2(0x102)](gl[_0x420ee2(0xce)](_0xed9e86)),gl[_0x420ee2(0xa8)](_0xed9e86),null;return _0xed9e86;}async function setupShaders(){const _0x2014c9=a0_0x1ac65a,_0x3f87e6=await loadShaderSource(_0x2014c9(0xc1)),_0x48864e=await loadShaderSource(_0x2014c9(0xab)),_0x4f1796=createShader(gl[_0x2014c9(0xd0)],_0x3f87e6),_0x32c737=createShader(gl[_0x2014c9(0xc5)],_0x48864e);return program=gl[_0x2014c9(0xfe)](),gl['attachShader'](program,_0x4f1796),gl[_0x2014c9(0xff)](program,_0x32c737),gl[_0x2014c9(0xb4)](program),gl[_0x2014c9(0x9e)](program),program;}function setupTexture(){const _0x750f48=a0_0x1ac65a;texture=gl['createTexture'](),gl[_0x750f48(0xbe)](gl[_0x750f48(0xb6)],texture),gl[_0x750f48(0xde)](gl['TEXTURE_2D'],gl[_0x750f48(0xea)],gl[_0x750f48(0xb9)]),gl[_0x750f48(0xde)](gl[_0x750f48(0xb6)],gl[_0x750f48(0xf1)],gl[_0x750f48(0xb9)]),gl[_0x750f48(0xde)](gl['TEXTURE_2D'],gl[_0x750f48(0x100)],gl[_0x750f48(0xb1)]),gl['texParameteri'](gl[_0x750f48(0xb6)],gl[_0x750f48(0xa7)],gl[_0x750f48(0xb1)]),gl[_0x750f48(0xfb)](gl[_0x750f48(0xf7)](program,_0x750f48(0xc0)),gameWidth,gameHeight),gl[_0x750f48(0xfb)](gl[_0x750f48(0xf7)](program,_0x750f48(0xdd)),gl[_0x750f48(0xfa)]['width'],gl[_0x750f48(0xfa)][_0x750f48(0xf4)]),gl[_0x750f48(0xe9)](gl['getUniformLocation'](program,'smooth_width'),gameWidth/gl[_0x750f48(0xfa)][_0x750f48(0xd9)]),gl[_0x750f48(0xe9)](gl[_0x750f48(0xf7)](program,_0x750f48(0xe4)),gameHeight/gl[_0x750f48(0xfa)][_0x750f48(0xf4)]);}function a0_0x343b(){const _0x488f5d=['TEXTURE_MAG_FILTER','getPixelData','forEach','height','237390QVEvRy','then','getUniformLocation','toLowerCase','getContext','canvas','uniform2f','texcoord','text','createProgram','attachShader','TEXTURE_WRAP_S','.setting-container','error','getItem','canvas-container','scale(','add','useProgram','bufferData','transformOrigin','21nGHmhZ','top\x20center','zoom','clientWidth','getShaderParameter','remove','TEXTURE_WRAP_T','deleteShader','480160aQHpKu','bindBuffer','./src/shaders/fragmentShader.glsl','62350VaMpeV','4238451TzePYU','WebGL2\x20not\x20supported','position','textured','CLAMP_TO_EDGE','imageRendering','.bin','linkProgram','querySelectorAll','TEXTURE_2D','classList','4ycfXvo','NEAREST','clear','163311MnMrAc','_temperature','crisp-edges','bindTexture','set','game_size','./src/shaders/vertexShader.glsl','0,0,','style','setItem','FRAGMENT_SHADER','createBuffer','devicePixelRatio','1361988zbioNb','texImage2D','./src/lut/lut64_','ARRAY_BUFFER','getElementById','slice','getShaderInfoLog','gbc','VERTEX_SHADER','close','drawArrays','floor','viewport','img-shader','DOMContentLoaded','webgl2','237936lCLdQO','width','STATIC_DRAW','FLOAT','shaderSource','render_size','texParameteri','128mcyCiE','screenSize','enableVertexAttribArray','transform','UNSIGNED_BYTE','smooth_height','log','--bg-size','vertexAttribPointer','.message-container','uniform1f','TEXTURE_MIN_FILTER','compileShader','drawImage','px\x20','RGBA','fefs','.stateTitle,\x20.stateDate'];a0_0x343b=function(){return _0x488f5d;};return a0_0x343b();}function setupBuffers(){const _0xfdbf8d=a0_0x1ac65a,_0x5f9ec=gl[_0xfdbf8d(0xc6)]();gl[_0xfdbf8d(0xaa)](gl[_0xfdbf8d(0xcb)],_0x5f9ec),gl[_0xfdbf8d(0x9f)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x3f2214=gl['getAttribLocation'](program,_0xfdbf8d(0xaf));gl['enableVertexAttribArray'](_0x3f2214),gl[_0xfdbf8d(0xe7)](_0x3f2214,0x2,gl[_0xfdbf8d(0xdb)],![],0x0,0x0);const _0x2243ca=gl[_0xfdbf8d(0xc6)]();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x2243ca),gl['bufferData'](gl[_0xfdbf8d(0xcb)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0xfdbf8d(0xda)]);const _0x42debd=gl['getAttribLocation'](program,_0xfdbf8d(0xfc));gl[_0xfdbf8d(0xe1)](_0x42debd),gl[_0xfdbf8d(0xe7)](_0x42debd,0x2,gl[_0xfdbf8d(0xdb)],![],0x0,0x0);}async function renderPixel(_0x5e8bc9){const _0x137d00=a0_0x1ac65a,_0x5eb28a=a0_0x289101[_0x137d00(0xf2)]();if(!_0x5eb28a)return;await loadLUT64();const _0x5899a1=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2a0d34=0x0;_0x2a0d34<gameHeight;_0x2a0d34++){for(let _0x3db70c=0x0;_0x3db70c<gameWidth;_0x3db70c++){const _0x578d65=_0x2a0d34*gameStride+_0x3db70c,_0x4361a7=(_0x2a0d34*gameWidth+_0x3db70c)*0x4,_0x11c151=_0x5eb28a[_0x578d65],_0x2fdc45=(_0x11c151&0xff)>>0x2,_0x12ba23=(_0x11c151>>0x8&0xff)>>0x2,_0x12bd53=(_0x11c151>>0x10&0xff)>>0x2,_0xd7b947=(_0x2fdc45*0x40*0x40+_0x12ba23*0x40+_0x12bd53)*0x3;_0x5899a1[_0x4361a7]=lut64[_0xd7b947],_0x5899a1[_0x4361a7+0x1]=lut64[_0xd7b947+0x1],_0x5899a1[_0x4361a7+0x2]=lut64[_0xd7b947+0x2],_0x5899a1[_0x4361a7+0x3]=0xff;}}if(_0x5e8bc9===_0x137d00(0xd7))gl[_0x137d00(0xbe)](gl[_0x137d00(0xb6)],texture),gl[_0x137d00(0xc9)](gl['TEXTURE_2D'],0x0,gl[_0x137d00(0xee)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x137d00(0xe3)],_0x5899a1),gl[_0x137d00(0xba)](gl['COLOR_BUFFER_BIT']),gl[_0x137d00(0xd2)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x5e8bc9==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas[_0x137d00(0xf9)]('2d',{'alpha':![]}),ctx2d['imageSmoothingEnabled']=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj['data'][_0x137d00(0xbf)](_0x5899a1),createImageBitmap(imageDataObj)[_0x137d00(0xf6)](_0x2fd03a=>{const _0x21e10e=_0x137d00;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x21e10e(0xd9)],bufferCanvas[_0x21e10e(0xf4)]),ctx2d[_0x21e10e(0xec)](_0x2fd03a,0x0,0x0),_0x2fd03a[_0x21e10e(0xd1)]();}));requestAnimationFrame(()=>renderPixel(_0x5e8bc9));}export async function switchRenderMode(_0xd39dfe){const _0x5bbad8=a0_0x1ac65a;systemType=gameName[_0x5bbad8(0xcd)](-0x3);if(_0xd39dfe==='2d')setupStyle('2d'),renderPixel('2d');else _0xd39dfe===_0x5bbad8(0xd7)&&(setupStyle(_0x5bbad8(0xd7)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x5bbad8(0xd7)));}document['addEventListener'](a0_0x1ac65a(0xd6),function(){});