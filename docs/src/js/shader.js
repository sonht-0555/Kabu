(function(_0x12bc2c,_0x290052){const _0x2dfd8f=a0_0x1e0e,_0x4354fc=_0x12bc2c();while(!![]){try{const _0x38d740=-parseInt(_0x2dfd8f(0x226))/0x1+parseInt(_0x2dfd8f(0x20f))/0x2+parseInt(_0x2dfd8f(0x233))/0x3+parseInt(_0x2dfd8f(0x202))/0x4+-parseInt(_0x2dfd8f(0x203))/0x5*(-parseInt(_0x2dfd8f(0x235))/0x6)+-parseInt(_0x2dfd8f(0x229))/0x7+-parseInt(_0x2dfd8f(0x1ff))/0x8;if(_0x38d740===_0x290052)break;else _0x4354fc['push'](_0x4354fc['shift']());}catch(_0x4c49ad){_0x4354fc['push'](_0x4354fc['shift']());}}}(a0_0x4bc6,0x87220));import*as a0_0x27d9c0 from'./main.js';function a0_0x4bc6(){const _0xfc9f43=['NEAREST','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','TRIANGLE_STRIP','uniform2f','webgl_full','log','2621208GsNnLI','game_size','282ScxTQt','CLAMP_TO_EDGE','position','texImage2D','low-power','ARRAY_BUFFER','createProgram','clearRect','bindBuffer','toLowerCase','smooth_width','data','UNSIGNED_BYTE','TEXTURE_MIN_FILTER','8855504UoJVYM','getUniformLocation','none','1561328qCIcwQ','26060ImWVQS','createTexture','getItem','getContext','uniform1f','TEXTURE_2D','texParameteri','texcoord','arrayBuffer','enableVertexAttribArray','TEXTURE_MAG_FILTER','TEXTURE_WRAP_T','1781020qGBbNi','webgl','drawArrays','createBuffer','canvas','FLOAT','slice','useProgram','linkProgram','RGBA','vertexAttribPointer','bindTexture','render_size','clear','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','_temperature','smooth_height','STATIC_DRAW','getPixelData','attachShader','bufferData','width','_4.0.bin','174823Hogmxd','putImageData','height','3949939qdLcds','getAttribLocation','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','TEXTURE_WRAP_S'];a0_0x4bc6=function(){return _0xfc9f43;};return a0_0x4bc6();}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x12e709=a0_0x1e0e;systemType=gameName[_0x12e709(0x215)](-0x3);const _0x14de74=(localStorage[_0x12e709(0x205)](gameName+_0x12e709(0x21e))||_0x12e709(0x201))[_0x12e709(0x1fa)]();if(!lut64||lut64Profile!==_0x14de74){const _0x5a8c9e='./src/lut/lut64_'+_0x14de74+_0x12e709(0x225);console[_0x12e709(0x232)](_0x5a8c9e);const _0x3f1aad=await fetch(_0x5a8c9e),_0x3caaf7=await _0x3f1aad[_0x12e709(0x20b)]();lut64=new Uint8Array(_0x3caaf7),lut64Profile=_0x14de74;}}function setupWebGL_Shader(_0x39c32b){const _0x50b48e=a0_0x1e0e;gl=bufferCanvas[_0x50b48e(0x206)](_0x50b48e(0x210),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x50b48e(0x1f5)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x50b48e(0x224)],bufferCanvas[_0x50b48e(0x228)]);function _0x5e5702(_0x4bacfa,_0x52ab1f){const _0xe557a7=gl['createShader'](_0x4bacfa);return gl['shaderSource'](_0xe557a7,_0x52ab1f),gl['compileShader'](_0xe557a7),_0xe557a7;}vs=_0x50b48e(0x22e);if(_0x39c32b===_0x50b48e(0x210))fs=_0x50b48e(0x21d);else _0x39c32b==='webgl_full'&&(fs=_0x50b48e(0x22b));const _0x50f277=_0x5e5702(gl['VERTEX_SHADER'],vs),_0x698926=_0x5e5702(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x50b48e(0x1f7)](),gl[_0x50b48e(0x222)](program,_0x50f277),gl[_0x50b48e(0x222)](program,_0x698926),gl[_0x50b48e(0x217)](program),gl[_0x50b48e(0x216)](program),program;}function setupTexture_Buffer(_0x413346){const _0x283e08=a0_0x1e0e;texture=gl[_0x283e08(0x204)](),gl[_0x283e08(0x21a)](gl[_0x283e08(0x208)],texture),gl[_0x283e08(0x209)](gl[_0x283e08(0x208)],gl[_0x283e08(0x1fe)],gl['NEAREST']),gl['texParameteri'](gl[_0x283e08(0x208)],gl[_0x283e08(0x20d)],gl[_0x283e08(0x22d)]),gl[_0x283e08(0x209)](gl[_0x283e08(0x208)],gl[_0x283e08(0x22c)],gl[_0x283e08(0x236)]),gl[_0x283e08(0x209)](gl[_0x283e08(0x208)],gl[_0x283e08(0x20e)],gl['CLAMP_TO_EDGE']);_0x413346==='webgl_full'&&(gl[_0x283e08(0x230)](gl[_0x283e08(0x200)](program,_0x283e08(0x234)),gameWidth,gameHeight),gl[_0x283e08(0x230)](gl[_0x283e08(0x200)](program,_0x283e08(0x21b)),gl[_0x283e08(0x213)]['width'],gl[_0x283e08(0x213)][_0x283e08(0x228)]),gl[_0x283e08(0x207)](gl['getUniformLocation'](program,_0x283e08(0x1fb)),gameWidth/gl['canvas'][_0x283e08(0x224)]),gl[_0x283e08(0x207)](gl[_0x283e08(0x200)](program,_0x283e08(0x21f)),gameHeight/gl['canvas'][_0x283e08(0x228)]));const _0x27a461=gl[_0x283e08(0x212)]();gl['bindBuffer'](gl[_0x283e08(0x1f6)],_0x27a461),gl[_0x283e08(0x223)](gl[_0x283e08(0x1f6)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x283e08(0x219)](gl[_0x283e08(0x22a)](program,'position'),0x2,gl[_0x283e08(0x214)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x283e08(0x22a)](program,_0x283e08(0x237)));const _0x73a312=gl[_0x283e08(0x212)]();gl[_0x283e08(0x1f9)](gl[_0x283e08(0x1f6)],_0x73a312),gl['bufferData'](gl[_0x283e08(0x1f6)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x283e08(0x220)]),gl[_0x283e08(0x219)](gl[_0x283e08(0x22a)](program,_0x283e08(0x20a)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x283e08(0x20c)](gl[_0x283e08(0x22a)](program,_0x283e08(0x20a)));}function setup2DContext(){const _0x42646d=a0_0x1e0e;ctx2d=bufferCanvas[_0x42646d(0x206)]('2d'),ctx2d['imageSmoothingEnabled']=![];}function a0_0x1e0e(_0x1a1398,_0x68b570){const _0x4bc670=a0_0x4bc6();return a0_0x1e0e=function(_0x1e0e7a,_0x288a4f){_0x1e0e7a=_0x1e0e7a-0x1f4;let _0x1c1f55=_0x4bc670[_0x1e0e7a];return _0x1c1f55;},a0_0x1e0e(_0x1a1398,_0x68b570);}async function renderPixel(_0x4ea7d6){const _0x31e4db=a0_0x1e0e,_0x1439cd=a0_0x27d9c0[_0x31e4db(0x221)]();if(!_0x1439cd)return;await loadLUT64();const _0xd4b8ba=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2479a7=0x0;_0x2479a7<gameHeight;_0x2479a7++){for(let _0x16dcb8=0x0;_0x16dcb8<gameWidth;_0x16dcb8++){const _0x547e0d=_0x2479a7*gameStride+_0x16dcb8,_0x239011=(_0x2479a7*gameWidth+_0x16dcb8)*0x4,_0x44414f=_0x1439cd[_0x547e0d];if(lut64Profile==='none')_0xd4b8ba[_0x239011]=_0x44414f&0xff,_0xd4b8ba[_0x239011+0x1]=_0x44414f>>0x8&0xff,_0xd4b8ba[_0x239011+0x2]=_0x44414f>>0x10&0xff,_0xd4b8ba[_0x239011+0x3]=0xff;else{const _0x1b656c=(_0x44414f&0xff)>>0x2,_0x586da9=(_0x44414f>>0x8&0xff)>>0x2,_0x2a7ac3=(_0x44414f>>0x10&0xff)>>0x2,_0x15788b=(_0x1b656c*0x40*0x40+_0x586da9*0x40+_0x2a7ac3)*0x3;_0xd4b8ba[_0x239011]=lut64[_0x15788b],_0xd4b8ba[_0x239011+0x1]=lut64[_0x15788b+0x1],_0xd4b8ba[_0x239011+0x2]=lut64[_0x15788b+0x2],_0xd4b8ba[_0x239011+0x3]=0xff;}}}if(_0x4ea7d6===_0x31e4db(0x210))gl[_0x31e4db(0x1f4)](gl[_0x31e4db(0x208)],0x0,gl[_0x31e4db(0x218)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x31e4db(0x1fd)],_0xd4b8ba),gl[_0x31e4db(0x21c)](gl['COLOR_BUFFER_BIT']),gl[_0x31e4db(0x211)](gl[_0x31e4db(0x22f)],0x0,0x4);else _0x4ea7d6==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0xd4b8ba,gameWidth,gameHeight):imageDataObj[_0x31e4db(0x1fc)]['set'](_0xd4b8ba),ctx2d[_0x31e4db(0x1f8)](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']),ctx2d[_0x31e4db(0x227)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x4ea7d6));}export async function switchRenderMode(_0x4b2ad1){const _0x3803c9=a0_0x1e0e;systemType=gameName[_0x3803c9(0x215)](-0x3);if(_0x4b2ad1==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x4b2ad1==='webgl')setupStyle('2d'),setupWebGL_Shader(_0x3803c9(0x210)),setupTexture_Buffer(_0x3803c9(0x210)),renderPixel(_0x3803c9(0x210));else _0x4b2ad1===_0x3803c9(0x231)&&(setupStyle(_0x3803c9(0x231)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x3803c9(0x231)),renderPixel(_0x3803c9(0x210)));}}