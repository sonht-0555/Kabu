(function(_0xdfe196,_0x1ce184){const _0x1e76b9=a0_0x4d79,_0x2182a4=_0xdfe196();while(!![]){try{const _0x59cccd=parseInt(_0x1e76b9(0x96))/0x1+-parseInt(_0x1e76b9(0x93))/0x2*(parseInt(_0x1e76b9(0x7e))/0x3)+-parseInt(_0x1e76b9(0x7b))/0x4+parseInt(_0x1e76b9(0x9a))/0x5*(-parseInt(_0x1e76b9(0x76))/0x6)+parseInt(_0x1e76b9(0x94))/0x7*(-parseInt(_0x1e76b9(0x6f))/0x8)+-parseInt(_0x1e76b9(0x79))/0x9*(parseInt(_0x1e76b9(0x86))/0xa)+parseInt(_0x1e76b9(0x9d))/0xb*(parseInt(_0x1e76b9(0x91))/0xc);if(_0x59cccd===_0x1ce184)break;else _0x2182a4['push'](_0x2182a4['shift']());}catch(_0x49bd76){_0x2182a4['push'](_0x2182a4['shift']());}}}(a0_0x2376,0xe057e));import*as a0_0x200eec from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x1583fa=a0_0x4d79;systemType=gameName[_0x1583fa(0x73)](-0x3);const _0x393929=localStorage[_0x1583fa(0xa6)](gameName+_0x1583fa(0x67))||_0x1583fa(0x97),_0x5ae03c=(localStorage[_0x1583fa(0xa6)](gameName+'_temperature')||_0x1583fa(0x7f))['toLowerCase']();if(!lut64||lut64Streng!==_0x393929||lut64Profile!==_0x5ae03c){const _0x4af8ea=_0x1583fa(0x75)+_0x5ae03c+'_'+_0x393929+_0x1583fa(0xa9);console[_0x1583fa(0x74)](_0x4af8ea);const _0x5ab405=await fetch(_0x4af8ea),_0x52df4b=await _0x5ab405[_0x1583fa(0x7d)]();lut64=new Uint8Array(_0x52df4b),lut64Streng=_0x393929,lut64Profile=_0x5ae03c;}}function setupWebGL_Shader(_0x6115ff){const _0x2409f4=a0_0x4d79;gl=bufferCanvas['getContext'](_0x2409f4(0x85),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x2409f4(0x89)]);function _0x113464(_0x442ce8,_0x3efef6){const _0x2d9b73=_0x2409f4,_0x21e1a2=gl[_0x2d9b73(0x98)](_0x442ce8);return gl[_0x2d9b73(0xa1)](_0x21e1a2,_0x3efef6),gl[_0x2d9b73(0x95)](_0x21e1a2),_0x21e1a2;}vs=_0x2409f4(0x6d);if(_0x6115ff===_0x2409f4(0x85))fs=_0x2409f4(0x77);else _0x6115ff===_0x2409f4(0x9c)&&(fs=_0x2409f4(0xa3));const _0xf1dd1f=_0x113464(gl[_0x2409f4(0x7c)],vs),_0x288a00=_0x113464(gl[_0x2409f4(0x99)],fs);return program=gl[_0x2409f4(0x81)](),gl['attachShader'](program,_0xf1dd1f),gl['attachShader'](program,_0x288a00),gl['linkProgram'](program),gl[_0x2409f4(0x78)](program),program;}function setupTexture_Buffer(_0x526d69){const _0x45b5ae=a0_0x4d79;texture=gl['createTexture'](),gl[_0x45b5ae(0x6c)](gl['TEXTURE_2D'],texture),gl[_0x45b5ae(0x87)](gl[_0x45b5ae(0x71)],gl[_0x45b5ae(0x69)],gl[_0x45b5ae(0x9f)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x45b5ae(0xae)],gl[_0x45b5ae(0x9f)]),gl[_0x45b5ae(0x87)](gl[_0x45b5ae(0x71)],gl[_0x45b5ae(0xaf)],gl['CLAMP_TO_EDGE']),gl[_0x45b5ae(0x87)](gl['TEXTURE_2D'],gl[_0x45b5ae(0x70)],gl[_0x45b5ae(0x6a)]);_0x526d69===_0x45b5ae(0x9c)&&(gl['uniform2f'](gl[_0x45b5ae(0x92)](program,_0x45b5ae(0xa4)),gameWidth,gameHeight),gl[_0x45b5ae(0x9e)](gl[_0x45b5ae(0x92)](program,_0x45b5ae(0x6b)),gl['canvas']['width'],gl[_0x45b5ae(0x9b)][_0x45b5ae(0x89)]),gl[_0x45b5ae(0x8e)](gl['getUniformLocation'](program,_0x45b5ae(0x90)),gameWidth/gl[_0x45b5ae(0x9b)][_0x45b5ae(0x6e)]),gl[_0x45b5ae(0x8e)](gl[_0x45b5ae(0x92)](program,_0x45b5ae(0xab)),gameHeight/gl['canvas'][_0x45b5ae(0x89)]));const _0x33b58e=gl['createBuffer']();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x33b58e),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x45b5ae(0x8c)](gl['getAttribLocation'](program,_0x45b5ae(0x88)),0x2,gl[_0x45b5ae(0xa5)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x45b5ae(0xa0)](program,'position'));const _0x457367=gl[_0x45b5ae(0x7a)]();gl['bindBuffer'](gl[_0x45b5ae(0xa2)],_0x457367),gl[_0x45b5ae(0x84)](gl[_0x45b5ae(0xa2)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x45b5ae(0xad)]),gl['vertexAttribPointer'](gl[_0x45b5ae(0xa0)](program,_0x45b5ae(0x68)),0x2,gl[_0x45b5ae(0xa5)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x45b5ae(0xa0)](program,_0x45b5ae(0x68)));}function a0_0x2376(){const _0x12ee39=['755502aoGDDQ','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','useProgram','3204REiEdT','createBuffer','6861084KPyucy','VERTEX_SHADER','arrayBuffer','9DFaqNh','warm','clearRect','createProgram','drawArrays','drawImage','bufferData','webgl','18210tQoJaN','texParameteri','position','height','imageSmoothingEnabled','texImage2D','vertexAttribPointer','TRIANGLE_STRIP','uniform1f','COLOR_BUFFER_BIT','smooth_width','19558068YNLhjV','getUniformLocation','595488auAKBc','187502lYvnXe','compileShader','1068714miGwpj','4.0','createShader','FRAGMENT_SHADER','5wZCBnu','canvas','webgl_full','22sKmmFB','uniform2f','NEAREST','getAttribLocation','shaderSource','ARRAY_BUFFER','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','game_size','FLOAT','getItem','getPixelData','getContext','.bin','UNSIGNED_BYTE','smooth_height','RGBA','STATIC_DRAW','TEXTURE_MAG_FILTER','TEXTURE_WRAP_S','_streng','texcoord','TEXTURE_MIN_FILTER','CLAMP_TO_EDGE','render_size','bindTexture','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','width','8WFzJPa','TEXTURE_WRAP_T','TEXTURE_2D','clear','slice','log','./src/lut/lut64_'];a0_0x2376=function(){return _0x12ee39;};return a0_0x2376();}function setup2DContext(){const _0x7da66f=a0_0x4d79;ctx2d=bufferCanvas[_0x7da66f(0xa8)]('2d'),ctx2d[_0x7da66f(0x8a)]=![];}async function renderPixel(_0x361a3f){const _0xf8363b=a0_0x4d79,_0x406cdb=a0_0x200eec[_0xf8363b(0xa7)]();if(!_0x406cdb)return;await loadLUT64();const _0x47456=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1be0f3=0x0;_0x1be0f3<gameHeight;_0x1be0f3++){for(let _0x273ec6=0x0;_0x273ec6<gameWidth;_0x273ec6++){const _0x248aa4=_0x1be0f3*gameStride+_0x273ec6,_0x2623ed=(_0x1be0f3*gameWidth+_0x273ec6)*0x4,_0x176917=_0x406cdb[_0x248aa4],_0x565ad7=(_0x176917&0xff)>>0x2,_0x45a634=(_0x176917>>0x8&0xff)>>0x2,_0x19c737=(_0x176917>>0x10&0xff)>>0x2,_0x1fdb39=(_0x565ad7*0x40*0x40+_0x45a634*0x40+_0x19c737)*0x3;_0x47456[_0x2623ed]=lut64[_0x1fdb39],_0x47456[_0x2623ed+0x1]=lut64[_0x1fdb39+0x1],_0x47456[_0x2623ed+0x2]=lut64[_0x1fdb39+0x2],_0x47456[_0x2623ed+0x3]=0xff;}}if(_0x361a3f==='webgl')gl[_0xf8363b(0x8b)](gl[_0xf8363b(0x71)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0xf8363b(0xac)],gl[_0xf8363b(0xaa)],_0x47456),gl[_0xf8363b(0x72)](gl[_0xf8363b(0x8f)]),gl[_0xf8363b(0x82)](gl[_0xf8363b(0x8d)],0x0,0x4);else _0x361a3f==='2d'&&(imageDataObj=new ImageData(_0x47456,gameWidth,gameHeight),createImageBitmap(imageDataObj)['then'](_0x147ab0=>{const _0x13fa5e=_0xf8363b;ctx2d[_0x13fa5e(0x80)](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']),ctx2d[_0x13fa5e(0x83)](_0x147ab0,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x361a3f));}function a0_0x4d79(_0x242552,_0x561311){const _0x237641=a0_0x2376();return a0_0x4d79=function(_0x4d798f,_0x12d66f){_0x4d798f=_0x4d798f-0x67;let _0x293aa2=_0x237641[_0x4d798f];return _0x293aa2;},a0_0x4d79(_0x242552,_0x561311);}export async function switchRenderMode(_0x3dffce){const _0x18ae56=a0_0x4d79;systemType=gameName[_0x18ae56(0x73)](-0x3);if(_0x3dffce==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x3dffce===_0x18ae56(0x85))setupStyle('2d'),setupWebGL_Shader(_0x18ae56(0x85)),setupTexture_Buffer(_0x18ae56(0x85)),renderPixel(_0x18ae56(0x85));else _0x3dffce==='webgl_full'&&(setupStyle(_0x18ae56(0x9c)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x18ae56(0x9c)),renderPixel('webgl'));}}