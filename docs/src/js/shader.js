(function(_0x23837d,_0xb2b364){const _0x42a774=a0_0x52fb,_0x3ab2f0=_0x23837d();while(!![]){try{const _0x4b1b23=parseInt(_0x42a774(0x1f3))/0x1*(-parseInt(_0x42a774(0x1f0))/0x2)+parseInt(_0x42a774(0x1f4))/0x3+-parseInt(_0x42a774(0x20d))/0x4*(parseInt(_0x42a774(0x1d0))/0x5)+parseInt(_0x42a774(0x1fd))/0x6+-parseInt(_0x42a774(0x1fb))/0x7+parseInt(_0x42a774(0x1de))/0x8*(parseInt(_0x42a774(0x1fa))/0x9)+-parseInt(_0x42a774(0x205))/0xa;if(_0x4b1b23===_0xb2b364)break;else _0x3ab2f0['push'](_0x3ab2f0['shift']());}catch(_0x1514b2){_0x3ab2f0['push'](_0x3ab2f0['shift']());}}}(a0_0x460c,0x6f1c8));import*as a0_0x226f05 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x35c908=a0_0x52fb;systemType=gameName[_0x35c908(0x1cd)](-0x3);const _0xf88aea=(localStorage[_0x35c908(0x1e2)](gameName+_0x35c908(0x1f8))||_0x35c908(0x1e5))['toLowerCase']();if(!lut64||lut64Profile!==_0xf88aea){const _0x57ea03=_0x35c908(0x1da)+_0xf88aea+_0x35c908(0x1dd);console[_0x35c908(0x206)](_0x57ea03);const _0x19e9b0=await fetch(_0x57ea03),_0x2b6a1d=await _0x19e9b0[_0x35c908(0x1e0)]();lut64=new Uint8Array(_0x2b6a1d),lut64Profile=_0xf88aea;}}function setupWebGL_Shader(_0x423f90){const _0x153bb8=a0_0x52fb;gl=bufferCanvas[_0x153bb8(0x1f5)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x153bb8(0x1f1)}),gl[_0x153bb8(0x1e1)](0x0,0x0,bufferCanvas[_0x153bb8(0x1cf)],bufferCanvas['height']);function _0x1c3415(_0x4e7f34,_0x2d69c4){const _0x4c53ea=_0x153bb8,_0x2bf76f=gl[_0x4c53ea(0x1f7)](_0x4e7f34);return gl[_0x4c53ea(0x1e7)](_0x2bf76f,_0x2d69c4),gl[_0x4c53ea(0x1e4)](_0x2bf76f),_0x2bf76f;}vs=_0x153bb8(0x1ea);if(_0x423f90===_0x153bb8(0x1ca))fs=_0x153bb8(0x1f9);else _0x423f90==='webgl_full'&&(fs=_0x153bb8(0x1db));const _0x9060cb=_0x1c3415(gl[_0x153bb8(0x203)],vs),_0x27683d=_0x1c3415(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x153bb8(0x1d4)](),gl['attachShader'](program,_0x9060cb),gl[_0x153bb8(0x20b)](program,_0x27683d),gl['linkProgram'](program),gl[_0x153bb8(0x1d7)](program),program;}function setupTexture_Buffer(_0x547123){const _0x1a1414=a0_0x52fb;texture=gl[_0x1a1414(0x1fc)](),gl['bindTexture'](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl[_0x1a1414(0x1ce)],gl[_0x1a1414(0x1df)],gl[_0x1a1414(0x1dc)]),gl[_0x1a1414(0x1ec)](gl['TEXTURE_2D'],gl[_0x1a1414(0x207)],gl[_0x1a1414(0x1dc)]),gl[_0x1a1414(0x1ec)](gl[_0x1a1414(0x1ce)],gl['TEXTURE_WRAP_S'],gl[_0x1a1414(0x1f2)]),gl[_0x1a1414(0x1ec)](gl[_0x1a1414(0x1ce)],gl[_0x1a1414(0x20c)],gl['CLAMP_TO_EDGE']);_0x547123==='webgl_full'&&(gl[_0x1a1414(0x1d8)](gl[_0x1a1414(0x1eb)](program,_0x1a1414(0x20a)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x1a1414(0x1eb)](program,_0x1a1414(0x1e9)),gl[_0x1a1414(0x1d1)][_0x1a1414(0x1cf)],gl[_0x1a1414(0x1d1)]['height']),gl[_0x1a1414(0x1d5)](gl[_0x1a1414(0x1eb)](program,'smooth_width'),gameWidth/gl[_0x1a1414(0x1d1)]['width']),gl[_0x1a1414(0x1d5)](gl[_0x1a1414(0x1eb)](program,_0x1a1414(0x1d2)),gameHeight/gl[_0x1a1414(0x1d1)][_0x1a1414(0x1f6)]));const _0x396e85=gl['createBuffer']();gl[_0x1a1414(0x204)](gl[_0x1a1414(0x202)],_0x396e85),gl['bufferData'](gl[_0x1a1414(0x202)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x1a1414(0x1d3)]),gl[_0x1a1414(0x1fe)](gl['getAttribLocation'](program,_0x1a1414(0x1e6)),0x2,gl[_0x1a1414(0x1ed)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x1a1414(0x209)](program,_0x1a1414(0x1e6)));const _0x508cf4=gl[_0x1a1414(0x20e)]();gl[_0x1a1414(0x204)](gl[_0x1a1414(0x202)],_0x508cf4),gl[_0x1a1414(0x1ff)](gl[_0x1a1414(0x202)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x1a1414(0x1d3)]),gl[_0x1a1414(0x1fe)](gl[_0x1a1414(0x209)](program,'texcoord'),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x1a1414(0x1cb)](gl['getAttribLocation'](program,_0x1a1414(0x201)));}function setup2DContext(){const _0x56d1fb=a0_0x52fb;ctx2d=bufferCanvas[_0x56d1fb(0x1f5)]('2d'),ctx2d[_0x56d1fb(0x1e3)]=![];}function a0_0x460c(){const _0x1d3867=['TEXTURE_MAG_FILTER','RGBA','getAttribLocation','game_size','attachShader','TEXTURE_WRAP_T','132CvOeJU','createBuffer','webgl','enableVertexAttribArray','TRIANGLE_STRIP','slice','TEXTURE_2D','width','82380tNyyCn','canvas','smooth_height','STATIC_DRAW','createProgram','uniform1f','drawArrays','useProgram','uniform2f','set','./src/lut/lut64_','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','NEAREST','_4.0.bin','1363112RdXvQt','TEXTURE_MIN_FILTER','arrayBuffer','viewport','getItem','imageSmoothingEnabled','compileShader','none','position','shaderSource','UNSIGNED_BYTE','render_size','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','getUniformLocation','texParameteri','FLOAT','data','getPixelData','1403998LVkaLg','low-power','CLAMP_TO_EDGE','1dkNzXD','2524044mvKQvE','getContext','height','createShader','_temperature','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','36kLJEsK','2781443VyjvOb','createTexture','4843704Qwafqk','vertexAttribPointer','bufferData','webgl_full','texcoord','ARRAY_BUFFER','VERTEX_SHADER','bindBuffer','2320200oPsQeP','log'];a0_0x460c=function(){return _0x1d3867;};return a0_0x460c();}async function renderPixel(_0x4e94d4){const _0x1dd2a8=a0_0x52fb,_0x28a527=a0_0x226f05[_0x1dd2a8(0x1ef)]();if(!_0x28a527)return;await loadLUT64();const _0x83f7f1=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x3d0249=0x0;_0x3d0249<gameHeight;_0x3d0249++){for(let _0x37b771=0x0;_0x37b771<gameWidth;_0x37b771++){const _0x2eb4c9=_0x3d0249*gameStride+_0x37b771,_0x2886a1=(_0x3d0249*gameWidth+_0x37b771)*0x4,_0x59380f=_0x28a527[_0x2eb4c9];if(lut64Profile===_0x1dd2a8(0x1e5))_0x83f7f1[_0x2886a1]=_0x59380f&0xff,_0x83f7f1[_0x2886a1+0x1]=_0x59380f>>0x8&0xff,_0x83f7f1[_0x2886a1+0x2]=_0x59380f>>0x10&0xff,_0x83f7f1[_0x2886a1+0x3]=0xff;else{const _0x116dde=(_0x59380f&0xff)>>0x2,_0x3f69d=(_0x59380f>>0x8&0xff)>>0x2,_0x8b0384=(_0x59380f>>0x10&0xff)>>0x2,_0x4b556=(_0x116dde*0x40*0x40+_0x3f69d*0x40+_0x8b0384)*0x3;_0x83f7f1[_0x2886a1]=lut64[_0x4b556],_0x83f7f1[_0x2886a1+0x1]=lut64[_0x4b556+0x1],_0x83f7f1[_0x2886a1+0x2]=lut64[_0x4b556+0x2],_0x83f7f1[_0x2886a1+0x3]=0xff;}}}if(_0x4e94d4===_0x1dd2a8(0x1ca))gl['texImage2D'](gl[_0x1dd2a8(0x1ce)],0x0,gl[_0x1dd2a8(0x208)],gameWidth,gameHeight,0x0,gl[_0x1dd2a8(0x208)],gl[_0x1dd2a8(0x1e8)],_0x83f7f1),gl['clear'](gl['COLOR_BUFFER_BIT']),gl[_0x1dd2a8(0x1d6)](gl[_0x1dd2a8(0x1cc)],0x0,0x4);else _0x4e94d4==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x83f7f1,gameWidth,gameHeight):imageDataObj[_0x1dd2a8(0x1ee)][_0x1dd2a8(0x1d9)](_0x83f7f1),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x1dd2a8(0x1cf)],bufferCanvas[_0x1dd2a8(0x1f6)]),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x4e94d4));}function a0_0x52fb(_0x554405,_0xb0ad83){const _0x460c50=a0_0x460c();return a0_0x52fb=function(_0x52fbc0,_0x533682){_0x52fbc0=_0x52fbc0-0x1ca;let _0x87b643=_0x460c50[_0x52fbc0];return _0x87b643;},a0_0x52fb(_0x554405,_0xb0ad83);}export async function switchRenderMode(_0xd3218f){const _0x4bf985=a0_0x52fb;systemType=gameName[_0x4bf985(0x1cd)](-0x3);if(_0xd3218f==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0xd3218f===_0x4bf985(0x1ca))setupStyle('2d'),setupWebGL_Shader(_0x4bf985(0x1ca)),setupTexture_Buffer(_0x4bf985(0x1ca)),renderPixel(_0x4bf985(0x1ca));else _0xd3218f==='webgl_full'&&(setupStyle(_0x4bf985(0x200)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x4bf985(0x200)),renderPixel('webgl'));}}