function a0_0x1cb4(){const _0x3a6be2=['canvas','game_size','height','slice','putImageData','35qcsikl','getContext','36uWdQne','TEXTURE_2D','1713912JLuLMI','TEXTURE_MAG_FILTER','getAttribLocation','vertexAttribPointer','CLAMP_TO_EDGE','set','getUniformLocation','clear','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','attachShader','enableVertexAttribArray','uniform2f','webgl','bufferData','114QleqmS','render_size','toLowerCase','imageSmoothingEnabled','10DTEaPG','width','texImage2D','viewport','_temperature','29885EyEBZF','FLOAT','FRAGMENT_SHADER','_4.0.bin','TEXTURE_MIN_FILTER','TEXTURE_WRAP_S','TEXTURE_WRAP_T','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','RGBA','3366369IPbrXI','smooth_width','createProgram','createBuffer','createTexture','TRIANGLE_STRIP','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','34063212dtGcoo','COLOR_BUFFER_BIT','getItem','UNSIGNED_BYTE','useProgram','webgl_full','1297bPDfPp','clearRect','uniform1f','texcoord','STATIC_DRAW','15049716NvTZJb','texParameteri','createShader','none','bindTexture','67508JgZAvq','ARRAY_BUFFER','./src/lut/lut64_','678ebsamA'];a0_0x1cb4=function(){return _0x3a6be2;};return a0_0x1cb4();}function a0_0x4fe6(_0x5b475a,_0x9da3f1){const _0x1cb463=a0_0x1cb4();return a0_0x4fe6=function(_0x4fe672,_0x15d814){_0x4fe672=_0x4fe672-0x151;let _0x2118c6=_0x1cb463[_0x4fe672];return _0x2118c6;},a0_0x4fe6(_0x5b475a,_0x9da3f1);}(function(_0x35bcbe,_0x38943d){const _0x47a668=a0_0x4fe6,_0x22b395=_0x35bcbe();while(!![]){try{const _0x24681a=parseInt(_0x47a668(0x16f))/0x1*(-parseInt(_0x47a668(0x184))/0x2)+-parseInt(_0x47a668(0x194))/0x3*(-parseInt(_0x47a668(0x179))/0x4)+-parseInt(_0x47a668(0x159))/0x5*(parseInt(_0x47a668(0x17c))/0x6)+parseInt(_0x47a668(0x182))/0x7*(-parseInt(_0x47a668(0x186))/0x8)+-parseInt(_0x47a668(0x162))/0x9*(-parseInt(_0x47a668(0x154))/0xa)+-parseInt(_0x47a668(0x174))/0xb+parseInt(_0x47a668(0x169))/0xc;if(_0x24681a===_0x38943d)break;else _0x22b395['push'](_0x22b395['shift']());}catch(_0x208252){_0x22b395['push'](_0x22b395['shift']());}}}(a0_0x1cb4,0xaec5e));import*as a0_0x67aa1f from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x387f37=a0_0x4fe6;systemType=gameName[_0x387f37(0x180)](-0x3);const _0x1188e3=(localStorage[_0x387f37(0x16b)](gameName+_0x387f37(0x158))||_0x387f37(0x177))[_0x387f37(0x152)]();if(!lut64||lut64Profile!==_0x1188e3){const _0x3d1111=_0x387f37(0x17b)+_0x1188e3+_0x387f37(0x15c);console['log'](_0x3d1111);const _0x524960=await fetch(_0x3d1111),_0x22c7c0=await _0x524960['arrayBuffer']();lut64=new Uint8Array(_0x22c7c0),lut64Profile=_0x1188e3;}}function setupWebGL_Shader(_0x2ec47f){const _0x1c69e7=a0_0x4fe6;gl=bufferCanvas[_0x1c69e7(0x183)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0x1c69e7(0x157)](0x0,0x0,bufferCanvas[_0x1c69e7(0x155)],bufferCanvas[_0x1c69e7(0x17f)]);function _0x239c4c(_0x5e3479,_0x1a4231){const _0x18b3f8=_0x1c69e7,_0x9fe57=gl[_0x18b3f8(0x176)](_0x5e3479);return gl['shaderSource'](_0x9fe57,_0x1a4231),gl['compileShader'](_0x9fe57),_0x9fe57;}vs=_0x1c69e7(0x18e);if(_0x2ec47f==='webgl')fs=_0x1c69e7(0x160);else _0x2ec47f===_0x1c69e7(0x16e)&&(fs=_0x1c69e7(0x168));const _0x22156f=_0x239c4c(gl['VERTEX_SHADER'],vs),_0x10315e=_0x239c4c(gl[_0x1c69e7(0x15b)],fs);return program=gl[_0x1c69e7(0x164)](),gl[_0x1c69e7(0x18f)](program,_0x22156f),gl[_0x1c69e7(0x18f)](program,_0x10315e),gl['linkProgram'](program),gl[_0x1c69e7(0x16d)](program),program;}function setupTexture_Buffer(_0x2277e6){const _0x41f3b2=a0_0x4fe6;texture=gl[_0x41f3b2(0x166)](),gl[_0x41f3b2(0x178)](gl[_0x41f3b2(0x185)],texture),gl[_0x41f3b2(0x175)](gl[_0x41f3b2(0x185)],gl[_0x41f3b2(0x15d)],gl['NEAREST']),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x41f3b2(0x187)],gl['NEAREST']),gl[_0x41f3b2(0x175)](gl['TEXTURE_2D'],gl[_0x41f3b2(0x15e)],gl[_0x41f3b2(0x18a)]),gl[_0x41f3b2(0x175)](gl['TEXTURE_2D'],gl[_0x41f3b2(0x15f)],gl[_0x41f3b2(0x18a)]);_0x2277e6===_0x41f3b2(0x16e)&&(gl[_0x41f3b2(0x191)](gl['getUniformLocation'](program,_0x41f3b2(0x17e)),gameWidth,gameHeight),gl[_0x41f3b2(0x191)](gl[_0x41f3b2(0x18c)](program,_0x41f3b2(0x151)),gl[_0x41f3b2(0x17d)][_0x41f3b2(0x155)],gl['canvas'][_0x41f3b2(0x17f)]),gl[_0x41f3b2(0x171)](gl[_0x41f3b2(0x18c)](program,_0x41f3b2(0x163)),gameWidth/gl[_0x41f3b2(0x17d)][_0x41f3b2(0x155)]),gl[_0x41f3b2(0x171)](gl[_0x41f3b2(0x18c)](program,'smooth_height'),gameHeight/gl[_0x41f3b2(0x17d)][_0x41f3b2(0x17f)]));const _0x2568d6=gl['createBuffer']();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x2568d6),gl[_0x41f3b2(0x193)](gl[_0x41f3b2(0x17a)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x41f3b2(0x173)]),gl[_0x41f3b2(0x189)](gl[_0x41f3b2(0x188)](program,'position'),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x41f3b2(0x190)](gl[_0x41f3b2(0x188)](program,'position'));const _0x59ff4e=gl[_0x41f3b2(0x165)]();gl['bindBuffer'](gl[_0x41f3b2(0x17a)],_0x59ff4e),gl[_0x41f3b2(0x193)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x41f3b2(0x173)]),gl[_0x41f3b2(0x189)](gl[_0x41f3b2(0x188)](program,_0x41f3b2(0x172)),0x2,gl[_0x41f3b2(0x15a)],![],0x0,0x0),gl[_0x41f3b2(0x190)](gl[_0x41f3b2(0x188)](program,_0x41f3b2(0x172)));}function setup2DContext(){const _0x1bc186=a0_0x4fe6;ctx2d=bufferCanvas[_0x1bc186(0x183)]('2d'),ctx2d[_0x1bc186(0x153)]=![];}async function renderPixel(_0x1d26e1){const _0x54ecc7=a0_0x4fe6,_0x116481=a0_0x67aa1f['getPixelData']();if(!_0x116481)return;await loadLUT64();const _0x31b786=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5e886b=0x0;_0x5e886b<gameHeight;_0x5e886b++){for(let _0x35af02=0x0;_0x35af02<gameWidth;_0x35af02++){const _0xb95ec5=_0x5e886b*gameStride+_0x35af02,_0x36290b=(_0x5e886b*gameWidth+_0x35af02)*0x4,_0x29064d=_0x116481[_0xb95ec5];if(lut64Profile===_0x54ecc7(0x177))_0x31b786[_0x36290b]=_0x29064d&0xff,_0x31b786[_0x36290b+0x1]=_0x29064d>>0x8&0xff,_0x31b786[_0x36290b+0x2]=_0x29064d>>0x10&0xff,_0x31b786[_0x36290b+0x3]=0xff;else{const _0x5f500f=(_0x29064d&0xff)>>0x2,_0x3837bc=(_0x29064d>>0x8&0xff)>>0x2,_0x393e25=(_0x29064d>>0x10&0xff)>>0x2,_0x52c804=(_0x5f500f*0x40*0x40+_0x3837bc*0x40+_0x393e25)*0x3;_0x31b786[_0x36290b]=lut64[_0x52c804],_0x31b786[_0x36290b+0x1]=lut64[_0x52c804+0x1],_0x31b786[_0x36290b+0x2]=lut64[_0x52c804+0x2],_0x31b786[_0x36290b+0x3]=0xff;}}}if(_0x1d26e1==='webgl')gl[_0x54ecc7(0x156)](gl[_0x54ecc7(0x185)],0x0,gl[_0x54ecc7(0x161)],gameWidth,gameHeight,0x0,gl[_0x54ecc7(0x161)],gl[_0x54ecc7(0x16c)],_0x31b786),gl[_0x54ecc7(0x18d)](gl[_0x54ecc7(0x16a)]),gl['drawArrays'](gl[_0x54ecc7(0x167)],0x0,0x4);else _0x1d26e1==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x31b786,gameWidth,gameHeight):imageDataObj['data'][_0x54ecc7(0x18b)](_0x31b786),ctx2d[_0x54ecc7(0x170)](0x0,0x0,bufferCanvas[_0x54ecc7(0x155)],bufferCanvas[_0x54ecc7(0x17f)]),ctx2d[_0x54ecc7(0x181)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x1d26e1));}export async function switchRenderMode(_0x5e0219){const _0x44a260=a0_0x4fe6;systemType=gameName[_0x44a260(0x180)](-0x3);if(_0x5e0219==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x5e0219===_0x44a260(0x192))setupStyle('2d'),setupWebGL_Shader(_0x44a260(0x192)),setupTexture_Buffer(_0x44a260(0x192)),renderPixel(_0x44a260(0x192));else _0x5e0219==='webgl_full'&&(setupStyle('webgl_full'),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x44a260(0x16e)),renderPixel('webgl'));}}