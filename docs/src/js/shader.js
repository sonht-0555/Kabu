(function(_0x5e681e,_0x2d4f88){const _0xbb28ae=a0_0x4291,_0x387acc=_0x5e681e();while(!![]){try{const _0x538876=-parseInt(_0xbb28ae(0x1e7))/0x1+parseInt(_0xbb28ae(0x203))/0x2*(parseInt(_0xbb28ae(0x1eb))/0x3)+parseInt(_0xbb28ae(0x1fe))/0x4*(-parseInt(_0xbb28ae(0x1f1))/0x5)+-parseInt(_0xbb28ae(0x216))/0x6+parseInt(_0xbb28ae(0x208))/0x7+-parseInt(_0xbb28ae(0x1f8))/0x8*(parseInt(_0xbb28ae(0x206))/0x9)+-parseInt(_0xbb28ae(0x1f4))/0xa*(-parseInt(_0xbb28ae(0x20c))/0xb);if(_0x538876===_0x2d4f88)break;else _0x387acc['push'](_0x387acc['shift']());}catch(_0x42721d){_0x387acc['push'](_0x387acc['shift']());}}}(a0_0x26b0,0xeeb77));function a0_0x26b0(){const _0x424c3b=['TRIANGLE_STRIP','ARRAY_BUFFER','5182884ZlazKj','createBuffer','enableVertexAttribArray','createTexture','webgl','getAttribLocation','RGBA','arrayBuffer','drawArrays','FLOAT','vertexAttribPointer','viewport','webgl_full','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','compileShader','bufferData','smooth_height','bindTexture','useProgram','createProgram','getItem','VERTEX_SHADER','uniform1f','linkProgram','clearRect','putImageData','STATIC_DRAW','none','53059RZEdoq','texParameteri','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','position','6aXbjaf','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','FRAGMENT_SHADER','getContext','width','texImage2D','5QDUTBP','getUniformLocation','COLOR_BUFFER_BIT','25279710pjFSFI','slice','TEXTURE_MAG_FILTER','uniform2f','1200344mtkAnf','TEXTURE_WRAP_S','data','_4.0.bin','TEXTURE_2D','texcoord','7137464LVHWok','./src/lut/lut64_','log','TEXTURE_WRAP_T','height','1226674dXQqiJ','CLAMP_TO_EDGE','clear','99FCXLmS','set','11023950yNyYjW','game_size','UNSIGNED_BYTE','TEXTURE_MIN_FILTER','11tVjlrB','getPixelData','NEAREST','bindBuffer','attachShader','canvas','_temperature','smooth_width'];a0_0x26b0=function(){return _0x424c3b;};return a0_0x26b0();}import*as a0_0x1a852a from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x3840d8=a0_0x4291;systemType=gameName[_0x3840d8(0x1f5)](-0x3);const _0x22663e=(localStorage[_0x3840d8(0x22a)](gameName+_0x3840d8(0x212))||_0x3840d8(0x1e6))['toLowerCase']();if(!lut64||lut64Profile!==_0x22663e){const _0x26f366=_0x3840d8(0x1ff)+_0x22663e+_0x3840d8(0x1fb);console[_0x3840d8(0x200)](_0x26f366);const _0x2bc9d9=await fetch(_0x26f366),_0x27b71d=await _0x2bc9d9[_0x3840d8(0x21d)]();lut64=new Uint8Array(_0x27b71d),lut64Profile=_0x22663e;}}function setupWebGL_Shader(_0xd3012f){const _0x283eec=a0_0x4291;gl=bufferCanvas[_0x283eec(0x1ee)](_0x283eec(0x21a),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0x283eec(0x221)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x283eec(0x202)]);function _0x4fef8d(_0x3984a5,_0x2c57b2){const _0x4e92cf=_0x283eec,_0x294bc3=gl['createShader'](_0x3984a5);return gl['shaderSource'](_0x294bc3,_0x2c57b2),gl[_0x4e92cf(0x224)](_0x294bc3),_0x294bc3;}vs=_0x283eec(0x1e9);if(_0xd3012f===_0x283eec(0x21a))fs=_0x283eec(0x223);else _0xd3012f===_0x283eec(0x222)&&(fs=_0x283eec(0x1ec));const _0x4651fd=_0x4fef8d(gl[_0x283eec(0x22b)],vs),_0x1fdac0=_0x4fef8d(gl[_0x283eec(0x1ed)],fs);return program=gl[_0x283eec(0x229)](),gl[_0x283eec(0x210)](program,_0x4651fd),gl['attachShader'](program,_0x1fdac0),gl[_0x283eec(0x22d)](program),gl[_0x283eec(0x228)](program),program;}function setupTexture_Buffer(_0x3f667d){const _0x2a9056=a0_0x4291;texture=gl[_0x2a9056(0x219)](),gl[_0x2a9056(0x227)](gl[_0x2a9056(0x1fc)],texture),gl['texParameteri'](gl[_0x2a9056(0x1fc)],gl[_0x2a9056(0x20b)],gl[_0x2a9056(0x20e)]),gl[_0x2a9056(0x1e8)](gl[_0x2a9056(0x1fc)],gl[_0x2a9056(0x1f6)],gl[_0x2a9056(0x20e)]),gl[_0x2a9056(0x1e8)](gl[_0x2a9056(0x1fc)],gl[_0x2a9056(0x1f9)],gl['CLAMP_TO_EDGE']),gl[_0x2a9056(0x1e8)](gl[_0x2a9056(0x1fc)],gl[_0x2a9056(0x201)],gl[_0x2a9056(0x204)]);_0x3f667d==='webgl_full'&&(gl[_0x2a9056(0x1f7)](gl[_0x2a9056(0x1f2)](program,_0x2a9056(0x209)),gameWidth,gameHeight),gl[_0x2a9056(0x1f7)](gl['getUniformLocation'](program,'render_size'),gl['canvas']['width'],gl[_0x2a9056(0x211)][_0x2a9056(0x202)]),gl[_0x2a9056(0x22c)](gl[_0x2a9056(0x1f2)](program,_0x2a9056(0x213)),gameWidth/gl[_0x2a9056(0x211)][_0x2a9056(0x1ef)]),gl['uniform1f'](gl[_0x2a9056(0x1f2)](program,_0x2a9056(0x226)),gameHeight/gl[_0x2a9056(0x211)][_0x2a9056(0x202)]));const _0x59de2c=gl[_0x2a9056(0x217)]();gl[_0x2a9056(0x20f)](gl[_0x2a9056(0x215)],_0x59de2c),gl['bufferData'](gl[_0x2a9056(0x215)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2a9056(0x1e5)]),gl['vertexAttribPointer'](gl['getAttribLocation'](program,_0x2a9056(0x1ea)),0x2,gl[_0x2a9056(0x21f)],![],0x0,0x0),gl[_0x2a9056(0x218)](gl[_0x2a9056(0x21b)](program,'position'));const _0x9ca9f=gl[_0x2a9056(0x217)]();gl[_0x2a9056(0x20f)](gl[_0x2a9056(0x215)],_0x9ca9f),gl[_0x2a9056(0x225)](gl[_0x2a9056(0x215)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']),gl[_0x2a9056(0x220)](gl['getAttribLocation'](program,_0x2a9056(0x1fd)),0x2,gl[_0x2a9056(0x21f)],![],0x0,0x0),gl[_0x2a9056(0x218)](gl['getAttribLocation'](program,_0x2a9056(0x1fd)));}function setup2DContext(){const _0x39ae58=a0_0x4291;ctx2d=bufferCanvas[_0x39ae58(0x1ee)]('2d'),ctx2d['imageSmoothingEnabled']=![];}function a0_0x4291(_0x2f18de,_0x1dc4ce){const _0x26b08b=a0_0x26b0();return a0_0x4291=function(_0x429120,_0x294131){_0x429120=_0x429120-0x1e5;let _0x20cccc=_0x26b08b[_0x429120];return _0x20cccc;},a0_0x4291(_0x2f18de,_0x1dc4ce);}async function renderPixel(_0x3a2028){const _0x4255d4=a0_0x4291,_0x3e370b=a0_0x1a852a[_0x4255d4(0x20d)]();if(!_0x3e370b)return;await loadLUT64();const _0x3f49eb=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5e0276=0x0;_0x5e0276<gameHeight;_0x5e0276++){for(let _0x552ab8=0x0;_0x552ab8<gameWidth;_0x552ab8++){const _0x9de678=_0x5e0276*gameStride+_0x552ab8,_0x5d58b4=(_0x5e0276*gameWidth+_0x552ab8)*0x4,_0x348ae2=_0x3e370b[_0x9de678];if(lut64Profile===_0x4255d4(0x1e6))_0x3f49eb[_0x5d58b4]=_0x348ae2&0xff,_0x3f49eb[_0x5d58b4+0x1]=_0x348ae2>>0x8&0xff,_0x3f49eb[_0x5d58b4+0x2]=_0x348ae2>>0x10&0xff,_0x3f49eb[_0x5d58b4+0x3]=0xff;else{const _0x4856e9=(_0x348ae2&0xff)>>0x2,_0x57b2bd=(_0x348ae2>>0x8&0xff)>>0x2,_0x1c78f9=(_0x348ae2>>0x10&0xff)>>0x2,_0x213ad0=(_0x4856e9*0x40*0x40+_0x57b2bd*0x40+_0x1c78f9)*0x3;_0x3f49eb[_0x5d58b4]=lut64[_0x213ad0],_0x3f49eb[_0x5d58b4+0x1]=lut64[_0x213ad0+0x1],_0x3f49eb[_0x5d58b4+0x2]=lut64[_0x213ad0+0x2],_0x3f49eb[_0x5d58b4+0x3]=0xff;}}}if(_0x3a2028===_0x4255d4(0x21a))gl[_0x4255d4(0x1f0)](gl[_0x4255d4(0x1fc)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x4255d4(0x21c)],gl[_0x4255d4(0x20a)],_0x3f49eb),gl[_0x4255d4(0x205)](gl[_0x4255d4(0x1f3)]),gl[_0x4255d4(0x21e)](gl[_0x4255d4(0x214)],0x0,0x4);else _0x3a2028==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x3f49eb,gameWidth,gameHeight):imageDataObj[_0x4255d4(0x1fa)][_0x4255d4(0x207)](_0x3f49eb),ctx2d[_0x4255d4(0x22e)](0x0,0x0,bufferCanvas[_0x4255d4(0x1ef)],bufferCanvas[_0x4255d4(0x202)]),ctx2d[_0x4255d4(0x22f)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x3a2028));}export async function switchRenderMode(_0x3448f4){const _0x4eeba7=a0_0x4291;systemType=gameName[_0x4eeba7(0x1f5)](-0x3);if(_0x3448f4==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x3448f4===_0x4eeba7(0x21a))setupStyle('2d'),setupWebGL_Shader(_0x4eeba7(0x21a)),setupTexture_Buffer(_0x4eeba7(0x21a)),renderPixel(_0x4eeba7(0x21a));else _0x3448f4===_0x4eeba7(0x222)&&(setupStyle(_0x4eeba7(0x222)),setupWebGL_Shader(_0x4eeba7(0x222)),setupTexture_Buffer(_0x4eeba7(0x222)),renderPixel(_0x4eeba7(0x21a)));}}