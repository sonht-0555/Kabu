(function(_0x333338,_0x5310ca){const _0x4a698e=a0_0x53c1,_0xae10dc=_0x333338();while(!![]){try{const _0x43f711=-parseInt(_0x4a698e(0xe9))/0x1+parseInt(_0x4a698e(0xfb))/0x2*(parseInt(_0x4a698e(0xf2))/0x3)+-parseInt(_0x4a698e(0xf6))/0x4+-parseInt(_0x4a698e(0x10e))/0x5*(-parseInt(_0x4a698e(0xe7))/0x6)+-parseInt(_0x4a698e(0x104))/0x7+parseInt(_0x4a698e(0x119))/0x8+-parseInt(_0x4a698e(0x116))/0x9*(parseInt(_0x4a698e(0x121))/0xa);if(_0x43f711===_0x5310ca)break;else _0xae10dc['push'](_0xae10dc['shift']());}catch(_0x2a033f){_0xae10dc['push'](_0xae10dc['shift']());}}}(a0_0xd6f7,0xc5ba9));import*as a0_0x3b5531 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0xd6f7(){const _0x435e3d=['TEXTURE_MAG_FILTER','putImageData','TRIANGLE_STRIP','createShader','bindBuffer','height','set','getPixelData','smooth_width','TEXTURE_WRAP_T','49314dhcuNF','slice','373077pbFhSH','_4.0.bin','getContext','none','createProgram','low-power','texParameteri','smooth_height','arrayBuffer','766845ZHWslZ','vertexAttribPointer','TEXTURE_2D','toLowerCase','2715684XMnUmx','linkProgram','attachShader','STATIC_DRAW','render_size','2uWzJhy','NEAREST','texcoord','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','RGBA','enableVertexAttribArray','TEXTURE_MIN_FILTER','FLOAT','clear','600782gLzecu','getUniformLocation','width','viewport','VERTEX_SHADER','clearRect','game_size','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','UNSIGNED_BYTE','texImage2D','355AnWCjH','uniform1f','TEXTURE_WRAP_S','canvas','imageSmoothingEnabled','shaderSource','position','bufferData','1098yXDeAd','uniform2f','_temperature','11958472IJlQrN','CLAMP_TO_EDGE','getAttribLocation','getItem','bindTexture','webgl_full','webgl','ARRAY_BUFFER','31660GdAjzV','createBuffer','log'];a0_0xd6f7=function(){return _0x435e3d;};return a0_0xd6f7();}async function loadLUT64(){const _0x106838=a0_0x53c1;systemType=gameName[_0x106838(0xe8)](-0x3);const _0x6c631d=(localStorage[_0x106838(0x11c)](gameName+_0x106838(0x118))||_0x106838(0xec))[_0x106838(0xf5)]();if(!lut64||lut64Profile!==_0x6c631d){const _0x213755='./src/lut/lut64_'+_0x6c631d+_0x106838(0xea);console[_0x106838(0xdc)](_0x213755);const _0x5e2fa5=await fetch(_0x213755),_0x1d7107=await _0x5e2fa5[_0x106838(0xf1)]();lut64=new Uint8Array(_0x1d7107),lut64Profile=_0x6c631d;}}function setupWebGL_Shader(_0xfcfe0f){const _0x39cfed=a0_0x53c1;gl=bufferCanvas[_0x39cfed(0xeb)](_0x39cfed(0x11f),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x39cfed(0xee)}),gl[_0x39cfed(0x107)](0x0,0x0,bufferCanvas[_0x39cfed(0x106)],bufferCanvas[_0x39cfed(0xe2)]);function _0x84fb62(_0x376980,_0x4ce4d1){const _0x3a1635=_0x39cfed,_0xe62165=gl[_0x3a1635(0xe0)](_0x376980);return gl[_0x3a1635(0x113)](_0xe62165,_0x4ce4d1),gl['compileShader'](_0xe62165),_0xe62165;}vs=_0x39cfed(0xfe);if(_0xfcfe0f==='webgl')fs=_0x39cfed(0x10b);else _0xfcfe0f==='webgl_full'&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0xf54ef3=_0x84fb62(gl[_0x39cfed(0x108)],vs),_0x4ef80a=_0x84fb62(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x39cfed(0xed)](),gl[_0x39cfed(0xf8)](program,_0xf54ef3),gl['attachShader'](program,_0x4ef80a),gl[_0x39cfed(0xf7)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x37497d){const _0x435ede=a0_0x53c1;texture=gl['createTexture'](),gl[_0x435ede(0x11d)](gl['TEXTURE_2D'],texture),gl[_0x435ede(0xef)](gl['TEXTURE_2D'],gl[_0x435ede(0x101)],gl[_0x435ede(0xfc)]),gl[_0x435ede(0xef)](gl[_0x435ede(0xf4)],gl[_0x435ede(0xdd)],gl[_0x435ede(0xfc)]),gl[_0x435ede(0xef)](gl['TEXTURE_2D'],gl[_0x435ede(0x110)],gl[_0x435ede(0x11a)]),gl[_0x435ede(0xef)](gl[_0x435ede(0xf4)],gl[_0x435ede(0xe6)],gl[_0x435ede(0x11a)]);_0x37497d===_0x435ede(0x11e)&&(gl['uniform2f'](gl['getUniformLocation'](program,_0x435ede(0x10a)),gameWidth,gameHeight),gl[_0x435ede(0x117)](gl[_0x435ede(0x105)](program,_0x435ede(0xfa)),gl[_0x435ede(0x111)][_0x435ede(0x106)],gl[_0x435ede(0x111)][_0x435ede(0xe2)]),gl[_0x435ede(0x10f)](gl[_0x435ede(0x105)](program,_0x435ede(0xe5)),gameWidth/gl['canvas'][_0x435ede(0x106)]),gl['uniform1f'](gl[_0x435ede(0x105)](program,_0x435ede(0xf0)),gameHeight/gl[_0x435ede(0x111)]['height']));const _0x464df8=gl['createBuffer']();gl[_0x435ede(0xe1)](gl[_0x435ede(0x120)],_0x464df8),gl[_0x435ede(0x115)](gl[_0x435ede(0x120)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x435ede(0xf9)]),gl[_0x435ede(0xf3)](gl[_0x435ede(0x11b)](program,_0x435ede(0x114)),0x2,gl[_0x435ede(0x102)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x435ede(0x11b)](program,_0x435ede(0x114)));const _0x4c1548=gl[_0x435ede(0xdb)]();gl[_0x435ede(0xe1)](gl['ARRAY_BUFFER'],_0x4c1548),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x435ede(0xf9)]),gl[_0x435ede(0xf3)](gl[_0x435ede(0x11b)](program,'texcoord'),0x2,gl[_0x435ede(0x102)],![],0x0,0x0),gl[_0x435ede(0x100)](gl['getAttribLocation'](program,_0x435ede(0xfd)));}function setup2DContext(){const _0x1bbe41=a0_0x53c1;ctx2d=bufferCanvas[_0x1bbe41(0xeb)]('2d'),ctx2d[_0x1bbe41(0x112)]=![];}function a0_0x53c1(_0x1f4684,_0x4b005e){const _0xd6f7b9=a0_0xd6f7();return a0_0x53c1=function(_0x53c147,_0x4284d5){_0x53c147=_0x53c147-0xdb;let _0x54669d=_0xd6f7b9[_0x53c147];return _0x54669d;},a0_0x53c1(_0x1f4684,_0x4b005e);}async function renderPixel(_0x56794c){const _0x5ab03a=a0_0x53c1,_0x242bc8=a0_0x3b5531[_0x5ab03a(0xe4)]();if(!_0x242bc8)return;await loadLUT64();const _0xffbdfd=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x36f7df=0x0;_0x36f7df<gameHeight;_0x36f7df++){for(let _0x1f7844=0x0;_0x1f7844<gameWidth;_0x1f7844++){const _0x30005c=_0x36f7df*gameStride+_0x1f7844,_0x1c7f86=(_0x36f7df*gameWidth+_0x1f7844)*0x4,_0x73247e=_0x242bc8[_0x30005c];if(lut64Profile==='none')_0xffbdfd[_0x1c7f86]=_0x73247e&0xff,_0xffbdfd[_0x1c7f86+0x1]=_0x73247e>>0x8&0xff,_0xffbdfd[_0x1c7f86+0x2]=_0x73247e>>0x10&0xff,_0xffbdfd[_0x1c7f86+0x3]=0xff;else{const _0x1f4427=(_0x73247e&0xff)>>0x2,_0x20af57=(_0x73247e>>0x8&0xff)>>0x2,_0x412dd1=(_0x73247e>>0x10&0xff)>>0x2,_0x5d6a09=(_0x1f4427*0x40*0x40+_0x20af57*0x40+_0x412dd1)*0x3;_0xffbdfd[_0x1c7f86]=lut64[_0x5d6a09],_0xffbdfd[_0x1c7f86+0x1]=lut64[_0x5d6a09+0x1],_0xffbdfd[_0x1c7f86+0x2]=lut64[_0x5d6a09+0x2],_0xffbdfd[_0x1c7f86+0x3]=0xff;}}}if(_0x56794c===_0x5ab03a(0x11f))gl[_0x5ab03a(0x10d)](gl['TEXTURE_2D'],0x0,gl[_0x5ab03a(0xff)],gameWidth,gameHeight,0x0,gl[_0x5ab03a(0xff)],gl[_0x5ab03a(0x10c)],_0xffbdfd),gl[_0x5ab03a(0x103)](gl['COLOR_BUFFER_BIT']),gl['drawArrays'](gl[_0x5ab03a(0xdf)],0x0,0x4);else _0x56794c==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0xffbdfd,gameWidth,gameHeight):imageDataObj['data'][_0x5ab03a(0xe3)](_0xffbdfd),ctx2d[_0x5ab03a(0x109)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x5ab03a(0xe2)]),ctx2d[_0x5ab03a(0xde)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x56794c));}export async function switchRenderMode(_0x1b2582){const _0x3b8243=a0_0x53c1;systemType=gameName[_0x3b8243(0xe8)](-0x3);if(_0x1b2582==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x1b2582==='webgl')setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(_0x3b8243(0x11f)),renderPixel('webgl');else _0x1b2582===_0x3b8243(0x11e)&&(setupStyle(_0x3b8243(0x11e)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x3b8243(0x11e)),renderPixel('webgl'));}}