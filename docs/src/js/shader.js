(function(_0x71d21a,_0x1a9069){const _0x4d6e32=a0_0x368c,_0x34ce81=_0x71d21a();while(!![]){try{const _0x5cb009=-parseInt(_0x4d6e32(0x200))/0x1+-parseInt(_0x4d6e32(0x206))/0x2*(-parseInt(_0x4d6e32(0x1c7))/0x3)+-parseInt(_0x4d6e32(0x1d5))/0x4+-parseInt(_0x4d6e32(0x1e4))/0x5+parseInt(_0x4d6e32(0x1f3))/0x6*(-parseInt(_0x4d6e32(0x1dc))/0x7)+parseInt(_0x4d6e32(0x1d8))/0x8+parseInt(_0x4d6e32(0x1ef))/0x9;if(_0x5cb009===_0x1a9069)break;else _0x34ce81['push'](_0x34ce81['shift']());}catch(_0x120a56){_0x34ce81['push'](_0x34ce81['shift']());}}}(a0_0x1d2d,0x6eea0));import*as a0_0x69d9d7 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x1b57ec=a0_0x368c;systemType=gameName[_0x1b57ec(0x1fb)](-0x3);const _0x87dfad=(localStorage['getItem'](gameName+'_temperature')||'none')[_0x1b57ec(0x1ec)]();if(!lut64||lut64Profile!==_0x87dfad){const _0x346384=_0x1b57ec(0x1e1)+_0x87dfad+'_4.0.bin';console[_0x1b57ec(0x203)](_0x346384);const _0x2bc54c=await fetch(_0x346384),_0x5674d6=await _0x2bc54c['arrayBuffer']();lut64=new Uint8Array(_0x5674d6),lut64Profile=_0x87dfad;}}function setupWebGL_Shader(_0x4d2dee){const _0x3901b0=a0_0x368c;gl=bufferCanvas[_0x3901b0(0x1e2)](_0x3901b0(0x1c6),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x3901b0(0x1ff)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x3901b0(0x1f4)],bufferCanvas[_0x3901b0(0x1ea)]);function _0x4b15e0(_0x448093,_0x4cb8bd){const _0x2aa5bc=_0x3901b0,_0x2b9220=gl[_0x2aa5bc(0x1fd)](_0x448093);return gl[_0x2aa5bc(0x1f9)](_0x2b9220,_0x4cb8bd),gl[_0x2aa5bc(0x207)](_0x2b9220),_0x2b9220;}vs=_0x3901b0(0x1d9);if(_0x4d2dee==='webgl')fs=_0x3901b0(0x1de);else _0x4d2dee===_0x3901b0(0x1cf)&&(fs=_0x3901b0(0x1fa));const _0x420ec0=_0x4b15e0(gl[_0x3901b0(0x1ce)],vs),_0x5a747e=_0x4b15e0(gl[_0x3901b0(0x201)],fs);return program=gl['createProgram'](),gl[_0x3901b0(0x1cb)](program,_0x420ec0),gl['attachShader'](program,_0x5a747e),gl[_0x3901b0(0x1fc)](program),gl[_0x3901b0(0x1e7)](program),program;}function setupTexture_Buffer(_0x101491){const _0x2f6acf=a0_0x368c;texture=gl[_0x2f6acf(0x1f5)](),gl[_0x2f6acf(0x1c8)](gl['TEXTURE_2D'],texture),gl[_0x2f6acf(0x205)](gl['TEXTURE_2D'],gl[_0x2f6acf(0x1e6)],gl[_0x2f6acf(0x1df)]),gl[_0x2f6acf(0x205)](gl[_0x2f6acf(0x1cd)],gl['TEXTURE_MAG_FILTER'],gl[_0x2f6acf(0x1df)]),gl[_0x2f6acf(0x205)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0x2f6acf(0x208)]),gl[_0x2f6acf(0x205)](gl[_0x2f6acf(0x1cd)],gl[_0x2f6acf(0x1fe)],gl['CLAMP_TO_EDGE']);_0x101491===_0x2f6acf(0x1cf)&&(gl[_0x2f6acf(0x1f0)](gl['getUniformLocation'](program,_0x2f6acf(0x1dd)),gameWidth,gameHeight),gl[_0x2f6acf(0x1f0)](gl[_0x2f6acf(0x1d4)](program,_0x2f6acf(0x1e0)),gl[_0x2f6acf(0x1d3)][_0x2f6acf(0x1f4)],gl['canvas'][_0x2f6acf(0x1ea)]),gl[_0x2f6acf(0x1d1)](gl[_0x2f6acf(0x1d4)](program,_0x2f6acf(0x1c9)),gameWidth/gl[_0x2f6acf(0x1d3)][_0x2f6acf(0x1f4)]),gl['uniform1f'](gl[_0x2f6acf(0x1d4)](program,_0x2f6acf(0x1cc)),gameHeight/gl[_0x2f6acf(0x1d3)]['height']));const _0x401276=gl[_0x2f6acf(0x1ca)]();gl[_0x2f6acf(0x1da)](gl['ARRAY_BUFFER'],_0x401276),gl[_0x2f6acf(0x1eb)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2f6acf(0x1f2)]),gl[_0x2f6acf(0x202)](gl[_0x2f6acf(0x1d7)](program,_0x2f6acf(0x1f1)),0x2,gl[_0x2f6acf(0x1d2)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x2f6acf(0x1d7)](program,_0x2f6acf(0x1f1)));const _0x5f38ff=gl[_0x2f6acf(0x1ca)]();gl[_0x2f6acf(0x1da)](gl[_0x2f6acf(0x1e3)],_0x5f38ff),gl[_0x2f6acf(0x1eb)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']),gl[_0x2f6acf(0x202)](gl[_0x2f6acf(0x1d7)](program,_0x2f6acf(0x1db)),0x2,gl[_0x2f6acf(0x1d2)],![],0x0,0x0),gl[_0x2f6acf(0x1f7)](gl[_0x2f6acf(0x1d7)](program,_0x2f6acf(0x1db)));}function a0_0x1d2d(){const _0x8ab858=['vertexAttribPointer','log','clearRect','texParameteri','8ojquXg','compileShader','CLAMP_TO_EDGE','webgl','603417gkpsSA','bindTexture','smooth_width','createBuffer','attachShader','smooth_height','TEXTURE_2D','VERTEX_SHADER','webgl_full','imageSmoothingEnabled','uniform1f','FLOAT','canvas','getUniformLocation','946316rdNpYh','UNSIGNED_BYTE','getAttribLocation','5653824GgkuKj','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','bindBuffer','texcoord','56wPEDcZ','game_size','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','NEAREST','render_size','./src/lut/lut64_','getContext','ARRAY_BUFFER','418440bRaiGr','none','TEXTURE_MIN_FILTER','useProgram','data','putImageData','height','bufferData','toLowerCase','set','RGBA','5896692xIjUNh','uniform2f','position','STATIC_DRAW','511944wVFPdJ','width','createTexture','TRIANGLE_STRIP','enableVertexAttribArray','getPixelData','shaderSource','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','slice','linkProgram','createShader','TEXTURE_WRAP_T','low-power','709309zCfCKj','FRAGMENT_SHADER'];a0_0x1d2d=function(){return _0x8ab858;};return a0_0x1d2d();}function a0_0x368c(_0x3bfc57,_0x444f05){const _0x1d2d93=a0_0x1d2d();return a0_0x368c=function(_0x368c55,_0x176623){_0x368c55=_0x368c55-0x1c6;let _0x4012a6=_0x1d2d93[_0x368c55];return _0x4012a6;},a0_0x368c(_0x3bfc57,_0x444f05);}function setup2DContext(){const _0x255dbc=a0_0x368c;ctx2d=bufferCanvas[_0x255dbc(0x1e2)]('2d'),ctx2d[_0x255dbc(0x1d0)]=![];}async function renderPixel(_0x57e9d8){const _0x453d31=a0_0x368c,_0x3d4e60=a0_0x69d9d7[_0x453d31(0x1f8)]();if(!_0x3d4e60)return;await loadLUT64();const _0x3c8ad9=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2b8c0f=0x0;_0x2b8c0f<gameHeight;_0x2b8c0f++){for(let _0x134ca7=0x0;_0x134ca7<gameWidth;_0x134ca7++){const _0x13346a=_0x2b8c0f*gameStride+_0x134ca7,_0x448488=(_0x2b8c0f*gameWidth+_0x134ca7)*0x4,_0x33cddb=_0x3d4e60[_0x13346a];if(lut64Profile===_0x453d31(0x1e5))_0x3c8ad9[_0x448488]=_0x33cddb&0xff,_0x3c8ad9[_0x448488+0x1]=_0x33cddb>>0x8&0xff,_0x3c8ad9[_0x448488+0x2]=_0x33cddb>>0x10&0xff,_0x3c8ad9[_0x448488+0x3]=0xff;else{const _0x1e80ea=(_0x33cddb&0xff)>>0x2,_0x24bf2b=(_0x33cddb>>0x8&0xff)>>0x2,_0x4e8064=(_0x33cddb>>0x10&0xff)>>0x2,_0x1dc696=(_0x1e80ea*0x40*0x40+_0x24bf2b*0x40+_0x4e8064)*0x3;_0x3c8ad9[_0x448488]=lut64[_0x1dc696],_0x3c8ad9[_0x448488+0x1]=lut64[_0x1dc696+0x1],_0x3c8ad9[_0x448488+0x2]=lut64[_0x1dc696+0x2],_0x3c8ad9[_0x448488+0x3]=0xff;}}}if(_0x57e9d8==='webgl')gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x453d31(0x1ee)],gameWidth,gameHeight,0x0,gl[_0x453d31(0x1ee)],gl[_0x453d31(0x1d6)],_0x3c8ad9),gl['clear'](gl['COLOR_BUFFER_BIT']),gl['drawArrays'](gl[_0x453d31(0x1f6)],0x0,0x4);else _0x57e9d8==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x3c8ad9,gameWidth,gameHeight):imageDataObj[_0x453d31(0x1e8)][_0x453d31(0x1ed)](_0x3c8ad9),ctx2d[_0x453d31(0x204)](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']),ctx2d[_0x453d31(0x1e9)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x57e9d8));}export async function switchRenderMode(_0x1879ce){const _0x4632fe=a0_0x368c;systemType=gameName[_0x4632fe(0x1fb)](-0x3);if(_0x1879ce==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x1879ce===_0x4632fe(0x1c6))setupStyle('2d'),setupWebGL_Shader(_0x4632fe(0x1c6)),setupTexture_Buffer('webgl'),renderPixel(_0x4632fe(0x1c6));else _0x1879ce===_0x4632fe(0x1cf)&&(setupStyle(_0x4632fe(0x1cf)),setupWebGL_Shader(_0x4632fe(0x1cf)),setupTexture_Buffer(_0x4632fe(0x1cf)),renderPixel(_0x4632fe(0x1c6)));}}