const a0_0x5ca30=a0_0x2431;function a0_0x11cb(){const _0x60278=['clear','clearRect','5242310BIMKyL','212Oazqaa','px\x20','TEXTURE_WRAP_T','texParameteri','TEXTURE_MIN_FILTER','getContext','forEach','getPixelData','./src/lut/lut64_','7573680KwtBDr','getElementById','warm','12TwNYlR','width','_temperature','.stateTitle,\x20.stateDate','4.0','img-shader','21NvTCkZ','transformOrigin','remove','STATIC_DRAW','style','top\x20center','clientWidth','getAttribLocation','drawImage','.setting-container','attachShader','TRIANGLE_STRIP','54593xDBUtt','slice','then','set','setProperty','RGBA','transform','texcoord','createBuffer','144HVMeaC','documentElement','210xoAwjL','bindTexture','FLOAT','bufferData','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','vertexAttribPointer','canvas','close','scale(','.bin','data','classList','compileShader','691064VMQNOH','VERTEX_SHADER','CLAMP_TO_EDGE','TEXTURE_MAG_FILTER','floor','height','toLowerCase','61238fnslmU','0,0,','imageSmoothingEnabled','enableVertexAttribArray','screenSize','ARRAY_BUFFER','webgl','texImage2D','60690OBIBWN','gbc','12086602NafuFH','bindBuffer','COLOR_BUFFER_BIT','TEXTURE_2D','low-power','createTexture','getItem','TEXTURE_WRAP_S','UNSIGNED_BYTE','arrayBuffer','useProgram','FRAGMENT_SHADER','setItem','--bg-size','fefs','NEAREST','crisp-edges','devicePixelRatio','zoom','position','createProgram','viewport'];a0_0x11cb=function(){return _0x60278;};return a0_0x11cb();}(function(_0x367aa2,_0x23916a){const _0x45add8=a0_0x2431,_0x24a5e5=_0x367aa2();while(!![]){try{const _0x4bd240=-parseInt(_0x45add8(0x1a9))/0x1*(parseInt(_0x45add8(0x1d4))/0x2)+-parseInt(_0x45add8(0x1dc))/0x3*(-parseInt(_0x45add8(0x1f7))/0x4)+-parseInt(_0x45add8(0x1f6))/0x5+parseInt(_0x45add8(0x1c0))/0x6*(parseInt(_0x45add8(0x1b5))/0x7)+parseInt(_0x45add8(0x1cd))/0x8*(parseInt(_0x45add8(0x1be))/0x9)+parseInt(_0x45add8(0x1a0))/0xa+-parseInt(_0x45add8(0x1de))/0xb*(parseInt(_0x45add8(0x1a3))/0xc);if(_0x4bd240===_0x23916a)break;else _0x24a5e5['push'](_0x24a5e5['shift']());}catch(_0x1730c7){_0x24a5e5['push'](_0x24a5e5['shift']());}}}(a0_0x11cb,0xa9888));import*as a0_0x1e6c7c from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;function a0_0x2431(_0x562953,_0x3520f3){const _0x11cb34=a0_0x11cb();return a0_0x2431=function(_0x24313f,_0x5e9158){_0x24313f=_0x24313f-0x199;let _0x224aca=_0x11cb34[_0x24313f];return _0x224aca;},a0_0x2431(_0x562953,_0x3520f3);}const textured=document[a0_0x5ca30(0x1a1)]('textured'),bufferCanvas=document[a0_0x5ca30(0x1a1)](a0_0x5ca30(0x1c6)),canvasContainer=document[a0_0x5ca30(0x1a1)]('canvas-container'),imgShader=document[a0_0x5ca30(0x1a1)](a0_0x5ca30(0x1a8)),settingContainer=document['querySelectorAll'](a0_0x5ca30(0x1b2)),messageContainer=document['querySelectorAll']('.message-container'),stateTitle=document['querySelectorAll'](a0_0x5ca30(0x1a6));let imageDataObj=null;async function loadLUT64(){const _0x246f9c=a0_0x5ca30;systemType=gameName[_0x246f9c(0x1b6)](-0x3);const _0x37fc74=localStorage[_0x246f9c(0x1e4)](gameName+'_streng')||_0x246f9c(0x1a7),_0x24f0b1=(localStorage[_0x246f9c(0x1e4)](gameName+_0x246f9c(0x1a5))||_0x246f9c(0x1a2))[_0x246f9c(0x1d3)]();if(!lut64||lut64Streng!==_0x37fc74||lut64Profile!==_0x24f0b1){const _0x1d5b20=_0x246f9c(0x19f)+_0x24f0b1+'_'+_0x37fc74+_0x246f9c(0x1c9);console['log'](_0x1d5b20);const _0x32acfe=await fetch(_0x1d5b20),_0x36526a=await _0x32acfe[_0x246f9c(0x1e7)]();lut64=new Uint8Array(_0x36526a),lut64Streng=_0x37fc74,lut64Profile=_0x24f0b1;}}function setupStyle(_0x5cfd68){const _0x4502a9=a0_0x5ca30;clientWidth=document[_0x4502a9(0x1bf)][_0x4502a9(0x1af)];const _0x4036ed=window[_0x4502a9(0x1ef)];systemType===_0x4502a9(0x1dd)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x4502a9(0x1d1)](clientWidth*_0x4036ed/gameWidth),localStorage['setItem']('screenSize',_0x4502a9(0x1d5)+gameWidth*(integerScaling/_0x4036ed)+','+gameHeight*(integerScaling/_0x4036ed))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x4502a9(0x1d1)](clientWidth*_0x4036ed/gameWidth),localStorage[_0x4502a9(0x1ea)](_0x4502a9(0x1d8),'0,0,'+gameWidth*(integerScaling/_0x4036ed)+','+gameHeight*(integerScaling/_0x4036ed)));if(_0x5cfd68==='2d')bufferCanvas['width']=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x4502a9(0x1ad)][_0x4502a9(0x1f0)]=''+integerScaling/_0x4036ed,bufferCanvas[_0x4502a9(0x1ad)]['imageRendering']=_0x4502a9(0x1ee),canvasContainer[_0x4502a9(0x1ad)][_0x4502a9(0x1a4)]=gameWidth*(integerScaling/_0x4036ed)+'px',canvasContainer[_0x4502a9(0x1ad)][_0x4502a9(0x1d2)]=gameHeight*(integerScaling/_0x4036ed)+'px',textured[_0x4502a9(0x1ad)]['width']=gameWidth*(integerScaling/_0x4036ed)+'px',textured[_0x4502a9(0x1ad)][_0x4502a9(0x1d2)]=gameHeight*(integerScaling/_0x4036ed)+'px',imgShader[_0x4502a9(0x1ad)][_0x4502a9(0x1bb)]='scale('+integerScaling/_0x4036ed/upscaleShader+')',settingContainer[_0x4502a9(0x19d)](function(_0x3c2fb3){const _0x10a05f=_0x4502a9;_0x3c2fb3['style'][_0x10a05f(0x1a4)]=gameWidth*(integerScaling/_0x4036ed)+'px',_0x3c2fb3[_0x10a05f(0x1ad)][_0x10a05f(0x1d2)]=gameHeight*(integerScaling/_0x4036ed)+'px';}),messageContainer['forEach'](function(_0x428e91){const _0x5cd218=_0x4502a9;_0x428e91[_0x5cd218(0x1ad)]['width']=gameWidth+'px',_0x428e91[_0x5cd218(0x1ad)][_0x5cd218(0x1d2)]=gameHeight+'px',_0x428e91['style'][_0x5cd218(0x1f0)]=''+integerScaling/_0x4036ed;}),stateTitle['forEach'](function(_0x52f996){const _0x48a045=_0x4502a9;_0x52f996['classList'][_0x48a045(0x1ab)](_0x48a045(0x1ec));});else _0x5cfd68===_0x4502a9(0x1da)&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style']['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x4502a9(0x1ad)]['imageRendering']='',canvasContainer[_0x4502a9(0x1ad)][_0x4502a9(0x1a4)]=clientWidth+'px',canvasContainer[_0x4502a9(0x1ad)][_0x4502a9(0x1d2)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x4502a9(0x1ad)][_0x4502a9(0x1a4)]=clientWidth+'px',textured[_0x4502a9(0x1ad)][_0x4502a9(0x1d2)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x4502a9(0x1ad)]['transform']=_0x4502a9(0x1c8)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x4502a9(0x19d)](function(_0x165654){const _0x188990=_0x4502a9;_0x165654['style'][_0x188990(0x1a4)]=clientWidth+'px',_0x165654[_0x188990(0x1ad)][_0x188990(0x1d2)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x4502a9(0x19d)](function(_0x37617f){const _0x3699ea=_0x4502a9;_0x37617f[_0x3699ea(0x1ad)][_0x3699ea(0x1a4)]=gameWidth+'px',_0x37617f[_0x3699ea(0x1ad)][_0x3699ea(0x1d2)]=gameHeight+'px',_0x37617f[_0x3699ea(0x1ad)][_0x3699ea(0x1f0)]=''+clientWidth/gameWidth;}),stateTitle[_0x4502a9(0x19d)](function(_0x2fc713){const _0x544dcc=_0x4502a9;_0x2fc713[_0x544dcc(0x1cb)]['add'](_0x544dcc(0x1ec));}));imgShader[_0x4502a9(0x1ad)]['width']=gameWidth*upscaleShader+'px',imgShader[_0x4502a9(0x1ad)][_0x4502a9(0x1d2)]=gameHeight*upscaleShader+'px',imgShader[_0x4502a9(0x1ad)][_0x4502a9(0x1aa)]=_0x4502a9(0x1ae),imgShader['style'][_0x4502a9(0x1b9)](_0x4502a9(0x1eb),upscaleShader+_0x4502a9(0x1f8)+upscaleShader+'px');}function setupWebGL_Shader(){const _0x22c4cc=a0_0x5ca30;gl=bufferCanvas[_0x22c4cc(0x19c)](_0x22c4cc(0x1da),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x22c4cc(0x1e2)}),gl[_0x22c4cc(0x1f3)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x22c4cc(0x1d2)]);function _0x2147de(_0x40f4e8,_0x22b9ea){const _0x2fe2ee=_0x22c4cc,_0x23c41c=gl['createShader'](_0x40f4e8);return gl['shaderSource'](_0x23c41c,_0x22b9ea),gl[_0x2fe2ee(0x1cc)](_0x23c41c),_0x23c41c;}const _0x54e195='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}',_0x52a4f5=_0x22c4cc(0x1c4),_0xd69cfd=_0x2147de(gl[_0x22c4cc(0x1ce)],_0x54e195),_0x5473ea=_0x2147de(gl[_0x22c4cc(0x1e9)],_0x52a4f5);return program=gl[_0x22c4cc(0x1f2)](),gl[_0x22c4cc(0x1b3)](program,_0xd69cfd),gl['attachShader'](program,_0x5473ea),gl['linkProgram'](program),gl[_0x22c4cc(0x1e8)](program),program;}function setupTexture_Buffer(){const _0x5b101e=a0_0x5ca30;texture=gl[_0x5b101e(0x1e3)](),gl[_0x5b101e(0x1c1)](gl[_0x5b101e(0x1e1)],texture),gl[_0x5b101e(0x19a)](gl['TEXTURE_2D'],gl[_0x5b101e(0x19b)],gl[_0x5b101e(0x1ed)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x5b101e(0x1d0)],gl['NEAREST']),gl['texParameteri'](gl[_0x5b101e(0x1e1)],gl[_0x5b101e(0x1e5)],gl[_0x5b101e(0x1cf)]),gl[_0x5b101e(0x19a)](gl[_0x5b101e(0x1e1)],gl[_0x5b101e(0x199)],gl[_0x5b101e(0x1cf)]);const _0x26c419=gl[_0x5b101e(0x1bd)]();gl['bindBuffer'](gl[_0x5b101e(0x1d9)],_0x26c419),gl[_0x5b101e(0x1c3)](gl[_0x5b101e(0x1d9)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x5b101e(0x1ac)]),gl[_0x5b101e(0x1c5)](gl[_0x5b101e(0x1b0)](program,_0x5b101e(0x1f1)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x5b101e(0x1d7)](gl[_0x5b101e(0x1b0)](program,_0x5b101e(0x1f1)));const _0x52895a=gl['createBuffer']();gl[_0x5b101e(0x1df)](gl[_0x5b101e(0x1d9)],_0x52895a),gl[_0x5b101e(0x1c3)](gl[_0x5b101e(0x1d9)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x5b101e(0x1ac)]),gl['vertexAttribPointer'](gl[_0x5b101e(0x1b0)](program,_0x5b101e(0x1bc)),0x2,gl[_0x5b101e(0x1c2)],![],0x0,0x0),gl[_0x5b101e(0x1d7)](gl[_0x5b101e(0x1b0)](program,_0x5b101e(0x1bc)));}async function renderPixel(_0x56c4ff){const _0x1a9458=a0_0x5ca30,_0x3bb01a=a0_0x1e6c7c[_0x1a9458(0x19e)]();if(!_0x3bb01a)return;await loadLUT64();const _0x31c53d=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1df687=0x0;_0x1df687<gameHeight;_0x1df687++){for(let _0x4f2598=0x0;_0x4f2598<gameWidth;_0x4f2598++){const _0x148c0c=_0x1df687*gameStride+_0x4f2598,_0x23c399=(_0x1df687*gameWidth+_0x4f2598)*0x4,_0x52898f=_0x3bb01a[_0x148c0c],_0x5c60a0=(_0x52898f&0xff)>>0x2,_0x5991d1=(_0x52898f>>0x8&0xff)>>0x2,_0x25ea45=(_0x52898f>>0x10&0xff)>>0x2,_0x5c2d4a=(_0x5c60a0*0x40*0x40+_0x5991d1*0x40+_0x25ea45)*0x3;_0x31c53d[_0x23c399]=lut64[_0x5c2d4a],_0x31c53d[_0x23c399+0x1]=lut64[_0x5c2d4a+0x1],_0x31c53d[_0x23c399+0x2]=lut64[_0x5c2d4a+0x2],_0x31c53d[_0x23c399+0x3]=0xff;}}if(_0x56c4ff===_0x1a9458(0x1da))gl[_0x1a9458(0x1db)](gl['TEXTURE_2D'],0x0,gl[_0x1a9458(0x1ba)],gameWidth,gameHeight,0x0,gl[_0x1a9458(0x1ba)],gl[_0x1a9458(0x1e6)],_0x31c53d),gl[_0x1a9458(0x1f4)](gl[_0x1a9458(0x1e0)]),gl['drawArrays'](gl[_0x1a9458(0x1b4)],0x0,0x4);else _0x56c4ff==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas[_0x1a9458(0x19c)]('2d',{'alpha':![]}),ctx2d[_0x1a9458(0x1d6)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj[_0x1a9458(0x1ca)][_0x1a9458(0x1b8)](_0x31c53d),createImageBitmap(imageDataObj)[_0x1a9458(0x1b7)](_0x4edefb=>{const _0x5ab928=_0x1a9458;ctx2d[_0x5ab928(0x1f5)](0x0,0x0,bufferCanvas[_0x5ab928(0x1a4)],bufferCanvas['height']),ctx2d[_0x5ab928(0x1b1)](_0x4edefb,0x0,0x0),_0x4edefb[_0x5ab928(0x1c7)]();}));requestAnimationFrame(()=>renderPixel(_0x56c4ff));}export async function switchRenderMode(_0x4e4328){const _0x816a26=a0_0x5ca30;systemType=gameName[_0x816a26(0x1b6)](-0x3);if(_0x4e4328==='2d')setupStyle('2d'),renderPixel('2d');else _0x4e4328===_0x816a26(0x1da)&&(setupStyle('2d'),setupWebGL_Shader(),setupTexture_Buffer(),renderPixel('webgl'));}