(function(_0x32af9f,_0xd9c5ce){const _0x296f12=a0_0x5bda,_0xe362cd=_0x32af9f();while(!![]){try{const _0xacda34=parseInt(_0x296f12(0xdc))/0x1*(-parseInt(_0x296f12(0xee))/0x2)+-parseInt(_0x296f12(0xd5))/0x3*(-parseInt(_0x296f12(0xd2))/0x4)+parseInt(_0x296f12(0xfb))/0x5*(parseInt(_0x296f12(0xe4))/0x6)+-parseInt(_0x296f12(0xea))/0x7+parseInt(_0x296f12(0xe1))/0x8*(parseInt(_0x296f12(0x109))/0x9)+parseInt(_0x296f12(0xd8))/0xa+-parseInt(_0x296f12(0xf4))/0xb;if(_0xacda34===_0xd9c5ce)break;else _0xe362cd['push'](_0xe362cd['shift']());}catch(_0x54b180){_0xe362cd['push'](_0xe362cd['shift']());}}}(a0_0x2fc1,0xacdff));function a0_0x5bda(_0xc3b88e,_0x8d15ab){const _0x2fc1d0=a0_0x2fc1();return a0_0x5bda=function(_0x5bda6a,_0x3a88b6){_0x5bda6a=_0x5bda6a-0xcb;let _0x424fd7=_0x2fc1d0[_0x5bda6a];return _0x424fd7;},a0_0x5bda(_0xc3b88e,_0x8d15ab);}import*as a0_0x20a27f from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x480e62=a0_0x5bda;systemType=gameName[_0x480e62(0xf9)](-0x3);const _0x38d8c7=(localStorage[_0x480e62(0xec)](gameName+_0x480e62(0xe2))||_0x480e62(0x10f))['toLowerCase']();if(!lut64||lut64Profile!==_0x38d8c7){const _0x540fcc=_0x480e62(0xf5)+_0x38d8c7+_0x480e62(0xf6);console[_0x480e62(0xd9)](_0x540fcc);const _0x2c25b9=await fetch(_0x540fcc),_0x5c2c5=await _0x2c25b9['arrayBuffer']();lut64=new Uint8Array(_0x5c2c5),lut64Profile=_0x38d8c7;}}function setupWebGL_Shader(_0x4441fc){const _0x2ff4d9=a0_0x5bda;gl=bufferCanvas[_0x2ff4d9(0xda)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0x2ff4d9(0xf2)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x2ff4d9(0xf8)]);function _0x28d464(_0x2efc41,_0x20e80c){const _0x5229d2=_0x2ff4d9,_0x41ac56=gl['createShader'](_0x2efc41);return gl[_0x5229d2(0xff)](_0x41ac56,_0x20e80c),gl[_0x5229d2(0xd6)](_0x41ac56),_0x41ac56;}vs=_0x2ff4d9(0x105);if(_0x4441fc==='webgl')fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x4441fc===_0x2ff4d9(0xcb)&&(fs=_0x2ff4d9(0xfc));const _0xfbb728=_0x28d464(gl[_0x2ff4d9(0xef)],vs),_0x49063d=_0x28d464(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x2ff4d9(0xf3)](),gl[_0x2ff4d9(0x104)](program,_0xfbb728),gl[_0x2ff4d9(0x104)](program,_0x49063d),gl[_0x2ff4d9(0xeb)](program),gl[_0x2ff4d9(0xe5)](program),program;}function setupTexture_Buffer(_0x1c8681){const _0x5eed74=a0_0x5bda;texture=gl[_0x5eed74(0xe8)](),gl[_0x5eed74(0xcf)](gl[_0x5eed74(0x106)],texture),gl[_0x5eed74(0xfd)](gl['TEXTURE_2D'],gl['TEXTURE_MIN_FILTER'],gl[_0x5eed74(0xcc)]),gl['texParameteri'](gl[_0x5eed74(0x106)],gl[_0x5eed74(0xcd)],gl['NEAREST']),gl[_0x5eed74(0xfd)](gl[_0x5eed74(0x106)],gl[_0x5eed74(0x103)],gl[_0x5eed74(0xce)]),gl[_0x5eed74(0xfd)](gl[_0x5eed74(0x106)],gl['TEXTURE_WRAP_T'],gl[_0x5eed74(0xce)]);_0x1c8681===_0x5eed74(0xcb)&&(gl[_0x5eed74(0xd3)](gl[_0x5eed74(0x108)](program,_0x5eed74(0x102)),gameWidth,gameHeight),gl[_0x5eed74(0xd3)](gl[_0x5eed74(0x108)](program,_0x5eed74(0xde)),gl[_0x5eed74(0xf7)][_0x5eed74(0x10e)],gl[_0x5eed74(0xf7)][_0x5eed74(0xf8)]),gl[_0x5eed74(0x10b)](gl['getUniformLocation'](program,_0x5eed74(0xd1)),gameWidth/gl[_0x5eed74(0xf7)]['width']),gl['uniform1f'](gl['getUniformLocation'](program,_0x5eed74(0xf0)),gameHeight/gl[_0x5eed74(0xf7)][_0x5eed74(0xf8)]));const _0x4a9b5f=gl[_0x5eed74(0xe6)]();gl[_0x5eed74(0xd7)](gl[_0x5eed74(0xe0)],_0x4a9b5f),gl[_0x5eed74(0x100)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x5eed74(0x101)]),gl[_0x5eed74(0xfe)](gl[_0x5eed74(0xe3)](program,_0x5eed74(0xe7)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x5eed74(0xd4)](gl[_0x5eed74(0xe3)](program,_0x5eed74(0xe7)));const _0x2adcfc=gl[_0x5eed74(0xe6)]();gl['bindBuffer'](gl[_0x5eed74(0xe0)],_0x2adcfc),gl[_0x5eed74(0x100)](gl[_0x5eed74(0xe0)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x5eed74(0x101)]),gl[_0x5eed74(0xfe)](gl[_0x5eed74(0xe3)](program,_0x5eed74(0x10c)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x5eed74(0xd4)](gl[_0x5eed74(0xe3)](program,_0x5eed74(0x10c)));}function setup2DContext(){const _0x9109c5=a0_0x5bda;ctx2d=bufferCanvas[_0x9109c5(0xda)]('2d'),ctx2d[_0x9109c5(0xfa)]=![];}function a0_0x2fc1(){const _0x412566=['game_size','TEXTURE_WRAP_S','attachShader','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','TEXTURE_2D','data','getUniformLocation','8763543KXXWPo','webgl','uniform1f','texcoord','clearRect','width','none','webgl_full','NEAREST','TEXTURE_MAG_FILTER','CLAMP_TO_EDGE','bindTexture','TRIANGLE_STRIP','smooth_width','8kyvxWz','uniform2f','enableVertexAttribArray','1966533FejSkl','compileShader','bindBuffer','6624870gTMlNA','log','getContext','putImageData','16874xZYmmU','set','render_size','RGBA','ARRAY_BUFFER','8pSyFLI','_temperature','getAttribLocation','6409164nMoefa','useProgram','createBuffer','position','createTexture','clear','71407iSIEOY','linkProgram','getItem','getPixelData','132kWhsmq','VERTEX_SHADER','smooth_height','UNSIGNED_BYTE','viewport','createProgram','24017950oFWyiT','./src/lut/lut64_','_4.0.bin','canvas','height','slice','imageSmoothingEnabled','5AiqEqW','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','texParameteri','vertexAttribPointer','shaderSource','bufferData','STATIC_DRAW'];a0_0x2fc1=function(){return _0x412566;};return a0_0x2fc1();}async function renderPixel(_0x4c2f01){const _0x8ef5ba=a0_0x5bda,_0x1c1be9=a0_0x20a27f[_0x8ef5ba(0xed)]();if(!_0x1c1be9)return;await loadLUT64();const _0x2a3c1c=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x318696=0x0;_0x318696<gameHeight;_0x318696++){for(let _0x55f46e=0x0;_0x55f46e<gameWidth;_0x55f46e++){const _0x2cf55b=_0x318696*gameStride+_0x55f46e,_0x544cb2=(_0x318696*gameWidth+_0x55f46e)*0x4,_0x23e7ca=_0x1c1be9[_0x2cf55b];if(lut64Profile===_0x8ef5ba(0x10f))_0x2a3c1c[_0x544cb2]=_0x23e7ca&0xff,_0x2a3c1c[_0x544cb2+0x1]=_0x23e7ca>>0x8&0xff,_0x2a3c1c[_0x544cb2+0x2]=_0x23e7ca>>0x10&0xff,_0x2a3c1c[_0x544cb2+0x3]=0xff;else{const _0x52550e=(_0x23e7ca&0xff)>>0x2,_0x3eab41=(_0x23e7ca>>0x8&0xff)>>0x2,_0x20065b=(_0x23e7ca>>0x10&0xff)>>0x2,_0x5266ab=(_0x52550e*0x40*0x40+_0x3eab41*0x40+_0x20065b)*0x3;_0x2a3c1c[_0x544cb2]=lut64[_0x5266ab],_0x2a3c1c[_0x544cb2+0x1]=lut64[_0x5266ab+0x1],_0x2a3c1c[_0x544cb2+0x2]=lut64[_0x5266ab+0x2],_0x2a3c1c[_0x544cb2+0x3]=0xff;}}}if(_0x4c2f01===_0x8ef5ba(0x10a))gl['texImage2D'](gl[_0x8ef5ba(0x106)],0x0,gl[_0x8ef5ba(0xdf)],gameWidth,gameHeight,0x0,gl[_0x8ef5ba(0xdf)],gl[_0x8ef5ba(0xf1)],_0x2a3c1c),gl[_0x8ef5ba(0xe9)](gl['COLOR_BUFFER_BIT']),gl['drawArrays'](gl[_0x8ef5ba(0xd0)],0x0,0x4);else _0x4c2f01==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x2a3c1c,gameWidth,gameHeight):imageDataObj[_0x8ef5ba(0x107)][_0x8ef5ba(0xdd)](_0x2a3c1c),ctx2d[_0x8ef5ba(0x10d)](0x0,0x0,bufferCanvas[_0x8ef5ba(0x10e)],bufferCanvas[_0x8ef5ba(0xf8)]),ctx2d[_0x8ef5ba(0xdb)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x4c2f01));}export async function switchRenderMode(_0x34bc62){const _0x4291fa=a0_0x5bda;systemType=gameName[_0x4291fa(0xf9)](-0x3);if(_0x34bc62==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x34bc62===_0x4291fa(0x10a))setupStyle('2d'),setupWebGL_Shader(_0x4291fa(0x10a)),setupTexture_Buffer(_0x4291fa(0x10a)),renderPixel(_0x4291fa(0x10a));else _0x34bc62==='webgl_full'&&(setupStyle(_0x4291fa(0xcb)),setupWebGL_Shader(_0x4291fa(0xcb)),setupTexture_Buffer(_0x4291fa(0xcb)),renderPixel(_0x4291fa(0x10a)));}}