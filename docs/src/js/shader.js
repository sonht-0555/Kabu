function a0_0x5c6a(){const _0x32cbb7=['linkProgram','204302qbzCIO','canvas','texImage2D','275800cwqOIX','TRIANGLE_STRIP','_temperature','837204TPAuuw','3qDlpOL','UNSIGNED_BYTE','webgl','TEXTURE_2D','RGBA','.bin','vertexAttribPointer','STATIC_DRAW','2346600HUayMT','texcoord','warm','NEAREST','imageSmoothingEnabled','webgl_full','enableVertexAttribArray','clear','smooth_width','4.0','TEXTURE_MAG_FILTER','_streng','texParameteri','then','16ucVTYD','ARRAY_BUFFER','createShader','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','uniform1f','render_size','position','game_size','getUniformLocation','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','bindTexture','createTexture','41981wzsTtS','smooth_height','height','width','attachShader','3670mpJlBr','uniform2f','low-power','shaderSource','2253792WYFTlX','createBuffer','getContext','bindBuffer','compileShader','drawImage','drawArrays','viewport','./src/lut/lut64_','TEXTURE_WRAP_T','bufferData','getAttribLocation','VERTEX_SHADER','clearRect','9pHOYWZ','FRAGMENT_SHADER','FLOAT'];a0_0x5c6a=function(){return _0x32cbb7;};return a0_0x5c6a();}(function(_0x45b817,_0x2bb7a4){const _0x2b3c25=a0_0x47be,_0xe28975=_0x45b817();while(!![]){try{const _0x25209b=-parseInt(_0x2b3c25(0x100))/0x1*(parseInt(_0x2b3c25(0x138))/0x2)+-parseInt(_0x2b3c25(0x122))/0x3*(parseInt(_0x2b3c25(0x121))/0x4)+parseInt(_0x2b3c25(0x12a))/0x5+parseInt(_0x2b3c25(0x109))/0x6+-parseInt(_0x2b3c25(0x11b))/0x7+-parseInt(_0x2b3c25(0x11e))/0x8+parseInt(_0x2b3c25(0x117))/0x9*(-parseInt(_0x2b3c25(0x105))/0xa);if(_0x25209b===_0x2bb7a4)break;else _0xe28975['push'](_0xe28975['shift']());}catch(_0x4c228d){_0xe28975['push'](_0xe28975['shift']());}}}(a0_0x5c6a,0x398ff));import*as a0_0x2b6c97 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x1793c3=a0_0x47be;systemType=gameName['slice'](-0x3);const _0x16c182=localStorage['getItem'](gameName+_0x1793c3(0x135))||_0x1793c3(0x133),_0x1fb0bc=(localStorage['getItem'](gameName+_0x1793c3(0x120))||_0x1793c3(0x12c))['toLowerCase']();if(!lut64||lut64Streng!==_0x16c182||lut64Profile!==_0x1fb0bc){const _0x2adacc=_0x1793c3(0x111)+_0x1fb0bc+'_'+_0x16c182+_0x1793c3(0x127);console['log'](_0x2adacc);const _0x287883=await fetch(_0x2adacc),_0xf1efca=await _0x287883['arrayBuffer']();lut64=new Uint8Array(_0xf1efca),lut64Streng=_0x16c182,lut64Profile=_0x1fb0bc;}}function setupWebGL_Shader(_0x1e8727){const _0x9de880=a0_0x47be;gl=bufferCanvas[_0x9de880(0x10b)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x9de880(0x107)}),gl[_0x9de880(0x110)](0x0,0x0,bufferCanvas[_0x9de880(0x103)],bufferCanvas[_0x9de880(0x102)]);function _0x578951(_0x4bcddd,_0x5b6529){const _0x44184d=_0x9de880,_0x919261=gl[_0x44184d(0x13a)](_0x4bcddd);return gl[_0x44184d(0x108)](_0x919261,_0x5b6529),gl[_0x44184d(0x10d)](_0x919261),_0x919261;}vs=_0x9de880(0xfd);if(_0x1e8727==='webgl')fs=_0x9de880(0x13b);else _0x1e8727===_0x9de880(0x12f)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x2e5b12=_0x578951(gl[_0x9de880(0x115)],vs),_0x209587=_0x578951(gl[_0x9de880(0x118)],fs);return program=gl['createProgram'](),gl[_0x9de880(0x104)](program,_0x2e5b12),gl['attachShader'](program,_0x209587),gl[_0x9de880(0x11a)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x11987e){const _0x2f84e2=a0_0x47be;texture=gl[_0x2f84e2(0xff)](),gl[_0x2f84e2(0xfe)](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl[_0x2f84e2(0x125)],gl['TEXTURE_MIN_FILTER'],gl[_0x2f84e2(0x12d)]),gl[_0x2f84e2(0x136)](gl[_0x2f84e2(0x125)],gl[_0x2f84e2(0x134)],gl[_0x2f84e2(0x12d)]),gl[_0x2f84e2(0x136)](gl[_0x2f84e2(0x125)],gl['TEXTURE_WRAP_S'],gl['CLAMP_TO_EDGE']),gl[_0x2f84e2(0x136)](gl['TEXTURE_2D'],gl[_0x2f84e2(0x112)],gl['CLAMP_TO_EDGE']);_0x11987e===_0x2f84e2(0x12f)&&(gl[_0x2f84e2(0x106)](gl[_0x2f84e2(0xfc)](program,_0x2f84e2(0xfb)),gameWidth,gameHeight),gl[_0x2f84e2(0x106)](gl[_0x2f84e2(0xfc)](program,_0x2f84e2(0xf9)),gl[_0x2f84e2(0x11c)]['width'],gl[_0x2f84e2(0x11c)][_0x2f84e2(0x102)]),gl['uniform1f'](gl[_0x2f84e2(0xfc)](program,_0x2f84e2(0x132)),gameWidth/gl[_0x2f84e2(0x11c)][_0x2f84e2(0x103)]),gl[_0x2f84e2(0xf8)](gl[_0x2f84e2(0xfc)](program,_0x2f84e2(0x101)),gameHeight/gl[_0x2f84e2(0x11c)][_0x2f84e2(0x102)]));const _0x3c45a8=gl['createBuffer']();gl[_0x2f84e2(0x10c)](gl[_0x2f84e2(0x139)],_0x3c45a8),gl['bufferData'](gl[_0x2f84e2(0x139)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl['vertexAttribPointer'](gl[_0x2f84e2(0x114)](program,_0x2f84e2(0xfa)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x2f84e2(0x130)](gl[_0x2f84e2(0x114)](program,_0x2f84e2(0xfa)));const _0x1c7300=gl[_0x2f84e2(0x10a)]();gl[_0x2f84e2(0x10c)](gl['ARRAY_BUFFER'],_0x1c7300),gl[_0x2f84e2(0x113)](gl[_0x2f84e2(0x139)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2f84e2(0x129)]),gl[_0x2f84e2(0x128)](gl['getAttribLocation'](program,_0x2f84e2(0x12b)),0x2,gl[_0x2f84e2(0x119)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x2f84e2(0x114)](program,_0x2f84e2(0x12b)));}function setup2DContext(){const _0x4d14f9=a0_0x47be;ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x4d14f9(0x12e)]=![];}async function renderPixel(_0x12f1e3){const _0x2dd72f=a0_0x47be,_0x17aa64=a0_0x2b6c97['getPixelData']();if(!_0x17aa64)return;await loadLUT64();const _0x3d94d1=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x585da3=0x0;_0x585da3<gameHeight;_0x585da3++){for(let _0x4ec978=0x0;_0x4ec978<gameWidth;_0x4ec978++){const _0x45ef29=_0x585da3*gameStride+_0x4ec978,_0x41f99c=(_0x585da3*gameWidth+_0x4ec978)*0x4,_0x42552c=_0x17aa64[_0x45ef29],_0x348d01=(_0x42552c&0xff)>>0x2,_0x3f9ac5=(_0x42552c>>0x8&0xff)>>0x2,_0x23a3c8=(_0x42552c>>0x10&0xff)>>0x2,_0x2aad0a=(_0x348d01*0x40*0x40+_0x3f9ac5*0x40+_0x23a3c8)*0x3;_0x3d94d1[_0x41f99c]=lut64[_0x2aad0a],_0x3d94d1[_0x41f99c+0x1]=lut64[_0x2aad0a+0x1],_0x3d94d1[_0x41f99c+0x2]=lut64[_0x2aad0a+0x2],_0x3d94d1[_0x41f99c+0x3]=0xff;}}if(_0x12f1e3==='webgl')gl[_0x2dd72f(0x11d)](gl[_0x2dd72f(0x125)],0x0,gl[_0x2dd72f(0x126)],gameWidth,gameHeight,0x0,gl[_0x2dd72f(0x126)],gl[_0x2dd72f(0x123)],_0x3d94d1),gl[_0x2dd72f(0x131)](gl['COLOR_BUFFER_BIT']),gl[_0x2dd72f(0x10f)](gl[_0x2dd72f(0x11f)],0x0,0x4);else _0x12f1e3==='2d'&&(imageDataObj=new ImageData(_0x3d94d1,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x2dd72f(0x137)](_0x2a4267=>{const _0x4316f9=_0x2dd72f;ctx2d[_0x4316f9(0x116)](0x0,0x0,bufferCanvas[_0x4316f9(0x103)],bufferCanvas[_0x4316f9(0x102)]),ctx2d[_0x4316f9(0x10e)](_0x2a4267,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x12f1e3));}function a0_0x47be(_0x225c45,_0x11c80e){const _0x5c6a93=a0_0x5c6a();return a0_0x47be=function(_0x47beba,_0x53153f){_0x47beba=_0x47beba-0xf8;let _0x48dbb1=_0x5c6a93[_0x47beba];return _0x48dbb1;},a0_0x47be(_0x225c45,_0x11c80e);}export async function switchRenderMode(_0x16494c){const _0x472ad3=a0_0x47be;systemType=gameName['slice'](-0x3);if(_0x16494c==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x16494c===_0x472ad3(0x124))setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer('webgl'),renderPixel(_0x472ad3(0x124));else _0x16494c===_0x472ad3(0x12f)&&(setupStyle(_0x472ad3(0x12f)),setupWebGL_Shader(_0x472ad3(0x12f)),setupTexture_Buffer('webgl_full'),renderPixel(_0x472ad3(0x124)));}}