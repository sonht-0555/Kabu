(function(_0x14e9a2,_0x56a6e4){const _0x2c1c42=a0_0x2fd4,_0x1bd588=_0x14e9a2();while(!![]){try{const _0x2584a8=-parseInt(_0x2c1c42(0xda))/0x1+-parseInt(_0x2c1c42(0xd7))/0x2+-parseInt(_0x2c1c42(0xe0))/0x3*(-parseInt(_0x2c1c42(0xf4))/0x4)+parseInt(_0x2c1c42(0xe2))/0x5+-parseInt(_0x2c1c42(0xe1))/0x6*(-parseInt(_0x2c1c42(0xf7))/0x7)+parseInt(_0x2c1c42(0xfd))/0x8+-parseInt(_0x2c1c42(0x10d))/0x9*(parseInt(_0x2c1c42(0xfb))/0xa);if(_0x2584a8===_0x56a6e4)break;else _0x1bd588['push'](_0x1bd588['shift']());}catch(_0xfd55d6){_0x1bd588['push'](_0x1bd588['shift']());}}}(a0_0x13ba,0xdb598));import*as a0_0x10a861 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x347029=a0_0x2fd4;systemType=gameName['slice'](-0x3);const _0x37a680=localStorage[_0x347029(0x109)](gameName+'_streng')||_0x347029(0xf8),_0x5ab3d7=(localStorage[_0x347029(0x109)](gameName+_0x347029(0x10c))||_0x347029(0xd4))['toLowerCase']();if(!lut64||lut64Streng!==_0x37a680||lut64Profile!==_0x5ab3d7){const _0x3b26a7=_0x347029(0xe3)+_0x5ab3d7+'_'+_0x37a680+_0x347029(0x101);console['log'](_0x3b26a7);const _0x2d707d=await fetch(_0x3b26a7),_0x356573=await _0x2d707d['arrayBuffer']();lut64=new Uint8Array(_0x356573),lut64Streng=_0x37a680,lut64Profile=_0x5ab3d7;}}function setupWebGL_Shader(_0x3b0507){const _0x27c0b9=a0_0x2fd4;gl=bufferCanvas[_0x27c0b9(0x103)](_0x27c0b9(0xf3),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x27c0b9(0xd9)}),gl[_0x27c0b9(0xf6)](0x0,0x0,bufferCanvas[_0x27c0b9(0xf1)],bufferCanvas[_0x27c0b9(0xe8)]);function _0x12adde(_0x891310,_0x2b2f7c){const _0x8101e9=_0x27c0b9,_0x18513c=gl['createShader'](_0x891310);return gl[_0x8101e9(0xdc)](_0x18513c,_0x2b2f7c),gl[_0x8101e9(0xf2)](_0x18513c),_0x18513c;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x3b0507==='webgl')fs=_0x27c0b9(0x10e);else _0x3b0507==='webgl_full'&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x46f74d=_0x12adde(gl[_0x27c0b9(0xf9)],vs),_0x4883c0=_0x12adde(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x27c0b9(0x105)](),gl[_0x27c0b9(0xdd)](program,_0x46f74d),gl[_0x27c0b9(0xdd)](program,_0x4883c0),gl[_0x27c0b9(0xef)](program),gl[_0x27c0b9(0xdb)](program),program;}function a0_0x13ba(){const _0x5366b6=['TRIANGLE_STRIP','viewport','7JfkkvX','4.0','VERTEX_SHADER','render_size','8781810hqWFjY','getAttribLocation','1864408lgLYTN','TEXTURE_2D','webgl_full','texcoord','.bin','getPixelData','getContext','STATIC_DRAW','createProgram','smooth_height','TEXTURE_WRAP_T','texImage2D','getItem','ARRAY_BUFFER','game_size','_temperature','18iFpypA','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','bufferData','uniform2f','CLAMP_TO_EDGE','imageSmoothingEnabled','warm','FLOAT','bindTexture','2630472Pmsene','uniform1f','low-power','1089389HxogzJ','useProgram','shaderSource','attachShader','createBuffer','position','3KvmQcC','9245262CKTKjf','8424705ZiheAv','./src/lut/lut64_','COLOR_BUFFER_BIT','drawImage','drawArrays','texParameteri','height','then','NEAREST','slice','bindBuffer','vertexAttribPointer','clearRect','linkProgram','getUniformLocation','width','compileShader','webgl','6402296IASctA'];a0_0x13ba=function(){return _0x5366b6;};return a0_0x13ba();}function setupTexture_Buffer(_0x1a3b0e){const _0xdf8fde=a0_0x2fd4;texture=gl['createTexture'](),gl[_0xdf8fde(0xd6)](gl[_0xdf8fde(0xfe)],texture),gl[_0xdf8fde(0xe7)](gl[_0xdf8fde(0xfe)],gl['TEXTURE_MIN_FILTER'],gl[_0xdf8fde(0xea)]),gl[_0xdf8fde(0xe7)](gl[_0xdf8fde(0xfe)],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl[_0xdf8fde(0xe7)](gl[_0xdf8fde(0xfe)],gl['TEXTURE_WRAP_S'],gl[_0xdf8fde(0xd2)]),gl[_0xdf8fde(0xe7)](gl[_0xdf8fde(0xfe)],gl[_0xdf8fde(0x107)],gl[_0xdf8fde(0xd2)]);_0x1a3b0e===_0xdf8fde(0xff)&&(gl[_0xdf8fde(0xd1)](gl[_0xdf8fde(0xf0)](program,_0xdf8fde(0x10b)),gameWidth,gameHeight),gl['uniform2f'](gl[_0xdf8fde(0xf0)](program,_0xdf8fde(0xfa)),gl['canvas'][_0xdf8fde(0xf1)],gl['canvas']['height']),gl[_0xdf8fde(0xd8)](gl[_0xdf8fde(0xf0)](program,'smooth_width'),gameWidth/gl['canvas'][_0xdf8fde(0xf1)]),gl[_0xdf8fde(0xd8)](gl[_0xdf8fde(0xf0)](program,_0xdf8fde(0x106)),gameHeight/gl['canvas'][_0xdf8fde(0xe8)]));const _0x4c9e11=gl[_0xdf8fde(0xde)]();gl[_0xdf8fde(0xec)](gl[_0xdf8fde(0x10a)],_0x4c9e11),gl[_0xdf8fde(0xd0)](gl[_0xdf8fde(0x10a)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0xdf8fde(0x104)]),gl[_0xdf8fde(0xed)](gl['getAttribLocation'](program,_0xdf8fde(0xdf)),0x2,gl[_0xdf8fde(0xd5)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0xdf8fde(0xfc)](program,_0xdf8fde(0xdf)));const _0x97d87d=gl[_0xdf8fde(0xde)]();gl[_0xdf8fde(0xec)](gl['ARRAY_BUFFER'],_0x97d87d),gl[_0xdf8fde(0xd0)](gl[_0xdf8fde(0x10a)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0xdf8fde(0x104)]),gl[_0xdf8fde(0xed)](gl[_0xdf8fde(0xfc)](program,_0xdf8fde(0x100)),0x2,gl[_0xdf8fde(0xd5)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0xdf8fde(0xfc)](program,_0xdf8fde(0x100)));}function a0_0x2fd4(_0xb6701,_0xf40d3c){const _0x13bab3=a0_0x13ba();return a0_0x2fd4=function(_0x2fd48b,_0x48594e){_0x2fd48b=_0x2fd48b-0xd0;let _0x55bf2e=_0x13bab3[_0x2fd48b];return _0x55bf2e;},a0_0x2fd4(_0xb6701,_0xf40d3c);}function setup2DContext(){const _0x3a373d=a0_0x2fd4;ctx2d=bufferCanvas[_0x3a373d(0x103)]('2d'),ctx2d[_0x3a373d(0xd3)]=![];}async function renderPixel(_0x82a540){const _0x1c3bdd=a0_0x2fd4,_0x3d18fb=a0_0x10a861[_0x1c3bdd(0x102)]();if(!_0x3d18fb)return;await loadLUT64();const _0x449593=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x3f604d=0x0;_0x3f604d<gameHeight;_0x3f604d++){for(let _0x5c1268=0x0;_0x5c1268<gameWidth;_0x5c1268++){const _0x26aeb3=_0x3f604d*gameStride+_0x5c1268,_0x50c6f8=(_0x3f604d*gameWidth+_0x5c1268)*0x4,_0x4b10ab=_0x3d18fb[_0x26aeb3],_0xcca10e=(_0x4b10ab&0xff)>>0x2,_0x497bb2=(_0x4b10ab>>0x8&0xff)>>0x2,_0x5dbba1=(_0x4b10ab>>0x10&0xff)>>0x2,_0x3dc324=(_0xcca10e*0x40*0x40+_0x497bb2*0x40+_0x5dbba1)*0x3;_0x449593[_0x50c6f8]=lut64[_0x3dc324],_0x449593[_0x50c6f8+0x1]=lut64[_0x3dc324+0x1],_0x449593[_0x50c6f8+0x2]=lut64[_0x3dc324+0x2],_0x449593[_0x50c6f8+0x3]=0xff;}}if(_0x82a540==='webgl')gl[_0x1c3bdd(0x108)](gl[_0x1c3bdd(0xfe)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl['RGBA'],gl['UNSIGNED_BYTE'],_0x449593),gl['clear'](gl[_0x1c3bdd(0xe4)]),gl[_0x1c3bdd(0xe6)](gl[_0x1c3bdd(0xf5)],0x0,0x4);else _0x82a540==='2d'&&(imageDataObj=new ImageData(_0x449593,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x1c3bdd(0xe9)](_0x4abce8=>{const _0x193384=_0x1c3bdd;ctx2d[_0x193384(0xee)](0x0,0x0,bufferCanvas[_0x193384(0xf1)],bufferCanvas['height']),ctx2d[_0x193384(0xe5)](_0x4abce8,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x82a540));}export async function switchRenderMode(_0x5dc637){const _0x1bcace=a0_0x2fd4;systemType=gameName[_0x1bcace(0xeb)](-0x3);if(_0x5dc637==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x5dc637===_0x1bcace(0xf3))setupStyle('2d'),setupWebGL_Shader(_0x1bcace(0xf3)),setupTexture_Buffer(_0x1bcace(0xf3)),renderPixel(_0x1bcace(0xf3));else _0x5dc637===_0x1bcace(0xff)&&(setupStyle(_0x1bcace(0xff)),setupWebGL_Shader(_0x1bcace(0xff)),setupTexture_Buffer(_0x1bcace(0xff)),renderPixel('webgl'));}}