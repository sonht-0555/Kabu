(function(_0x4db291,_0x42f4dc){const _0x5e3c8f=a0_0x47a1,_0x5c3ea0=_0x4db291();while(!![]){try{const _0x594a9a=-parseInt(_0x5e3c8f(0x20a))/0x1+-parseInt(_0x5e3c8f(0x1fd))/0x2+-parseInt(_0x5e3c8f(0x1e8))/0x3+parseInt(_0x5e3c8f(0x1f0))/0x4+parseInt(_0x5e3c8f(0x201))/0x5+parseInt(_0x5e3c8f(0x1eb))/0x6+-parseInt(_0x5e3c8f(0x208))/0x7*(-parseInt(_0x5e3c8f(0x213))/0x8);if(_0x594a9a===_0x42f4dc)break;else _0x5c3ea0['push'](_0x5c3ea0['shift']());}catch(_0x37f83f){_0x5c3ea0['push'](_0x5c3ea0['shift']());}}}(a0_0x2792,0x4ce03));import*as a0_0x4322c6 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x3f399e=a0_0x47a1;systemType=gameName[_0x3f399e(0x1e7)](-0x3);const _0x17942d=(localStorage[_0x3f399e(0x1f4)](gameName+_0x3f399e(0x1e6))||_0x3f399e(0x205))[_0x3f399e(0x1f6)]();if(!lut64||lut64Profile!==_0x17942d){const _0x4eab0f=_0x3f399e(0x1ea)+_0x17942d+_0x3f399e(0x211);console[_0x3f399e(0x1fa)](_0x4eab0f);const _0x4995e0=await fetch(_0x4eab0f),_0x372c85=await _0x4995e0[_0x3f399e(0x1fb)]();lut64=new Uint8Array(_0x372c85),lut64Profile=_0x17942d;}}function setupWebGL_Shader(_0xd0852e){const _0x25ca16=a0_0x47a1;gl=bufferCanvas['getContext'](_0x25ca16(0x221),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x25ca16(0x200)}),gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x25ca16(0x1ef)]);function _0x8447f7(_0x41846d,_0x4b2abe){const _0x27e508=_0x25ca16,_0x596233=gl[_0x27e508(0x210)](_0x41846d);return gl[_0x27e508(0x21c)](_0x596233,_0x4b2abe),gl[_0x27e508(0x219)](_0x596233),_0x596233;}vs=_0x25ca16(0x1f5);if(_0xd0852e===_0x25ca16(0x221))fs=_0x25ca16(0x21a);else _0xd0852e===_0x25ca16(0x220)&&(fs=_0x25ca16(0x21f));const _0x9893c3=_0x8447f7(gl['VERTEX_SHADER'],vs),_0x14d8cb=_0x8447f7(gl[_0x25ca16(0x202)],fs);return program=gl[_0x25ca16(0x223)](),gl[_0x25ca16(0x1ed)](program,_0x9893c3),gl[_0x25ca16(0x1ed)](program,_0x14d8cb),gl['linkProgram'](program),gl[_0x25ca16(0x20f)](program),program;}function setupTexture_Buffer(_0x500c8c){const _0x189289=a0_0x47a1;texture=gl[_0x189289(0x20e)](),gl[_0x189289(0x22a)](gl[_0x189289(0x216)],texture),gl[_0x189289(0x204)](gl['TEXTURE_2D'],gl[_0x189289(0x1f8)],gl[_0x189289(0x1ec)]),gl[_0x189289(0x204)](gl['TEXTURE_2D'],gl[_0x189289(0x206)],gl[_0x189289(0x1ec)]),gl[_0x189289(0x204)](gl[_0x189289(0x216)],gl[_0x189289(0x1fc)],gl[_0x189289(0x215)]),gl[_0x189289(0x204)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_T'],gl[_0x189289(0x215)]);_0x500c8c===_0x189289(0x220)&&(gl[_0x189289(0x217)](gl[_0x189289(0x1fe)](program,_0x189289(0x21e)),gameWidth,gameHeight),gl[_0x189289(0x217)](gl[_0x189289(0x1fe)](program,_0x189289(0x226)),gl['canvas'][_0x189289(0x212)],gl[_0x189289(0x1ee)][_0x189289(0x1ef)]),gl[_0x189289(0x20c)](gl[_0x189289(0x1fe)](program,_0x189289(0x207)),gameWidth/gl[_0x189289(0x1ee)][_0x189289(0x212)]),gl[_0x189289(0x20c)](gl[_0x189289(0x1fe)](program,_0x189289(0x1f9)),gameHeight/gl['canvas'][_0x189289(0x1ef)]));const _0x38b839=gl['createBuffer']();gl[_0x189289(0x203)](gl[_0x189289(0x218)],_0x38b839),gl[_0x189289(0x227)](gl[_0x189289(0x218)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x189289(0x229)]),gl[_0x189289(0x1f3)](gl[_0x189289(0x21d)](program,_0x189289(0x228)),0x2,gl[_0x189289(0x1f7)],![],0x0,0x0),gl[_0x189289(0x21b)](gl[_0x189289(0x21d)](program,_0x189289(0x228)));const _0x137d3f=gl[_0x189289(0x1f1)]();gl[_0x189289(0x203)](gl[_0x189289(0x218)],_0x137d3f),gl[_0x189289(0x227)](gl[_0x189289(0x218)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x189289(0x229)]),gl[_0x189289(0x1f3)](gl[_0x189289(0x21d)](program,_0x189289(0x224)),0x2,gl[_0x189289(0x1f7)],![],0x0,0x0),gl[_0x189289(0x21b)](gl['getAttribLocation'](program,'texcoord'));}function a0_0x47a1(_0xec5bfa,_0x5bab52){const _0x279251=a0_0x2792();return a0_0x47a1=function(_0x47a135,_0x5ae186){_0x47a135=_0x47a135-0x1e5;let _0x417a3d=_0x279251[_0x47a135];return _0x417a3d;},a0_0x47a1(_0xec5bfa,_0x5bab52);}function a0_0x2792(){const _0x42506d=['COLOR_BUFFER_BIT','render_size','bufferData','position','STATIC_DRAW','bindTexture','imageSmoothingEnabled','_temperature','slice','1659465eVVoUz','getContext','./src/lut/lut64_','3635958KSaXAU','NEAREST','attachShader','canvas','height','1324432kYvIVc','createBuffer','texImage2D','vertexAttribPointer','getItem','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','toLowerCase','FLOAT','TEXTURE_MIN_FILTER','smooth_height','log','arrayBuffer','TEXTURE_WRAP_S','442290zIymBb','getUniformLocation','TRIANGLE_STRIP','low-power','524820KObqdg','FRAGMENT_SHADER','bindBuffer','texParameteri','none','TEXTURE_MAG_FILTER','smooth_width','14uaKRXH','drawArrays','552526AWQolO','set','uniform1f','clearRect','createTexture','useProgram','createShader','_4.0.bin','width','2398576BNJmOp','getPixelData','CLAMP_TO_EDGE','TEXTURE_2D','uniform2f','ARRAY_BUFFER','compileShader','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','enableVertexAttribArray','shaderSource','getAttribLocation','game_size','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','webgl_full','webgl','data','createProgram','texcoord'];a0_0x2792=function(){return _0x42506d;};return a0_0x2792();}function setup2DContext(){const _0x2c6a2d=a0_0x47a1;ctx2d=bufferCanvas[_0x2c6a2d(0x1e9)]('2d'),ctx2d[_0x2c6a2d(0x1e5)]=![];}async function renderPixel(_0x1fc44e){const _0x4774be=a0_0x47a1,_0x530645=a0_0x4322c6[_0x4774be(0x214)]();if(!_0x530645)return;await loadLUT64();const _0x1d62e9=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x6e4e43=0x0;_0x6e4e43<gameHeight;_0x6e4e43++){for(let _0x5e2407=0x0;_0x5e2407<gameWidth;_0x5e2407++){const _0x4f01fb=_0x6e4e43*gameStride+_0x5e2407,_0x268ddb=(_0x6e4e43*gameWidth+_0x5e2407)*0x4,_0x132a3e=_0x530645[_0x4f01fb];if(lut64Profile===_0x4774be(0x205))_0x1d62e9[_0x268ddb]=_0x132a3e&0xff,_0x1d62e9[_0x268ddb+0x1]=_0x132a3e>>0x8&0xff,_0x1d62e9[_0x268ddb+0x2]=_0x132a3e>>0x10&0xff,_0x1d62e9[_0x268ddb+0x3]=0xff;else{const _0x61c562=(_0x132a3e&0xff)>>0x2,_0x3eb3bf=(_0x132a3e>>0x8&0xff)>>0x2,_0x2142e2=(_0x132a3e>>0x10&0xff)>>0x2,_0x3c06bc=(_0x61c562*0x40*0x40+_0x3eb3bf*0x40+_0x2142e2)*0x3;_0x1d62e9[_0x268ddb]=lut64[_0x3c06bc],_0x1d62e9[_0x268ddb+0x1]=lut64[_0x3c06bc+0x1],_0x1d62e9[_0x268ddb+0x2]=lut64[_0x3c06bc+0x2],_0x1d62e9[_0x268ddb+0x3]=0xff;}}}if(_0x1fc44e===_0x4774be(0x221))gl[_0x4774be(0x1f2)](gl['TEXTURE_2D'],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl['RGBA'],gl['UNSIGNED_BYTE'],_0x1d62e9),gl['clear'](gl[_0x4774be(0x225)]),gl[_0x4774be(0x209)](gl[_0x4774be(0x1ff)],0x0,0x4);else _0x1fc44e==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x1d62e9,gameWidth,gameHeight):imageDataObj[_0x4774be(0x222)][_0x4774be(0x20b)](_0x1d62e9),ctx2d[_0x4774be(0x20d)](0x0,0x0,bufferCanvas[_0x4774be(0x212)],bufferCanvas[_0x4774be(0x1ef)]),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x1fc44e));}export async function switchRenderMode(_0xa674a6){const _0x5c1f71=a0_0x47a1;systemType=gameName[_0x5c1f71(0x1e7)](-0x3);if(_0xa674a6==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0xa674a6===_0x5c1f71(0x221))setupStyle('2d'),setupWebGL_Shader(_0x5c1f71(0x221)),setupTexture_Buffer(_0x5c1f71(0x221)),renderPixel(_0x5c1f71(0x221));else _0xa674a6===_0x5c1f71(0x220)&&(setupStyle(_0x5c1f71(0x220)),setupWebGL_Shader(_0x5c1f71(0x220)),setupTexture_Buffer(_0x5c1f71(0x220)),renderPixel(_0x5c1f71(0x221)));}}