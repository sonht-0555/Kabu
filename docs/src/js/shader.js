(function(_0x1d925b,_0x191262){const _0x42a245=a0_0x3422,_0xab2713=_0x1d925b();while(!![]){try{const _0x32bbc6=-parseInt(_0x42a245(0x17a))/0x1+-parseInt(_0x42a245(0x156))/0x2*(parseInt(_0x42a245(0x189))/0x3)+-parseInt(_0x42a245(0x196))/0x4*(parseInt(_0x42a245(0x157))/0x5)+-parseInt(_0x42a245(0x170))/0x6+-parseInt(_0x42a245(0x154))/0x7+-parseInt(_0x42a245(0x197))/0x8+parseInt(_0x42a245(0x161))/0x9*(parseInt(_0x42a245(0x191))/0xa);if(_0x32bbc6===_0x191262)break;else _0xab2713['push'](_0xab2713['shift']());}catch(_0x39ab0c){_0xab2713['push'](_0xab2713['shift']());}}}(a0_0x15c6,0x88bb1));import*as a0_0x30ce8b from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x5505bb=a0_0x3422;systemType=gameName['slice'](-0x3);const _0x3bda98=localStorage[_0x5505bb(0x15c)](gameName+_0x5505bb(0x187))||'4.0',_0x21dade=(localStorage['getItem'](gameName+_0x5505bb(0x18c))||_0x5505bb(0x195))[_0x5505bb(0x16c)]();if(!lut64||lut64Streng!==_0x3bda98||lut64Profile!==_0x21dade){const _0x141413=_0x5505bb(0x16b)+_0x21dade+'_'+_0x3bda98+_0x5505bb(0x164);console[_0x5505bb(0x160)](_0x141413);const _0x2ade2c=await fetch(_0x141413),_0x514a12=await _0x2ade2c[_0x5505bb(0x155)]();lut64=new Uint8Array(_0x514a12),lut64Streng=_0x3bda98,lut64Profile=_0x21dade;}}function setupWebGL_Shader(_0x5d5941){const _0x5b363b=a0_0x3422;gl=bufferCanvas[_0x5b363b(0x18f)](_0x5b363b(0x17b),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x5b363b(0x179)}),gl[_0x5b363b(0x17f)](0x0,0x0,bufferCanvas[_0x5b363b(0x188)],bufferCanvas[_0x5b363b(0x178)]);function _0x1406e5(_0x32f529,_0xe2a31a){const _0x92e51e=_0x5b363b,_0x2e2651=gl[_0x92e51e(0x18b)](_0x32f529);return gl[_0x92e51e(0x180)](_0x2e2651,_0xe2a31a),gl[_0x92e51e(0x163)](_0x2e2651),_0x2e2651;}vs=_0x5b363b(0x162);if(_0x5d5941===_0x5b363b(0x17b))fs=_0x5b363b(0x16d);else _0x5d5941==='webgl_full'&&(fs=_0x5b363b(0x16e));const _0x558934=_0x1406e5(gl['VERTEX_SHADER'],vs),_0x27f81a=_0x1406e5(gl[_0x5b363b(0x17e)],fs);return program=gl[_0x5b363b(0x185)](),gl[_0x5b363b(0x17c)](program,_0x558934),gl[_0x5b363b(0x17c)](program,_0x27f81a),gl['linkProgram'](program),gl[_0x5b363b(0x192)](program),program;}function setupTexture_Buffer(_0x184013){const _0x559c18=a0_0x3422;texture=gl[_0x559c18(0x15d)](),gl['bindTexture'](gl[_0x559c18(0x18d)],texture),gl[_0x559c18(0x194)](gl[_0x559c18(0x18d)],gl['TEXTURE_MIN_FILTER'],gl[_0x559c18(0x175)]),gl[_0x559c18(0x194)](gl[_0x559c18(0x18d)],gl['TEXTURE_MAG_FILTER'],gl[_0x559c18(0x175)]),gl['texParameteri'](gl[_0x559c18(0x18d)],gl[_0x559c18(0x182)],gl[_0x559c18(0x176)]),gl[_0x559c18(0x194)](gl[_0x559c18(0x18d)],gl['TEXTURE_WRAP_T'],gl[_0x559c18(0x176)]);_0x184013===_0x559c18(0x15a)&&(gl[_0x559c18(0x183)](gl['getUniformLocation'](program,_0x559c18(0x152)),gameWidth,gameHeight),gl[_0x559c18(0x183)](gl[_0x559c18(0x177)](program,_0x559c18(0x153)),gl[_0x559c18(0x186)]['width'],gl[_0x559c18(0x186)][_0x559c18(0x178)]),gl[_0x559c18(0x16a)](gl[_0x559c18(0x177)](program,_0x559c18(0x165)),gameWidth/gl[_0x559c18(0x186)][_0x559c18(0x188)]),gl[_0x559c18(0x16a)](gl[_0x559c18(0x177)](program,_0x559c18(0x168)),gameHeight/gl[_0x559c18(0x186)][_0x559c18(0x178)]));const _0x4a6a82=gl['createBuffer']();gl['bindBuffer'](gl[_0x559c18(0x151)],_0x4a6a82),gl[_0x559c18(0x158)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x559c18(0x171)](gl[_0x559c18(0x184)](program,_0x559c18(0x172)),0x2,gl[_0x559c18(0x18e)],![],0x0,0x0),gl[_0x559c18(0x193)](gl[_0x559c18(0x184)](program,_0x559c18(0x172)));const _0x508a5b=gl[_0x559c18(0x167)]();gl[_0x559c18(0x173)](gl[_0x559c18(0x151)],_0x508a5b),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x559c18(0x169)]),gl['vertexAttribPointer'](gl[_0x559c18(0x184)](program,_0x559c18(0x17d)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x559c18(0x193)](gl[_0x559c18(0x184)](program,'texcoord'));}function a0_0x3422(_0x2f9ff8,_0x388b62){const _0x15c6ed=a0_0x15c6();return a0_0x3422=function(_0x3422be,_0x38c311){_0x3422be=_0x3422be-0x151;let _0x34fd62=_0x15c6ed[_0x3422be];return _0x34fd62;},a0_0x3422(_0x2f9ff8,_0x388b62);}function setup2DContext(){const _0x4ecc04=a0_0x3422;ctx2d=bufferCanvas[_0x4ecc04(0x18f)]('2d'),ctx2d[_0x4ecc04(0x16f)]=![];}async function renderPixel(_0x5d925c){const _0xaf75ac=a0_0x3422,_0x1d76dc=a0_0x30ce8b['getPixelData']();if(!_0x1d76dc)return;await loadLUT64();const _0x259729=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5a4294=0x0;_0x5a4294<gameHeight;_0x5a4294++){for(let _0x22f1ad=0x0;_0x22f1ad<gameWidth;_0x22f1ad++){const _0xf6ae1f=_0x5a4294*gameStride+_0x22f1ad,_0x5f1374=(_0x5a4294*gameWidth+_0x22f1ad)*0x4,_0x600ac3=_0x1d76dc[_0xf6ae1f],_0x2a6740=(_0x600ac3&0xff)>>0x2,_0x178c14=(_0x600ac3>>0x8&0xff)>>0x2,_0xdd7418=(_0x600ac3>>0x10&0xff)>>0x2,_0x3e29cc=(_0x2a6740*0x40*0x40+_0x178c14*0x40+_0xdd7418)*0x3;_0x259729[_0x5f1374]=lut64[_0x3e29cc],_0x259729[_0x5f1374+0x1]=lut64[_0x3e29cc+0x1],_0x259729[_0x5f1374+0x2]=lut64[_0x3e29cc+0x2],_0x259729[_0x5f1374+0x3]=0xff;}}if(_0x5d925c===_0xaf75ac(0x17b))gl[_0xaf75ac(0x15e)](gl[_0xaf75ac(0x18d)],0x0,gl[_0xaf75ac(0x159)],gameWidth,gameHeight,0x0,gl[_0xaf75ac(0x159)],gl['UNSIGNED_BYTE'],_0x259729),gl[_0xaf75ac(0x174)](gl[_0xaf75ac(0x18a)]),gl[_0xaf75ac(0x181)](gl[_0xaf75ac(0x166)],0x0,0x4);else _0x5d925c==='2d'&&(imageDataObj=new ImageData(_0x259729,gameWidth,gameHeight),createImageBitmap(imageDataObj)['then'](_0x58ca2a=>{const _0x473b12=_0xaf75ac;ctx2d[_0x473b12(0x15f)](0x0,0x0,bufferCanvas[_0x473b12(0x188)],bufferCanvas[_0x473b12(0x178)]),ctx2d[_0x473b12(0x15b)](_0x58ca2a,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x5d925c));}function a0_0x15c6(){const _0x2c3d8f=['height','low-power','135521ITdzAG','webgl','attachShader','texcoord','FRAGMENT_SHADER','viewport','shaderSource','drawArrays','TEXTURE_WRAP_S','uniform2f','getAttribLocation','createProgram','canvas','_streng','width','20331IyBOie','COLOR_BUFFER_BIT','createShader','_temperature','TEXTURE_2D','FLOAT','getContext','slice','116170IiCLJx','useProgram','enableVertexAttribArray','texParameteri','warm','12evmtxQ','1120064TZJlRp','ARRAY_BUFFER','game_size','render_size','3728102KDmgRQ','arrayBuffer','46ryRmYD','189355unEDnO','bufferData','RGBA','webgl_full','drawImage','getItem','createTexture','texImage2D','clearRect','log','1503rDYAtf','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','compileShader','.bin','smooth_width','TRIANGLE_STRIP','createBuffer','smooth_height','STATIC_DRAW','uniform1f','./src/lut/lut64_','toLowerCase','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','imageSmoothingEnabled','1814346MJWqDx','vertexAttribPointer','position','bindBuffer','clear','NEAREST','CLAMP_TO_EDGE','getUniformLocation'];a0_0x15c6=function(){return _0x2c3d8f;};return a0_0x15c6();}export async function switchRenderMode(_0x4d3621){const _0x3f1ade=a0_0x3422;systemType=gameName[_0x3f1ade(0x190)](-0x3);if(_0x4d3621==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x4d3621===_0x3f1ade(0x17b))setupStyle('2d'),setupWebGL_Shader(_0x3f1ade(0x17b)),setupTexture_Buffer(_0x3f1ade(0x17b)),renderPixel(_0x3f1ade(0x17b));else _0x4d3621===_0x3f1ade(0x15a)&&(setupStyle(_0x3f1ade(0x15a)),setupWebGL_Shader(_0x3f1ade(0x15a)),setupTexture_Buffer(_0x3f1ade(0x15a)),renderPixel(_0x3f1ade(0x17b)));}}