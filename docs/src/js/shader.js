(function(_0x105bfb,_0xcb74a0){const _0x55cfbb=a0_0x3743,_0x3ac505=_0x105bfb();while(!![]){try{const _0x3a3cbe=parseInt(_0x55cfbb(0x158))/0x1*(-parseInt(_0x55cfbb(0x141))/0x2)+parseInt(_0x55cfbb(0x161))/0x3+-parseInt(_0x55cfbb(0x14b))/0x4+parseInt(_0x55cfbb(0x157))/0x5+parseInt(_0x55cfbb(0x166))/0x6*(parseInt(_0x55cfbb(0x183))/0x7)+parseInt(_0x55cfbb(0x177))/0x8*(-parseInt(_0x55cfbb(0x156))/0x9)+parseInt(_0x55cfbb(0x16a))/0xa;if(_0x3a3cbe===_0xcb74a0)break;else _0x3ac505['push'](_0x3ac505['shift']());}catch(_0x388cc5){_0x3ac505['push'](_0x3ac505['shift']());}}}(a0_0x11c2,0xe675f));import*as a0_0x43eafb from'./main.js';function a0_0x3743(_0x138aeb,_0x2d3a7f){const _0x11c2b8=a0_0x11c2();return a0_0x3743=function(_0x374369,_0x50d877){_0x374369=_0x374369-0x141;let _0x41c380=_0x11c2b8[_0x374369];return _0x41c380;},a0_0x3743(_0x138aeb,_0x2d3a7f);}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x4b6a5b=a0_0x3743;systemType=gameName['slice'](-0x3);const _0x541dab=(localStorage[_0x4b6a5b(0x168)](gameName+'_temperature')||_0x4b6a5b(0x175))[_0x4b6a5b(0x154)]();if(!lut64||lut64Profile!==_0x541dab){const _0x1faa06=_0x4b6a5b(0x172)+_0x541dab+'_4.0.bin';console[_0x4b6a5b(0x142)](_0x1faa06);const _0x474ada=await fetch(_0x1faa06),_0x5984fc=await _0x474ada['arrayBuffer']();lut64=new Uint8Array(_0x5984fc),lut64Profile=_0x541dab;}}function setupWebGL_Shader(_0x12820d){const _0x349035=a0_0x3743;gl=bufferCanvas[_0x349035(0x182)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0x349035(0x17a)](0x0,0x0,bufferCanvas[_0x349035(0x14e)],bufferCanvas[_0x349035(0x176)]);function _0x4ca109(_0x1cc790,_0x40ebcc){const _0x10f676=_0x349035,_0x17aee7=gl[_0x10f676(0x164)](_0x1cc790);return gl['shaderSource'](_0x17aee7,_0x40ebcc),gl[_0x10f676(0x14a)](_0x17aee7),_0x17aee7;}vs=_0x349035(0x159);if(_0x12820d===_0x349035(0x170))fs=_0x349035(0x17f);else _0x12820d===_0x349035(0x14d)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x1a47ea=_0x4ca109(gl[_0x349035(0x17d)],vs),_0x338393=_0x4ca109(gl[_0x349035(0x162)],fs);return program=gl[_0x349035(0x178)](),gl[_0x349035(0x15c)](program,_0x1a47ea),gl['attachShader'](program,_0x338393),gl[_0x349035(0x16f)](program),gl[_0x349035(0x155)](program),program;}function setupTexture_Buffer(_0x2a40b5){const _0x23e1a7=a0_0x3743;texture=gl[_0x23e1a7(0x163)](),gl[_0x23e1a7(0x144)](gl[_0x23e1a7(0x179)],texture),gl['texParameteri'](gl[_0x23e1a7(0x179)],gl[_0x23e1a7(0x14f)],gl['NEAREST']),gl[_0x23e1a7(0x15e)](gl[_0x23e1a7(0x179)],gl[_0x23e1a7(0x15b)],gl['NEAREST']),gl[_0x23e1a7(0x15e)](gl[_0x23e1a7(0x179)],gl[_0x23e1a7(0x148)],gl['CLAMP_TO_EDGE']),gl[_0x23e1a7(0x15e)](gl[_0x23e1a7(0x179)],gl[_0x23e1a7(0x14c)],gl[_0x23e1a7(0x16e)]);_0x2a40b5===_0x23e1a7(0x14d)&&(gl['uniform2f'](gl[_0x23e1a7(0x143)](program,'game_size'),gameWidth,gameHeight),gl[_0x23e1a7(0x174)](gl[_0x23e1a7(0x143)](program,_0x23e1a7(0x169)),gl[_0x23e1a7(0x15f)][_0x23e1a7(0x14e)],gl[_0x23e1a7(0x15f)]['height']),gl[_0x23e1a7(0x147)](gl['getUniformLocation'](program,_0x23e1a7(0x153)),gameWidth/gl[_0x23e1a7(0x15f)][_0x23e1a7(0x14e)]),gl[_0x23e1a7(0x147)](gl[_0x23e1a7(0x143)](program,_0x23e1a7(0x151)),gameHeight/gl[_0x23e1a7(0x15f)][_0x23e1a7(0x176)]));const _0xf1257f=gl[_0x23e1a7(0x17e)]();gl[_0x23e1a7(0x152)](gl[_0x23e1a7(0x180)],_0xf1257f),gl[_0x23e1a7(0x149)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x23e1a7(0x173)](gl['getAttribLocation'](program,_0x23e1a7(0x16c)),0x2,gl[_0x23e1a7(0x145)],![],0x0,0x0),gl[_0x23e1a7(0x146)](gl[_0x23e1a7(0x16d)](program,_0x23e1a7(0x16c)));const _0x175fa8=gl[_0x23e1a7(0x17e)]();gl[_0x23e1a7(0x152)](gl[_0x23e1a7(0x180)],_0x175fa8),gl[_0x23e1a7(0x149)](gl[_0x23e1a7(0x180)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x23e1a7(0x150)]),gl[_0x23e1a7(0x173)](gl[_0x23e1a7(0x16d)](program,_0x23e1a7(0x16b)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x23e1a7(0x146)](gl['getAttribLocation'](program,_0x23e1a7(0x16b)));}function setup2DContext(){ctx2d=bufferCanvas['getContext']('2d'),ctx2d['imageSmoothingEnabled']=![];}function a0_0x11c2(){const _0x54c3cb=['vertexAttribPointer','uniform2f','none','height','1124296EqPIPP','createProgram','TEXTURE_2D','viewport','UNSIGNED_BYTE','set','VERTEX_SHADER','createBuffer','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','ARRAY_BUFFER','data','getContext','7LSNnnc','650WxtbBy','log','getUniformLocation','bindTexture','FLOAT','enableVertexAttribArray','uniform1f','TEXTURE_WRAP_S','bufferData','compileShader','4160256xhCRbX','TEXTURE_WRAP_T','webgl_full','width','TEXTURE_MIN_FILTER','STATIC_DRAW','smooth_height','bindBuffer','smooth_width','toLowerCase','useProgram','18Erxsvq','2488430QxCIRp','4343JtgomP','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','COLOR_BUFFER_BIT','TEXTURE_MAG_FILTER','attachShader','putImageData','texParameteri','canvas','RGBA','1188519NrBaVb','FRAGMENT_SHADER','createTexture','createShader','texImage2D','452646XJNFAG','drawArrays','getItem','render_size','27072800kqZpfi','texcoord','position','getAttribLocation','CLAMP_TO_EDGE','linkProgram','webgl','clear','./src/lut/lut64_'];a0_0x11c2=function(){return _0x54c3cb;};return a0_0x11c2();}async function renderPixel(_0x5200e7){const _0x358e8b=a0_0x3743,_0x32f202=a0_0x43eafb['getPixelData']();if(!_0x32f202)return;await loadLUT64();const _0x352d3b=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x4acd9e=0x0;_0x4acd9e<gameHeight;_0x4acd9e++){for(let _0x4e01b2=0x0;_0x4e01b2<gameWidth;_0x4e01b2++){const _0x472251=_0x4acd9e*gameStride+_0x4e01b2,_0x465d9c=(_0x4acd9e*gameWidth+_0x4e01b2)*0x4,_0x4c75ae=_0x32f202[_0x472251];if(lut64Profile===_0x358e8b(0x175))_0x352d3b[_0x465d9c]=_0x4c75ae&0xff,_0x352d3b[_0x465d9c+0x1]=_0x4c75ae>>0x8&0xff,_0x352d3b[_0x465d9c+0x2]=_0x4c75ae>>0x10&0xff,_0x352d3b[_0x465d9c+0x3]=0xff;else{const _0x9d4021=(_0x4c75ae&0xff)>>0x2,_0xf8826f=(_0x4c75ae>>0x8&0xff)>>0x2,_0x40165b=(_0x4c75ae>>0x10&0xff)>>0x2,_0x6d57e4=(_0x9d4021*0x40*0x40+_0xf8826f*0x40+_0x40165b)*0x3;_0x352d3b[_0x465d9c]=lut64[_0x6d57e4],_0x352d3b[_0x465d9c+0x1]=lut64[_0x6d57e4+0x1],_0x352d3b[_0x465d9c+0x2]=lut64[_0x6d57e4+0x2],_0x352d3b[_0x465d9c+0x3]=0xff;}}}if(_0x5200e7===_0x358e8b(0x170))gl[_0x358e8b(0x165)](gl['TEXTURE_2D'],0x0,gl[_0x358e8b(0x160)],gameWidth,gameHeight,0x0,gl[_0x358e8b(0x160)],gl[_0x358e8b(0x17b)],_0x352d3b),gl[_0x358e8b(0x171)](gl[_0x358e8b(0x15a)]),gl[_0x358e8b(0x167)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x5200e7==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x352d3b,gameWidth,gameHeight):imageDataObj[_0x358e8b(0x181)][_0x358e8b(0x17c)](_0x352d3b),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x358e8b(0x14e)],bufferCanvas[_0x358e8b(0x176)]),ctx2d[_0x358e8b(0x15d)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x5200e7));}export async function switchRenderMode(_0x4bfc5f){const _0x1beec7=a0_0x3743;systemType=gameName['slice'](-0x3);if(_0x4bfc5f==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x4bfc5f===_0x1beec7(0x170))setupStyle('2d'),setupWebGL_Shader(_0x1beec7(0x170)),setupTexture_Buffer('webgl'),renderPixel(_0x1beec7(0x170));else _0x4bfc5f===_0x1beec7(0x14d)&&(setupStyle(_0x1beec7(0x14d)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x1beec7(0x14d)),renderPixel(_0x1beec7(0x170)));}}