const a0_0x30d89c=a0_0x179d;function a0_0x179d(_0x8eb758,_0x29b411){const _0x191db4=a0_0x191d();return a0_0x179d=function(_0x179d29,_0x592d98){_0x179d29=_0x179d29-0x19e;let _0xcbeca6=_0x191db4[_0x179d29];return _0xcbeca6;},a0_0x179d(_0x8eb758,_0x29b411);}(function(_0x130d7a,_0x43dff6){const _0x2efec7=a0_0x179d,_0x357c06=_0x130d7a();while(!![]){try{const _0x49a95f=parseInt(_0x2efec7(0x20d))/0x1*(parseInt(_0x2efec7(0x1c5))/0x2)+-parseInt(_0x2efec7(0x1f1))/0x3*(parseInt(_0x2efec7(0x1ff))/0x4)+-parseInt(_0x2efec7(0x1e6))/0x5*(-parseInt(_0x2efec7(0x1b9))/0x6)+parseInt(_0x2efec7(0x1d7))/0x7*(-parseInt(_0x2efec7(0x1d5))/0x8)+-parseInt(_0x2efec7(0x1e7))/0x9+parseInt(_0x2efec7(0x19f))/0xa*(-parseInt(_0x2efec7(0x20e))/0xb)+parseInt(_0x2efec7(0x1bb))/0xc*(parseInt(_0x2efec7(0x1a9))/0xd);if(_0x49a95f===_0x43dff6)break;else _0x357c06['push'](_0x357c06['shift']());}catch(_0x174dee){_0x357c06['push'](_0x357c06['shift']());}}}(a0_0x191d,0x3c8e5));import*as a0_0x52acfe from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x30d89c(0x1b8)](a0_0x30d89c(0x1df)),bufferCanvas=document['getElementById']('canvas'),canvasContainer=document[a0_0x30d89c(0x1b8)](a0_0x30d89c(0x1aa)),imgShader=document['getElementById'](a0_0x30d89c(0x1e5)),settingContainer=document['querySelectorAll']('.setting-container'),messageContainer=document[a0_0x30d89c(0x1c4)]('.message-container'),stateTitle=document[a0_0x30d89c(0x1c4)](a0_0x30d89c(0x1d4));async function loadLUT64(){const _0x106f0c=a0_0x30d89c;systemType=gameName[_0x106f0c(0x1c2)](-0x3);const _0x100982=localStorage[_0x106f0c(0x1e3)](gameName+'_streng')||_0x106f0c(0x1f0),_0x503c23=(localStorage[_0x106f0c(0x1e3)](gameName+'_temperature')||_0x106f0c(0x1d3))[_0x106f0c(0x1c9)]();if(!lut64||lut64Streng!==_0x100982||lut64Profile!==_0x503c23){const _0x5156a1=_0x106f0c(0x1cc)+_0x503c23+'_'+_0x100982+_0x106f0c(0x1d0);console[_0x106f0c(0x1cb)](_0x5156a1);const _0x41354c=await fetch(_0x5156a1),_0x25913f=await _0x41354c[_0x106f0c(0x1bd)]();lut64=new Uint8Array(_0x25913f),lut64Streng=_0x100982,lut64Profile=_0x503c23;}}async function loadShaderSource(_0x33b74d){const _0x256cbd=a0_0x30d89c,_0x33f4a1=await fetch(_0x33b74d);return await _0x33f4a1[_0x256cbd(0x1d6)]();}function setupStyle(_0x1d90f1){const _0x292657=a0_0x30d89c;clientWidth=document[_0x292657(0x1a7)][_0x292657(0x200)];const _0x12b220=window[_0x292657(0x1b0)];systemType==='gbc'?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x292657(0x1e9)](clientWidth*_0x12b220/gameWidth),localStorage[_0x292657(0x1e4)](_0x292657(0x1f4),_0x292657(0x206)+gameWidth*(integerScaling/_0x12b220)+','+gameHeight*(integerScaling/_0x12b220))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x12b220/gameWidth),localStorage[_0x292657(0x1e4)](_0x292657(0x1f4),_0x292657(0x206)+gameWidth*(integerScaling/_0x12b220)+','+gameHeight*(integerScaling/_0x12b220)));if(_0x1d90f1==='2d')bufferCanvas[_0x292657(0x1d1)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x292657(0x1ac)][_0x292657(0x1da)]=''+integerScaling/_0x12b220,bufferCanvas['style'][_0x292657(0x1ef)]=_0x292657(0x1b3),canvasContainer[_0x292657(0x1ac)][_0x292657(0x1d1)]=gameWidth*(integerScaling/_0x12b220)+'px',canvasContainer[_0x292657(0x1ac)][_0x292657(0x1ea)]=gameHeight*(integerScaling/_0x12b220)+'px',textured[_0x292657(0x1ac)][_0x292657(0x1d1)]=gameWidth*(integerScaling/_0x12b220)+'px',textured['style']['height']=gameHeight*(integerScaling/_0x12b220)+'px',imgShader[_0x292657(0x1ac)][_0x292657(0x1b6)]='scale('+integerScaling/_0x12b220/upscaleShader+')',settingContainer['forEach'](function(_0x8f5eb7){const _0x3d545d=_0x292657;_0x8f5eb7[_0x3d545d(0x1ac)][_0x3d545d(0x1d1)]=gameWidth*(integerScaling/_0x12b220)+'px',_0x8f5eb7[_0x3d545d(0x1ac)][_0x3d545d(0x1ea)]=gameHeight*(integerScaling/_0x12b220)+'px';}),messageContainer[_0x292657(0x1dd)](function(_0x21211f){const _0x1f207b=_0x292657;_0x21211f[_0x1f207b(0x1ac)][_0x1f207b(0x1d1)]=gameWidth+'px',_0x21211f[_0x1f207b(0x1ac)]['height']=gameHeight+'px',_0x21211f[_0x1f207b(0x1ac)][_0x1f207b(0x1da)]=''+integerScaling/_0x12b220;}),stateTitle[_0x292657(0x1dd)](function(_0x2d7e11){const _0x575183=_0x292657;_0x2d7e11['classList'][_0x575183(0x1e8)]('fefs');});else _0x1d90f1===_0x292657(0x1dc)&&(bufferCanvas[_0x292657(0x1d1)]=clientWidth*upscaleFactor,bufferCanvas[_0x292657(0x1ea)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x292657(0x1ac)][_0x292657(0x1da)]=''+0x1/upscaleFactor,bufferCanvas[_0x292657(0x1ac)][_0x292657(0x1ef)]='',canvasContainer[_0x292657(0x1ac)][_0x292657(0x1d1)]=clientWidth+'px',canvasContainer[_0x292657(0x1ac)]['height']=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x292657(0x1ac)][_0x292657(0x1d1)]=clientWidth+'px',textured['style'][_0x292657(0x1ea)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style']['transform']=_0x292657(0x1ad)+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x99f4a7){const _0x285dd9=_0x292657;_0x99f4a7[_0x285dd9(0x1ac)][_0x285dd9(0x1d1)]=clientWidth+'px',_0x99f4a7[_0x285dd9(0x1ac)][_0x285dd9(0x1ea)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x292657(0x1dd)](function(_0x5a70ea){const _0x180f60=_0x292657;_0x5a70ea[_0x180f60(0x1ac)]['width']=gameWidth+'px',_0x5a70ea[_0x180f60(0x1ac)][_0x180f60(0x1ea)]=gameHeight+'px',_0x5a70ea[_0x180f60(0x1ac)][_0x180f60(0x1da)]=''+clientWidth/gameWidth;}),stateTitle[_0x292657(0x1dd)](function(_0x258a67){const _0xf852c=_0x292657;_0x258a67[_0xf852c(0x1ec)][_0xf852c(0x1fd)]('fefs');}));imgShader[_0x292657(0x1ac)][_0x292657(0x1d1)]=gameWidth*upscaleShader+'px',imgShader[_0x292657(0x1ac)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x292657(0x1ac)][_0x292657(0x1f6)]='top\x20center',imgShader[_0x292657(0x1ac)][_0x292657(0x1af)](_0x292657(0x20f),upscaleShader+_0x292657(0x1d9)+upscaleShader+'px');}function setupWebGL(){const _0x3c8704=a0_0x30d89c;gl=bufferCanvas[_0x3c8704(0x201)](_0x3c8704(0x1dc));if(!gl)return console[_0x3c8704(0x1c0)](_0x3c8704(0x20a)),null;gl[_0x3c8704(0x1a1)](0x0,0x0,bufferCanvas[_0x3c8704(0x1d1)],bufferCanvas['height']);}function createShader(_0x47541f,_0x2988ad){const _0x4f2f38=a0_0x30d89c,_0x313c96=gl[_0x4f2f38(0x204)](_0x47541f);gl[_0x4f2f38(0x1cd)](_0x313c96,_0x2988ad),gl[_0x4f2f38(0x1be)](_0x313c96);if(!gl[_0x4f2f38(0x1ce)](_0x313c96,gl[_0x4f2f38(0x1ca)]))return console['error'](gl[_0x4f2f38(0x1b4)](_0x313c96)),gl[_0x4f2f38(0x1db)](_0x313c96),null;return _0x313c96;}async function setupShaders(){const _0x2934e8=a0_0x30d89c,_0x193913=await loadShaderSource(_0x2934e8(0x1ee)),_0x2587ac=await loadShaderSource(_0x2934e8(0x1b1)),_0x2248bf=createShader(gl[_0x2934e8(0x1fe)],_0x193913),_0x2d1ebb=createShader(gl['FRAGMENT_SHADER'],_0x2587ac);return program=gl[_0x2934e8(0x1f8)](),gl[_0x2934e8(0x1de)](program,_0x2248bf),gl['attachShader'](program,_0x2d1ebb),gl[_0x2934e8(0x1d8)](program),gl[_0x2934e8(0x1c3)](program),program;}function a0_0x191d(){const _0x21cbce=['game_size','documentElement','smooth_width','9334okZoOR','canvas-container','FLOAT','style','scale(','then','setProperty','devicePixelRatio','./src/shaders/fragmentShader.glsl','Lá»—i\x20trong\x20Worker:','crisp-edges','getShaderInfoLog','postMessage','transform','onmessage','getElementById','99486FgJnZr','uniform1f','4764RTabmG','imageSmoothingEnabled','arrayBuffer','compileShader','clear','error','./src/js/worker.js','slice','useProgram','querySelectorAll','866uWSbDK','bindTexture','position','getAttribLocation','toLowerCase','COMPILE_STATUS','log','./src/lut/lut64_','shaderSource','getShaderParameter','vertexAttribPointer','.bin','width','NEAREST','warm','.stateTitle,\x20.stateDate','63912HiTUXC','text','42nyKrAb','linkProgram','px\x20','zoom','deleteShader','webgl2','forEach','attachShader','textured','bufferData','TEXTURE_2D','TEXTURE_MIN_FILTER','getItem','setItem','img-shader','60secYBN','1198152WAUGPS','remove','floor','height','drawImage','classList','bindBuffer','./src/shaders/vertexShader.glsl','imageRendering','4.0','27594FwFzcj','createBuffer','UNSIGNED_BYTE','screenSize','message','transformOrigin','data','createProgram','onerror','CLAMP_TO_EDGE','enableVertexAttribArray','createTexture','add','VERTEX_SHADER','196QCRxXo','clientWidth','getContext','getUniformLocation','RGBA','createShader','DOMContentLoaded','0,0,','TEXTURE_MAG_FILTER','texImage2D','TRIANGLE_STRIP','WebGL2\x20not\x20supported','clearRect','canvas','1061OvdLFV','6930pmrzhM','--bg-size','STATIC_DRAW','getPixelData','1010fBHPEo','addEventListener','viewport','TEXTURE_WRAP_T','ARRAY_BUFFER','uniform2f','texParameteri'];a0_0x191d=function(){return _0x21cbce;};return a0_0x191d();}function setupTexture(){const _0x3ea447=a0_0x30d89c;texture=gl[_0x3ea447(0x1fc)](),gl['bindTexture'](gl[_0x3ea447(0x1e1)],texture),gl[_0x3ea447(0x1a5)](gl[_0x3ea447(0x1e1)],gl[_0x3ea447(0x1e2)],gl[_0x3ea447(0x1d2)]),gl[_0x3ea447(0x1a5)](gl[_0x3ea447(0x1e1)],gl[_0x3ea447(0x207)],gl[_0x3ea447(0x1d2)]),gl['texParameteri'](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0x3ea447(0x1fa)]),gl[_0x3ea447(0x1a5)](gl[_0x3ea447(0x1e1)],gl[_0x3ea447(0x1a2)],gl[_0x3ea447(0x1fa)]),gl[_0x3ea447(0x1a4)](gl[_0x3ea447(0x202)](program,_0x3ea447(0x1a6)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x3ea447(0x202)](program,'render_size'),gl[_0x3ea447(0x20c)]['width'],gl[_0x3ea447(0x20c)][_0x3ea447(0x1ea)]),gl[_0x3ea447(0x1ba)](gl[_0x3ea447(0x202)](program,_0x3ea447(0x1a8)),gameWidth/gl['canvas']['width']),gl[_0x3ea447(0x1ba)](gl[_0x3ea447(0x202)](program,'smooth_height'),gameHeight/gl[_0x3ea447(0x20c)]['height']);}function setupBuffers(){const _0x4a5abc=a0_0x30d89c,_0x3f3470=gl['createBuffer']();gl['bindBuffer'](gl[_0x4a5abc(0x1a3)],_0x3f3470),gl[_0x4a5abc(0x1e0)](gl[_0x4a5abc(0x1a3)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x4a5abc(0x210)]);const _0x23244b=gl[_0x4a5abc(0x1c8)](program,_0x4a5abc(0x1c7));gl[_0x4a5abc(0x1fb)](_0x23244b),gl[_0x4a5abc(0x1cf)](_0x23244b,0x2,gl[_0x4a5abc(0x1ab)],![],0x0,0x0);const _0x1a3e0a=gl[_0x4a5abc(0x1f2)]();gl[_0x4a5abc(0x1ed)](gl[_0x4a5abc(0x1a3)],_0x1a3e0a),gl[_0x4a5abc(0x1e0)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4a5abc(0x210)]);const _0x514a29=gl['getAttribLocation'](program,'texcoord');gl[_0x4a5abc(0x1fb)](_0x514a29),gl['vertexAttribPointer'](_0x514a29,0x2,gl[_0x4a5abc(0x1ab)],![],0x0,0x0);}async function renderPixel(_0x36762a){const _0x26058a=a0_0x30d89c,_0x5acf62=a0_0x52acfe[_0x26058a(0x19e)]();if(!_0x5acf62)return;await loadLUT64();const _0x462dc8=new Worker(_0x26058a(0x1c1));_0x462dc8[_0x26058a(0x1b7)]=function(_0x6d628a){const _0xd747bb=_0x26058a,_0x5a5bb0=_0x6d628a[_0xd747bb(0x1f7)];if(_0x36762a==='webgl2')gl[_0xd747bb(0x1c6)](gl[_0xd747bb(0x1e1)],texture),gl[_0xd747bb(0x208)](gl[_0xd747bb(0x1e1)],0x0,gl[_0xd747bb(0x203)],gameWidth,gameHeight,0x0,gl[_0xd747bb(0x203)],gl[_0xd747bb(0x1f3)],_0x5a5bb0),gl[_0xd747bb(0x1bf)](gl['COLOR_BUFFER_BIT']),gl['drawArrays'](gl[_0xd747bb(0x209)],0x0,0x4);else{if(_0x36762a==='2d'){ctx2d=bufferCanvas[_0xd747bb(0x201)]('2d'),ctx2d[_0xd747bb(0x1bc)]=![];const _0x2a72b1=new ImageData(_0x5a5bb0,gameWidth,gameHeight);createImageBitmap(_0x2a72b1)[_0xd747bb(0x1ae)](_0x1e5fd8=>{const _0x138d0d=_0xd747bb;ctx2d[_0x138d0d(0x20b)](0x0,0x0,bufferCanvas[_0x138d0d(0x1d1)],bufferCanvas['height']),ctx2d[_0x138d0d(0x1eb)](_0x1e5fd8,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x36762a));},_0x462dc8[_0x26058a(0x1f9)]=function(_0x5278cc){const _0x65eefc=_0x26058a;console['error'](_0x65eefc(0x1b2),_0x5278cc[_0x65eefc(0x1f5)]);},_0x462dc8[_0x26058a(0x1b5)]({'pixelData':_0x5acf62,'gameWidth':gameWidth,'gameHeight':gameHeight,'gameStride':gameStride,'lut64':lut64});}export async function switchRenderMode(_0x334fa9){const _0xa944e3=a0_0x30d89c;systemType=gameName[_0xa944e3(0x1c2)](-0x3);if(_0x334fa9==='2d')setupStyle('2d'),renderPixel('2d');else _0x334fa9===_0xa944e3(0x1dc)&&(setupStyle(_0xa944e3(0x1dc)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0xa944e3(0x1dc)));}document[a0_0x30d89c(0x1a0)](a0_0x30d89c(0x205),function(){});