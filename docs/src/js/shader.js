function a0_0x4247(_0x700dd,_0x46422c){const _0x119eb6=a0_0x119e();return a0_0x4247=function(_0x4247c3,_0x52110e){_0x4247c3=_0x4247c3-0x165;let _0x3e7812=_0x119eb6[_0x4247c3];return _0x3e7812;},a0_0x4247(_0x700dd,_0x46422c);}const a0_0x4d6263=a0_0x4247;(function(_0x5c3c2d,_0x50af69){const _0x5ebe1a=a0_0x4247,_0x3aa89e=_0x5c3c2d();while(!![]){try{const _0x1b6f46=-parseInt(_0x5ebe1a(0x175))/0x1*(-parseInt(_0x5ebe1a(0x185))/0x2)+parseInt(_0x5ebe1a(0x167))/0x3*(parseInt(_0x5ebe1a(0x1a0))/0x4)+-parseInt(_0x5ebe1a(0x1ad))/0x5*(parseInt(_0x5ebe1a(0x19f))/0x6)+-parseInt(_0x5ebe1a(0x18e))/0x7+-parseInt(_0x5ebe1a(0x18c))/0x8+parseInt(_0x5ebe1a(0x181))/0x9*(parseInt(_0x5ebe1a(0x1c7))/0xa)+-parseInt(_0x5ebe1a(0x1c2))/0xb;if(_0x1b6f46===_0x50af69)break;else _0x3aa89e['push'](_0x3aa89e['shift']());}catch(_0x3c9e38){_0x3aa89e['push'](_0x3aa89e['shift']());}}}(a0_0x119e,0x826b1));import*as a0_0x31d9d8 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x4d6263(0x1b7)](a0_0x4d6263(0x171)),bufferCanvas=document[a0_0x4d6263(0x1b7)]('canvas'),canvasContainer=document[a0_0x4d6263(0x1b7)](a0_0x4d6263(0x1c1)),imgShader=document['getElementById'](a0_0x4d6263(0x198)),settingContainer=document[a0_0x4d6263(0x17b)](a0_0x4d6263(0x1c8)),messageContainer=document[a0_0x4d6263(0x17b)]('.message-container'),stateTitle=document[a0_0x4d6263(0x17b)](a0_0x4d6263(0x186));async function loadLUT64(){const _0x465b7a=a0_0x4d6263;systemType=gameName[_0x465b7a(0x17c)](-0x3);const _0x49c79c=localStorage[_0x465b7a(0x16d)](gameName+_0x465b7a(0x1af))||_0x465b7a(0x194),_0x1e0aa1=(localStorage['getItem'](gameName+_0x465b7a(0x1a7))||_0x465b7a(0x1b6))[_0x465b7a(0x1ab)]();if(!lut64||lut64Streng!==_0x49c79c||lut64Profile!==_0x1e0aa1){const _0x55fc19='./src/lut/lut64_'+_0x1e0aa1+'_'+_0x49c79c+_0x465b7a(0x18a);console[_0x465b7a(0x180)](_0x55fc19);const _0x2497f6=await fetch(_0x55fc19),_0x2b35fb=await _0x2497f6[_0x465b7a(0x1ae)]();lut64=new Uint8Array(_0x2b35fb),lut64Streng=_0x49c79c,lut64Profile=_0x1e0aa1;}}async function loadShaderSource(_0x4d2d6d){const _0x414608=a0_0x4d6263,_0x3f53c2=await fetch(_0x4d2d6d);return await _0x3f53c2[_0x414608(0x187)]();}function setupStyle(_0x4c22a3){const _0x569a41=a0_0x4d6263;clientWidth=document[_0x569a41(0x1b3)]['clientWidth'];const _0x12c55d=window[_0x569a41(0x16a)];systemType===_0x569a41(0x193)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x12c55d/gameWidth),localStorage[_0x569a41(0x1b0)](_0x569a41(0x1bd),_0x569a41(0x184)+gameWidth*(integerScaling/_0x12c55d)+','+gameHeight*(integerScaling/_0x12c55d))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x12c55d/gameWidth),localStorage[_0x569a41(0x1b0)](_0x569a41(0x1bd),_0x569a41(0x184)+gameWidth*(integerScaling/_0x12c55d)+','+gameHeight*(integerScaling/_0x12c55d)));if(_0x4c22a3==='2d')bufferCanvas[_0x569a41(0x18b)]=gameWidth,bufferCanvas[_0x569a41(0x1b8)]=gameHeight,bufferCanvas['style']['zoom']=''+integerScaling/_0x12c55d,bufferCanvas[_0x569a41(0x1c9)][_0x569a41(0x183)]=_0x569a41(0x1b2),canvasContainer['style']['width']=gameWidth*(integerScaling/_0x12c55d)+'px',canvasContainer['style'][_0x569a41(0x1b8)]=gameHeight*(integerScaling/_0x12c55d)+'px',textured[_0x569a41(0x1c9)][_0x569a41(0x18b)]=gameWidth*(integerScaling/_0x12c55d)+'px',textured[_0x569a41(0x1c9)][_0x569a41(0x1b8)]=gameHeight*(integerScaling/_0x12c55d)+'px',imgShader[_0x569a41(0x1c9)][_0x569a41(0x1b1)]=_0x569a41(0x170)+integerScaling/_0x12c55d/upscaleShader+')',settingContainer[_0x569a41(0x1bf)](function(_0x19a490){const _0x53fa93=_0x569a41;_0x19a490['style']['width']=gameWidth*(integerScaling/_0x12c55d)+'px',_0x19a490[_0x53fa93(0x1c9)][_0x53fa93(0x1b8)]=gameHeight*(integerScaling/_0x12c55d)+'px';}),messageContainer[_0x569a41(0x1bf)](function(_0x4de1c6){const _0x5bf20b=_0x569a41;_0x4de1c6[_0x5bf20b(0x1c9)]['width']=gameWidth+'px',_0x4de1c6['style'][_0x5bf20b(0x1b8)]=gameHeight+'px',_0x4de1c6[_0x5bf20b(0x1c9)]['zoom']=''+integerScaling/_0x12c55d;}),stateTitle[_0x569a41(0x1bf)](function(_0x2a4e26){const _0x1a9637=_0x569a41;_0x2a4e26['classList']['remove'](_0x1a9637(0x169));});else _0x4c22a3===_0x569a41(0x17a)&&(bufferCanvas[_0x569a41(0x18b)]=clientWidth*upscaleFactor,bufferCanvas[_0x569a41(0x1b8)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x569a41(0x1be)]=''+0x1/upscaleFactor,bufferCanvas[_0x569a41(0x1c9)][_0x569a41(0x183)]='',canvasContainer[_0x569a41(0x1c9)]['width']=clientWidth+'px',canvasContainer[_0x569a41(0x1c9)][_0x569a41(0x1b8)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x569a41(0x1c9)][_0x569a41(0x18b)]=clientWidth+'px',textured[_0x569a41(0x1c9)][_0x569a41(0x1b8)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x569a41(0x1c9)][_0x569a41(0x1b1)]=_0x569a41(0x170)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x569a41(0x1bf)](function(_0x288762){const _0x656046=_0x569a41;_0x288762[_0x656046(0x1c9)]['width']=clientWidth+'px',_0x288762['style'][_0x656046(0x1b8)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer['forEach'](function(_0x320731){const _0x2151a4=_0x569a41;_0x320731[_0x2151a4(0x1c9)]['width']=gameWidth+'px',_0x320731[_0x2151a4(0x1c9)][_0x2151a4(0x1b8)]=gameHeight+'px',_0x320731[_0x2151a4(0x1c9)][_0x2151a4(0x1be)]=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x4a5675){const _0x3cdfb4=_0x569a41;_0x4a5675[_0x3cdfb4(0x1a8)][_0x3cdfb4(0x1a5)](_0x3cdfb4(0x169));}));imgShader[_0x569a41(0x1c9)][_0x569a41(0x18b)]=gameWidth*upscaleShader+'px',imgShader['style'][_0x569a41(0x1b8)]=gameHeight*upscaleShader+'px',imgShader['style']['transformOrigin']=_0x569a41(0x1a6),imgShader[_0x569a41(0x1c9)][_0x569a41(0x19c)](_0x569a41(0x16c),upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0xf2109=a0_0x4d6263;gl=bufferCanvas[_0xf2109(0x1bb)]('webgl2');if(!gl)return console[_0xf2109(0x1c4)](_0xf2109(0x1b5)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0xf2109(0x18b)],bufferCanvas[_0xf2109(0x1b8)]);}function createShader(_0x3b5f86,_0x1b4024){const _0x3daa75=a0_0x4d6263,_0xa35c5b=gl[_0x3daa75(0x177)](_0x3b5f86);gl['shaderSource'](_0xa35c5b,_0x1b4024),gl[_0x3daa75(0x17f)](_0xa35c5b);if(!gl['getShaderParameter'](_0xa35c5b,gl[_0x3daa75(0x1bc)]))return console[_0x3daa75(0x1c4)](gl[_0x3daa75(0x1c0)](_0xa35c5b)),gl[_0x3daa75(0x1a4)](_0xa35c5b),null;return _0xa35c5b;}function a0_0x119e(){const _0x5a4d9c=['4.0','texParameteri','imageSmoothingEnabled','bindBuffer','img-shader','smooth_width','vertexAttribPointer','uniform1f','setProperty','linkProgram','bufferData','6kNmObX','1048848fRlNoz','smooth_height','UNSIGNED_BYTE','createTexture','deleteShader','add','top\x20center','_temperature','classList','VERTEX_SHADER','bindTexture','toLowerCase','TEXTURE_MIN_FILTER','1810745MxnNeO','arrayBuffer','_streng','setItem','transform','crisp-edges','documentElement','getUniformLocation','WebGL2\x20not\x20supported','warm','getElementById','height','getPixelData','TEXTURE_WRAP_S','getContext','COMPILE_STATUS','screenSize','zoom','forEach','getShaderInfoLog','canvas-container','1286483WalLrk','clearRect','error','RGBA','FRAGMENT_SHADER','320QvvESH','.setting-container','style','./src/shaders/vertexShader.glsl','uniform2f','6BmOnqX','NEAREST','fefs','devicePixelRatio','COLOR_BUFFER_BIT','--bg-size','getItem','createBuffer','game_size','scale(','textured','TEXTURE_MAG_FILTER','ARRAY_BUFFER','TEXTURE_2D','3wTelum','position','createShader','FLOAT','texcoord','webgl2','querySelectorAll','slice','enableVertexAttribArray','CLAMP_TO_EDGE','compileShader','log','185877RbhhEQ','canvas','imageRendering','0,0,','268402iIUsAF','.stateTitle,\x20.stateDate','text','TEXTURE_WRAP_T','./src/shaders/fragmentShader.glsl','.bin','width','3799808SQyqOk','createProgram','697564yyumPg','STATIC_DRAW','addEventListener','attachShader','drawArrays','gbc'];a0_0x119e=function(){return _0x5a4d9c;};return a0_0x119e();}async function setupShaders(){const _0x1ef06e=a0_0x4d6263,_0x507eb5=await loadShaderSource(_0x1ef06e(0x165)),_0xf2573b=await loadShaderSource(_0x1ef06e(0x189)),_0x4cdc92=createShader(gl[_0x1ef06e(0x1a9)],_0x507eb5),_0x3f64aa=createShader(gl[_0x1ef06e(0x1c6)],_0xf2573b);return program=gl[_0x1ef06e(0x18d)](),gl[_0x1ef06e(0x191)](program,_0x4cdc92),gl['attachShader'](program,_0x3f64aa),gl[_0x1ef06e(0x19d)](program),gl['useProgram'](program),program;}function setupTexture(){const _0x416aec=a0_0x4d6263;texture=gl[_0x416aec(0x1a3)](),gl[_0x416aec(0x1aa)](gl['TEXTURE_2D'],texture),gl[_0x416aec(0x195)](gl[_0x416aec(0x174)],gl[_0x416aec(0x1ac)],gl[_0x416aec(0x168)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x416aec(0x172)],gl[_0x416aec(0x168)]),gl[_0x416aec(0x195)](gl['TEXTURE_2D'],gl[_0x416aec(0x1ba)],gl[_0x416aec(0x17e)]),gl[_0x416aec(0x195)](gl[_0x416aec(0x174)],gl[_0x416aec(0x188)],gl[_0x416aec(0x17e)]),gl['uniform2f'](gl[_0x416aec(0x1b4)](program,_0x416aec(0x16f)),gameWidth,gameHeight),gl[_0x416aec(0x166)](gl['getUniformLocation'](program,'render_size'),gl[_0x416aec(0x182)][_0x416aec(0x18b)],gl[_0x416aec(0x182)][_0x416aec(0x1b8)]),gl[_0x416aec(0x19b)](gl[_0x416aec(0x1b4)](program,_0x416aec(0x199)),gameWidth/gl[_0x416aec(0x182)][_0x416aec(0x18b)]),gl[_0x416aec(0x19b)](gl[_0x416aec(0x1b4)](program,_0x416aec(0x1a1)),gameHeight/gl[_0x416aec(0x182)]['height']);}function setupBuffers(){const _0x2d2236=a0_0x4d6263,_0x4c6085=gl[_0x2d2236(0x16e)]();gl[_0x2d2236(0x197)](gl[_0x2d2236(0x173)],_0x4c6085),gl[_0x2d2236(0x19e)](gl[_0x2d2236(0x173)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x1b291f=gl['getAttribLocation'](program,_0x2d2236(0x176));gl['enableVertexAttribArray'](_0x1b291f),gl[_0x2d2236(0x19a)](_0x1b291f,0x2,gl[_0x2d2236(0x178)],![],0x0,0x0);const _0x5a009f=gl[_0x2d2236(0x16e)]();gl[_0x2d2236(0x197)](gl[_0x2d2236(0x173)],_0x5a009f),gl['bufferData'](gl[_0x2d2236(0x173)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2d2236(0x18f)]);const _0x3a2892=gl['getAttribLocation'](program,_0x2d2236(0x179));gl[_0x2d2236(0x17d)](_0x3a2892),gl[_0x2d2236(0x19a)](_0x3a2892,0x2,gl[_0x2d2236(0x178)],![],0x0,0x0);}async function renderPixel(_0xf111e2){const _0x3ecbaf=a0_0x4d6263,_0x1213b5=a0_0x31d9d8[_0x3ecbaf(0x1b9)]();if(!_0x1213b5)return;await loadLUT64();const _0x3d399c=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x15c6a3=0x0;_0x15c6a3<gameHeight;_0x15c6a3++){for(let _0x1c55de=0x0;_0x1c55de<gameWidth;_0x1c55de++){const _0x17e045=_0x15c6a3*gameStride+_0x1c55de,_0x53acb3=(_0x15c6a3*gameWidth+_0x1c55de)*0x4,_0x1c240f=_0x1213b5[_0x17e045],_0x23c160=(_0x1c240f&0xff)>>0x2,_0x2eba67=(_0x1c240f>>0x8&0xff)>>0x2,_0x26d1f4=(_0x1c240f>>0x10&0xff)>>0x2,_0x27a161=(_0x23c160*0x40*0x40+_0x2eba67*0x40+_0x26d1f4)*0x3;_0x3d399c[_0x53acb3]=lut64[_0x27a161],_0x3d399c[_0x53acb3+0x1]=lut64[_0x27a161+0x1],_0x3d399c[_0x53acb3+0x2]=lut64[_0x27a161+0x2],_0x3d399c[_0x53acb3+0x3]=0xff;}}if(_0xf111e2==='webgl2')gl[_0x3ecbaf(0x1aa)](gl[_0x3ecbaf(0x174)],texture),gl['texImage2D'](gl[_0x3ecbaf(0x174)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x3ecbaf(0x1c5)],gl[_0x3ecbaf(0x1a2)],_0x3d399c),gl['clear'](gl[_0x3ecbaf(0x16b)]),gl[_0x3ecbaf(0x192)](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0xf111e2==='2d'){ctx2d=bufferCanvas[_0x3ecbaf(0x1bb)]('2d'),ctx2d[_0x3ecbaf(0x196)]=![];const _0x337953=new ImageData(_0x3d399c,gameWidth,gameHeight);createImageBitmap(_0x337953)['then'](_0x1d68c3=>{const _0x384499=_0x3ecbaf;ctx2d[_0x384499(0x1c3)](0x0,0x0,bufferCanvas[_0x384499(0x18b)],bufferCanvas[_0x384499(0x1b8)]),ctx2d['drawImage'](_0x1d68c3,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0xf111e2));}export async function switchRenderMode(_0x4f1bda){const _0x546245=a0_0x4d6263;systemType=gameName[_0x546245(0x17c)](-0x3);if(_0x4f1bda==='2d')setupStyle('2d'),renderPixel('2d');else _0x4f1bda===_0x546245(0x17a)&&(setupStyle(_0x546245(0x17a)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x546245(0x17a)));}document[a0_0x4d6263(0x190)]('DOMContentLoaded',function(){});