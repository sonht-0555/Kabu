(function(_0x196f3e,_0x37059f){const _0x268810=a0_0x5398,_0x34b926=_0x196f3e();while(!![]){try{const _0x46d6e8=-parseInt(_0x268810(0x16f))/0x1+-parseInt(_0x268810(0x167))/0x2*(parseInt(_0x268810(0x183))/0x3)+-parseInt(_0x268810(0x170))/0x4*(-parseInt(_0x268810(0x18b))/0x5)+parseInt(_0x268810(0x16e))/0x6*(-parseInt(_0x268810(0x191))/0x7)+-parseInt(_0x268810(0x169))/0x8+-parseInt(_0x268810(0x196))/0x9+parseInt(_0x268810(0x19b))/0xa;if(_0x46d6e8===_0x37059f)break;else _0x34b926['push'](_0x34b926['shift']());}catch(_0x5f11ff){_0x34b926['push'](_0x34b926['shift']());}}}(a0_0x10c8,0x21c79));import*as a0_0x113905 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x4c4b63=a0_0x5398;systemType=gameName[_0x4c4b63(0x19d)](-0x3);const _0x19dc46=(localStorage[_0x4c4b63(0x195)](gameName+'_temperature')||_0x4c4b63(0x168))[_0x4c4b63(0x192)]();if(!lut64||lut64Profile!==_0x19dc46){const _0xfe32ba=_0x4c4b63(0x16c)+_0x19dc46+_0x4c4b63(0x190);console['log'](_0xfe32ba);const _0x702dba=await fetch(_0xfe32ba),_0x5dac52=await _0x702dba['arrayBuffer']();lut64=new Uint8Array(_0x5dac52),lut64Profile=_0x19dc46;}}function a0_0x5398(_0x1308fd,_0x14510a){const _0x10c853=a0_0x10c8();return a0_0x5398=function(_0x5398ab,_0x6d72ac){_0x5398ab=_0x5398ab-0x162;let _0x37f054=_0x10c853[_0x5398ab];return _0x37f054;},a0_0x5398(_0x1308fd,_0x14510a);}function setupWebGL_Shader(_0x5f46a8){const _0x3c08c6=a0_0x5398;gl=bufferCanvas[_0x3c08c6(0x197)](_0x3c08c6(0x177),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x3c08c6(0x165)}),gl[_0x3c08c6(0x17f)](0x0,0x0,bufferCanvas[_0x3c08c6(0x172)],bufferCanvas[_0x3c08c6(0x176)]);function _0x487aa4(_0x26a68f,_0x4f6c21){const _0x1046bd=_0x3c08c6,_0x441f5b=gl[_0x1046bd(0x185)](_0x26a68f);return gl['shaderSource'](_0x441f5b,_0x4f6c21),gl[_0x1046bd(0x17b)](_0x441f5b),_0x441f5b;}vs=_0x3c08c6(0x162);if(_0x5f46a8===_0x3c08c6(0x177))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x5f46a8===_0x3c08c6(0x173)&&(fs=_0x3c08c6(0x194));const _0x411eda=_0x487aa4(gl[_0x3c08c6(0x174)],vs),_0x5f54d1=_0x487aa4(gl[_0x3c08c6(0x1a4)],fs);return program=gl[_0x3c08c6(0x17e)](),gl[_0x3c08c6(0x188)](program,_0x411eda),gl[_0x3c08c6(0x188)](program,_0x5f54d1),gl[_0x3c08c6(0x1a3)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x2f8ca6){const _0x2c46ad=a0_0x5398;texture=gl[_0x2c46ad(0x163)](),gl[_0x2c46ad(0x181)](gl[_0x2c46ad(0x19c)],texture),gl[_0x2c46ad(0x18e)](gl[_0x2c46ad(0x19c)],gl[_0x2c46ad(0x184)],gl[_0x2c46ad(0x19f)]),gl[_0x2c46ad(0x18e)](gl[_0x2c46ad(0x19c)],gl[_0x2c46ad(0x187)],gl[_0x2c46ad(0x19f)]),gl[_0x2c46ad(0x18e)](gl[_0x2c46ad(0x19c)],gl['TEXTURE_WRAP_S'],gl[_0x2c46ad(0x19a)]),gl[_0x2c46ad(0x18e)](gl[_0x2c46ad(0x19c)],gl['TEXTURE_WRAP_T'],gl[_0x2c46ad(0x19a)]);_0x2f8ca6==='webgl_full'&&(gl['uniform2f'](gl[_0x2c46ad(0x1a2)](program,_0x2c46ad(0x171)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x2c46ad(0x1a2)](program,_0x2c46ad(0x164)),gl[_0x2c46ad(0x179)][_0x2c46ad(0x172)],gl['canvas'][_0x2c46ad(0x176)]),gl[_0x2c46ad(0x17d)](gl[_0x2c46ad(0x1a2)](program,'smooth_width'),gameWidth/gl[_0x2c46ad(0x179)][_0x2c46ad(0x172)]),gl[_0x2c46ad(0x17d)](gl[_0x2c46ad(0x1a2)](program,_0x2c46ad(0x166)),gameHeight/gl[_0x2c46ad(0x179)][_0x2c46ad(0x176)]));const _0x3f52ac=gl[_0x2c46ad(0x18f)]();gl[_0x2c46ad(0x186)](gl[_0x2c46ad(0x17c)],_0x3f52ac),gl[_0x2c46ad(0x17a)](gl[_0x2c46ad(0x17c)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2c46ad(0x18d)]),gl[_0x2c46ad(0x18c)](gl[_0x2c46ad(0x199)](program,_0x2c46ad(0x16b)),0x2,gl[_0x2c46ad(0x1a0)],![],0x0,0x0),gl[_0x2c46ad(0x189)](gl[_0x2c46ad(0x199)](program,_0x2c46ad(0x16b)));const _0x542730=gl[_0x2c46ad(0x18f)]();gl[_0x2c46ad(0x186)](gl[_0x2c46ad(0x17c)],_0x542730),gl[_0x2c46ad(0x17a)](gl[_0x2c46ad(0x17c)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']),gl[_0x2c46ad(0x18c)](gl[_0x2c46ad(0x199)](program,'texcoord'),0x2,gl['FLOAT'],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x2c46ad(0x199)](program,'texcoord'));}function a0_0x10c8(){const _0x5323ed=['game_size','width','webgl_full','VERTEX_SHADER','putImageData','height','webgl','drawArrays','canvas','bufferData','compileShader','ARRAY_BUFFER','uniform1f','createProgram','viewport','texImage2D','bindTexture','clear','12SyuUMh','TEXTURE_MIN_FILTER','createShader','bindBuffer','TEXTURE_MAG_FILTER','attachShader','enableVertexAttribArray','clearRect','155255KcsGlF','vertexAttribPointer','STATIC_DRAW','texParameteri','createBuffer','_4.0.bin','6545Orjtst','toLowerCase','imageSmoothingEnabled','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','getItem','1365255GPwoQM','getContext','UNSIGNED_BYTE','getAttribLocation','CLAMP_TO_EDGE','7472390mKJByx','TEXTURE_2D','slice','getPixelData','NEAREST','FLOAT','COLOR_BUFFER_BIT','getUniformLocation','linkProgram','FRAGMENT_SHADER','RGBA','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','createTexture','render_size','low-power','smooth_height','58568YUzEQC','none','943968WijCzI','set','position','./src/lut/lut64_','data','1242sDrWWG','121659DaINYm','12xIJbCQ'];a0_0x10c8=function(){return _0x5323ed;};return a0_0x10c8();}function setup2DContext(){const _0x56b406=a0_0x5398;ctx2d=bufferCanvas[_0x56b406(0x197)]('2d'),ctx2d[_0x56b406(0x193)]=![];}async function renderPixel(_0x36d0da){const _0x2d995f=a0_0x5398,_0x347c43=a0_0x113905[_0x2d995f(0x19e)]();if(!_0x347c43)return;await loadLUT64();const _0xfcabd4=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5b9c81=0x0;_0x5b9c81<gameHeight;_0x5b9c81++){for(let _0x132867=0x0;_0x132867<gameWidth;_0x132867++){const _0x504496=_0x5b9c81*gameStride+_0x132867,_0x3bfb3d=(_0x5b9c81*gameWidth+_0x132867)*0x4,_0xfdc7fb=_0x347c43[_0x504496];if(lut64Profile==='none')_0xfcabd4[_0x3bfb3d]=_0xfdc7fb&0xff,_0xfcabd4[_0x3bfb3d+0x1]=_0xfdc7fb>>0x8&0xff,_0xfcabd4[_0x3bfb3d+0x2]=_0xfdc7fb>>0x10&0xff,_0xfcabd4[_0x3bfb3d+0x3]=0xff;else{const _0x4c4468=(_0xfdc7fb&0xff)>>0x2,_0x3f1a43=(_0xfdc7fb>>0x8&0xff)>>0x2,_0x4351bf=(_0xfdc7fb>>0x10&0xff)>>0x2,_0x3e4093=(_0x4c4468*0x40*0x40+_0x3f1a43*0x40+_0x4351bf)*0x3;_0xfcabd4[_0x3bfb3d]=lut64[_0x3e4093],_0xfcabd4[_0x3bfb3d+0x1]=lut64[_0x3e4093+0x1],_0xfcabd4[_0x3bfb3d+0x2]=lut64[_0x3e4093+0x2],_0xfcabd4[_0x3bfb3d+0x3]=0xff;}}}if(_0x36d0da===_0x2d995f(0x177))gl[_0x2d995f(0x180)](gl[_0x2d995f(0x19c)],0x0,gl[_0x2d995f(0x1a5)],gameWidth,gameHeight,0x0,gl[_0x2d995f(0x1a5)],gl[_0x2d995f(0x198)],_0xfcabd4),gl[_0x2d995f(0x182)](gl[_0x2d995f(0x1a1)]),gl[_0x2d995f(0x178)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x36d0da==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0xfcabd4,gameWidth,gameHeight):imageDataObj[_0x2d995f(0x16d)][_0x2d995f(0x16a)](_0xfcabd4),ctx2d[_0x2d995f(0x18a)](0x0,0x0,bufferCanvas[_0x2d995f(0x172)],bufferCanvas[_0x2d995f(0x176)]),ctx2d[_0x2d995f(0x175)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x36d0da));}export async function switchRenderMode(_0x364867){const _0x3b2b20=a0_0x5398;systemType=gameName[_0x3b2b20(0x19d)](-0x3);if(_0x364867==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x364867===_0x3b2b20(0x177))setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(_0x3b2b20(0x177)),renderPixel(_0x3b2b20(0x177));else _0x364867==='webgl_full'&&(setupStyle(_0x3b2b20(0x173)),setupWebGL_Shader(_0x3b2b20(0x173)),setupTexture_Buffer(_0x3b2b20(0x173)),renderPixel(_0x3b2b20(0x177)));}}