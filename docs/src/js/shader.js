const a0_0x35839b=a0_0x3077;(function(_0x3d7e55,_0x554861){const _0x6e0c81=a0_0x3077,_0x16f8a5=_0x3d7e55();while(!![]){try{const _0x2f306f=parseInt(_0x6e0c81(0x18c))/0x1+-parseInt(_0x6e0c81(0x17e))/0x2+parseInt(_0x6e0c81(0x1c0))/0x3*(-parseInt(_0x6e0c81(0x19c))/0x4)+parseInt(_0x6e0c81(0x18e))/0x5+parseInt(_0x6e0c81(0x1c6))/0x6+-parseInt(_0x6e0c81(0x17a))/0x7*(-parseInt(_0x6e0c81(0x1c2))/0x8)+parseInt(_0x6e0c81(0x1bb))/0x9;if(_0x2f306f===_0x554861)break;else _0x16f8a5['push'](_0x16f8a5['shift']());}catch(_0x157a5c){_0x16f8a5['push'](_0x16f8a5['shift']());}}}(a0_0x1f6e,0x8886f));import*as a0_0x5c2050 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x35839b(0x1a5)](a0_0x35839b(0x1c5)),bufferCanvas=document['getElementById'](a0_0x35839b(0x168)),canvasContainer=document[a0_0x35839b(0x1a5)](a0_0x35839b(0x1ca)),imgShader=document['getElementById'](a0_0x35839b(0x16d)),settingContainer=document[a0_0x35839b(0x184)](a0_0x35839b(0x1b7)),messageContainer=document[a0_0x35839b(0x184)](a0_0x35839b(0x18a)),stateTitle=document['querySelectorAll'](a0_0x35839b(0x1cc));let imageDataObj=null;async function loadLUT64(){const _0x8ddb4c=a0_0x35839b;systemType=gameName[_0x8ddb4c(0x192)](-0x3);const _0x1894db=localStorage['getItem'](gameName+_0x8ddb4c(0x165))||_0x8ddb4c(0x1cd),_0x23948c=(localStorage[_0x8ddb4c(0x1c4)](gameName+_0x8ddb4c(0x181))||_0x8ddb4c(0x1a3))['toLowerCase']();if(!lut64||lut64Streng!==_0x1894db||lut64Profile!==_0x23948c){const _0x11b541=_0x8ddb4c(0x1c3)+_0x23948c+'_'+_0x1894db+'.bin';console[_0x8ddb4c(0x186)](_0x11b541);const _0x292ffd=await fetch(_0x11b541),_0x5bebd4=await _0x292ffd['arrayBuffer']();lut64=new Uint8Array(_0x5bebd4),lut64Streng=_0x1894db,lut64Profile=_0x23948c;}}function setupStyle(_0x19665a){const _0x265399=a0_0x35839b;clientWidth=document[_0x265399(0x18f)][_0x265399(0x1be)];const _0x260384=window['devicePixelRatio'];systemType===_0x265399(0x171)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x265399(0x16f)](clientWidth*_0x260384/gameWidth),localStorage[_0x265399(0x199)](_0x265399(0x1b0),_0x265399(0x179)+gameWidth*(integerScaling/_0x260384)+','+gameHeight*(integerScaling/_0x260384))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x260384/gameWidth),localStorage[_0x265399(0x199)]('screenSize',_0x265399(0x179)+gameWidth*(integerScaling/_0x260384)+','+gameHeight*(integerScaling/_0x260384)));if(_0x19665a==='2d')bufferCanvas['width']=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x265399(0x1ce)][_0x265399(0x177)]=''+integerScaling/_0x260384,bufferCanvas[_0x265399(0x1ce)][_0x265399(0x17c)]=_0x265399(0x17f),canvasContainer['style'][_0x265399(0x173)]=gameWidth*(integerScaling/_0x260384)+'px',canvasContainer[_0x265399(0x1ce)]['height']=gameHeight*(integerScaling/_0x260384)+'px',textured['style'][_0x265399(0x173)]=gameWidth*(integerScaling/_0x260384)+'px',textured['style']['height']=gameHeight*(integerScaling/_0x260384)+'px',imgShader[_0x265399(0x1ce)][_0x265399(0x196)]=_0x265399(0x1cb)+integerScaling/_0x260384/upscaleShader+')',settingContainer['forEach'](function(_0xdffd4e){const _0x106193=_0x265399;_0xdffd4e[_0x106193(0x1ce)][_0x106193(0x173)]=gameWidth*(integerScaling/_0x260384)+'px',_0xdffd4e[_0x106193(0x1ce)][_0x106193(0x1a7)]=gameHeight*(integerScaling/_0x260384)+'px';}),messageContainer[_0x265399(0x169)](function(_0x151c05){const _0x1b152c=_0x265399;_0x151c05[_0x1b152c(0x1ce)][_0x1b152c(0x173)]=gameWidth+'px',_0x151c05[_0x1b152c(0x1ce)][_0x1b152c(0x1a7)]=gameHeight+'px',_0x151c05[_0x1b152c(0x1ce)][_0x1b152c(0x177)]=''+integerScaling/_0x260384;}),stateTitle['forEach'](function(_0x8d3135){const _0x79af1c=_0x265399;_0x8d3135[_0x79af1c(0x183)][_0x79af1c(0x1a4)]('fefs');});else _0x19665a===_0x265399(0x1af)&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas[_0x265399(0x1a7)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x265399(0x1ce)]['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x265399(0x1ce)][_0x265399(0x17c)]='',canvasContainer['style'][_0x265399(0x173)]=clientWidth+'px',canvasContainer[_0x265399(0x1ce)]['height']=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x265399(0x1ce)][_0x265399(0x173)]=clientWidth+'px',textured[_0x265399(0x1ce)]['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style'][_0x265399(0x196)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x5c9506){const _0x3f1deb=_0x265399;_0x5c9506['style'][_0x3f1deb(0x173)]=clientWidth+'px',_0x5c9506[_0x3f1deb(0x1ce)][_0x3f1deb(0x1a7)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x265399(0x169)](function(_0x4d36d0){const _0x217b05=_0x265399;_0x4d36d0[_0x217b05(0x1ce)]['width']=gameWidth+'px',_0x4d36d0['style'][_0x217b05(0x1a7)]=gameHeight+'px',_0x4d36d0[_0x217b05(0x1ce)][_0x217b05(0x177)]=''+clientWidth/gameWidth;}),stateTitle[_0x265399(0x169)](function(_0x4f2384){const _0x469aab=_0x265399;_0x4f2384['classList'][_0x469aab(0x1ab)](_0x469aab(0x188));}));imgShader[_0x265399(0x1ce)][_0x265399(0x173)]=gameWidth*upscaleShader+'px',imgShader['style'][_0x265399(0x1a7)]=gameHeight*upscaleShader+'px',imgShader[_0x265399(0x1ce)][_0x265399(0x1b4)]=_0x265399(0x176),imgShader[_0x265399(0x1ce)]['setProperty']('--bg-size',upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x3efff0=a0_0x35839b;gl=bufferCanvas[_0x3efff0(0x1b3)](_0x3efff0(0x1c7),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x3efff0(0x19b)});if(!gl)return console[_0x3efff0(0x195)]('WebGL\x20not\x20supported'),null;gl[_0x3efff0(0x189)](0x0,0x0,bufferCanvas[_0x3efff0(0x173)],bufferCanvas['height']);}function createShader(_0x147f91,_0x15043c){const _0x268bad=a0_0x35839b,_0x5539ae=gl[_0x268bad(0x185)](_0x147f91);gl['shaderSource'](_0x5539ae,_0x15043c),gl[_0x268bad(0x193)](_0x5539ae);if(!gl[_0x268bad(0x1bf)](_0x5539ae,gl[_0x268bad(0x1a8)]))return console[_0x268bad(0x195)](gl[_0x268bad(0x175)](_0x5539ae)),gl[_0x268bad(0x1bd)](_0x5539ae),null;return _0x5539ae;}const vertexShaderSource=a0_0x35839b(0x1a9),fragmentShaderSource='\x0a\x20\x20\x20\x20precision\x20mediump\x20float;\x0a\x20\x20\x20\x20varying\x20vec2\x20v_texcoord;\x0a\x20\x20\x20\x20uniform\x20sampler2D\x20texture;\x0a\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);\x0a\x20\x20\x20\x20}\x0a';function a0_0x3077(_0x51c278,_0x24703c){const _0x1f6e86=a0_0x1f6e();return a0_0x3077=function(_0x30770f,_0x227ddf){_0x30770f=_0x30770f-0x164;let _0x4fa0c2=_0x1f6e86[_0x30770f];return _0x4fa0c2;},a0_0x3077(_0x51c278,_0x24703c);}function setupShaders(){const _0x10971d=a0_0x35839b,_0x45dafa=createShader(gl[_0x10971d(0x1a6)],vertexShaderSource),_0x4a1a25=createShader(gl[_0x10971d(0x1b6)],fragmentShaderSource);return program=gl[_0x10971d(0x1b8)](),gl[_0x10971d(0x172)](program,_0x45dafa),gl[_0x10971d(0x172)](program,_0x4a1a25),gl[_0x10971d(0x18d)](program),gl[_0x10971d(0x1a0)](program),program;}function setupTexture(){const _0x3145d7=a0_0x35839b;texture=gl[_0x3145d7(0x1b5)](),gl[_0x3145d7(0x19f)](gl[_0x3145d7(0x19d)],texture),gl[_0x3145d7(0x1b2)](gl['TEXTURE_2D'],gl[_0x3145d7(0x194)],gl['NEAREST']),gl[_0x3145d7(0x1b2)](gl[_0x3145d7(0x19d)],gl[_0x3145d7(0x191)],gl[_0x3145d7(0x1ba)]),gl[_0x3145d7(0x1b2)](gl[_0x3145d7(0x19d)],gl['TEXTURE_WRAP_S'],gl[_0x3145d7(0x1b1)]),gl[_0x3145d7(0x1b2)](gl[_0x3145d7(0x19d)],gl[_0x3145d7(0x1c9)],gl['CLAMP_TO_EDGE']),gl[_0x3145d7(0x19e)](gl[_0x3145d7(0x16e)](program,_0x3145d7(0x1ad)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x3145d7(0x16e)](program,_0x3145d7(0x1a1)),gl['canvas'][_0x3145d7(0x173)],gl[_0x3145d7(0x168)][_0x3145d7(0x1a7)]),gl[_0x3145d7(0x167)](gl['getUniformLocation'](program,_0x3145d7(0x19a)),gameWidth/gl[_0x3145d7(0x168)][_0x3145d7(0x173)]),gl[_0x3145d7(0x167)](gl[_0x3145d7(0x16e)](program,'smooth_height'),gameHeight/gl[_0x3145d7(0x168)][_0x3145d7(0x1a7)]);}function a0_0x1f6e(){const _0x409070=['1733432gVDbXe','./src/lut/lut64_','getItem','textured','3668574xSEOGt','webgl','RGBA','TEXTURE_WRAP_T','canvas-container','scale(','.stateTitle,\x20.stateDate','4.0','style','FLOAT','_streng','enableVertexAttribArray','uniform1f','canvas','forEach','set','TRIANGLE_STRIP','imageSmoothingEnabled','img-shader','getUniformLocation','floor','getPixelData','gbc','attachShader','width','drawImage','getShaderInfoLog','top\x20center','zoom','then','0,0,','7lRaXCm','STATIC_DRAW','imageRendering','vertexAttribPointer','1979144XwBwzu','crisp-edges','texImage2D','_temperature','position','classList','querySelectorAll','createShader','log','DOMContentLoaded','fefs','viewport','.message-container','clear','204503hdamdH','linkProgram','1108155VZuzbh','documentElement','bindBuffer','TEXTURE_MAG_FILTER','slice','compileShader','TEXTURE_MIN_FILTER','error','transform','clearRect','getAttribLocation','setItem','smooth_width','low-power','71920DSSZAH','TEXTURE_2D','uniform2f','bindTexture','useProgram','render_size','createBuffer','warm','remove','getElementById','VERTEX_SHADER','height','COMPILE_STATUS','\x0a\x20\x20\x20\x20attribute\x20vec2\x20position;\x0a\x20\x20\x20\x20attribute\x20vec2\x20texcoord;\x0a\x20\x20\x20\x20varying\x20vec2\x20v_texcoord;\x0a\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20v_texcoord\x20=\x20texcoord;\x0a\x20\x20\x20\x20}\x0a','texcoord','add','data','game_size','UNSIGNED_BYTE','webgl2','screenSize','CLAMP_TO_EDGE','texParameteri','getContext','transformOrigin','createTexture','FRAGMENT_SHADER','.setting-container','createProgram','ARRAY_BUFFER','NEAREST','10580085YHdBLW','bufferData','deleteShader','clientWidth','getShaderParameter','147rXNeSR','addEventListener'];a0_0x1f6e=function(){return _0x409070;};return a0_0x1f6e();}function setupBuffers(){const _0x570d2a=a0_0x35839b,_0x51886a=gl[_0x570d2a(0x1a2)]();gl[_0x570d2a(0x190)](gl[_0x570d2a(0x1b9)],_0x51886a),gl[_0x570d2a(0x1bc)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x570d2a(0x17b)]);const _0x147885=gl[_0x570d2a(0x198)](program,_0x570d2a(0x182));gl['enableVertexAttribArray'](_0x147885),gl[_0x570d2a(0x17d)](_0x147885,0x2,gl[_0x570d2a(0x164)],![],0x0,0x0);const _0x44b96c=gl[_0x570d2a(0x1a2)]();gl[_0x570d2a(0x190)](gl[_0x570d2a(0x1b9)],_0x44b96c),gl[_0x570d2a(0x1bc)](gl[_0x570d2a(0x1b9)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']);const _0xd8cd93=gl[_0x570d2a(0x198)](program,_0x570d2a(0x1aa));gl[_0x570d2a(0x166)](_0xd8cd93),gl[_0x570d2a(0x17d)](_0xd8cd93,0x2,gl[_0x570d2a(0x164)],![],0x0,0x0);}async function renderPixel(_0x3c2b05){const _0x292a0d=a0_0x35839b,_0x371352=a0_0x5c2050[_0x292a0d(0x170)]();if(!_0x371352)return;await loadLUT64();const _0x3fda46=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x39e823=0x0;_0x39e823<gameHeight;_0x39e823++){for(let _0x26088d=0x0;_0x26088d<gameWidth;_0x26088d++){const _0x526999=_0x39e823*gameStride+_0x26088d,_0x5b206d=(_0x39e823*gameWidth+_0x26088d)*0x4,_0x3486ec=_0x371352[_0x526999],_0x2070d2=(_0x3486ec&0xff)>>0x2,_0x5646b1=(_0x3486ec>>0x8&0xff)>>0x2,_0x1fd5b4=(_0x3486ec>>0x10&0xff)>>0x2,_0x4af80c=(_0x2070d2*0x40*0x40+_0x5646b1*0x40+_0x1fd5b4)*0x3;_0x3fda46[_0x5b206d]=lut64[_0x4af80c],_0x3fda46[_0x5b206d+0x1]=lut64[_0x4af80c+0x1],_0x3fda46[_0x5b206d+0x2]=lut64[_0x4af80c+0x2],_0x3fda46[_0x5b206d+0x3]=0xff;}}if(_0x3c2b05===_0x292a0d(0x1af))gl[_0x292a0d(0x19f)](gl[_0x292a0d(0x19d)],texture),gl[_0x292a0d(0x180)](gl[_0x292a0d(0x19d)],0x0,gl[_0x292a0d(0x1c8)],gameWidth,gameHeight,0x0,gl[_0x292a0d(0x1c8)],gl[_0x292a0d(0x1ae)],_0x3fda46),gl[_0x292a0d(0x18b)](gl['COLOR_BUFFER_BIT']),gl['drawArrays'](gl[_0x292a0d(0x16b)],0x0,0x4);else _0x3c2b05==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d',{'alpha':![]}),ctx2d[_0x292a0d(0x16c)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj[_0x292a0d(0x1ac)][_0x292a0d(0x16a)](_0x3fda46),createImageBitmap(imageDataObj)[_0x292a0d(0x178)](_0x1f6f84=>{const _0x8867c3=_0x292a0d;ctx2d[_0x8867c3(0x197)](0x0,0x0,bufferCanvas[_0x8867c3(0x173)],bufferCanvas[_0x8867c3(0x1a7)]),ctx2d[_0x8867c3(0x174)](_0x1f6f84,0x0,0x0),_0x1f6f84['close']();}));requestAnimationFrame(()=>renderPixel(_0x3c2b05));}export async function switchRenderMode(_0x3be1c1){const _0xb74674=a0_0x35839b;systemType=gameName[_0xb74674(0x192)](-0x3);if(_0x3be1c1==='2d')setupStyle('2d'),renderPixel('2d');else _0x3be1c1==='webgl2'&&(setupStyle('2d'),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x35839b(0x1c1)](a0_0x35839b(0x187),function(){});