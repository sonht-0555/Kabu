const a0_0x4e6abd=a0_0x26c4;(function(_0x1216f7,_0x40c4cb){const _0x4a00c5=a0_0x26c4,_0x559191=_0x1216f7();while(!![]){try{const _0x28a728=-parseInt(_0x4a00c5(0xcb))/0x1*(-parseInt(_0x4a00c5(0xcf))/0x2)+parseInt(_0x4a00c5(0xfd))/0x3*(parseInt(_0x4a00c5(0xca))/0x4)+parseInt(_0x4a00c5(0x114))/0x5+-parseInt(_0x4a00c5(0x10d))/0x6*(-parseInt(_0x4a00c5(0x11d))/0x7)+-parseInt(_0x4a00c5(0xe0))/0x8+parseInt(_0x4a00c5(0xfb))/0x9*(-parseInt(_0x4a00c5(0xec))/0xa)+-parseInt(_0x4a00c5(0xff))/0xb;if(_0x28a728===_0x40c4cb)break;else _0x559191['push'](_0x559191['shift']());}catch(_0x4fcdab){_0x559191['push'](_0x559191['shift']());}}}(a0_0x4d9d,0x6dc6f));import*as a0_0x1ab178 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0x4e6abd(0xe4)),bufferCanvas=document[a0_0x4e6abd(0xe3)](a0_0x4e6abd(0x120)),canvasContainer=document[a0_0x4e6abd(0xe3)](a0_0x4e6abd(0xc7)),imgShader=document[a0_0x4e6abd(0xe3)](a0_0x4e6abd(0xeb)),settingContainer=document[a0_0x4e6abd(0x113)](a0_0x4e6abd(0xe7)),messageContainer=document[a0_0x4e6abd(0x113)](a0_0x4e6abd(0x11a)),stateTitle=document['querySelectorAll'](a0_0x4e6abd(0x10c));async function loadLUT64(){const _0x4030bf=a0_0x4e6abd;systemType=gameName[_0x4030bf(0xea)](-0x3);const _0x33ebb7=localStorage[_0x4030bf(0x110)](gameName+_0x4030bf(0x118))||_0x4030bf(0xe6),_0x3d907f=(localStorage[_0x4030bf(0x110)](gameName+_0x4030bf(0xd1))||_0x4030bf(0xfc))[_0x4030bf(0xe9)]();if(!lut64||lut64Streng!==_0x33ebb7||lut64Profile!==_0x3d907f){const _0x36f9a9=_0x4030bf(0xe1)+_0x3d907f+'_'+_0x33ebb7+'.bin';console['log'](_0x36f9a9);const _0x1b18f0=await fetch(_0x36f9a9),_0x2efdb6=await _0x1b18f0[_0x4030bf(0xd7)]();lut64=new Uint8Array(_0x2efdb6),lut64Streng=_0x33ebb7,lut64Profile=_0x3d907f;}}async function loadShaderSource(_0x4c2b7e){const _0x3e0ee3=a0_0x4e6abd,_0x52540a=await fetch(_0x4c2b7e);return await _0x52540a[_0x3e0ee3(0x11b)]();}function a0_0x4d9d(){const _0xee6447=['useProgram','addEventListener','getPixelData','attachShader','width','2204888apmvHr','./src/lut/lut64_','documentElement','getElementById','textured','createProgram','4.0','.setting-container','TEXTURE_MAG_FILTER','toLowerCase','slice','img-shader','30fuzwjF','height','error','texParameteri','linkProgram','TEXTURE_MIN_FILTER','WebGL2\x20not\x20supported','bindTexture','DOMContentLoaded','position','webgl2','deleteShader','ARRAY_BUFFER','game_size','fefs','898731xasfur','warm','3xdIROP','createBuffer','1347401SrVLGU','RGBA','compileShader','px\x20','COLOR_BUFFER_BIT','crisp-edges','smooth_width','uniform2f','TEXTURE_WRAP_S','createShader','clientWidth','TEXTURE_2D','then','.stateTitle,\x20.stateDate','12Fbdgru','imageRendering','uniform1f','getItem','NEAREST','classList','querySelectorAll','1450520OdpMff','getUniformLocation','getAttribLocation','add','_streng','scale(','.message-container','text','transformOrigin','229789HgBSLS','zoom','drawImage','canvas','./src/shaders/vertexShader.glsl','devicePixelRatio','setItem','CLAMP_TO_EDGE','top\x20center','VERTEX_SHADER','FLOAT','./src/shaders/fragmentShader.glsl','bufferData','FRAGMENT_SHADER','getContext','canvas-container','COMPILE_STATUS','forEach','2701764HVhlyw','2277FgMyJZ','TEXTURE_WRAP_T','texImage2D','clearRect','102kJmejB','floor','_temperature','0,0,','vertexAttribPointer','texcoord','remove','STATIC_DRAW','arrayBuffer','style','shaderSource','screenSize'];a0_0x4d9d=function(){return _0xee6447;};return a0_0x4d9d();}function setupStyle(_0xd6994f){const _0x3b81fe=a0_0x4e6abd;clientWidth=document[_0x3b81fe(0xe2)][_0x3b81fe(0x109)];const _0x266dc4=window[_0x3b81fe(0x122)];systemType==='gbc'?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x3b81fe(0xd0)](clientWidth*_0x266dc4/gameWidth),localStorage[_0x3b81fe(0x123)](_0x3b81fe(0xda),_0x3b81fe(0xd2)+gameWidth*(integerScaling/_0x266dc4)+','+gameHeight*(integerScaling/_0x266dc4))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x3b81fe(0xd0)](clientWidth*_0x266dc4/gameWidth),localStorage[_0x3b81fe(0x123)](_0x3b81fe(0xda),_0x3b81fe(0xd2)+gameWidth*(integerScaling/_0x266dc4)+','+gameHeight*(integerScaling/_0x266dc4)));if(_0xd6994f==='2d')bufferCanvas[_0x3b81fe(0xdf)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas['style'][_0x3b81fe(0x11e)]=''+integerScaling/_0x266dc4,bufferCanvas[_0x3b81fe(0xd8)][_0x3b81fe(0x10e)]=_0x3b81fe(0x104),canvasContainer[_0x3b81fe(0xd8)][_0x3b81fe(0xdf)]=gameWidth*(integerScaling/_0x266dc4)+'px',canvasContainer[_0x3b81fe(0xd8)][_0x3b81fe(0xed)]=gameHeight*(integerScaling/_0x266dc4)+'px',textured[_0x3b81fe(0xd8)][_0x3b81fe(0xdf)]=gameWidth*(integerScaling/_0x266dc4)+'px',textured[_0x3b81fe(0xd8)][_0x3b81fe(0xed)]=gameHeight*(integerScaling/_0x266dc4)+'px',imgShader['style']['transform']='scale('+integerScaling/_0x266dc4/upscaleShader+')',settingContainer[_0x3b81fe(0xc9)](function(_0xfaed5c){const _0x35d697=_0x3b81fe;_0xfaed5c[_0x35d697(0xd8)][_0x35d697(0xdf)]=gameWidth*(integerScaling/_0x266dc4)+'px',_0xfaed5c[_0x35d697(0xd8)]['height']=gameHeight*(integerScaling/_0x266dc4)+'px';}),messageContainer['forEach'](function(_0x156d9e){const _0x222097=_0x3b81fe;_0x156d9e[_0x222097(0xd8)][_0x222097(0xdf)]=gameWidth+'px',_0x156d9e['style'][_0x222097(0xed)]=gameHeight+'px',_0x156d9e[_0x222097(0xd8)][_0x222097(0x11e)]=''+integerScaling/_0x266dc4;}),stateTitle['forEach'](function(_0x26bf65){const _0x4a0dde=_0x3b81fe;_0x26bf65[_0x4a0dde(0x112)][_0x4a0dde(0xd5)](_0x4a0dde(0xfa));});else _0xd6994f===_0x3b81fe(0xf6)&&(bufferCanvas[_0x3b81fe(0xdf)]=clientWidth*upscaleFactor,bufferCanvas[_0x3b81fe(0xed)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x3b81fe(0xd8)][_0x3b81fe(0x11e)]=''+0x1/upscaleFactor,bufferCanvas[_0x3b81fe(0xd8)][_0x3b81fe(0x10e)]='',canvasContainer['style'][_0x3b81fe(0xdf)]=clientWidth+'px',canvasContainer[_0x3b81fe(0xd8)]['height']=clientWidth*(gameHeight/gameWidth)+'px',textured['style'][_0x3b81fe(0xdf)]=clientWidth+'px',textured[_0x3b81fe(0xd8)][_0x3b81fe(0xed)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x3b81fe(0xd8)]['transform']=_0x3b81fe(0x119)+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x304995){const _0xd85160=_0x3b81fe;_0x304995[_0xd85160(0xd8)][_0xd85160(0xdf)]=clientWidth+'px',_0x304995[_0xd85160(0xd8)]['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x3b81fe(0xc9)](function(_0x494fdc){const _0x4af214=_0x3b81fe;_0x494fdc[_0x4af214(0xd8)][_0x4af214(0xdf)]=gameWidth+'px',_0x494fdc['style'][_0x4af214(0xed)]=gameHeight+'px',_0x494fdc[_0x4af214(0xd8)]['zoom']=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x506f2b){const _0x6e4872=_0x3b81fe;_0x506f2b[_0x6e4872(0x112)][_0x6e4872(0x117)](_0x6e4872(0xfa));}));imgShader[_0x3b81fe(0xd8)][_0x3b81fe(0xdf)]=gameWidth*upscaleShader+'px',imgShader[_0x3b81fe(0xd8)][_0x3b81fe(0xed)]=gameHeight*upscaleShader+'px',imgShader['style'][_0x3b81fe(0x11c)]=_0x3b81fe(0x125),imgShader['style']['setProperty']('--bg-size',upscaleShader+_0x3b81fe(0x102)+upscaleShader+'px');}function setupWebGL(){const _0x2226aa=a0_0x4e6abd;gl=bufferCanvas[_0x2226aa(0xc6)]('webgl2');if(!gl)return console['error'](_0x2226aa(0xf2)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x2226aa(0xdf)],bufferCanvas[_0x2226aa(0xed)]);}function createShader(_0x41335e,_0x4cff70){const _0x1d9ea6=a0_0x4e6abd,_0x4df95a=gl[_0x1d9ea6(0x108)](_0x41335e);gl[_0x1d9ea6(0xd9)](_0x4df95a,_0x4cff70),gl[_0x1d9ea6(0x101)](_0x4df95a);if(!gl['getShaderParameter'](_0x4df95a,gl[_0x1d9ea6(0xc8)]))return console[_0x1d9ea6(0xee)](gl['getShaderInfoLog'](_0x4df95a)),gl[_0x1d9ea6(0xf7)](_0x4df95a),null;return _0x4df95a;}async function setupShaders(){const _0x5e2b46=a0_0x4e6abd,_0x4e94b9=await loadShaderSource(_0x5e2b46(0x121)),_0x39e460=await loadShaderSource(_0x5e2b46(0xc3)),_0x5c5eb8=createShader(gl[_0x5e2b46(0xc1)],_0x4e94b9),_0x48ecc0=createShader(gl[_0x5e2b46(0xc5)],_0x39e460);return program=gl[_0x5e2b46(0xe5)](),gl[_0x5e2b46(0xde)](program,_0x5c5eb8),gl[_0x5e2b46(0xde)](program,_0x48ecc0),gl[_0x5e2b46(0xf0)](program),gl[_0x5e2b46(0xdb)](program),program;}function setupTexture(){const _0x354af7=a0_0x4e6abd;texture=gl['createTexture'](),gl['bindTexture'](gl[_0x354af7(0x10a)],texture),gl[_0x354af7(0xef)](gl[_0x354af7(0x10a)],gl[_0x354af7(0xf1)],gl[_0x354af7(0x111)]),gl[_0x354af7(0xef)](gl[_0x354af7(0x10a)],gl[_0x354af7(0xe8)],gl[_0x354af7(0x111)]),gl['texParameteri'](gl[_0x354af7(0x10a)],gl[_0x354af7(0x107)],gl[_0x354af7(0x124)]),gl[_0x354af7(0xef)](gl[_0x354af7(0x10a)],gl[_0x354af7(0xcc)],gl['CLAMP_TO_EDGE']),gl[_0x354af7(0x106)](gl['getUniformLocation'](program,_0x354af7(0xf9)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x354af7(0x115)](program,'render_size'),gl[_0x354af7(0x120)][_0x354af7(0xdf)],gl['canvas']['height']),gl[_0x354af7(0x10f)](gl['getUniformLocation'](program,_0x354af7(0x105)),gameWidth/gl[_0x354af7(0x120)][_0x354af7(0xdf)]),gl[_0x354af7(0x10f)](gl[_0x354af7(0x115)](program,'smooth_height'),gameHeight/gl['canvas']['height']);}function setupBuffers(){const _0x2eb95d=a0_0x4e6abd,_0x4f1e9d=gl[_0x2eb95d(0xfe)]();gl['bindBuffer'](gl[_0x2eb95d(0xf8)],_0x4f1e9d),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2eb95d(0xd6)]);const _0x1e7051=gl[_0x2eb95d(0x116)](program,_0x2eb95d(0xf5));gl['enableVertexAttribArray'](_0x1e7051),gl[_0x2eb95d(0xd3)](_0x1e7051,0x2,gl[_0x2eb95d(0xc2)],![],0x0,0x0);const _0x36b433=gl[_0x2eb95d(0xfe)]();gl['bindBuffer'](gl[_0x2eb95d(0xf8)],_0x36b433),gl[_0x2eb95d(0xc4)](gl[_0x2eb95d(0xf8)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']);const _0x3f3079=gl['getAttribLocation'](program,_0x2eb95d(0xd4));gl['enableVertexAttribArray'](_0x3f3079),gl['vertexAttribPointer'](_0x3f3079,0x2,gl[_0x2eb95d(0xc2)],![],0x0,0x0);}function a0_0x26c4(_0x162033,_0x27eb4d){const _0x4d9d5e=a0_0x4d9d();return a0_0x26c4=function(_0x26c4e4,_0x9b20a){_0x26c4e4=_0x26c4e4-0xc1;let _0x825a2c=_0x4d9d5e[_0x26c4e4];return _0x825a2c;},a0_0x26c4(_0x162033,_0x27eb4d);}async function renderPixel(_0x4b0ca6){const _0x448679=a0_0x4e6abd,_0x33024c=a0_0x1ab178[_0x448679(0xdd)]();if(!_0x33024c)return;await loadLUT64();const _0x58749c=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0xdd5f66=0x0;_0xdd5f66<gameHeight;_0xdd5f66++){for(let _0x572bea=0x0;_0x572bea<gameWidth;_0x572bea++){const _0x1cd346=_0xdd5f66*gameStride+_0x572bea,_0x3719e1=(_0xdd5f66*gameWidth+_0x572bea)*0x4,_0x5e84fd=_0x33024c[_0x1cd346],_0x188891=(_0x5e84fd&0xff)>>0x2,_0x1fea7a=(_0x5e84fd>>0x8&0xff)>>0x2,_0x1964d8=(_0x5e84fd>>0x10&0xff)>>0x2,_0x4f6b74=(_0x188891*0x40*0x40+_0x1fea7a*0x40+_0x1964d8)*0x3;_0x58749c[_0x3719e1]=lut64[_0x4f6b74],_0x58749c[_0x3719e1+0x1]=lut64[_0x4f6b74+0x1],_0x58749c[_0x3719e1+0x2]=lut64[_0x4f6b74+0x2],_0x58749c[_0x3719e1+0x3]=0xff;}}if(_0x4b0ca6===_0x448679(0xf6))gl[_0x448679(0xf3)](gl[_0x448679(0x10a)],texture),gl[_0x448679(0xcd)](gl[_0x448679(0x10a)],0x0,gl[_0x448679(0x100)],gameWidth,gameHeight,0x0,gl['RGBA'],gl['UNSIGNED_BYTE'],_0x58749c),gl['clear'](gl[_0x448679(0x103)]),gl['drawArrays'](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x4b0ca6==='2d'){ctx2d=bufferCanvas[_0x448679(0xc6)]('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x468de3=new ImageData(_0x58749c,gameWidth,gameHeight);createImageBitmap(_0x468de3)[_0x448679(0x10b)](_0x437e7c=>{const _0x538998=_0x448679;ctx2d[_0x538998(0xce)](0x0,0x0,bufferCanvas[_0x538998(0xdf)],bufferCanvas[_0x538998(0xed)]),ctx2d[_0x538998(0x11f)](_0x437e7c,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x4b0ca6));}export async function switchRenderMode(_0x1e1483){const _0x445642=a0_0x4e6abd;systemType=gameName['slice'](-0x3);if(_0x1e1483==='2d')setupStyle('2d'),renderPixel('2d');else _0x1e1483===_0x445642(0xf6)&&(setupStyle('webgl2'),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x445642(0xf6)));}document[a0_0x4e6abd(0xdc)](a0_0x4e6abd(0xf4),function(){});