(function(_0x4ceac0,_0x6061dc){const _0x27e9e1=a0_0x541f,_0x178ab7=_0x4ceac0();while(!![]){try{const _0x10970a=parseInt(_0x27e9e1(0x73))/0x1+-parseInt(_0x27e9e1(0xa0))/0x2+parseInt(_0x27e9e1(0x6b))/0x3*(parseInt(_0x27e9e1(0x81))/0x4)+parseInt(_0x27e9e1(0xa3))/0x5*(-parseInt(_0x27e9e1(0x7b))/0x6)+-parseInt(_0x27e9e1(0x78))/0x7*(parseInt(_0x27e9e1(0x93))/0x8)+-parseInt(_0x27e9e1(0x7f))/0x9*(-parseInt(_0x27e9e1(0x9e))/0xa)+parseInt(_0x27e9e1(0x6c))/0xb;if(_0x10970a===_0x6061dc)break;else _0x178ab7['push'](_0x178ab7['shift']());}catch(_0x5a0737){_0x178ab7['push'](_0x178ab7['shift']());}}}(a0_0x2212,0xd5b88));function a0_0x2212(){const _0x5a8f22=['bufferData','bindTexture','4.0','clear','texcoord','createBuffer','VERTEX_SHADER','TEXTURE_WRAP_T','NEAREST','createShader','./src/lut/lut64_','139050Ykudiz','9987340feuGNR','createProgram','drawImage','uniform1f','low-power','texImage2D','FLOAT','797599sXQRAe','TEXTURE_WRAP_S','STATIC_DRAW','.bin','game_size','7CUujTn','TRIANGLE_STRIP','getItem','1088028uEgwpI','webgl_full','vertexAttribPointer','TEXTURE_MAG_FILTER','1758213WIvADT','RGBA','52odQthM','webgl','FRAGMENT_SHADER','bindBuffer','imageSmoothingEnabled','useProgram','smooth_height','clearRect','then','drawArrays','texParameteri','attachShader','getContext','height','getUniformLocation','TEXTURE_2D','compileShader','position','4592248ruLCcv','CLAMP_TO_EDGE','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','width','COLOR_BUFFER_BIT','getAttribLocation','warm','enableVertexAttribArray','_streng','ARRAY_BUFFER','canvas','80JwDGdH','TEXTURE_MIN_FILTER','3029648SMiYDD','smooth_width','slice','25Vejvdv'];a0_0x2212=function(){return _0x5a8f22;};return a0_0x2212();}import*as a0_0x3f2010 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x4e90e9=a0_0x541f;systemType=gameName['slice'](-0x3);const _0x1e05d8=localStorage[_0x4e90e9(0x7a)](gameName+_0x4e90e9(0x9b))||_0x4e90e9(0xa6),_0x7c8aac=(localStorage[_0x4e90e9(0x7a)](gameName+'_temperature')||_0x4e90e9(0x99))['toLowerCase']();if(!lut64||lut64Streng!==_0x1e05d8||lut64Profile!==_0x7c8aac){const _0x5f5665=_0x4e90e9(0x6a)+_0x7c8aac+'_'+_0x1e05d8+_0x4e90e9(0x76);console['log'](_0x5f5665);const _0x4ac60c=await fetch(_0x5f5665),_0x1bee31=await _0x4ac60c['arrayBuffer']();lut64=new Uint8Array(_0x1bee31),lut64Streng=_0x1e05d8,lut64Profile=_0x7c8aac;}}function setupWebGL_Shader(_0x932245){const _0x23b1da=a0_0x541f;gl=bufferCanvas[_0x23b1da(0x8d)](_0x23b1da(0x82),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x23b1da(0x70)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x23b1da(0x96)],bufferCanvas[_0x23b1da(0x8e)]);function _0x18ad37(_0x520c0f,_0x52d77d){const _0x955d50=_0x23b1da,_0x264434=gl[_0x955d50(0x69)](_0x520c0f);return gl['shaderSource'](_0x264434,_0x52d77d),gl[_0x955d50(0x91)](_0x264434),_0x264434;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x932245===_0x23b1da(0x82))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x932245===_0x23b1da(0x7c)&&(fs=_0x23b1da(0x95));const _0x299328=_0x18ad37(gl[_0x23b1da(0xaa)],vs),_0x13aa41=_0x18ad37(gl[_0x23b1da(0x83)],fs);return program=gl[_0x23b1da(0x6d)](),gl[_0x23b1da(0x8c)](program,_0x299328),gl[_0x23b1da(0x8c)](program,_0x13aa41),gl['linkProgram'](program),gl[_0x23b1da(0x86)](program),program;}function setupTexture_Buffer(_0x10a240){const _0x578778=a0_0x541f;texture=gl['createTexture'](),gl[_0x578778(0xa5)](gl['TEXTURE_2D'],texture),gl[_0x578778(0x8b)](gl[_0x578778(0x90)],gl[_0x578778(0x9f)],gl[_0x578778(0xac)]),gl[_0x578778(0x8b)](gl[_0x578778(0x90)],gl[_0x578778(0x7e)],gl[_0x578778(0xac)]),gl[_0x578778(0x8b)](gl[_0x578778(0x90)],gl[_0x578778(0x74)],gl[_0x578778(0x94)]),gl[_0x578778(0x8b)](gl[_0x578778(0x90)],gl[_0x578778(0xab)],gl[_0x578778(0x94)]);_0x10a240===_0x578778(0x7c)&&(gl['uniform2f'](gl[_0x578778(0x8f)](program,_0x578778(0x77)),gameWidth,gameHeight),gl['uniform2f'](gl['getUniformLocation'](program,'render_size'),gl[_0x578778(0x9d)][_0x578778(0x96)],gl[_0x578778(0x9d)][_0x578778(0x8e)]),gl[_0x578778(0x6f)](gl['getUniformLocation'](program,_0x578778(0xa1)),gameWidth/gl[_0x578778(0x9d)][_0x578778(0x96)]),gl['uniform1f'](gl['getUniformLocation'](program,_0x578778(0x87)),gameHeight/gl[_0x578778(0x9d)][_0x578778(0x8e)]));const _0x2162b9=gl[_0x578778(0xa9)]();gl[_0x578778(0x84)](gl['ARRAY_BUFFER'],_0x2162b9),gl[_0x578778(0xa4)](gl[_0x578778(0x9c)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x578778(0x7d)](gl['getAttribLocation'](program,_0x578778(0x92)),0x2,gl[_0x578778(0x72)],![],0x0,0x0),gl[_0x578778(0x9a)](gl['getAttribLocation'](program,_0x578778(0x92)));const _0x59564f=gl['createBuffer']();gl[_0x578778(0x84)](gl[_0x578778(0x9c)],_0x59564f),gl[_0x578778(0xa4)](gl[_0x578778(0x9c)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x578778(0x75)]),gl[_0x578778(0x7d)](gl[_0x578778(0x98)](program,_0x578778(0xa8)),0x2,gl[_0x578778(0x72)],![],0x0,0x0),gl[_0x578778(0x9a)](gl[_0x578778(0x98)](program,'texcoord'));}function a0_0x541f(_0x25df0d,_0x142cd3){const _0x2212b3=a0_0x2212();return a0_0x541f=function(_0x541f7f,_0x583d72){_0x541f7f=_0x541f7f-0x69;let _0x2b8879=_0x2212b3[_0x541f7f];return _0x2b8879;},a0_0x541f(_0x25df0d,_0x142cd3);}function setup2DContext(){const _0x150215=a0_0x541f;ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x150215(0x85)]=![];}async function renderPixel(_0x14c9a0){const _0x2ef9be=a0_0x541f,_0x57369e=a0_0x3f2010['getPixelData']();if(!_0x57369e)return;await loadLUT64();const _0x49651b=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0xb7be20=0x0;_0xb7be20<gameHeight;_0xb7be20++){for(let _0x45833b=0x0;_0x45833b<gameWidth;_0x45833b++){const _0x30b811=_0xb7be20*gameStride+_0x45833b,_0x519683=(_0xb7be20*gameWidth+_0x45833b)*0x4,_0x8787f8=_0x57369e[_0x30b811],_0x2818db=(_0x8787f8&0xff)>>0x2,_0x31f5c4=(_0x8787f8>>0x8&0xff)>>0x2,_0x50df12=(_0x8787f8>>0x10&0xff)>>0x2,_0x226a8c=(_0x2818db*0x40*0x40+_0x31f5c4*0x40+_0x50df12)*0x3;_0x49651b[_0x519683]=lut64[_0x226a8c],_0x49651b[_0x519683+0x1]=lut64[_0x226a8c+0x1],_0x49651b[_0x519683+0x2]=lut64[_0x226a8c+0x2],_0x49651b[_0x519683+0x3]=0xff;}}if(_0x14c9a0===_0x2ef9be(0x82))gl[_0x2ef9be(0x71)](gl['TEXTURE_2D'],0x0,gl[_0x2ef9be(0x80)],gameWidth,gameHeight,0x0,gl['RGBA'],gl['UNSIGNED_BYTE'],_0x49651b),gl[_0x2ef9be(0xa7)](gl[_0x2ef9be(0x97)]),gl[_0x2ef9be(0x8a)](gl[_0x2ef9be(0x79)],0x0,0x4);else _0x14c9a0==='2d'&&(imageDataObj=new ImageData(_0x49651b,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x2ef9be(0x89)](_0x1f887e=>{const _0x160824=_0x2ef9be;ctx2d[_0x160824(0x88)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x160824(0x8e)]),ctx2d[_0x160824(0x6e)](_0x1f887e,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x14c9a0));}export async function switchRenderMode(_0x1783a6){const _0x2e6724=a0_0x541f;systemType=gameName[_0x2e6724(0xa2)](-0x3);if(_0x1783a6==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x1783a6===_0x2e6724(0x82))setupStyle('2d'),setupWebGL_Shader(_0x2e6724(0x82)),setupTexture_Buffer(_0x2e6724(0x82)),renderPixel(_0x2e6724(0x82));else _0x1783a6==='webgl_full'&&(setupStyle('webgl_full'),setupWebGL_Shader(_0x2e6724(0x7c)),setupTexture_Buffer(_0x2e6724(0x7c)),renderPixel(_0x2e6724(0x82)));}}