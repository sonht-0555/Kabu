function a0_0x1071(){const _0x3b4435=['RGBA','bindBuffer','attachShader','vertexAttribPointer','221048wwrpCD','log','uniform1f','getContext','imageSmoothingEnabled','36065jeeCFL','1168STnkEd','getUniformLocation','height','width','enableVertexAttribArray','texParameteri','./src/lut/lut64_','position','UNSIGNED_BYTE','getPixelData','TEXTURE_MIN_FILTER','uniform2f','low-power','none','viewport','putImageData','bindTexture','game_size','CLAMP_TO_EDGE','24FrXACk','webgl_full','set','slice','createShader','11tChsxl','createProgram','_temperature','texcoord','texImage2D','366baZIgC','smooth_width','createBuffer','webgl','getAttribLocation','ARRAY_BUFFER','TEXTURE_WRAP_S','NEAREST','drawArrays','getItem','357133CXVlDa','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','2FTOqHA','37062sxQIzv','19895088hdmUxH','canvas','898698vEHUZY','STATIC_DRAW','clearRect','TEXTURE_WRAP_T','shaderSource','arrayBuffer','FLOAT','compileShader','VERTEX_SHADER','linkProgram','1405870fDtlWK','TEXTURE_2D','FRAGMENT_SHADER','bufferData','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','TRIANGLE_STRIP'];a0_0x1071=function(){return _0x3b4435;};return a0_0x1071();}(function(_0x297886,_0x57efc3){const _0x1b4a58=a0_0x115d,_0x1c4dd2=_0x297886();while(!![]){try{const _0x44301e=parseInt(_0x1b4a58(0xa2))/0x1*(parseInt(_0x1b4a58(0x9e))/0x2)+parseInt(_0x1b4a58(0x88))/0x3*(parseInt(_0x1b4a58(0xb6))/0x4)+parseInt(_0x1b4a58(0xbb))/0x5*(parseInt(_0x1b4a58(0x92))/0x6)+-parseInt(_0x1b4a58(0x9c))/0x7+parseInt(_0x1b4a58(0xbc))/0x8*(parseInt(_0x1b4a58(0x9f))/0x9)+parseInt(_0x1b4a58(0xac))/0xa*(-parseInt(_0x1b4a58(0x8d))/0xb)+-parseInt(_0x1b4a58(0xa0))/0xc;if(_0x44301e===_0x57efc3)break;else _0x1c4dd2['push'](_0x1c4dd2['shift']());}catch(_0x5e74ca){_0x1c4dd2['push'](_0x1c4dd2['shift']());}}}(a0_0x1071,0x82005));function a0_0x115d(_0x36d4c5,_0x1a501e){const _0x1071e2=a0_0x1071();return a0_0x115d=function(_0x115d9d,_0x289c7e){_0x115d9d=_0x115d9d-0x7a;let _0x388ef3=_0x1071e2[_0x115d9d];return _0x388ef3;},a0_0x115d(_0x36d4c5,_0x1a501e);}import*as a0_0x5e70a4 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x5be998=a0_0x115d;systemType=gameName['slice'](-0x3);const _0xa3aeed=(localStorage[_0x5be998(0x9b)](gameName+_0x5be998(0x8f))||_0x5be998(0x82))['toLowerCase']();if(!lut64||lut64Profile!==_0xa3aeed){const _0x48a2e6=_0x5be998(0x7b)+_0xa3aeed+'_4.0.bin';console[_0x5be998(0xb7)](_0x48a2e6);const _0x36c4aa=await fetch(_0x48a2e6),_0x347c4d=await _0x36c4aa[_0x5be998(0xa7)]();lut64=new Uint8Array(_0x347c4d),lut64Profile=_0xa3aeed;}}function setupWebGL_Shader(_0x562ffe){const _0x731674=a0_0x115d;gl=bufferCanvas[_0x731674(0xb9)](_0x731674(0x95),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x731674(0x81)}),gl[_0x731674(0x83)](0x0,0x0,bufferCanvas[_0x731674(0xbf)],bufferCanvas[_0x731674(0xbe)]);function _0x395057(_0x5010ac,_0x56b734){const _0x3352dd=_0x731674,_0x5e69f0=gl[_0x3352dd(0x8c)](_0x5010ac);return gl[_0x3352dd(0xa6)](_0x5e69f0,_0x56b734),gl[_0x3352dd(0xa9)](_0x5e69f0),_0x5e69f0;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x562ffe===_0x731674(0x95))fs=_0x731674(0x9d);else _0x562ffe==='webgl_full'&&(fs=_0x731674(0xb0));const _0x325618=_0x395057(gl[_0x731674(0xaa)],vs),_0x170b1b=_0x395057(gl[_0x731674(0xae)],fs);return program=gl[_0x731674(0x8e)](),gl['attachShader'](program,_0x325618),gl[_0x731674(0xb4)](program,_0x170b1b),gl[_0x731674(0xab)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0xf41a72){const _0x3ba8f3=a0_0x115d;texture=gl['createTexture'](),gl[_0x3ba8f3(0x85)](gl[_0x3ba8f3(0xad)],texture),gl[_0x3ba8f3(0x7a)](gl['TEXTURE_2D'],gl[_0x3ba8f3(0x7f)],gl[_0x3ba8f3(0x99)]),gl[_0x3ba8f3(0x7a)](gl['TEXTURE_2D'],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl[_0x3ba8f3(0x7a)](gl[_0x3ba8f3(0xad)],gl[_0x3ba8f3(0x98)],gl['CLAMP_TO_EDGE']),gl[_0x3ba8f3(0x7a)](gl[_0x3ba8f3(0xad)],gl[_0x3ba8f3(0xa5)],gl[_0x3ba8f3(0x87)]);_0xf41a72===_0x3ba8f3(0x89)&&(gl[_0x3ba8f3(0x80)](gl[_0x3ba8f3(0xbd)](program,_0x3ba8f3(0x86)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x3ba8f3(0xbd)](program,'render_size'),gl[_0x3ba8f3(0xa1)][_0x3ba8f3(0xbf)],gl[_0x3ba8f3(0xa1)][_0x3ba8f3(0xbe)]),gl[_0x3ba8f3(0xb8)](gl[_0x3ba8f3(0xbd)](program,_0x3ba8f3(0x93)),gameWidth/gl[_0x3ba8f3(0xa1)][_0x3ba8f3(0xbf)]),gl[_0x3ba8f3(0xb8)](gl[_0x3ba8f3(0xbd)](program,'smooth_height'),gameHeight/gl[_0x3ba8f3(0xa1)][_0x3ba8f3(0xbe)]));const _0x514064=gl[_0x3ba8f3(0x94)]();gl[_0x3ba8f3(0xb3)](gl['ARRAY_BUFFER'],_0x514064),gl[_0x3ba8f3(0xaf)](gl[_0x3ba8f3(0x97)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x3ba8f3(0xa3)]),gl[_0x3ba8f3(0xb5)](gl[_0x3ba8f3(0x96)](program,_0x3ba8f3(0x7c)),0x2,gl['FLOAT'],![],0x0,0x0),gl['enableVertexAttribArray'](gl['getAttribLocation'](program,'position'));const _0x18c3e9=gl[_0x3ba8f3(0x94)]();gl[_0x3ba8f3(0xb3)](gl['ARRAY_BUFFER'],_0x18c3e9),gl[_0x3ba8f3(0xaf)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']),gl[_0x3ba8f3(0xb5)](gl[_0x3ba8f3(0x96)](program,_0x3ba8f3(0x90)),0x2,gl[_0x3ba8f3(0xa8)],![],0x0,0x0),gl[_0x3ba8f3(0xc0)](gl['getAttribLocation'](program,'texcoord'));}function setup2DContext(){const _0x495e86=a0_0x115d;ctx2d=bufferCanvas[_0x495e86(0xb9)]('2d'),ctx2d[_0x495e86(0xba)]=![];}async function renderPixel(_0x44b345){const _0x5af9fd=a0_0x115d,_0x383d2a=a0_0x5e70a4[_0x5af9fd(0x7e)]();if(!_0x383d2a)return;await loadLUT64();const _0x3a7947=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1d2c9f=0x0;_0x1d2c9f<gameHeight;_0x1d2c9f++){for(let _0x3a8c14=0x0;_0x3a8c14<gameWidth;_0x3a8c14++){const _0x5cb73c=_0x1d2c9f*gameStride+_0x3a8c14,_0x58d9b8=(_0x1d2c9f*gameWidth+_0x3a8c14)*0x4,_0x4aabbc=_0x383d2a[_0x5cb73c];if(lut64Profile===_0x5af9fd(0x82))_0x3a7947[_0x58d9b8]=_0x4aabbc&0xff,_0x3a7947[_0x58d9b8+0x1]=_0x4aabbc>>0x8&0xff,_0x3a7947[_0x58d9b8+0x2]=_0x4aabbc>>0x10&0xff,_0x3a7947[_0x58d9b8+0x3]=0xff;else{const _0xbaa178=(_0x4aabbc&0xff)>>0x2,_0x18ab92=(_0x4aabbc>>0x8&0xff)>>0x2,_0x1ad895=(_0x4aabbc>>0x10&0xff)>>0x2,_0x18bf1b=(_0xbaa178*0x40*0x40+_0x18ab92*0x40+_0x1ad895)*0x3;_0x3a7947[_0x58d9b8]=lut64[_0x18bf1b],_0x3a7947[_0x58d9b8+0x1]=lut64[_0x18bf1b+0x1],_0x3a7947[_0x58d9b8+0x2]=lut64[_0x18bf1b+0x2],_0x3a7947[_0x58d9b8+0x3]=0xff;}}}if(_0x44b345===_0x5af9fd(0x95))gl[_0x5af9fd(0x91)](gl['TEXTURE_2D'],0x0,gl[_0x5af9fd(0xb2)],gameWidth,gameHeight,0x0,gl[_0x5af9fd(0xb2)],gl[_0x5af9fd(0x7d)],_0x3a7947),gl['clear'](gl['COLOR_BUFFER_BIT']),gl[_0x5af9fd(0x9a)](gl[_0x5af9fd(0xb1)],0x0,0x4);else _0x44b345==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x3a7947,gameWidth,gameHeight):imageDataObj['data'][_0x5af9fd(0x8a)](_0x3a7947),ctx2d[_0x5af9fd(0xa4)](0x0,0x0,bufferCanvas[_0x5af9fd(0xbf)],bufferCanvas[_0x5af9fd(0xbe)]),ctx2d[_0x5af9fd(0x84)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x44b345));}export async function switchRenderMode(_0x121de7){const _0x5d00ad=a0_0x115d;systemType=gameName[_0x5d00ad(0x8b)](-0x3);if(_0x121de7==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x121de7===_0x5d00ad(0x95))setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(_0x5d00ad(0x95)),renderPixel(_0x5d00ad(0x95));else _0x121de7==='webgl_full'&&(setupStyle(_0x5d00ad(0x89)),setupWebGL_Shader(_0x5d00ad(0x89)),setupTexture_Buffer(_0x5d00ad(0x89)),renderPixel('webgl'));}}