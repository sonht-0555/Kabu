function a0_0xe7bb(_0x14c9b1,_0x4398a6){const _0x7e4f07=a0_0x7e4f();return a0_0xe7bb=function(_0xe7bb21,_0x3b6415){_0xe7bb21=_0xe7bb21-0x127;let _0x31bf12=_0x7e4f07[_0xe7bb21];return _0x31bf12;},a0_0xe7bb(_0x14c9b1,_0x4398a6);}(function(_0x125517,_0x52f7e9){const _0x244cb2=a0_0xe7bb,_0x52a643=_0x125517();while(!![]){try{const _0x199ecc=parseInt(_0x244cb2(0x150))/0x1*(-parseInt(_0x244cb2(0x15e))/0x2)+parseInt(_0x244cb2(0x129))/0x3+parseInt(_0x244cb2(0x12e))/0x4*(-parseInt(_0x244cb2(0x13f))/0x5)+-parseInt(_0x244cb2(0x164))/0x6+-parseInt(_0x244cb2(0x139))/0x7*(-parseInt(_0x244cb2(0x14d))/0x8)+-parseInt(_0x244cb2(0x142))/0x9*(-parseInt(_0x244cb2(0x15c))/0xa)+parseInt(_0x244cb2(0x15b))/0xb;if(_0x199ecc===_0x52f7e9)break;else _0x52a643['push'](_0x52a643['shift']());}catch(_0x18e48c){_0x52a643['push'](_0x52a643['shift']());}}}(a0_0x7e4f,0x4436e));import*as a0_0x1a975b from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x224f85=a0_0xe7bb;systemType=gameName['slice'](-0x3);const _0x12436a=localStorage[_0x224f85(0x14e)](gameName+'_streng')||'4.0',_0x236c6b=(localStorage['getItem'](gameName+_0x224f85(0x166))||_0x224f85(0x13a))[_0x224f85(0x162)]();if(!lut64||lut64Streng!==_0x12436a||lut64Profile!==_0x236c6b){const _0x43c612=_0x224f85(0x14c)+_0x236c6b+'_'+_0x12436a+_0x224f85(0x14a);console['log'](_0x43c612);const _0x20ca63=await fetch(_0x43c612),_0x1176c9=await _0x20ca63[_0x224f85(0x12f)]();lut64=new Uint8Array(_0x1176c9),lut64Streng=_0x12436a,lut64Profile=_0x236c6b;}}function setupWebGL_Shader(_0x5528ba){const _0x22cc27=a0_0xe7bb;gl=bufferCanvas[_0x22cc27(0x14b)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x22cc27(0x131)}),gl[_0x22cc27(0x144)](0x0,0x0,bufferCanvas[_0x22cc27(0x159)],bufferCanvas[_0x22cc27(0x130)]);function _0x107b57(_0x3656aa,_0x94d0cb){const _0x4ea467=_0x22cc27,_0x1b282f=gl[_0x4ea467(0x128)](_0x3656aa);return gl[_0x4ea467(0x160)](_0x1b282f,_0x94d0cb),gl[_0x4ea467(0x15a)](_0x1b282f),_0x1b282f;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x5528ba==='webgl')fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x5528ba===_0x22cc27(0x137)&&(fs=_0x22cc27(0x12a));const _0x3f7121=_0x107b57(gl['VERTEX_SHADER'],vs),_0xdad7d4=_0x107b57(gl[_0x22cc27(0x15d)],fs);return program=gl[_0x22cc27(0x147)](),gl[_0x22cc27(0x134)](program,_0x3f7121),gl[_0x22cc27(0x134)](program,_0xdad7d4),gl['linkProgram'](program),gl[_0x22cc27(0x12c)](program),program;}function a0_0x7e4f(){const _0xf2a9fd=['getContext','./src/lut/lut64_','10168uexUiz','getItem','webgl','1009BhtFFh','UNSIGNED_BYTE','imageSmoothingEnabled','createTexture','slice','RGBA','drawImage','texParameteri','TEXTURE_MIN_FILTER','width','compileShader','896049EKpTfv','10jipBjG','FRAGMENT_SHADER','106GFKNDX','bindBuffer','shaderSource','bindTexture','toLowerCase','game_size','3021786VCYcOE','getUniformLocation','_temperature','uniform1f','position','render_size','createShader','231855OcZoKQ','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','getAttribLocation','useProgram','clearRect','84IjuKjl','arrayBuffer','height','low-power','TEXTURE_WRAP_S','clear','attachShader','NEAREST','ARRAY_BUFFER','webgl_full','STATIC_DRAW','1561XTtxmK','warm','getPixelData','TEXTURE_2D','FLOAT','COLOR_BUFFER_BIT','7925BQzWrk','bufferData','drawArrays','3848598kYvbuZ','canvas','viewport','TRIANGLE_STRIP','CLAMP_TO_EDGE','createProgram','texImage2D','enableVertexAttribArray','.bin'];a0_0x7e4f=function(){return _0xf2a9fd;};return a0_0x7e4f();}function setupTexture_Buffer(_0x2c9b8c){const _0x1e0b02=a0_0xe7bb;texture=gl[_0x1e0b02(0x153)](),gl[_0x1e0b02(0x161)](gl[_0x1e0b02(0x13c)],texture),gl[_0x1e0b02(0x157)](gl['TEXTURE_2D'],gl[_0x1e0b02(0x158)],gl[_0x1e0b02(0x135)]),gl['texParameteri'](gl['TEXTURE_2D'],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl[_0x1e0b02(0x157)](gl['TEXTURE_2D'],gl[_0x1e0b02(0x132)],gl[_0x1e0b02(0x146)]),gl[_0x1e0b02(0x157)](gl[_0x1e0b02(0x13c)],gl['TEXTURE_WRAP_T'],gl[_0x1e0b02(0x146)]);_0x2c9b8c==='webgl_full'&&(gl['uniform2f'](gl[_0x1e0b02(0x165)](program,_0x1e0b02(0x163)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x1e0b02(0x165)](program,_0x1e0b02(0x127)),gl[_0x1e0b02(0x143)][_0x1e0b02(0x159)],gl[_0x1e0b02(0x143)][_0x1e0b02(0x130)]),gl[_0x1e0b02(0x167)](gl[_0x1e0b02(0x165)](program,'smooth_width'),gameWidth/gl[_0x1e0b02(0x143)][_0x1e0b02(0x159)]),gl[_0x1e0b02(0x167)](gl[_0x1e0b02(0x165)](program,'smooth_height'),gameHeight/gl[_0x1e0b02(0x143)][_0x1e0b02(0x130)]));const _0x316a7d=gl['createBuffer']();gl[_0x1e0b02(0x15f)](gl[_0x1e0b02(0x136)],_0x316a7d),gl[_0x1e0b02(0x140)](gl[_0x1e0b02(0x136)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x1e0b02(0x138)]),gl['vertexAttribPointer'](gl['getAttribLocation'](program,_0x1e0b02(0x168)),0x2,gl[_0x1e0b02(0x13d)],![],0x0,0x0),gl[_0x1e0b02(0x149)](gl[_0x1e0b02(0x12b)](program,'position'));const _0x5113e7=gl['createBuffer']();gl['bindBuffer'](gl[_0x1e0b02(0x136)],_0x5113e7),gl[_0x1e0b02(0x140)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']),gl['vertexAttribPointer'](gl['getAttribLocation'](program,'texcoord'),0x2,gl[_0x1e0b02(0x13d)],![],0x0,0x0),gl[_0x1e0b02(0x149)](gl[_0x1e0b02(0x12b)](program,'texcoord'));}function setup2DContext(){const _0x4cbc95=a0_0xe7bb;ctx2d=bufferCanvas[_0x4cbc95(0x14b)]('2d'),ctx2d[_0x4cbc95(0x152)]=![];}async function renderPixel(_0x59594d){const _0x35ec1a=a0_0xe7bb,_0x23954b=a0_0x1a975b[_0x35ec1a(0x13b)]();if(!_0x23954b)return;await loadLUT64();const _0x7019e0=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x24dfe2=0x0;_0x24dfe2<gameHeight;_0x24dfe2++){for(let _0x2f66a6=0x0;_0x2f66a6<gameWidth;_0x2f66a6++){const _0x90e6e1=_0x24dfe2*gameStride+_0x2f66a6,_0x1c999e=(_0x24dfe2*gameWidth+_0x2f66a6)*0x4,_0x58e1d6=_0x23954b[_0x90e6e1],_0x55df50=(_0x58e1d6&0xff)>>0x2,_0x514ca0=(_0x58e1d6>>0x8&0xff)>>0x2,_0x26d6b3=(_0x58e1d6>>0x10&0xff)>>0x2,_0x29a1ef=(_0x55df50*0x40*0x40+_0x514ca0*0x40+_0x26d6b3)*0x3;_0x7019e0[_0x1c999e]=lut64[_0x29a1ef],_0x7019e0[_0x1c999e+0x1]=lut64[_0x29a1ef+0x1],_0x7019e0[_0x1c999e+0x2]=lut64[_0x29a1ef+0x2],_0x7019e0[_0x1c999e+0x3]=0xff;}}if(_0x59594d==='webgl')gl[_0x35ec1a(0x148)](gl['TEXTURE_2D'],0x0,gl[_0x35ec1a(0x155)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x35ec1a(0x151)],_0x7019e0),gl[_0x35ec1a(0x133)](gl[_0x35ec1a(0x13e)]),gl[_0x35ec1a(0x141)](gl[_0x35ec1a(0x145)],0x0,0x4);else _0x59594d==='2d'&&(imageDataObj=new ImageData(_0x7019e0,gameWidth,gameHeight),createImageBitmap(imageDataObj)['then'](_0x34cba3=>{const _0x4d0704=_0x35ec1a;ctx2d[_0x4d0704(0x12d)](0x0,0x0,bufferCanvas[_0x4d0704(0x159)],bufferCanvas[_0x4d0704(0x130)]),ctx2d[_0x4d0704(0x156)](_0x34cba3,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x59594d));}export async function switchRenderMode(_0x509c2d){const _0x592566=a0_0xe7bb;systemType=gameName[_0x592566(0x154)](-0x3);if(_0x509c2d==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x509c2d===_0x592566(0x14f))setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(_0x592566(0x14f)),renderPixel(_0x592566(0x14f));else _0x509c2d===_0x592566(0x137)&&(setupStyle(_0x592566(0x137)),setupWebGL_Shader(_0x592566(0x137)),setupTexture_Buffer(_0x592566(0x137)),renderPixel(_0x592566(0x14f)));}}