const a0_0x580edd=a0_0x3174;(function(_0x2cc8b3,_0x4328e4){const _0x28d047=a0_0x3174,_0x498d95=_0x2cc8b3();while(!![]){try{const _0x34fc9d=parseInt(_0x28d047(0x141))/0x1*(parseInt(_0x28d047(0x137))/0x2)+parseInt(_0x28d047(0x147))/0x3+-parseInt(_0x28d047(0x148))/0x4*(-parseInt(_0x28d047(0x102))/0x5)+parseInt(_0x28d047(0x140))/0x6+-parseInt(_0x28d047(0x150))/0x7*(parseInt(_0x28d047(0x120))/0x8)+parseInt(_0x28d047(0x12f))/0x9*(parseInt(_0x28d047(0x10e))/0xa)+-parseInt(_0x28d047(0x13a))/0xb*(parseInt(_0x28d047(0x108))/0xc);if(_0x34fc9d===_0x4328e4)break;else _0x498d95['push'](_0x498d95['shift']());}catch(_0x5bfd3f){_0x498d95['push'](_0x498d95['shift']());}}}(a0_0xe4da,0x6f42d));import*as a0_0x385ad4 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x580edd(0x14b)](a0_0x580edd(0x14f)),bufferCanvas=document[a0_0x580edd(0x14b)](a0_0x580edd(0x121)),canvasContainer=document[a0_0x580edd(0x14b)](a0_0x580edd(0x12c)),imgShader=document['getElementById'](a0_0x580edd(0x118)),settingContainer=document[a0_0x580edd(0x138)](a0_0x580edd(0x10c)),messageContainer=document[a0_0x580edd(0x138)]('.message-container'),stateTitle=document['querySelectorAll']('.stateTitle,\x20.stateDate');async function loadLUT64(){const _0xc30932=a0_0x580edd;systemType=gameName[_0xc30932(0x12b)](-0x3);const _0x92303b=localStorage[_0xc30932(0x10f)](gameName+_0xc30932(0x123))||_0xc30932(0x116),_0x3d372e=(localStorage['getItem'](gameName+_0xc30932(0x14a))||_0xc30932(0x110))[_0xc30932(0x103)]();if(!lut64||lut64Streng!==_0x92303b||lut64Profile!==_0x3d372e){const _0x50ceb1=_0xc30932(0x153)+_0x3d372e+'_'+_0x92303b+_0xc30932(0x13d);console['log'](_0x50ceb1);const _0x5e5baf=await fetch(_0x50ceb1),_0x155767=await _0x5e5baf['arrayBuffer']();lut64=new Uint8Array(_0x155767),lut64Streng=_0x92303b,lut64Profile=_0x3d372e;}}function a0_0x3174(_0x44a5c5,_0x42d617){const _0xe4da95=a0_0xe4da();return a0_0x3174=function(_0x317437,_0x473905){_0x317437=_0x317437-0xfd;let _0xe2411e=_0xe4da95[_0x317437];return _0xe2411e;},a0_0x3174(_0x44a5c5,_0x42d617);}async function loadShaderSource(_0x5ef018){const _0x56ba19=await fetch(_0x5ef018);return await _0x56ba19['text']();}function setupStyle(_0x597bfd){const _0x90ee8=a0_0x580edd;clientWidth=document['documentElement'][_0x90ee8(0x130)];const _0x385730=window[_0x90ee8(0x10b)];systemType===_0x90ee8(0x128)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x90ee8(0x11f)](clientWidth*_0x385730/gameWidth),localStorage[_0x90ee8(0x12d)](_0x90ee8(0x114),_0x90ee8(0x119)+gameWidth*(integerScaling/_0x385730)+','+gameHeight*(integerScaling/_0x385730))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x90ee8(0x11f)](clientWidth*_0x385730/gameWidth),localStorage[_0x90ee8(0x12d)](_0x90ee8(0x114),_0x90ee8(0x119)+gameWidth*(integerScaling/_0x385730)+','+gameHeight*(integerScaling/_0x385730)));if(_0x597bfd==='2d')bufferCanvas[_0x90ee8(0x14e)]=gameWidth,bufferCanvas[_0x90ee8(0x158)]=gameHeight,bufferCanvas[_0x90ee8(0x144)][_0x90ee8(0x157)]=''+integerScaling/_0x385730,bufferCanvas[_0x90ee8(0x144)][_0x90ee8(0x125)]='crisp-edges',canvasContainer['style']['width']=gameWidth*(integerScaling/_0x385730)+'px',canvasContainer[_0x90ee8(0x144)][_0x90ee8(0x158)]=gameHeight*(integerScaling/_0x385730)+'px',textured['style']['width']=gameWidth*(integerScaling/_0x385730)+'px',textured[_0x90ee8(0x144)][_0x90ee8(0x158)]=gameHeight*(integerScaling/_0x385730)+'px',imgShader[_0x90ee8(0x144)]['transform']=_0x90ee8(0xff)+integerScaling/_0x385730/upscaleShader+')',settingContainer['forEach'](function(_0x2b4ebc){const _0x234d88=_0x90ee8;_0x2b4ebc[_0x234d88(0x144)][_0x234d88(0x14e)]=gameWidth*(integerScaling/_0x385730)+'px',_0x2b4ebc[_0x234d88(0x144)][_0x234d88(0x158)]=gameHeight*(integerScaling/_0x385730)+'px';}),messageContainer[_0x90ee8(0x142)](function(_0x534bf7){const _0x18b815=_0x90ee8;_0x534bf7[_0x18b815(0x144)][_0x18b815(0x14e)]=gameWidth+'px',_0x534bf7[_0x18b815(0x144)][_0x18b815(0x158)]=gameHeight+'px',_0x534bf7['style'][_0x18b815(0x157)]=''+integerScaling/_0x385730;}),stateTitle[_0x90ee8(0x142)](function(_0x4cb060){const _0x69c9cf=_0x90ee8;_0x4cb060[_0x69c9cf(0x107)]['remove'](_0x69c9cf(0x13e));});else _0x597bfd==='webgl2'&&(bufferCanvas[_0x90ee8(0x14e)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style']['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x90ee8(0x144)][_0x90ee8(0x125)]='',canvasContainer[_0x90ee8(0x144)]['width']=clientWidth+'px',canvasContainer[_0x90ee8(0x144)][_0x90ee8(0x158)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x90ee8(0x144)][_0x90ee8(0x14e)]=clientWidth+'px',textured[_0x90ee8(0x144)]['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style'][_0x90ee8(0x15b)]=_0x90ee8(0xff)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x90ee8(0x142)](function(_0x925d27){const _0x406017=_0x90ee8;_0x925d27[_0x406017(0x144)][_0x406017(0x14e)]=clientWidth+'px',_0x925d27[_0x406017(0x144)][_0x406017(0x158)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x90ee8(0x142)](function(_0x5d30eb){const _0x323453=_0x90ee8;_0x5d30eb[_0x323453(0x144)]['width']=gameWidth+'px',_0x5d30eb[_0x323453(0x144)][_0x323453(0x158)]=gameHeight+'px',_0x5d30eb[_0x323453(0x144)][_0x323453(0x157)]=''+clientWidth/gameWidth;}),stateTitle[_0x90ee8(0x142)](function(_0x44fe80){const _0xd9fb38=_0x90ee8;_0x44fe80['classList'][_0xd9fb38(0x11b)]('fefs');}));imgShader[_0x90ee8(0x144)][_0x90ee8(0x14e)]=gameWidth*upscaleShader+'px',imgShader[_0x90ee8(0x144)][_0x90ee8(0x158)]=gameHeight*upscaleShader+'px',imgShader[_0x90ee8(0x144)]['transformOrigin']=_0x90ee8(0x131),imgShader[_0x90ee8(0x144)][_0x90ee8(0x12a)](_0x90ee8(0x104),upscaleShader+_0x90ee8(0x159)+upscaleShader+'px');}function setupWebGL(){const _0x104258=a0_0x580edd;gl=bufferCanvas[_0x104258(0x146)](_0x104258(0x143));if(!gl)return console[_0x104258(0x14d)](_0x104258(0x13c)),null;gl[_0x104258(0x127)](0x0,0x0,bufferCanvas[_0x104258(0x14e)],bufferCanvas['height']);}function createShader(_0x29603f,_0x25ee6d){const _0x259fbb=a0_0x580edd,_0x27ee25=gl[_0x259fbb(0x133)](_0x29603f);gl[_0x259fbb(0x10a)](_0x27ee25,_0x25ee6d),gl[_0x259fbb(0x132)](_0x27ee25);if(!gl['getShaderParameter'](_0x27ee25,gl[_0x259fbb(0x134)]))return console['error'](gl['getShaderInfoLog'](_0x27ee25)),gl[_0x259fbb(0x13b)](_0x27ee25),null;return _0x27ee25;}async function setupShaders(){const _0xf46ec4=a0_0x580edd,_0x2b42d9=await loadShaderSource(_0xf46ec4(0xfe)),_0x91d211=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x1450ce=createShader(gl['VERTEX_SHADER'],_0x2b42d9),_0x1bf35c=createShader(gl[_0xf46ec4(0x139)],_0x91d211);return program=gl['createProgram'](),gl[_0xf46ec4(0x126)](program,_0x1450ce),gl['attachShader'](program,_0x1bf35c),gl[_0xf46ec4(0x155)](program),gl['useProgram'](program),program;}function setupTexture(){const _0x3909a1=a0_0x580edd;texture=gl[_0x3909a1(0x124)](),gl[_0x3909a1(0x14c)](gl['TEXTURE_2D'],texture),gl[_0x3909a1(0x152)](gl[_0x3909a1(0x11e)],gl[_0x3909a1(0x12e)],gl['NEAREST']),gl[_0x3909a1(0x152)](gl['TEXTURE_2D'],gl[_0x3909a1(0x117)],gl['NEAREST']),gl['texParameteri'](gl[_0x3909a1(0x11e)],gl[_0x3909a1(0x122)],gl[_0x3909a1(0x149)]),gl[_0x3909a1(0x152)](gl[_0x3909a1(0x11e)],gl['TEXTURE_WRAP_T'],gl[_0x3909a1(0x149)]),gl[_0x3909a1(0x111)](gl[_0x3909a1(0x10d)](program,'game_size'),gameWidth,gameHeight),gl[_0x3909a1(0x111)](gl[_0x3909a1(0x10d)](program,_0x3909a1(0x11a)),gl['canvas'][_0x3909a1(0x14e)],gl[_0x3909a1(0x121)]['height']),gl[_0x3909a1(0x15a)](gl[_0x3909a1(0x10d)](program,_0x3909a1(0x15c)),gameWidth/gl[_0x3909a1(0x121)][_0x3909a1(0x14e)]),gl[_0x3909a1(0x15a)](gl[_0x3909a1(0x10d)](program,_0x3909a1(0x100)),gameHeight/gl[_0x3909a1(0x121)][_0x3909a1(0x158)]);}function setupBuffers(){const _0x499304=a0_0x580edd,_0x166eb9=gl['createBuffer']();gl[_0x499304(0x145)](gl[_0x499304(0x15e)],_0x166eb9),gl[_0x499304(0x11d)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x499304(0x113)]);const _0x1ebae1=gl[_0x499304(0x136)](program,_0x499304(0x129));gl[_0x499304(0x13f)](_0x1ebae1),gl[_0x499304(0x156)](_0x1ebae1,0x2,gl['FLOAT'],![],0x0,0x0);const _0x1ba4b4=gl[_0x499304(0x115)]();gl[_0x499304(0x145)](gl['ARRAY_BUFFER'],_0x1ba4b4),gl['bufferData'](gl[_0x499304(0x15e)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x499304(0x113)]);const _0x547614=gl[_0x499304(0x136)](program,_0x499304(0x11c));gl[_0x499304(0x13f)](_0x547614),gl[_0x499304(0x156)](_0x547614,0x2,gl[_0x499304(0x15d)],![],0x0,0x0);}async function renderPixel(_0x4be4f6){const _0x31ee9a=a0_0x580edd,_0x586dde=a0_0x385ad4['getPixelData']();if(!_0x586dde)return;await loadLUT64();const _0x5774c5=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0xf834b0=0x0;_0xf834b0<gameHeight;_0xf834b0++){for(let _0xc42594=0x0;_0xc42594<gameWidth;_0xc42594++){const _0x48a6aa=_0xf834b0*gameStride+_0xc42594,_0x14969c=(_0xf834b0*gameWidth+_0xc42594)*0x4,_0x1f606c=_0x586dde[_0x48a6aa],_0x45419e=(_0x1f606c&0xff)>>0x2,_0x3496ad=(_0x1f606c>>0x8&0xff)>>0x2,_0x19e481=(_0x1f606c>>0x10&0xff)>>0x2,_0x1bf340=(_0x45419e*0x40*0x40+_0x3496ad*0x40+_0x19e481)*0x3;_0x5774c5[_0x14969c]=lut64[_0x1bf340],_0x5774c5[_0x14969c+0x1]=lut64[_0x1bf340+0x1],_0x5774c5[_0x14969c+0x2]=lut64[_0x1bf340+0x2],_0x5774c5[_0x14969c+0x3]=0xff;}}if(_0x4be4f6===_0x31ee9a(0x143))gl[_0x31ee9a(0x14c)](gl[_0x31ee9a(0x11e)],texture),gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x31ee9a(0x151)],gameWidth,gameHeight,0x0,gl[_0x31ee9a(0x151)],gl[_0x31ee9a(0x106)],_0x5774c5),gl[_0x31ee9a(0x109)](gl['COLOR_BUFFER_BIT']),gl[_0x31ee9a(0x105)](gl[_0x31ee9a(0x135)],0x0,0x4);else{if(_0x4be4f6==='2d'){ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x31ee9a(0x101)]=![];const _0x173641=new ImageData(_0x5774c5,gameWidth,gameHeight);createImageBitmap(_0x173641)['then'](_0x1edbea=>{const _0x1bf13a=_0x31ee9a;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x1bf13a(0x14e)],bufferCanvas['height']),ctx2d[_0x1bf13a(0x112)](_0x1edbea,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x4be4f6));}export async function switchRenderMode(_0x25d03c){const _0x349edd=a0_0x580edd;systemType=gameName[_0x349edd(0x12b)](-0x3);if(_0x25d03c==='2d')setupStyle('2d'),renderPixel('2d');else _0x25d03c===_0x349edd(0x143)&&(setupStyle(_0x349edd(0x143)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x349edd(0x143)));}function a0_0xe4da(){const _0x5f3573=['getUniformLocation','10UpCnlv','getItem','warm','uniform2f','drawImage','STATIC_DRAW','screenSize','createBuffer','4.0','TEXTURE_MAG_FILTER','img-shader','0,0,','render_size','add','texcoord','bufferData','TEXTURE_2D','floor','3651144nAZGll','canvas','TEXTURE_WRAP_S','_streng','createTexture','imageRendering','attachShader','viewport','gbc','position','setProperty','slice','canvas-container','setItem','TEXTURE_MIN_FILTER','235449yctzyb','clientWidth','top\x20center','compileShader','createShader','COMPILE_STATUS','TRIANGLE_STRIP','getAttribLocation','1411118GvVwYs','querySelectorAll','FRAGMENT_SHADER','11iUbNvm','deleteShader','WebGL2\x20not\x20supported','.bin','fefs','enableVertexAttribArray','4669464oKkbhY','1rsCZfi','forEach','webgl2','style','bindBuffer','getContext','390156jWBJSm','87684fKOfbQ','CLAMP_TO_EDGE','_temperature','getElementById','bindTexture','error','width','textured','7EDyQSb','RGBA','texParameteri','./src/lut/lut64_','DOMContentLoaded','linkProgram','vertexAttribPointer','zoom','height','px\x20','uniform1f','transform','smooth_width','FLOAT','ARRAY_BUFFER','addEventListener','./src/shaders/vertexShader.glsl','scale(','smooth_height','imageSmoothingEnabled','205yXHfEo','toLowerCase','--bg-size','drawArrays','UNSIGNED_BYTE','classList','19519908UoirCF','clear','shaderSource','devicePixelRatio','.setting-container'];a0_0xe4da=function(){return _0x5f3573;};return a0_0xe4da();}document[a0_0x580edd(0xfd)](a0_0x580edd(0x154),function(){});