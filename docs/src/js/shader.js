const a0_0x4d4d31=a0_0xac95;(function(_0x4efb2b,_0x317581){const _0x2fb2e2=a0_0xac95,_0x34078b=_0x4efb2b();while(!![]){try{const _0xb01f34=parseInt(_0x2fb2e2(0x1b4))/0x1*(-parseInt(_0x2fb2e2(0x1a9))/0x2)+-parseInt(_0x2fb2e2(0x193))/0x3+parseInt(_0x2fb2e2(0x1ca))/0x4+-parseInt(_0x2fb2e2(0x180))/0x5*(parseInt(_0x2fb2e2(0x1c0))/0x6)+-parseInt(_0x2fb2e2(0x1c4))/0x7*(parseInt(_0x2fb2e2(0x188))/0x8)+-parseInt(_0x2fb2e2(0x175))/0x9*(parseInt(_0x2fb2e2(0x16a))/0xa)+parseInt(_0x2fb2e2(0x19a))/0xb*(parseInt(_0x2fb2e2(0x1a7))/0xc);if(_0xb01f34===_0x317581)break;else _0x34078b['push'](_0x34078b['shift']());}catch(_0x8eb4dd){_0x34078b['push'](_0x34078b['shift']());}}}(a0_0x326f,0xf05d7));import*as a0_0x207fe1 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById']('textured'),bufferCanvas=document[a0_0x4d4d31(0x1c7)](a0_0x4d4d31(0x19b)),canvasContainer=document['getElementById'](a0_0x4d4d31(0x16c)),imgShader=document['getElementById'](a0_0x4d4d31(0x197)),settingContainer=document[a0_0x4d4d31(0x18b)](a0_0x4d4d31(0x174)),messageContainer=document[a0_0x4d4d31(0x18b)]('.message-container'),stateTitle=document['querySelectorAll'](a0_0x4d4d31(0x18e));async function loadLUT64(){const _0x3b075a=a0_0x4d4d31;systemType=gameName['slice'](-0x3);const _0x2d4f90=localStorage['getItem'](gameName+_0x3b075a(0x18d))||_0x3b075a(0x1b8),_0x5c5276=(localStorage[_0x3b075a(0x190)](gameName+_0x3b075a(0x1c1))||'warm')[_0x3b075a(0x19f)]();if(!lut64||lut64Streng!==_0x2d4f90||lut64Profile!==_0x5c5276){const _0x2a37d7=_0x3b075a(0x181)+_0x5c5276+'_'+_0x2d4f90+_0x3b075a(0x17b);console[_0x3b075a(0x17e)](_0x2a37d7);const _0x4c0393=await fetch(_0x2a37d7),_0xe3cc4c=await _0x4c0393[_0x3b075a(0x191)]();lut64=new Uint8Array(_0xe3cc4c),lut64Streng=_0x2d4f90,lut64Profile=_0x5c5276;}}async function loadShaderSource(_0x5d1602){const _0x20a46b=a0_0x4d4d31,_0x40607a=await fetch(_0x5d1602);return await _0x40607a[_0x20a46b(0x196)]();}function setupStyle(_0x308c34){const _0x5cf8ef=a0_0x4d4d31;clientWidth=document[_0x5cf8ef(0x17a)][_0x5cf8ef(0x1a5)];const _0xdf6695=window[_0x5cf8ef(0x1c5)];systemType===_0x5cf8ef(0x185)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x5cf8ef(0x199)](clientWidth*_0xdf6695/gameWidth),localStorage[_0x5cf8ef(0x18f)](_0x5cf8ef(0x170),_0x5cf8ef(0x1a2)+gameWidth*(integerScaling/_0xdf6695)+','+gameHeight*(integerScaling/_0xdf6695))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x5cf8ef(0x199)](clientWidth*_0xdf6695/gameWidth),localStorage[_0x5cf8ef(0x18f)](_0x5cf8ef(0x170),'0,0,'+gameWidth*(integerScaling/_0xdf6695)+','+gameHeight*(integerScaling/_0xdf6695)));if(_0x308c34==='2d')bufferCanvas['width']=gameWidth,bufferCanvas[_0x5cf8ef(0x1a1)]=gameHeight,bufferCanvas[_0x5cf8ef(0x1b9)][_0x5cf8ef(0x176)]=''+integerScaling/_0xdf6695,bufferCanvas[_0x5cf8ef(0x1b9)]['imageRendering']=_0x5cf8ef(0x1be),canvasContainer[_0x5cf8ef(0x1b9)][_0x5cf8ef(0x1b7)]=gameWidth*(integerScaling/_0xdf6695)+'px',canvasContainer[_0x5cf8ef(0x1b9)][_0x5cf8ef(0x1a1)]=gameHeight*(integerScaling/_0xdf6695)+'px',textured[_0x5cf8ef(0x1b9)][_0x5cf8ef(0x1b7)]=gameWidth*(integerScaling/_0xdf6695)+'px',textured[_0x5cf8ef(0x1b9)][_0x5cf8ef(0x1a1)]=gameHeight*(integerScaling/_0xdf6695)+'px',imgShader[_0x5cf8ef(0x1b9)][_0x5cf8ef(0x182)]=_0x5cf8ef(0x1ae)+integerScaling/_0xdf6695/upscaleShader+')',settingContainer[_0x5cf8ef(0x1aa)](function(_0x571932){const _0x29425f=_0x5cf8ef;_0x571932['style']['width']=gameWidth*(integerScaling/_0xdf6695)+'px',_0x571932[_0x29425f(0x1b9)][_0x29425f(0x1a1)]=gameHeight*(integerScaling/_0xdf6695)+'px';}),messageContainer[_0x5cf8ef(0x1aa)](function(_0x48a448){const _0x54622c=_0x5cf8ef;_0x48a448[_0x54622c(0x1b9)]['width']=gameWidth+'px',_0x48a448[_0x54622c(0x1b9)][_0x54622c(0x1a1)]=gameHeight+'px',_0x48a448[_0x54622c(0x1b9)][_0x54622c(0x176)]=''+integerScaling/_0xdf6695;}),stateTitle['forEach'](function(_0x73ed8e){const _0x318406=_0x5cf8ef;_0x73ed8e[_0x318406(0x172)][_0x318406(0x1b3)]('fefs');});else _0x308c34===_0x5cf8ef(0x184)&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas[_0x5cf8ef(0x1a1)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x5cf8ef(0x1b9)]['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x5cf8ef(0x1b9)][_0x5cf8ef(0x173)]='',canvasContainer['style']['width']=clientWidth+'px',canvasContainer[_0x5cf8ef(0x1b9)]['height']=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x5cf8ef(0x1b9)][_0x5cf8ef(0x1b7)]=clientWidth+'px',textured['style'][_0x5cf8ef(0x1a1)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x5cf8ef(0x1b9)]['transform']=_0x5cf8ef(0x1ae)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x5cf8ef(0x1aa)](function(_0x27f731){const _0x5e082e=_0x5cf8ef;_0x27f731[_0x5e082e(0x1b9)][_0x5e082e(0x1b7)]=clientWidth+'px',_0x27f731[_0x5e082e(0x1b9)]['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x5cf8ef(0x1aa)](function(_0x5f0104){const _0x512f1b=_0x5cf8ef;_0x5f0104[_0x512f1b(0x1b9)]['width']=gameWidth+'px',_0x5f0104[_0x512f1b(0x1b9)]['height']=gameHeight+'px',_0x5f0104[_0x512f1b(0x1b9)][_0x512f1b(0x176)]=''+clientWidth/gameWidth;}),stateTitle[_0x5cf8ef(0x1aa)](function(_0x4fdcdb){const _0x58a3dc=_0x5cf8ef;_0x4fdcdb['classList'][_0x58a3dc(0x16f)](_0x58a3dc(0x1b5));}));imgShader['style'][_0x5cf8ef(0x1b7)]=gameWidth*upscaleShader+'px',imgShader[_0x5cf8ef(0x1b9)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x5cf8ef(0x1b9)][_0x5cf8ef(0x16e)]=_0x5cf8ef(0x17c),imgShader[_0x5cf8ef(0x1b9)]['setProperty'](_0x5cf8ef(0x1bf),upscaleShader+_0x5cf8ef(0x1cb)+upscaleShader+'px');}function setupWebGL(){const _0x55b212=a0_0x4d4d31;gl=bufferCanvas['getContext'](_0x55b212(0x184));if(!gl)return console[_0x55b212(0x1ce)](_0x55b212(0x1c2)),null;gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x55b212(0x1a1)]);}function a0_0x326f(){const _0x40316b=['76460TklXxV','uniform2f','canvas-container','getAttribLocation','transformOrigin','add','screenSize','texImage2D','classList','imageRendering','.setting-container','81cRPKWx','zoom','createShader','./src/shaders/vertexShader.glsl','bindTexture','documentElement','.bin','top\x20center','VERTEX_SHADER','log','getPixelData','9606430XVzerP','./src/lut/lut64_','transform','uniform1f','webgl2','gbc','./src/shaders/fragmentShader.glsl','then','280gDiVOQ','linkProgram','UNSIGNED_BYTE','querySelectorAll','enableVertexAttribArray','_streng','.stateTitle,\x20.stateDate','setItem','getItem','arrayBuffer','ARRAY_BUFFER','1620057riHyXL','texParameteri','game_size','text','img-shader','drawImage','floor','2937TygSYU','canvas','smooth_width','COLOR_BUFFER_BIT','clear','toLowerCase','NEAREST','height','0,0,','deleteShader','slice','clientWidth','FLOAT','180324uJycnE','clearRect','432mhNnjS','forEach','STATIC_DRAW','bindBuffer','createBuffer','scale(','TEXTURE_2D','FRAGMENT_SHADER','getContext','createTexture','remove','8209OMocQJ','fefs','TEXTURE_MAG_FILTER','width','4.0','style','RGBA','COMPILE_STATUS','TEXTURE_WRAP_T','bufferData','crisp-edges','--bg-size','6puwenp','_temperature','WebGL2\x20not\x20supported','compileShader','25739alneUm','devicePixelRatio','attachShader','getElementById','render_size','DOMContentLoaded','5617136FeVxcV','px\x20','getUniformLocation','createProgram','error','useProgram'];a0_0x326f=function(){return _0x40316b;};return a0_0x326f();}function createShader(_0x36a2fc,_0x21f888){const _0x995470=a0_0x4d4d31,_0x1baec8=gl[_0x995470(0x177)](_0x36a2fc);gl['shaderSource'](_0x1baec8,_0x21f888),gl[_0x995470(0x1c3)](_0x1baec8);if(!gl['getShaderParameter'](_0x1baec8,gl[_0x995470(0x1bb)]))return console[_0x995470(0x1ce)](gl['getShaderInfoLog'](_0x1baec8)),gl[_0x995470(0x1a3)](_0x1baec8),null;return _0x1baec8;}function a0_0xac95(_0x535437,_0x52eaee){const _0x326f77=a0_0x326f();return a0_0xac95=function(_0xac9553,_0x467ee7){_0xac9553=_0xac9553-0x169;let _0x515853=_0x326f77[_0xac9553];return _0x515853;},a0_0xac95(_0x535437,_0x52eaee);}async function setupShaders(){const _0x55bb6b=a0_0x4d4d31,_0x42717b=await loadShaderSource(_0x55bb6b(0x178)),_0x20a6ab=await loadShaderSource(_0x55bb6b(0x186)),_0x5862b5=createShader(gl[_0x55bb6b(0x17d)],_0x42717b),_0x23a6d2=createShader(gl[_0x55bb6b(0x1b0)],_0x20a6ab);return program=gl[_0x55bb6b(0x1cd)](),gl[_0x55bb6b(0x1c6)](program,_0x5862b5),gl['attachShader'](program,_0x23a6d2),gl[_0x55bb6b(0x189)](program),gl[_0x55bb6b(0x169)](program),program;}function setupTexture(){const _0x10dbcd=a0_0x4d4d31;texture=gl[_0x10dbcd(0x1b2)](),gl[_0x10dbcd(0x179)](gl[_0x10dbcd(0x1af)],texture),gl[_0x10dbcd(0x194)](gl['TEXTURE_2D'],gl['TEXTURE_MIN_FILTER'],gl[_0x10dbcd(0x1a0)]),gl[_0x10dbcd(0x194)](gl[_0x10dbcd(0x1af)],gl[_0x10dbcd(0x1b6)],gl[_0x10dbcd(0x1a0)]),gl[_0x10dbcd(0x194)](gl[_0x10dbcd(0x1af)],gl['TEXTURE_WRAP_S'],gl['CLAMP_TO_EDGE']),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x10dbcd(0x1bc)],gl['CLAMP_TO_EDGE']),gl['uniform2f'](gl[_0x10dbcd(0x1cc)](program,_0x10dbcd(0x195)),gameWidth,gameHeight),gl[_0x10dbcd(0x16b)](gl['getUniformLocation'](program,_0x10dbcd(0x1c8)),gl[_0x10dbcd(0x19b)][_0x10dbcd(0x1b7)],gl[_0x10dbcd(0x19b)][_0x10dbcd(0x1a1)]),gl[_0x10dbcd(0x183)](gl[_0x10dbcd(0x1cc)](program,_0x10dbcd(0x19c)),gameWidth/gl[_0x10dbcd(0x19b)][_0x10dbcd(0x1b7)]),gl['uniform1f'](gl[_0x10dbcd(0x1cc)](program,'smooth_height'),gameHeight/gl[_0x10dbcd(0x19b)][_0x10dbcd(0x1a1)]);}function setupBuffers(){const _0x4bb9cc=a0_0x4d4d31,_0x4a26ed=gl[_0x4bb9cc(0x1ad)]();gl[_0x4bb9cc(0x1ac)](gl[_0x4bb9cc(0x192)],_0x4a26ed),gl[_0x4bb9cc(0x1bd)](gl[_0x4bb9cc(0x192)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x4bb9cc(0x1ab)]);const _0x44fd1e=gl['getAttribLocation'](program,'position');gl[_0x4bb9cc(0x18c)](_0x44fd1e),gl['vertexAttribPointer'](_0x44fd1e,0x2,gl[_0x4bb9cc(0x1a6)],![],0x0,0x0);const _0x2ffa19=gl[_0x4bb9cc(0x1ad)]();gl[_0x4bb9cc(0x1ac)](gl[_0x4bb9cc(0x192)],_0x2ffa19),gl[_0x4bb9cc(0x1bd)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4bb9cc(0x1ab)]);const _0x437250=gl[_0x4bb9cc(0x16d)](program,'texcoord');gl[_0x4bb9cc(0x18c)](_0x437250),gl['vertexAttribPointer'](_0x437250,0x2,gl[_0x4bb9cc(0x1a6)],![],0x0,0x0);}async function renderPixel(_0x4809a0){const _0x4f4afc=a0_0x4d4d31,_0x4c5188=a0_0x207fe1[_0x4f4afc(0x17f)]();if(!_0x4c5188)return;await loadLUT64();const _0x18fcc7=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5f550b=0x0;_0x5f550b<gameHeight;_0x5f550b++){for(let _0x33035a=0x0;_0x33035a<gameWidth;_0x33035a++){const _0x1d09fd=_0x5f550b*gameStride+_0x33035a,_0x5db1e4=(_0x5f550b*gameWidth+_0x33035a)*0x4,_0x554583=_0x4c5188[_0x1d09fd],_0x2e43e4=(_0x554583&0xff)>>0x2,_0x46c42c=(_0x554583>>0x8&0xff)>>0x2,_0x2ae8ca=(_0x554583>>0x10&0xff)>>0x2,_0x388a63=(_0x2e43e4*0x40*0x40+_0x46c42c*0x40+_0x2ae8ca)*0x3;_0x18fcc7[_0x5db1e4]=lut64[_0x388a63],_0x18fcc7[_0x5db1e4+0x1]=lut64[_0x388a63+0x1],_0x18fcc7[_0x5db1e4+0x2]=lut64[_0x388a63+0x2],_0x18fcc7[_0x5db1e4+0x3]=0xff;}}if(_0x4809a0===_0x4f4afc(0x184))gl[_0x4f4afc(0x179)](gl['TEXTURE_2D'],texture),gl[_0x4f4afc(0x171)](gl['TEXTURE_2D'],0x0,gl[_0x4f4afc(0x1ba)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x4f4afc(0x18a)],_0x18fcc7),gl[_0x4f4afc(0x19e)](gl[_0x4f4afc(0x19d)]),gl['drawArrays'](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x4809a0==='2d'){ctx2d=bufferCanvas[_0x4f4afc(0x1b1)]('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x4c1f7f=new ImageData(_0x18fcc7,gameWidth,gameHeight);createImageBitmap(_0x4c1f7f)[_0x4f4afc(0x187)](_0x189297=>{const _0x124428=_0x4f4afc;ctx2d[_0x124428(0x1a8)](0x0,0x0,bufferCanvas[_0x124428(0x1b7)],bufferCanvas['height']),ctx2d[_0x124428(0x198)](_0x189297,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x4809a0));}export async function switchRenderMode(_0x538124){const _0x18d648=a0_0x4d4d31;systemType=gameName[_0x18d648(0x1a4)](-0x3);if(_0x538124==='2d')setupStyle('2d'),renderPixel('2d');else _0x538124===_0x18d648(0x184)&&(setupStyle(_0x18d648(0x184)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x18d648(0x184)));}document['addEventListener'](a0_0x4d4d31(0x1c9),function(){});