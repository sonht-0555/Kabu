const a0_0x3e7409=a0_0x5685;(function(_0x4686d0,_0x45f5f9){const _0x385caa=a0_0x5685,_0x5d9872=_0x4686d0();while(!![]){try{const _0x25ee8d=parseInt(_0x385caa(0x179))/0x1+-parseInt(_0x385caa(0x15a))/0x2*(parseInt(_0x385caa(0x172))/0x3)+-parseInt(_0x385caa(0x17b))/0x4*(parseInt(_0x385caa(0x145))/0x5)+parseInt(_0x385caa(0x180))/0x6*(-parseInt(_0x385caa(0x189))/0x7)+-parseInt(_0x385caa(0x173))/0x8*(-parseInt(_0x385caa(0x197))/0x9)+-parseInt(_0x385caa(0x166))/0xa+parseInt(_0x385caa(0x18a))/0xb*(parseInt(_0x385caa(0x159))/0xc);if(_0x25ee8d===_0x45f5f9)break;else _0x5d9872['push'](_0x5d9872['shift']());}catch(_0x121e7a){_0x5d9872['push'](_0x5d9872['shift']());}}}(a0_0x368b,0x77209));import*as a0_0x2e7a21 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;function a0_0x5685(_0x177965,_0x2034c3){const _0x368bd0=a0_0x368b();return a0_0x5685=function(_0x56855b,_0x4adc99){_0x56855b=_0x56855b-0x13c;let _0x38eb0a=_0x368bd0[_0x56855b];return _0x38eb0a;},a0_0x5685(_0x177965,_0x2034c3);}const textured=document[a0_0x3e7409(0x15e)](a0_0x3e7409(0x143)),bufferCanvas=document[a0_0x3e7409(0x15e)]('canvas'),canvasContainer=document[a0_0x3e7409(0x15e)](a0_0x3e7409(0x152)),imgShader=document['getElementById'](a0_0x3e7409(0x1a4)),settingContainer=document['querySelectorAll'](a0_0x3e7409(0x184)),messageContainer=document['querySelectorAll'](a0_0x3e7409(0x149)),stateTitle=document[a0_0x3e7409(0x195)]('.stateTitle,\x20.stateDate');async function loadLUT64(){const _0x1ff161=a0_0x3e7409;systemType=gameName['slice'](-0x3);const _0x1eea99=localStorage[_0x1ff161(0x199)](gameName+_0x1ff161(0x194))||'4.0',_0x399b7b=(localStorage[_0x1ff161(0x199)](gameName+_0x1ff161(0x186))||'warm')[_0x1ff161(0x15c)]();if(!lut64||lut64Streng!==_0x1eea99||lut64Profile!==_0x399b7b){const _0x5f0e5c=_0x1ff161(0x15f)+_0x399b7b+'_'+_0x1eea99+_0x1ff161(0x187);console[_0x1ff161(0x170)](_0x5f0e5c);const _0x154658=await fetch(_0x5f0e5c),_0x375365=await _0x154658[_0x1ff161(0x18e)]();lut64=new Uint8Array(_0x375365),lut64Streng=_0x1eea99,lut64Profile=_0x399b7b;}}async function loadShaderSource(_0x30d164){const _0x20c5f4=await fetch(_0x30d164);return await _0x20c5f4['text']();}function setupStyle(_0x360b10){const _0x13048d=a0_0x3e7409;clientWidth=document[_0x13048d(0x165)][_0x13048d(0x141)];const _0x3daee9=window['devicePixelRatio'];systemType===_0x13048d(0x198)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x13048d(0x177)](clientWidth*_0x3daee9/gameWidth),localStorage[_0x13048d(0x16a)](_0x13048d(0x160),_0x13048d(0x158)+gameWidth*(integerScaling/_0x3daee9)+','+gameHeight*(integerScaling/_0x3daee9))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x3daee9/gameWidth),localStorage[_0x13048d(0x16a)]('screenSize',_0x13048d(0x158)+gameWidth*(integerScaling/_0x3daee9)+','+gameHeight*(integerScaling/_0x3daee9)));if(_0x360b10==='2d')bufferCanvas[_0x13048d(0x175)]=gameWidth,bufferCanvas[_0x13048d(0x185)]=gameHeight,bufferCanvas[_0x13048d(0x19d)][_0x13048d(0x182)]=''+integerScaling/_0x3daee9,bufferCanvas[_0x13048d(0x19d)][_0x13048d(0x178)]='crisp-edges',canvasContainer[_0x13048d(0x19d)]['width']=gameWidth*(integerScaling/_0x3daee9)+'px',canvasContainer[_0x13048d(0x19d)][_0x13048d(0x185)]=gameHeight*(integerScaling/_0x3daee9)+'px',textured['style']['width']=gameWidth*(integerScaling/_0x3daee9)+'px',textured[_0x13048d(0x19d)][_0x13048d(0x185)]=gameHeight*(integerScaling/_0x3daee9)+'px',imgShader['style']['transform']='scale('+integerScaling/_0x3daee9/upscaleShader+')',settingContainer['forEach'](function(_0x171833){const _0x5ced7d=_0x13048d;_0x171833[_0x5ced7d(0x19d)][_0x5ced7d(0x175)]=gameWidth*(integerScaling/_0x3daee9)+'px',_0x171833[_0x5ced7d(0x19d)][_0x5ced7d(0x185)]=gameHeight*(integerScaling/_0x3daee9)+'px';}),messageContainer[_0x13048d(0x17a)](function(_0x15d8c2){const _0x24f4e1=_0x13048d;_0x15d8c2['style']['width']=gameWidth+'px',_0x15d8c2[_0x24f4e1(0x19d)][_0x24f4e1(0x185)]=gameHeight+'px',_0x15d8c2[_0x24f4e1(0x19d)][_0x24f4e1(0x182)]=''+integerScaling/_0x3daee9;}),stateTitle[_0x13048d(0x17a)](function(_0x520bcf){const _0x1a9036=_0x13048d;_0x520bcf[_0x1a9036(0x19f)][_0x1a9036(0x19b)](_0x1a9036(0x150));});else _0x360b10==='webgl2'&&(bufferCanvas[_0x13048d(0x175)]=clientWidth*upscaleFactor,bufferCanvas[_0x13048d(0x185)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x13048d(0x182)]=''+0x1/upscaleFactor,bufferCanvas['style'][_0x13048d(0x178)]='',canvasContainer['style'][_0x13048d(0x175)]=clientWidth+'px',canvasContainer['style'][_0x13048d(0x185)]=clientWidth*(gameHeight/gameWidth)+'px',textured['style'][_0x13048d(0x175)]=clientWidth+'px',textured[_0x13048d(0x19d)][_0x13048d(0x185)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style'][_0x13048d(0x140)]=_0x13048d(0x17f)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x13048d(0x17a)](function(_0x46cc56){const _0x1ba8ab=_0x13048d;_0x46cc56['style'][_0x1ba8ab(0x175)]=clientWidth+'px',_0x46cc56[_0x1ba8ab(0x19d)][_0x1ba8ab(0x185)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x13048d(0x17a)](function(_0x2786cb){const _0x474fc0=_0x13048d;_0x2786cb[_0x474fc0(0x19d)][_0x474fc0(0x175)]=gameWidth+'px',_0x2786cb[_0x474fc0(0x19d)]['height']=gameHeight+'px',_0x2786cb['style']['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x13048d(0x17a)](function(_0x432d9a){const _0x2af4d3=_0x13048d;_0x432d9a[_0x2af4d3(0x19f)][_0x2af4d3(0x153)]('fefs');}));imgShader[_0x13048d(0x19d)][_0x13048d(0x175)]=gameWidth*upscaleShader+'px',imgShader[_0x13048d(0x19d)][_0x13048d(0x185)]=gameHeight*upscaleShader+'px',imgShader[_0x13048d(0x19d)][_0x13048d(0x147)]=_0x13048d(0x174),imgShader[_0x13048d(0x19d)][_0x13048d(0x19e)](_0x13048d(0x193),upscaleShader+_0x13048d(0x176)+upscaleShader+'px');}function setupWebGL(){const _0x56b038=a0_0x3e7409;gl=bufferCanvas['getContext'](_0x56b038(0x13e));if(!gl)return console[_0x56b038(0x13c)](_0x56b038(0x17d)),null;gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x56b038(0x185)]);}function createShader(_0x342190,_0x5ebf79){const _0x45d801=a0_0x3e7409,_0x4a3ea3=gl[_0x45d801(0x14f)](_0x342190);gl[_0x45d801(0x196)](_0x4a3ea3,_0x5ebf79),gl[_0x45d801(0x157)](_0x4a3ea3);if(!gl['getShaderParameter'](_0x4a3ea3,gl[_0x45d801(0x16b)]))return console['error'](gl[_0x45d801(0x1a1)](_0x4a3ea3)),gl['deleteShader'](_0x4a3ea3),null;return _0x4a3ea3;}async function setupShaders(){const _0x467eff=a0_0x3e7409,_0x3e0bc1=await loadShaderSource(_0x467eff(0x161)),_0x584401=await loadShaderSource(_0x467eff(0x19a)),_0x4a85f9=createShader(gl[_0x467eff(0x163)],_0x3e0bc1),_0x3981ce=createShader(gl['FRAGMENT_SHADER'],_0x584401);return program=gl[_0x467eff(0x17c)](),gl[_0x467eff(0x181)](program,_0x4a85f9),gl[_0x467eff(0x181)](program,_0x3981ce),gl['linkProgram'](program),gl['useProgram'](program),program;}function setupTexture(){const _0x5c4798=a0_0x3e7409;texture=gl[_0x5c4798(0x169)](),gl[_0x5c4798(0x144)](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x5c4798(0x13f)],gl[_0x5c4798(0x183)]),gl[_0x5c4798(0x146)](gl[_0x5c4798(0x16e)],gl[_0x5c4798(0x1a2)],gl[_0x5c4798(0x183)]),gl[_0x5c4798(0x146)](gl[_0x5c4798(0x16e)],gl[_0x5c4798(0x15b)],gl['CLAMP_TO_EDGE']),gl['texParameteri'](gl[_0x5c4798(0x16e)],gl[_0x5c4798(0x190)],gl['CLAMP_TO_EDGE']),gl[_0x5c4798(0x14e)](gl['getUniformLocation'](program,_0x5c4798(0x1a3)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x5c4798(0x171)](program,_0x5c4798(0x18c)),gl[_0x5c4798(0x14d)]['width'],gl['canvas'][_0x5c4798(0x185)]),gl[_0x5c4798(0x192)](gl['getUniformLocation'](program,_0x5c4798(0x154)),gameWidth/gl[_0x5c4798(0x14d)][_0x5c4798(0x175)]),gl['uniform1f'](gl['getUniformLocation'](program,_0x5c4798(0x19c)),gameHeight/gl[_0x5c4798(0x14d)][_0x5c4798(0x185)]);}function a0_0x368b(){const _0x4c0d12=['img-shader','error','FLOAT','webgl2','TEXTURE_MIN_FILTER','transform','clientWidth','UNSIGNED_BYTE','textured','bindTexture','180kcikkg','texParameteri','transformOrigin','vertexAttribPointer','.message-container','clear','then','COLOR_BUFFER_BIT','canvas','uniform2f','createShader','fefs','ARRAY_BUFFER','canvas-container','add','smooth_width','drawImage','RGBA','compileShader','0,0,','240HAFXlr','220VDAxNF','TEXTURE_WRAP_S','toLowerCase','createBuffer','getElementById','./src/lut/lut64_','screenSize','./src/shaders/vertexShader.glsl','getAttribLocation','VERTEX_SHADER','getContext','documentElement','1485620wglybL','enableVertexAttribArray','position','createTexture','setItem','COMPILE_STATUS','texImage2D','imageSmoothingEnabled','TEXTURE_2D','getPixelData','log','getUniformLocation','1932PKkzWC','384lnizuO','top\x20center','width','px\x20','floor','imageRendering','642285LNoGcC','forEach','107928XmruEJ','createProgram','WebGL2\x20not\x20supported','bufferData','scale(','12DmocBN','attachShader','zoom','NEAREST','.setting-container','height','_temperature','.bin','TRIANGLE_STRIP','2660105QMjFxd','974633AhIBWT','drawArrays','render_size','bindBuffer','arrayBuffer','texcoord','TEXTURE_WRAP_T','DOMContentLoaded','uniform1f','--bg-size','_streng','querySelectorAll','shaderSource','4572xhuTUe','gbc','getItem','./src/shaders/fragmentShader.glsl','remove','smooth_height','style','setProperty','classList','STATIC_DRAW','getShaderInfoLog','TEXTURE_MAG_FILTER','game_size'];a0_0x368b=function(){return _0x4c0d12;};return a0_0x368b();}function setupBuffers(){const _0x4fc75e=a0_0x3e7409,_0x3b8130=gl[_0x4fc75e(0x15d)]();gl[_0x4fc75e(0x18d)](gl[_0x4fc75e(0x151)],_0x3b8130),gl[_0x4fc75e(0x17e)](gl[_0x4fc75e(0x151)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x4fc75e(0x1a0)]);const _0x5d2969=gl['getAttribLocation'](program,_0x4fc75e(0x168));gl['enableVertexAttribArray'](_0x5d2969),gl[_0x4fc75e(0x148)](_0x5d2969,0x2,gl[_0x4fc75e(0x13d)],![],0x0,0x0);const _0xc9a663=gl[_0x4fc75e(0x15d)]();gl[_0x4fc75e(0x18d)](gl['ARRAY_BUFFER'],_0xc9a663),gl[_0x4fc75e(0x17e)](gl[_0x4fc75e(0x151)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4fc75e(0x1a0)]);const _0x59bfc8=gl[_0x4fc75e(0x162)](program,_0x4fc75e(0x18f));gl[_0x4fc75e(0x167)](_0x59bfc8),gl['vertexAttribPointer'](_0x59bfc8,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0x2facaf){const _0x4321f3=a0_0x3e7409,_0x3af69f=a0_0x2e7a21[_0x4321f3(0x16f)]();if(!_0x3af69f)return;await loadLUT64();const _0x229fa5=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2daa72=0x0;_0x2daa72<gameHeight;_0x2daa72++){for(let _0x5ed75e=0x0;_0x5ed75e<gameWidth;_0x5ed75e++){const _0x270e50=_0x2daa72*gameStride+_0x5ed75e,_0x1bf23b=(_0x2daa72*gameWidth+_0x5ed75e)*0x4,_0x23cc66=_0x3af69f[_0x270e50],_0xe04bd4=(_0x23cc66&0xff)>>0x2,_0x67a791=(_0x23cc66>>0x8&0xff)>>0x2,_0x5d7573=(_0x23cc66>>0x10&0xff)>>0x2,_0x1c0463=(_0xe04bd4*0x40*0x40+_0x67a791*0x40+_0x5d7573)*0x3;_0x229fa5[_0x1bf23b]=lut64[_0x1c0463],_0x229fa5[_0x1bf23b+0x1]=lut64[_0x1c0463+0x1],_0x229fa5[_0x1bf23b+0x2]=lut64[_0x1c0463+0x2],_0x229fa5[_0x1bf23b+0x3]=0xff;}}if(_0x2facaf===_0x4321f3(0x13e))gl[_0x4321f3(0x144)](gl[_0x4321f3(0x16e)],texture),gl[_0x4321f3(0x16c)](gl[_0x4321f3(0x16e)],0x0,gl[_0x4321f3(0x156)],gameWidth,gameHeight,0x0,gl[_0x4321f3(0x156)],gl[_0x4321f3(0x142)],_0x229fa5),gl[_0x4321f3(0x14a)](gl[_0x4321f3(0x14c)]),gl[_0x4321f3(0x18b)](gl[_0x4321f3(0x188)],0x0,0x4);else{if(_0x2facaf==='2d'){ctx2d=bufferCanvas[_0x4321f3(0x164)]('2d'),ctx2d[_0x4321f3(0x16d)]=![];const _0x227dbb=new ImageData(_0x229fa5,gameWidth,gameHeight);createImageBitmap(_0x227dbb)[_0x4321f3(0x14b)](_0x43695a=>{const _0x11652b=_0x4321f3;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x11652b(0x175)],bufferCanvas[_0x11652b(0x185)]),ctx2d[_0x11652b(0x155)](_0x43695a,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x2facaf));}export async function switchRenderMode(_0x5768a0){const _0x4e874b=a0_0x3e7409;systemType=gameName['slice'](-0x3);if(_0x5768a0==='2d')setupStyle('2d'),renderPixel('2d');else _0x5768a0===_0x4e874b(0x13e)&&(setupStyle(_0x4e874b(0x13e)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x4e874b(0x13e)));}document['addEventListener'](a0_0x3e7409(0x191),function(){});