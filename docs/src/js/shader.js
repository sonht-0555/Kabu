(function(_0x2bf8e4,_0x19ad60){const _0x3236e0=a0_0x1097,_0x532a03=_0x2bf8e4();while(!![]){try{const _0x55001c=parseInt(_0x3236e0(0x11f))/0x1*(-parseInt(_0x3236e0(0x10f))/0x2)+parseInt(_0x3236e0(0x121))/0x3+-parseInt(_0x3236e0(0xe5))/0x4+-parseInt(_0x3236e0(0x113))/0x5+-parseInt(_0x3236e0(0x105))/0x6*(-parseInt(_0x3236e0(0x111))/0x7)+parseInt(_0x3236e0(0xfe))/0x8+parseInt(_0x3236e0(0x101))/0x9;if(_0x55001c===_0x19ad60)break;else _0x532a03['push'](_0x532a03['shift']());}catch(_0x54ff20){_0x532a03['push'](_0x532a03['shift']());}}}(a0_0x5d0c,0x8e715));function a0_0x5d0c(){const _0xd26341=['render_size','FLOAT','then','position','drawArrays','texParameteri','webgl_full','vertexAttribPointer','bindTexture','4.0','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','bufferData','getUniformLocation','clear','ARRAY_BUFFER','FRAGMENT_SHADER','smooth_height','useProgram','uniform2f','7007496pzvMYt','warm','webgl','6579621ehFAYE','TEXTURE_WRAP_T','low-power','clearRect','192nxWycU','VERTEX_SHADER','.bin','TRIANGLE_STRIP','TEXTURE_2D','TEXTURE_WRAP_S','TEXTURE_MIN_FILTER','attachShader','height','NEAREST','70228eCuMwB','TEXTURE_MAG_FILTER','229145axLDLJ','game_size','853370VZOCfn','_streng','drawImage','getItem','imageSmoothingEnabled','UNSIGNED_BYTE','createBuffer','log','linkProgram','enableVertexAttribArray','texcoord','CLAMP_TO_EDGE','28Gqdwoc','width','349362beBDlm','./src/lut/lut64_','getContext','toLowerCase','bindBuffer','canvas','STATIC_DRAW','4134676jfrIBV','createProgram','slice','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','viewport','getAttribLocation'];a0_0x5d0c=function(){return _0xd26341;};return a0_0x5d0c();}import*as a0_0x1cf509 from'./main.js';function a0_0x1097(_0x19f777,_0x5421d8){const _0x5d0c03=a0_0x5d0c();return a0_0x1097=function(_0x10973e,_0x4c874f){_0x10973e=_0x10973e-0xe1;let _0x24296e=_0x5d0c03[_0x10973e];return _0x24296e;},a0_0x1097(_0x19f777,_0x5421d8);}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x453e4e=a0_0x1097;systemType=gameName[_0x453e4e(0xe7)](-0x3);const _0x17e8ec=localStorage[_0x453e4e(0x116)](gameName+_0x453e4e(0x114))||_0x453e4e(0xf4),_0xa06170=(localStorage[_0x453e4e(0x116)](gameName+'_temperature')||_0x453e4e(0xff))[_0x453e4e(0xe1)]();if(!lut64||lut64Streng!==_0x17e8ec||lut64Profile!==_0xa06170){const _0x3eea74=_0x453e4e(0x122)+_0xa06170+'_'+_0x17e8ec+_0x453e4e(0x107);console[_0x453e4e(0x11a)](_0x3eea74);const _0x206caf=await fetch(_0x3eea74),_0x5c65e3=await _0x206caf['arrayBuffer']();lut64=new Uint8Array(_0x5c65e3),lut64Streng=_0x17e8ec,lut64Profile=_0xa06170;}}function setupWebGL_Shader(_0xfc4c4b){const _0x36018d=a0_0x1097;gl=bufferCanvas['getContext']('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x36018d(0x103)}),gl[_0x36018d(0xe9)](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']);function _0xa2b650(_0x971bdf,_0x4859d9){const _0x1d6179=gl['createShader'](_0x971bdf);return gl['shaderSource'](_0x1d6179,_0x4859d9),gl['compileShader'](_0x1d6179),_0x1d6179;}vs=_0x36018d(0xe8);if(_0xfc4c4b===_0x36018d(0x100))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0xfc4c4b==='webgl_full'&&(fs=_0x36018d(0xf5));const _0x51c093=_0xa2b650(gl[_0x36018d(0x106)],vs),_0x5cbe31=_0xa2b650(gl[_0x36018d(0xfa)],fs);return program=gl[_0x36018d(0xe6)](),gl[_0x36018d(0x10c)](program,_0x51c093),gl[_0x36018d(0x10c)](program,_0x5cbe31),gl[_0x36018d(0x11b)](program),gl[_0x36018d(0xfc)](program),program;}function setupTexture_Buffer(_0x3afdb0){const _0x142d90=a0_0x1097;texture=gl['createTexture'](),gl[_0x142d90(0xf3)](gl[_0x142d90(0x109)],texture),gl[_0x142d90(0xf0)](gl['TEXTURE_2D'],gl[_0x142d90(0x10b)],gl[_0x142d90(0x10e)]),gl[_0x142d90(0xf0)](gl[_0x142d90(0x109)],gl[_0x142d90(0x110)],gl['NEAREST']),gl[_0x142d90(0xf0)](gl[_0x142d90(0x109)],gl[_0x142d90(0x10a)],gl[_0x142d90(0x11e)]),gl[_0x142d90(0xf0)](gl['TEXTURE_2D'],gl[_0x142d90(0x102)],gl['CLAMP_TO_EDGE']);_0x3afdb0==='webgl_full'&&(gl['uniform2f'](gl['getUniformLocation'](program,_0x142d90(0x112)),gameWidth,gameHeight),gl[_0x142d90(0xfd)](gl[_0x142d90(0xf7)](program,_0x142d90(0xeb)),gl[_0x142d90(0xe3)][_0x142d90(0x120)],gl[_0x142d90(0xe3)][_0x142d90(0x10d)]),gl['uniform1f'](gl[_0x142d90(0xf7)](program,'smooth_width'),gameWidth/gl[_0x142d90(0xe3)][_0x142d90(0x120)]),gl['uniform1f'](gl[_0x142d90(0xf7)](program,_0x142d90(0xfb)),gameHeight/gl['canvas'][_0x142d90(0x10d)]));const _0x3a87ae=gl[_0x142d90(0x119)]();gl[_0x142d90(0xe2)](gl[_0x142d90(0xf9)],_0x3a87ae),gl[_0x142d90(0xf6)](gl[_0x142d90(0xf9)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x142d90(0xe4)]),gl['vertexAttribPointer'](gl['getAttribLocation'](program,_0x142d90(0xee)),0x2,gl[_0x142d90(0xec)],![],0x0,0x0),gl[_0x142d90(0x11c)](gl['getAttribLocation'](program,_0x142d90(0xee)));const _0x541332=gl['createBuffer']();gl['bindBuffer'](gl[_0x142d90(0xf9)],_0x541332),gl['bufferData'](gl[_0x142d90(0xf9)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x142d90(0xe4)]),gl[_0x142d90(0xf2)](gl[_0x142d90(0xea)](program,'texcoord'),0x2,gl[_0x142d90(0xec)],![],0x0,0x0),gl[_0x142d90(0x11c)](gl['getAttribLocation'](program,_0x142d90(0x11d)));}function setup2DContext(){const _0x13bc66=a0_0x1097;ctx2d=bufferCanvas[_0x13bc66(0x123)]('2d'),ctx2d[_0x13bc66(0x117)]=![];}async function renderPixel(_0x4c4033){const _0x923d1=a0_0x1097,_0x5e0fc0=a0_0x1cf509['getPixelData']();if(!_0x5e0fc0)return;await loadLUT64();const _0x1443fa=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0xda76ce=0x0;_0xda76ce<gameHeight;_0xda76ce++){for(let _0x3e6c5a=0x0;_0x3e6c5a<gameWidth;_0x3e6c5a++){const _0x468ba7=_0xda76ce*gameStride+_0x3e6c5a,_0x540d76=(_0xda76ce*gameWidth+_0x3e6c5a)*0x4,_0x150ad3=_0x5e0fc0[_0x468ba7],_0x1ce230=(_0x150ad3&0xff)>>0x2,_0x5eb158=(_0x150ad3>>0x8&0xff)>>0x2,_0x457886=(_0x150ad3>>0x10&0xff)>>0x2,_0x2890cc=(_0x1ce230*0x40*0x40+_0x5eb158*0x40+_0x457886)*0x3;_0x1443fa[_0x540d76]=lut64[_0x2890cc],_0x1443fa[_0x540d76+0x1]=lut64[_0x2890cc+0x1],_0x1443fa[_0x540d76+0x2]=lut64[_0x2890cc+0x2],_0x1443fa[_0x540d76+0x3]=0xff;}}if(_0x4c4033===_0x923d1(0x100))gl['texImage2D'](gl[_0x923d1(0x109)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x923d1(0x118)],_0x1443fa),gl[_0x923d1(0xf8)](gl['COLOR_BUFFER_BIT']),gl[_0x923d1(0xef)](gl[_0x923d1(0x108)],0x0,0x4);else _0x4c4033==='2d'&&(imageDataObj=new ImageData(_0x1443fa,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x923d1(0xed)](_0x42eaeb=>{const _0x39c013=_0x923d1;ctx2d[_0x39c013(0x104)](0x0,0x0,bufferCanvas[_0x39c013(0x120)],bufferCanvas['height']),ctx2d[_0x39c013(0x115)](_0x42eaeb,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x4c4033));}export async function switchRenderMode(_0x772ac3){const _0x3c367c=a0_0x1097;systemType=gameName[_0x3c367c(0xe7)](-0x3);if(_0x772ac3==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x772ac3==='webgl')setupStyle('2d'),setupWebGL_Shader(_0x3c367c(0x100)),setupTexture_Buffer('webgl'),renderPixel('webgl');else _0x772ac3===_0x3c367c(0xf1)&&(setupStyle(_0x3c367c(0xf1)),setupWebGL_Shader(_0x3c367c(0xf1)),setupTexture_Buffer(_0x3c367c(0xf1)),renderPixel('webgl'));}}