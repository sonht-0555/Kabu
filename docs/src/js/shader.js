(function(_0x4c2b96,_0x312849){const _0x1b2d26=a0_0xc29f,_0x12a177=_0x4c2b96();while(!![]){try{const _0x226594=parseInt(_0x1b2d26(0x138))/0x1*(-parseInt(_0x1b2d26(0x16b))/0x2)+-parseInt(_0x1b2d26(0x139))/0x3*(parseInt(_0x1b2d26(0x166))/0x4)+parseInt(_0x1b2d26(0x165))/0x5+-parseInt(_0x1b2d26(0x15e))/0x6*(parseInt(_0x1b2d26(0x162))/0x7)+-parseInt(_0x1b2d26(0x15f))/0x8+parseInt(_0x1b2d26(0x149))/0x9*(-parseInt(_0x1b2d26(0x156))/0xa)+parseInt(_0x1b2d26(0x14e))/0xb;if(_0x226594===_0x312849)break;else _0x12a177['push'](_0x12a177['shift']());}catch(_0x45f04f){_0x12a177['push'](_0x12a177['shift']());}}}(a0_0xdd57,0x33181));import*as a0_0x1976fa from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x2128a4=a0_0xc29f;systemType=gameName['slice'](-0x3);const _0x577fd0=(localStorage['getItem'](gameName+'_temperature')||'none')['toLowerCase']();if(!lut64||lut64Profile!==_0x577fd0){const _0x9f63aa='./src/lut/lut64_'+_0x577fd0+'_4.0.bin';console['log'](_0x9f63aa);const _0x467e0c=await fetch(_0x9f63aa),_0xbae652=await _0x467e0c[_0x2128a4(0x154)]();lut64=new Uint8Array(_0xbae652),lut64Profile=_0x577fd0;}}function setupWebGL_Shader(_0xc9a72c){const _0x2d9c56=a0_0xc29f;gl=bufferCanvas['getContext'](_0x2d9c56(0x145),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x2d9c56(0x16a)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x2d9c56(0x16d)],bufferCanvas[_0x2d9c56(0x14b)]);function _0x300e8d(_0x56f4cf,_0x163f63){const _0x436abb=_0x2d9c56,_0x8cd678=gl[_0x436abb(0x170)](_0x56f4cf);return gl[_0x436abb(0x15a)](_0x8cd678,_0x163f63),gl[_0x436abb(0x159)](_0x8cd678),_0x8cd678;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0xc9a72c===_0x2d9c56(0x145))fs=_0x2d9c56(0x16e);else _0xc9a72c===_0x2d9c56(0x147)&&(fs=_0x2d9c56(0x16f));const _0xcc623f=_0x300e8d(gl[_0x2d9c56(0x173)],vs),_0x59e372=_0x300e8d(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x2d9c56(0x150)](),gl[_0x2d9c56(0x146)](program,_0xcc623f),gl['attachShader'](program,_0x59e372),gl[_0x2d9c56(0x15b)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x494a54){const _0x25fda8=a0_0xc29f;texture=gl[_0x25fda8(0x16c)](),gl[_0x25fda8(0x15d)](gl[_0x25fda8(0x161)],texture),gl[_0x25fda8(0x164)](gl[_0x25fda8(0x161)],gl[_0x25fda8(0x13b)],gl[_0x25fda8(0x13a)]),gl[_0x25fda8(0x164)](gl[_0x25fda8(0x161)],gl['TEXTURE_MAG_FILTER'],gl[_0x25fda8(0x13a)]),gl[_0x25fda8(0x164)](gl[_0x25fda8(0x161)],gl['TEXTURE_WRAP_S'],gl[_0x25fda8(0x15c)]),gl[_0x25fda8(0x164)](gl[_0x25fda8(0x161)],gl[_0x25fda8(0x158)],gl[_0x25fda8(0x15c)]);_0x494a54===_0x25fda8(0x147)&&(gl['uniform2f'](gl[_0x25fda8(0x163)](program,_0x25fda8(0x167)),gameWidth,gameHeight),gl[_0x25fda8(0x168)](gl[_0x25fda8(0x163)](program,'render_size'),gl[_0x25fda8(0x13c)][_0x25fda8(0x16d)],gl[_0x25fda8(0x13c)][_0x25fda8(0x14b)]),gl[_0x25fda8(0x174)](gl[_0x25fda8(0x163)](program,_0x25fda8(0x141)),gameWidth/gl['canvas']['width']),gl[_0x25fda8(0x174)](gl['getUniformLocation'](program,'smooth_height'),gameHeight/gl[_0x25fda8(0x13c)]['height']));const _0x15268b=gl[_0x25fda8(0x153)]();gl[_0x25fda8(0x144)](gl[_0x25fda8(0x171)],_0x15268b),gl[_0x25fda8(0x143)](gl[_0x25fda8(0x171)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x25fda8(0x142)]),gl[_0x25fda8(0x160)](gl[_0x25fda8(0x151)](program,_0x25fda8(0x13e)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x25fda8(0x172)](gl[_0x25fda8(0x151)](program,_0x25fda8(0x13e)));const _0x3592c6=gl['createBuffer']();gl[_0x25fda8(0x144)](gl[_0x25fda8(0x171)],_0x3592c6),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x25fda8(0x142)]),gl['vertexAttribPointer'](gl[_0x25fda8(0x151)](program,_0x25fda8(0x137)),0x2,gl[_0x25fda8(0x152)],![],0x0,0x0),gl[_0x25fda8(0x172)](gl[_0x25fda8(0x151)](program,_0x25fda8(0x137)));}function setup2DContext(){ctx2d=bufferCanvas['getContext']('2d'),ctx2d['imageSmoothingEnabled']=![];}function a0_0xc29f(_0x1e6908,_0x523082){const _0xdd5728=a0_0xdd57();return a0_0xc29f=function(_0xc29f95,_0x162d8f){_0xc29f95=_0xc29f95-0x137;let _0xb8e20d=_0xdd5728[_0xc29f95];return _0xb8e20d;},a0_0xc29f(_0x1e6908,_0x523082);}async function renderPixel(_0x850fa5){const _0x4f677e=a0_0xc29f,_0x2eb7be=a0_0x1976fa[_0x4f677e(0x14f)]();if(!_0x2eb7be)return;await loadLUT64();const _0x420951=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x39e9cc=0x0;_0x39e9cc<gameHeight;_0x39e9cc++){for(let _0x4e18ee=0x0;_0x4e18ee<gameWidth;_0x4e18ee++){const _0x5ee9ff=_0x39e9cc*gameStride+_0x4e18ee,_0x25f19b=(_0x39e9cc*gameWidth+_0x4e18ee)*0x4,_0x940112=_0x2eb7be[_0x5ee9ff];if(lut64Profile===_0x4f677e(0x148))_0x420951[_0x25f19b]=_0x940112&0xff,_0x420951[_0x25f19b+0x1]=_0x940112>>0x8&0xff,_0x420951[_0x25f19b+0x2]=_0x940112>>0x10&0xff,_0x420951[_0x25f19b+0x3]=0xff;else{const _0x4eb2c2=(_0x940112&0xff)>>0x2,_0x59ef24=(_0x940112>>0x8&0xff)>>0x2,_0x2716c2=(_0x940112>>0x10&0xff)>>0x2,_0x4da9f3=(_0x4eb2c2*0x40*0x40+_0x59ef24*0x40+_0x2716c2)*0x3;_0x420951[_0x25f19b]=lut64[_0x4da9f3],_0x420951[_0x25f19b+0x1]=lut64[_0x4da9f3+0x1],_0x420951[_0x25f19b+0x2]=lut64[_0x4da9f3+0x2],_0x420951[_0x25f19b+0x3]=0xff;}}}if(_0x850fa5===_0x4f677e(0x145))gl[_0x4f677e(0x13f)](gl[_0x4f677e(0x161)],0x0,gl[_0x4f677e(0x14a)],gameWidth,gameHeight,0x0,gl[_0x4f677e(0x14a)],gl[_0x4f677e(0x13d)],_0x420951),gl[_0x4f677e(0x169)](gl[_0x4f677e(0x155)]),gl[_0x4f677e(0x140)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x850fa5==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x420951,gameWidth,gameHeight):imageDataObj[_0x4f677e(0x14d)]['set'](_0x420951),ctx2d[_0x4f677e(0x14c)](0x0,0x0,bufferCanvas[_0x4f677e(0x16d)],bufferCanvas['height']),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x850fa5));}export async function switchRenderMode(_0x3ba34a){const _0x52d8f5=a0_0xc29f;systemType=gameName[_0x52d8f5(0x157)](-0x3);if(_0x3ba34a==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x3ba34a===_0x52d8f5(0x145))setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(_0x52d8f5(0x145)),renderPixel(_0x52d8f5(0x145));else _0x3ba34a===_0x52d8f5(0x147)&&(setupStyle('webgl_full'),setupWebGL_Shader(_0x52d8f5(0x147)),setupTexture_Buffer('webgl_full'),renderPixel('webgl'));}}function a0_0xdd57(){const _0x3ac776=['position','texImage2D','drawArrays','smooth_width','STATIC_DRAW','bufferData','bindBuffer','webgl','attachShader','webgl_full','none','3082473tNlCwj','RGBA','height','clearRect','data','15489067WHCAht','getPixelData','createProgram','getAttribLocation','FLOAT','createBuffer','arrayBuffer','COLOR_BUFFER_BIT','10UySNKn','slice','TEXTURE_WRAP_T','compileShader','shaderSource','linkProgram','CLAMP_TO_EDGE','bindTexture','996612QoLRzI','1618688DDMpmk','vertexAttribPointer','TEXTURE_2D','7ccyuPw','getUniformLocation','texParameteri','358885nbwklJ','810332sMkNSu','game_size','uniform2f','clear','low-power','308984TAXIFW','createTexture','width','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','createShader','ARRAY_BUFFER','enableVertexAttribArray','VERTEX_SHADER','uniform1f','texcoord','1YBqQZg','6SWwcfZ','NEAREST','TEXTURE_MIN_FILTER','canvas','UNSIGNED_BYTE'];a0_0xdd57=function(){return _0x3ac776;};return a0_0xdd57();}