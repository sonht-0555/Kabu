(function(_0x140690,_0x3bf488){const _0xfb0450=a0_0x5337,_0x4c8713=_0x140690();while(!![]){try{const _0x1de110=-parseInt(_0xfb0450(0x12f))/0x1*(parseInt(_0xfb0450(0x101))/0x2)+parseInt(_0xfb0450(0xe8))/0x3+-parseInt(_0xfb0450(0xf8))/0x4*(-parseInt(_0xfb0450(0x115))/0x5)+parseInt(_0xfb0450(0xfe))/0x6*(parseInt(_0xfb0450(0x106))/0x7)+-parseInt(_0xfb0450(0x116))/0x8+-parseInt(_0xfb0450(0x12e))/0x9*(parseInt(_0xfb0450(0x121))/0xa)+parseInt(_0xfb0450(0xe7))/0xb*(parseInt(_0xfb0450(0xe5))/0xc);if(_0x1de110===_0x3bf488)break;else _0x4c8713['push'](_0x4c8713['shift']());}catch(_0x35a0d2){_0x4c8713['push'](_0x4c8713['shift']());}}}(a0_0x542d,0xeeb98));function a0_0x5337(_0x4caafd,_0x5d2be6){const _0x542d0f=a0_0x542d();return a0_0x5337=function(_0x53377b,_0x47c651){_0x53377b=_0x53377b-0xe5;let _0x362ede=_0x542d0f[_0x53377b];return _0x362ede;},a0_0x5337(_0x4caafd,_0x5d2be6);}import*as a0_0x1647be from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x267874=a0_0x5337;systemType=gameName['slice'](-0x3);const _0x509ede=(localStorage[_0x267874(0x122)](gameName+_0x267874(0x10e))||_0x267874(0xfa))[_0x267874(0x10b)]();if(!lut64||lut64Profile!==_0x509ede){const _0x3bfbf9=_0x267874(0x10a)+_0x509ede+_0x267874(0x118);console[_0x267874(0xed)](_0x3bfbf9);const _0x5c9f3b=await fetch(_0x3bfbf9),_0x3bce22=await _0x5c9f3b[_0x267874(0xee)]();lut64=new Uint8Array(_0x3bce22),lut64Profile=_0x509ede;}}function setupWebGL_Shader(_0x130efa){const _0x1c304b=a0_0x5337;gl=bufferCanvas[_0x1c304b(0x125)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x1c304b(0x104)}),gl[_0x1c304b(0xf6)](0x0,0x0,bufferCanvas[_0x1c304b(0xef)],bufferCanvas['height']);function _0x5e3858(_0x87bc50,_0x2255bc){const _0x395dd2=_0x1c304b,_0x6796c6=gl['createShader'](_0x87bc50);return gl[_0x395dd2(0x105)](_0x6796c6,_0x2255bc),gl[_0x395dd2(0xea)](_0x6796c6),_0x6796c6;}vs=_0x1c304b(0xf1);if(_0x130efa===_0x1c304b(0x110))fs=_0x1c304b(0xf2);else _0x130efa===_0x1c304b(0x10f)&&(fs=_0x1c304b(0xec));const _0x520226=_0x5e3858(gl[_0x1c304b(0x112)],vs),_0xd3bacd=_0x5e3858(gl['FRAGMENT_SHADER'],fs);return program=gl['createProgram'](),gl[_0x1c304b(0x117)](program,_0x520226),gl[_0x1c304b(0x117)](program,_0xd3bacd),gl[_0x1c304b(0x12a)](program),gl[_0x1c304b(0x10c)](program),program;}function setupTexture_Buffer(_0x471682){const _0x8d0f7b=a0_0x5337;texture=gl[_0x8d0f7b(0x100)](),gl[_0x8d0f7b(0x124)](gl[_0x8d0f7b(0x103)],texture),gl['texParameteri'](gl[_0x8d0f7b(0x103)],gl['TEXTURE_MIN_FILTER'],gl[_0x8d0f7b(0x102)]),gl[_0x8d0f7b(0x128)](gl[_0x8d0f7b(0x103)],gl[_0x8d0f7b(0x129)],gl[_0x8d0f7b(0x102)]),gl[_0x8d0f7b(0x128)](gl[_0x8d0f7b(0x103)],gl[_0x8d0f7b(0xf0)],gl[_0x8d0f7b(0xf9)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x8d0f7b(0x12c)],gl[_0x8d0f7b(0xf9)]);_0x471682===_0x8d0f7b(0x10f)&&(gl[_0x8d0f7b(0xf3)](gl[_0x8d0f7b(0xeb)](program,_0x8d0f7b(0x109)),gameWidth,gameHeight),gl[_0x8d0f7b(0xf3)](gl[_0x8d0f7b(0xeb)](program,_0x8d0f7b(0xe9)),gl[_0x8d0f7b(0xfd)]['width'],gl['canvas'][_0x8d0f7b(0x11b)]),gl[_0x8d0f7b(0x114)](gl[_0x8d0f7b(0xeb)](program,_0x8d0f7b(0x126)),gameWidth/gl[_0x8d0f7b(0xfd)][_0x8d0f7b(0xef)]),gl[_0x8d0f7b(0x114)](gl[_0x8d0f7b(0xeb)](program,_0x8d0f7b(0x11d)),gameHeight/gl[_0x8d0f7b(0xfd)][_0x8d0f7b(0x11b)]));const _0x2464b7=gl['createBuffer']();gl[_0x8d0f7b(0x127)](gl[_0x8d0f7b(0x113)],_0x2464b7),gl[_0x8d0f7b(0x12d)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x8d0f7b(0x107)](gl['getAttribLocation'](program,_0x8d0f7b(0xf7)),0x2,gl[_0x8d0f7b(0xff)],![],0x0,0x0),gl[_0x8d0f7b(0x11f)](gl[_0x8d0f7b(0x10d)](program,_0x8d0f7b(0xf7)));const _0x150e82=gl[_0x8d0f7b(0x111)]();gl['bindBuffer'](gl[_0x8d0f7b(0x113)],_0x150e82),gl[_0x8d0f7b(0x12d)](gl[_0x8d0f7b(0x113)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x8d0f7b(0x12b)]),gl[_0x8d0f7b(0x107)](gl['getAttribLocation'](program,_0x8d0f7b(0xf5)),0x2,gl[_0x8d0f7b(0xff)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x8d0f7b(0x10d)](program,_0x8d0f7b(0xf5)));}function setup2DContext(){const _0x2a879b=a0_0x5337;ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x2a879b(0x108)]=![];}async function renderPixel(_0x391c3d){const _0x247b15=a0_0x5337,_0x154903=a0_0x1647be[_0x247b15(0x11a)]();if(!_0x154903)return;await loadLUT64();const _0x49aa30=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x4aad08=0x0;_0x4aad08<gameHeight;_0x4aad08++){for(let _0x12cfbc=0x0;_0x12cfbc<gameWidth;_0x12cfbc++){const _0x11cf41=_0x4aad08*gameStride+_0x12cfbc,_0x41607a=(_0x4aad08*gameWidth+_0x12cfbc)*0x4,_0x767806=_0x154903[_0x11cf41];if(lut64Profile===_0x247b15(0xfa))_0x49aa30[_0x41607a]=_0x767806&0xff,_0x49aa30[_0x41607a+0x1]=_0x767806>>0x8&0xff,_0x49aa30[_0x41607a+0x2]=_0x767806>>0x10&0xff,_0x49aa30[_0x41607a+0x3]=0xff;else{const _0x62b404=(_0x767806&0xff)>>0x2,_0x57268a=(_0x767806>>0x8&0xff)>>0x2,_0x3d5bae=(_0x767806>>0x10&0xff)>>0x2,_0x4b60a1=(_0x62b404*0x40*0x40+_0x57268a*0x40+_0x3d5bae)*0x3;_0x49aa30[_0x41607a]=lut64[_0x4b60a1],_0x49aa30[_0x41607a+0x1]=lut64[_0x4b60a1+0x1],_0x49aa30[_0x41607a+0x2]=lut64[_0x4b60a1+0x2],_0x49aa30[_0x41607a+0x3]=0xff;}}}if(_0x391c3d==='webgl')gl[_0x247b15(0x123)](gl[_0x247b15(0x103)],0x0,gl[_0x247b15(0x11e)],gameWidth,gameHeight,0x0,gl[_0x247b15(0x11e)],gl['UNSIGNED_BYTE'],_0x49aa30),gl[_0x247b15(0xfb)](gl[_0x247b15(0xfc)]),gl[_0x247b15(0x120)](gl[_0x247b15(0xe6)],0x0,0x4);else _0x391c3d==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x49aa30,gameWidth,gameHeight):imageDataObj['data'][_0x247b15(0xf4)](_0x49aa30),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x247b15(0xef)],bufferCanvas[_0x247b15(0x11b)]),ctx2d[_0x247b15(0x119)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x391c3d));}export async function switchRenderMode(_0x4327b6){const _0x2f5950=a0_0x5337;systemType=gameName[_0x2f5950(0x11c)](-0x3);if(_0x4327b6==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x4327b6===_0x2f5950(0x110))setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(_0x2f5950(0x110)),renderPixel(_0x2f5950(0x110));else _0x4327b6===_0x2f5950(0x10f)&&(setupStyle(_0x2f5950(0x10f)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x2f5950(0x10f)),renderPixel(_0x2f5950(0x110)));}}function a0_0x542d(){const _0x83b7e7=['render_size','compileShader','getUniformLocation','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','log','arrayBuffer','width','TEXTURE_WRAP_S','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','uniform2f','set','texcoord','viewport','position','819708pRzIog','CLAMP_TO_EDGE','none','clear','COLOR_BUFFER_BIT','canvas','443160BNdKSd','FLOAT','createTexture','1462BbXLEs','NEAREST','TEXTURE_2D','low-power','shaderSource','161OqHUWt','vertexAttribPointer','imageSmoothingEnabled','game_size','./src/lut/lut64_','toLowerCase','useProgram','getAttribLocation','_temperature','webgl_full','webgl','createBuffer','VERTEX_SHADER','ARRAY_BUFFER','uniform1f','5MoRvwe','14019176anyIeU','attachShader','_4.0.bin','putImageData','getPixelData','height','slice','smooth_height','RGBA','enableVertexAttribArray','drawArrays','70HvNfZI','getItem','texImage2D','bindTexture','getContext','smooth_width','bindBuffer','texParameteri','TEXTURE_MAG_FILTER','linkProgram','STATIC_DRAW','TEXTURE_WRAP_T','bufferData','179127UXCKDZ','241LugKDh','36EAXhOg','TRIANGLE_STRIP','344806kfGkFb','3143880OnmtWk'];a0_0x542d=function(){return _0x83b7e7;};return a0_0x542d();}