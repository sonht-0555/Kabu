const a0_0x5e7316=a0_0x6168;(function(_0xcf79ed,_0x9c3b2b){const _0x24d7b3=a0_0x6168,_0x30f891=_0xcf79ed();while(!![]){try{const _0x2418d3=-parseInt(_0x24d7b3(0xf3))/0x1*(parseInt(_0x24d7b3(0x108))/0x2)+parseInt(_0x24d7b3(0x12c))/0x3*(-parseInt(_0x24d7b3(0x147))/0x4)+-parseInt(_0x24d7b3(0x10f))/0x5+-parseInt(_0x24d7b3(0x117))/0x6+parseInt(_0x24d7b3(0x109))/0x7+-parseInt(_0x24d7b3(0x10c))/0x8+parseInt(_0x24d7b3(0x12b))/0x9;if(_0x2418d3===_0x9c3b2b)break;else _0x30f891['push'](_0x30f891['shift']());}catch(_0xe977fe){_0x30f891['push'](_0x30f891['shift']());}}}(a0_0x33e9,0xd4894));import*as a0_0x257f40 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x5e7316(0x122)]('textured'),bufferCanvas=document[a0_0x5e7316(0x122)](a0_0x5e7316(0xfa)),canvasContainer=document['getElementById']('canvas-container'),imgShader=document[a0_0x5e7316(0x122)](a0_0x5e7316(0xfd)),settingContainer=document['querySelectorAll']('.setting-container'),messageContainer=document[a0_0x5e7316(0xf8)](a0_0x5e7316(0x11f)),stateTitle=document[a0_0x5e7316(0xf8)](a0_0x5e7316(0x114));let imageDataObj=null;async function loadLUT64(){const _0x3dc762=a0_0x5e7316;systemType=gameName[_0x3dc762(0x13a)](-0x3);const _0x22c9c1=localStorage['getItem'](gameName+_0x3dc762(0x13f))||_0x3dc762(0x13e),_0x6e3196=(localStorage[_0x3dc762(0xf0)](gameName+_0x3dc762(0x134))||_0x3dc762(0x111))[_0x3dc762(0x10e)]();if(!lut64||lut64Streng!==_0x22c9c1||lut64Profile!==_0x6e3196){const _0x5117ba=_0x3dc762(0x150)+_0x6e3196+'_'+_0x22c9c1+_0x3dc762(0x136);console[_0x3dc762(0x12a)](_0x5117ba);const _0x87a3d2=await fetch(_0x5117ba),_0x16e8db=await _0x87a3d2[_0x3dc762(0x138)]();lut64=new Uint8Array(_0x16e8db),lut64Streng=_0x22c9c1,lut64Profile=_0x6e3196;}}function a0_0x33e9(){const _0x107e7a=['3152723jKYAlu','screenSize','TEXTURE_MIN_FILTER','6945328zSjuYo','./src/shaders/fragmentShader.glsl','toLowerCase','1468425BRlkqa','DOMContentLoaded','warm','getShaderInfoLog','UNSIGNED_BYTE','.stateTitle,\x20.stateDate','uniform1f','fefs','8918310pmBxoW','position','px\x20','RGBA','top\x20center','set','compileShader','error','.message-container','clear','COMPILE_STATUS','getElementById','createShader','clientWidth','setProperty','drawArrays','gbc','data','vertexAttribPointer','log','53373024NesOWY','42BlFvxL','TEXTURE_MAG_FILTER','WebGL2\x20not\x20supported','close','deleteShader','getShaderParameter','smooth_width','createProgram','_temperature','then','.bin','attachShader','arrayBuffer','STATIC_DRAW','slice','text','linkProgram','getUniformLocation','4.0','_streng','webgl2','texcoord','floor','smooth_height','useProgram','clearRect','TEXTURE_WRAP_S','491788JtmDSA','transformOrigin','height','FLOAT','NEAREST','0,0,','addEventListener','enableVertexAttribArray','scale(','./src/lut/lut64_','setItem','bindTexture','imageSmoothingEnabled','TEXTURE_2D','devicePixelRatio','FRAGMENT_SHADER','TEXTURE_WRAP_T','texParameteri','shaderSource','ARRAY_BUFFER','drawImage','createBuffer','--bg-size','getItem','getContext','createTexture','1KofmrC','classList','width','uniform2f','COLOR_BUFFER_BIT','querySelectorAll','crisp-edges','canvas','documentElement','bindBuffer','img-shader','forEach','CLAMP_TO_EDGE','getPixelData','TRIANGLE_STRIP','style','imageRendering','transform','bufferData','zoom','getAttribLocation','2281366xULQjk'];a0_0x33e9=function(){return _0x107e7a;};return a0_0x33e9();}async function loadShaderSource(_0x190f83){const _0x35be8a=a0_0x5e7316,_0xb98f8f=await fetch(_0x190f83);return await _0xb98f8f[_0x35be8a(0x13b)]();}function setupStyle(_0x2854b4){const _0x247ff6=a0_0x5e7316;clientWidth=document[_0x247ff6(0xfb)][_0x247ff6(0x124)];const _0x2cd6b8=window[_0x247ff6(0x155)];systemType===_0x247ff6(0x127)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x247ff6(0x142)](clientWidth*_0x2cd6b8/gameWidth),localStorage['setItem'](_0x247ff6(0x10a),'0,0,'+gameWidth*(integerScaling/_0x2cd6b8)+','+gameHeight*(integerScaling/_0x2cd6b8))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x2cd6b8/gameWidth),localStorage[_0x247ff6(0x151)](_0x247ff6(0x10a),_0x247ff6(0x14c)+gameWidth*(integerScaling/_0x2cd6b8)+','+gameHeight*(integerScaling/_0x2cd6b8)));if(_0x2854b4==='2d')bufferCanvas[_0x247ff6(0xf5)]=gameWidth,bufferCanvas[_0x247ff6(0x149)]=gameHeight,bufferCanvas[_0x247ff6(0x102)][_0x247ff6(0x106)]=''+integerScaling/_0x2cd6b8,bufferCanvas[_0x247ff6(0x102)][_0x247ff6(0x103)]=_0x247ff6(0xf9),canvasContainer[_0x247ff6(0x102)][_0x247ff6(0xf5)]=gameWidth*(integerScaling/_0x2cd6b8)+'px',canvasContainer[_0x247ff6(0x102)]['height']=gameHeight*(integerScaling/_0x2cd6b8)+'px',textured[_0x247ff6(0x102)][_0x247ff6(0xf5)]=gameWidth*(integerScaling/_0x2cd6b8)+'px',textured[_0x247ff6(0x102)][_0x247ff6(0x149)]=gameHeight*(integerScaling/_0x2cd6b8)+'px',imgShader[_0x247ff6(0x102)][_0x247ff6(0x104)]=_0x247ff6(0x14f)+integerScaling/_0x2cd6b8/upscaleShader+')',settingContainer['forEach'](function(_0x1b9d70){const _0x1b71f9=_0x247ff6;_0x1b9d70[_0x1b71f9(0x102)][_0x1b71f9(0xf5)]=gameWidth*(integerScaling/_0x2cd6b8)+'px',_0x1b9d70[_0x1b71f9(0x102)]['height']=gameHeight*(integerScaling/_0x2cd6b8)+'px';}),messageContainer[_0x247ff6(0xfe)](function(_0x37a6be){const _0x4eabf6=_0x247ff6;_0x37a6be[_0x4eabf6(0x102)][_0x4eabf6(0xf5)]=gameWidth+'px',_0x37a6be[_0x4eabf6(0x102)][_0x4eabf6(0x149)]=gameHeight+'px',_0x37a6be[_0x4eabf6(0x102)][_0x4eabf6(0x106)]=''+integerScaling/_0x2cd6b8;}),stateTitle[_0x247ff6(0xfe)](function(_0x46cf77){const _0x2f7442=_0x247ff6;_0x46cf77['classList']['remove'](_0x2f7442(0x116));});else _0x2854b4===_0x247ff6(0x140)&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas[_0x247ff6(0x149)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x247ff6(0x102)][_0x247ff6(0x106)]=''+0x1/upscaleFactor,bufferCanvas['style'][_0x247ff6(0x103)]='',canvasContainer[_0x247ff6(0x102)][_0x247ff6(0xf5)]=clientWidth+'px',canvasContainer[_0x247ff6(0x102)]['height']=clientWidth*(gameHeight/gameWidth)+'px',textured['style']['width']=clientWidth+'px',textured[_0x247ff6(0x102)]['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x247ff6(0x102)][_0x247ff6(0x104)]=_0x247ff6(0x14f)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x247ff6(0xfe)](function(_0x2c69b0){const _0x407669=_0x247ff6;_0x2c69b0[_0x407669(0x102)]['width']=clientWidth+'px',_0x2c69b0['style'][_0x407669(0x149)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x247ff6(0xfe)](function(_0x1f5e76){const _0x5707e7=_0x247ff6;_0x1f5e76[_0x5707e7(0x102)][_0x5707e7(0xf5)]=gameWidth+'px',_0x1f5e76[_0x5707e7(0x102)][_0x5707e7(0x149)]=gameHeight+'px',_0x1f5e76[_0x5707e7(0x102)][_0x5707e7(0x106)]=''+clientWidth/gameWidth;}),stateTitle[_0x247ff6(0xfe)](function(_0x63f6a5){const _0x38ae99=_0x247ff6;_0x63f6a5[_0x38ae99(0xf4)]['add'](_0x38ae99(0x116));}));imgShader[_0x247ff6(0x102)]['width']=gameWidth*upscaleShader+'px',imgShader[_0x247ff6(0x102)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x247ff6(0x102)][_0x247ff6(0x148)]=_0x247ff6(0x11b),imgShader[_0x247ff6(0x102)][_0x247ff6(0x125)](_0x247ff6(0xef),upscaleShader+_0x247ff6(0x119)+upscaleShader+'px');}function setupWebGL(){const _0x2ad01e=a0_0x5e7316;gl=bufferCanvas[_0x2ad01e(0xf1)](_0x2ad01e(0x140));if(!gl)return console['error'](_0x2ad01e(0x12e)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x2ad01e(0xf5)],bufferCanvas['height']);}function createShader(_0x4dcd53,_0x77464d){const _0x2e4094=a0_0x5e7316,_0x32299f=gl[_0x2e4094(0x123)](_0x4dcd53);gl[_0x2e4094(0x159)](_0x32299f,_0x77464d),gl[_0x2e4094(0x11d)](_0x32299f);if(!gl[_0x2e4094(0x131)](_0x32299f,gl[_0x2e4094(0x121)]))return console[_0x2e4094(0x11e)](gl[_0x2e4094(0x112)](_0x32299f)),gl[_0x2e4094(0x130)](_0x32299f),null;return _0x32299f;}async function setupShaders(){const _0x4e4af0=a0_0x5e7316,_0x5abdfc=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x32f63e=await loadShaderSource(_0x4e4af0(0x10d)),_0xc0bfe4=createShader(gl['VERTEX_SHADER'],_0x5abdfc),_0x30b862=createShader(gl[_0x4e4af0(0x156)],_0x32f63e);return program=gl[_0x4e4af0(0x133)](),gl[_0x4e4af0(0x137)](program,_0xc0bfe4),gl[_0x4e4af0(0x137)](program,_0x30b862),gl[_0x4e4af0(0x13c)](program),gl[_0x4e4af0(0x144)](program),program;}function setupTexture(){const _0x41779c=a0_0x5e7316;texture=gl[_0x41779c(0xf2)](),gl[_0x41779c(0x152)](gl['TEXTURE_2D'],texture),gl[_0x41779c(0x158)](gl[_0x41779c(0x154)],gl[_0x41779c(0x10b)],gl['NEAREST']),gl[_0x41779c(0x158)](gl[_0x41779c(0x154)],gl[_0x41779c(0x12d)],gl[_0x41779c(0x14b)]),gl[_0x41779c(0x158)](gl['TEXTURE_2D'],gl[_0x41779c(0x146)],gl[_0x41779c(0xff)]),gl[_0x41779c(0x158)](gl['TEXTURE_2D'],gl[_0x41779c(0x157)],gl[_0x41779c(0xff)]),gl[_0x41779c(0xf6)](gl[_0x41779c(0x13d)](program,'game_size'),gameWidth,gameHeight),gl[_0x41779c(0xf6)](gl[_0x41779c(0x13d)](program,'render_size'),gl[_0x41779c(0xfa)][_0x41779c(0xf5)],gl[_0x41779c(0xfa)]['height']),gl['uniform1f'](gl['getUniformLocation'](program,_0x41779c(0x132)),gameWidth/gl[_0x41779c(0xfa)]['width']),gl[_0x41779c(0x115)](gl[_0x41779c(0x13d)](program,_0x41779c(0x143)),gameHeight/gl['canvas']['height']);}function setupBuffers(){const _0x3a79f5=a0_0x5e7316,_0x4f0d09=gl[_0x3a79f5(0xee)]();gl['bindBuffer'](gl[_0x3a79f5(0xec)],_0x4f0d09),gl[_0x3a79f5(0x105)](gl[_0x3a79f5(0xec)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x3a79f5(0x139)]);const _0x4c583b=gl[_0x3a79f5(0x107)](program,_0x3a79f5(0x118));gl[_0x3a79f5(0x14e)](_0x4c583b),gl[_0x3a79f5(0x129)](_0x4c583b,0x2,gl['FLOAT'],![],0x0,0x0);const _0x1995f2=gl[_0x3a79f5(0xee)]();gl[_0x3a79f5(0xfc)](gl['ARRAY_BUFFER'],_0x1995f2),gl['bufferData'](gl[_0x3a79f5(0xec)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']);const _0x4f4d0f=gl[_0x3a79f5(0x107)](program,_0x3a79f5(0x141));gl[_0x3a79f5(0x14e)](_0x4f4d0f),gl[_0x3a79f5(0x129)](_0x4f4d0f,0x2,gl[_0x3a79f5(0x14a)],![],0x0,0x0);}async function renderPixel(_0x34930e){const _0x11666d=a0_0x5e7316,_0x9fda84=a0_0x257f40[_0x11666d(0x100)]();if(!_0x9fda84)return;await loadLUT64();const _0x27bd4f=new Uint8ClampedArray(gameWidth*gameHeight*0x4);let _0x3f487a=0x0;const _0x1af888=_0x3b4876=>{const _0x3d60ae=_0x3b4876>>0x2&0x3f,_0x3eeca3=_0x3b4876>>0xa&0x3f,_0x1aa6e9=_0x3b4876>>0x12&0x3f,_0x4726cc=(_0x3d60ae<<0xc|_0x3eeca3<<0x6|_0x1aa6e9)*0x3;_0x27bd4f[_0x3f487a++]=lut64[_0x4726cc],_0x27bd4f[_0x3f487a++]=lut64[_0x4726cc+0x1],_0x27bd4f[_0x3f487a++]=lut64[_0x4726cc+0x2],_0x27bd4f[_0x3f487a++]=0xff;};if(systemType===_0x11666d(0x127))for(let _0x21e7b9=0x0;_0x21e7b9<gameHeight;_0x21e7b9++){let _0x21f3da=_0x21e7b9*gameStride;for(let _0x19377f=0x0;_0x19377f<gameWidth;_0x19377f++){_0x1af888(_0x9fda84[_0x21f3da++]);}}else for(let _0x3a34b8=0x0;_0x3a34b8<gameWidth*gameHeight;_0x3a34b8++){_0x1af888(_0x9fda84[_0x3a34b8]);}if(_0x34930e===_0x11666d(0x140))gl[_0x11666d(0x152)](gl[_0x11666d(0x154)],texture),gl['texImage2D'](gl[_0x11666d(0x154)],0x0,gl[_0x11666d(0x11a)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x11666d(0x113)],_0x27bd4f),gl[_0x11666d(0x120)](gl[_0x11666d(0xf7)]),gl[_0x11666d(0x126)](gl[_0x11666d(0x101)],0x0,0x4);else _0x34930e==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x11666d(0x153)]=![]),(!imageDataObj||imageDataObj[_0x11666d(0xf5)]!==gameWidth||imageDataObj[_0x11666d(0x149)]!==gameHeight)&&(imageDataObj=new ImageData(gameWidth,gameHeight)),imageDataObj[_0x11666d(0x128)][_0x11666d(0x11c)](_0x27bd4f),createImageBitmap(imageDataObj)[_0x11666d(0x135)](_0x1b8446=>{const _0x2d6755=_0x11666d;ctx2d[_0x2d6755(0x145)](0x0,0x0,bufferCanvas[_0x2d6755(0xf5)],bufferCanvas[_0x2d6755(0x149)]),ctx2d[_0x2d6755(0xed)](_0x1b8446,0x0,0x0),_0x1b8446[_0x2d6755(0x12f)]();}));requestAnimationFrame(()=>renderPixel(_0x34930e));}export async function switchRenderMode(_0x7e9f52){const _0x23514a=a0_0x5e7316;systemType=gameName[_0x23514a(0x13a)](-0x3);if(_0x7e9f52==='2d')setupStyle('2d'),renderPixel('2d');else _0x7e9f52===_0x23514a(0x140)&&(setupStyle(_0x23514a(0x140)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x23514a(0x140)));}function a0_0x6168(_0x4e41d4,_0x28c807){const _0x33e90d=a0_0x33e9();return a0_0x6168=function(_0x6168b6,_0x23e900){_0x6168b6=_0x6168b6-0xec;let _0x1ec0c4=_0x33e90d[_0x6168b6];return _0x1ec0c4;},a0_0x6168(_0x4e41d4,_0x28c807);}document[a0_0x5e7316(0x14d)](a0_0x5e7316(0x110),function(){});