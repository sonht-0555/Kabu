const a0_0x389c4e=a0_0x4936;(function(_0x39737b,_0xecb152){const _0x22053c=a0_0x4936,_0x4d7fcb=_0x39737b();while(!![]){try{const _0x840db8=parseInt(_0x22053c(0x112))/0x1+-parseInt(_0x22053c(0xdd))/0x2*(-parseInt(_0x22053c(0xf2))/0x3)+-parseInt(_0x22053c(0xe3))/0x4*(parseInt(_0x22053c(0x12c))/0x5)+-parseInt(_0x22053c(0x11d))/0x6+-parseInt(_0x22053c(0x131))/0x7+-parseInt(_0x22053c(0x10c))/0x8*(parseInt(_0x22053c(0xf9))/0x9)+-parseInt(_0x22053c(0x130))/0xa*(-parseInt(_0x22053c(0xe5))/0xb);if(_0x840db8===_0xecb152)break;else _0x4d7fcb['push'](_0x4d7fcb['shift']());}catch(_0x216c12){_0x4d7fcb['push'](_0x4d7fcb['shift']());}}}(a0_0x1cc2,0x5a207));import*as a0_0x50d52b from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x389c4e(0x124)](a0_0x389c4e(0x108)),bufferCanvas=document[a0_0x389c4e(0x124)](a0_0x389c4e(0x109)),canvasContainer=document['getElementById'](a0_0x389c4e(0x132)),imgShader=document[a0_0x389c4e(0x124)]('img-shader'),settingContainer=document[a0_0x389c4e(0x107)](a0_0x389c4e(0xf1)),messageContainer=document[a0_0x389c4e(0x107)]('.message-container'),stateTitle=document['querySelectorAll'](a0_0x389c4e(0xdb));async function loadLUT64(){const _0x99b847=a0_0x389c4e;systemType=gameName[_0x99b847(0x118)](-0x3);const _0x6dc697=localStorage[_0x99b847(0xf7)](gameName+_0x99b847(0x123))||_0x99b847(0xfd),_0x424c7b=(localStorage['getItem'](gameName+_0x99b847(0x120))||'warm')[_0x99b847(0x10b)]();if(!lut64||lut64Streng!==_0x6dc697||lut64Profile!==_0x424c7b){const _0x3d7aaa=_0x99b847(0x10a)+_0x424c7b+'_'+_0x6dc697+_0x99b847(0x136);console[_0x99b847(0x10d)](_0x3d7aaa);const _0x543e98=await fetch(_0x3d7aaa),_0x589a18=await _0x543e98['arrayBuffer']();lut64=new Uint8Array(_0x589a18),lut64Streng=_0x6dc697,lut64Profile=_0x424c7b;}}function a0_0x1cc2(){const _0xc61eac=['screenSize','674560GCbNvb','--bg-size','TRIANGLE_STRIP','VERTEX_SHADER','284390tCNbho','2717414yXlocd','canvas-container','px\x20','DOMContentLoaded','smooth_height','.bin','0,0,','width','transformOrigin','getAttribLocation','addEventListener','getShaderParameter','error','text','drawImage','.stateTitle,\x20.stateDate','uniform1f','2RJnyeQ','texParameteri','FLOAT','forEach','texcoord','scale(','4mepaQH','TEXTURE_WRAP_T','506ZqEnCa','NEAREST','texImage2D','createProgram','imageSmoothingEnabled','STATIC_DRAW','zoom','floor','uniform2f','game_size','webgl2','./src/shaders/vertexShader.glsl','.setting-container','1185216rtDuGE','createBuffer','ARRAY_BUFFER','TEXTURE_MIN_FILTER','bindTexture','getItem','shaderSource','6125427FVWSfw','WebGL2\x20not\x20supported','createShader','enableVertexAttribArray','4.0','height','attachShader','RGBA','COMPILE_STATUS','getPixelData','style','COLOR_BUFFER_BIT','TEXTURE_2D','setProperty','querySelectorAll','textured','canvas','./src/lut/lut64_','toLowerCase','8ujSNID','log','TEXTURE_MAG_FILTER','gbc','getUniformLocation','useProgram','237007KHErIY','bindBuffer','createTexture','documentElement','compileShader','drawArrays','slice','bufferData','position','render_size','transform','2204382fidtlM','TEXTURE_WRAP_S','vertexAttribPointer','_temperature','clear','crisp-edges','_streng','getElementById','fefs','FRAGMENT_SHADER','linkProgram','setItem','CLAMP_TO_EDGE','add'];a0_0x1cc2=function(){return _0xc61eac;};return a0_0x1cc2();}async function loadShaderSource(_0x59af87){const _0x3d66b2=a0_0x389c4e,_0x2c643d=await fetch(_0x59af87);return await _0x2c643d[_0x3d66b2(0x13e)]();}function setupStyle(_0x3401ca){const _0x1674e6=a0_0x389c4e;clientWidth=document[_0x1674e6(0x115)]['clientWidth'];const _0x42159=window['devicePixelRatio'];systemType===_0x1674e6(0x10f)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x1674e6(0xec)](clientWidth*_0x42159/gameWidth),localStorage[_0x1674e6(0x128)]('screenSize','0,0,'+gameWidth*(integerScaling/_0x42159)+','+gameHeight*(integerScaling/_0x42159))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x1674e6(0xec)](clientWidth*_0x42159/gameWidth),localStorage[_0x1674e6(0x128)](_0x1674e6(0x12b),_0x1674e6(0x137)+gameWidth*(integerScaling/_0x42159)+','+gameHeight*(integerScaling/_0x42159)));if(_0x3401ca==='2d')bufferCanvas[_0x1674e6(0x138)]=gameWidth,bufferCanvas[_0x1674e6(0xfe)]=gameHeight,bufferCanvas['style'][_0x1674e6(0xeb)]=''+integerScaling/_0x42159,bufferCanvas['style']['imageRendering']=_0x1674e6(0x122),canvasContainer[_0x1674e6(0x103)]['width']=gameWidth*(integerScaling/_0x42159)+'px',canvasContainer[_0x1674e6(0x103)][_0x1674e6(0xfe)]=gameHeight*(integerScaling/_0x42159)+'px',textured[_0x1674e6(0x103)][_0x1674e6(0x138)]=gameWidth*(integerScaling/_0x42159)+'px',textured[_0x1674e6(0x103)][_0x1674e6(0xfe)]=gameHeight*(integerScaling/_0x42159)+'px',imgShader['style'][_0x1674e6(0x11c)]=_0x1674e6(0xe2)+integerScaling/_0x42159/upscaleShader+')',settingContainer[_0x1674e6(0xe0)](function(_0x53239e){const _0xfc80c0=_0x1674e6;_0x53239e[_0xfc80c0(0x103)][_0xfc80c0(0x138)]=gameWidth*(integerScaling/_0x42159)+'px',_0x53239e[_0xfc80c0(0x103)][_0xfc80c0(0xfe)]=gameHeight*(integerScaling/_0x42159)+'px';}),messageContainer['forEach'](function(_0x2f2ff7){const _0x1ebd73=_0x1674e6;_0x2f2ff7[_0x1ebd73(0x103)][_0x1ebd73(0x138)]=gameWidth+'px',_0x2f2ff7[_0x1ebd73(0x103)][_0x1ebd73(0xfe)]=gameHeight+'px',_0x2f2ff7[_0x1ebd73(0x103)][_0x1ebd73(0xeb)]=''+integerScaling/_0x42159;}),stateTitle[_0x1674e6(0xe0)](function(_0x2705a2){const _0x4bde83=_0x1674e6;_0x2705a2['classList']['remove'](_0x4bde83(0x125));});else _0x3401ca==='webgl2'&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x1674e6(0xeb)]=''+0x1/upscaleFactor,bufferCanvas[_0x1674e6(0x103)]['imageRendering']='',canvasContainer['style'][_0x1674e6(0x138)]=clientWidth+'px',canvasContainer[_0x1674e6(0x103)][_0x1674e6(0xfe)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x1674e6(0x103)][_0x1674e6(0x138)]=clientWidth+'px',textured['style'][_0x1674e6(0xfe)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x1674e6(0x103)][_0x1674e6(0x11c)]=_0x1674e6(0xe2)+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0xca8fae){const _0x3c051e=_0x1674e6;_0xca8fae[_0x3c051e(0x103)][_0x3c051e(0x138)]=clientWidth+'px',_0xca8fae[_0x3c051e(0x103)][_0x3c051e(0xfe)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer['forEach'](function(_0x4c55af){const _0x164d5a=_0x1674e6;_0x4c55af['style'][_0x164d5a(0x138)]=gameWidth+'px',_0x4c55af['style'][_0x164d5a(0xfe)]=gameHeight+'px',_0x4c55af[_0x164d5a(0x103)]['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x1674e6(0xe0)](function(_0x2fef1f){const _0x32f37f=_0x1674e6;_0x2fef1f['classList'][_0x32f37f(0x12a)](_0x32f37f(0x125));}));imgShader[_0x1674e6(0x103)][_0x1674e6(0x138)]=gameWidth*upscaleShader+'px',imgShader[_0x1674e6(0x103)][_0x1674e6(0xfe)]=gameHeight*upscaleShader+'px',imgShader[_0x1674e6(0x103)][_0x1674e6(0x139)]='top\x20center',imgShader[_0x1674e6(0x103)][_0x1674e6(0x106)](_0x1674e6(0x12d),upscaleShader+_0x1674e6(0x133)+upscaleShader+'px');}function setupWebGL(){const _0x344a98=a0_0x389c4e;gl=bufferCanvas['getContext'](_0x344a98(0xef));if(!gl)return console[_0x344a98(0x13d)](_0x344a98(0xfa)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x344a98(0x138)],bufferCanvas[_0x344a98(0xfe)]);}function createShader(_0x3b9519,_0x5cef03){const _0x25303a=a0_0x389c4e,_0x4d267a=gl[_0x25303a(0xfb)](_0x3b9519);gl[_0x25303a(0xf8)](_0x4d267a,_0x5cef03),gl[_0x25303a(0x116)](_0x4d267a);if(!gl[_0x25303a(0x13c)](_0x4d267a,gl[_0x25303a(0x101)]))return console['error'](gl['getShaderInfoLog'](_0x4d267a)),gl['deleteShader'](_0x4d267a),null;return _0x4d267a;}async function setupShaders(){const _0x1dd573=a0_0x389c4e,_0x242e18=await loadShaderSource(_0x1dd573(0xf0)),_0x1d290f=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x849336=createShader(gl[_0x1dd573(0x12f)],_0x242e18),_0x42bfa1=createShader(gl[_0x1dd573(0x126)],_0x1d290f);return program=gl[_0x1dd573(0xe8)](),gl[_0x1dd573(0xff)](program,_0x849336),gl[_0x1dd573(0xff)](program,_0x42bfa1),gl[_0x1dd573(0x127)](program),gl[_0x1dd573(0x111)](program),program;}function setupTexture(){const _0x1c9e3f=a0_0x389c4e;texture=gl[_0x1c9e3f(0x114)](),gl['bindTexture'](gl[_0x1c9e3f(0x105)],texture),gl[_0x1c9e3f(0xde)](gl[_0x1c9e3f(0x105)],gl[_0x1c9e3f(0xf5)],gl[_0x1c9e3f(0xe6)]),gl[_0x1c9e3f(0xde)](gl[_0x1c9e3f(0x105)],gl[_0x1c9e3f(0x10e)],gl[_0x1c9e3f(0xe6)]),gl[_0x1c9e3f(0xde)](gl[_0x1c9e3f(0x105)],gl[_0x1c9e3f(0x11e)],gl[_0x1c9e3f(0x129)]),gl[_0x1c9e3f(0xde)](gl['TEXTURE_2D'],gl[_0x1c9e3f(0xe4)],gl[_0x1c9e3f(0x129)]),gl['uniform2f'](gl[_0x1c9e3f(0x110)](program,_0x1c9e3f(0xee)),gameWidth,gameHeight),gl[_0x1c9e3f(0xed)](gl[_0x1c9e3f(0x110)](program,_0x1c9e3f(0x11b)),gl[_0x1c9e3f(0x109)][_0x1c9e3f(0x138)],gl[_0x1c9e3f(0x109)][_0x1c9e3f(0xfe)]),gl[_0x1c9e3f(0xdc)](gl[_0x1c9e3f(0x110)](program,'smooth_width'),gameWidth/gl[_0x1c9e3f(0x109)][_0x1c9e3f(0x138)]),gl[_0x1c9e3f(0xdc)](gl[_0x1c9e3f(0x110)](program,_0x1c9e3f(0x135)),gameHeight/gl[_0x1c9e3f(0x109)][_0x1c9e3f(0xfe)]);}function setupBuffers(){const _0x2eb2eb=a0_0x389c4e,_0x18e26e=gl[_0x2eb2eb(0xf3)]();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x18e26e),gl[_0x2eb2eb(0x119)](gl[_0x2eb2eb(0xf4)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2eb2eb(0xea)]);const _0x2c93cd=gl[_0x2eb2eb(0x13a)](program,_0x2eb2eb(0x11a));gl[_0x2eb2eb(0xfc)](_0x2c93cd),gl[_0x2eb2eb(0x11f)](_0x2c93cd,0x2,gl[_0x2eb2eb(0xdf)],![],0x0,0x0);const _0x54fa81=gl['createBuffer']();gl[_0x2eb2eb(0x113)](gl[_0x2eb2eb(0xf4)],_0x54fa81),gl[_0x2eb2eb(0x119)](gl[_0x2eb2eb(0xf4)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2eb2eb(0xea)]);const _0x59717f=gl[_0x2eb2eb(0x13a)](program,_0x2eb2eb(0xe1));gl[_0x2eb2eb(0xfc)](_0x59717f),gl['vertexAttribPointer'](_0x59717f,0x2,gl[_0x2eb2eb(0xdf)],![],0x0,0x0);}function a0_0x4936(_0x336539,_0x27230b){const _0x1cc211=a0_0x1cc2();return a0_0x4936=function(_0x493669,_0x52cab4){_0x493669=_0x493669-0xdb;let _0x294f71=_0x1cc211[_0x493669];return _0x294f71;},a0_0x4936(_0x336539,_0x27230b);}async function renderPixel(_0x19e2cd){const _0x46215a=a0_0x389c4e,_0x466a17=a0_0x50d52b[_0x46215a(0x102)]();if(!_0x466a17)return;await loadLUT64();const _0xae8c2=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2832d3=0x0;_0x2832d3<gameHeight;_0x2832d3++){for(let _0x37ee0f=0x0;_0x37ee0f<gameWidth;_0x37ee0f++){const _0x3aa059=_0x2832d3*gameStride+_0x37ee0f,_0x58e86e=(_0x2832d3*gameWidth+_0x37ee0f)*0x4,_0x134135=_0x466a17[_0x3aa059],_0xe92aa3=(_0x134135&0xff)>>0x2,_0x399a22=(_0x134135>>0x8&0xff)>>0x2,_0x29802b=(_0x134135>>0x10&0xff)>>0x2,_0x4f5574=(_0xe92aa3*0x40*0x40+_0x399a22*0x40+_0x29802b)*0x3;_0xae8c2[_0x58e86e]=lut64[_0x4f5574],_0xae8c2[_0x58e86e+0x1]=lut64[_0x4f5574+0x1],_0xae8c2[_0x58e86e+0x2]=lut64[_0x4f5574+0x2],_0xae8c2[_0x58e86e+0x3]=0xff;}}if(_0x19e2cd===_0x46215a(0xef))gl[_0x46215a(0xf6)](gl[_0x46215a(0x105)],texture),gl[_0x46215a(0xe7)](gl['TEXTURE_2D'],0x0,gl[_0x46215a(0x100)],gameWidth,gameHeight,0x0,gl[_0x46215a(0x100)],gl['UNSIGNED_BYTE'],_0xae8c2),gl[_0x46215a(0x121)](gl[_0x46215a(0x104)]),gl[_0x46215a(0x117)](gl[_0x46215a(0x12e)],0x0,0x4);else{if(_0x19e2cd==='2d'){ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x46215a(0xe9)]=![];const _0x3b6dc4=new ImageData(_0xae8c2,gameWidth,gameHeight);createImageBitmap(_0x3b6dc4)['then'](_0x18369b=>{const _0x1742d9=_0x46215a;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x1742d9(0x138)],bufferCanvas[_0x1742d9(0xfe)]),ctx2d[_0x1742d9(0x13f)](_0x18369b,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x19e2cd));}export async function switchRenderMode(_0x475891){const _0xe4a3e8=a0_0x389c4e;systemType=gameName[_0xe4a3e8(0x118)](-0x3);if(_0x475891==='2d')setupStyle('2d'),renderPixel('2d');else _0x475891===_0xe4a3e8(0xef)&&(setupStyle(_0xe4a3e8(0xef)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0xe4a3e8(0xef)));}document[a0_0x389c4e(0x13b)](a0_0x389c4e(0x134),function(){});