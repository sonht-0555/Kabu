(function(_0x44d2c6,_0x2c215c){const _0x2d86b1=a0_0x21e2,_0xbf249c=_0x44d2c6();while(!![]){try{const _0x446470=parseInt(_0x2d86b1(0x18a))/0x1*(parseInt(_0x2d86b1(0x160))/0x2)+parseInt(_0x2d86b1(0x171))/0x3*(-parseInt(_0x2d86b1(0x176))/0x4)+-parseInt(_0x2d86b1(0x18f))/0x5*(parseInt(_0x2d86b1(0x179))/0x6)+-parseInt(_0x2d86b1(0x152))/0x7+parseInt(_0x2d86b1(0x161))/0x8*(parseInt(_0x2d86b1(0x17c))/0x9)+-parseInt(_0x2d86b1(0x165))/0xa*(-parseInt(_0x2d86b1(0x156))/0xb)+parseInt(_0x2d86b1(0x180))/0xc*(parseInt(_0x2d86b1(0x16d))/0xd);if(_0x446470===_0x2c215c)break;else _0xbf249c['push'](_0xbf249c['shift']());}catch(_0x51b185){_0xbf249c['push'](_0xbf249c['shift']());}}}(a0_0x8f8f,0xec32f));import*as a0_0x322383 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x8f8f(){const _0x309c21=['toLowerCase','warm','slice','createTexture','49699szTuGR','./src/lut/lut64_','attachShader','compileShader','740961kFDALy','getUniformLocation','.bin','linkProgram','bufferData','4DaAICq','log','low-power','6HEzeHz','game_size','drawArrays','117nVWrJt','createShader','CLAMP_TO_EDGE','TEXTURE_2D','5268blRUxZ','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','uniform2f','enableVertexAttribArray','FLOAT','arrayBuffer','uniform1f','TEXTURE_WRAP_T','getItem','1WkPmtm','TEXTURE_MIN_FILTER','shaderSource','bindBuffer','getAttribLocation','5357155ubmcBa','TRIANGLE_STRIP','_streng','width','texImage2D','COLOR_BUFFER_BIT','render_size','TEXTURE_MAG_FILTER','bindTexture','texParameteri','VERTEX_SHADER','smooth_width','canvas','smooth_height','10216213aVneSI','webgl','getPixelData','ARRAY_BUFFER','393404cHAoqP','height','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','webgl_full','TEXTURE_WRAP_S','position','getContext','clearRect','STATIC_DRAW','drawImage','2479416wtbkLv','2936MgWDuq','vertexAttribPointer','useProgram','createProgram','230AFBzmL','texcoord','NEAREST','createBuffer'];a0_0x8f8f=function(){return _0x309c21;};return a0_0x8f8f();}async function loadLUT64(){const _0x31fd0e=a0_0x21e2;systemType=gameName[_0x31fd0e(0x16b)](-0x3);const _0x3bd6e8=localStorage['getItem'](gameName+_0x31fd0e(0x191))||'4.0',_0x2eccf3=(localStorage[_0x31fd0e(0x189)](gameName+'_temperature')||_0x31fd0e(0x16a))[_0x31fd0e(0x169)]();if(!lut64||lut64Streng!==_0x3bd6e8||lut64Profile!==_0x2eccf3){const _0x83db99=_0x31fd0e(0x16e)+_0x2eccf3+'_'+_0x3bd6e8+_0x31fd0e(0x173);console[_0x31fd0e(0x177)](_0x83db99);const _0x56e5b2=await fetch(_0x83db99),_0xa11492=await _0x56e5b2[_0x31fd0e(0x186)]();lut64=new Uint8Array(_0xa11492),lut64Streng=_0x3bd6e8,lut64Profile=_0x2eccf3;}}function setupWebGL_Shader(_0x4be6a2){const _0x32e74e=a0_0x21e2;gl=bufferCanvas['getContext'](_0x32e74e(0x153),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x32e74e(0x178)}),gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x32e74e(0x157)]);function _0xd2fd2b(_0x4feddb,_0x310401){const _0x3ddd43=_0x32e74e,_0x1b25b6=gl[_0x3ddd43(0x17d)](_0x4feddb);return gl[_0x3ddd43(0x18c)](_0x1b25b6,_0x310401),gl[_0x3ddd43(0x170)](_0x1b25b6),_0x1b25b6;}vs=_0x32e74e(0x181);if(_0x4be6a2===_0x32e74e(0x153))fs=_0x32e74e(0x158);else _0x4be6a2===_0x32e74e(0x159)&&(fs=_0x32e74e(0x182));const _0x4d6105=_0xd2fd2b(gl[_0x32e74e(0x14e)],vs),_0x32fd42=_0xd2fd2b(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x32e74e(0x164)](),gl['attachShader'](program,_0x4d6105),gl[_0x32e74e(0x16f)](program,_0x32fd42),gl[_0x32e74e(0x174)](program),gl[_0x32e74e(0x163)](program),program;}function setupTexture_Buffer(_0x4e528f){const _0x533561=a0_0x21e2;texture=gl[_0x533561(0x16c)](),gl[_0x533561(0x14c)](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl[_0x533561(0x17f)],gl[_0x533561(0x18b)],gl['NEAREST']),gl[_0x533561(0x14d)](gl[_0x533561(0x17f)],gl[_0x533561(0x14b)],gl[_0x533561(0x167)]),gl[_0x533561(0x14d)](gl[_0x533561(0x17f)],gl[_0x533561(0x15a)],gl[_0x533561(0x17e)]),gl[_0x533561(0x14d)](gl[_0x533561(0x17f)],gl[_0x533561(0x188)],gl[_0x533561(0x17e)]);_0x4e528f===_0x533561(0x159)&&(gl['uniform2f'](gl[_0x533561(0x172)](program,_0x533561(0x17a)),gameWidth,gameHeight),gl[_0x533561(0x183)](gl[_0x533561(0x172)](program,_0x533561(0x14a)),gl[_0x533561(0x150)][_0x533561(0x192)],gl[_0x533561(0x150)]['height']),gl[_0x533561(0x187)](gl[_0x533561(0x172)](program,_0x533561(0x14f)),gameWidth/gl[_0x533561(0x150)]['width']),gl[_0x533561(0x187)](gl[_0x533561(0x172)](program,_0x533561(0x151)),gameHeight/gl[_0x533561(0x150)][_0x533561(0x157)]));const _0xc3c39c=gl['createBuffer']();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0xc3c39c),gl[_0x533561(0x175)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x533561(0x162)](gl[_0x533561(0x18e)](program,_0x533561(0x15b)),0x2,gl[_0x533561(0x185)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x533561(0x18e)](program,'position'));const _0x4946ad=gl[_0x533561(0x168)]();gl[_0x533561(0x18d)](gl[_0x533561(0x155)],_0x4946ad),gl[_0x533561(0x175)](gl[_0x533561(0x155)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x533561(0x15e)]),gl[_0x533561(0x162)](gl[_0x533561(0x18e)](program,_0x533561(0x166)),0x2,gl[_0x533561(0x185)],![],0x0,0x0),gl[_0x533561(0x184)](gl[_0x533561(0x18e)](program,'texcoord'));}function setup2DContext(){const _0xd1812f=a0_0x21e2;ctx2d=bufferCanvas[_0xd1812f(0x15c)]('2d'),ctx2d['imageSmoothingEnabled']=![];}function a0_0x21e2(_0x590f6d,_0x30735c){const _0x8f8f59=a0_0x8f8f();return a0_0x21e2=function(_0x21e2e3,_0x20df4d){_0x21e2e3=_0x21e2e3-0x14a;let _0x566919=_0x8f8f59[_0x21e2e3];return _0x566919;},a0_0x21e2(_0x590f6d,_0x30735c);}async function renderPixel(_0x1022da){const _0x22d799=a0_0x21e2,_0x40a684=a0_0x322383[_0x22d799(0x154)]();if(!_0x40a684)return;const _0x28c817=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2fa4b3=0x0;_0x2fa4b3<gameHeight;_0x2fa4b3++){for(let _0x53a463=0x0;_0x53a463<gameWidth;_0x53a463++){const _0x2adee6=_0x2fa4b3*gameStride+_0x53a463,_0x539bf7=(_0x2fa4b3*gameWidth+_0x53a463)*0x4,_0x30123d=_0x40a684[_0x2adee6],_0xe57885=(_0x30123d&0xff)>>0x2,_0x557d7c=(_0x30123d>>0x8&0xff)>>0x2,_0x5840f1=(_0x30123d>>0x10&0xff)>>0x2;_0x28c817[_0x539bf7]=_0xe57885,_0x28c817[_0x539bf7+0x1]=_0x557d7c,_0x28c817[_0x539bf7+0x2]=_0x5840f1,_0x28c817[_0x539bf7+0x3]=0xff;}}if(_0x1022da===_0x22d799(0x153))gl[_0x22d799(0x193)](gl[_0x22d799(0x17f)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl['RGBA'],gl['UNSIGNED_BYTE'],_0x28c817),gl['clear'](gl[_0x22d799(0x194)]),gl[_0x22d799(0x17b)](gl[_0x22d799(0x190)],0x0,0x4);else _0x1022da==='2d'&&(imageDataObj=new ImageData(_0x28c817,gameWidth,gameHeight),createImageBitmap(imageDataObj)['then'](_0x135087=>{const _0x16485e=_0x22d799;ctx2d[_0x16485e(0x15d)](0x0,0x0,bufferCanvas[_0x16485e(0x192)],bufferCanvas[_0x16485e(0x157)]),ctx2d[_0x16485e(0x15f)](_0x135087,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x1022da));}export async function switchRenderMode(_0x3208eb){const _0x579aee=a0_0x21e2;systemType=gameName[_0x579aee(0x16b)](-0x3);if(_0x3208eb==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x3208eb==='webgl')setupStyle('2d'),setupWebGL_Shader(_0x579aee(0x153)),setupTexture_Buffer(_0x579aee(0x153)),renderPixel(_0x579aee(0x153));else _0x3208eb===_0x579aee(0x159)&&(setupStyle(_0x579aee(0x159)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer('webgl_full'),renderPixel(_0x579aee(0x153)));}}