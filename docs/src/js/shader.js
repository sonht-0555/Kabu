(function(_0xb61286,_0x41ec9e){const _0x3bb3a0=a0_0x50d7,_0x213455=_0xb61286();while(!![]){try{const _0x131351=-parseInt(_0x3bb3a0(0x1b6))/0x1+-parseInt(_0x3bb3a0(0x1a9))/0x2+-parseInt(_0x3bb3a0(0x19e))/0x3+-parseInt(_0x3bb3a0(0x1a4))/0x4*(-parseInt(_0x3bb3a0(0x1bf))/0x5)+-parseInt(_0x3bb3a0(0x1d5))/0x6*(-parseInt(_0x3bb3a0(0x1c3))/0x7)+parseInt(_0x3bb3a0(0x1c1))/0x8*(-parseInt(_0x3bb3a0(0x1c8))/0x9)+parseInt(_0x3bb3a0(0x1d7))/0xa;if(_0x131351===_0x41ec9e)break;else _0x213455['push'](_0x213455['shift']());}catch(_0x53d67b){_0x213455['push'](_0x213455['shift']());}}}(a0_0x5722,0x8fdee));import*as a0_0xa67026 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0xb4a256=a0_0x50d7;systemType=gameName['slice'](-0x3);const _0x2020e6=(localStorage[_0xb4a256(0x1bc)](gameName+_0xb4a256(0x1c6))||_0xb4a256(0x1b7))['toLowerCase']();if(!lut64||lut64Profile!==_0x2020e6){const _0x16f28f=_0xb4a256(0x1da)+_0x2020e6+'_4.0.bin';console[_0xb4a256(0x1cc)](_0x16f28f);const _0x3819d3=await fetch(_0x16f28f),_0x54ab5a=await _0x3819d3[_0xb4a256(0x1d9)]();lut64=new Uint8Array(_0x54ab5a),lut64Profile=_0x2020e6;}}function a0_0x5722(){const _0x5aa2c5=['244lRfmnv','compileShader','TEXTURE_WRAP_S','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','vertexAttribPointer','671758IopVtM','width','FLOAT','bindTexture','createTexture','webgl','texParameteri','viewport','data','createBuffer','UNSIGNED_BYTE','canvas','bindBuffer','1133252FHIfve','none','NEAREST','linkProgram','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','CLAMP_TO_EDGE','getItem','smooth_width','height','20890FCFJwR','TEXTURE_WRAP_T','21752OeFPay','low-power','5971322zsHlrS','getUniformLocation','RGBA','_temperature','uniform2f','72qdcYNl','render_size','TRIANGLE_STRIP','TEXTURE_MIN_FILTER','log','attachShader','ARRAY_BUFFER','position','drawArrays','game_size','uniform1f','texImage2D','slice','6hJOYOt','useProgram','11719690EaFuvD','FRAGMENT_SHADER','arrayBuffer','./src/lut/lut64_','VERTEX_SHADER','webgl_full','TEXTURE_2D','STATIC_DRAW','set','texcoord','599088vfimDw','clearRect','getContext','getAttribLocation','bufferData','smooth_height'];a0_0x5722=function(){return _0x5aa2c5;};return a0_0x5722();}function a0_0x50d7(_0x2ea957,_0x596ef2){const _0x5722be=a0_0x5722();return a0_0x50d7=function(_0x50d7ce,_0x15590d){_0x50d7ce=_0x50d7ce-0x19d;let _0x133eac=_0x5722be[_0x50d7ce];return _0x133eac;},a0_0x50d7(_0x2ea957,_0x596ef2);}function setupWebGL_Shader(_0x11faea){const _0x74ba32=a0_0x50d7;gl=bufferCanvas[_0x74ba32(0x1a0)](_0x74ba32(0x1ae),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x74ba32(0x1c2)}),gl[_0x74ba32(0x1b0)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x74ba32(0x1be)]);function _0x399766(_0x3794d0,_0x5465cc){const _0x3c7bc6=_0x74ba32,_0x4ef360=gl['createShader'](_0x3794d0);return gl['shaderSource'](_0x4ef360,_0x5465cc),gl[_0x3c7bc6(0x1a5)](_0x4ef360),_0x4ef360;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x11faea===_0x74ba32(0x1ae))fs=_0x74ba32(0x1ba);else _0x11faea===_0x74ba32(0x1dc)&&(fs=_0x74ba32(0x1a7));const _0x50d77f=_0x399766(gl[_0x74ba32(0x1db)],vs),_0x372bee=_0x399766(gl[_0x74ba32(0x1d8)],fs);return program=gl['createProgram'](),gl['attachShader'](program,_0x50d77f),gl[_0x74ba32(0x1cd)](program,_0x372bee),gl[_0x74ba32(0x1b9)](program),gl[_0x74ba32(0x1d6)](program),program;}function setupTexture_Buffer(_0x29a735){const _0x142a83=a0_0x50d7;texture=gl[_0x142a83(0x1ad)](),gl[_0x142a83(0x1ac)](gl[_0x142a83(0x1dd)],texture),gl[_0x142a83(0x1af)](gl[_0x142a83(0x1dd)],gl[_0x142a83(0x1cb)],gl[_0x142a83(0x1b8)]),gl[_0x142a83(0x1af)](gl['TEXTURE_2D'],gl['TEXTURE_MAG_FILTER'],gl[_0x142a83(0x1b8)]),gl[_0x142a83(0x1af)](gl[_0x142a83(0x1dd)],gl[_0x142a83(0x1a6)],gl[_0x142a83(0x1bb)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x142a83(0x1c0)],gl['CLAMP_TO_EDGE']);_0x29a735==='webgl_full'&&(gl[_0x142a83(0x1c7)](gl[_0x142a83(0x1c4)](program,_0x142a83(0x1d1)),gameWidth,gameHeight),gl[_0x142a83(0x1c7)](gl['getUniformLocation'](program,_0x142a83(0x1c9)),gl[_0x142a83(0x1b4)][_0x142a83(0x1aa)],gl[_0x142a83(0x1b4)][_0x142a83(0x1be)]),gl['uniform1f'](gl[_0x142a83(0x1c4)](program,_0x142a83(0x1bd)),gameWidth/gl[_0x142a83(0x1b4)]['width']),gl[_0x142a83(0x1d2)](gl[_0x142a83(0x1c4)](program,_0x142a83(0x1a3)),gameHeight/gl[_0x142a83(0x1b4)][_0x142a83(0x1be)]));const _0x18b0a9=gl[_0x142a83(0x1b2)]();gl[_0x142a83(0x1b5)](gl[_0x142a83(0x1ce)],_0x18b0a9),gl[_0x142a83(0x1a2)](gl[_0x142a83(0x1ce)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x142a83(0x1a8)](gl['getAttribLocation'](program,_0x142a83(0x1cf)),0x2,gl[_0x142a83(0x1ab)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x142a83(0x1a1)](program,_0x142a83(0x1cf)));const _0x470a00=gl[_0x142a83(0x1b2)]();gl[_0x142a83(0x1b5)](gl[_0x142a83(0x1ce)],_0x470a00),gl[_0x142a83(0x1a2)](gl[_0x142a83(0x1ce)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x142a83(0x1de)]),gl[_0x142a83(0x1a8)](gl['getAttribLocation'](program,_0x142a83(0x19d)),0x2,gl[_0x142a83(0x1ab)],![],0x0,0x0),gl['enableVertexAttribArray'](gl['getAttribLocation'](program,_0x142a83(0x19d)));}function setup2DContext(){const _0x36537f=a0_0x50d7;ctx2d=bufferCanvas[_0x36537f(0x1a0)]('2d'),ctx2d['imageSmoothingEnabled']=![];}async function renderPixel(_0x4837bd){const _0x2ea730=a0_0x50d7,_0x160f60=a0_0xa67026['getPixelData']();if(!_0x160f60)return;await loadLUT64();const _0x4ec04c=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x465f51=0x0;_0x465f51<gameHeight;_0x465f51++){for(let _0x983548=0x0;_0x983548<gameWidth;_0x983548++){const _0x1bbef0=_0x465f51*gameStride+_0x983548,_0x10fae1=(_0x465f51*gameWidth+_0x983548)*0x4,_0x477e8f=_0x160f60[_0x1bbef0];if(lut64Profile===_0x2ea730(0x1b7))_0x4ec04c[_0x10fae1]=_0x477e8f&0xff,_0x4ec04c[_0x10fae1+0x1]=_0x477e8f>>0x8&0xff,_0x4ec04c[_0x10fae1+0x2]=_0x477e8f>>0x10&0xff,_0x4ec04c[_0x10fae1+0x3]=0xff;else{const _0x4a1801=(_0x477e8f&0xff)>>0x2,_0x10d4d1=(_0x477e8f>>0x8&0xff)>>0x2,_0x3bc76b=(_0x477e8f>>0x10&0xff)>>0x2,_0x1a8d1e=(_0x4a1801*0x40*0x40+_0x10d4d1*0x40+_0x3bc76b)*0x3;_0x4ec04c[_0x10fae1]=lut64[_0x1a8d1e],_0x4ec04c[_0x10fae1+0x1]=lut64[_0x1a8d1e+0x1],_0x4ec04c[_0x10fae1+0x2]=lut64[_0x1a8d1e+0x2],_0x4ec04c[_0x10fae1+0x3]=0xff;}}}if(_0x4837bd===_0x2ea730(0x1ae))gl[_0x2ea730(0x1d3)](gl['TEXTURE_2D'],0x0,gl[_0x2ea730(0x1c5)],gameWidth,gameHeight,0x0,gl[_0x2ea730(0x1c5)],gl[_0x2ea730(0x1b3)],_0x4ec04c),gl['clear'](gl['COLOR_BUFFER_BIT']),gl[_0x2ea730(0x1d0)](gl[_0x2ea730(0x1ca)],0x0,0x4);else _0x4837bd==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x4ec04c,gameWidth,gameHeight):imageDataObj[_0x2ea730(0x1b1)][_0x2ea730(0x1df)](_0x4ec04c),ctx2d[_0x2ea730(0x19f)](0x0,0x0,bufferCanvas[_0x2ea730(0x1aa)],bufferCanvas[_0x2ea730(0x1be)]),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x4837bd));}export async function switchRenderMode(_0x3e5da3){const _0x22d780=a0_0x50d7;systemType=gameName[_0x22d780(0x1d4)](-0x3);if(_0x3e5da3==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x3e5da3===_0x22d780(0x1ae))setupStyle('2d'),setupWebGL_Shader(_0x22d780(0x1ae)),setupTexture_Buffer(_0x22d780(0x1ae)),renderPixel(_0x22d780(0x1ae));else _0x3e5da3==='webgl_full'&&(setupStyle(_0x22d780(0x1dc)),setupWebGL_Shader(_0x22d780(0x1dc)),setupTexture_Buffer(_0x22d780(0x1dc)),renderPixel(_0x22d780(0x1ae)));}}