const a0_0xe84c69=a0_0x4609;(function(_0x3fc3dd,_0x1fa92b){const _0x53e3b1=a0_0x4609,_0x53813f=_0x3fc3dd();while(!![]){try{const _0x35c8aa=parseInt(_0x53e3b1(0x247))/0x1*(-parseInt(_0x53e3b1(0x22a))/0x2)+-parseInt(_0x53e3b1(0x20b))/0x3*(-parseInt(_0x53e3b1(0x24c))/0x4)+-parseInt(_0x53e3b1(0x23c))/0x5+parseInt(_0x53e3b1(0x208))/0x6*(-parseInt(_0x53e3b1(0x257))/0x7)+-parseInt(_0x53e3b1(0x20d))/0x8*(-parseInt(_0x53e3b1(0x236))/0x9)+parseInt(_0x53e3b1(0x21e))/0xa*(parseInt(_0x53e3b1(0x217))/0xb)+-parseInt(_0x53e3b1(0x1f3))/0xc*(-parseInt(_0x53e3b1(0x23d))/0xd);if(_0x35c8aa===_0x1fa92b)break;else _0x53813f['push'](_0x53813f['shift']());}catch(_0x5a971f){_0x53813f['push'](_0x53813f['shift']());}}}(a0_0x8200,0x28d47));import*as a0_0x22ab5f from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0xe84c69(0x1fd)),bufferCanvas=document['getElementById']('canvas'),canvasContainer=document[a0_0xe84c69(0x1f0)](a0_0xe84c69(0x248)),imgShader=document[a0_0xe84c69(0x1f0)](a0_0xe84c69(0x241)),settingContainer=document[a0_0xe84c69(0x1f5)]('.setting-container'),messageContainer=document[a0_0xe84c69(0x1f5)](a0_0xe84c69(0x233)),stateTitle=document[a0_0xe84c69(0x1f5)](a0_0xe84c69(0x24d));let imageDataObj=null;const totalPixels=gameWidth*gameHeight,imageData=new Uint8ClampedArray(gameWidth*gameHeight*0x4);let srcIndex=0x0,destIndex=0x0;function a0_0x4609(_0x324160,_0x4e13cb){const _0x820073=a0_0x8200();return a0_0x4609=function(_0x460947,_0x5b6189){_0x460947=_0x460947-0x1ee;let _0x19eeab=_0x820073[_0x460947];return _0x19eeab;},a0_0x4609(_0x324160,_0x4e13cb);}async function loadLUT64(){const _0x43ef28=a0_0xe84c69;systemType=gameName[_0x43ef28(0x230)](-0x3);const _0x1f735f=localStorage[_0x43ef28(0x212)](gameName+_0x43ef28(0x21b))||_0x43ef28(0x226),_0x4f0807=(localStorage[_0x43ef28(0x212)](gameName+_0x43ef28(0x246))||_0x43ef28(0x252))['toLowerCase']();if(!lut64||lut64Streng!==_0x1f735f||lut64Profile!==_0x4f0807){const _0x32159d=_0x43ef28(0x24b)+_0x4f0807+'_'+_0x1f735f+_0x43ef28(0x203);console[_0x43ef28(0x21f)](_0x32159d);const _0x5944ca=await fetch(_0x32159d),_0x2b9524=await _0x5944ca[_0x43ef28(0x1f6)]();lut64=new Uint8Array(_0x2b9524),lut64Streng=_0x1f735f,lut64Profile=_0x4f0807;}}async function loadShaderSource(_0x3595e5){const _0x52e4c4=a0_0xe84c69,_0x36b60f=await fetch(_0x3595e5);return await _0x36b60f[_0x52e4c4(0x1f4)]();}function setupStyle(_0x2597c3){const _0x5373b2=a0_0xe84c69;clientWidth=document[_0x5373b2(0x25a)][_0x5373b2(0x215)];const _0x44f70a=window[_0x5373b2(0x24f)];systemType===_0x5373b2(0x21c)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x44f70a/gameWidth),localStorage[_0x5373b2(0x258)](_0x5373b2(0x1ef),_0x5373b2(0x1f9)+gameWidth*(integerScaling/_0x44f70a)+','+gameHeight*(integerScaling/_0x44f70a))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x5373b2(0x1fb)](clientWidth*_0x44f70a/gameWidth),localStorage[_0x5373b2(0x258)](_0x5373b2(0x1ef),_0x5373b2(0x1f9)+gameWidth*(integerScaling/_0x44f70a)+','+gameHeight*(integerScaling/_0x44f70a)));if(_0x2597c3==='2d')bufferCanvas[_0x5373b2(0x22d)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x5373b2(0x243)]['zoom']=''+integerScaling/_0x44f70a,bufferCanvas[_0x5373b2(0x243)][_0x5373b2(0x200)]=_0x5373b2(0x1f8),canvasContainer[_0x5373b2(0x243)][_0x5373b2(0x22d)]=gameWidth*(integerScaling/_0x44f70a)+'px',canvasContainer[_0x5373b2(0x243)][_0x5373b2(0x202)]=gameHeight*(integerScaling/_0x44f70a)+'px',textured[_0x5373b2(0x243)]['width']=gameWidth*(integerScaling/_0x44f70a)+'px',textured['style'][_0x5373b2(0x202)]=gameHeight*(integerScaling/_0x44f70a)+'px',imgShader[_0x5373b2(0x243)][_0x5373b2(0x1f2)]=_0x5373b2(0x1ff)+integerScaling/_0x44f70a/upscaleShader+')',settingContainer[_0x5373b2(0x1ee)](function(_0x30e3c7){const _0x14e203=_0x5373b2;_0x30e3c7[_0x14e203(0x243)][_0x14e203(0x22d)]=gameWidth*(integerScaling/_0x44f70a)+'px',_0x30e3c7['style'][_0x14e203(0x202)]=gameHeight*(integerScaling/_0x44f70a)+'px';}),messageContainer[_0x5373b2(0x1ee)](function(_0x510500){const _0x19f4db=_0x5373b2;_0x510500[_0x19f4db(0x243)]['width']=gameWidth+'px',_0x510500['style'][_0x19f4db(0x202)]=gameHeight+'px',_0x510500[_0x19f4db(0x243)]['zoom']=''+integerScaling/_0x44f70a;}),stateTitle[_0x5373b2(0x1ee)](function(_0x5b682e){const _0x1aab3a=_0x5373b2;_0x5b682e[_0x1aab3a(0x213)]['remove'](_0x1aab3a(0x24a));});else _0x2597c3===_0x5373b2(0x219)&&(bufferCanvas[_0x5373b2(0x22d)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x5373b2(0x243)][_0x5373b2(0x23f)]=''+0x1/upscaleFactor,bufferCanvas['style'][_0x5373b2(0x200)]='',canvasContainer['style']['width']=clientWidth+'px',canvasContainer[_0x5373b2(0x243)][_0x5373b2(0x202)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x5373b2(0x243)]['width']=clientWidth+'px',textured[_0x5373b2(0x243)][_0x5373b2(0x202)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x5373b2(0x243)][_0x5373b2(0x1f2)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x5373b2(0x1ee)](function(_0xabb673){const _0x53dd44=_0x5373b2;_0xabb673['style'][_0x53dd44(0x22d)]=clientWidth+'px',_0xabb673[_0x53dd44(0x243)][_0x53dd44(0x202)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer['forEach'](function(_0x47da4f){const _0x264fd7=_0x5373b2;_0x47da4f[_0x264fd7(0x243)][_0x264fd7(0x22d)]=gameWidth+'px',_0x47da4f[_0x264fd7(0x243)][_0x264fd7(0x202)]=gameHeight+'px',_0x47da4f[_0x264fd7(0x243)][_0x264fd7(0x23f)]=''+clientWidth/gameWidth;}),stateTitle[_0x5373b2(0x1ee)](function(_0x537b13){const _0x52809e=_0x5373b2;_0x537b13[_0x52809e(0x213)][_0x52809e(0x22c)](_0x52809e(0x24a));}));imgShader[_0x5373b2(0x243)][_0x5373b2(0x22d)]=gameWidth*upscaleShader+'px',imgShader[_0x5373b2(0x243)][_0x5373b2(0x202)]=gameHeight*upscaleShader+'px',imgShader[_0x5373b2(0x243)][_0x5373b2(0x1fe)]=_0x5373b2(0x245),imgShader[_0x5373b2(0x243)][_0x5373b2(0x223)](_0x5373b2(0x1f1),upscaleShader+_0x5373b2(0x216)+upscaleShader+'px');}function setupWebGL(){const _0x1ee463=a0_0xe84c69;gl=bufferCanvas[_0x1ee463(0x256)]('webgl2');if(!gl)return console[_0x1ee463(0x225)](_0x1ee463(0x211)),null;gl[_0x1ee463(0x221)](0x0,0x0,bufferCanvas[_0x1ee463(0x22d)],bufferCanvas['height']);}function createShader(_0x60fa15,_0x1e4ce1){const _0x1a958c=a0_0xe84c69,_0x6c4ea3=gl[_0x1a958c(0x20f)](_0x60fa15);gl[_0x1a958c(0x251)](_0x6c4ea3,_0x1e4ce1),gl[_0x1a958c(0x210)](_0x6c4ea3);if(!gl[_0x1a958c(0x205)](_0x6c4ea3,gl[_0x1a958c(0x249)]))return console['error'](gl[_0x1a958c(0x234)](_0x6c4ea3)),gl[_0x1a958c(0x209)](_0x6c4ea3),null;return _0x6c4ea3;}function a0_0x8200(){const _0x4ac962=['bindBuffer','CLAMP_TO_EDGE','100085HSTVaA','68978bXrvfh','texcoord','zoom','imageSmoothingEnabled','img-shader','smooth_width','style','RGBA','top\x20center','_temperature','4JtCVjk','canvas-container','COMPILE_STATUS','fefs','./src/lut/lut64_','63996VhnCMb','.stateTitle,\x20.stateDate','TRIANGLE_STRIP','devicePixelRatio','FRAGMENT_SHADER','shaderSource','warm','COLOR_BUFFER_BIT','vertexAttribPointer','bindTexture','getContext','261562nchPSI','setItem','texParameteri','documentElement','STATIC_DRAW','render_size','forEach','screenSize','getElementById','--bg-size','transform','924fgmBdi','text','querySelectorAll','arrayBuffer','createBuffer','crisp-edges','0,0,','TEXTURE_MIN_FILTER','floor','./src/shaders/fragmentShader.glsl','textured','transformOrigin','scale(','imageRendering','drawImage','height','.bin','texImage2D','getShaderParameter','set','attachShader','48oGcSHa','deleteShader','close','3iUfQJD','game_size','104tHuUGL','NEAREST','createShader','compileShader','WebGL2\x20not\x20supported','getItem','classList','ARRAY_BUFFER','clientWidth','px\x20','11RPwhFl','createProgram','webgl2','uniform2f','_streng','gbc','DOMContentLoaded','737050ZoRTAq','log','clearRect','viewport','clear','setProperty','TEXTURE_WRAP_S','error','4.0','getUniformLocation','FLOAT','createTexture','120532BXKcqi','UNSIGNED_BYTE','add','width','enableVertexAttribArray','linkProgram','slice','canvas','getAttribLocation','.message-container','getShaderInfoLog','then','158526zSlkIT','uniform1f','position','TEXTURE_2D'];a0_0x8200=function(){return _0x4ac962;};return a0_0x8200();}async function setupShaders(){const _0x31f110=a0_0xe84c69,_0x378cf2=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x3b2fd6=await loadShaderSource(_0x31f110(0x1fc)),_0x1d27a7=createShader(gl['VERTEX_SHADER'],_0x378cf2),_0x1e7f1c=createShader(gl[_0x31f110(0x250)],_0x3b2fd6);return program=gl[_0x31f110(0x218)](),gl[_0x31f110(0x207)](program,_0x1d27a7),gl['attachShader'](program,_0x1e7f1c),gl[_0x31f110(0x22f)](program),gl['useProgram'](program),program;}function setupTexture(){const _0xb51697=a0_0xe84c69;texture=gl[_0xb51697(0x229)](),gl[_0xb51697(0x255)](gl[_0xb51697(0x239)],texture),gl['texParameteri'](gl[_0xb51697(0x239)],gl[_0xb51697(0x1fa)],gl[_0xb51697(0x20e)]),gl[_0xb51697(0x259)](gl['TEXTURE_2D'],gl['TEXTURE_MAG_FILTER'],gl[_0xb51697(0x20e)]),gl[_0xb51697(0x259)](gl[_0xb51697(0x239)],gl[_0xb51697(0x224)],gl[_0xb51697(0x23b)]),gl[_0xb51697(0x259)](gl[_0xb51697(0x239)],gl['TEXTURE_WRAP_T'],gl[_0xb51697(0x23b)]),gl[_0xb51697(0x21a)](gl[_0xb51697(0x227)](program,_0xb51697(0x20c)),gameWidth,gameHeight),gl[_0xb51697(0x21a)](gl[_0xb51697(0x227)](program,_0xb51697(0x25c)),gl[_0xb51697(0x231)][_0xb51697(0x22d)],gl['canvas'][_0xb51697(0x202)]),gl[_0xb51697(0x237)](gl[_0xb51697(0x227)](program,_0xb51697(0x242)),gameWidth/gl['canvas'][_0xb51697(0x22d)]),gl[_0xb51697(0x237)](gl[_0xb51697(0x227)](program,'smooth_height'),gameHeight/gl[_0xb51697(0x231)][_0xb51697(0x202)]);}function setupBuffers(){const _0x4525d7=a0_0xe84c69,_0x2370aa=gl[_0x4525d7(0x1f7)]();gl[_0x4525d7(0x23a)](gl[_0x4525d7(0x214)],_0x2370aa),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x42a795=gl['getAttribLocation'](program,_0x4525d7(0x238));gl[_0x4525d7(0x22e)](_0x42a795),gl[_0x4525d7(0x254)](_0x42a795,0x2,gl[_0x4525d7(0x228)],![],0x0,0x0);const _0x1cd279=gl['createBuffer']();gl[_0x4525d7(0x23a)](gl[_0x4525d7(0x214)],_0x1cd279),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4525d7(0x25b)]);const _0x2b323d=gl[_0x4525d7(0x232)](program,_0x4525d7(0x23e));gl['enableVertexAttribArray'](_0x2b323d),gl[_0x4525d7(0x254)](_0x2b323d,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0x1386fa){const _0xdef9d3=a0_0xe84c69,_0x2e654f=a0_0x22ab5f['getPixelData']();if(!_0x2e654f)return;await loadLUT64();for(let _0xb11f3=0x0;_0xb11f3<totalPixels;_0xb11f3++){const _0x2b384a=_0x2e654f[srcIndex++],_0x54ba0e=_0x2b384a>>0x2&0x3f,_0x1503ed=_0x2b384a>>0xa&0x3f,_0x49bc2e=_0x2b384a>>0x12&0x3f,_0xed5644=_0x54ba0e<<0xc|_0x1503ed<<0x6|_0x49bc2e,_0x4dcacf=(_0xed5644<<0x1)+_0xed5644;imageData[destIndex++]=lut64[_0x4dcacf],imageData[destIndex++]=lut64[_0x4dcacf+0x1],imageData[destIndex++]=lut64[_0x4dcacf+0x2],imageData[destIndex++]=0xff;}if(_0x1386fa===_0xdef9d3(0x219))gl[_0xdef9d3(0x255)](gl[_0xdef9d3(0x239)],texture),gl[_0xdef9d3(0x204)](gl['TEXTURE_2D'],0x0,gl[_0xdef9d3(0x244)],gameWidth,gameHeight,0x0,gl[_0xdef9d3(0x244)],gl[_0xdef9d3(0x22b)],imageData),gl[_0xdef9d3(0x222)](gl[_0xdef9d3(0x253)]),gl['drawArrays'](gl[_0xdef9d3(0x24e)],0x0,0x4);else _0x1386fa==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas[_0xdef9d3(0x256)]('2d',{'willReadFrequently':!![]}),ctx2d[_0xdef9d3(0x240)]=![]),(!imageDataObj||imageDataObj[_0xdef9d3(0x22d)]!==gameWidth||imageDataObj[_0xdef9d3(0x202)]!==gameHeight)&&(imageDataObj=new ImageData(gameWidth,gameHeight)),imageDataObj['data'][_0xdef9d3(0x206)](imageData),createImageBitmap(imageDataObj)[_0xdef9d3(0x235)](_0x5a539c=>{const _0x33f11f=_0xdef9d3;ctx2d[_0x33f11f(0x220)](0x0,0x0,bufferCanvas[_0x33f11f(0x22d)],bufferCanvas[_0x33f11f(0x202)]),ctx2d[_0x33f11f(0x201)](_0x5a539c,0x0,0x0),_0x5a539c[_0x33f11f(0x20a)]();}));requestAnimationFrame(()=>renderPixel(_0x1386fa));}export async function switchRenderMode(_0xd99547){const _0x2c111c=a0_0xe84c69;systemType=gameName['slice'](-0x3);if(_0xd99547==='2d')setupStyle('2d'),renderPixel('2d');else _0xd99547===_0x2c111c(0x219)&&(setupStyle(_0x2c111c(0x219)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x2c111c(0x219)));}document['addEventListener'](a0_0xe84c69(0x21d),function(){});