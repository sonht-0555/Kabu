const a0_0x454bde=a0_0x36f6;(function(_0x27ed41,_0x233a14){const _0x57b148=a0_0x36f6,_0x4a0e33=_0x27ed41();while(!![]){try{const _0x2df092=parseInt(_0x57b148(0xbf))/0x1*(-parseInt(_0x57b148(0xf3))/0x2)+-parseInt(_0x57b148(0xcc))/0x3+-parseInt(_0x57b148(0xdc))/0x4*(parseInt(_0x57b148(0xae))/0x5)+-parseInt(_0x57b148(0xd4))/0x6*(-parseInt(_0x57b148(0xe7))/0x7)+-parseInt(_0x57b148(0xdd))/0x8*(parseInt(_0x57b148(0xce))/0x9)+-parseInt(_0x57b148(0xbc))/0xa*(parseInt(_0x57b148(0x105))/0xb)+-parseInt(_0x57b148(0xfa))/0xc*(-parseInt(_0x57b148(0xc3))/0xd);if(_0x2df092===_0x233a14)break;else _0x4a0e33['push'](_0x4a0e33['shift']());}catch(_0x269487){_0x4a0e33['push'](_0x4a0e33['shift']());}}}(a0_0x525f,0xbe55e));function a0_0x36f6(_0x4d9909,_0x103b77){const _0x525fc2=a0_0x525f();return a0_0x36f6=function(_0x36f618,_0x103efe){_0x36f618=_0x36f618-0xa4;let _0x9cfb67=_0x525fc2[_0x36f618];return _0x9cfb67;},a0_0x36f6(_0x4d9909,_0x103b77);}import*as a0_0x5aa11d from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;function a0_0x525f(){const _0x289481=['82589NFdwnf','clear','log','px\x20','forEach','--bg-size','texParameteri','zoom','imageRendering','3265836rPCVgK','0,0,','27yPpqyr','texcoord','getShaderInfoLog','slice','devicePixelRatio','classList','84wZKmuV','style','createBuffer','textured','enableVertexAttribArray','getShaderParameter','error','shaderSource','1932184rYSYIc','2711496iWmZCk','viewport','./src/shaders/vertexShader.glsl','gbc','clientWidth','add','deleteShader','FLOAT','VERTEX_SHADER','then','61761sAoxbu','createProgram','querySelectorAll','getPixelData','render_size','UNSIGNED_BYTE','getAttribLocation','smooth_height','4.0','getContext','screenSize','transformOrigin','122ihoLIX','set','transform','bindBuffer','TEXTURE_2D','fefs','.bin','9552jWCUVp','./src/lut/lut64_','COLOR_BUFFER_BIT','TEXTURE_MAG_FILTER','CLAMP_TO_EDGE','addEventListener','webgl2','game_size','crisp-edges','scale(','bindTexture','12345817MOEOCo','_temperature','height','drawImage','floor','setItem','warm','text','texImage2D','ARRAY_BUFFER','_streng','canvas','10OzzJaX','documentElement','uniform2f','bufferData','RGBA','STATIC_DRAW','width','.stateTitle,\x20.stateDate','NEAREST','compileShader','getElementById','getUniformLocation','TEXTURE_WRAP_T','vertexAttribPointer','10zVsYki','attachShader','getItem','3394afVexC','top\x20center','clearRect','smooth_width'];a0_0x525f=function(){return _0x289481;};return a0_0x525f();}const textured=document[a0_0x454bde(0xb8)](a0_0x454bde(0xd7)),bufferCanvas=document['getElementById'](a0_0x454bde(0xad)),canvasContainer=document[a0_0x454bde(0xb8)]('canvas-container'),imgShader=document[a0_0x454bde(0xb8)]('img-shader'),settingContainer=document[a0_0x454bde(0xe9)]('.setting-container'),messageContainer=document[a0_0x454bde(0xe9)]('.message-container'),stateTitle=document['querySelectorAll'](a0_0x454bde(0xb5));let imageDataObj=null;async function loadLUT64(){const _0x575d1a=a0_0x454bde;systemType=gameName[_0x575d1a(0xd1)](-0x3);const _0x28697b=localStorage[_0x575d1a(0xbe)](gameName+_0x575d1a(0xac))||_0x575d1a(0xef),_0x4e2a49=(localStorage[_0x575d1a(0xbe)](gameName+_0x575d1a(0x106))||_0x575d1a(0xa8))['toLowerCase']();if(!lut64||lut64Streng!==_0x28697b||lut64Profile!==_0x4e2a49){const _0x35529d=_0x575d1a(0xfb)+_0x4e2a49+'_'+_0x28697b+_0x575d1a(0xf9);console[_0x575d1a(0xc5)](_0x35529d);const _0x391d8b=await fetch(_0x35529d),_0x258acc=await _0x391d8b['arrayBuffer']();lut64=new Uint8Array(_0x258acc),lut64Streng=_0x28697b,lut64Profile=_0x4e2a49;}}async function loadShaderSource(_0xfcb0ba){const _0xe36255=a0_0x454bde,_0x4b67fc=await fetch(_0xfcb0ba);return await _0x4b67fc[_0xe36255(0xa9)]();}function setupStyle(_0x5a65cb){const _0x2a1e8a=a0_0x454bde;clientWidth=document[_0x2a1e8a(0xaf)][_0x2a1e8a(0xe1)];const _0x33b217=window[_0x2a1e8a(0xd2)];systemType===_0x2a1e8a(0xe0)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x2a1e8a(0xa6)](clientWidth*_0x33b217/gameWidth),localStorage[_0x2a1e8a(0xa7)](_0x2a1e8a(0xf1),_0x2a1e8a(0xcd)+gameWidth*(integerScaling/_0x33b217)+','+gameHeight*(integerScaling/_0x33b217))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x33b217/gameWidth),localStorage['setItem'](_0x2a1e8a(0xf1),'0,0,'+gameWidth*(integerScaling/_0x33b217)+','+gameHeight*(integerScaling/_0x33b217)));if(_0x5a65cb==='2d')bufferCanvas[_0x2a1e8a(0xb4)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x2a1e8a(0xd5)][_0x2a1e8a(0xca)]=''+integerScaling/_0x33b217,bufferCanvas['style']['imageRendering']=_0x2a1e8a(0x102),canvasContainer['style']['width']=gameWidth*(integerScaling/_0x33b217)+'px',canvasContainer[_0x2a1e8a(0xd5)][_0x2a1e8a(0xa4)]=gameHeight*(integerScaling/_0x33b217)+'px',textured[_0x2a1e8a(0xd5)][_0x2a1e8a(0xb4)]=gameWidth*(integerScaling/_0x33b217)+'px',textured[_0x2a1e8a(0xd5)][_0x2a1e8a(0xa4)]=gameHeight*(integerScaling/_0x33b217)+'px',imgShader[_0x2a1e8a(0xd5)][_0x2a1e8a(0xf5)]='scale('+integerScaling/_0x33b217/upscaleShader+')',settingContainer[_0x2a1e8a(0xc7)](function(_0x55df89){const _0x592de9=_0x2a1e8a;_0x55df89['style'][_0x592de9(0xb4)]=gameWidth*(integerScaling/_0x33b217)+'px',_0x55df89[_0x592de9(0xd5)][_0x592de9(0xa4)]=gameHeight*(integerScaling/_0x33b217)+'px';}),messageContainer['forEach'](function(_0x42e0c8){const _0x41f07f=_0x2a1e8a;_0x42e0c8[_0x41f07f(0xd5)][_0x41f07f(0xb4)]=gameWidth+'px',_0x42e0c8[_0x41f07f(0xd5)][_0x41f07f(0xa4)]=gameHeight+'px',_0x42e0c8['style']['zoom']=''+integerScaling/_0x33b217;}),stateTitle[_0x2a1e8a(0xc7)](function(_0x2bfc11){const _0x33f8b7=_0x2a1e8a;_0x2bfc11[_0x33f8b7(0xd3)]['remove'](_0x33f8b7(0xf8));});else _0x5a65cb===_0x2a1e8a(0x100)&&(bufferCanvas[_0x2a1e8a(0xb4)]=clientWidth*upscaleFactor,bufferCanvas[_0x2a1e8a(0xa4)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x2a1e8a(0xca)]=''+0x1/upscaleFactor,bufferCanvas[_0x2a1e8a(0xd5)][_0x2a1e8a(0xcb)]='',canvasContainer['style'][_0x2a1e8a(0xb4)]=clientWidth+'px',canvasContainer[_0x2a1e8a(0xd5)][_0x2a1e8a(0xa4)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x2a1e8a(0xd5)][_0x2a1e8a(0xb4)]=clientWidth+'px',textured['style'][_0x2a1e8a(0xa4)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x2a1e8a(0xd5)]['transform']=_0x2a1e8a(0x103)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x2a1e8a(0xc7)](function(_0x120540){const _0x1c689a=_0x2a1e8a;_0x120540[_0x1c689a(0xd5)][_0x1c689a(0xb4)]=clientWidth+'px',_0x120540[_0x1c689a(0xd5)][_0x1c689a(0xa4)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x2a1e8a(0xc7)](function(_0x3c5f9a){const _0x4aa490=_0x2a1e8a;_0x3c5f9a[_0x4aa490(0xd5)][_0x4aa490(0xb4)]=gameWidth+'px',_0x3c5f9a[_0x4aa490(0xd5)][_0x4aa490(0xa4)]=gameHeight+'px',_0x3c5f9a[_0x4aa490(0xd5)]['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x2a1e8a(0xc7)](function(_0x2c681b){const _0x1bc5bf=_0x2a1e8a;_0x2c681b[_0x1bc5bf(0xd3)][_0x1bc5bf(0xe2)](_0x1bc5bf(0xf8));}));imgShader['style'][_0x2a1e8a(0xb4)]=gameWidth*upscaleShader+'px',imgShader[_0x2a1e8a(0xd5)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x2a1e8a(0xd5)][_0x2a1e8a(0xf2)]=_0x2a1e8a(0xc0),imgShader[_0x2a1e8a(0xd5)]['setProperty'](_0x2a1e8a(0xc8),upscaleShader+_0x2a1e8a(0xc6)+upscaleShader+'px');}function setupWebGL(){const _0x53092b=a0_0x454bde;gl=bufferCanvas[_0x53092b(0xf0)]('webgl2');if(!gl)return console[_0x53092b(0xda)]('WebGL2\x20not\x20supported'),null;gl[_0x53092b(0xde)](0x0,0x0,bufferCanvas[_0x53092b(0xb4)],bufferCanvas['height']);}function createShader(_0x28a461,_0x826a5a){const _0x212b24=a0_0x454bde,_0x1f9112=gl['createShader'](_0x28a461);gl[_0x212b24(0xdb)](_0x1f9112,_0x826a5a),gl[_0x212b24(0xb7)](_0x1f9112);if(!gl[_0x212b24(0xd9)](_0x1f9112,gl['COMPILE_STATUS']))return console[_0x212b24(0xda)](gl[_0x212b24(0xd0)](_0x1f9112)),gl[_0x212b24(0xe3)](_0x1f9112),null;return _0x1f9112;}async function setupShaders(){const _0x243169=a0_0x454bde,_0x45c47d=await loadShaderSource(_0x243169(0xdf)),_0x4ff443=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x17a6f9=createShader(gl[_0x243169(0xe5)],_0x45c47d),_0x20013a=createShader(gl['FRAGMENT_SHADER'],_0x4ff443);return program=gl[_0x243169(0xe8)](),gl[_0x243169(0xbd)](program,_0x17a6f9),gl[_0x243169(0xbd)](program,_0x20013a),gl['linkProgram'](program),gl['useProgram'](program),program;}function setupTexture(){const _0x5592ea=a0_0x454bde;texture=gl['createTexture'](),gl[_0x5592ea(0x104)](gl[_0x5592ea(0xf7)],texture),gl[_0x5592ea(0xc9)](gl[_0x5592ea(0xf7)],gl['TEXTURE_MIN_FILTER'],gl[_0x5592ea(0xb6)]),gl['texParameteri'](gl[_0x5592ea(0xf7)],gl[_0x5592ea(0xfd)],gl[_0x5592ea(0xb6)]),gl[_0x5592ea(0xc9)](gl[_0x5592ea(0xf7)],gl['TEXTURE_WRAP_S'],gl[_0x5592ea(0xfe)]),gl[_0x5592ea(0xc9)](gl[_0x5592ea(0xf7)],gl[_0x5592ea(0xba)],gl[_0x5592ea(0xfe)]),gl[_0x5592ea(0xb0)](gl['getUniformLocation'](program,_0x5592ea(0x101)),gameWidth,gameHeight),gl[_0x5592ea(0xb0)](gl[_0x5592ea(0xb9)](program,_0x5592ea(0xeb)),gl['canvas']['width'],gl['canvas'][_0x5592ea(0xa4)]),gl['uniform1f'](gl[_0x5592ea(0xb9)](program,_0x5592ea(0xc2)),gameWidth/gl['canvas'][_0x5592ea(0xb4)]),gl['uniform1f'](gl[_0x5592ea(0xb9)](program,_0x5592ea(0xee)),gameHeight/gl[_0x5592ea(0xad)][_0x5592ea(0xa4)]);}function setupBuffers(){const _0x7e29fc=a0_0x454bde,_0x5499f7=gl[_0x7e29fc(0xd6)]();gl['bindBuffer'](gl[_0x7e29fc(0xab)],_0x5499f7),gl[_0x7e29fc(0xb1)](gl[_0x7e29fc(0xab)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x7e29fc(0xb3)]);const _0x59b538=gl[_0x7e29fc(0xed)](program,'position');gl['enableVertexAttribArray'](_0x59b538),gl[_0x7e29fc(0xbb)](_0x59b538,0x2,gl[_0x7e29fc(0xe4)],![],0x0,0x0);const _0x28f46d=gl[_0x7e29fc(0xd6)]();gl[_0x7e29fc(0xf6)](gl[_0x7e29fc(0xab)],_0x28f46d),gl['bufferData'](gl[_0x7e29fc(0xab)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x7e29fc(0xb3)]);const _0x1fea52=gl[_0x7e29fc(0xed)](program,_0x7e29fc(0xcf));gl[_0x7e29fc(0xd8)](_0x1fea52),gl[_0x7e29fc(0xbb)](_0x1fea52,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0x247858){const _0x219ee1=a0_0x454bde,_0x50cba0=a0_0x5aa11d[_0x219ee1(0xea)]();if(!_0x50cba0)return;await loadLUT64();const _0x34a748=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x440b71=0x0;_0x440b71<gameHeight;_0x440b71++){for(let _0x18bcec=0x0;_0x18bcec<gameWidth;_0x18bcec++){const _0x3f9f52=_0x440b71*gameStride+_0x18bcec,_0x20c1f4=(_0x440b71*gameWidth+_0x18bcec)*0x4,_0x303401=_0x50cba0[_0x3f9f52],_0x7ce978=(_0x303401&0xff)>>0x2,_0x5c7f0f=(_0x303401>>0x8&0xff)>>0x2,_0x2c9186=(_0x303401>>0x10&0xff)>>0x2,_0x8410ab=(_0x7ce978*0x40*0x40+_0x5c7f0f*0x40+_0x2c9186)*0x3;_0x34a748[_0x20c1f4]=lut64[_0x8410ab],_0x34a748[_0x20c1f4+0x1]=lut64[_0x8410ab+0x1],_0x34a748[_0x20c1f4+0x2]=lut64[_0x8410ab+0x2],_0x34a748[_0x20c1f4+0x3]=0xff;}}if(_0x247858===_0x219ee1(0x100))gl[_0x219ee1(0x104)](gl['TEXTURE_2D'],texture),gl[_0x219ee1(0xaa)](gl[_0x219ee1(0xf7)],0x0,gl[_0x219ee1(0xb2)],gameWidth,gameHeight,0x0,gl[_0x219ee1(0xb2)],gl[_0x219ee1(0xec)],_0x34a748),gl[_0x219ee1(0xc4)](gl[_0x219ee1(0xfc)]),gl['drawArrays'](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x247858==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d',{'alpha':![]}),ctx2d['imageSmoothingEnabled']=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj['data'][_0x219ee1(0xf4)](_0x34a748),createImageBitmap(imageDataObj)[_0x219ee1(0xe6)](_0x2d2c71=>{const _0x582073=_0x219ee1;ctx2d[_0x582073(0xc1)](0x0,0x0,bufferCanvas[_0x582073(0xb4)],bufferCanvas['height']),ctx2d[_0x582073(0xa5)](_0x2d2c71,0x0,0x0),_0x2d2c71['close']();}));requestAnimationFrame(()=>renderPixel(_0x247858));}export async function switchRenderMode(_0x46c798){const _0x4b7233=a0_0x454bde;systemType=gameName[_0x4b7233(0xd1)](-0x3);if(_0x46c798==='2d')setupStyle('2d'),renderPixel('2d');else _0x46c798===_0x4b7233(0x100)&&(setupStyle('webgl2'),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x4b7233(0x100)));}document[a0_0x454bde(0xff)]('DOMContentLoaded',function(){});