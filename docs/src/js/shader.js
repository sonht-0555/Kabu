const a0_0x47d420=a0_0x7775;(function(_0x3ae444,_0x3cbc2a){const _0x178d84=a0_0x7775,_0x3912b4=_0x3ae444();while(!![]){try{const _0x5d905d=parseInt(_0x178d84(0x189))/0x1*(-parseInt(_0x178d84(0x1a9))/0x2)+parseInt(_0x178d84(0x15b))/0x3*(parseInt(_0x178d84(0x194))/0x4)+-parseInt(_0x178d84(0x154))/0x5+-parseInt(_0x178d84(0x15c))/0x6+-parseInt(_0x178d84(0x17a))/0x7+-parseInt(_0x178d84(0x18c))/0x8*(-parseInt(_0x178d84(0x15f))/0x9)+parseInt(_0x178d84(0x18a))/0xa*(parseInt(_0x178d84(0x15a))/0xb);if(_0x5d905d===_0x3cbc2a)break;else _0x3912b4['push'](_0x3912b4['shift']());}catch(_0x44dbf4){_0x3912b4['push'](_0x3912b4['shift']());}}}(a0_0x8e29,0x31725));import*as a0_0x34030e from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x47d420(0x188)](a0_0x47d420(0x186)),bufferCanvas=document[a0_0x47d420(0x188)]('canvas'),canvasContainer=document[a0_0x47d420(0x188)]('canvas-container'),imgShader=document['getElementById'](a0_0x47d420(0x15d)),settingContainer=document['querySelectorAll'](a0_0x47d420(0x198)),messageContainer=document['querySelectorAll']('.message-container'),stateTitle=document[a0_0x47d420(0x1a7)]('.stateTitle,\x20.stateDate');let imageDataObj=null;async function loadLUT64(){const _0x411626=a0_0x47d420;systemType=gameName[_0x411626(0x179)](-0x3);const _0x463198=localStorage['getItem'](gameName+_0x411626(0x158))||_0x411626(0x168),_0x309d7c=(localStorage[_0x411626(0x166)](gameName+'_temperature')||_0x411626(0x19c))[_0x411626(0x19f)]();if(!lut64||lut64Streng!==_0x463198||lut64Profile!==_0x309d7c){const _0x80abd4=_0x411626(0x14c)+_0x309d7c+'_'+_0x463198+_0x411626(0x17b);console[_0x411626(0x16b)](_0x80abd4);const _0x1859bb=await fetch(_0x80abd4),_0x12c7ca=await _0x1859bb[_0x411626(0x199)]();lut64=new Uint8Array(_0x12c7ca),lut64Streng=_0x463198,lut64Profile=_0x309d7c;}}async function loadShaderSource(_0x32bfeb){const _0x1e1cf4=a0_0x47d420,_0x21ac2c=await fetch(_0x32bfeb);return await _0x21ac2c[_0x1e1cf4(0x17e)]();}function a0_0x7775(_0x3952fa,_0x465890){const _0x8e2912=a0_0x8e29();return a0_0x7775=function(_0x7775ca,_0x150066){_0x7775ca=_0x7775ca-0x14b;let _0x2ed8f0=_0x8e2912[_0x7775ca];return _0x2ed8f0;},a0_0x7775(_0x3952fa,_0x465890);}function setupStyle(_0x6f05dc){const _0x3fe050=a0_0x47d420;clientWidth=document[_0x3fe050(0x171)][_0x3fe050(0x1a1)];const _0x12e166=window[_0x3fe050(0x170)];systemType===_0x3fe050(0x18e)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x12e166/gameWidth),localStorage[_0x3fe050(0x1ab)]('screenSize',_0x3fe050(0x152)+gameWidth*(integerScaling/_0x12e166)+','+gameHeight*(integerScaling/_0x12e166))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x12e166/gameWidth),localStorage['setItem'](_0x3fe050(0x181),_0x3fe050(0x152)+gameWidth*(integerScaling/_0x12e166)+','+gameHeight*(integerScaling/_0x12e166)));if(_0x6f05dc==='2d')bufferCanvas[_0x3fe050(0x160)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas['style'][_0x3fe050(0x164)]=''+integerScaling/_0x12e166,bufferCanvas[_0x3fe050(0x176)][_0x3fe050(0x17c)]=_0x3fe050(0x156),canvasContainer[_0x3fe050(0x176)]['width']=gameWidth*(integerScaling/_0x12e166)+'px',canvasContainer['style'][_0x3fe050(0x1a6)]=gameHeight*(integerScaling/_0x12e166)+'px',textured['style']['width']=gameWidth*(integerScaling/_0x12e166)+'px',textured['style']['height']=gameHeight*(integerScaling/_0x12e166)+'px',imgShader[_0x3fe050(0x176)]['transform']=_0x3fe050(0x1a4)+integerScaling/_0x12e166/upscaleShader+')',settingContainer[_0x3fe050(0x180)](function(_0x6198e0){const _0x889323=_0x3fe050;_0x6198e0[_0x889323(0x176)][_0x889323(0x160)]=gameWidth*(integerScaling/_0x12e166)+'px',_0x6198e0[_0x889323(0x176)]['height']=gameHeight*(integerScaling/_0x12e166)+'px';}),messageContainer[_0x3fe050(0x180)](function(_0x5a6f65){const _0x575885=_0x3fe050;_0x5a6f65[_0x575885(0x176)][_0x575885(0x160)]=gameWidth+'px',_0x5a6f65[_0x575885(0x176)][_0x575885(0x1a6)]=gameHeight+'px',_0x5a6f65['style'][_0x575885(0x164)]=''+integerScaling/_0x12e166;}),stateTitle['forEach'](function(_0x5e09b3){const _0x1f250a=_0x3fe050;_0x5e09b3[_0x1f250a(0x18b)][_0x1f250a(0x14d)]('fefs');});else _0x6f05dc===_0x3fe050(0x14f)&&(bufferCanvas[_0x3fe050(0x160)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x3fe050(0x164)]=''+0x1/upscaleFactor,bufferCanvas[_0x3fe050(0x176)][_0x3fe050(0x17c)]='',canvasContainer[_0x3fe050(0x176)]['width']=clientWidth+'px',canvasContainer[_0x3fe050(0x176)][_0x3fe050(0x1a6)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x3fe050(0x176)][_0x3fe050(0x160)]=clientWidth+'px',textured['style'][_0x3fe050(0x1a6)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x3fe050(0x176)][_0x3fe050(0x193)]=_0x3fe050(0x1a4)+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x245c0e){const _0x1aca1e=_0x3fe050;_0x245c0e[_0x1aca1e(0x176)][_0x1aca1e(0x160)]=clientWidth+'px',_0x245c0e[_0x1aca1e(0x176)][_0x1aca1e(0x1a6)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x3fe050(0x180)](function(_0x5a685e){const _0x34a53c=_0x3fe050;_0x5a685e[_0x34a53c(0x176)][_0x34a53c(0x160)]=gameWidth+'px',_0x5a685e[_0x34a53c(0x176)]['height']=gameHeight+'px',_0x5a685e[_0x34a53c(0x176)]['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x3fe050(0x180)](function(_0x1dba8f){const _0x16d32a=_0x3fe050;_0x1dba8f[_0x16d32a(0x18b)][_0x16d32a(0x161)]('fefs');}));imgShader['style'][_0x3fe050(0x160)]=gameWidth*upscaleShader+'px',imgShader[_0x3fe050(0x176)][_0x3fe050(0x1a6)]=gameHeight*upscaleShader+'px',imgShader['style']['transformOrigin']=_0x3fe050(0x150),imgShader[_0x3fe050(0x176)]['setProperty'](_0x3fe050(0x18d),upscaleShader+_0x3fe050(0x18f)+upscaleShader+'px');}function setupWebGL(){const _0x8215cb=a0_0x47d420;gl=bufferCanvas[_0x8215cb(0x195)](_0x8215cb(0x14f));if(!gl)return console[_0x8215cb(0x1ae)](_0x8215cb(0x178)),null;gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x8215cb(0x1a6)]);}function createShader(_0x1a2036,_0x5b0d22){const _0x5a3055=a0_0x47d420,_0x15b9ce=gl['createShader'](_0x1a2036);gl[_0x5a3055(0x157)](_0x15b9ce,_0x5b0d22),gl['compileShader'](_0x15b9ce);if(!gl[_0x5a3055(0x1a5)](_0x15b9ce,gl['COMPILE_STATUS']))return console[_0x5a3055(0x1ae)](gl[_0x5a3055(0x183)](_0x15b9ce)),gl[_0x5a3055(0x15e)](_0x15b9ce),null;return _0x15b9ce;}async function setupShaders(){const _0x180604=a0_0x47d420,_0x489b9d=await loadShaderSource(_0x180604(0x14b)),_0x9136=await loadShaderSource(_0x180604(0x187)),_0x1e205d=createShader(gl[_0x180604(0x162)],_0x489b9d),_0x12a5c5=createShader(gl[_0x180604(0x191)],_0x9136);return program=gl['createProgram'](),gl[_0x180604(0x1a2)](program,_0x1e205d),gl[_0x180604(0x1a2)](program,_0x12a5c5),gl['linkProgram'](program),gl[_0x180604(0x163)](program),program;}function setupTexture(){const _0x359eaf=a0_0x47d420;texture=gl[_0x359eaf(0x196)](),gl[_0x359eaf(0x17d)](gl[_0x359eaf(0x182)],texture),gl['texParameteri'](gl[_0x359eaf(0x182)],gl[_0x359eaf(0x169)],gl[_0x359eaf(0x185)]),gl[_0x359eaf(0x1ad)](gl[_0x359eaf(0x182)],gl[_0x359eaf(0x192)],gl[_0x359eaf(0x185)]),gl[_0x359eaf(0x1ad)](gl[_0x359eaf(0x182)],gl['TEXTURE_WRAP_S'],gl[_0x359eaf(0x1a0)]),gl[_0x359eaf(0x1ad)](gl['TEXTURE_2D'],gl[_0x359eaf(0x153)],gl['CLAMP_TO_EDGE']),gl['uniform2f'](gl['getUniformLocation'](program,'game_size'),gameWidth,gameHeight),gl[_0x359eaf(0x19a)](gl[_0x359eaf(0x19e)](program,_0x359eaf(0x167)),gl[_0x359eaf(0x1ac)][_0x359eaf(0x160)],gl[_0x359eaf(0x1ac)][_0x359eaf(0x1a6)]),gl[_0x359eaf(0x165)](gl[_0x359eaf(0x19e)](program,_0x359eaf(0x19d)),gameWidth/gl[_0x359eaf(0x1ac)][_0x359eaf(0x160)]),gl[_0x359eaf(0x165)](gl[_0x359eaf(0x19e)](program,_0x359eaf(0x16d)),gameHeight/gl['canvas']['height']);}function setupBuffers(){const _0x29c64b=a0_0x47d420,_0x29370f=gl['createBuffer']();gl['bindBuffer'](gl[_0x29c64b(0x1aa)],_0x29370f),gl[_0x29c64b(0x155)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x29c64b(0x16f)]);const _0x17e6d3=gl[_0x29c64b(0x172)](program,'position');gl[_0x29c64b(0x174)](_0x17e6d3),gl[_0x29c64b(0x151)](_0x17e6d3,0x2,gl['FLOAT'],![],0x0,0x0);const _0x365fce=gl['createBuffer']();gl[_0x29c64b(0x190)](gl[_0x29c64b(0x1aa)],_0x365fce),gl['bufferData'](gl[_0x29c64b(0x1aa)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x29c64b(0x16f)]);const _0x16ec96=gl[_0x29c64b(0x172)](program,'texcoord');gl['enableVertexAttribArray'](_0x16ec96),gl[_0x29c64b(0x151)](_0x16ec96,0x2,gl['FLOAT'],![],0x0,0x0);}function a0_0x8e29(){const _0x570f94=['.setting-container','arrayBuffer','uniform2f','drawImage','warm','smooth_width','getUniformLocation','toLowerCase','CLAMP_TO_EDGE','clientWidth','attachShader','rTable','scale(','getShaderParameter','height','querySelectorAll','texImage2D','134eAYOYq','ARRAY_BUFFER','setItem','canvas','texParameteri','error','./src/shaders/vertexShader.glsl','./src/lut/lut64_','remove','UNSIGNED_BYTE','webgl2','top\x20center','vertexAttribPointer','0,0,','TEXTURE_WRAP_T','433860CPOXXH','bufferData','crisp-edges','shaderSource','_streng','addEventListener','8866JOYbNX','30372uohuRo','2409672SnRvXB','img-shader','deleteShader','9FKqYYe','width','add','VERTEX_SHADER','useProgram','zoom','uniform1f','getItem','render_size','4.0','TEXTURE_MIN_FILTER','then','log','drawArrays','smooth_height','TRIANGLE_STRIP','STATIC_DRAW','devicePixelRatio','documentElement','getAttribLocation','imageSmoothingEnabled','enableVertexAttribArray','bTable','style','COLOR_BUFFER_BIT','WebGL2\x20not\x20supported','slice','2754577vOrxzw','.bin','imageRendering','bindTexture','text','getPixelData','forEach','screenSize','TEXTURE_2D','getShaderInfoLog','clear','NEAREST','textured','./src/shaders/fragmentShader.glsl','getElementById','257KhFtbL','10510FkKdbe','classList','740456PCVcAQ','--bg-size','gbc','px\x20','bindBuffer','FRAGMENT_SHADER','TEXTURE_MAG_FILTER','transform','64vBldkd','getContext','createTexture','gTable'];a0_0x8e29=function(){return _0x570f94;};return a0_0x8e29();}async function renderPixel(_0x2ab095){const _0x3315d6=a0_0x47d420,_0xd40ff4=a0_0x34030e[_0x3315d6(0x17f)]();if(!_0xd40ff4)return;await loadLUT64();const _0x2129cf=new Uint8ClampedArray(gameWidth*gameHeight*0x4);if(!window[_0x3315d6(0x1a3)]){window['rTable']=new Uint32Array(0x100),window['gTable']=new Uint32Array(0x100),window['bTable']=new Uint32Array(0x100);for(let _0x4d1544=0x0;_0x4d1544<0x100;_0x4d1544++){window[_0x3315d6(0x1a3)][_0x4d1544]=(_0x4d1544>>0x2)*0x40*0x40*0x3,window[_0x3315d6(0x197)][_0x4d1544]=(_0x4d1544>>0x2)*0x40*0x3,window[_0x3315d6(0x175)][_0x4d1544]=(_0x4d1544>>0x2)*0x3;}}let _0xacebf0=0x0,_0xd09bbf=0x0;for(let _0x333271=0x0;_0x333271<gameHeight;_0x333271++){for(let _0x1ffdca=0x0;_0x1ffdca<gameWidth;_0x1ffdca++){const _0x25e0bf=_0xd40ff4[_0xd09bbf+_0x1ffdca],_0x38063c=_0x25e0bf&0xff,_0x552fd9=_0x25e0bf>>0x8&0xff,_0x403b85=_0x25e0bf>>0x10&0xff,_0x5dffcb=window[_0x3315d6(0x1a3)][_0x38063c]+window['gTable'][_0x552fd9]+window['bTable'][_0x403b85];_0x2129cf[_0xacebf0]=lut64[_0x5dffcb],_0x2129cf[_0xacebf0+0x1]=lut64[_0x5dffcb+0x1],_0x2129cf[_0xacebf0+0x2]=lut64[_0x5dffcb+0x2],_0x2129cf[_0xacebf0+0x3]=0xff,_0xacebf0+=0x4;}_0xd09bbf+=gameStride;}if(_0x2ab095===_0x3315d6(0x14f))gl['bindTexture'](gl['TEXTURE_2D'],texture),gl[_0x3315d6(0x1a8)](gl['TEXTURE_2D'],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x3315d6(0x14e)],_0x2129cf),gl[_0x3315d6(0x184)](gl[_0x3315d6(0x177)]),gl[_0x3315d6(0x16c)](gl[_0x3315d6(0x16e)],0x0,0x4);else _0x2ab095==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d',{'alpha':![]}),ctx2d[_0x3315d6(0x173)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj['data']['set'](_0x2129cf),createImageBitmap(imageDataObj)[_0x3315d6(0x16a)](_0x5cfeaa=>{const _0x38ef9e=_0x3315d6;ctx2d['clearRect'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x38ef9e(0x1a6)]),ctx2d[_0x38ef9e(0x19b)](_0x5cfeaa,0x0,0x0),_0x5cfeaa['close']();}));requestAnimationFrame(()=>renderPixel(_0x2ab095));}export async function switchRenderMode(_0x1306e5){const _0x3f582d=a0_0x47d420;systemType=gameName[_0x3f582d(0x179)](-0x3);if(_0x1306e5==='2d')setupStyle('2d'),renderPixel('2d');else _0x1306e5===_0x3f582d(0x14f)&&(setupStyle(_0x3f582d(0x14f)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x47d420(0x159)]('DOMContentLoaded',function(){});