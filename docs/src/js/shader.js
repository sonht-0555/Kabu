(function(_0x34a0f8,_0x141cab){const _0x376a10=a0_0x2762,_0x2a560d=_0x34a0f8();while(!![]){try{const _0x11fa9f=-parseInt(_0x376a10(0xe3))/0x1*(parseInt(_0x376a10(0xf8))/0x2)+parseInt(_0x376a10(0x10f))/0x3+-parseInt(_0x376a10(0x11c))/0x4+-parseInt(_0x376a10(0xf6))/0x5+-parseInt(_0x376a10(0x104))/0x6+parseInt(_0x376a10(0x106))/0x7+parseInt(_0x376a10(0xfe))/0x8;if(_0x11fa9f===_0x141cab)break;else _0x2a560d['push'](_0x2a560d['shift']());}catch(_0x494348){_0x2a560d['push'](_0x2a560d['shift']());}}}(a0_0x436c,0x93124));import*as a0_0x111785 from'./main.js';function a0_0x2762(_0xd75727,_0x1e9629){const _0x436c10=a0_0x436c();return a0_0x2762=function(_0x2762ad,_0x288658){_0x2762ad=_0x2762ad-0xe3;let _0x33973f=_0x436c10[_0x2762ad];return _0x33973f;},a0_0x2762(_0xd75727,_0x1e9629);}function a0_0x436c(){const _0x3e0197=['position','_streng','toLowerCase','.bin','NEAREST','STATIC_DRAW','texcoord','getContext','getPixelData','linkProgram','webgl','slice','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','arrayBuffer','2632165KbuLCQ','render_size','6950oxyzGw','clearRect','viewport','_temperature','TEXTURE_2D','low-power','18990736CFzDIb','TEXTURE_MAG_FILTER','bufferData','TRIANGLE_STRIP','createShader','uniform2f','2694744biSEpQ','smooth_width','2197384jrURwt','smooth_height','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','getAttribLocation','RGBA','createTexture','4.0','bindTexture','imageSmoothingEnabled','827073NlkXbZ','uniform1f','getItem','webgl_full','UNSIGNED_BYTE','enableVertexAttribArray','height','FLOAT','ARRAY_BUFFER','bindBuffer','useProgram','texImage2D','warm','3860036VGfkrB','vertexAttribPointer','texParameteri','getUniformLocation','shaderSource','TEXTURE_WRAP_T','compileShader','attachShader','clear','canvas','CLAMP_TO_EDGE','VERTEX_SHADER','121yfuTMl','width','createBuffer','FRAGMENT_SHADER','drawArrays'];a0_0x436c=function(){return _0x3e0197;};return a0_0x436c();}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x3dd226=a0_0x2762;systemType=gameName[_0x3dd226(0xf3)](-0x3);const _0x56abf1=localStorage['getItem'](gameName+_0x3dd226(0xe9))||_0x3dd226(0x10c),_0x1837bb=(localStorage[_0x3dd226(0x111)](gameName+_0x3dd226(0xfb))||_0x3dd226(0x11b))[_0x3dd226(0xea)]();if(!lut64||lut64Streng!==_0x56abf1||lut64Profile!==_0x1837bb){const _0x324218='./src/lut/lut64_'+_0x1837bb+'_'+_0x56abf1+_0x3dd226(0xeb);console['log'](_0x324218);const _0x25c359=await fetch(_0x324218),_0x59833d=await _0x25c359[_0x3dd226(0xf5)]();lut64=new Uint8Array(_0x59833d),lut64Streng=_0x56abf1,lut64Profile=_0x1837bb;}}function setupWebGL_Shader(_0x3aaa9b){const _0x273b53=a0_0x2762;gl=bufferCanvas[_0x273b53(0xef)](_0x273b53(0xf2),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x273b53(0xfd)}),gl[_0x273b53(0xfa)](0x0,0x0,bufferCanvas[_0x273b53(0xe4)],bufferCanvas[_0x273b53(0x115)]);function _0x54739d(_0x418f96,_0x5a51a7){const _0x47398f=_0x273b53,_0x455bec=gl[_0x47398f(0x102)](_0x418f96);return gl[_0x47398f(0x120)](_0x455bec,_0x5a51a7),gl[_0x47398f(0x122)](_0x455bec),_0x455bec;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x3aaa9b==='webgl')fs=_0x273b53(0xf4);else _0x3aaa9b===_0x273b53(0x112)&&(fs=_0x273b53(0x108));const _0x405d4f=_0x54739d(gl[_0x273b53(0x127)],vs),_0x2c9a3c=_0x54739d(gl[_0x273b53(0xe6)],fs);return program=gl['createProgram'](),gl['attachShader'](program,_0x405d4f),gl[_0x273b53(0x123)](program,_0x2c9a3c),gl[_0x273b53(0xf1)](program),gl[_0x273b53(0x119)](program),program;}function setupTexture_Buffer(_0xe73770){const _0xb9737=a0_0x2762;texture=gl[_0xb9737(0x10b)](),gl[_0xb9737(0x10d)](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl[_0xb9737(0xfc)],gl['TEXTURE_MIN_FILTER'],gl['NEAREST']),gl[_0xb9737(0x11e)](gl[_0xb9737(0xfc)],gl[_0xb9737(0xff)],gl[_0xb9737(0xec)]),gl[_0xb9737(0x11e)](gl[_0xb9737(0xfc)],gl['TEXTURE_WRAP_S'],gl[_0xb9737(0x126)]),gl[_0xb9737(0x11e)](gl['TEXTURE_2D'],gl[_0xb9737(0x121)],gl[_0xb9737(0x126)]);_0xe73770===_0xb9737(0x112)&&(gl[_0xb9737(0x103)](gl[_0xb9737(0x11f)](program,'game_size'),gameWidth,gameHeight),gl[_0xb9737(0x103)](gl[_0xb9737(0x11f)](program,_0xb9737(0xf7)),gl[_0xb9737(0x125)][_0xb9737(0xe4)],gl[_0xb9737(0x125)][_0xb9737(0x115)]),gl[_0xb9737(0x110)](gl['getUniformLocation'](program,_0xb9737(0x105)),gameWidth/gl[_0xb9737(0x125)][_0xb9737(0xe4)]),gl['uniform1f'](gl[_0xb9737(0x11f)](program,_0xb9737(0x107)),gameHeight/gl[_0xb9737(0x125)][_0xb9737(0x115)]));const _0x20a622=gl['createBuffer']();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x20a622),gl['bufferData'](gl[_0xb9737(0x117)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0xb9737(0xed)]),gl[_0xb9737(0x11d)](gl[_0xb9737(0x109)](program,_0xb9737(0xe8)),0x2,gl[_0xb9737(0x116)],![],0x0,0x0),gl[_0xb9737(0x114)](gl['getAttribLocation'](program,_0xb9737(0xe8)));const _0x12ef23=gl[_0xb9737(0xe5)]();gl[_0xb9737(0x118)](gl[_0xb9737(0x117)],_0x12ef23),gl[_0xb9737(0x100)](gl[_0xb9737(0x117)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0xb9737(0xed)]),gl['vertexAttribPointer'](gl[_0xb9737(0x109)](program,_0xb9737(0xee)),0x2,gl[_0xb9737(0x116)],![],0x0,0x0),gl[_0xb9737(0x114)](gl[_0xb9737(0x109)](program,_0xb9737(0xee)));}function setup2DContext(){const _0x42010d=a0_0x2762;ctx2d=bufferCanvas[_0x42010d(0xef)]('2d'),ctx2d[_0x42010d(0x10e)]=![];}async function renderPixel(_0x5cc418){const _0x336a71=a0_0x2762,_0x592e96=a0_0x111785[_0x336a71(0xf0)]();if(!_0x592e96)return;await loadLUT64();const _0x2fee5f=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x29ad13=0x0;_0x29ad13<gameHeight;_0x29ad13++){for(let _0x321428=0x0;_0x321428<gameWidth;_0x321428++){const _0x3d47bc=_0x29ad13*gameStride+_0x321428,_0x3cd0c4=(_0x29ad13*gameWidth+_0x321428)*0x4,_0x5f4508=_0x592e96[_0x3d47bc],_0x5269c7=(_0x5f4508&0xff)>>0x2,_0x1cb608=(_0x5f4508>>0x8&0xff)>>0x2,_0x5a63ab=(_0x5f4508>>0x10&0xff)>>0x2,_0x541dfb=(_0x5269c7*0x40*0x40+_0x1cb608*0x40+_0x5a63ab)*0x3;_0x2fee5f[_0x3cd0c4]=lut64[_0x541dfb],_0x2fee5f[_0x3cd0c4+0x1]=lut64[_0x541dfb+0x1],_0x2fee5f[_0x3cd0c4+0x2]=lut64[_0x541dfb+0x2],_0x2fee5f[_0x3cd0c4+0x3]=0xff;}}if(_0x5cc418==='webgl')gl[_0x336a71(0x11a)](gl[_0x336a71(0xfc)],0x0,gl[_0x336a71(0x10a)],gameWidth,gameHeight,0x0,gl[_0x336a71(0x10a)],gl[_0x336a71(0x113)],_0x2fee5f),gl[_0x336a71(0x124)](gl['COLOR_BUFFER_BIT']),gl[_0x336a71(0xe7)](gl[_0x336a71(0x101)],0x0,0x4);else _0x5cc418==='2d'&&(imageDataObj=new ImageData(_0x2fee5f,gameWidth,gameHeight),createImageBitmap(imageDataObj)['then'](_0x359504=>{const _0x39e364=_0x336a71;ctx2d[_0x39e364(0xf9)](0x0,0x0,bufferCanvas[_0x39e364(0xe4)],bufferCanvas[_0x39e364(0x115)]),ctx2d['drawImage'](_0x359504,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x5cc418));}export async function switchRenderMode(_0x4e07d5){const _0x1a23bd=a0_0x2762;systemType=gameName[_0x1a23bd(0xf3)](-0x3);if(_0x4e07d5==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x4e07d5===_0x1a23bd(0xf2))setupStyle('2d'),setupWebGL_Shader(_0x1a23bd(0xf2)),setupTexture_Buffer(_0x1a23bd(0xf2)),renderPixel(_0x1a23bd(0xf2));else _0x4e07d5===_0x1a23bd(0x112)&&(setupStyle(_0x1a23bd(0x112)),setupWebGL_Shader(_0x1a23bd(0x112)),setupTexture_Buffer(_0x1a23bd(0x112)),renderPixel(_0x1a23bd(0xf2)));}}