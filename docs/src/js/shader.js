const a0_0x2be8f2=a0_0x2588;(function(_0x1c247f,_0x3c8921){const _0x20f339=a0_0x2588,_0x25c687=_0x1c247f();while(!![]){try{const _0x3ef591=parseInt(_0x20f339(0x93))/0x1*(-parseInt(_0x20f339(0x72))/0x2)+-parseInt(_0x20f339(0x81))/0x3*(parseInt(_0x20f339(0xb9))/0x4)+parseInt(_0x20f339(0x73))/0x5+-parseInt(_0x20f339(0xab))/0x6*(parseInt(_0x20f339(0x78))/0x7)+parseInt(_0x20f339(0x9e))/0x8+-parseInt(_0x20f339(0x95))/0x9+-parseInt(_0x20f339(0x6f))/0xa*(-parseInt(_0x20f339(0xc0))/0xb);if(_0x3ef591===_0x3c8921)break;else _0x25c687['push'](_0x25c687['shift']());}catch(_0x22648b){_0x25c687['push'](_0x25c687['shift']());}}}(a0_0xeb84,0xb7169));import*as a0_0x40760d from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x2be8f2(0xc4)]('textured'),bufferCanvas=document[a0_0x2be8f2(0xc4)](a0_0x2be8f2(0x7e)),canvasContainer=document[a0_0x2be8f2(0xc4)](a0_0x2be8f2(0xa0)),imgShader=document[a0_0x2be8f2(0xc4)](a0_0x2be8f2(0x7c)),settingContainer=document[a0_0x2be8f2(0x8b)]('.setting-container'),messageContainer=document[a0_0x2be8f2(0x8b)]('.message-container'),stateTitle=document[a0_0x2be8f2(0x8b)]('.stateTitle,\x20.stateDate');let imageDataObj=null;async function loadLUT64(){const _0x59f6d5=a0_0x2be8f2;systemType=gameName[_0x59f6d5(0xc6)](-0x3);const _0x4fb0b5=localStorage[_0x59f6d5(0x70)](gameName+'_streng')||_0x59f6d5(0xa1),_0x533a87=(localStorage[_0x59f6d5(0x70)](gameName+_0x59f6d5(0xd0))||_0x59f6d5(0x74))['toLowerCase']();if(!lut64||lut64Streng!==_0x4fb0b5||lut64Profile!==_0x533a87){const _0x3ebcd7=_0x59f6d5(0x86)+_0x533a87+'_'+_0x4fb0b5+_0x59f6d5(0x6e);console[_0x59f6d5(0xcf)](_0x3ebcd7);const _0x27d6bb=await fetch(_0x3ebcd7),_0xba7c09=await _0x27d6bb[_0x59f6d5(0x80)]();lut64=new Uint8Array(_0xba7c09),lut64Streng=_0x4fb0b5,lut64Profile=_0x533a87;}}async function loadShaderSource(_0x5735b9){const _0x186664=a0_0x2be8f2,_0x222482=await fetch(_0x5735b9);return await _0x222482[_0x186664(0x8e)]();}function setupStyle(_0x2616e1){const _0x228350=a0_0x2be8f2;clientWidth=document[_0x228350(0xa7)][_0x228350(0xd3)];const _0x5ab501=window[_0x228350(0xb4)];systemType===_0x228350(0x82)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x228350(0x94)](clientWidth*_0x5ab501/gameWidth),localStorage[_0x228350(0xbe)](_0x228350(0x91),_0x228350(0x7d)+gameWidth*(integerScaling/_0x5ab501)+','+gameHeight*(integerScaling/_0x5ab501))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x228350(0x94)](clientWidth*_0x5ab501/gameWidth),localStorage[_0x228350(0xbe)](_0x228350(0x91),_0x228350(0x7d)+gameWidth*(integerScaling/_0x5ab501)+','+gameHeight*(integerScaling/_0x5ab501)));if(_0x2616e1==='2d')bufferCanvas[_0x228350(0xa8)]=gameWidth,bufferCanvas[_0x228350(0xcd)]=gameHeight,bufferCanvas[_0x228350(0xb1)][_0x228350(0xbf)]=''+integerScaling/_0x5ab501,bufferCanvas[_0x228350(0xb1)][_0x228350(0x9b)]='crisp-edges',canvasContainer[_0x228350(0xb1)]['width']=gameWidth*(integerScaling/_0x5ab501)+'px',canvasContainer['style'][_0x228350(0xcd)]=gameHeight*(integerScaling/_0x5ab501)+'px',textured[_0x228350(0xb1)]['width']=gameWidth*(integerScaling/_0x5ab501)+'px',textured['style'][_0x228350(0xcd)]=gameHeight*(integerScaling/_0x5ab501)+'px',imgShader['style'][_0x228350(0xaf)]=_0x228350(0x71)+integerScaling/_0x5ab501/upscaleShader+')',settingContainer[_0x228350(0xbb)](function(_0x5d4482){const _0x29d1a3=_0x228350;_0x5d4482[_0x29d1a3(0xb1)][_0x29d1a3(0xa8)]=gameWidth*(integerScaling/_0x5ab501)+'px',_0x5d4482[_0x29d1a3(0xb1)][_0x29d1a3(0xcd)]=gameHeight*(integerScaling/_0x5ab501)+'px';}),messageContainer[_0x228350(0xbb)](function(_0x1363e5){const _0x48abfd=_0x228350;_0x1363e5[_0x48abfd(0xb1)][_0x48abfd(0xa8)]=gameWidth+'px',_0x1363e5['style']['height']=gameHeight+'px',_0x1363e5[_0x48abfd(0xb1)]['zoom']=''+integerScaling/_0x5ab501;}),stateTitle['forEach'](function(_0x56093f){const _0x2f1df5=_0x228350;_0x56093f['classList'][_0x2f1df5(0xbc)](_0x2f1df5(0x8f));});else _0x2616e1==='webgl2'&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas[_0x228350(0xcd)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x228350(0xbf)]=''+0x1/upscaleFactor,bufferCanvas[_0x228350(0xb1)][_0x228350(0x9b)]='',canvasContainer[_0x228350(0xb1)]['width']=clientWidth+'px',canvasContainer[_0x228350(0xb1)][_0x228350(0xcd)]=clientWidth*(gameHeight/gameWidth)+'px',textured['style'][_0x228350(0xa8)]=clientWidth+'px',textured[_0x228350(0xb1)][_0x228350(0xcd)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x228350(0xb1)]['transform']=_0x228350(0x71)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x228350(0xbb)](function(_0x572ce1){const _0x4f5d4d=_0x228350;_0x572ce1[_0x4f5d4d(0xb1)]['width']=clientWidth+'px',_0x572ce1[_0x4f5d4d(0xb1)][_0x4f5d4d(0xcd)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer['forEach'](function(_0x9f21c8){const _0x5ecaa0=_0x228350;_0x9f21c8[_0x5ecaa0(0xb1)][_0x5ecaa0(0xa8)]=gameWidth+'px',_0x9f21c8['style'][_0x5ecaa0(0xcd)]=gameHeight+'px',_0x9f21c8[_0x5ecaa0(0xb1)][_0x5ecaa0(0xbf)]=''+clientWidth/gameWidth;}),stateTitle[_0x228350(0xbb)](function(_0x35ae54){const _0x2fd401=_0x228350;_0x35ae54[_0x2fd401(0x83)][_0x2fd401(0xad)](_0x2fd401(0x8f));}));imgShader['style'][_0x228350(0xa8)]=gameWidth*upscaleShader+'px',imgShader[_0x228350(0xb1)][_0x228350(0xcd)]=gameHeight*upscaleShader+'px',imgShader[_0x228350(0xb1)][_0x228350(0x92)]=_0x228350(0xca),imgShader[_0x228350(0xb1)][_0x228350(0x8d)](_0x228350(0xb0),upscaleShader+_0x228350(0xb8)+upscaleShader+'px');}function a0_0x2588(_0x4c0bf2,_0x5e900a){const _0xeb84fa=a0_0xeb84();return a0_0x2588=function(_0x25880c,_0x4728d2){_0x25880c=_0x25880c-0x6e;let _0x68913d=_0xeb84fa[_0x25880c];return _0x68913d;},a0_0x2588(_0x4c0bf2,_0x5e900a);}function setupWebGL(){const _0x14a2da=a0_0x2be8f2;gl=bufferCanvas[_0x14a2da(0xa2)]('webgl2');if(!gl)return console[_0x14a2da(0xac)](_0x14a2da(0xce)),null;gl[_0x14a2da(0xb2)](0x0,0x0,bufferCanvas[_0x14a2da(0xa8)],bufferCanvas[_0x14a2da(0xcd)]);}function createShader(_0x20ef2f,_0x50c031){const _0x39e64a=a0_0x2be8f2,_0x4a8c37=gl[_0x39e64a(0xba)](_0x20ef2f);gl[_0x39e64a(0xbd)](_0x4a8c37,_0x50c031),gl['compileShader'](_0x4a8c37);if(!gl[_0x39e64a(0x85)](_0x4a8c37,gl[_0x39e64a(0x90)]))return console[_0x39e64a(0xac)](gl['getShaderInfoLog'](_0x4a8c37)),gl['deleteShader'](_0x4a8c37),null;return _0x4a8c37;}async function setupShaders(){const _0x86fc34=a0_0x2be8f2,_0x52788e=await loadShaderSource(_0x86fc34(0x77)),_0xac3d28=await loadShaderSource(_0x86fc34(0xcb)),_0x1c8812=createShader(gl[_0x86fc34(0x7b)],_0x52788e),_0x5a5a58=createShader(gl[_0x86fc34(0x97)],_0xac3d28);return program=gl['createProgram'](),gl[_0x86fc34(0xd2)](program,_0x1c8812),gl[_0x86fc34(0xd2)](program,_0x5a5a58),gl[_0x86fc34(0xc5)](program),gl['useProgram'](program),program;}function setupTexture(){const _0x131e70=a0_0x2be8f2;texture=gl[_0x131e70(0x9c)](),gl['bindTexture'](gl[_0x131e70(0xc7)],texture),gl[_0x131e70(0xa6)](gl['TEXTURE_2D'],gl[_0x131e70(0xc8)],gl[_0x131e70(0xd4)]),gl[_0x131e70(0xa6)](gl[_0x131e70(0xc7)],gl[_0x131e70(0x75)],gl[_0x131e70(0xd4)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x131e70(0xae)],gl[_0x131e70(0x79)]),gl[_0x131e70(0xa6)](gl[_0x131e70(0xc7)],gl[_0x131e70(0x99)],gl[_0x131e70(0x79)]),gl['uniform2f'](gl[_0x131e70(0x9a)](program,_0x131e70(0xa4)),gameWidth,gameHeight),gl[_0x131e70(0x7a)](gl[_0x131e70(0x9a)](program,'render_size'),gl[_0x131e70(0x7e)][_0x131e70(0xa8)],gl['canvas']['height']),gl[_0x131e70(0xd1)](gl[_0x131e70(0x9a)](program,'smooth_width'),gameWidth/gl[_0x131e70(0x7e)][_0x131e70(0xa8)]),gl[_0x131e70(0xd1)](gl[_0x131e70(0x9a)](program,_0x131e70(0xc2)),gameHeight/gl[_0x131e70(0x7e)]['height']);}function setupBuffers(){const _0x2e5fe0=a0_0x2be8f2,_0x20bb70=gl[_0x2e5fe0(0xc3)]();gl[_0x2e5fe0(0xa3)](gl['ARRAY_BUFFER'],_0x20bb70),gl[_0x2e5fe0(0xb5)](gl[_0x2e5fe0(0xcc)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x278ae6=gl['getAttribLocation'](program,'position');gl[_0x2e5fe0(0xb7)](_0x278ae6),gl['vertexAttribPointer'](_0x278ae6,0x2,gl['FLOAT'],![],0x0,0x0);const _0x22f9f0=gl[_0x2e5fe0(0xc3)]();gl[_0x2e5fe0(0xa3)](gl['ARRAY_BUFFER'],_0x22f9f0),gl['bufferData'](gl[_0x2e5fe0(0xcc)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2e5fe0(0x88)]);const _0x39ef2a=gl[_0x2e5fe0(0x9d)](program,_0x2e5fe0(0xc9));gl[_0x2e5fe0(0xb7)](_0x39ef2a),gl[_0x2e5fe0(0xa5)](_0x39ef2a,0x2,gl[_0x2e5fe0(0x76)],![],0x0,0x0);}async function renderPixel(_0x11b129){const _0xd718aa=a0_0x2be8f2,_0x395fdd=a0_0x40760d[_0xd718aa(0xa9)]();if(!_0x395fdd)return;await loadLUT64();const _0x5889e8=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x337432=0x0;_0x337432<gameHeight;_0x337432++){for(let _0xb8ae26=0x0;_0xb8ae26<gameWidth;_0xb8ae26++){const _0x442839=_0x337432*gameStride+_0xb8ae26,_0xb47708=(_0x337432*gameWidth+_0xb8ae26)*0x4,_0x7dddc1=_0x395fdd[_0x442839],_0x353022=(_0x7dddc1&0xff)>>0x2,_0x3dbfaf=(_0x7dddc1>>0x8&0xff)>>0x2,_0x204a1e=(_0x7dddc1>>0x10&0xff)>>0x2,_0x1c75f7=(_0x353022*0x40*0x40+_0x3dbfaf*0x40+_0x204a1e)*0x3;_0x5889e8[_0xb47708]=lut64[_0x1c75f7],_0x5889e8[_0xb47708+0x1]=lut64[_0x1c75f7+0x1],_0x5889e8[_0xb47708+0x2]=lut64[_0x1c75f7+0x2],_0x5889e8[_0xb47708+0x3]=0xff;}}if(_0x11b129===_0xd718aa(0x98))gl['bindTexture'](gl[_0xd718aa(0xc7)],texture),gl[_0xd718aa(0x7f)](gl[_0xd718aa(0xc7)],0x0,gl[_0xd718aa(0x87)],gameWidth,gameHeight,0x0,gl[_0xd718aa(0x87)],gl[_0xd718aa(0x84)],_0x5889e8),gl[_0xd718aa(0x96)](gl['COLOR_BUFFER_BIT']),gl[_0xd718aa(0xc1)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x11b129==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d',{'alpha':![]}),ctx2d['imageSmoothingEnabled']=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj[_0xd718aa(0x9f)]['set'](_0x5889e8),createImageBitmap(imageDataObj)[_0xd718aa(0x8a)](_0xab6e63=>{const _0x2c8f2d=_0xd718aa;ctx2d[_0x2c8f2d(0xb3)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x2c8f2d(0xcd)]),ctx2d[_0x2c8f2d(0x89)](_0xab6e63,0x0,0x0),_0xab6e63[_0x2c8f2d(0xaa)]();}));requestAnimationFrame(()=>renderPixel(_0x11b129));}export async function switchRenderMode(_0x1b9549){const _0x2959cd=a0_0x2be8f2;systemType=gameName[_0x2959cd(0xc6)](-0x3);if(_0x1b9549==='2d')setupStyle('2d'),renderPixel('2d');else _0x1b9549===_0x2959cd(0x98)&&(setupStyle('webgl2'),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x2959cd(0x98)));}function a0_0xeb84(){const _0x49aca8=['TEXTURE_MIN_FILTER','texcoord','top\x20center','./src/shaders/fragmentShader.glsl','ARRAY_BUFFER','height','WebGL2\x20not\x20supported','log','_temperature','uniform1f','attachShader','clientWidth','NEAREST','.bin','9042010bLTaop','getItem','scale(','250ColwMz','4496345MNknkd','warm','TEXTURE_MAG_FILTER','FLOAT','./src/shaders/vertexShader.glsl','4389dNBUDD','CLAMP_TO_EDGE','uniform2f','VERTEX_SHADER','img-shader','0,0,','canvas','texImage2D','arrayBuffer','965388bfkCWU','gbc','classList','UNSIGNED_BYTE','getShaderParameter','./src/lut/lut64_','RGBA','STATIC_DRAW','drawImage','then','querySelectorAll','addEventListener','setProperty','text','fefs','COMPILE_STATUS','screenSize','transformOrigin','1226uRGupU','floor','2981943IrHoiw','clear','FRAGMENT_SHADER','webgl2','TEXTURE_WRAP_T','getUniformLocation','imageRendering','createTexture','getAttribLocation','8670088wOApJG','data','canvas-container','4.0','getContext','bindBuffer','game_size','vertexAttribPointer','texParameteri','documentElement','width','getPixelData','close','3498brCNBE','error','add','TEXTURE_WRAP_S','transform','--bg-size','style','viewport','clearRect','devicePixelRatio','bufferData','DOMContentLoaded','enableVertexAttribArray','px\x20','16JwyCDI','createShader','forEach','remove','shaderSource','setItem','zoom','11ObRCIT','drawArrays','smooth_height','createBuffer','getElementById','linkProgram','slice','TEXTURE_2D'];a0_0xeb84=function(){return _0x49aca8;};return a0_0xeb84();}document[a0_0x2be8f2(0x8c)](a0_0x2be8f2(0xb6),function(){});