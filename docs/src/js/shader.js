(function(_0x4ba909,_0x3f0e35){const _0x525cd6=a0_0x3599,_0x3851e4=_0x4ba909();while(!![]){try{const _0x1a710a=-parseInt(_0x525cd6(0x1ba))/0x1*(-parseInt(_0x525cd6(0x19a))/0x2)+parseInt(_0x525cd6(0x1a9))/0x3*(-parseInt(_0x525cd6(0x1bf))/0x4)+parseInt(_0x525cd6(0x1a8))/0x5+parseInt(_0x525cd6(0x1bc))/0x6+-parseInt(_0x525cd6(0x197))/0x7*(-parseInt(_0x525cd6(0x1ab))/0x8)+-parseInt(_0x525cd6(0x1a4))/0x9+-parseInt(_0x525cd6(0x18b))/0xa;if(_0x1a710a===_0x3f0e35)break;else _0x3851e4['push'](_0x3851e4['shift']());}catch(_0x612fd5){_0x3851e4['push'](_0x3851e4['shift']());}}}(a0_0x3e07,0xcf87b));function a0_0x3599(_0x93a915,_0x5f21f8){const _0x3e072b=a0_0x3e07();return a0_0x3599=function(_0x359956,_0x5e540d){_0x359956=_0x359956-0x188;let _0x4dc80e=_0x3e072b[_0x359956];return _0x4dc80e;},a0_0x3599(_0x93a915,_0x5f21f8);}import*as a0_0x56bee9 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x3e07(){const _0xe8a4db=['low-power','slice','createTexture','getAttribLocation','canvas','getPixelData','position','UNSIGNED_BYTE','uniform1f','119763MBTVVn','webgl_full','NEAREST','2VLqzuL','clearRect','uniform2f','_4.0.bin','attachShader','none','TEXTURE_WRAP_T','TRIANGLE_STRIP','width','_temperature','11370582gZSMAj','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','./src/lut/lut64_','texImage2D','7279635dKmZiZ','30FiREVW','smooth_width','664ntzKAy','height','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','createBuffer','game_size','webgl','RGBA','getContext','toLowerCase','imageSmoothingEnabled','bindTexture','texParameteri','vertexAttribPointer','useProgram','ARRAY_BUFFER','605113ZJApYE','getUniformLocation','8472240DuTORs','set','render_size','562848cHZNxi','createShader','compileShader','getItem','CLAMP_TO_EDGE','TEXTURE_MIN_FILTER','texcoord','bufferData','linkProgram','TEXTURE_2D','clear','COLOR_BUFFER_BIT','smooth_height','shaderSource','log','enableVertexAttribArray','arrayBuffer','13725660jsMqih','STATIC_DRAW','bindBuffer'];a0_0x3e07=function(){return _0xe8a4db;};return a0_0x3e07();}async function loadLUT64(){const _0x4f7b7a=a0_0x3599;systemType=gameName['slice'](-0x3);const _0x387c18=(localStorage[_0x4f7b7a(0x1c2)](gameName+_0x4f7b7a(0x1a3))||_0x4f7b7a(0x19f))[_0x4f7b7a(0x1b3)]();if(!lut64||lut64Profile!==_0x387c18){const _0x18d8be=_0x4f7b7a(0x1a6)+_0x387c18+_0x4f7b7a(0x19d);console[_0x4f7b7a(0x188)](_0x18d8be);const _0x4134a5=await fetch(_0x18d8be),_0x43cc6c=await _0x4134a5[_0x4f7b7a(0x18a)]();lut64=new Uint8Array(_0x43cc6c),lut64Profile=_0x387c18;}}function setupWebGL_Shader(_0x26cbe4){const _0x2b6985=a0_0x3599;gl=bufferCanvas[_0x2b6985(0x1b2)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x2b6985(0x18e)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x2b6985(0x1a2)],bufferCanvas[_0x2b6985(0x1ac)]);function _0x29cd8e(_0x327af3,_0x5c94e3){const _0x452c0b=_0x2b6985,_0x427ea6=gl[_0x452c0b(0x1c0)](_0x327af3);return gl[_0x452c0b(0x1cc)](_0x427ea6,_0x5c94e3),gl[_0x452c0b(0x1c1)](_0x427ea6),_0x427ea6;}vs=_0x2b6985(0x1ad);if(_0x26cbe4===_0x2b6985(0x1b0))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x26cbe4===_0x2b6985(0x198)&&(fs=_0x2b6985(0x1a5));const _0x1889b0=_0x29cd8e(gl['VERTEX_SHADER'],vs),_0xb35cb2=_0x29cd8e(gl['FRAGMENT_SHADER'],fs);return program=gl['createProgram'](),gl[_0x2b6985(0x19e)](program,_0x1889b0),gl[_0x2b6985(0x19e)](program,_0xb35cb2),gl[_0x2b6985(0x1c7)](program),gl[_0x2b6985(0x1b8)](program),program;}function setupTexture_Buffer(_0x132c7c){const _0x1b498a=a0_0x3599;texture=gl[_0x1b498a(0x190)](),gl[_0x1b498a(0x1b5)](gl[_0x1b498a(0x1c8)],texture),gl['texParameteri'](gl[_0x1b498a(0x1c8)],gl[_0x1b498a(0x1c4)],gl[_0x1b498a(0x199)]),gl[_0x1b498a(0x1b6)](gl['TEXTURE_2D'],gl['TEXTURE_MAG_FILTER'],gl[_0x1b498a(0x199)]),gl['texParameteri'](gl[_0x1b498a(0x1c8)],gl['TEXTURE_WRAP_S'],gl[_0x1b498a(0x1c3)]),gl[_0x1b498a(0x1b6)](gl['TEXTURE_2D'],gl[_0x1b498a(0x1a0)],gl['CLAMP_TO_EDGE']);_0x132c7c===_0x1b498a(0x198)&&(gl[_0x1b498a(0x19c)](gl[_0x1b498a(0x1bb)](program,_0x1b498a(0x1af)),gameWidth,gameHeight),gl[_0x1b498a(0x19c)](gl[_0x1b498a(0x1bb)](program,_0x1b498a(0x1be)),gl[_0x1b498a(0x192)]['width'],gl[_0x1b498a(0x192)][_0x1b498a(0x1ac)]),gl[_0x1b498a(0x196)](gl[_0x1b498a(0x1bb)](program,_0x1b498a(0x1aa)),gameWidth/gl[_0x1b498a(0x192)]['width']),gl[_0x1b498a(0x196)](gl[_0x1b498a(0x1bb)](program,_0x1b498a(0x1cb)),gameHeight/gl[_0x1b498a(0x192)]['height']));const _0x2fb9e9=gl[_0x1b498a(0x1ae)]();gl[_0x1b498a(0x18d)](gl['ARRAY_BUFFER'],_0x2fb9e9),gl['bufferData'](gl[_0x1b498a(0x1b9)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x1b498a(0x1b7)](gl['getAttribLocation'](program,'position'),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x1b498a(0x189)](gl[_0x1b498a(0x191)](program,_0x1b498a(0x194)));const _0x2df955=gl['createBuffer']();gl[_0x1b498a(0x18d)](gl[_0x1b498a(0x1b9)],_0x2df955),gl[_0x1b498a(0x1c6)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x1b498a(0x18c)]),gl['vertexAttribPointer'](gl['getAttribLocation'](program,_0x1b498a(0x1c5)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x1b498a(0x189)](gl[_0x1b498a(0x191)](program,_0x1b498a(0x1c5)));}function setup2DContext(){const _0x587709=a0_0x3599;ctx2d=bufferCanvas[_0x587709(0x1b2)]('2d'),ctx2d[_0x587709(0x1b4)]=![];}async function renderPixel(_0x270175){const _0x32edb3=a0_0x3599,_0x3d52d4=a0_0x56bee9[_0x32edb3(0x193)]();if(!_0x3d52d4)return;await loadLUT64();const _0x10478=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2b963e=0x0;_0x2b963e<gameHeight;_0x2b963e++){for(let _0x4b153e=0x0;_0x4b153e<gameWidth;_0x4b153e++){const _0x25b2e4=_0x2b963e*gameStride+_0x4b153e,_0x4af934=(_0x2b963e*gameWidth+_0x4b153e)*0x4,_0x19f426=_0x3d52d4[_0x25b2e4];if(lut64Profile===_0x32edb3(0x19f))_0x10478[_0x4af934]=_0x19f426&0xff,_0x10478[_0x4af934+0x1]=_0x19f426>>0x8&0xff,_0x10478[_0x4af934+0x2]=_0x19f426>>0x10&0xff,_0x10478[_0x4af934+0x3]=0xff;else{const _0x1ec542=(_0x19f426&0xff)>>0x2,_0x52d73f=(_0x19f426>>0x8&0xff)>>0x2,_0x199ad9=(_0x19f426>>0x10&0xff)>>0x2,_0x4e2563=(_0x1ec542*0x40*0x40+_0x52d73f*0x40+_0x199ad9)*0x3;_0x10478[_0x4af934]=lut64[_0x4e2563],_0x10478[_0x4af934+0x1]=lut64[_0x4e2563+0x1],_0x10478[_0x4af934+0x2]=lut64[_0x4e2563+0x2],_0x10478[_0x4af934+0x3]=0xff;}}}if(_0x270175===_0x32edb3(0x1b0))gl[_0x32edb3(0x1a7)](gl[_0x32edb3(0x1c8)],0x0,gl[_0x32edb3(0x1b1)],gameWidth,gameHeight,0x0,gl[_0x32edb3(0x1b1)],gl[_0x32edb3(0x195)],_0x10478),gl[_0x32edb3(0x1c9)](gl[_0x32edb3(0x1ca)]),gl['drawArrays'](gl[_0x32edb3(0x1a1)],0x0,0x4);else _0x270175==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x10478,gameWidth,gameHeight):imageDataObj['data'][_0x32edb3(0x1bd)](_0x10478),ctx2d[_0x32edb3(0x19b)](0x0,0x0,bufferCanvas[_0x32edb3(0x1a2)],bufferCanvas[_0x32edb3(0x1ac)]),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x270175));}export async function switchRenderMode(_0x3fd9cd){const _0x5b98fb=a0_0x3599;systemType=gameName[_0x5b98fb(0x18f)](-0x3);if(_0x3fd9cd==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x3fd9cd===_0x5b98fb(0x1b0))setupStyle('2d'),setupWebGL_Shader(_0x5b98fb(0x1b0)),setupTexture_Buffer('webgl'),renderPixel(_0x5b98fb(0x1b0));else _0x3fd9cd===_0x5b98fb(0x198)&&(setupStyle(_0x5b98fb(0x198)),setupWebGL_Shader(_0x5b98fb(0x198)),setupTexture_Buffer(_0x5b98fb(0x198)),renderPixel(_0x5b98fb(0x1b0)));}}