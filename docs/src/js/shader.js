const a0_0xb96182=a0_0xe545;(function(_0x712993,_0x23f487){const _0x161116=a0_0xe545,_0x6d4c1b=_0x712993();while(!![]){try{const _0x5056af=parseInt(_0x161116(0x7d))/0x1+-parseInt(_0x161116(0xb5))/0x2*(-parseInt(_0x161116(0xc8))/0x3)+-parseInt(_0x161116(0x80))/0x4*(-parseInt(_0x161116(0xc4))/0x5)+-parseInt(_0x161116(0x8e))/0x6*(parseInt(_0x161116(0x90))/0x7)+parseInt(_0x161116(0xbe))/0x8+-parseInt(_0x161116(0xc6))/0x9+parseInt(_0x161116(0xc3))/0xa;if(_0x5056af===_0x23f487)break;else _0x6d4c1b['push'](_0x6d4c1b['shift']());}catch(_0x45477a){_0x6d4c1b['push'](_0x6d4c1b['shift']());}}}(a0_0x56fd,0x59030));import*as a0_0x26de9e from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0xb96182(0x7e)),bufferCanvas=document[a0_0xb96182(0xb8)](a0_0xb96182(0x7c)),canvasContainer=document[a0_0xb96182(0xb8)](a0_0xb96182(0xaa)),imgShader=document[a0_0xb96182(0xb8)](a0_0xb96182(0x6f)),settingContainer=document['querySelectorAll'](a0_0xb96182(0x81)),messageContainer=document[a0_0xb96182(0xb4)](a0_0xb96182(0xc2)),stateTitle=document['querySelectorAll'](a0_0xb96182(0xce));async function loadLUT64(){const _0x597164=a0_0xb96182;systemType=gameName[_0x597164(0xc9)](-0x3);const _0x568b92=localStorage['getItem'](gameName+_0x597164(0x77))||_0x597164(0xbd),_0x5a8c9d=(localStorage['getItem'](gameName+'_temperature')||_0x597164(0xac))[_0x597164(0x7b)]();if(!lut64||lut64Streng!==_0x568b92||lut64Profile!==_0x5a8c9d){const _0x738200=_0x597164(0xd3)+_0x5a8c9d+'_'+_0x568b92+_0x597164(0xc1);console[_0x597164(0x79)](_0x738200);const _0x2040f6=await fetch(_0x738200),_0x2370df=await _0x2040f6[_0x597164(0xb0)]();lut64=new Uint8Array(_0x2370df),lut64Streng=_0x568b92,lut64Profile=_0x5a8c9d;}}async function loadShaderSource(_0x2864d3){const _0x55c798=await fetch(_0x2864d3);return await _0x55c798['text']();}function a0_0xe545(_0x54bb94,_0x2b9dc9){const _0x56fd6b=a0_0x56fd();return a0_0xe545=function(_0xe5459,_0x5361f8){_0xe5459=_0xe5459-0x6f;let _0x7c2889=_0x56fd6b[_0xe5459];return _0x7c2889;},a0_0xe545(_0x54bb94,_0x2b9dc9);}function setupStyle(_0x54a1d0){const _0x4a8513=a0_0xb96182;clientWidth=document[_0x4a8513(0x8d)]['clientWidth'];const _0x5da410=window[_0x4a8513(0xcc)];systemType===_0x4a8513(0xb3)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x4a8513(0xa3)](clientWidth*_0x5da410/gameWidth),localStorage[_0x4a8513(0x78)](_0x4a8513(0x8c),_0x4a8513(0x92)+gameWidth*(integerScaling/_0x5da410)+','+gameHeight*(integerScaling/_0x5da410))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x5da410/gameWidth),localStorage[_0x4a8513(0x78)](_0x4a8513(0x8c),_0x4a8513(0x92)+gameWidth*(integerScaling/_0x5da410)+','+gameHeight*(integerScaling/_0x5da410)));if(_0x54a1d0==='2d')bufferCanvas[_0x4a8513(0x85)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas['style'][_0x4a8513(0xb6)]=''+integerScaling/_0x5da410,bufferCanvas[_0x4a8513(0x71)][_0x4a8513(0xa7)]=_0x4a8513(0x8b),canvasContainer[_0x4a8513(0x71)][_0x4a8513(0x85)]=gameWidth*(integerScaling/_0x5da410)+'px',canvasContainer[_0x4a8513(0x71)][_0x4a8513(0x76)]=gameHeight*(integerScaling/_0x5da410)+'px',textured['style'][_0x4a8513(0x85)]=gameWidth*(integerScaling/_0x5da410)+'px',textured['style'][_0x4a8513(0x76)]=gameHeight*(integerScaling/_0x5da410)+'px',imgShader[_0x4a8513(0x71)][_0x4a8513(0x94)]=_0x4a8513(0xc7)+integerScaling/_0x5da410/upscaleShader+')',settingContainer[_0x4a8513(0x84)](function(_0x3e9bcf){const _0x376d57=_0x4a8513;_0x3e9bcf[_0x376d57(0x71)]['width']=gameWidth*(integerScaling/_0x5da410)+'px',_0x3e9bcf[_0x376d57(0x71)][_0x376d57(0x76)]=gameHeight*(integerScaling/_0x5da410)+'px';}),messageContainer[_0x4a8513(0x84)](function(_0x25a23d){const _0x1b3354=_0x4a8513;_0x25a23d[_0x1b3354(0x71)][_0x1b3354(0x85)]=gameWidth+'px',_0x25a23d[_0x1b3354(0x71)][_0x1b3354(0x76)]=gameHeight+'px',_0x25a23d[_0x1b3354(0x71)]['zoom']=''+integerScaling/_0x5da410;}),stateTitle[_0x4a8513(0x84)](function(_0x3c7406){const _0x3987c4=_0x4a8513;_0x3c7406[_0x3987c4(0x75)][_0x3987c4(0xb7)](_0x3987c4(0x9f));});else _0x54a1d0==='webgl2'&&(bufferCanvas[_0x4a8513(0x85)]=clientWidth*upscaleFactor,bufferCanvas[_0x4a8513(0x76)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x4a8513(0x71)][_0x4a8513(0xb6)]=''+0x1/upscaleFactor,bufferCanvas['style']['imageRendering']='',canvasContainer[_0x4a8513(0x71)]['width']=clientWidth+'px',canvasContainer[_0x4a8513(0x71)][_0x4a8513(0x76)]=clientWidth*(gameHeight/gameWidth)+'px',textured['style'][_0x4a8513(0x85)]=clientWidth+'px',textured[_0x4a8513(0x71)]['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x4a8513(0x71)]['transform']=_0x4a8513(0xc7)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x4a8513(0x84)](function(_0x4a6739){const _0x269047=_0x4a8513;_0x4a6739[_0x269047(0x71)][_0x269047(0x85)]=clientWidth+'px',_0x4a6739['style'][_0x269047(0x76)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x4a8513(0x84)](function(_0x491cc3){const _0x3f0fef=_0x4a8513;_0x491cc3[_0x3f0fef(0x71)]['width']=gameWidth+'px',_0x491cc3[_0x3f0fef(0x71)][_0x3f0fef(0x76)]=gameHeight+'px',_0x491cc3[_0x3f0fef(0x71)][_0x3f0fef(0xb6)]=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x1110ae){const _0x7c50ef=_0x4a8513;_0x1110ae[_0x7c50ef(0x75)][_0x7c50ef(0x95)](_0x7c50ef(0x9f));}));imgShader[_0x4a8513(0x71)][_0x4a8513(0x85)]=gameWidth*upscaleShader+'px',imgShader[_0x4a8513(0x71)][_0x4a8513(0x76)]=gameHeight*upscaleShader+'px',imgShader['style'][_0x4a8513(0xa5)]=_0x4a8513(0x97),imgShader[_0x4a8513(0x71)][_0x4a8513(0xae)](_0x4a8513(0x88),upscaleShader+_0x4a8513(0xa8)+upscaleShader+'px');}function setupWebGL(){const _0x5b955a=a0_0xb96182;gl=bufferCanvas['getContext'](_0x5b955a(0xbb));if(!gl)return console[_0x5b955a(0xc5)](_0x5b955a(0xa0)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x5b955a(0x85)],bufferCanvas[_0x5b955a(0x76)]);}function createShader(_0x3e5429,_0x1f523a){const _0x4a4afa=a0_0xb96182,_0x45e4af=gl[_0x4a4afa(0xa1)](_0x3e5429);gl[_0x4a4afa(0xcd)](_0x45e4af,_0x1f523a),gl['compileShader'](_0x45e4af);if(!gl[_0x4a4afa(0xcb)](_0x45e4af,gl[_0x4a4afa(0x83)]))return console[_0x4a4afa(0xc5)](gl[_0x4a4afa(0x91)](_0x45e4af)),gl[_0x4a4afa(0x99)](_0x45e4af),null;return _0x45e4af;}async function setupShaders(){const _0x31d0eb=a0_0xb96182,_0x612d77=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x351c8a=await loadShaderSource(_0x31d0eb(0xb9)),_0x18bc5b=createShader(gl[_0x31d0eb(0xad)],_0x612d77),_0x2440fd=createShader(gl[_0x31d0eb(0x89)],_0x351c8a);return program=gl['createProgram'](),gl[_0x31d0eb(0x9e)](program,_0x18bc5b),gl[_0x31d0eb(0x9e)](program,_0x2440fd),gl[_0x31d0eb(0xab)](program),gl['useProgram'](program),program;}function a0_0x56fd(){const _0x2e297d=['transform','add','getContext','top\x20center','texcoord','deleteShader','bufferData','createBuffer','DOMContentLoaded','FLOAT','attachShader','fefs','WebGL2\x20not\x20supported','createShader','addEventListener','floor','game_size','transformOrigin','RGBA','imageRendering','px\x20','drawArrays','canvas-container','linkProgram','warm','VERTEX_SHADER','setProperty','NEAREST','arrayBuffer','TEXTURE_2D','uniform1f','gbc','querySelectorAll','2HkKdyf','zoom','remove','getElementById','./src/shaders/fragmentShader.glsl','TEXTURE_WRAP_T','webgl2','ARRAY_BUFFER','4.0','13592cpkGvw','enableVertexAttribArray','createTexture','.bin','.message-container','3164230KGkotC','24085JOccSo','error','2450052TJbMwV','scale(','143739UOzpRB','slice','COLOR_BUFFER_BIT','getShaderParameter','devicePixelRatio','shaderSource','.stateTitle,\x20.stateDate','render_size','clearRect','getPixelData','TEXTURE_MAG_FILTER','./src/lut/lut64_','img-shader','position','style','getUniformLocation','bindBuffer','STATIC_DRAW','classList','height','_streng','setItem','log','clear','toLowerCase','canvas','222252MrjbKs','textured','smooth_height','172Thehmy','.setting-container','imageSmoothingEnabled','COMPILE_STATUS','forEach','width','texParameteri','getAttribLocation','--bg-size','FRAGMENT_SHADER','TRIANGLE_STRIP','crisp-edges','screenSize','documentElement','972CQhPrl','texImage2D','6853xXnRpE','getShaderInfoLog','0,0,','uniform2f'];a0_0x56fd=function(){return _0x2e297d;};return a0_0x56fd();}function setupTexture(){const _0x3a17a2=a0_0xb96182;texture=gl[_0x3a17a2(0xc0)](),gl['bindTexture'](gl[_0x3a17a2(0xb1)],texture),gl[_0x3a17a2(0x86)](gl[_0x3a17a2(0xb1)],gl['TEXTURE_MIN_FILTER'],gl[_0x3a17a2(0xaf)]),gl[_0x3a17a2(0x86)](gl['TEXTURE_2D'],gl[_0x3a17a2(0xd2)],gl['NEAREST']),gl['texParameteri'](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl['CLAMP_TO_EDGE']),gl[_0x3a17a2(0x86)](gl[_0x3a17a2(0xb1)],gl[_0x3a17a2(0xba)],gl['CLAMP_TO_EDGE']),gl['uniform2f'](gl[_0x3a17a2(0x72)](program,_0x3a17a2(0xa4)),gameWidth,gameHeight),gl[_0x3a17a2(0x93)](gl[_0x3a17a2(0x72)](program,_0x3a17a2(0xcf)),gl[_0x3a17a2(0x7c)][_0x3a17a2(0x85)],gl[_0x3a17a2(0x7c)][_0x3a17a2(0x76)]),gl['uniform1f'](gl[_0x3a17a2(0x72)](program,'smooth_width'),gameWidth/gl[_0x3a17a2(0x7c)][_0x3a17a2(0x85)]),gl[_0x3a17a2(0xb2)](gl['getUniformLocation'](program,_0x3a17a2(0x7f)),gameHeight/gl['canvas'][_0x3a17a2(0x76)]);}function setupBuffers(){const _0x93e513=a0_0xb96182,_0x242eba=gl[_0x93e513(0x9b)]();gl[_0x93e513(0x73)](gl[_0x93e513(0xbc)],_0x242eba),gl[_0x93e513(0x9a)](gl[_0x93e513(0xbc)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x93e513(0x74)]);const _0x28bc84=gl[_0x93e513(0x87)](program,_0x93e513(0x70));gl[_0x93e513(0xbf)](_0x28bc84),gl['vertexAttribPointer'](_0x28bc84,0x2,gl[_0x93e513(0x9d)],![],0x0,0x0);const _0x2dba84=gl[_0x93e513(0x9b)]();gl[_0x93e513(0x73)](gl[_0x93e513(0xbc)],_0x2dba84),gl[_0x93e513(0x9a)](gl[_0x93e513(0xbc)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x93e513(0x74)]);const _0x40e18e=gl[_0x93e513(0x87)](program,_0x93e513(0x98));gl['enableVertexAttribArray'](_0x40e18e),gl['vertexAttribPointer'](_0x40e18e,0x2,gl[_0x93e513(0x9d)],![],0x0,0x0);}async function renderPixel(_0x2e0166){const _0x251b04=a0_0xb96182,_0x587306=a0_0x26de9e[_0x251b04(0xd1)]();if(!_0x587306)return;await loadLUT64();const _0x580659=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x12f98a=0x0;_0x12f98a<gameHeight;_0x12f98a++){for(let _0x3185f0=0x0;_0x3185f0<gameWidth;_0x3185f0++){const _0x172dfd=_0x12f98a*gameStride+_0x3185f0,_0x2f82c4=(_0x12f98a*gameWidth+_0x3185f0)*0x4,_0x3a6ef9=_0x587306[_0x172dfd],_0x5530d4=(_0x3a6ef9&0xff)>>0x2,_0x2dc300=(_0x3a6ef9>>0x8&0xff)>>0x2,_0x367631=(_0x3a6ef9>>0x10&0xff)>>0x2,_0x17a9d1=(_0x5530d4*0x40*0x40+_0x2dc300*0x40+_0x367631)*0x3;_0x580659[_0x2f82c4]=lut64[_0x17a9d1],_0x580659[_0x2f82c4+0x1]=lut64[_0x17a9d1+0x1],_0x580659[_0x2f82c4+0x2]=lut64[_0x17a9d1+0x2],_0x580659[_0x2f82c4+0x3]=0xff;}}if(_0x2e0166===_0x251b04(0xbb))gl['bindTexture'](gl['TEXTURE_2D'],texture),gl[_0x251b04(0x8f)](gl['TEXTURE_2D'],0x0,gl[_0x251b04(0xa6)],gameWidth,gameHeight,0x0,gl[_0x251b04(0xa6)],gl['UNSIGNED_BYTE'],_0x580659),gl[_0x251b04(0x7a)](gl[_0x251b04(0xca)]),gl[_0x251b04(0xa9)](gl[_0x251b04(0x8a)],0x0,0x4);else{if(_0x2e0166==='2d'){ctx2d=bufferCanvas[_0x251b04(0x96)]('2d'),ctx2d[_0x251b04(0x82)]=![];const _0x3b98d2=new ImageData(_0x580659,gameWidth,gameHeight);createImageBitmap(_0x3b98d2)['then'](_0x32ac7e=>{const _0x1a5a1e=_0x251b04;ctx2d[_0x1a5a1e(0xd0)](0x0,0x0,bufferCanvas[_0x1a5a1e(0x85)],bufferCanvas[_0x1a5a1e(0x76)]),ctx2d['drawImage'](_0x32ac7e,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x2e0166));}export async function switchRenderMode(_0xd8d546){const _0x1aea19=a0_0xb96182;systemType=gameName['slice'](-0x3);if(_0xd8d546==='2d')setupStyle('2d'),renderPixel('2d');else _0xd8d546===_0x1aea19(0xbb)&&(setupStyle(_0x1aea19(0xbb)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x1aea19(0xbb)));}document[a0_0xb96182(0xa2)](a0_0xb96182(0x9c),function(){});