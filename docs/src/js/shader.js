const a0_0x1a384e=a0_0x50ce;(function(_0x58eaa2,_0x479e7f){const _0x10796e=a0_0x50ce,_0x4a93e8=_0x58eaa2();while(!![]){try{const _0x37d508=parseInt(_0x10796e(0xef))/0x1+-parseInt(_0x10796e(0xb7))/0x2*(parseInt(_0x10796e(0xb8))/0x3)+-parseInt(_0x10796e(0xfc))/0x4+-parseInt(_0x10796e(0xbe))/0x5*(parseInt(_0x10796e(0x9e))/0x6)+-parseInt(_0x10796e(0xcf))/0x7+parseInt(_0x10796e(0xd5))/0x8+parseInt(_0x10796e(0xe3))/0x9;if(_0x37d508===_0x479e7f)break;else _0x4a93e8['push'](_0x4a93e8['shift']());}catch(_0x13b2da){_0x4a93e8['push'](_0x4a93e8['shift']());}}}(a0_0x4e12,0xe6a12));import*as a0_0x30080d from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x1a384e(0xe8)](a0_0x1a384e(0xc8)),bufferCanvas=document['getElementById'](a0_0x1a384e(0xfb)),canvasContainer=document['getElementById'](a0_0x1a384e(0x9f)),imgShader=document[a0_0x1a384e(0xe8)](a0_0x1a384e(0xf6)),settingContainer=document['querySelectorAll'](a0_0x1a384e(0xf7)),messageContainer=document[a0_0x1a384e(0xb2)](a0_0x1a384e(0xec)),stateTitle=document[a0_0x1a384e(0xb2)](a0_0x1a384e(0xed));let imageDataObj=null;async function loadLUT64(){const _0x4a8fcf=a0_0x1a384e;systemType=gameName['slice'](-0x3);const _0x2b36e2=localStorage['getItem'](gameName+'_streng')||_0x4a8fcf(0xf2),_0x24b64f=(localStorage[_0x4a8fcf(0xf1)](gameName+_0x4a8fcf(0xc5))||'warm')['toLowerCase']();if(!lut64||lut64Streng!==_0x2b36e2||lut64Profile!==_0x24b64f){const _0x5c498a=_0x4a8fcf(0xdf)+_0x24b64f+'_'+_0x2b36e2+'.bin';console[_0x4a8fcf(0xe1)](_0x5c498a);const _0x1d9110=await fetch(_0x5c498a),_0x43a802=await _0x1d9110[_0x4a8fcf(0xcd)]();lut64=new Uint8Array(_0x43a802),lut64Streng=_0x2b36e2,lut64Profile=_0x24b64f;}}async function loadShaderSource(_0x560468){const _0x41e41c=a0_0x1a384e,_0x22a001=await fetch(_0x560468);return await _0x22a001[_0x41e41c(0xab)]();}function setupStyle(_0x43e09c){const _0x481cc=a0_0x1a384e;clientWidth=document['documentElement'][_0x481cc(0xc1)];const _0x7ba1a0=window['devicePixelRatio'];systemType===_0x481cc(0xae)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x7ba1a0/gameWidth),localStorage[_0x481cc(0xdb)]('screenSize',_0x481cc(0xb0)+gameWidth*(integerScaling/_0x7ba1a0)+','+gameHeight*(integerScaling/_0x7ba1a0))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x7ba1a0/gameWidth),localStorage[_0x481cc(0xdb)](_0x481cc(0xc2),_0x481cc(0xb0)+gameWidth*(integerScaling/_0x7ba1a0)+','+gameHeight*(integerScaling/_0x7ba1a0)));if(_0x43e09c==='2d')bufferCanvas['width']=gameWidth,bufferCanvas[_0x481cc(0xfd)]=gameHeight,bufferCanvas[_0x481cc(0xb4)][_0x481cc(0xc6)]=''+integerScaling/_0x7ba1a0,bufferCanvas[_0x481cc(0xb4)][_0x481cc(0xfa)]=_0x481cc(0xee),canvasContainer[_0x481cc(0xb4)][_0x481cc(0xfe)]=gameWidth*(integerScaling/_0x7ba1a0)+'px',canvasContainer[_0x481cc(0xb4)][_0x481cc(0xfd)]=gameHeight*(integerScaling/_0x7ba1a0)+'px',textured['style'][_0x481cc(0xfe)]=gameWidth*(integerScaling/_0x7ba1a0)+'px',textured[_0x481cc(0xb4)][_0x481cc(0xfd)]=gameHeight*(integerScaling/_0x7ba1a0)+'px',imgShader[_0x481cc(0xb4)]['transform']=_0x481cc(0xe5)+integerScaling/_0x7ba1a0/upscaleShader+')',settingContainer[_0x481cc(0xf8)](function(_0x5a6b81){const _0x41ab9d=_0x481cc;_0x5a6b81['style'][_0x41ab9d(0xfe)]=gameWidth*(integerScaling/_0x7ba1a0)+'px',_0x5a6b81['style'][_0x41ab9d(0xfd)]=gameHeight*(integerScaling/_0x7ba1a0)+'px';}),messageContainer[_0x481cc(0xf8)](function(_0x275e34){const _0x35a7da=_0x481cc;_0x275e34['style'][_0x35a7da(0xfe)]=gameWidth+'px',_0x275e34[_0x35a7da(0xb4)][_0x35a7da(0xfd)]=gameHeight+'px',_0x275e34[_0x35a7da(0xb4)][_0x35a7da(0xc6)]=''+integerScaling/_0x7ba1a0;}),stateTitle[_0x481cc(0xf8)](function(_0x25eecc){const _0xfcc7d6=_0x481cc;_0x25eecc[_0xfcc7d6(0xba)][_0xfcc7d6(0xea)](_0xfcc7d6(0xce));});else _0x43e09c==='webgl2'&&(bufferCanvas[_0x481cc(0xfe)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x481cc(0xb4)][_0x481cc(0xc6)]=''+0x1/upscaleFactor,bufferCanvas['style'][_0x481cc(0xfa)]='',canvasContainer[_0x481cc(0xb4)][_0x481cc(0xfe)]=clientWidth+'px',canvasContainer['style'][_0x481cc(0xfd)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x481cc(0xb4)][_0x481cc(0xfe)]=clientWidth+'px',textured[_0x481cc(0xb4)][_0x481cc(0xfd)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x481cc(0xb4)]['transform']=_0x481cc(0xe5)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x481cc(0xf8)](function(_0x4b5ddb){const _0x244e73=_0x481cc;_0x4b5ddb[_0x244e73(0xb4)][_0x244e73(0xfe)]=clientWidth+'px',_0x4b5ddb[_0x244e73(0xb4)][_0x244e73(0xfd)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer['forEach'](function(_0x2e2f36){const _0x492939=_0x481cc;_0x2e2f36[_0x492939(0xb4)][_0x492939(0xfe)]=gameWidth+'px',_0x2e2f36[_0x492939(0xb4)][_0x492939(0xfd)]=gameHeight+'px',_0x2e2f36[_0x492939(0xb4)][_0x492939(0xc6)]=''+clientWidth/gameWidth;}),stateTitle[_0x481cc(0xf8)](function(_0x4ebe80){const _0x39b002=_0x481cc;_0x4ebe80[_0x39b002(0xba)][_0x39b002(0xeb)](_0x39b002(0xce));}));imgShader[_0x481cc(0xb4)][_0x481cc(0xfe)]=gameWidth*upscaleShader+'px',imgShader[_0x481cc(0xb4)][_0x481cc(0xfd)]=gameHeight*upscaleShader+'px',imgShader['style'][_0x481cc(0xff)]='top\x20center',imgShader[_0x481cc(0xb4)][_0x481cc(0xd4)](_0x481cc(0xe0),upscaleShader+_0x481cc(0xd7)+upscaleShader+'px');}function setupWebGL(){const _0x438707=a0_0x1a384e;gl=bufferCanvas[_0x438707(0xbf)]('webgl2');if(!gl)return console[_0x438707(0xf9)](_0x438707(0xcb)),null;gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x438707(0xfd)]);}function createShader(_0x1b78d4,_0x3efd0b){const _0x86cbf3=a0_0x1a384e,_0x387791=gl[_0x86cbf3(0xf5)](_0x1b78d4);gl[_0x86cbf3(0xbc)](_0x387791,_0x3efd0b),gl[_0x86cbf3(0xa6)](_0x387791);if(!gl[_0x86cbf3(0xc7)](_0x387791,gl[_0x86cbf3(0xe6)]))return console[_0x86cbf3(0xf9)](gl[_0x86cbf3(0xa2)](_0x387791)),gl['deleteShader'](_0x387791),null;return _0x387791;}function a0_0x4e12(){const _0x45bbdc=['crisp-edges','1328431mtQZYQ','TRIANGLE_STRIP','getItem','4.0','imageSmoothingEnabled','FRAGMENT_SHADER','createShader','img-shader','.setting-container','forEach','error','imageRendering','canvas','4561172xEIyMA','height','width','transformOrigin','NEAREST','render_size','TEXTURE_WRAP_T','5496882BjHSws','canvas-container','./src/shaders/vertexShader.glsl','addEventListener','getShaderInfoLog','CLAMP_TO_EDGE','createBuffer','getAttribLocation','compileShader','bindBuffer','VERTEX_SHADER','texParameteri','STATIC_DRAW','text','RGBA','TEXTURE_2D','gbc','data','0,0,','bindTexture','querySelectorAll','TEXTURE_MAG_FILTER','style','uniform2f','getPixelData','2802742EwdDiK','3QgrJEV','attachShader','classList','drawArrays','shaderSource','bufferData','5poqEZm','getContext','TEXTURE_MIN_FILTER','clientWidth','screenSize','number','smooth_height','_temperature','zoom','getShaderParameter','textured','FLOAT','position','WebGL2\x20not\x20supported','enableVertexAttribArray','arrayBuffer','fefs','6122235IDKrVL','uniform1f','vertexAttribPointer','webgl2','texImage2D','setProperty','2006088XQwpSj','clearRect','px\x20','slice','set','getUniformLocation','setItem','DOMContentLoaded','drawImage','close','./src/lut/lut64_','--bg-size','log','clear','33280938BhaxvL','smooth_width','scale(','COMPILE_STATUS','ARRAY_BUFFER','getElementById','createProgram','remove','add','.message-container','.stateTitle,\x20.stateDate'];a0_0x4e12=function(){return _0x45bbdc;};return a0_0x4e12();}async function setupShaders(){const _0x853436=a0_0x1a384e,_0x538631=await loadShaderSource(_0x853436(0xa0)),_0x2c86ae=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x35493b=createShader(gl[_0x853436(0xa8)],_0x538631),_0x231a26=createShader(gl[_0x853436(0xf4)],_0x2c86ae);return program=gl[_0x853436(0xe9)](),gl[_0x853436(0xb9)](program,_0x35493b),gl[_0x853436(0xb9)](program,_0x231a26),gl['linkProgram'](program),gl['useProgram'](program),program;}function setupTexture(){const _0x209009=a0_0x1a384e;texture=gl['createTexture'](),gl[_0x209009(0xb1)](gl[_0x209009(0xad)],texture),gl[_0x209009(0xa9)](gl['TEXTURE_2D'],gl[_0x209009(0xc0)],gl[_0x209009(0x100)]),gl['texParameteri'](gl[_0x209009(0xad)],gl[_0x209009(0xb3)],gl[_0x209009(0x100)]),gl[_0x209009(0xa9)](gl[_0x209009(0xad)],gl['TEXTURE_WRAP_S'],gl[_0x209009(0xa3)]),gl['texParameteri'](gl[_0x209009(0xad)],gl[_0x209009(0x9d)],gl[_0x209009(0xa3)]),gl[_0x209009(0xb5)](gl['getUniformLocation'](program,'game_size'),gameWidth,gameHeight),gl[_0x209009(0xb5)](gl[_0x209009(0xda)](program,_0x209009(0x101)),gl[_0x209009(0xfb)][_0x209009(0xfe)],gl[_0x209009(0xfb)]['height']),gl[_0x209009(0xd0)](gl['getUniformLocation'](program,_0x209009(0xe4)),gameWidth/gl[_0x209009(0xfb)][_0x209009(0xfe)]),gl[_0x209009(0xd0)](gl['getUniformLocation'](program,_0x209009(0xc4)),gameHeight/gl['canvas'][_0x209009(0xfd)]);}function setupBuffers(){const _0x320504=a0_0x1a384e,_0x424a79=gl[_0x320504(0xa4)]();gl[_0x320504(0xa7)](gl[_0x320504(0xe7)],_0x424a79),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x320504(0xaa)]);const _0x57291=gl[_0x320504(0xa5)](program,_0x320504(0xca));gl[_0x320504(0xcc)](_0x57291),gl[_0x320504(0xd1)](_0x57291,0x2,gl[_0x320504(0xc9)],![],0x0,0x0);const _0x264bea=gl['createBuffer']();gl[_0x320504(0xa7)](gl[_0x320504(0xe7)],_0x264bea),gl[_0x320504(0xbd)](gl[_0x320504(0xe7)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x320504(0xaa)]);const _0x1a3367=gl['getAttribLocation'](program,'texcoord');gl[_0x320504(0xcc)](_0x1a3367),gl['vertexAttribPointer'](_0x1a3367,0x2,gl[_0x320504(0xc9)],![],0x0,0x0);}async function renderPixel(_0x29f845){const _0x4b7a98=a0_0x1a384e,_0x2424c2=a0_0x30080d[_0x4b7a98(0xb6)]();if(!_0x2424c2)return;await loadLUT64();const _0xb23e54=new Uint8ClampedArray(gameWidth*gameHeight*0x4),_0x5a4859=typeof gameStride===_0x4b7a98(0xc3)&&gameStride!==gameWidth;let _0x39e196=0x0;const _0x28250e=_0x855dd7=>{const _0x11bb2=_0x855dd7>>0x2&0x3f,_0x7196b7=_0x855dd7>>0xa&0x3f,_0x126ea0=_0x855dd7>>0x12&0x3f,_0x3f0a31=(_0x11bb2<<0xc|_0x7196b7<<0x6|_0x126ea0)*0x3;_0xb23e54[_0x39e196++]=lut64[_0x3f0a31],_0xb23e54[_0x39e196++]=lut64[_0x3f0a31+0x1],_0xb23e54[_0x39e196++]=lut64[_0x3f0a31+0x2],_0xb23e54[_0x39e196++]=0xff;};if(_0x5a4859)for(let _0x27bc00=0x0;_0x27bc00<gameHeight;_0x27bc00++){let _0xeb4519=_0x27bc00*gameStride;for(let _0x2c55cd=0x0;_0x2c55cd<gameWidth;_0x2c55cd++){_0x28250e(_0x2424c2[_0xeb4519++]);}}else for(let _0x3799a7=0x0;_0x3799a7<gameWidth*gameHeight;_0x3799a7++){_0x28250e(_0x2424c2[_0x3799a7]);}if(_0x29f845===_0x4b7a98(0xd2))gl[_0x4b7a98(0xb1)](gl[_0x4b7a98(0xad)],texture),gl[_0x4b7a98(0xd3)](gl[_0x4b7a98(0xad)],0x0,gl[_0x4b7a98(0xac)],gameWidth,gameHeight,0x0,gl[_0x4b7a98(0xac)],gl['UNSIGNED_BYTE'],_0xb23e54),gl[_0x4b7a98(0xe2)](gl['COLOR_BUFFER_BIT']),gl[_0x4b7a98(0xbb)](gl[_0x4b7a98(0xf0)],0x0,0x4);else _0x29f845==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x4b7a98(0xf3)]=![]),(!imageDataObj||imageDataObj['width']!==gameWidth||imageDataObj[_0x4b7a98(0xfd)]!==gameHeight)&&(imageDataObj=new ImageData(gameWidth,gameHeight)),imageDataObj[_0x4b7a98(0xaf)][_0x4b7a98(0xd9)](_0xb23e54),createImageBitmap(imageDataObj)['then'](_0x425d5e=>{const _0x5912a5=_0x4b7a98;ctx2d[_0x5912a5(0xd6)](0x0,0x0,bufferCanvas[_0x5912a5(0xfe)],bufferCanvas[_0x5912a5(0xfd)]),ctx2d[_0x5912a5(0xdd)](_0x425d5e,0x0,0x0),_0x425d5e[_0x5912a5(0xde)]();}));requestAnimationFrame(()=>renderPixel(_0x29f845));}function a0_0x50ce(_0x2a9538,_0x16376d){const _0x4e123b=a0_0x4e12();return a0_0x50ce=function(_0x50ce45,_0x161541){_0x50ce45=_0x50ce45-0x9d;let _0x199716=_0x4e123b[_0x50ce45];return _0x199716;},a0_0x50ce(_0x2a9538,_0x16376d);}export async function switchRenderMode(_0x56cde1){const _0x25b71d=a0_0x1a384e;systemType=gameName[_0x25b71d(0xd8)](-0x3);if(_0x56cde1==='2d')setupStyle('2d'),renderPixel('2d');else _0x56cde1===_0x25b71d(0xd2)&&(setupStyle(_0x25b71d(0xd2)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x25b71d(0xd2)));}document[a0_0x1a384e(0xa1)](a0_0x1a384e(0xdc),function(){});