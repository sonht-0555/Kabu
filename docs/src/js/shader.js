const a0_0x5688c2=a0_0x3a71;function a0_0x3a71(_0x465fae,_0x2f7510){const _0x353752=a0_0x3537();return a0_0x3a71=function(_0x3a71b3,_0x2720f4){_0x3a71b3=_0x3a71b3-0x135;let _0x56c791=_0x353752[_0x3a71b3];return _0x56c791;},a0_0x3a71(_0x465fae,_0x2f7510);}(function(_0x42d72d,_0x3229f1){const _0x3e24b4=a0_0x3a71,_0x4e6532=_0x42d72d();while(!![]){try{const _0x1b9bdb=-parseInt(_0x3e24b4(0x145))/0x1*(parseInt(_0x3e24b4(0x162))/0x2)+parseInt(_0x3e24b4(0x171))/0x3*(parseInt(_0x3e24b4(0x14d))/0x4)+-parseInt(_0x3e24b4(0x17f))/0x5+parseInt(_0x3e24b4(0x197))/0x6+-parseInt(_0x3e24b4(0x199))/0x7+-parseInt(_0x3e24b4(0x178))/0x8+parseInt(_0x3e24b4(0x19a))/0x9;if(_0x1b9bdb===_0x3229f1)break;else _0x4e6532['push'](_0x4e6532['shift']());}catch(_0x5c2bf2){_0x4e6532['push'](_0x4e6532['shift']());}}}(a0_0x3537,0xd59e9));import*as a0_0xe2c1d3 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0x5688c2(0x14c)),bufferCanvas=document[a0_0x5688c2(0x18f)]('canvas'),canvasContainer=document['getElementById'](a0_0x5688c2(0x170)),imgShader=document[a0_0x5688c2(0x18f)](a0_0x5688c2(0x198)),settingContainer=document[a0_0x5688c2(0x168)](a0_0x5688c2(0x15a)),messageContainer=document[a0_0x5688c2(0x168)](a0_0x5688c2(0x156)),stateTitle=document[a0_0x5688c2(0x168)](a0_0x5688c2(0x173));async function loadLUT64(){const _0x5ea482=a0_0x5688c2;systemType=gameName[_0x5ea482(0x15b)](-0x3);const _0x57b98d=localStorage['getItem'](gameName+'_streng')||_0x5ea482(0x19c),_0x2923a7=(localStorage[_0x5ea482(0x155)](gameName+_0x5ea482(0x186))||_0x5ea482(0x17c))[_0x5ea482(0x166)]();if(!lut64||lut64Streng!==_0x57b98d||lut64Profile!==_0x2923a7){const _0x428308=_0x5ea482(0x13a)+_0x2923a7+'_'+_0x57b98d+_0x5ea482(0x175);console[_0x5ea482(0x18a)](_0x428308);const _0x44f586=await fetch(_0x428308),_0xa762e=await _0x44f586['arrayBuffer']();lut64=new Uint8Array(_0xa762e),lut64Streng=_0x57b98d,lut64Profile=_0x2923a7;}}async function loadShaderSource(_0x592045){const _0x36af65=await fetch(_0x592045);return await _0x36af65['text']();}function setupStyle(_0x825044){const _0x451613=a0_0x5688c2;clientWidth=document[_0x451613(0x144)][_0x451613(0x167)];const _0x30a080=window['devicePixelRatio'];systemType===_0x451613(0x13e)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x451613(0x135)](clientWidth*_0x30a080/gameWidth),localStorage[_0x451613(0x183)]('screenSize',_0x451613(0x16d)+gameWidth*(integerScaling/_0x30a080)+','+gameHeight*(integerScaling/_0x30a080))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x451613(0x135)](clientWidth*_0x30a080/gameWidth),localStorage['setItem'](_0x451613(0x13b),_0x451613(0x16d)+gameWidth*(integerScaling/_0x30a080)+','+gameHeight*(integerScaling/_0x30a080)));if(_0x825044==='2d')bufferCanvas['width']=gameWidth,bufferCanvas[_0x451613(0x17d)]=gameHeight,bufferCanvas[_0x451613(0x16f)]['zoom']=''+integerScaling/_0x30a080,bufferCanvas['style'][_0x451613(0x13c)]=_0x451613(0x13f),canvasContainer['style'][_0x451613(0x169)]=gameWidth*(integerScaling/_0x30a080)+'px',canvasContainer['style'][_0x451613(0x17d)]=gameHeight*(integerScaling/_0x30a080)+'px',textured[_0x451613(0x16f)][_0x451613(0x169)]=gameWidth*(integerScaling/_0x30a080)+'px',textured['style'][_0x451613(0x17d)]=gameHeight*(integerScaling/_0x30a080)+'px',imgShader[_0x451613(0x16f)]['transform']=_0x451613(0x160)+integerScaling/_0x30a080/upscaleShader+')',settingContainer['forEach'](function(_0x5f03aa){const _0x3c285e=_0x451613;_0x5f03aa[_0x3c285e(0x16f)][_0x3c285e(0x169)]=gameWidth*(integerScaling/_0x30a080)+'px',_0x5f03aa['style']['height']=gameHeight*(integerScaling/_0x30a080)+'px';}),messageContainer[_0x451613(0x182)](function(_0x5c38c3){const _0x73e7f0=_0x451613;_0x5c38c3[_0x73e7f0(0x16f)]['width']=gameWidth+'px',_0x5c38c3[_0x73e7f0(0x16f)]['height']=gameHeight+'px',_0x5c38c3[_0x73e7f0(0x16f)]['zoom']=''+integerScaling/_0x30a080;}),stateTitle['forEach'](function(_0x3cf9d1){const _0x577cac=_0x451613;_0x3cf9d1['classList'][_0x577cac(0x136)]('fefs');});else _0x825044===_0x451613(0x15e)&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x451613(0x14f)]=''+0x1/upscaleFactor,bufferCanvas[_0x451613(0x16f)][_0x451613(0x13c)]='',canvasContainer[_0x451613(0x16f)][_0x451613(0x169)]=clientWidth+'px',canvasContainer[_0x451613(0x16f)][_0x451613(0x17d)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x451613(0x16f)]['width']=clientWidth+'px',textured['style'][_0x451613(0x17d)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style']['transform']='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x451613(0x182)](function(_0x4c208c){const _0x15f738=_0x451613;_0x4c208c['style'][_0x15f738(0x169)]=clientWidth+'px',_0x4c208c[_0x15f738(0x16f)][_0x15f738(0x17d)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x451613(0x182)](function(_0x2b27e6){const _0x59cd01=_0x451613;_0x2b27e6[_0x59cd01(0x16f)][_0x59cd01(0x169)]=gameWidth+'px',_0x2b27e6['style'][_0x59cd01(0x17d)]=gameHeight+'px',_0x2b27e6[_0x59cd01(0x16f)][_0x59cd01(0x14f)]=''+clientWidth/gameWidth;}),stateTitle[_0x451613(0x182)](function(_0x3058d0){const _0x39edac=_0x451613;_0x3058d0['classList'][_0x39edac(0x15f)](_0x39edac(0x143));}));imgShader[_0x451613(0x16f)][_0x451613(0x169)]=gameWidth*upscaleShader+'px',imgShader[_0x451613(0x16f)][_0x451613(0x17d)]=gameHeight*upscaleShader+'px',imgShader[_0x451613(0x16f)]['transformOrigin']='top\x20center',imgShader['style'][_0x451613(0x140)](_0x451613(0x192),upscaleShader+_0x451613(0x16a)+upscaleShader+'px');}function setupWebGL(){const _0x525faf=a0_0x5688c2;gl=bufferCanvas['getContext'](_0x525faf(0x15e));if(!gl)return console['error'](_0x525faf(0x151)),null;gl[_0x525faf(0x139)](0x0,0x0,bufferCanvas[_0x525faf(0x169)],bufferCanvas[_0x525faf(0x17d)]);}function createShader(_0x5a66e8,_0x4a8dfd){const _0x5d9033=a0_0x5688c2,_0x2f60d4=gl[_0x5d9033(0x153)](_0x5a66e8);gl[_0x5d9033(0x16e)](_0x2f60d4,_0x4a8dfd),gl[_0x5d9033(0x172)](_0x2f60d4);if(!gl[_0x5d9033(0x152)](_0x2f60d4,gl['COMPILE_STATUS']))return console[_0x5d9033(0x141)](gl[_0x5d9033(0x176)](_0x2f60d4)),gl[_0x5d9033(0x13d)](_0x2f60d4),null;return _0x2f60d4;}async function setupShaders(){const _0x3843c1=a0_0x5688c2,_0x18a140=await loadShaderSource(_0x3843c1(0x165)),_0x50e5c6=await loadShaderSource(_0x3843c1(0x147)),_0x4d5525=createShader(gl[_0x3843c1(0x18e)],_0x18a140),_0x17c6b7=createShader(gl[_0x3843c1(0x193)],_0x50e5c6);return program=gl[_0x3843c1(0x163)](),gl[_0x3843c1(0x191)](program,_0x4d5525),gl['attachShader'](program,_0x17c6b7),gl[_0x3843c1(0x16c)](program),gl[_0x3843c1(0x14e)](program),program;}function setupTexture(){const _0xcfbb54=a0_0x5688c2;texture=gl[_0xcfbb54(0x190)](),gl['bindTexture'](gl[_0xcfbb54(0x184)],texture),gl[_0xcfbb54(0x16b)](gl[_0xcfbb54(0x184)],gl[_0xcfbb54(0x146)],gl[_0xcfbb54(0x196)]),gl[_0xcfbb54(0x16b)](gl['TEXTURE_2D'],gl[_0xcfbb54(0x18c)],gl[_0xcfbb54(0x196)]),gl[_0xcfbb54(0x16b)](gl[_0xcfbb54(0x184)],gl[_0xcfbb54(0x149)],gl['CLAMP_TO_EDGE']),gl[_0xcfbb54(0x16b)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_T'],gl[_0xcfbb54(0x181)]),gl[_0xcfbb54(0x161)](gl[_0xcfbb54(0x150)](program,_0xcfbb54(0x148)),gameWidth,gameHeight),gl['uniform2f'](gl[_0xcfbb54(0x150)](program,_0xcfbb54(0x174)),gl[_0xcfbb54(0x180)][_0xcfbb54(0x169)],gl[_0xcfbb54(0x180)][_0xcfbb54(0x17d)]),gl[_0xcfbb54(0x189)](gl['getUniformLocation'](program,_0xcfbb54(0x185)),gameWidth/gl[_0xcfbb54(0x180)]['width']),gl[_0xcfbb54(0x189)](gl['getUniformLocation'](program,'smooth_height'),gameHeight/gl[_0xcfbb54(0x180)][_0xcfbb54(0x17d)]);}function setupBuffers(){const _0x44b1ee=a0_0x5688c2,_0x1c45f8=gl[_0x44b1ee(0x138)]();gl[_0x44b1ee(0x187)](gl['ARRAY_BUFFER'],_0x1c45f8),gl[_0x44b1ee(0x159)](gl[_0x44b1ee(0x14b)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x28f152=gl[_0x44b1ee(0x179)](program,_0x44b1ee(0x137));gl[_0x44b1ee(0x195)](_0x28f152),gl[_0x44b1ee(0x142)](_0x28f152,0x2,gl[_0x44b1ee(0x18b)],![],0x0,0x0);const _0x14eb6b=gl[_0x44b1ee(0x138)]();gl[_0x44b1ee(0x187)](gl[_0x44b1ee(0x14b)],_0x14eb6b),gl[_0x44b1ee(0x159)](gl[_0x44b1ee(0x14b)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x44b1ee(0x15d)]);const _0x50b2e6=gl[_0x44b1ee(0x179)](program,_0x44b1ee(0x14a));gl['enableVertexAttribArray'](_0x50b2e6),gl['vertexAttribPointer'](_0x50b2e6,0x2,gl[_0x44b1ee(0x18b)],![],0x0,0x0);}function a0_0x3537(){const _0x20f6ef=['TEXTURE_MIN_FILTER','./src/shaders/fragmentShader.glsl','game_size','TEXTURE_WRAP_S','texcoord','ARRAY_BUFFER','textured','1895640ZhdmOl','useProgram','zoom','getUniformLocation','WebGL2\x20not\x20supported','getShaderParameter','createShader','getContext','getItem','.message-container','addEventListener','texImage2D','bufferData','.setting-container','slice','bindTexture','STATIC_DRAW','webgl2','add','scale(','uniform2f','12BBGNqO','createProgram','COLOR_BUFFER_BIT','./src/shaders/vertexShader.glsl','toLowerCase','clientWidth','querySelectorAll','width','px\x20','texParameteri','linkProgram','0,0,','shaderSource','style','canvas-container','6eVbHrK','compileShader','.stateTitle,\x20.stateDate','render_size','.bin','getShaderInfoLog','clear','7729776EjCKdh','getAttribLocation','clearRect','DOMContentLoaded','warm','height','UNSIGNED_BYTE','8172495JMOZuX','canvas','CLAMP_TO_EDGE','forEach','setItem','TEXTURE_2D','smooth_width','_temperature','bindBuffer','RGBA','uniform1f','log','FLOAT','TEXTURE_MAG_FILTER','getPixelData','VERTEX_SHADER','getElementById','createTexture','attachShader','--bg-size','FRAGMENT_SHADER','drawImage','enableVertexAttribArray','NEAREST','8334930JsVRnl','img-shader','4201463QFPBZp','22723002mvfALU','imageSmoothingEnabled','4.0','floor','remove','position','createBuffer','viewport','./src/lut/lut64_','screenSize','imageRendering','deleteShader','gbc','crisp-edges','setProperty','error','vertexAttribPointer','fefs','documentElement','130973nxRtWF'];a0_0x3537=function(){return _0x20f6ef;};return a0_0x3537();}async function renderPixel(_0x41dd7b){const _0x17dd28=a0_0x5688c2,_0x181174=a0_0xe2c1d3[_0x17dd28(0x18d)]();if(!_0x181174)return;await loadLUT64();const _0x11e71c=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x3edc1d=0x0;_0x3edc1d<gameHeight;_0x3edc1d++){for(let _0x3add34=0x0;_0x3add34<gameWidth;_0x3add34++){const _0x4570dc=_0x3edc1d*gameStride+_0x3add34,_0x33b075=(_0x3edc1d*gameWidth+_0x3add34)*0x4,_0x35a95e=_0x181174[_0x4570dc],_0x329bf7=(_0x35a95e&0xff)>>0x2,_0xecf93=(_0x35a95e>>0x8&0xff)>>0x2,_0x3467a7=(_0x35a95e>>0x10&0xff)>>0x2,_0x13aaa1=(_0x329bf7*0x40*0x40+_0xecf93*0x40+_0x3467a7)*0x3;_0x11e71c[_0x33b075]=lut64[_0x13aaa1],_0x11e71c[_0x33b075+0x1]=lut64[_0x13aaa1+0x1],_0x11e71c[_0x33b075+0x2]=lut64[_0x13aaa1+0x2],_0x11e71c[_0x33b075+0x3]=0xff;}}if(_0x41dd7b===_0x17dd28(0x15e))gl[_0x17dd28(0x15c)](gl[_0x17dd28(0x184)],texture),gl[_0x17dd28(0x158)](gl[_0x17dd28(0x184)],0x0,gl[_0x17dd28(0x188)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x17dd28(0x17e)],_0x11e71c),gl[_0x17dd28(0x177)](gl[_0x17dd28(0x164)]),gl['drawArrays'](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x41dd7b==='2d'){ctx2d=bufferCanvas[_0x17dd28(0x154)]('2d'),ctx2d[_0x17dd28(0x19b)]=![];const _0x4239f9=new ImageData(_0x11e71c,gameWidth,gameHeight);createImageBitmap(_0x4239f9)['then'](_0x28e722=>{const _0xbee963=_0x17dd28;ctx2d[_0xbee963(0x17a)](0x0,0x0,bufferCanvas[_0xbee963(0x169)],bufferCanvas[_0xbee963(0x17d)]),ctx2d[_0xbee963(0x194)](_0x28e722,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x41dd7b));}export async function switchRenderMode(_0x101feb){const _0x313d88=a0_0x5688c2;systemType=gameName[_0x313d88(0x15b)](-0x3);if(_0x101feb==='2d')setupStyle('2d'),renderPixel('2d');else _0x101feb===_0x313d88(0x15e)&&(setupStyle(_0x313d88(0x15e)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x5688c2(0x157)](a0_0x5688c2(0x17b),function(){});