(function(_0x38b77c,_0x498010){const _0x4a301d=a0_0x14e1,_0x15ce83=_0x38b77c();while(!![]){try{const _0x53f16c=-parseInt(_0x4a301d(0x8d))/0x1+-parseInt(_0x4a301d(0x84))/0x2*(-parseInt(_0x4a301d(0xa7))/0x3)+parseInt(_0x4a301d(0x93))/0x4*(parseInt(_0x4a301d(0xb7))/0x5)+parseInt(_0x4a301d(0xa5))/0x6+parseInt(_0x4a301d(0xb8))/0x7*(parseInt(_0x4a301d(0xa0))/0x8)+-parseInt(_0x4a301d(0x91))/0x9+-parseInt(_0x4a301d(0xb5))/0xa;if(_0x53f16c===_0x498010)break;else _0x15ce83['push'](_0x15ce83['shift']());}catch(_0x43b169){_0x15ce83['push'](_0x15ce83['shift']());}}}(a0_0x59c0,0x9d8f5));import*as a0_0x2aabe0 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x59c0(){const _0x3e35ed=['ARRAY_BUFFER','low-power','createBuffer','FLOAT','getPixelData','STATIC_DRAW','112hgDaIi','clear','useProgram','vertexAttribPointer','getUniformLocation','6791346UmNrWe','webgl_full','245967XTdbPG','TEXTURE_MIN_FILTER','smooth_height','createTexture','position','data','TEXTURE_2D','canvas','drawArrays','texParameteri','TEXTURE_WRAP_S','compileShader','bufferData','clearRect','9418020HljQKZ','bindBuffer','2715mKHnig','55923ztgxpc','slice','putImageData','./src/lut/lut64_','TEXTURE_MAG_FILTER','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','TRIANGLE_STRIP','enableVertexAttribArray','CLAMP_TO_EDGE','getItem','toLowerCase','attachShader','log','texcoord','getContext','height','COLOR_BUFFER_BIT','12sDVGHl','imageSmoothingEnabled','width','getAttribLocation','none','bindTexture','TEXTURE_WRAP_T','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','NEAREST','100419DETexK','_4.0.bin','UNSIGNED_BYTE','uniform1f','6526854PIZaFK','linkProgram','4988BqBhId','texImage2D','shaderSource','set','webgl','RGBA','uniform2f'];a0_0x59c0=function(){return _0x3e35ed;};return a0_0x59c0();}function a0_0x14e1(_0x34dbcb,_0x30e5ca){const _0x59c0bc=a0_0x59c0();return a0_0x14e1=function(_0x14e146,_0x9c1f2a){_0x14e146=_0x14e146-0x7c;let _0x231f8f=_0x59c0bc[_0x14e146];return _0x231f8f;},a0_0x14e1(_0x34dbcb,_0x30e5ca);}async function loadLUT64(){const _0x5086e9=a0_0x14e1;systemType=gameName[_0x5086e9(0xb9)](-0x3);const _0xb39cea=(localStorage[_0x5086e9(0x7c)](gameName+'_temperature')||_0x5086e9(0x88))[_0x5086e9(0x7d)]();if(!lut64||lut64Profile!==_0xb39cea){const _0x25a4c9=_0x5086e9(0xbb)+_0xb39cea+_0x5086e9(0x8e);console[_0x5086e9(0x7f)](_0x25a4c9);const _0x2c5497=await fetch(_0x25a4c9),_0x1625ae=await _0x2c5497['arrayBuffer']();lut64=new Uint8Array(_0x1625ae),lut64Profile=_0xb39cea;}}function setupWebGL_Shader(_0x95549){const _0x1dc521=a0_0x14e1;gl=bufferCanvas[_0x1dc521(0x81)](_0x1dc521(0x97),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x1dc521(0x9b)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x1dc521(0x86)],bufferCanvas[_0x1dc521(0x82)]);function _0x159cdf(_0xdfff45,_0x1fa965){const _0x2a2172=_0x1dc521,_0x3be603=gl['createShader'](_0xdfff45);return gl[_0x2a2172(0x95)](_0x3be603,_0x1fa965),gl[_0x2a2172(0xb2)](_0x3be603),_0x3be603;}vs=_0x1dc521(0xbd);if(_0x95549===_0x1dc521(0x97))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x95549===_0x1dc521(0xa6)&&(fs=_0x1dc521(0x8b));const _0x34a734=_0x159cdf(gl['VERTEX_SHADER'],vs),_0x488843=_0x159cdf(gl['FRAGMENT_SHADER'],fs);return program=gl['createProgram'](),gl[_0x1dc521(0x7e)](program,_0x34a734),gl[_0x1dc521(0x7e)](program,_0x488843),gl[_0x1dc521(0x92)](program),gl[_0x1dc521(0xa2)](program),program;}function setupTexture_Buffer(_0x4da6fe){const _0x352be1=a0_0x14e1;texture=gl[_0x352be1(0xaa)](),gl[_0x352be1(0x89)](gl[_0x352be1(0xad)],texture),gl[_0x352be1(0xb0)](gl['TEXTURE_2D'],gl[_0x352be1(0xa8)],gl[_0x352be1(0x8c)]),gl['texParameteri'](gl[_0x352be1(0xad)],gl[_0x352be1(0xbc)],gl[_0x352be1(0x8c)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x352be1(0xb1)],gl[_0x352be1(0xc0)]),gl[_0x352be1(0xb0)](gl[_0x352be1(0xad)],gl[_0x352be1(0x8a)],gl['CLAMP_TO_EDGE']);_0x4da6fe==='webgl_full'&&(gl[_0x352be1(0x99)](gl['getUniformLocation'](program,'game_size'),gameWidth,gameHeight),gl[_0x352be1(0x99)](gl['getUniformLocation'](program,'render_size'),gl[_0x352be1(0xae)][_0x352be1(0x86)],gl[_0x352be1(0xae)][_0x352be1(0x82)]),gl[_0x352be1(0x90)](gl[_0x352be1(0xa4)](program,'smooth_width'),gameWidth/gl['canvas'][_0x352be1(0x86)]),gl[_0x352be1(0x90)](gl[_0x352be1(0xa4)](program,_0x352be1(0xa9)),gameHeight/gl[_0x352be1(0xae)]['height']));const _0x49a612=gl['createBuffer']();gl[_0x352be1(0xb6)](gl['ARRAY_BUFFER'],_0x49a612),gl[_0x352be1(0xb3)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x352be1(0x9f)]),gl[_0x352be1(0xa3)](gl[_0x352be1(0x87)](program,_0x352be1(0xab)),0x2,gl[_0x352be1(0x9d)],![],0x0,0x0),gl['enableVertexAttribArray'](gl['getAttribLocation'](program,'position'));const _0xbcddb7=gl[_0x352be1(0x9c)]();gl[_0x352be1(0xb6)](gl[_0x352be1(0x9a)],_0xbcddb7),gl[_0x352be1(0xb3)](gl[_0x352be1(0x9a)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x352be1(0x9f)]),gl[_0x352be1(0xa3)](gl[_0x352be1(0x87)](program,_0x352be1(0x80)),0x2,gl[_0x352be1(0x9d)],![],0x0,0x0),gl[_0x352be1(0xbf)](gl[_0x352be1(0x87)](program,'texcoord'));}function setup2DContext(){const _0x2e37ef=a0_0x14e1;ctx2d=bufferCanvas[_0x2e37ef(0x81)]('2d'),ctx2d[_0x2e37ef(0x85)]=![];}async function renderPixel(_0x532a81){const _0x2c6cac=a0_0x14e1,_0x55c862=a0_0x2aabe0[_0x2c6cac(0x9e)]();if(!_0x55c862)return;await loadLUT64();const _0x1cc17a=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x14f1df=0x0;_0x14f1df<gameHeight;_0x14f1df++){for(let _0xca9e7d=0x0;_0xca9e7d<gameWidth;_0xca9e7d++){const _0x1224f6=_0x14f1df*gameStride+_0xca9e7d,_0x4dfbfc=(_0x14f1df*gameWidth+_0xca9e7d)*0x4,_0x288ab8=_0x55c862[_0x1224f6];if(lut64Profile===_0x2c6cac(0x88))_0x1cc17a[_0x4dfbfc]=_0x288ab8&0xff,_0x1cc17a[_0x4dfbfc+0x1]=_0x288ab8>>0x8&0xff,_0x1cc17a[_0x4dfbfc+0x2]=_0x288ab8>>0x10&0xff,_0x1cc17a[_0x4dfbfc+0x3]=0xff;else{const _0x36263c=(_0x288ab8&0xff)>>0x2,_0x2473ea=(_0x288ab8>>0x8&0xff)>>0x2,_0x2d367f=(_0x288ab8>>0x10&0xff)>>0x2,_0x4f0b53=(_0x36263c*0x40*0x40+_0x2473ea*0x40+_0x2d367f)*0x3;_0x1cc17a[_0x4dfbfc]=lut64[_0x4f0b53],_0x1cc17a[_0x4dfbfc+0x1]=lut64[_0x4f0b53+0x1],_0x1cc17a[_0x4dfbfc+0x2]=lut64[_0x4f0b53+0x2],_0x1cc17a[_0x4dfbfc+0x3]=0xff;}}}if(_0x532a81===_0x2c6cac(0x97))gl[_0x2c6cac(0x94)](gl[_0x2c6cac(0xad)],0x0,gl[_0x2c6cac(0x98)],gameWidth,gameHeight,0x0,gl[_0x2c6cac(0x98)],gl[_0x2c6cac(0x8f)],_0x1cc17a),gl[_0x2c6cac(0xa1)](gl[_0x2c6cac(0x83)]),gl[_0x2c6cac(0xaf)](gl[_0x2c6cac(0xbe)],0x0,0x4);else _0x532a81==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x1cc17a,gameWidth,gameHeight):imageDataObj[_0x2c6cac(0xac)][_0x2c6cac(0x96)](_0x1cc17a),ctx2d[_0x2c6cac(0xb4)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x2c6cac(0x82)]),ctx2d[_0x2c6cac(0xba)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x532a81));}export async function switchRenderMode(_0x4880e8){const _0x3c2ff5=a0_0x14e1;systemType=gameName['slice'](-0x3);if(_0x4880e8==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x4880e8==='webgl')setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(_0x3c2ff5(0x97)),renderPixel(_0x3c2ff5(0x97));else _0x4880e8==='webgl_full'&&(setupStyle(_0x3c2ff5(0xa6)),setupWebGL_Shader(_0x3c2ff5(0xa6)),setupTexture_Buffer(_0x3c2ff5(0xa6)),renderPixel(_0x3c2ff5(0x97)));}}