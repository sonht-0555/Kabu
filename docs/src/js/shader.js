const a0_0x32eaad=a0_0x3b51;function a0_0x46d9(){const _0x489333=['4730713LNDXKv','4.0','arrayBuffer','texImage2D','top\x20center','classList','_temperature','TEXTURE_WRAP_S','fefs','7061898lZfzvb','NEAREST','gbc','uniform1f','getContext','clear','style','slice','remove','COLOR_BUFFER_BIT','710361EhiYLn','.message-container','770zluzQW','imageRendering','texcoord','bufferData','text','imageSmoothingEnabled','COMPILE_STATUS','getUniformLocation','0,0,','log','275753MXrBrs','ARRAY_BUFFER','10szVJfl','10qZMpAO','canvas-container','useProgram','height','getAttribLocation','addEventListener','getItem','./src/shaders/fragmentShader.glsl','1512eulnwr','viewport','shaderSource','error','enableVertexAttribArray','forEach','VERTEX_SHADER','getShaderInfoLog','12ndEFqN','createBuffer','5cQADSG','screenSize','uniform2f','textured','linkProgram','TEXTURE_MIN_FILTER','UNSIGNED_BYTE','vertexAttribPointer','DOMContentLoaded','TEXTURE_2D','TEXTURE_MAG_FILTER','width','bindTexture','querySelectorAll','floor','canvas','RGBA','crisp-edges','scale(','add','STATIC_DRAW','game_size','render_size','setItem','clientWidth','TEXTURE_WRAP_T','then','warm','drawArrays','drawImage','.stateTitle,\x20.stateDate','position','createTexture','deleteShader','createShader','smooth_width','createProgram','FLOAT','toLowerCase','bindBuffer','smooth_height','WebGL2\x20not\x20supported','105516mFRuVd','--bg-size','16009DNSORF','28sToTXC','attachShader','TRIANGLE_STRIP','transformOrigin','zoom','texParameteri','webgl2','getElementById','1389567rfMmhx','FRAGMENT_SHADER','getShaderParameter'];a0_0x46d9=function(){return _0x489333;};return a0_0x46d9();}(function(_0x5895d5,_0x2e1e7d){const _0x1bd309=a0_0x3b51,_0x2aa1c8=_0x5895d5();while(!![]){try{const _0x5cb127=-parseInt(_0x1bd309(0x1b2))/0x1*(parseInt(_0x1bd309(0x1b5))/0x2)+-parseInt(_0x1bd309(0x1fc))/0x3*(-parseInt(_0x1bd309(0x1c5))/0x4)+parseInt(_0x1bd309(0x1c7))/0x5*(parseInt(_0x1bd309(0x208))/0x6)+-parseInt(_0x1bd309(0x1f3))/0x7*(parseInt(_0x1bd309(0x1bd))/0x8)+parseInt(_0x1bd309(0x212))/0x9*(parseInt(_0x1bd309(0x1b4))/0xa)+-parseInt(_0x1bd309(0x214))/0xb*(-parseInt(_0x1bd309(0x1f1))/0xc)+-parseInt(_0x1bd309(0x1ff))/0xd*(parseInt(_0x1bd309(0x1f4))/0xe);if(_0x5cb127===_0x2e1e7d)break;else _0x2aa1c8['push'](_0x2aa1c8['shift']());}catch(_0x368300){_0x2aa1c8['push'](_0x2aa1c8['shift']());}}}(a0_0x46d9,0xb0503));import*as a0_0x1dbf3b from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x32eaad(0x1fb)](a0_0x32eaad(0x1ca)),bufferCanvas=document[a0_0x32eaad(0x1fb)](a0_0x32eaad(0x1d6)),canvasContainer=document[a0_0x32eaad(0x1fb)](a0_0x32eaad(0x1b6)),imgShader=document[a0_0x32eaad(0x1fb)]('img-shader'),settingContainer=document['querySelectorAll']('.setting-container'),messageContainer=document[a0_0x32eaad(0x1d4)](a0_0x32eaad(0x213)),stateTitle=document[a0_0x32eaad(0x1d4)](a0_0x32eaad(0x1e5));async function loadLUT64(){const _0x1a0cf5=a0_0x32eaad;systemType=gameName['slice'](-0x3);const _0x305bc1=localStorage[_0x1a0cf5(0x1bb)](gameName+'_streng')||_0x1a0cf5(0x200),_0x2bb309=(localStorage[_0x1a0cf5(0x1bb)](gameName+_0x1a0cf5(0x205))||_0x1a0cf5(0x1e2))[_0x1a0cf5(0x1ed)]();if(!lut64||lut64Streng!==_0x305bc1||lut64Profile!==_0x2bb309){const _0x61fe88='./src/lut/lut64_'+_0x2bb309+'_'+_0x305bc1+'.bin';console[_0x1a0cf5(0x1b1)](_0x61fe88);const _0x33e81a=await fetch(_0x61fe88),_0x29b0b7=await _0x33e81a[_0x1a0cf5(0x201)]();lut64=new Uint8Array(_0x29b0b7),lut64Streng=_0x305bc1,lut64Profile=_0x2bb309;}}async function loadShaderSource(_0x1be0ce){const _0x557a4e=a0_0x32eaad,_0x19a5c3=await fetch(_0x1be0ce);return await _0x19a5c3[_0x557a4e(0x218)]();}function setupStyle(_0x3a93f2){const _0x11b273=a0_0x32eaad;clientWidth=document['documentElement'][_0x11b273(0x1df)];const _0x3ec13e=window['devicePixelRatio'];systemType===_0x11b273(0x20a)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x3ec13e/gameWidth),localStorage[_0x11b273(0x1de)]('screenSize','0,0,'+gameWidth*(integerScaling/_0x3ec13e)+','+gameHeight*(integerScaling/_0x3ec13e))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x11b273(0x1d5)](clientWidth*_0x3ec13e/gameWidth),localStorage[_0x11b273(0x1de)](_0x11b273(0x1c8),_0x11b273(0x1b0)+gameWidth*(integerScaling/_0x3ec13e)+','+gameHeight*(integerScaling/_0x3ec13e)));if(_0x3a93f2==='2d')bufferCanvas[_0x11b273(0x1d2)]=gameWidth,bufferCanvas[_0x11b273(0x1b8)]=gameHeight,bufferCanvas[_0x11b273(0x20e)]['zoom']=''+integerScaling/_0x3ec13e,bufferCanvas[_0x11b273(0x20e)][_0x11b273(0x215)]=_0x11b273(0x1d8),canvasContainer[_0x11b273(0x20e)]['width']=gameWidth*(integerScaling/_0x3ec13e)+'px',canvasContainer[_0x11b273(0x20e)][_0x11b273(0x1b8)]=gameHeight*(integerScaling/_0x3ec13e)+'px',textured[_0x11b273(0x20e)][_0x11b273(0x1d2)]=gameWidth*(integerScaling/_0x3ec13e)+'px',textured['style'][_0x11b273(0x1b8)]=gameHeight*(integerScaling/_0x3ec13e)+'px',imgShader[_0x11b273(0x20e)]['transform']=_0x11b273(0x1d9)+integerScaling/_0x3ec13e/upscaleShader+')',settingContainer['forEach'](function(_0x51237e){const _0x2dfc8d=_0x11b273;_0x51237e[_0x2dfc8d(0x20e)][_0x2dfc8d(0x1d2)]=gameWidth*(integerScaling/_0x3ec13e)+'px',_0x51237e[_0x2dfc8d(0x20e)][_0x2dfc8d(0x1b8)]=gameHeight*(integerScaling/_0x3ec13e)+'px';}),messageContainer[_0x11b273(0x1c2)](function(_0x322700){const _0x2997b2=_0x11b273;_0x322700['style'][_0x2997b2(0x1d2)]=gameWidth+'px',_0x322700[_0x2997b2(0x20e)][_0x2997b2(0x1b8)]=gameHeight+'px',_0x322700['style'][_0x2997b2(0x1f8)]=''+integerScaling/_0x3ec13e;}),stateTitle[_0x11b273(0x1c2)](function(_0x277d5a){const _0x4e729e=_0x11b273;_0x277d5a['classList'][_0x4e729e(0x210)](_0x4e729e(0x207));});else _0x3a93f2===_0x11b273(0x1fa)&&(bufferCanvas[_0x11b273(0x1d2)]=clientWidth*upscaleFactor,bufferCanvas[_0x11b273(0x1b8)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x11b273(0x1f8)]=''+0x1/upscaleFactor,bufferCanvas[_0x11b273(0x20e)][_0x11b273(0x215)]='',canvasContainer[_0x11b273(0x20e)][_0x11b273(0x1d2)]=clientWidth+'px',canvasContainer['style'][_0x11b273(0x1b8)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x11b273(0x20e)][_0x11b273(0x1d2)]=clientWidth+'px',textured['style'][_0x11b273(0x1b8)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x11b273(0x20e)]['transform']='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x11b273(0x1c2)](function(_0xcdbcee){const _0xabe453=_0x11b273;_0xcdbcee[_0xabe453(0x20e)][_0xabe453(0x1d2)]=clientWidth+'px',_0xcdbcee[_0xabe453(0x20e)][_0xabe453(0x1b8)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x11b273(0x1c2)](function(_0x37f39b){const _0x1ae483=_0x11b273;_0x37f39b[_0x1ae483(0x20e)][_0x1ae483(0x1d2)]=gameWidth+'px',_0x37f39b[_0x1ae483(0x20e)]['height']=gameHeight+'px',_0x37f39b[_0x1ae483(0x20e)]['zoom']=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x280e78){const _0x46a807=_0x11b273;_0x280e78[_0x46a807(0x204)][_0x46a807(0x1da)](_0x46a807(0x207));}));imgShader[_0x11b273(0x20e)]['width']=gameWidth*upscaleShader+'px',imgShader['style']['height']=gameHeight*upscaleShader+'px',imgShader[_0x11b273(0x20e)][_0x11b273(0x1f7)]=_0x11b273(0x203),imgShader['style']['setProperty'](_0x11b273(0x1f2),upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x20ebe8=a0_0x32eaad;gl=bufferCanvas[_0x20ebe8(0x20c)]('webgl2');if(!gl)return console[_0x20ebe8(0x1c0)](_0x20ebe8(0x1f0)),null;gl[_0x20ebe8(0x1be)](0x0,0x0,bufferCanvas[_0x20ebe8(0x1d2)],bufferCanvas[_0x20ebe8(0x1b8)]);}function createShader(_0xba5c68,_0x2c5904){const _0x8a654b=a0_0x32eaad,_0x2282f7=gl[_0x8a654b(0x1e9)](_0xba5c68);gl[_0x8a654b(0x1bf)](_0x2282f7,_0x2c5904),gl['compileShader'](_0x2282f7);if(!gl[_0x8a654b(0x1fe)](_0x2282f7,gl[_0x8a654b(0x1ae)]))return console[_0x8a654b(0x1c0)](gl[_0x8a654b(0x1c4)](_0x2282f7)),gl[_0x8a654b(0x1e8)](_0x2282f7),null;return _0x2282f7;}async function setupShaders(){const _0x143c73=a0_0x32eaad,_0x893d2e=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0xc40d2e=await loadShaderSource(_0x143c73(0x1bc)),_0x464275=createShader(gl[_0x143c73(0x1c3)],_0x893d2e),_0x48ba15=createShader(gl[_0x143c73(0x1fd)],_0xc40d2e);return program=gl[_0x143c73(0x1eb)](),gl['attachShader'](program,_0x464275),gl[_0x143c73(0x1f5)](program,_0x48ba15),gl[_0x143c73(0x1cb)](program),gl[_0x143c73(0x1b7)](program),program;}function setupTexture(){const _0x119761=a0_0x32eaad;texture=gl[_0x119761(0x1e7)](),gl[_0x119761(0x1d3)](gl[_0x119761(0x1d0)],texture),gl['texParameteri'](gl[_0x119761(0x1d0)],gl[_0x119761(0x1cc)],gl[_0x119761(0x209)]),gl['texParameteri'](gl[_0x119761(0x1d0)],gl[_0x119761(0x1d1)],gl[_0x119761(0x209)]),gl['texParameteri'](gl[_0x119761(0x1d0)],gl[_0x119761(0x206)],gl['CLAMP_TO_EDGE']),gl[_0x119761(0x1f9)](gl[_0x119761(0x1d0)],gl[_0x119761(0x1e0)],gl['CLAMP_TO_EDGE']),gl[_0x119761(0x1c9)](gl['getUniformLocation'](program,_0x119761(0x1dc)),gameWidth,gameHeight),gl[_0x119761(0x1c9)](gl[_0x119761(0x1af)](program,_0x119761(0x1dd)),gl[_0x119761(0x1d6)][_0x119761(0x1d2)],gl[_0x119761(0x1d6)][_0x119761(0x1b8)]),gl[_0x119761(0x20b)](gl[_0x119761(0x1af)](program,_0x119761(0x1ea)),gameWidth/gl['canvas'][_0x119761(0x1d2)]),gl['uniform1f'](gl[_0x119761(0x1af)](program,_0x119761(0x1ef)),gameHeight/gl[_0x119761(0x1d6)][_0x119761(0x1b8)]);}function setupBuffers(){const _0x1d414f=a0_0x32eaad,_0x469c5d=gl['createBuffer']();gl[_0x1d414f(0x1ee)](gl[_0x1d414f(0x1b3)],_0x469c5d),gl[_0x1d414f(0x217)](gl[_0x1d414f(0x1b3)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x1d414f(0x1db)]);const _0x2fe18e=gl[_0x1d414f(0x1b9)](program,_0x1d414f(0x1e6));gl['enableVertexAttribArray'](_0x2fe18e),gl[_0x1d414f(0x1ce)](_0x2fe18e,0x2,gl[_0x1d414f(0x1ec)],![],0x0,0x0);const _0x312d58=gl[_0x1d414f(0x1c6)]();gl['bindBuffer'](gl[_0x1d414f(0x1b3)],_0x312d58),gl[_0x1d414f(0x217)](gl[_0x1d414f(0x1b3)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x1d414f(0x1db)]);const _0x525217=gl[_0x1d414f(0x1b9)](program,_0x1d414f(0x216));gl[_0x1d414f(0x1c1)](_0x525217),gl[_0x1d414f(0x1ce)](_0x525217,0x2,gl['FLOAT'],![],0x0,0x0);}function a0_0x3b51(_0x7a50e0,_0xf8da93){const _0x46d95f=a0_0x46d9();return a0_0x3b51=function(_0x3b51db,_0x5e78a5){_0x3b51db=_0x3b51db-0x1ad;let _0x54fff3=_0x46d95f[_0x3b51db];return _0x54fff3;},a0_0x3b51(_0x7a50e0,_0xf8da93);}async function renderPixel(_0x153a0b){const _0x3d73a9=a0_0x32eaad,_0x53ec88=a0_0x1dbf3b['getPixelData']();if(!_0x53ec88)return;await loadLUT64();const _0x37b066=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1bc014=0x0;_0x1bc014<gameHeight;_0x1bc014++){for(let _0x2ffa4c=0x0;_0x2ffa4c<gameWidth;_0x2ffa4c++){const _0x430e8f=_0x1bc014*gameStride+_0x2ffa4c,_0x96a188=(_0x1bc014*gameWidth+_0x2ffa4c)*0x4,_0x33451a=_0x53ec88[_0x430e8f],_0x393745=(_0x33451a&0xff)>>0x2,_0x5a4616=(_0x33451a>>0x8&0xff)>>0x2,_0x1e38aa=(_0x33451a>>0x10&0xff)>>0x2,_0x471a62=(_0x393745*0x40*0x40+_0x5a4616*0x40+_0x1e38aa)*0x3;_0x37b066[_0x96a188]=lut64[_0x471a62],_0x37b066[_0x96a188+0x1]=lut64[_0x471a62+0x1],_0x37b066[_0x96a188+0x2]=lut64[_0x471a62+0x2],_0x37b066[_0x96a188+0x3]=0xff;}}if(_0x153a0b==='webgl2')gl['bindTexture'](gl[_0x3d73a9(0x1d0)],texture),gl[_0x3d73a9(0x202)](gl[_0x3d73a9(0x1d0)],0x0,gl[_0x3d73a9(0x1d7)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x3d73a9(0x1cd)],_0x37b066),gl[_0x3d73a9(0x20d)](gl[_0x3d73a9(0x211)]),gl[_0x3d73a9(0x1e3)](gl[_0x3d73a9(0x1f6)],0x0,0x4);else{if(_0x153a0b==='2d'){ctx2d=bufferCanvas[_0x3d73a9(0x20c)]('2d'),ctx2d[_0x3d73a9(0x1ad)]=![];const _0x321c28=new ImageData(_0x37b066,gameWidth,gameHeight);createImageBitmap(_0x321c28)[_0x3d73a9(0x1e1)](_0x3505b9=>{const _0x394116=_0x3d73a9;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x394116(0x1d2)],bufferCanvas['height']),ctx2d[_0x394116(0x1e4)](_0x3505b9,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x153a0b));}export async function switchRenderMode(_0x52f4e8){const _0x4ce54e=a0_0x32eaad;systemType=gameName[_0x4ce54e(0x20f)](-0x3);if(_0x52f4e8==='2d')setupStyle('2d'),renderPixel('2d');else _0x52f4e8===_0x4ce54e(0x1fa)&&(setupStyle(_0x4ce54e(0x1fa)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x4ce54e(0x1fa)));}document[a0_0x32eaad(0x1ba)](a0_0x32eaad(0x1cf),function(){});