const a0_0x579581=a0_0x2855;(function(_0x127446,_0x590cf5){const _0x542152=a0_0x2855,_0x5e61fd=_0x127446();while(!![]){try{const _0x539d26=-parseInt(_0x542152(0x104))/0x1+-parseInt(_0x542152(0xf7))/0x2*(-parseInt(_0x542152(0xd1))/0x3)+-parseInt(_0x542152(0xb3))/0x4+parseInt(_0x542152(0xbb))/0x5+parseInt(_0x542152(0xec))/0x6*(parseInt(_0x542152(0x109))/0x7)+parseInt(_0x542152(0x112))/0x8*(-parseInt(_0x542152(0xfc))/0x9)+parseInt(_0x542152(0xed))/0xa*(parseInt(_0x542152(0xbf))/0xb);if(_0x539d26===_0x590cf5)break;else _0x5e61fd['push'](_0x5e61fd['shift']());}catch(_0x33635f){_0x5e61fd['push'](_0x5e61fd['shift']());}}}(a0_0x1fc2,0x2cc2a));import*as a0_0x557e35 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x579581(0xce)](a0_0x579581(0xb8)),bufferCanvas=document['getElementById'](a0_0x579581(0xeb)),canvasContainer=document[a0_0x579581(0xce)](a0_0x579581(0xc4)),imgShader=document[a0_0x579581(0xce)](a0_0x579581(0xe4)),settingContainer=document[a0_0x579581(0xf1)](a0_0x579581(0x106)),messageContainer=document[a0_0x579581(0xf1)](a0_0x579581(0xe2)),stateTitle=document[a0_0x579581(0xf1)](a0_0x579581(0xcf));function a0_0x1fc2(){const _0x56d209=['getItem','createShader','TEXTURE_2D','bindBuffer','enableVertexAttribArray','webgl2','.message-container','STATIC_DRAW','img-shader','classList','./src/lut/lut64_','WebGL2\x20not\x20supported','slice','screenSize','./src/shaders/vertexShader.glsl','canvas','78kUWQuj','506590zSnBMK','setItem','TEXTURE_MIN_FILTER','zoom','querySelectorAll','setProperty','toLowerCase','COLOR_BUFFER_BIT','NEAREST','0,0,','2iAChKP','arrayBuffer','smooth_height','imageSmoothingEnabled','gbc','9xkqwYO','scale(','ARRAY_BUFFER','position','drawImage','FRAGMENT_SHADER','vertexAttribPointer','_streng','262243DsRsBQ','COMPILE_STATUS','.setting-container','TEXTURE_MAG_FILTER','TRIANGLE_STRIP','157010sMPcko','CLAMP_TO_EDGE','getAttribLocation','texcoord','texParameteri','floor','transform','text','RGBA','200584vRxseS','compileShader','UNSIGNED_BYTE','add','4.0','uniform2f','_temperature','warm','clear','then','582612zUglwH','createBuffer','addEventListener','bindTexture','createProgram','textured','clientWidth','error','309080hNIOXf','getPixelData','imageRendering','fefs','11GafUFY','--bg-size','linkProgram','game_size','TEXTURE_WRAP_S','canvas-container','DOMContentLoaded','shaderSource','getUniformLocation','devicePixelRatio','height','VERTEX_SHADER','attachShader','clearRect','smooth_width','getElementById','.stateTitle,\x20.stateDate','uniform1f','636726SlxOKf','getShaderInfoLog','bufferData','viewport','px\x20','forEach','createTexture','getContext','width','deleteShader','style'];a0_0x1fc2=function(){return _0x56d209;};return a0_0x1fc2();}async function loadLUT64(){const _0x3e7ebe=a0_0x579581;systemType=gameName[_0x3e7ebe(0xe8)](-0x3);const _0x45d5bc=localStorage[_0x3e7ebe(0xdc)](gameName+_0x3e7ebe(0x103))||_0x3e7ebe(0x116),_0x4de5c6=(localStorage[_0x3e7ebe(0xdc)](gameName+_0x3e7ebe(0x118))||_0x3e7ebe(0x119))[_0x3e7ebe(0xf3)]();if(!lut64||lut64Streng!==_0x45d5bc||lut64Profile!==_0x4de5c6){const _0x4d4568=_0x3e7ebe(0xe6)+_0x4de5c6+'_'+_0x45d5bc+'.bin';console['log'](_0x4d4568);const _0x41fd31=await fetch(_0x4d4568),_0x584297=await _0x41fd31[_0x3e7ebe(0xf8)]();lut64=new Uint8Array(_0x584297),lut64Streng=_0x45d5bc,lut64Profile=_0x4de5c6;}}async function loadShaderSource(_0x24f82a){const _0x3df361=a0_0x579581,_0x6f4f3e=await fetch(_0x24f82a);return await _0x6f4f3e[_0x3df361(0x110)]();}function setupStyle(_0x4d58c5){const _0x1bdc95=a0_0x579581;clientWidth=document['documentElement'][_0x1bdc95(0xb9)];const _0x1f4a56=window[_0x1bdc95(0xc8)];systemType===_0x1bdc95(0xfb)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x1f4a56/gameWidth),localStorage[_0x1bdc95(0xee)](_0x1bdc95(0xe9),_0x1bdc95(0xf6)+gameWidth*(integerScaling/_0x1f4a56)+','+gameHeight*(integerScaling/_0x1f4a56))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x1bdc95(0x10e)](clientWidth*_0x1f4a56/gameWidth),localStorage['setItem'](_0x1bdc95(0xe9),_0x1bdc95(0xf6)+gameWidth*(integerScaling/_0x1f4a56)+','+gameHeight*(integerScaling/_0x1f4a56)));if(_0x4d58c5==='2d')bufferCanvas[_0x1bdc95(0xd9)]=gameWidth,bufferCanvas[_0x1bdc95(0xc9)]=gameHeight,bufferCanvas[_0x1bdc95(0xdb)]['zoom']=''+integerScaling/_0x1f4a56,bufferCanvas[_0x1bdc95(0xdb)][_0x1bdc95(0xbd)]='crisp-edges',canvasContainer[_0x1bdc95(0xdb)][_0x1bdc95(0xd9)]=gameWidth*(integerScaling/_0x1f4a56)+'px',canvasContainer[_0x1bdc95(0xdb)][_0x1bdc95(0xc9)]=gameHeight*(integerScaling/_0x1f4a56)+'px',textured[_0x1bdc95(0xdb)][_0x1bdc95(0xd9)]=gameWidth*(integerScaling/_0x1f4a56)+'px',textured['style'][_0x1bdc95(0xc9)]=gameHeight*(integerScaling/_0x1f4a56)+'px',imgShader[_0x1bdc95(0xdb)]['transform']=_0x1bdc95(0xfd)+integerScaling/_0x1f4a56/upscaleShader+')',settingContainer['forEach'](function(_0x4f9254){const _0x31463d=_0x1bdc95;_0x4f9254[_0x31463d(0xdb)][_0x31463d(0xd9)]=gameWidth*(integerScaling/_0x1f4a56)+'px',_0x4f9254['style'][_0x31463d(0xc9)]=gameHeight*(integerScaling/_0x1f4a56)+'px';}),messageContainer[_0x1bdc95(0xd6)](function(_0x1e7fb6){const _0x146b8e=_0x1bdc95;_0x1e7fb6[_0x146b8e(0xdb)][_0x146b8e(0xd9)]=gameWidth+'px',_0x1e7fb6[_0x146b8e(0xdb)]['height']=gameHeight+'px',_0x1e7fb6[_0x146b8e(0xdb)][_0x146b8e(0xf0)]=''+integerScaling/_0x1f4a56;}),stateTitle['forEach'](function(_0x3a2a88){const _0x4fca94=_0x1bdc95;_0x3a2a88[_0x4fca94(0xe5)]['remove']('fefs');});else _0x4d58c5===_0x1bdc95(0xe1)&&(bufferCanvas[_0x1bdc95(0xd9)]=clientWidth*upscaleFactor,bufferCanvas[_0x1bdc95(0xc9)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x1bdc95(0xdb)]['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x1bdc95(0xdb)][_0x1bdc95(0xbd)]='',canvasContainer[_0x1bdc95(0xdb)]['width']=clientWidth+'px',canvasContainer[_0x1bdc95(0xdb)][_0x1bdc95(0xc9)]=clientWidth*(gameHeight/gameWidth)+'px',textured['style'][_0x1bdc95(0xd9)]=clientWidth+'px',textured[_0x1bdc95(0xdb)][_0x1bdc95(0xc9)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x1bdc95(0xdb)][_0x1bdc95(0x10f)]=_0x1bdc95(0xfd)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x1bdc95(0xd6)](function(_0x191386){const _0x3db625=_0x1bdc95;_0x191386[_0x3db625(0xdb)]['width']=clientWidth+'px',_0x191386[_0x3db625(0xdb)]['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x1bdc95(0xd6)](function(_0x51832a){const _0x205fa4=_0x1bdc95;_0x51832a[_0x205fa4(0xdb)][_0x205fa4(0xd9)]=gameWidth+'px',_0x51832a[_0x205fa4(0xdb)][_0x205fa4(0xc9)]=gameHeight+'px',_0x51832a[_0x205fa4(0xdb)][_0x205fa4(0xf0)]=''+clientWidth/gameWidth;}),stateTitle[_0x1bdc95(0xd6)](function(_0x5a9d81){const _0x363667=_0x1bdc95;_0x5a9d81[_0x363667(0xe5)][_0x363667(0x115)](_0x363667(0xbe));}));imgShader[_0x1bdc95(0xdb)][_0x1bdc95(0xd9)]=gameWidth*upscaleShader+'px',imgShader['style']['height']=gameHeight*upscaleShader+'px',imgShader[_0x1bdc95(0xdb)]['transformOrigin']='top\x20center',imgShader['style'][_0x1bdc95(0xf2)](_0x1bdc95(0xc0),upscaleShader+_0x1bdc95(0xd5)+upscaleShader+'px');}function setupWebGL(){const _0x527f06=a0_0x579581;gl=bufferCanvas[_0x527f06(0xd8)](_0x527f06(0xe1));if(!gl)return console[_0x527f06(0xba)](_0x527f06(0xe7)),null;gl[_0x527f06(0xd4)](0x0,0x0,bufferCanvas[_0x527f06(0xd9)],bufferCanvas[_0x527f06(0xc9)]);}function createShader(_0x14a26b,_0x51994f){const _0x3c9d4b=a0_0x579581,_0x59ef16=gl[_0x3c9d4b(0xdd)](_0x14a26b);gl[_0x3c9d4b(0xc6)](_0x59ef16,_0x51994f),gl[_0x3c9d4b(0x113)](_0x59ef16);if(!gl['getShaderParameter'](_0x59ef16,gl[_0x3c9d4b(0x105)]))return console[_0x3c9d4b(0xba)](gl[_0x3c9d4b(0xd2)](_0x59ef16)),gl[_0x3c9d4b(0xda)](_0x59ef16),null;return _0x59ef16;}async function setupShaders(){const _0x3b04a0=a0_0x579581,_0x1071a9=await loadShaderSource(_0x3b04a0(0xea)),_0x3f8d95=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x46f848=createShader(gl[_0x3b04a0(0xca)],_0x1071a9),_0xfa9f0c=createShader(gl[_0x3b04a0(0x101)],_0x3f8d95);return program=gl[_0x3b04a0(0xb7)](),gl[_0x3b04a0(0xcb)](program,_0x46f848),gl['attachShader'](program,_0xfa9f0c),gl[_0x3b04a0(0xc1)](program),gl['useProgram'](program),program;}function setupTexture(){const _0x51f7dc=a0_0x579581;texture=gl[_0x51f7dc(0xd7)](),gl[_0x51f7dc(0xb6)](gl[_0x51f7dc(0xde)],texture),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x51f7dc(0xef)],gl[_0x51f7dc(0xf5)]),gl[_0x51f7dc(0x10d)](gl[_0x51f7dc(0xde)],gl[_0x51f7dc(0x107)],gl[_0x51f7dc(0xf5)]),gl[_0x51f7dc(0x10d)](gl[_0x51f7dc(0xde)],gl[_0x51f7dc(0xc3)],gl[_0x51f7dc(0x10a)]),gl[_0x51f7dc(0x10d)](gl[_0x51f7dc(0xde)],gl['TEXTURE_WRAP_T'],gl['CLAMP_TO_EDGE']),gl[_0x51f7dc(0x117)](gl['getUniformLocation'](program,_0x51f7dc(0xc2)),gameWidth,gameHeight),gl[_0x51f7dc(0x117)](gl[_0x51f7dc(0xc7)](program,'render_size'),gl['canvas'][_0x51f7dc(0xd9)],gl[_0x51f7dc(0xeb)][_0x51f7dc(0xc9)]),gl[_0x51f7dc(0xd0)](gl['getUniformLocation'](program,_0x51f7dc(0xcd)),gameWidth/gl[_0x51f7dc(0xeb)][_0x51f7dc(0xd9)]),gl[_0x51f7dc(0xd0)](gl[_0x51f7dc(0xc7)](program,_0x51f7dc(0xf9)),gameHeight/gl[_0x51f7dc(0xeb)][_0x51f7dc(0xc9)]);}function setupBuffers(){const _0x2c5f03=a0_0x579581,_0x263a62=gl['createBuffer']();gl[_0x2c5f03(0xdf)](gl[_0x2c5f03(0xfe)],_0x263a62),gl[_0x2c5f03(0xd3)](gl[_0x2c5f03(0xfe)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2c5f03(0xe3)]);const _0x50be90=gl[_0x2c5f03(0x10b)](program,_0x2c5f03(0xff));gl[_0x2c5f03(0xe0)](_0x50be90),gl[_0x2c5f03(0x102)](_0x50be90,0x2,gl['FLOAT'],![],0x0,0x0);const _0x48acc0=gl[_0x2c5f03(0xb4)]();gl[_0x2c5f03(0xdf)](gl['ARRAY_BUFFER'],_0x48acc0),gl[_0x2c5f03(0xd3)](gl[_0x2c5f03(0xfe)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2c5f03(0xe3)]);const _0x28f9b9=gl[_0x2c5f03(0x10b)](program,_0x2c5f03(0x10c));gl[_0x2c5f03(0xe0)](_0x28f9b9),gl[_0x2c5f03(0x102)](_0x28f9b9,0x2,gl['FLOAT'],![],0x0,0x0);}function a0_0x2855(_0x4058cc,_0x2cfe64){const _0x1fc2a0=a0_0x1fc2();return a0_0x2855=function(_0x28555c,_0x1661ac){_0x28555c=_0x28555c-0xb1;let _0x148429=_0x1fc2a0[_0x28555c];return _0x148429;},a0_0x2855(_0x4058cc,_0x2cfe64);}async function renderPixel(_0x16bf30){const _0x3d2f2d=a0_0x579581,_0x4adbed=a0_0x557e35[_0x3d2f2d(0xbc)]();if(!_0x4adbed)return;await loadLUT64();const _0x257709=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x344a02=0x0;_0x344a02<gameHeight;_0x344a02++){for(let _0x263948=0x0;_0x263948<gameWidth;_0x263948++){const _0x1e1c80=_0x344a02*gameStride+_0x263948,_0x1bac66=(_0x344a02*gameWidth+_0x263948)*0x4,_0x143360=_0x4adbed[_0x1e1c80],_0x48bc9e=(_0x143360&0xff)>>0x2,_0x5352d1=(_0x143360>>0x8&0xff)>>0x2,_0x5c90ea=(_0x143360>>0x10&0xff)>>0x2,_0x327de2=(_0x48bc9e*0x40*0x40+_0x5352d1*0x40+_0x5c90ea)*0x3;_0x257709[_0x1bac66]=lut64[_0x327de2],_0x257709[_0x1bac66+0x1]=lut64[_0x327de2+0x1],_0x257709[_0x1bac66+0x2]=lut64[_0x327de2+0x2],_0x257709[_0x1bac66+0x3]=0xff;}}if(_0x16bf30==='webgl2')gl[_0x3d2f2d(0xb6)](gl[_0x3d2f2d(0xde)],texture),gl['texImage2D'](gl[_0x3d2f2d(0xde)],0x0,gl[_0x3d2f2d(0x111)],gameWidth,gameHeight,0x0,gl[_0x3d2f2d(0x111)],gl[_0x3d2f2d(0x114)],_0x257709),gl[_0x3d2f2d(0xb1)](gl[_0x3d2f2d(0xf4)]),gl['drawArrays'](gl[_0x3d2f2d(0x108)],0x0,0x4);else{if(_0x16bf30==='2d'){ctx2d=bufferCanvas[_0x3d2f2d(0xd8)]('2d'),ctx2d[_0x3d2f2d(0xfa)]=![];const _0x337992=new ImageData(_0x257709,gameWidth,gameHeight);createImageBitmap(_0x337992)[_0x3d2f2d(0xb2)](_0x2ebba5=>{const _0x12530b=_0x3d2f2d;ctx2d[_0x12530b(0xcc)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x12530b(0xc9)]),ctx2d[_0x12530b(0x100)](_0x2ebba5,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x16bf30));}export async function switchRenderMode(_0x5c4b92){const _0x21909b=a0_0x579581;systemType=gameName[_0x21909b(0xe8)](-0x3);if(_0x5c4b92==='2d')setupStyle('2d'),renderPixel('2d');else _0x5c4b92===_0x21909b(0xe1)&&(setupStyle(_0x21909b(0xe1)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x579581(0xb5)](a0_0x579581(0xc5),function(){});