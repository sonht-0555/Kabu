(function(_0x5967cc,_0x5b9dca){const _0x2f7904=a0_0x5d40,_0x2e9f6a=_0x5967cc();while(!![]){try{const _0x40a600=parseInt(_0x2f7904(0xbb))/0x1*(parseInt(_0x2f7904(0xba))/0x2)+-parseInt(_0x2f7904(0xbd))/0x3+parseInt(_0x2f7904(0xd6))/0x4*(-parseInt(_0x2f7904(0xbf))/0x5)+-parseInt(_0x2f7904(0xae))/0x6+-parseInt(_0x2f7904(0xd7))/0x7+parseInt(_0x2f7904(0xbe))/0x8+parseInt(_0x2f7904(0xd9))/0x9;if(_0x40a600===_0x5b9dca)break;else _0x2e9f6a['push'](_0x2e9f6a['shift']());}catch(_0x546d6a){_0x2e9f6a['push'](_0x2e9f6a['shift']());}}}(a0_0x9f2e,0xca974));import*as a0_0x116848 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x453026=a0_0x5d40;systemType=gameName[_0x453026(0xa1)](-0x3);const _0x3f1f7c=(localStorage[_0x453026(0xa8)](gameName+_0x453026(0xb8))||_0x453026(0xc7))['toLowerCase']();if(!lut64||lut64Profile!==_0x3f1f7c){const _0x2e1a8e='./src/lut/lut64_'+_0x3f1f7c+_0x453026(0xc0);console[_0x453026(0xd5)](_0x2e1a8e);const _0x5aeb91=await fetch(_0x2e1a8e),_0x3654be=await _0x5aeb91[_0x453026(0xb2)]();lut64=new Uint8Array(_0x3654be),lut64Profile=_0x3f1f7c;}}function setupWebGL_Shader(_0x3c512c){const _0x748e5e=a0_0x5d40;gl=bufferCanvas[_0x748e5e(0xca)](_0x748e5e(0xb0),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x748e5e(0xa7)}),gl[_0x748e5e(0xc8)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x748e5e(0xdc)]);function _0x596a74(_0x400e1e,_0x1ea3dc){const _0x9c0d28=_0x748e5e,_0x5c1125=gl[_0x9c0d28(0xda)](_0x400e1e);return gl[_0x9c0d28(0xc2)](_0x5c1125,_0x1ea3dc),gl['compileShader'](_0x5c1125),_0x5c1125;}vs=_0x748e5e(0xe2);if(_0x3c512c===_0x748e5e(0xb0))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x3c512c===_0x748e5e(0xcf)&&(fs=_0x748e5e(0xab));const _0xee04f6=_0x596a74(gl[_0x748e5e(0xce)],vs),_0x2c4b98=_0x596a74(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x748e5e(0xa2)](),gl[_0x748e5e(0xb1)](program,_0xee04f6),gl[_0x748e5e(0xb1)](program,_0x2c4b98),gl[_0x748e5e(0xdf)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x110a2a){const _0x3b622d=a0_0x5d40;texture=gl[_0x3b622d(0xdd)](),gl[_0x3b622d(0xc1)](gl[_0x3b622d(0xd4)],texture),gl[_0x3b622d(0xad)](gl[_0x3b622d(0xd4)],gl[_0x3b622d(0xc9)],gl['NEAREST']),gl[_0x3b622d(0xad)](gl[_0x3b622d(0xd4)],gl[_0x3b622d(0xe3)],gl[_0x3b622d(0xcc)]),gl[_0x3b622d(0xad)](gl['TEXTURE_2D'],gl[_0x3b622d(0xa4)],gl['CLAMP_TO_EDGE']),gl[_0x3b622d(0xad)](gl['TEXTURE_2D'],gl[_0x3b622d(0xdb)],gl[_0x3b622d(0xde)]);_0x110a2a===_0x3b622d(0xcf)&&(gl[_0x3b622d(0xa3)](gl[_0x3b622d(0xb5)](program,_0x3b622d(0xc4)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x3b622d(0xb5)](program,_0x3b622d(0xd8)),gl[_0x3b622d(0xb4)]['width'],gl[_0x3b622d(0xb4)][_0x3b622d(0xdc)]),gl['uniform1f'](gl[_0x3b622d(0xb5)](program,_0x3b622d(0xaf)),gameWidth/gl[_0x3b622d(0xb4)][_0x3b622d(0xd3)]),gl[_0x3b622d(0xa6)](gl[_0x3b622d(0xb5)](program,'smooth_height'),gameHeight/gl[_0x3b622d(0xb4)]['height']));const _0x98e1eb=gl[_0x3b622d(0xc5)]();gl['bindBuffer'](gl[_0x3b622d(0xa9)],_0x98e1eb),gl[_0x3b622d(0xa5)](gl[_0x3b622d(0xa9)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x3b622d(0xd1)]),gl['vertexAttribPointer'](gl[_0x3b622d(0xb6)](program,_0x3b622d(0xb3)),0x2,gl[_0x3b622d(0xb7)],![],0x0,0x0),gl[_0x3b622d(0xd0)](gl['getAttribLocation'](program,_0x3b622d(0xb3)));const _0x4e5c5a=gl[_0x3b622d(0xc5)]();gl[_0x3b622d(0xa0)](gl[_0x3b622d(0xa9)],_0x4e5c5a),gl[_0x3b622d(0xa5)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x3b622d(0xd1)]),gl[_0x3b622d(0xac)](gl[_0x3b622d(0xb6)](program,_0x3b622d(0xc3)),0x2,gl['FLOAT'],![],0x0,0x0),gl['enableVertexAttribArray'](gl['getAttribLocation'](program,_0x3b622d(0xc3)));}function a0_0x9f2e(){const _0x23d2b1=['none','viewport','TEXTURE_MIN_FILTER','getContext','clearRect','NEAREST','imageSmoothingEnabled','VERTEX_SHADER','webgl_full','enableVertexAttribArray','STATIC_DRAW','clear','width','TEXTURE_2D','log','6211184SurWcJ','3775345VZprfx','render_size','26548137rkdsub','createShader','TEXTURE_WRAP_T','height','createTexture','CLAMP_TO_EDGE','linkProgram','data','getPixelData','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','TEXTURE_MAG_FILTER','bindBuffer','slice','createProgram','uniform2f','TEXTURE_WRAP_S','bufferData','uniform1f','low-power','getItem','ARRAY_BUFFER','RGBA','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','vertexAttribPointer','texParameteri','6582354GoBBVj','smooth_width','webgl','attachShader','arrayBuffer','position','canvas','getUniformLocation','getAttribLocation','FLOAT','_temperature','UNSIGNED_BYTE','2247794zSuVbz','1VWvfCe','drawArrays','266319TOtttb','272680YTcBDL','5YbhBpG','_4.0.bin','bindTexture','shaderSource','texcoord','game_size','createBuffer','putImageData'];a0_0x9f2e=function(){return _0x23d2b1;};return a0_0x9f2e();}function a0_0x5d40(_0x4ec594,_0x4aaafc){const _0x9f2e88=a0_0x9f2e();return a0_0x5d40=function(_0x5d40d8,_0x4b5161){_0x5d40d8=_0x5d40d8-0xa0;let _0x2b2f1c=_0x9f2e88[_0x5d40d8];return _0x2b2f1c;},a0_0x5d40(_0x4ec594,_0x4aaafc);}function setup2DContext(){const _0x536f02=a0_0x5d40;ctx2d=bufferCanvas[_0x536f02(0xca)]('2d'),ctx2d[_0x536f02(0xcd)]=![];}async function renderPixel(_0x3dd61e){const _0x30894b=a0_0x5d40,_0x1fe797=a0_0x116848[_0x30894b(0xe1)]();if(!_0x1fe797)return;await loadLUT64();const _0xdce004=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5f1fe7=0x0;_0x5f1fe7<gameHeight;_0x5f1fe7++){for(let _0x188d11=0x0;_0x188d11<gameWidth;_0x188d11++){const _0x41230b=_0x5f1fe7*gameStride+_0x188d11,_0x5c10a3=(_0x5f1fe7*gameWidth+_0x188d11)*0x4,_0x89e8eb=_0x1fe797[_0x41230b];if(lut64Profile===_0x30894b(0xc7))_0xdce004[_0x5c10a3]=_0x89e8eb&0xff,_0xdce004[_0x5c10a3+0x1]=_0x89e8eb>>0x8&0xff,_0xdce004[_0x5c10a3+0x2]=_0x89e8eb>>0x10&0xff,_0xdce004[_0x5c10a3+0x3]=0xff;else{const _0x19f3e7=(_0x89e8eb&0xff)>>0x2,_0x531214=(_0x89e8eb>>0x8&0xff)>>0x2,_0x4f4986=(_0x89e8eb>>0x10&0xff)>>0x2,_0x1996df=(_0x19f3e7*0x40*0x40+_0x531214*0x40+_0x4f4986)*0x3;_0xdce004[_0x5c10a3]=lut64[_0x1996df],_0xdce004[_0x5c10a3+0x1]=lut64[_0x1996df+0x1],_0xdce004[_0x5c10a3+0x2]=lut64[_0x1996df+0x2],_0xdce004[_0x5c10a3+0x3]=0xff;}}}if(_0x3dd61e===_0x30894b(0xb0))gl['texImage2D'](gl[_0x30894b(0xd4)],0x0,gl[_0x30894b(0xaa)],gameWidth,gameHeight,0x0,gl[_0x30894b(0xaa)],gl[_0x30894b(0xb9)],_0xdce004),gl[_0x30894b(0xd2)](gl['COLOR_BUFFER_BIT']),gl[_0x30894b(0xbc)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x3dd61e==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0xdce004,gameWidth,gameHeight):imageDataObj[_0x30894b(0xe0)]['set'](_0xdce004),ctx2d[_0x30894b(0xcb)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x30894b(0xdc)]),ctx2d[_0x30894b(0xc6)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x3dd61e));}export async function switchRenderMode(_0x21fe8b){const _0x35dd8d=a0_0x5d40;systemType=gameName[_0x35dd8d(0xa1)](-0x3);if(_0x21fe8b==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x21fe8b===_0x35dd8d(0xb0))setupStyle('2d'),setupWebGL_Shader(_0x35dd8d(0xb0)),setupTexture_Buffer(_0x35dd8d(0xb0)),renderPixel('webgl');else _0x21fe8b===_0x35dd8d(0xcf)&&(setupStyle('webgl_full'),setupWebGL_Shader(_0x35dd8d(0xcf)),setupTexture_Buffer(_0x35dd8d(0xcf)),renderPixel(_0x35dd8d(0xb0)));}}