const a0_0x25c94d=a0_0x31da;(function(_0x592f16,_0x43fa84){const _0x547def=a0_0x31da,_0x3f9d0d=_0x592f16();while(!![]){try{const _0x2d96be=-parseInt(_0x547def(0x207))/0x1+-parseInt(_0x547def(0x1df))/0x2+-parseInt(_0x547def(0x1e3))/0x3+-parseInt(_0x547def(0x205))/0x4*(-parseInt(_0x547def(0x1f9))/0x5)+parseInt(_0x547def(0x221))/0x6*(parseInt(_0x547def(0x206))/0x7)+-parseInt(_0x547def(0x204))/0x8+parseInt(_0x547def(0x1e2))/0x9;if(_0x2d96be===_0x43fa84)break;else _0x3f9d0d['push'](_0x3f9d0d['shift']());}catch(_0x1ded0d){_0x3f9d0d['push'](_0x3f9d0d['shift']());}}}(a0_0x139f,0xc6a02));import*as a0_0x489729 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x25c94d(0x1e1)](a0_0x25c94d(0x1cc)),bufferCanvas=document[a0_0x25c94d(0x1e1)](a0_0x25c94d(0x1d1)),canvasContainer=document[a0_0x25c94d(0x1e1)](a0_0x25c94d(0x214)),imgShader=document[a0_0x25c94d(0x1e1)](a0_0x25c94d(0x1eb)),settingContainer=document['querySelectorAll'](a0_0x25c94d(0x20d)),messageContainer=document[a0_0x25c94d(0x1dc)]('.message-container'),stateTitle=document['querySelectorAll'](a0_0x25c94d(0x1e9));function a0_0x31da(_0x28ce97,_0x5635ca){const _0x139f52=a0_0x139f();return a0_0x31da=function(_0x31da08,_0x43ca8f){_0x31da08=_0x31da08-0x1c0;let _0x38b973=_0x139f52[_0x31da08];return _0x38b973;},a0_0x31da(_0x28ce97,_0x5635ca);}function a0_0x139f(){const _0x29c756=['getUniformLocation','createTexture','_streng','getAttribLocation','top\x20center','822hMYSPj','drawImage','uniform2f','webgl2','getPixelData','TEXTURE_WRAP_S','compileShader','render_size','shaderSource','attachShader','--bg-size','getShaderParameter','VERTEX_SHADER','createProgram','arrayBuffer','textured','./src/shaders/vertexShader.glsl','transform','WebGL2\x20not\x20supported','createBuffer','canvas','text','screenSize','CLAMP_TO_EDGE','COLOR_BUFFER_BIT','ARRAY_BUFFER','TEXTURE_2D','bufferData','height','add','./src/lut/lut64_','querySelectorAll','useProgram','TEXTURE_MIN_FILTER','119044TZuWCE','DOMContentLoaded','getElementById','4505139BHsPMv','892320YYeUNA','warm','RGBA','4.0','createShader','error','.stateTitle,\x20.stateDate','zoom','img-shader','texParameteri','vertexAttribPointer','./src/shaders/fragmentShader.glsl','clientWidth','slice','bindBuffer','0,0,','toLowerCase','scale(','crisp-edges','FRAGMENT_SHADER','texcoord','px\x20','1365050YZkpEo','UNSIGNED_BYTE','setItem','TEXTURE_WRAP_T','remove','width','uniform1f','forEach','drawArrays','addEventListener','enableVertexAttribArray','11364216ZMTELs','20xiHWlM','51079GTZuYU','274251LNjzYa','imageRendering','setProperty','classList','clearRect','TRIANGLE_STRIP','.setting-container','bindTexture','fefs','documentElement','smooth_height','gbc','_temperature','canvas-container','position','getContext','game_size','FLOAT','getItem','style','.bin'];a0_0x139f=function(){return _0x29c756;};return a0_0x139f();}async function loadLUT64(){const _0x583230=a0_0x25c94d;systemType=gameName[_0x583230(0x1f0)](-0x3);const _0x5d5433=localStorage[_0x583230(0x219)](gameName+_0x583230(0x21e))||_0x583230(0x1e6),_0x550997=(localStorage[_0x583230(0x219)](gameName+_0x583230(0x213))||_0x583230(0x1e4))[_0x583230(0x1f3)]();if(!lut64||lut64Streng!==_0x5d5433||lut64Profile!==_0x550997){const _0x9dddfa=_0x583230(0x1db)+_0x550997+'_'+_0x5d5433+_0x583230(0x21b);console['log'](_0x9dddfa);const _0x5695dc=await fetch(_0x9dddfa),_0x11e29b=await _0x5695dc[_0x583230(0x1cb)]();lut64=new Uint8Array(_0x11e29b),lut64Streng=_0x5d5433,lut64Profile=_0x550997;}}async function loadShaderSource(_0x459bf6){const _0x43fa0c=a0_0x25c94d,_0x485954=await fetch(_0x459bf6);return await _0x485954[_0x43fa0c(0x1d2)]();}function setupStyle(_0x196fdc){const _0x797d60=a0_0x25c94d;clientWidth=document[_0x797d60(0x210)][_0x797d60(0x1ef)];const _0x528060=window['devicePixelRatio'];systemType===_0x797d60(0x212)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x528060/gameWidth),localStorage['setItem'](_0x797d60(0x1d3),_0x797d60(0x1f2)+gameWidth*(integerScaling/_0x528060)+','+gameHeight*(integerScaling/_0x528060))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x528060/gameWidth),localStorage[_0x797d60(0x1fb)](_0x797d60(0x1d3),_0x797d60(0x1f2)+gameWidth*(integerScaling/_0x528060)+','+gameHeight*(integerScaling/_0x528060)));if(_0x196fdc==='2d')bufferCanvas[_0x797d60(0x1fe)]=gameWidth,bufferCanvas[_0x797d60(0x1d9)]=gameHeight,bufferCanvas['style']['zoom']=''+integerScaling/_0x528060,bufferCanvas[_0x797d60(0x21a)]['imageRendering']=_0x797d60(0x1f5),canvasContainer[_0x797d60(0x21a)]['width']=gameWidth*(integerScaling/_0x528060)+'px',canvasContainer[_0x797d60(0x21a)]['height']=gameHeight*(integerScaling/_0x528060)+'px',textured[_0x797d60(0x21a)][_0x797d60(0x1fe)]=gameWidth*(integerScaling/_0x528060)+'px',textured[_0x797d60(0x21a)][_0x797d60(0x1d9)]=gameHeight*(integerScaling/_0x528060)+'px',imgShader['style'][_0x797d60(0x1ce)]=_0x797d60(0x1f4)+integerScaling/_0x528060/upscaleShader+')',settingContainer[_0x797d60(0x200)](function(_0x55508a){const _0x2d3a6e=_0x797d60;_0x55508a[_0x2d3a6e(0x21a)][_0x2d3a6e(0x1fe)]=gameWidth*(integerScaling/_0x528060)+'px',_0x55508a[_0x2d3a6e(0x21a)]['height']=gameHeight*(integerScaling/_0x528060)+'px';}),messageContainer['forEach'](function(_0x502e18){const _0x4330a4=_0x797d60;_0x502e18[_0x4330a4(0x21a)][_0x4330a4(0x1fe)]=gameWidth+'px',_0x502e18[_0x4330a4(0x21a)][_0x4330a4(0x1d9)]=gameHeight+'px',_0x502e18[_0x4330a4(0x21a)][_0x4330a4(0x1ea)]=''+integerScaling/_0x528060;}),stateTitle[_0x797d60(0x200)](function(_0x55239f){const _0x87d936=_0x797d60;_0x55239f[_0x87d936(0x20a)][_0x87d936(0x1fd)](_0x87d936(0x20f));});else _0x196fdc==='webgl2'&&(bufferCanvas[_0x797d60(0x1fe)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x797d60(0x21a)][_0x797d60(0x1ea)]=''+0x1/upscaleFactor,bufferCanvas[_0x797d60(0x21a)][_0x797d60(0x208)]='',canvasContainer[_0x797d60(0x21a)]['width']=clientWidth+'px',canvasContainer['style'][_0x797d60(0x1d9)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x797d60(0x21a)][_0x797d60(0x1fe)]=clientWidth+'px',textured[_0x797d60(0x21a)][_0x797d60(0x1d9)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x797d60(0x21a)][_0x797d60(0x1ce)]=_0x797d60(0x1f4)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x797d60(0x200)](function(_0x5c4a4){const _0x50c91d=_0x797d60;_0x5c4a4[_0x50c91d(0x21a)][_0x50c91d(0x1fe)]=clientWidth+'px',_0x5c4a4[_0x50c91d(0x21a)]['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x797d60(0x200)](function(_0x4bf109){const _0x5799ba=_0x797d60;_0x4bf109[_0x5799ba(0x21a)][_0x5799ba(0x1fe)]=gameWidth+'px',_0x4bf109[_0x5799ba(0x21a)][_0x5799ba(0x1d9)]=gameHeight+'px',_0x4bf109[_0x5799ba(0x21a)][_0x5799ba(0x1ea)]=''+clientWidth/gameWidth;}),stateTitle[_0x797d60(0x200)](function(_0x193b46){const _0x4b2e4b=_0x797d60;_0x193b46[_0x4b2e4b(0x20a)][_0x4b2e4b(0x1da)]('fefs');}));imgShader[_0x797d60(0x21a)]['width']=gameWidth*upscaleShader+'px',imgShader[_0x797d60(0x21a)][_0x797d60(0x1d9)]=gameHeight*upscaleShader+'px',imgShader[_0x797d60(0x21a)]['transformOrigin']=_0x797d60(0x220),imgShader['style'][_0x797d60(0x209)](_0x797d60(0x1c7),upscaleShader+_0x797d60(0x1f8)+upscaleShader+'px');}function setupWebGL(){const _0x2a50b4=a0_0x25c94d;gl=bufferCanvas[_0x2a50b4(0x216)]('webgl2');if(!gl)return console[_0x2a50b4(0x1e8)](_0x2a50b4(0x1cf)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x2a50b4(0x1fe)],bufferCanvas[_0x2a50b4(0x1d9)]);}function createShader(_0x596cbb,_0x48010d){const _0x23971d=a0_0x25c94d,_0x3bdb54=gl[_0x23971d(0x1e7)](_0x596cbb);gl[_0x23971d(0x1c5)](_0x3bdb54,_0x48010d),gl[_0x23971d(0x1c3)](_0x3bdb54);if(!gl[_0x23971d(0x1c8)](_0x3bdb54,gl['COMPILE_STATUS']))return console['error'](gl['getShaderInfoLog'](_0x3bdb54)),gl['deleteShader'](_0x3bdb54),null;return _0x3bdb54;}async function setupShaders(){const _0x587987=a0_0x25c94d,_0x2d3f92=await loadShaderSource(_0x587987(0x1cd)),_0x5de5f6=await loadShaderSource(_0x587987(0x1ee)),_0x323d7c=createShader(gl[_0x587987(0x1c9)],_0x2d3f92),_0x3496a3=createShader(gl[_0x587987(0x1f6)],_0x5de5f6);return program=gl[_0x587987(0x1ca)](),gl[_0x587987(0x1c6)](program,_0x323d7c),gl[_0x587987(0x1c6)](program,_0x3496a3),gl['linkProgram'](program),gl[_0x587987(0x1dd)](program),program;}function setupTexture(){const _0xdc12ca=a0_0x25c94d;texture=gl[_0xdc12ca(0x21d)](),gl[_0xdc12ca(0x20e)](gl[_0xdc12ca(0x1d7)],texture),gl[_0xdc12ca(0x1ec)](gl['TEXTURE_2D'],gl[_0xdc12ca(0x1de)],gl['NEAREST']),gl[_0xdc12ca(0x1ec)](gl[_0xdc12ca(0x1d7)],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl[_0xdc12ca(0x1ec)](gl[_0xdc12ca(0x1d7)],gl[_0xdc12ca(0x1c2)],gl[_0xdc12ca(0x1d4)]),gl[_0xdc12ca(0x1ec)](gl[_0xdc12ca(0x1d7)],gl[_0xdc12ca(0x1fc)],gl[_0xdc12ca(0x1d4)]),gl[_0xdc12ca(0x223)](gl[_0xdc12ca(0x21c)](program,_0xdc12ca(0x217)),gameWidth,gameHeight),gl[_0xdc12ca(0x223)](gl[_0xdc12ca(0x21c)](program,_0xdc12ca(0x1c4)),gl[_0xdc12ca(0x1d1)][_0xdc12ca(0x1fe)],gl[_0xdc12ca(0x1d1)][_0xdc12ca(0x1d9)]),gl[_0xdc12ca(0x1ff)](gl[_0xdc12ca(0x21c)](program,'smooth_width'),gameWidth/gl[_0xdc12ca(0x1d1)][_0xdc12ca(0x1fe)]),gl[_0xdc12ca(0x1ff)](gl[_0xdc12ca(0x21c)](program,_0xdc12ca(0x211)),gameHeight/gl['canvas'][_0xdc12ca(0x1d9)]);}function setupBuffers(){const _0x2cf6a6=a0_0x25c94d,_0x46daab=gl['createBuffer']();gl[_0x2cf6a6(0x1f1)](gl[_0x2cf6a6(0x1d6)],_0x46daab),gl[_0x2cf6a6(0x1d8)](gl[_0x2cf6a6(0x1d6)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x28fe5e=gl[_0x2cf6a6(0x21f)](program,_0x2cf6a6(0x215));gl['enableVertexAttribArray'](_0x28fe5e),gl[_0x2cf6a6(0x1ed)](_0x28fe5e,0x2,gl[_0x2cf6a6(0x218)],![],0x0,0x0);const _0x1ec187=gl[_0x2cf6a6(0x1d0)]();gl[_0x2cf6a6(0x1f1)](gl[_0x2cf6a6(0x1d6)],_0x1ec187),gl['bufferData'](gl[_0x2cf6a6(0x1d6)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']);const _0x290798=gl[_0x2cf6a6(0x21f)](program,_0x2cf6a6(0x1f7));gl[_0x2cf6a6(0x203)](_0x290798),gl[_0x2cf6a6(0x1ed)](_0x290798,0x2,gl[_0x2cf6a6(0x218)],![],0x0,0x0);}async function renderPixel(_0x5e74db){const _0x4388b8=a0_0x25c94d,_0x4525e2=a0_0x489729[_0x4388b8(0x1c1)]();if(!_0x4525e2)return;await loadLUT64();const _0x52f019=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2d2d15=0x0;_0x2d2d15<gameHeight;_0x2d2d15++){for(let _0x38553a=0x0;_0x38553a<gameWidth;_0x38553a++){const _0x58f6f6=_0x2d2d15*gameStride+_0x38553a,_0x3074a0=(_0x2d2d15*gameWidth+_0x38553a)*0x4,_0x4ae929=_0x4525e2[_0x58f6f6],_0x3b1c49=(_0x4ae929&0xff)>>0x2,_0x1bbbd4=(_0x4ae929>>0x8&0xff)>>0x2,_0x558579=(_0x4ae929>>0x10&0xff)>>0x2,_0x3a4d0d=(_0x3b1c49*0x40*0x40+_0x1bbbd4*0x40+_0x558579)*0x3;_0x52f019[_0x3074a0]=lut64[_0x3a4d0d],_0x52f019[_0x3074a0+0x1]=lut64[_0x3a4d0d+0x1],_0x52f019[_0x3074a0+0x2]=lut64[_0x3a4d0d+0x2],_0x52f019[_0x3074a0+0x3]=0xff;}}if(_0x5e74db===_0x4388b8(0x1c0))gl[_0x4388b8(0x20e)](gl[_0x4388b8(0x1d7)],texture),gl['texImage2D'](gl[_0x4388b8(0x1d7)],0x0,gl[_0x4388b8(0x1e5)],gameWidth,gameHeight,0x0,gl[_0x4388b8(0x1e5)],gl[_0x4388b8(0x1fa)],_0x52f019),gl['clear'](gl[_0x4388b8(0x1d5)]),gl[_0x4388b8(0x201)](gl[_0x4388b8(0x20c)],0x0,0x4);else{if(_0x5e74db==='2d'){ctx2d=bufferCanvas['getContext']('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x170f62=new ImageData(_0x52f019,gameWidth,gameHeight);createImageBitmap(_0x170f62)['then'](_0x4308f3=>{const _0x59eaef=_0x4388b8;ctx2d[_0x59eaef(0x20b)](0x0,0x0,bufferCanvas[_0x59eaef(0x1fe)],bufferCanvas[_0x59eaef(0x1d9)]),ctx2d[_0x59eaef(0x222)](_0x4308f3,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x5e74db));}export async function switchRenderMode(_0x446dd6){const _0x3a7c18=a0_0x25c94d;systemType=gameName['slice'](-0x3);if(_0x446dd6==='2d')setupStyle('2d'),renderPixel('2d');else _0x446dd6===_0x3a7c18(0x1c0)&&(setupStyle(_0x3a7c18(0x1c0)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x25c94d(0x202)](a0_0x25c94d(0x1e0),function(){});