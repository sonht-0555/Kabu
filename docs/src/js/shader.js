(function(_0x45d6f7,_0x11eac7){const _0x50cf1a=a0_0x34f1,_0x1be28b=_0x45d6f7();while(!![]){try{const _0xff5c3b=parseInt(_0x50cf1a(0xcb))/0x1+-parseInt(_0x50cf1a(0x91))/0x2+parseInt(_0x50cf1a(0xaf))/0x3+-parseInt(_0x50cf1a(0xc7))/0x4*(-parseInt(_0x50cf1a(0x92))/0x5)+-parseInt(_0x50cf1a(0xa5))/0x6+parseInt(_0x50cf1a(0x8b))/0x7+-parseInt(_0x50cf1a(0xc9))/0x8;if(_0xff5c3b===_0x11eac7)break;else _0x1be28b['push'](_0x1be28b['shift']());}catch(_0x338fd4){_0x1be28b['push'](_0x1be28b['shift']());}}}(a0_0x2854,0x5484f));import*as a0_0x53b395 from'./main.js';function a0_0x34f1(_0x5a410e,_0x341545){const _0x285475=a0_0x2854();return a0_0x34f1=function(_0x34f115,_0xb049f4){_0x34f115=_0x34f115-0x88;let _0x33d56c=_0x285475[_0x34f115];return _0x33d56c;},a0_0x34f1(_0x5a410e,_0x341545);}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x3a165f=a0_0x34f1;systemType=gameName['slice'](-0x3);const _0x3da3f7=localStorage[_0x3a165f(0x8d)](gameName+'_streng')||_0x3a165f(0x97),_0xa62f1f=(localStorage[_0x3a165f(0x8d)](gameName+_0x3a165f(0x98))||_0x3a165f(0x94))[_0x3a165f(0xaa)]();if(!lut64||lut64Streng!==_0x3da3f7||lut64Profile!==_0xa62f1f){const _0x338d8c=_0x3a165f(0xae)+_0xa62f1f+'_'+_0x3da3f7+_0x3a165f(0x96);console[_0x3a165f(0xa3)](_0x338d8c);const _0x15bd87=await fetch(_0x338d8c),_0x1e83a0=await _0x15bd87[_0x3a165f(0xb2)]();lut64=new Uint8Array(_0x1e83a0),lut64Streng=_0x3da3f7,lut64Profile=_0xa62f1f;}}function a0_0x2854(){const _0x241139=['vertexAttribPointer','webgl_full','smooth_width','uniform2f','TEXTURE_MAG_FILTER','TRIANGLE_STRIP','bindTexture','createTexture','imageSmoothingEnabled','render_size','createShader','12UrmJHP','RGBA','7257512VzLabv','clear','286233olSXIk','shaderSource','drawArrays','webgl','slice','1896258VPCLPy','low-power','getItem','NEAREST','UNSIGNED_BYTE','FRAGMENT_SHADER','163486gZevxu','788985jZfOXT','ARRAY_BUFFER','warm','compileShader','.bin','4.0','_temperature','texImage2D','texcoord','canvas','drawImage','FLOAT','bindBuffer','width','height','game_size','STATIC_DRAW','log','linkProgram','1436784DLYCaT','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','getContext','createBuffer','getUniformLocation','toLowerCase','bufferData','texParameteri','TEXTURE_WRAP_S','./src/lut/lut64_','1632207NlZWoz','viewport','smooth_height','arrayBuffer','TEXTURE_2D','enableVertexAttribArray','position','uniform1f','TEXTURE_MIN_FILTER','clearRect','getAttribLocation','attachShader','CLAMP_TO_EDGE'];a0_0x2854=function(){return _0x241139;};return a0_0x2854();}function setupWebGL_Shader(_0xbb4363){const _0x1f7faf=a0_0x34f1;gl=bufferCanvas[_0x1f7faf(0xa7)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x1f7faf(0x8c)}),gl[_0x1f7faf(0xb0)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x1f7faf(0xa0)]);function _0x2d2f83(_0x4ac4b6,_0x1ad784){const _0x354ce0=_0x1f7faf,_0xeb7c8e=gl[_0x354ce0(0xc6)](_0x4ac4b6);return gl[_0x354ce0(0xcc)](_0xeb7c8e,_0x1ad784),gl[_0x354ce0(0x95)](_0xeb7c8e),_0xeb7c8e;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0xbb4363==='webgl')fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0xbb4363===_0x1f7faf(0xbd)&&(fs=_0x1f7faf(0xa6));const _0x65352d=_0x2d2f83(gl['VERTEX_SHADER'],vs),_0x5cde87=_0x2d2f83(gl[_0x1f7faf(0x90)],fs);return program=gl['createProgram'](),gl[_0x1f7faf(0xba)](program,_0x65352d),gl[_0x1f7faf(0xba)](program,_0x5cde87),gl[_0x1f7faf(0xa4)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x246ad8){const _0x376c72=a0_0x34f1;texture=gl[_0x376c72(0xc3)](),gl[_0x376c72(0xc2)](gl['TEXTURE_2D'],texture),gl[_0x376c72(0xac)](gl[_0x376c72(0xb3)],gl[_0x376c72(0xb7)],gl[_0x376c72(0x8e)]),gl[_0x376c72(0xac)](gl['TEXTURE_2D'],gl[_0x376c72(0xc0)],gl['NEAREST']),gl['texParameteri'](gl[_0x376c72(0xb3)],gl[_0x376c72(0xad)],gl[_0x376c72(0xbb)]),gl['texParameteri'](gl[_0x376c72(0xb3)],gl['TEXTURE_WRAP_T'],gl['CLAMP_TO_EDGE']);_0x246ad8===_0x376c72(0xbd)&&(gl['uniform2f'](gl[_0x376c72(0xa9)](program,_0x376c72(0xa1)),gameWidth,gameHeight),gl[_0x376c72(0xbf)](gl['getUniformLocation'](program,_0x376c72(0xc5)),gl[_0x376c72(0x9b)][_0x376c72(0x9f)],gl[_0x376c72(0x9b)][_0x376c72(0xa0)]),gl[_0x376c72(0xb6)](gl[_0x376c72(0xa9)](program,_0x376c72(0xbe)),gameWidth/gl[_0x376c72(0x9b)][_0x376c72(0x9f)]),gl[_0x376c72(0xb6)](gl['getUniformLocation'](program,_0x376c72(0xb1)),gameHeight/gl[_0x376c72(0x9b)][_0x376c72(0xa0)]));const _0x35d007=gl[_0x376c72(0xa8)]();gl[_0x376c72(0x9e)](gl[_0x376c72(0x93)],_0x35d007),gl['bufferData'](gl[_0x376c72(0x93)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x376c72(0xa2)]),gl[_0x376c72(0xbc)](gl[_0x376c72(0xb9)](program,_0x376c72(0xb5)),0x2,gl[_0x376c72(0x9d)],![],0x0,0x0),gl[_0x376c72(0xb4)](gl[_0x376c72(0xb9)](program,'position'));const _0x55319e=gl[_0x376c72(0xa8)]();gl[_0x376c72(0x9e)](gl['ARRAY_BUFFER'],_0x55319e),gl[_0x376c72(0xab)](gl[_0x376c72(0x93)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']),gl[_0x376c72(0xbc)](gl[_0x376c72(0xb9)](program,_0x376c72(0x9a)),0x2,gl[_0x376c72(0x9d)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x376c72(0xb9)](program,_0x376c72(0x9a)));}function setup2DContext(){const _0xc756db=a0_0x34f1;ctx2d=bufferCanvas[_0xc756db(0xa7)]('2d'),ctx2d[_0xc756db(0xc4)]=![];}async function renderPixel(_0x13e419){const _0x4e04f6=a0_0x34f1,_0x19774a=a0_0x53b395['getPixelData']();if(!_0x19774a)return;await loadLUT64();const _0x12dfbc=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x381030=0x0;_0x381030<gameHeight;_0x381030++){for(let _0x23c65e=0x0;_0x23c65e<gameWidth;_0x23c65e++){const _0x1c5e5e=_0x381030*gameStride+_0x23c65e,_0x172387=(_0x381030*gameWidth+_0x23c65e)*0x4,_0x4fcf51=_0x19774a[_0x1c5e5e],_0x124184=(_0x4fcf51&0xff)>>0x2,_0x111c90=(_0x4fcf51>>0x8&0xff)>>0x2,_0x326334=(_0x4fcf51>>0x10&0xff)>>0x2,_0x2517a6=(_0x124184*0x40*0x40+_0x111c90*0x40+_0x326334)*0x3;_0x12dfbc[_0x172387]=lut64[_0x2517a6],_0x12dfbc[_0x172387+0x1]=lut64[_0x2517a6+0x1],_0x12dfbc[_0x172387+0x2]=lut64[_0x2517a6+0x2],_0x12dfbc[_0x172387+0x3]=0xff;}}if(_0x13e419==='webgl')gl[_0x4e04f6(0x99)](gl[_0x4e04f6(0xb3)],0x0,gl[_0x4e04f6(0xc8)],gameWidth,gameHeight,0x0,gl[_0x4e04f6(0xc8)],gl[_0x4e04f6(0x8f)],_0x12dfbc),gl[_0x4e04f6(0xca)](gl['COLOR_BUFFER_BIT']),gl[_0x4e04f6(0x88)](gl[_0x4e04f6(0xc1)],0x0,0x4);else _0x13e419==='2d'&&(imageDataObj=new ImageData(_0x12dfbc,gameWidth,gameHeight),createImageBitmap(imageDataObj)['then'](_0x2402d7=>{const _0x501c01=_0x4e04f6;ctx2d[_0x501c01(0xb8)](0x0,0x0,bufferCanvas[_0x501c01(0x9f)],bufferCanvas[_0x501c01(0xa0)]),ctx2d[_0x501c01(0x9c)](_0x2402d7,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x13e419));}export async function switchRenderMode(_0x40283a){const _0x507382=a0_0x34f1;systemType=gameName[_0x507382(0x8a)](-0x3);if(_0x40283a==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x40283a===_0x507382(0x89))setupStyle('2d'),setupWebGL_Shader(_0x507382(0x89)),setupTexture_Buffer(_0x507382(0x89)),renderPixel('webgl');else _0x40283a==='webgl_full'&&(setupStyle(_0x507382(0xbd)),setupWebGL_Shader(_0x507382(0xbd)),setupTexture_Buffer(_0x507382(0xbd)),renderPixel(_0x507382(0x89)));}}