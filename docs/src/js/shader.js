const a0_0x2b246a=a0_0x3b0b;(function(_0x2cf98f,_0x174a91){const _0xce8837=a0_0x3b0b,_0x2ae46d=_0x2cf98f();while(!![]){try{const _0x28d89f=parseInt(_0xce8837(0x196))/0x1+parseInt(_0xce8837(0x187))/0x2*(-parseInt(_0xce8837(0x1a9))/0x3)+parseInt(_0xce8837(0x1d0))/0x4+parseInt(_0xce8837(0x18b))/0x5*(parseInt(_0xce8837(0x1a1))/0x6)+-parseInt(_0xce8837(0x197))/0x7+-parseInt(_0xce8837(0x1d9))/0x8+parseInt(_0xce8837(0x1a2))/0x9*(parseInt(_0xce8837(0x1c7))/0xa);if(_0x28d89f===_0x174a91)break;else _0x2ae46d['push'](_0x2ae46d['shift']());}catch(_0x138d14){_0x2ae46d['push'](_0x2ae46d['shift']());}}}(a0_0x5c84,0x934c3));import*as a0_0x23606d from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x2b246a(0x1db)](a0_0x2b246a(0x1ae)),bufferCanvas=document[a0_0x2b246a(0x1db)](a0_0x2b246a(0x1cb)),canvasContainer=document[a0_0x2b246a(0x1db)](a0_0x2b246a(0x18e)),imgShader=document[a0_0x2b246a(0x1db)](a0_0x2b246a(0x194)),settingContainer=document[a0_0x2b246a(0x1b0)]('.setting-container'),messageContainer=document[a0_0x2b246a(0x1b0)](a0_0x2b246a(0x1de)),stateTitle=document[a0_0x2b246a(0x1b0)](a0_0x2b246a(0x1c3));async function loadLUT64(){const _0x1b3c36=a0_0x2b246a;systemType=gameName['slice'](-0x3);const _0x5454de=localStorage['getItem'](gameName+'_streng')||_0x1b3c36(0x1c2),_0xe0350b=(localStorage['getItem'](gameName+'_temperature')||_0x1b3c36(0x1af))[_0x1b3c36(0x1ad)]();if(!lut64||lut64Streng!==_0x5454de||lut64Profile!==_0xe0350b){const _0x57a728=_0x1b3c36(0x1c6)+_0xe0350b+'_'+_0x5454de+'.bin';console['log'](_0x57a728);const _0x59900f=await fetch(_0x57a728),_0x2dd967=await _0x59900f[_0x1b3c36(0x185)]();lut64=new Uint8Array(_0x2dd967),lut64Streng=_0x5454de,lut64Profile=_0xe0350b;}}async function loadShaderSource(_0x5d8696){const _0x255cc8=a0_0x2b246a,_0x5a147b=await fetch(_0x5d8696);return await _0x5a147b[_0x255cc8(0x19a)]();}function a0_0x3b0b(_0x561d25,_0x46dfe4){const _0x5c842a=a0_0x5c84();return a0_0x3b0b=function(_0x3b0bd2,_0x3e8890){_0x3b0bd2=_0x3b0bd2-0x182;let _0x59971e=_0x5c842a[_0x3b0bd2];return _0x59971e;},a0_0x3b0b(_0x561d25,_0x46dfe4);}function setupStyle(_0xf365c3){const _0x4940ce=a0_0x2b246a;clientWidth=document['documentElement'][_0x4940ce(0x19c)];const _0x337c27=window[_0x4940ce(0x18d)];systemType===_0x4940ce(0x1da)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x4940ce(0x1a3)](clientWidth*_0x337c27/gameWidth),localStorage['setItem'](_0x4940ce(0x1dc),_0x4940ce(0x1d3)+gameWidth*(integerScaling/_0x337c27)+','+gameHeight*(integerScaling/_0x337c27))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x4940ce(0x1a3)](clientWidth*_0x337c27/gameWidth),localStorage[_0x4940ce(0x1d5)]('screenSize','0,0,'+gameWidth*(integerScaling/_0x337c27)+','+gameHeight*(integerScaling/_0x337c27)));if(_0xf365c3==='2d')bufferCanvas[_0x4940ce(0x1a4)]=gameWidth,bufferCanvas[_0x4940ce(0x1ca)]=gameHeight,bufferCanvas['style'][_0x4940ce(0x1c5)]=''+integerScaling/_0x337c27,bufferCanvas[_0x4940ce(0x1c0)][_0x4940ce(0x192)]=_0x4940ce(0x18a),canvasContainer['style'][_0x4940ce(0x1a4)]=gameWidth*(integerScaling/_0x337c27)+'px',canvasContainer[_0x4940ce(0x1c0)][_0x4940ce(0x1ca)]=gameHeight*(integerScaling/_0x337c27)+'px',textured[_0x4940ce(0x1c0)][_0x4940ce(0x1a4)]=gameWidth*(integerScaling/_0x337c27)+'px',textured[_0x4940ce(0x1c0)][_0x4940ce(0x1ca)]=gameHeight*(integerScaling/_0x337c27)+'px',imgShader[_0x4940ce(0x1c0)][_0x4940ce(0x1d4)]=_0x4940ce(0x1aa)+integerScaling/_0x337c27/upscaleShader+')',settingContainer[_0x4940ce(0x19d)](function(_0x2cab3e){const _0x42823d=_0x4940ce;_0x2cab3e[_0x42823d(0x1c0)][_0x42823d(0x1a4)]=gameWidth*(integerScaling/_0x337c27)+'px',_0x2cab3e[_0x42823d(0x1c0)]['height']=gameHeight*(integerScaling/_0x337c27)+'px';}),messageContainer[_0x4940ce(0x19d)](function(_0x2e1d02){const _0x389fb1=_0x4940ce;_0x2e1d02[_0x389fb1(0x1c0)]['width']=gameWidth+'px',_0x2e1d02[_0x389fb1(0x1c0)][_0x389fb1(0x1ca)]=gameHeight+'px',_0x2e1d02['style']['zoom']=''+integerScaling/_0x337c27;}),stateTitle['forEach'](function(_0x5ae679){const _0x914eb9=_0x4940ce;_0x5ae679[_0x914eb9(0x1d1)]['remove'](_0x914eb9(0x1a5));});else _0xf365c3===_0x4940ce(0x1ce)&&(bufferCanvas[_0x4940ce(0x1a4)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x4940ce(0x1c0)]['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x4940ce(0x1c0)][_0x4940ce(0x192)]='',canvasContainer[_0x4940ce(0x1c0)][_0x4940ce(0x1a4)]=clientWidth+'px',canvasContainer[_0x4940ce(0x1c0)][_0x4940ce(0x1ca)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x4940ce(0x1c0)][_0x4940ce(0x1a4)]=clientWidth+'px',textured[_0x4940ce(0x1c0)][_0x4940ce(0x1ca)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x4940ce(0x1c0)][_0x4940ce(0x1d4)]=_0x4940ce(0x1aa)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x4940ce(0x19d)](function(_0x500d1b){const _0x37e2fa=_0x4940ce;_0x500d1b[_0x37e2fa(0x1c0)][_0x37e2fa(0x1a4)]=clientWidth+'px',_0x500d1b[_0x37e2fa(0x1c0)][_0x37e2fa(0x1ca)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x4940ce(0x19d)](function(_0x18002d){const _0x1d5b34=_0x4940ce;_0x18002d[_0x1d5b34(0x1c0)][_0x1d5b34(0x1a4)]=gameWidth+'px',_0x18002d[_0x1d5b34(0x1c0)][_0x1d5b34(0x1ca)]=gameHeight+'px',_0x18002d['style'][_0x1d5b34(0x1c5)]=''+clientWidth/gameWidth;}),stateTitle[_0x4940ce(0x19d)](function(_0x33ec22){const _0x51627d=_0x4940ce;_0x33ec22[_0x51627d(0x1d1)][_0x51627d(0x1d6)](_0x51627d(0x1a5));}));imgShader['style']['width']=gameWidth*upscaleShader+'px',imgShader[_0x4940ce(0x1c0)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x4940ce(0x1c0)][_0x4940ce(0x195)]=_0x4940ce(0x1cd),imgShader[_0x4940ce(0x1c0)][_0x4940ce(0x1b2)]('--bg-size',upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x3d9052=a0_0x2b246a;gl=bufferCanvas[_0x3d9052(0x184)]('webgl2');if(!gl)return console[_0x3d9052(0x1d7)](_0x3d9052(0x1cf)),null;gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x3d9052(0x1ca)]);}function createShader(_0x57fb0b,_0xdd0ce){const _0x497aa1=a0_0x2b246a,_0xf187bb=gl[_0x497aa1(0x1b8)](_0x57fb0b);gl['shaderSource'](_0xf187bb,_0xdd0ce),gl['compileShader'](_0xf187bb);if(!gl['getShaderParameter'](_0xf187bb,gl['COMPILE_STATUS']))return console['error'](gl['getShaderInfoLog'](_0xf187bb)),gl[_0x497aa1(0x1cc)](_0xf187bb),null;return _0xf187bb;}async function setupShaders(){const _0x3e2983=a0_0x2b246a,_0x4e3d6a=await loadShaderSource(_0x3e2983(0x19b)),_0x20b338=await loadShaderSource(_0x3e2983(0x18c)),_0x209c75=createShader(gl[_0x3e2983(0x1a7)],_0x4e3d6a),_0x1d28d5=createShader(gl['FRAGMENT_SHADER'],_0x20b338);return program=gl[_0x3e2983(0x198)](),gl[_0x3e2983(0x1bd)](program,_0x209c75),gl[_0x3e2983(0x1bd)](program,_0x1d28d5),gl[_0x3e2983(0x1be)](program),gl[_0x3e2983(0x1d8)](program),program;}function setupTexture(){const _0x1c70a1=a0_0x2b246a;texture=gl[_0x1c70a1(0x1c1)](),gl[_0x1c70a1(0x199)](gl[_0x1c70a1(0x1b6)],texture),gl[_0x1c70a1(0x1bf)](gl[_0x1c70a1(0x1b6)],gl['TEXTURE_MIN_FILTER'],gl[_0x1c70a1(0x193)]),gl[_0x1c70a1(0x1bf)](gl['TEXTURE_2D'],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl[_0x1c70a1(0x1bf)](gl[_0x1c70a1(0x1b6)],gl[_0x1c70a1(0x1ab)],gl[_0x1c70a1(0x1bb)]),gl[_0x1c70a1(0x1bf)](gl[_0x1c70a1(0x1b6)],gl[_0x1c70a1(0x1bc)],gl[_0x1c70a1(0x1bb)]),gl[_0x1c70a1(0x186)](gl[_0x1c70a1(0x189)](program,_0x1c70a1(0x1dd)),gameWidth,gameHeight),gl[_0x1c70a1(0x186)](gl['getUniformLocation'](program,_0x1c70a1(0x1b4)),gl[_0x1c70a1(0x1cb)][_0x1c70a1(0x1a4)],gl[_0x1c70a1(0x1cb)][_0x1c70a1(0x1ca)]),gl[_0x1c70a1(0x182)](gl[_0x1c70a1(0x189)](program,'smooth_width'),gameWidth/gl[_0x1c70a1(0x1cb)][_0x1c70a1(0x1a4)]),gl['uniform1f'](gl[_0x1c70a1(0x189)](program,_0x1c70a1(0x1a6)),gameHeight/gl['canvas'][_0x1c70a1(0x1ca)]);}function a0_0x5c84(){const _0x22cfd5=['fefs','smooth_height','VERTEX_SHADER','UNSIGNED_BYTE','418587uOYeTy','scale(','TEXTURE_WRAP_S','getAttribLocation','toLowerCase','textured','warm','querySelectorAll','getPixelData','setProperty','slice','render_size','bindBuffer','TEXTURE_2D','texImage2D','createShader','FLOAT','imageSmoothingEnabled','CLAMP_TO_EDGE','TEXTURE_WRAP_T','attachShader','linkProgram','texParameteri','style','createTexture','4.0','.stateTitle,\x20.stateDate','addEventListener','zoom','./src/lut/lut64_','7439030TotZRv','enableVertexAttribArray','bufferData','height','canvas','deleteShader','top\x20center','webgl2','WebGL2\x20not\x20supported','3836984PiDoUD','classList','TRIANGLE_STRIP','0,0,','transform','setItem','add','error','useProgram','7293912xUcztF','gbc','getElementById','screenSize','game_size','.message-container','COLOR_BUFFER_BIT','uniform1f','STATIC_DRAW','getContext','arrayBuffer','uniform2f','6EXXhzZ','vertexAttribPointer','getUniformLocation','crisp-edges','10CXanfO','./src/shaders/fragmentShader.glsl','devicePixelRatio','canvas-container','RGBA','then','ARRAY_BUFFER','imageRendering','NEAREST','img-shader','transformOrigin','1082335bBxJjf','6359619seBQla','createProgram','bindTexture','text','./src/shaders/vertexShader.glsl','clientWidth','forEach','position','DOMContentLoaded','createBuffer','170070OJalec','9VwKbHu','floor','width'];a0_0x5c84=function(){return _0x22cfd5;};return a0_0x5c84();}function setupBuffers(){const _0x2e8eea=a0_0x2b246a,_0x53aa80=gl[_0x2e8eea(0x1a0)]();gl[_0x2e8eea(0x1b5)](gl[_0x2e8eea(0x191)],_0x53aa80),gl['bufferData'](gl[_0x2e8eea(0x191)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x3751de=gl[_0x2e8eea(0x1ac)](program,_0x2e8eea(0x19e));gl['enableVertexAttribArray'](_0x3751de),gl[_0x2e8eea(0x188)](_0x3751de,0x2,gl['FLOAT'],![],0x0,0x0);const _0xdfdac0=gl[_0x2e8eea(0x1a0)]();gl['bindBuffer'](gl[_0x2e8eea(0x191)],_0xdfdac0),gl[_0x2e8eea(0x1c9)](gl[_0x2e8eea(0x191)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2e8eea(0x183)]);const _0x54669a=gl[_0x2e8eea(0x1ac)](program,'texcoord');gl[_0x2e8eea(0x1c8)](_0x54669a),gl[_0x2e8eea(0x188)](_0x54669a,0x2,gl[_0x2e8eea(0x1b9)],![],0x0,0x0);}async function renderPixel(_0x62ab72){const _0x501a24=a0_0x2b246a,_0x4538d5=a0_0x23606d[_0x501a24(0x1b1)]();if(!_0x4538d5)return;await loadLUT64();const _0x19105d=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5295ac=0x0;_0x5295ac<gameHeight;_0x5295ac++){for(let _0x35b3d2=0x0;_0x35b3d2<gameWidth;_0x35b3d2++){const _0x443b4a=_0x5295ac*gameStride+_0x35b3d2,_0x3470c1=(_0x5295ac*gameWidth+_0x35b3d2)*0x4,_0x5c86c1=_0x4538d5[_0x443b4a],_0x12c65b=(_0x5c86c1&0xff)>>0x2,_0x5b8ee2=(_0x5c86c1>>0x8&0xff)>>0x2,_0x30e622=(_0x5c86c1>>0x10&0xff)>>0x2,_0x33a361=(_0x12c65b*0x40*0x40+_0x5b8ee2*0x40+_0x30e622)*0x3;_0x19105d[_0x3470c1]=lut64[_0x33a361],_0x19105d[_0x3470c1+0x1]=lut64[_0x33a361+0x1],_0x19105d[_0x3470c1+0x2]=lut64[_0x33a361+0x2],_0x19105d[_0x3470c1+0x3]=0xff;}}if(_0x62ab72===_0x501a24(0x1ce))gl[_0x501a24(0x199)](gl[_0x501a24(0x1b6)],texture),gl[_0x501a24(0x1b7)](gl[_0x501a24(0x1b6)],0x0,gl[_0x501a24(0x18f)],gameWidth,gameHeight,0x0,gl[_0x501a24(0x18f)],gl[_0x501a24(0x1a8)],_0x19105d),gl['clear'](gl[_0x501a24(0x1df)]),gl['drawArrays'](gl[_0x501a24(0x1d2)],0x0,0x4);else{if(_0x62ab72==='2d'){ctx2d=bufferCanvas[_0x501a24(0x184)]('2d'),ctx2d[_0x501a24(0x1ba)]=![];const _0x4e7da5=new ImageData(_0x19105d,gameWidth,gameHeight);createImageBitmap(_0x4e7da5)[_0x501a24(0x190)](_0x201caa=>{const _0x5d5bca=_0x501a24;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x5d5bca(0x1a4)],bufferCanvas[_0x5d5bca(0x1ca)]),ctx2d['drawImage'](_0x201caa,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x62ab72));}export async function switchRenderMode(_0x558fc9){const _0x3e4bfe=a0_0x2b246a;systemType=gameName[_0x3e4bfe(0x1b3)](-0x3);if(_0x558fc9==='2d')setupStyle('2d'),renderPixel('2d');else _0x558fc9===_0x3e4bfe(0x1ce)&&(setupStyle(_0x3e4bfe(0x1ce)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x3e4bfe(0x1ce)));}document[a0_0x2b246a(0x1c4)](a0_0x2b246a(0x19f),function(){});