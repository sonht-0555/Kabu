(function(_0xc2099,_0x59406d){const _0x50472a=a0_0xbce7,_0x1c45e0=_0xc2099();while(!![]){try{const _0x2756e5=parseInt(_0x50472a(0x12e))/0x1*(-parseInt(_0x50472a(0x144))/0x2)+parseInt(_0x50472a(0x171))/0x3+parseInt(_0x50472a(0x148))/0x4*(-parseInt(_0x50472a(0x16c))/0x5)+-parseInt(_0x50472a(0x15b))/0x6+parseInt(_0x50472a(0x14c))/0x7+parseInt(_0x50472a(0x142))/0x8*(-parseInt(_0x50472a(0x150))/0x9)+parseInt(_0x50472a(0x139))/0xa;if(_0x2756e5===_0x59406d)break;else _0x1c45e0['push'](_0x1c45e0['shift']());}catch(_0x230eb4){_0x1c45e0['push'](_0x1c45e0['shift']());}}}(a0_0x51cc,0x1a196));function a0_0xbce7(_0x32db5e,_0x4ec466){const _0x51cccf=a0_0x51cc();return a0_0xbce7=function(_0xbce799,_0x301745){_0xbce799=_0xbce799-0x12e;let _0x1fcceb=_0x51cccf[_0xbce799];return _0x1fcceb;},a0_0xbce7(_0x32db5e,_0x4ec466);}import*as a0_0x59ea0d from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x1a6e3d=a0_0xbce7;systemType=gameName['slice'](-0x3);const _0x279537=localStorage['getItem'](gameName+_0x1a6e3d(0x140))||'4.0',_0x3b112a=(localStorage[_0x1a6e3d(0x143)](gameName+_0x1a6e3d(0x132))||_0x1a6e3d(0x164))[_0x1a6e3d(0x155)]();if(!lut64||lut64Streng!==_0x279537||lut64Profile!==_0x3b112a){const _0x382047='./src/lut/lut64_'+_0x3b112a+'_'+_0x279537+_0x1a6e3d(0x13e);console['log'](_0x382047);const _0x12decf=await fetch(_0x382047),_0x3b81df=await _0x12decf[_0x1a6e3d(0x141)]();lut64=new Uint8Array(_0x3b81df),lut64Streng=_0x279537,lut64Profile=_0x3b112a;}}function setupWebGL_Shader(_0x227a21){const _0x239e9d=a0_0xbce7;gl=bufferCanvas[_0x239e9d(0x16a)](_0x239e9d(0x16f),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x239e9d(0x15d)}),gl[_0x239e9d(0x157)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x239e9d(0x14a)]);function _0x3cbfbb(_0x84c6c7,_0x2f33ce){const _0x2197ba=_0x239e9d,_0x3f3164=gl[_0x2197ba(0x154)](_0x84c6c7);return gl[_0x2197ba(0x167)](_0x3f3164,_0x2f33ce),gl['compileShader'](_0x3f3164),_0x3f3164;}vs=_0x239e9d(0x13a);if(_0x227a21===_0x239e9d(0x16f))fs=_0x239e9d(0x149);else _0x227a21==='webgl_full'&&(fs=_0x239e9d(0x147));const _0x503f0c=_0x3cbfbb(gl[_0x239e9d(0x15e)],vs),_0x52fa86=_0x3cbfbb(gl[_0x239e9d(0x14b)],fs);return program=gl[_0x239e9d(0x165)](),gl[_0x239e9d(0x13c)](program,_0x503f0c),gl[_0x239e9d(0x13c)](program,_0x52fa86),gl['linkProgram'](program),gl[_0x239e9d(0x160)](program),program;}function setupTexture_Buffer(_0x340855){const _0xcdb67a=a0_0xbce7;texture=gl[_0xcdb67a(0x16b)](),gl['bindTexture'](gl[_0xcdb67a(0x130)],texture),gl[_0xcdb67a(0x133)](gl[_0xcdb67a(0x130)],gl['TEXTURE_MIN_FILTER'],gl[_0xcdb67a(0x13d)]),gl['texParameteri'](gl[_0xcdb67a(0x130)],gl['TEXTURE_MAG_FILTER'],gl[_0xcdb67a(0x13d)]),gl[_0xcdb67a(0x133)](gl[_0xcdb67a(0x130)],gl[_0xcdb67a(0x135)],gl[_0xcdb67a(0x14e)]),gl[_0xcdb67a(0x133)](gl[_0xcdb67a(0x130)],gl[_0xcdb67a(0x159)],gl[_0xcdb67a(0x14e)]);_0x340855===_0xcdb67a(0x151)&&(gl[_0xcdb67a(0x15a)](gl[_0xcdb67a(0x15f)](program,'game_size'),gameWidth,gameHeight),gl[_0xcdb67a(0x15a)](gl['getUniformLocation'](program,_0xcdb67a(0x138)),gl[_0xcdb67a(0x162)][_0xcdb67a(0x16d)],gl[_0xcdb67a(0x162)][_0xcdb67a(0x14a)]),gl[_0xcdb67a(0x14d)](gl[_0xcdb67a(0x15f)](program,'smooth_width'),gameWidth/gl[_0xcdb67a(0x162)][_0xcdb67a(0x16d)]),gl[_0xcdb67a(0x14d)](gl[_0xcdb67a(0x15f)](program,_0xcdb67a(0x145)),gameHeight/gl[_0xcdb67a(0x162)][_0xcdb67a(0x14a)]));const _0x54a118=gl[_0xcdb67a(0x153)]();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x54a118),gl[_0xcdb67a(0x161)](gl[_0xcdb67a(0x13b)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0xcdb67a(0x172)]),gl[_0xcdb67a(0x12f)](gl[_0xcdb67a(0x156)](program,_0xcdb67a(0x170)),0x2,gl[_0xcdb67a(0x166)],![],0x0,0x0),gl[_0xcdb67a(0x13f)](gl['getAttribLocation'](program,_0xcdb67a(0x170)));const _0x4b9d9e=gl[_0xcdb67a(0x153)]();gl['bindBuffer'](gl[_0xcdb67a(0x13b)],_0x4b9d9e),gl[_0xcdb67a(0x161)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0xcdb67a(0x172)]),gl[_0xcdb67a(0x12f)](gl[_0xcdb67a(0x156)](program,_0xcdb67a(0x163)),0x2,gl[_0xcdb67a(0x166)],![],0x0,0x0),gl[_0xcdb67a(0x13f)](gl[_0xcdb67a(0x156)](program,'texcoord'));}function setup2DContext(){const _0x210a41=a0_0xbce7;ctx2d=bufferCanvas[_0x210a41(0x16a)]('2d'),ctx2d[_0x210a41(0x146)]=![];}async function renderPixel(_0x2e933a){const _0x7be84c=a0_0xbce7,_0x436880=a0_0x59ea0d[_0x7be84c(0x15c)]();if(!_0x436880)return;await loadLUT64();const _0x36cce9=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x34d0d=0x0;_0x34d0d<gameHeight;_0x34d0d++){for(let _0x17814a=0x0;_0x17814a<gameWidth;_0x17814a++){const _0x3bcb6a=_0x34d0d*gameStride+_0x17814a,_0x569991=(_0x34d0d*gameWidth+_0x17814a)*0x4,_0x18a2c9=_0x436880[_0x3bcb6a],_0x15b9f7=(_0x18a2c9&0xff)>>0x2,_0xe38bb7=(_0x18a2c9>>0x8&0xff)>>0x2,_0x39ccd9=(_0x18a2c9>>0x10&0xff)>>0x2,_0x3d5572=(_0x15b9f7*0x40*0x40+_0xe38bb7*0x40+_0x39ccd9)*0x3;_0x36cce9[_0x569991]=lut64[_0x3d5572],_0x36cce9[_0x569991+0x1]=lut64[_0x3d5572+0x1],_0x36cce9[_0x569991+0x2]=lut64[_0x3d5572+0x2],_0x36cce9[_0x569991+0x3]=0xff;}}if(_0x2e933a===_0x7be84c(0x16f))gl[_0x7be84c(0x16e)](gl['TEXTURE_2D'],0x0,gl[_0x7be84c(0x131)],gameWidth,gameHeight,0x0,gl[_0x7be84c(0x131)],gl[_0x7be84c(0x168)],_0x36cce9),gl[_0x7be84c(0x137)](gl[_0x7be84c(0x136)]),gl[_0x7be84c(0x14f)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x2e933a==='2d'&&(imageDataObj=new ImageData(_0x36cce9,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x7be84c(0x158)](_0xdc560=>{const _0x1d1f9c=_0x7be84c;ctx2d[_0x1d1f9c(0x169)](0x0,0x0,bufferCanvas[_0x1d1f9c(0x16d)],bufferCanvas[_0x1d1f9c(0x14a)]),ctx2d[_0x1d1f9c(0x152)](_0xdc560,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x2e933a));}function a0_0x51cc(){const _0x3181c=['clearRect','getContext','createTexture','130DFyeuU','width','texImage2D','webgl','position','602181tPmqkT','STATIC_DRAW','30FQABYL','vertexAttribPointer','TEXTURE_2D','RGBA','_temperature','texParameteri','slice','TEXTURE_WRAP_S','COLOR_BUFFER_BIT','clear','render_size','3173270qNfnng','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','ARRAY_BUFFER','attachShader','NEAREST','.bin','enableVertexAttribArray','_streng','arrayBuffer','202480wbnwqS','getItem','7460oyWKFs','smooth_height','imageSmoothingEnabled','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','27944UqnmXe','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','height','FRAGMENT_SHADER','608545UnJUUu','uniform1f','CLAMP_TO_EDGE','drawArrays','9FWeHHJ','webgl_full','drawImage','createBuffer','createShader','toLowerCase','getAttribLocation','viewport','then','TEXTURE_WRAP_T','uniform2f','1075446fdPzzU','getPixelData','low-power','VERTEX_SHADER','getUniformLocation','useProgram','bufferData','canvas','texcoord','warm','createProgram','FLOAT','shaderSource','UNSIGNED_BYTE'];a0_0x51cc=function(){return _0x3181c;};return a0_0x51cc();}export async function switchRenderMode(_0x53d604){const _0x21258b=a0_0xbce7;systemType=gameName[_0x21258b(0x134)](-0x3);if(_0x53d604==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x53d604==='webgl')setupStyle('2d'),setupWebGL_Shader(_0x21258b(0x16f)),setupTexture_Buffer(_0x21258b(0x16f)),renderPixel(_0x21258b(0x16f));else _0x53d604==='webgl_full'&&(setupStyle(_0x21258b(0x151)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x21258b(0x151)),renderPixel(_0x21258b(0x16f)));}}