(function(_0x58e071,_0x389417){const _0x52e18c=a0_0x4f09,_0x1a7adc=_0x58e071();while(!![]){try{const _0x41cd75=-parseInt(_0x52e18c(0x137))/0x1+-parseInt(_0x52e18c(0x120))/0x2+-parseInt(_0x52e18c(0x133))/0x3*(parseInt(_0x52e18c(0x14a))/0x4)+-parseInt(_0x52e18c(0x11a))/0x5+parseInt(_0x52e18c(0x140))/0x6+-parseInt(_0x52e18c(0x121))/0x7+parseInt(_0x52e18c(0x110))/0x8;if(_0x41cd75===_0x389417)break;else _0x1a7adc['push'](_0x1a7adc['shift']());}catch(_0x6df28e){_0x1a7adc['push'](_0x1a7adc['shift']());}}}(a0_0x4c95,0xb44f6));import*as a0_0x384280 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x416e7c=a0_0x4f09;systemType=gameName[_0x416e7c(0x12d)](-0x3);const _0x40c880=localStorage['getItem'](gameName+'_streng')||'4.0',_0x56b866=(localStorage[_0x416e7c(0x145)](gameName+_0x416e7c(0x139))||_0x416e7c(0x13e))['toLowerCase']();if(!lut64||lut64Streng!==_0x40c880||lut64Profile!==_0x56b866){const _0x47c2ee=_0x416e7c(0x10f)+_0x56b866+'_'+_0x40c880+_0x416e7c(0x147);console[_0x416e7c(0x132)](_0x47c2ee);const _0x4b1d86=await fetch(_0x47c2ee),_0x4a3593=await _0x4b1d86['arrayBuffer']();lut64=new Uint8Array(_0x4a3593),lut64Streng=_0x40c880,lut64Profile=_0x56b866;}}function a0_0x4f09(_0x3d8731,_0x49e15b){const _0x4c955f=a0_0x4c95();return a0_0x4f09=function(_0x4f0971,_0x102342){_0x4f0971=_0x4f0971-0x10f;let _0x308ef6=_0x4c955f[_0x4f0971];return _0x308ef6;},a0_0x4f09(_0x3d8731,_0x49e15b);}function setupWebGL_Shader(_0xe3c49b){const _0x4f470c=a0_0x4f09;gl=bufferCanvas[_0x4f470c(0x123)](_0x4f470c(0x141),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0x4f470c(0x114)](0x0,0x0,bufferCanvas[_0x4f470c(0x127)],bufferCanvas[_0x4f470c(0x111)]);function _0x5b7a2e(_0xd06211,_0x170de4){const _0x411361=_0x4f470c,_0xb9289e=gl['createShader'](_0xd06211);return gl[_0x411361(0x14e)](_0xb9289e,_0x170de4),gl[_0x411361(0x11c)](_0xb9289e),_0xb9289e;}vs=_0x4f470c(0x149);if(_0xe3c49b===_0x4f470c(0x141))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0xe3c49b===_0x4f470c(0x11d)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x3e3f20=_0x5b7a2e(gl[_0x4f470c(0x14d)],vs),_0x425db9=_0x5b7a2e(gl[_0x4f470c(0x118)],fs);return program=gl[_0x4f470c(0x131)](),gl['attachShader'](program,_0x3e3f20),gl[_0x4f470c(0x146)](program,_0x425db9),gl[_0x4f470c(0x129)](program),gl[_0x4f470c(0x14b)](program),program;}function setupTexture_Buffer(_0x529d94){const _0x2ab85f=a0_0x4f09;texture=gl[_0x2ab85f(0x13d)](),gl['bindTexture'](gl[_0x2ab85f(0x115)],texture),gl[_0x2ab85f(0x135)](gl[_0x2ab85f(0x115)],gl[_0x2ab85f(0x13f)],gl[_0x2ab85f(0x11b)]),gl[_0x2ab85f(0x135)](gl[_0x2ab85f(0x115)],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl[_0x2ab85f(0x135)](gl['TEXTURE_2D'],gl[_0x2ab85f(0x14c)],gl[_0x2ab85f(0x134)]),gl[_0x2ab85f(0x135)](gl[_0x2ab85f(0x115)],gl['TEXTURE_WRAP_T'],gl[_0x2ab85f(0x134)]);_0x529d94===_0x2ab85f(0x11d)&&(gl[_0x2ab85f(0x12f)](gl['getUniformLocation'](program,_0x2ab85f(0x126)),gameWidth,gameHeight),gl[_0x2ab85f(0x12f)](gl['getUniformLocation'](program,'render_size'),gl['canvas'][_0x2ab85f(0x127)],gl['canvas'][_0x2ab85f(0x111)]),gl[_0x2ab85f(0x13b)](gl[_0x2ab85f(0x148)](program,_0x2ab85f(0x11e)),gameWidth/gl[_0x2ab85f(0x136)][_0x2ab85f(0x127)]),gl[_0x2ab85f(0x13b)](gl[_0x2ab85f(0x148)](program,_0x2ab85f(0x125)),gameHeight/gl[_0x2ab85f(0x136)][_0x2ab85f(0x111)]));const _0x3f048a=gl[_0x2ab85f(0x12b)]();gl['bindBuffer'](gl[_0x2ab85f(0x13a)],_0x3f048a),gl[_0x2ab85f(0x122)](gl[_0x2ab85f(0x13a)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x2ab85f(0x142)](gl[_0x2ab85f(0x113)](program,'position'),0x2,gl[_0x2ab85f(0x130)],![],0x0,0x0),gl[_0x2ab85f(0x12e)](gl[_0x2ab85f(0x113)](program,_0x2ab85f(0x117)));const _0x40aeed=gl[_0x2ab85f(0x12b)]();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x40aeed),gl['bufferData'](gl[_0x2ab85f(0x13a)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2ab85f(0x12c)]),gl[_0x2ab85f(0x142)](gl[_0x2ab85f(0x113)](program,_0x2ab85f(0x12a)),0x2,gl[_0x2ab85f(0x130)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x2ab85f(0x113)](program,'texcoord'));}function setup2DContext(){const _0x35d0d3=a0_0x4f09;ctx2d=bufferCanvas[_0x35d0d3(0x123)]('2d'),ctx2d['imageSmoothingEnabled']=![];}async function renderPixel(_0x28892c){const _0x22ba5e=a0_0x4f09,_0x5465cb=a0_0x384280[_0x22ba5e(0x138)]();if(!_0x5465cb)return;await loadLUT64();const _0x524974=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x30c8f1=0x0;_0x30c8f1<gameHeight;_0x30c8f1++){for(let _0x515c78=0x0;_0x515c78<gameWidth;_0x515c78++){const _0x4a5697=_0x30c8f1*gameStride+_0x515c78,_0x51f25f=(_0x30c8f1*gameWidth+_0x515c78)*0x4,_0x4b87e0=_0x5465cb[_0x4a5697],_0x367c29=(_0x4b87e0&0xff)>>0x2,_0x10f201=(_0x4b87e0>>0x8&0xff)>>0x2,_0x37ae74=(_0x4b87e0>>0x10&0xff)>>0x2,_0x2b2286=(_0x367c29*0x40*0x40+_0x10f201*0x40+_0x37ae74)*0x3;_0x524974[_0x51f25f]=lut64[_0x2b2286],_0x524974[_0x51f25f+0x1]=lut64[_0x2b2286+0x1],_0x524974[_0x51f25f+0x2]=lut64[_0x2b2286+0x2],_0x524974[_0x51f25f+0x3]=0xff;}}if(_0x28892c===_0x22ba5e(0x141))gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x22ba5e(0x13c)],gameWidth,gameHeight,0x0,gl[_0x22ba5e(0x13c)],gl[_0x22ba5e(0x11f)],_0x524974),gl[_0x22ba5e(0x124)](gl[_0x22ba5e(0x144)]),gl[_0x22ba5e(0x143)](gl[_0x22ba5e(0x112)],0x0,0x4);else _0x28892c==='2d'&&(imageDataObj=new ImageData(_0x524974,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x22ba5e(0x116)](_0x5b0d34=>{const _0x1ba621=_0x22ba5e;ctx2d[_0x1ba621(0x128)](0x0,0x0,bufferCanvas[_0x1ba621(0x127)],bufferCanvas[_0x1ba621(0x111)]),ctx2d[_0x1ba621(0x119)](_0x5b0d34,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x28892c));}function a0_0x4c95(){const _0x49e429=['RGBA','createTexture','warm','TEXTURE_MIN_FILTER','7173900DKGndD','webgl','vertexAttribPointer','drawArrays','COLOR_BUFFER_BIT','getItem','attachShader','.bin','getUniformLocation','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','182804LuYhMv','useProgram','TEXTURE_WRAP_S','VERTEX_SHADER','shaderSource','./src/lut/lut64_','43417568wABTnl','height','TRIANGLE_STRIP','getAttribLocation','viewport','TEXTURE_2D','then','position','FRAGMENT_SHADER','drawImage','5984670OasXdt','NEAREST','compileShader','webgl_full','smooth_width','UNSIGNED_BYTE','2652496DhrsZG','9844884sodFFk','bufferData','getContext','clear','smooth_height','game_size','width','clearRect','linkProgram','texcoord','createBuffer','STATIC_DRAW','slice','enableVertexAttribArray','uniform2f','FLOAT','createProgram','log','33IQOhvH','CLAMP_TO_EDGE','texParameteri','canvas','1451991wKoMtz','getPixelData','_temperature','ARRAY_BUFFER','uniform1f'];a0_0x4c95=function(){return _0x49e429;};return a0_0x4c95();}export async function switchRenderMode(_0x2ece03){const _0x1da104=a0_0x4f09;systemType=gameName[_0x1da104(0x12d)](-0x3);if(_0x2ece03==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x2ece03===_0x1da104(0x141))setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(_0x1da104(0x141)),renderPixel(_0x1da104(0x141));else _0x2ece03==='webgl_full'&&(setupStyle(_0x1da104(0x11d)),setupWebGL_Shader(_0x1da104(0x11d)),setupTexture_Buffer('webgl_full'),renderPixel(_0x1da104(0x141)));}}