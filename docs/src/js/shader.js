const a0_0x6748ee=a0_0x321a;(function(_0x122133,_0x542d6b){const _0x596050=a0_0x321a,_0x86c05d=_0x122133();while(!![]){try{const _0x4672cd=-parseInt(_0x596050(0x1c3))/0x1+parseInt(_0x596050(0x1e2))/0x2+-parseInt(_0x596050(0x1a3))/0x3*(-parseInt(_0x596050(0x1d9))/0x4)+parseInt(_0x596050(0x1c7))/0x5*(parseInt(_0x596050(0x19f))/0x6)+parseInt(_0x596050(0x1df))/0x7*(parseInt(_0x596050(0x194))/0x8)+-parseInt(_0x596050(0x1de))/0x9+parseInt(_0x596050(0x1e6))/0xa*(-parseInt(_0x596050(0x1d7))/0xb);if(_0x4672cd===_0x542d6b)break;else _0x86c05d['push'](_0x86c05d['shift']());}catch(_0x21fd35){_0x86c05d['push'](_0x86c05d['shift']());}}}(a0_0x7cd1,0x693dd));import*as a0_0x1ab0a0 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x6748ee(0x1ae)](a0_0x6748ee(0x1bc)),bufferCanvas=document[a0_0x6748ee(0x1ae)]('canvas'),canvasContainer=document[a0_0x6748ee(0x1ae)]('canvas-container'),imgShader=document[a0_0x6748ee(0x1ae)](a0_0x6748ee(0x1ab)),settingContainer=document[a0_0x6748ee(0x1b4)](a0_0x6748ee(0x1e9)),messageContainer=document[a0_0x6748ee(0x1b4)]('.message-container'),stateTitle=document['querySelectorAll'](a0_0x6748ee(0x1b1));async function loadLUT64(){const _0x1b5c72=a0_0x6748ee;systemType=gameName['slice'](-0x3);const _0x32920e=localStorage[_0x1b5c72(0x1d2)](gameName+_0x1b5c72(0x1a7))||_0x1b5c72(0x1a8),_0x37d7ac=(localStorage[_0x1b5c72(0x1d2)](gameName+'_temperature')||_0x1b5c72(0x1d5))['toLowerCase']();if(!lut64||lut64Streng!==_0x32920e||lut64Profile!==_0x37d7ac){const _0x30fda8='./src/lut/lut64_'+_0x37d7ac+'_'+_0x32920e+_0x1b5c72(0x196);console['log'](_0x30fda8);const _0x148405=await fetch(_0x30fda8),_0x3b1ff4=await _0x148405['arrayBuffer']();lut64=new Uint8Array(_0x3b1ff4),lut64Streng=_0x32920e,lut64Profile=_0x37d7ac;}}async function loadShaderSource(_0x1d3ac2){const _0x2fd22f=await fetch(_0x1d3ac2);return await _0x2fd22f['text']();}function setupStyle(_0x3ff8ec){const _0x5047af=a0_0x6748ee;clientWidth=document[_0x5047af(0x1a9)][_0x5047af(0x1be)];const _0x119c01=window[_0x5047af(0x1c9)];systemType===_0x5047af(0x1c1)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x5047af(0x1ce)](clientWidth*_0x119c01/gameWidth),localStorage['setItem'](_0x5047af(0x1cb),_0x5047af(0x1e4)+gameWidth*(integerScaling/_0x119c01)+','+gameHeight*(integerScaling/_0x119c01))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x5047af(0x1ce)](clientWidth*_0x119c01/gameWidth),localStorage['setItem'](_0x5047af(0x1cb),_0x5047af(0x1e4)+gameWidth*(integerScaling/_0x119c01)+','+gameHeight*(integerScaling/_0x119c01)));if(_0x3ff8ec==='2d')bufferCanvas[_0x5047af(0x19a)]=gameWidth,bufferCanvas[_0x5047af(0x1d4)]=gameHeight,bufferCanvas[_0x5047af(0x1d0)]['zoom']=''+integerScaling/_0x119c01,bufferCanvas['style'][_0x5047af(0x1db)]='crisp-edges',canvasContainer[_0x5047af(0x1d0)][_0x5047af(0x19a)]=gameWidth*(integerScaling/_0x119c01)+'px',canvasContainer[_0x5047af(0x1d0)][_0x5047af(0x1d4)]=gameHeight*(integerScaling/_0x119c01)+'px',textured[_0x5047af(0x1d0)][_0x5047af(0x19a)]=gameWidth*(integerScaling/_0x119c01)+'px',textured[_0x5047af(0x1d0)][_0x5047af(0x1d4)]=gameHeight*(integerScaling/_0x119c01)+'px',imgShader[_0x5047af(0x1d0)][_0x5047af(0x1e8)]=_0x5047af(0x1aa)+integerScaling/_0x119c01/upscaleShader+')',settingContainer[_0x5047af(0x1dc)](function(_0x1d857a){const _0x29c4c8=_0x5047af;_0x1d857a['style']['width']=gameWidth*(integerScaling/_0x119c01)+'px',_0x1d857a[_0x29c4c8(0x1d0)][_0x29c4c8(0x1d4)]=gameHeight*(integerScaling/_0x119c01)+'px';}),messageContainer[_0x5047af(0x1dc)](function(_0x2f4320){const _0x2c2c28=_0x5047af;_0x2f4320[_0x2c2c28(0x1d0)]['width']=gameWidth+'px',_0x2f4320['style'][_0x2c2c28(0x1d4)]=gameHeight+'px',_0x2f4320[_0x2c2c28(0x1d0)][_0x2c2c28(0x1d6)]=''+integerScaling/_0x119c01;}),stateTitle[_0x5047af(0x1dc)](function(_0x24a4a6){const _0x10f7b3=_0x5047af;_0x24a4a6['classList'][_0x10f7b3(0x1ad)](_0x10f7b3(0x19e));});else _0x3ff8ec===_0x5047af(0x1a0)&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x5047af(0x1d6)]=''+0x1/upscaleFactor,bufferCanvas[_0x5047af(0x1d0)][_0x5047af(0x1db)]='',canvasContainer['style'][_0x5047af(0x19a)]=clientWidth+'px',canvasContainer[_0x5047af(0x1d0)][_0x5047af(0x1d4)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x5047af(0x1d0)][_0x5047af(0x19a)]=clientWidth+'px',textured['style']['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x5047af(0x1d0)]['transform']=_0x5047af(0x1aa)+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x9fa2bb){const _0x2221b3=_0x5047af;_0x9fa2bb['style'][_0x2221b3(0x19a)]=clientWidth+'px',_0x9fa2bb['style'][_0x2221b3(0x1d4)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x5047af(0x1dc)](function(_0x352663){const _0x5a1f17=_0x5047af;_0x352663[_0x5a1f17(0x1d0)][_0x5a1f17(0x19a)]=gameWidth+'px',_0x352663[_0x5a1f17(0x1d0)][_0x5a1f17(0x1d4)]=gameHeight+'px',_0x352663[_0x5a1f17(0x1d0)]['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x5047af(0x1dc)](function(_0x2e8d31){const _0x303c6a=_0x5047af;_0x2e8d31[_0x303c6a(0x1e3)][_0x303c6a(0x199)]('fefs');}));imgShader['style'][_0x5047af(0x19a)]=gameWidth*upscaleShader+'px',imgShader[_0x5047af(0x1d0)][_0x5047af(0x1d4)]=gameHeight*upscaleShader+'px',imgShader[_0x5047af(0x1d0)][_0x5047af(0x1a4)]=_0x5047af(0x1c4),imgShader[_0x5047af(0x1d0)][_0x5047af(0x1cd)](_0x5047af(0x1d1),upscaleShader+_0x5047af(0x1e1)+upscaleShader+'px');}function setupWebGL(){const _0xfb2a52=a0_0x6748ee;gl=bufferCanvas[_0xfb2a52(0x1e0)](_0xfb2a52(0x1a0));if(!gl)return console[_0xfb2a52(0x1a6)](_0xfb2a52(0x1b7)),null;gl[_0xfb2a52(0x1c0)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0xfb2a52(0x1d4)]);}function createShader(_0x1a990f,_0x5bba01){const _0x566abb=a0_0x6748ee,_0x5c4e9f=gl['createShader'](_0x1a990f);gl[_0x566abb(0x1a2)](_0x5c4e9f,_0x5bba01),gl['compileShader'](_0x5c4e9f);if(!gl[_0x566abb(0x1b3)](_0x5c4e9f,gl[_0x566abb(0x19b)]))return console['error'](gl['getShaderInfoLog'](_0x5c4e9f)),gl['deleteShader'](_0x5c4e9f),null;return _0x5c4e9f;}async function setupShaders(){const _0x137159=a0_0x6748ee,_0x85da1d=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x4a8831=await loadShaderSource(_0x137159(0x198)),_0x1c0509=createShader(gl['VERTEX_SHADER'],_0x85da1d),_0x1ff976=createShader(gl['FRAGMENT_SHADER'],_0x4a8831);return program=gl[_0x137159(0x1c2)](),gl[_0x137159(0x1b0)](program,_0x1c0509),gl[_0x137159(0x1b0)](program,_0x1ff976),gl[_0x137159(0x1a1)](program),gl['useProgram'](program),program;}function a0_0x7cd1(){const _0x5640f3=['getPixelData','setProperty','floor','clearRect','style','--bg-size','getItem','then','height','warm','zoom','58553oVCZxj','texcoord','3196yQtGmc','createTexture','imageRendering','forEach','DOMContentLoaded','6592455NhfTcj','3417218HpXLMz','getContext','px\x20','1665182SoJSfS','classList','0,0,','uniform1f','660WAoRze','TEXTURE_MIN_FILTER','transform','.setting-container','bufferData','FLOAT','8povdjo','uniform2f','.bin','imageSmoothingEnabled','./src/shaders/fragmentShader.glsl','add','width','COMPILE_STATUS','clear','STATIC_DRAW','fefs','52296AcBpNO','webgl2','linkProgram','shaderSource','1212KqDVNZ','transformOrigin','canvas','error','_streng','4.0','documentElement','scale(','img-shader','drawArrays','remove','getElementById','getUniformLocation','attachShader','.stateTitle,\x20.stateDate','bindTexture','getShaderParameter','querySelectorAll','RGBA','TEXTURE_2D','WebGL2\x20not\x20supported','position','CLAMP_TO_EDGE','NEAREST','getAttribLocation','textured','createBuffer','clientWidth','texParameteri','viewport','gbc','createProgram','616775VpmBlG','top\x20center','TEXTURE_MAG_FILTER','smooth_height','280aHJUpL','ARRAY_BUFFER','devicePixelRatio','smooth_width','screenSize'];a0_0x7cd1=function(){return _0x5640f3;};return a0_0x7cd1();}function setupTexture(){const _0x2a2247=a0_0x6748ee;texture=gl[_0x2a2247(0x1da)](),gl[_0x2a2247(0x1b2)](gl['TEXTURE_2D'],texture),gl[_0x2a2247(0x1bf)](gl['TEXTURE_2D'],gl[_0x2a2247(0x1e7)],gl['NEAREST']),gl[_0x2a2247(0x1bf)](gl['TEXTURE_2D'],gl[_0x2a2247(0x1c5)],gl[_0x2a2247(0x1ba)]),gl[_0x2a2247(0x1bf)](gl[_0x2a2247(0x1b6)],gl['TEXTURE_WRAP_S'],gl[_0x2a2247(0x1b9)]),gl['texParameteri'](gl[_0x2a2247(0x1b6)],gl['TEXTURE_WRAP_T'],gl[_0x2a2247(0x1b9)]),gl[_0x2a2247(0x195)](gl[_0x2a2247(0x1af)](program,'game_size'),gameWidth,gameHeight),gl[_0x2a2247(0x195)](gl['getUniformLocation'](program,'render_size'),gl['canvas'][_0x2a2247(0x19a)],gl[_0x2a2247(0x1a5)][_0x2a2247(0x1d4)]),gl[_0x2a2247(0x1e5)](gl[_0x2a2247(0x1af)](program,_0x2a2247(0x1ca)),gameWidth/gl[_0x2a2247(0x1a5)][_0x2a2247(0x19a)]),gl[_0x2a2247(0x1e5)](gl[_0x2a2247(0x1af)](program,_0x2a2247(0x1c6)),gameHeight/gl[_0x2a2247(0x1a5)][_0x2a2247(0x1d4)]);}function setupBuffers(){const _0x4baaaf=a0_0x6748ee,_0x5b1b5c=gl['createBuffer']();gl['bindBuffer'](gl[_0x4baaaf(0x1c8)],_0x5b1b5c),gl[_0x4baaaf(0x1ea)](gl[_0x4baaaf(0x1c8)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x507790=gl['getAttribLocation'](program,_0x4baaaf(0x1b8));gl['enableVertexAttribArray'](_0x507790),gl['vertexAttribPointer'](_0x507790,0x2,gl[_0x4baaaf(0x193)],![],0x0,0x0);const _0x53a37b=gl[_0x4baaaf(0x1bd)]();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x53a37b),gl[_0x4baaaf(0x1ea)](gl[_0x4baaaf(0x1c8)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4baaaf(0x19d)]);const _0x14b805=gl[_0x4baaaf(0x1bb)](program,_0x4baaaf(0x1d8));gl['enableVertexAttribArray'](_0x14b805),gl['vertexAttribPointer'](_0x14b805,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0x3d135a){const _0x2f88eb=a0_0x6748ee,_0x13cada=a0_0x1ab0a0[_0x2f88eb(0x1cc)]();if(!_0x13cada)return;await loadLUT64();const _0x353be9=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x301bde=0x0;_0x301bde<gameHeight;_0x301bde++){for(let _0x115f4f=0x0;_0x115f4f<gameWidth;_0x115f4f++){const _0x2aa78f=_0x301bde*gameStride+_0x115f4f,_0x525b51=(_0x301bde*gameWidth+_0x115f4f)*0x4,_0x46432a=_0x13cada[_0x2aa78f],_0xf07514=(_0x46432a&0xff)>>0x2,_0xd15570=(_0x46432a>>0x8&0xff)>>0x2,_0x54c7a4=(_0x46432a>>0x10&0xff)>>0x2,_0x4540d1=(_0xf07514*0x40*0x40+_0xd15570*0x40+_0x54c7a4)*0x3;_0x353be9[_0x525b51]=lut64[_0x4540d1],_0x353be9[_0x525b51+0x1]=lut64[_0x4540d1+0x1],_0x353be9[_0x525b51+0x2]=lut64[_0x4540d1+0x2],_0x353be9[_0x525b51+0x3]=0xff;}}if(_0x3d135a==='webgl2')gl[_0x2f88eb(0x1b2)](gl[_0x2f88eb(0x1b6)],texture),gl['texImage2D'](gl[_0x2f88eb(0x1b6)],0x0,gl[_0x2f88eb(0x1b5)],gameWidth,gameHeight,0x0,gl[_0x2f88eb(0x1b5)],gl['UNSIGNED_BYTE'],_0x353be9),gl[_0x2f88eb(0x19c)](gl['COLOR_BUFFER_BIT']),gl[_0x2f88eb(0x1ac)](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x3d135a==='2d'){ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x2f88eb(0x197)]=![];const _0x217aef=new ImageData(_0x353be9,gameWidth,gameHeight);createImageBitmap(_0x217aef)[_0x2f88eb(0x1d3)](_0x3f9698=>{const _0x19a638=_0x2f88eb;ctx2d[_0x19a638(0x1cf)](0x0,0x0,bufferCanvas[_0x19a638(0x19a)],bufferCanvas[_0x19a638(0x1d4)]),ctx2d['drawImage'](_0x3f9698,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x3d135a));}export async function switchRenderMode(_0x4c22c6){const _0xab8ce7=a0_0x6748ee;systemType=gameName['slice'](-0x3);if(_0x4c22c6==='2d')setupStyle('2d'),renderPixel('2d');else _0x4c22c6==='webgl2'&&(setupStyle(_0xab8ce7(0x1a0)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0xab8ce7(0x1a0)));}function a0_0x321a(_0x2cd68e,_0x3debcd){const _0x7cd1ac=a0_0x7cd1();return a0_0x321a=function(_0x321ad9,_0x3332fd){_0x321ad9=_0x321ad9-0x193;let _0x35c26d=_0x7cd1ac[_0x321ad9];return _0x35c26d;},a0_0x321a(_0x2cd68e,_0x3debcd);}document['addEventListener'](a0_0x6748ee(0x1dd),function(){});