const a0_0x15637c=a0_0x3aff;(function(_0x9b2a04,_0x2d592b){const _0x319029=a0_0x3aff,_0x4dc961=_0x9b2a04();while(!![]){try{const _0x417ffe=parseInt(_0x319029(0x14b))/0x1*(parseInt(_0x319029(0x199))/0x2)+-parseInt(_0x319029(0x141))/0x3+parseInt(_0x319029(0x149))/0x4*(parseInt(_0x319029(0x17d))/0x5)+parseInt(_0x319029(0x186))/0x6+parseInt(_0x319029(0x145))/0x7+-parseInt(_0x319029(0x14a))/0x8*(-parseInt(_0x319029(0x178))/0x9)+-parseInt(_0x319029(0x155))/0xa*(parseInt(_0x319029(0x194))/0xb);if(_0x417ffe===_0x2d592b)break;else _0x4dc961['push'](_0x4dc961['shift']());}catch(_0x1d11ba){_0x4dc961['push'](_0x4dc961['shift']());}}}(a0_0x3eed,0x3299b));import*as a0_0x56c628 from'./main.js';function a0_0x3aff(_0xf288fb,_0x251e31){const _0x3eedda=a0_0x3eed();return a0_0x3aff=function(_0x3affd0,_0x16768a){_0x3affd0=_0x3affd0-0x13f;let _0x4e01d9=_0x3eedda[_0x3affd0];return _0x4e01d9;},a0_0x3aff(_0xf288fb,_0x251e31);}let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0x15637c(0x171)),bufferCanvas=document[a0_0x15637c(0x177)]('canvas'),canvasContainer=document[a0_0x15637c(0x177)](a0_0x15637c(0x19b)),imgShader=document['getElementById'](a0_0x15637c(0x148)),settingContainer=document[a0_0x15637c(0x164)]('.setting-container'),messageContainer=document[a0_0x15637c(0x164)](a0_0x15637c(0x15d)),stateTitle=document[a0_0x15637c(0x164)](a0_0x15637c(0x159));async function loadLUT64(){const _0x10b154=a0_0x15637c;systemType=gameName['slice'](-0x3);const _0x33b900=localStorage[_0x10b154(0x15a)](gameName+_0x10b154(0x193))||'4.0',_0x394d98=(localStorage[_0x10b154(0x15a)](gameName+_0x10b154(0x18f))||_0x10b154(0x153))[_0x10b154(0x161)]();if(!lut64||lut64Streng!==_0x33b900||lut64Profile!==_0x394d98){const _0x751c20=_0x10b154(0x144)+_0x394d98+'_'+_0x33b900+_0x10b154(0x151);console['log'](_0x751c20);const _0x155a0f=await fetch(_0x751c20),_0x4f1709=await _0x155a0f['arrayBuffer']();lut64=new Uint8Array(_0x4f1709),lut64Streng=_0x33b900,lut64Profile=_0x394d98;}}async function loadShaderSource(_0x2456a4){const _0x605fbb=await fetch(_0x2456a4);return await _0x605fbb['text']();}function setupStyle(_0x4c2101){const _0x21351f=a0_0x15637c;clientWidth=document[_0x21351f(0x17c)][_0x21351f(0x18d)];const _0x3b8942=window['devicePixelRatio'];systemType===_0x21351f(0x192)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x21351f(0x150)](clientWidth*_0x3b8942/gameWidth),localStorage[_0x21351f(0x179)]('screenSize',_0x21351f(0x18c)+gameWidth*(integerScaling/_0x3b8942)+','+gameHeight*(integerScaling/_0x3b8942))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x21351f(0x150)](clientWidth*_0x3b8942/gameWidth),localStorage[_0x21351f(0x179)](_0x21351f(0x16f),_0x21351f(0x18c)+gameWidth*(integerScaling/_0x3b8942)+','+gameHeight*(integerScaling/_0x3b8942)));if(_0x4c2101==='2d')bufferCanvas['width']=gameWidth,bufferCanvas[_0x21351f(0x147)]=gameHeight,bufferCanvas['style'][_0x21351f(0x16a)]=''+integerScaling/_0x3b8942,bufferCanvas[_0x21351f(0x18e)][_0x21351f(0x197)]='crisp-edges',canvasContainer[_0x21351f(0x18e)][_0x21351f(0x175)]=gameWidth*(integerScaling/_0x3b8942)+'px',canvasContainer['style'][_0x21351f(0x147)]=gameHeight*(integerScaling/_0x3b8942)+'px',textured['style']['width']=gameWidth*(integerScaling/_0x3b8942)+'px',textured[_0x21351f(0x18e)][_0x21351f(0x147)]=gameHeight*(integerScaling/_0x3b8942)+'px',imgShader['style'][_0x21351f(0x17f)]='scale('+integerScaling/_0x3b8942/upscaleShader+')',settingContainer[_0x21351f(0x158)](function(_0x390596){const _0x252b90=_0x21351f;_0x390596[_0x252b90(0x18e)][_0x252b90(0x175)]=gameWidth*(integerScaling/_0x3b8942)+'px',_0x390596[_0x252b90(0x18e)]['height']=gameHeight*(integerScaling/_0x3b8942)+'px';}),messageContainer[_0x21351f(0x158)](function(_0x511bd9){const _0x43c26a=_0x21351f;_0x511bd9[_0x43c26a(0x18e)][_0x43c26a(0x175)]=gameWidth+'px',_0x511bd9['style'][_0x43c26a(0x147)]=gameHeight+'px',_0x511bd9[_0x43c26a(0x18e)][_0x43c26a(0x16a)]=''+integerScaling/_0x3b8942;}),stateTitle[_0x21351f(0x158)](function(_0x565d79){const _0xd4d210=_0x21351f;_0x565d79[_0xd4d210(0x18b)][_0xd4d210(0x16b)](_0xd4d210(0x165));});else _0x4c2101===_0x21351f(0x152)&&(bufferCanvas[_0x21351f(0x175)]=clientWidth*upscaleFactor,bufferCanvas[_0x21351f(0x147)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style']['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x21351f(0x18e)]['imageRendering']='',canvasContainer[_0x21351f(0x18e)][_0x21351f(0x175)]=clientWidth+'px',canvasContainer[_0x21351f(0x18e)][_0x21351f(0x147)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x21351f(0x18e)][_0x21351f(0x175)]=clientWidth+'px',textured['style'][_0x21351f(0x147)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x21351f(0x18e)][_0x21351f(0x17f)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x2ea375){const _0x1c270f=_0x21351f;_0x2ea375[_0x1c270f(0x18e)][_0x1c270f(0x175)]=clientWidth+'px',_0x2ea375[_0x1c270f(0x18e)][_0x1c270f(0x147)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x21351f(0x158)](function(_0x5c08e0){const _0x3ba656=_0x21351f;_0x5c08e0[_0x3ba656(0x18e)][_0x3ba656(0x175)]=gameWidth+'px',_0x5c08e0[_0x3ba656(0x18e)][_0x3ba656(0x147)]=gameHeight+'px',_0x5c08e0[_0x3ba656(0x18e)][_0x3ba656(0x16a)]=''+clientWidth/gameWidth;}),stateTitle[_0x21351f(0x158)](function(_0x3e5064){const _0x220cad=_0x21351f;_0x3e5064[_0x220cad(0x18b)][_0x220cad(0x198)](_0x220cad(0x165));}));imgShader['style'][_0x21351f(0x175)]=gameWidth*upscaleShader+'px',imgShader[_0x21351f(0x18e)][_0x21351f(0x147)]=gameHeight*upscaleShader+'px',imgShader[_0x21351f(0x18e)][_0x21351f(0x19e)]=_0x21351f(0x190),imgShader[_0x21351f(0x18e)][_0x21351f(0x173)](_0x21351f(0x157),upscaleShader+_0x21351f(0x169)+upscaleShader+'px');}function setupWebGL(){const _0x31adda=a0_0x15637c;gl=bufferCanvas[_0x31adda(0x185)](_0x31adda(0x152));if(!gl)return console[_0x31adda(0x15c)]('WebGL2\x20not\x20supported'),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x31adda(0x175)],bufferCanvas[_0x31adda(0x147)]);}function createShader(_0x2c9caa,_0x4658df){const _0x3f79f2=a0_0x15637c,_0x48ce00=gl['createShader'](_0x2c9caa);gl[_0x3f79f2(0x184)](_0x48ce00,_0x4658df),gl[_0x3f79f2(0x14d)](_0x48ce00);if(!gl[_0x3f79f2(0x16e)](_0x48ce00,gl[_0x3f79f2(0x166)]))return console['error'](gl['getShaderInfoLog'](_0x48ce00)),gl[_0x3f79f2(0x176)](_0x48ce00),null;return _0x48ce00;}async function setupShaders(){const _0x56e309=a0_0x15637c,_0xe31c8c=await loadShaderSource(_0x56e309(0x143)),_0x517019=await loadShaderSource(_0x56e309(0x196)),_0x51128e=createShader(gl[_0x56e309(0x140)],_0xe31c8c),_0x49aff6=createShader(gl[_0x56e309(0x172)],_0x517019);return program=gl['createProgram'](),gl['attachShader'](program,_0x51128e),gl[_0x56e309(0x142)](program,_0x49aff6),gl[_0x56e309(0x19c)](program),gl['useProgram'](program),program;}function setupTexture(){const _0x4e076c=a0_0x15637c;texture=gl[_0x4e076c(0x162)](),gl['bindTexture'](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x4e076c(0x188)],gl[_0x4e076c(0x16c)]),gl[_0x4e076c(0x154)](gl['TEXTURE_2D'],gl[_0x4e076c(0x18a)],gl[_0x4e076c(0x16c)]),gl[_0x4e076c(0x154)](gl['TEXTURE_2D'],gl[_0x4e076c(0x191)],gl['CLAMP_TO_EDGE']),gl[_0x4e076c(0x154)](gl[_0x4e076c(0x14f)],gl['TEXTURE_WRAP_T'],gl['CLAMP_TO_EDGE']),gl[_0x4e076c(0x163)](gl[_0x4e076c(0x182)](program,_0x4e076c(0x13f)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x4e076c(0x182)](program,_0x4e076c(0x170)),gl['canvas'][_0x4e076c(0x175)],gl[_0x4e076c(0x19a)][_0x4e076c(0x147)]),gl[_0x4e076c(0x17b)](gl['getUniformLocation'](program,'smooth_width'),gameWidth/gl[_0x4e076c(0x19a)][_0x4e076c(0x175)]),gl[_0x4e076c(0x17b)](gl['getUniformLocation'](program,_0x4e076c(0x181)),gameHeight/gl[_0x4e076c(0x19a)][_0x4e076c(0x147)]);}function setupBuffers(){const _0x1d7d44=a0_0x15637c,_0x40b85b=gl[_0x1d7d44(0x14c)]();gl[_0x1d7d44(0x17a)](gl[_0x1d7d44(0x189)],_0x40b85b),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x1d7d44(0x160)]);const _0x21d4b8=gl[_0x1d7d44(0x19d)](program,'position');gl[_0x1d7d44(0x19f)](_0x21d4b8),gl[_0x1d7d44(0x15b)](_0x21d4b8,0x2,gl[_0x1d7d44(0x187)],![],0x0,0x0);const _0x11f766=gl[_0x1d7d44(0x14c)]();gl[_0x1d7d44(0x17a)](gl[_0x1d7d44(0x189)],_0x11f766),gl['bufferData'](gl[_0x1d7d44(0x189)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x1d7d44(0x160)]);const _0x264b9c=gl['getAttribLocation'](program,_0x1d7d44(0x17e));gl['enableVertexAttribArray'](_0x264b9c),gl[_0x1d7d44(0x15b)](_0x264b9c,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0x57aaa6){const _0x44bed4=a0_0x15637c,_0x5b4c93=a0_0x56c628[_0x44bed4(0x167)]();if(!_0x5b4c93)return;await loadLUT64();const _0x40427e=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x14cbe4=0x0;_0x14cbe4<gameHeight;_0x14cbe4++){for(let _0xa9ac1c=0x0;_0xa9ac1c<gameWidth;_0xa9ac1c++){const _0x3b7f1d=_0x14cbe4*gameStride+_0xa9ac1c,_0x43cfb1=(_0x14cbe4*gameWidth+_0xa9ac1c)*0x4,_0x324b86=_0x5b4c93[_0x3b7f1d],_0x3584cd=(_0x324b86&0xff)>>0x2,_0x348e3a=(_0x324b86>>0x8&0xff)>>0x2,_0x3d9b92=(_0x324b86>>0x10&0xff)>>0x2,_0x244a90=(_0x3584cd*0x40*0x40+_0x348e3a*0x40+_0x3d9b92)*0x3;_0x40427e[_0x43cfb1]=lut64[_0x244a90],_0x40427e[_0x43cfb1+0x1]=lut64[_0x244a90+0x1],_0x40427e[_0x43cfb1+0x2]=lut64[_0x244a90+0x2],_0x40427e[_0x43cfb1+0x3]=0xff;}}if(_0x57aaa6===_0x44bed4(0x152))gl[_0x44bed4(0x168)](gl[_0x44bed4(0x14f)],texture),gl[_0x44bed4(0x15f)](gl['TEXTURE_2D'],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x44bed4(0x1a1)],gl[_0x44bed4(0x180)],_0x40427e),gl[_0x44bed4(0x16d)](gl[_0x44bed4(0x1a0)]),gl[_0x44bed4(0x15e)](gl[_0x44bed4(0x183)],0x0,0x4);else{if(_0x57aaa6==='2d'){ctx2d=bufferCanvas[_0x44bed4(0x185)]('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x33ebf4=new ImageData(_0x40427e,gameWidth,gameHeight);createImageBitmap(_0x33ebf4)['then'](_0x40be8b=>{const _0x3824d1=_0x44bed4;ctx2d[_0x3824d1(0x146)](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']),ctx2d[_0x3824d1(0x174)](_0x40be8b,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x57aaa6));}export async function switchRenderMode(_0x37610c){const _0x3def2e=a0_0x15637c;systemType=gameName[_0x3def2e(0x156)](-0x3);if(_0x37610c==='2d')setupStyle('2d'),renderPixel('2d');else _0x37610c===_0x3def2e(0x152)&&(setupStyle(_0x3def2e(0x152)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x3def2e(0x152)));}function a0_0x3eed(){const _0x335ac1=['VERTEX_SHADER','641226qTHxuV','attachShader','./src/shaders/vertexShader.glsl','./src/lut/lut64_','2351146KXSHZY','clearRect','height','img-shader','4zfdgHp','339912LxeMSZ','2NxEEfw','createBuffer','compileShader','DOMContentLoaded','TEXTURE_2D','floor','.bin','webgl2','warm','texParameteri','100HVqKDq','slice','--bg-size','forEach','.stateTitle,\x20.stateDate','getItem','vertexAttribPointer','error','.message-container','drawArrays','texImage2D','STATIC_DRAW','toLowerCase','createTexture','uniform2f','querySelectorAll','fefs','COMPILE_STATUS','getPixelData','bindTexture','px\x20','zoom','remove','NEAREST','clear','getShaderParameter','screenSize','render_size','textured','FRAGMENT_SHADER','setProperty','drawImage','width','deleteShader','getElementById','63gEONGg','setItem','bindBuffer','uniform1f','documentElement','1707185KyOCFE','texcoord','transform','UNSIGNED_BYTE','smooth_height','getUniformLocation','TRIANGLE_STRIP','shaderSource','getContext','1583130JIKeog','FLOAT','TEXTURE_MIN_FILTER','ARRAY_BUFFER','TEXTURE_MAG_FILTER','classList','0,0,','clientWidth','style','_temperature','top\x20center','TEXTURE_WRAP_S','gbc','_streng','1317833HBoulC','addEventListener','./src/shaders/fragmentShader.glsl','imageRendering','add','380438PLZHrS','canvas','canvas-container','linkProgram','getAttribLocation','transformOrigin','enableVertexAttribArray','COLOR_BUFFER_BIT','RGBA','game_size'];a0_0x3eed=function(){return _0x335ac1;};return a0_0x3eed();}document[a0_0x15637c(0x195)](a0_0x15637c(0x14e),function(){});