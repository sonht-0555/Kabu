(function(_0x15c1b5,_0x611ead){const _0x48d8cb=a0_0x49e0,_0x21f81b=_0x15c1b5();while(!![]){try{const _0x92ad8=parseInt(_0x48d8cb(0xf4))/0x1*(-parseInt(_0x48d8cb(0xc1))/0x2)+parseInt(_0x48d8cb(0xf7))/0x3+parseInt(_0x48d8cb(0xf5))/0x4*(parseInt(_0x48d8cb(0xc6))/0x5)+-parseInt(_0x48d8cb(0xdd))/0x6+parseInt(_0x48d8cb(0xdb))/0x7*(parseInt(_0x48d8cb(0xef))/0x8)+-parseInt(_0x48d8cb(0xc9))/0x9+-parseInt(_0x48d8cb(0xca))/0xa;if(_0x92ad8===_0x611ead)break;else _0x21f81b['push'](_0x21f81b['shift']());}catch(_0x5bc70b){_0x21f81b['push'](_0x21f81b['shift']());}}}(a0_0x2e18,0x94884));import*as a0_0x25a075 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x2e18(){const _0x513f70=['FLOAT','none','getContext','ARRAY_BUFFER','TEXTURE_WRAP_T','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','linkProgram','texParameteri','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','set','1308598kSRfBA','./src/lut/lut64_','getAttribLocation','createShader','putImageData','4746515eVOBHO','getUniformLocation','TEXTURE_2D','3088350Isybgi','1491640JsSJkx','bindBuffer','COLOR_BUFFER_BIT','texImage2D','canvas','webgl_full','game_size','low-power','VERTEX_SHADER','createTexture','shaderSource','enableVertexAttribArray','data','uniform1f','vertexAttribPointer','width','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','7819xHBKCd','CLAMP_TO_EDGE','4993998Xznoif','STATIC_DRAW','NEAREST','bufferData','imageSmoothingEnabled','smooth_width','UNSIGNED_BYTE','clear','_temperature','smooth_height','TEXTURE_WRAP_S','createBuffer','uniform2f','createProgram','texcoord','slice','viewport','position','4912nLsHkv','arrayBuffer','bindTexture','compileShader','webgl','1tFgTLy','4PbbhkB','height','2856579IKVGvp','TRIANGLE_STRIP','attachShader'];a0_0x2e18=function(){return _0x513f70;};return a0_0x2e18();}async function loadLUT64(){const _0x2e21ba=a0_0x49e0;systemType=gameName['slice'](-0x3);const _0x41db76=(localStorage['getItem'](gameName+_0x2e21ba(0xe5))||_0x2e21ba(0xb8))['toLowerCase']();if(!lut64||lut64Profile!==_0x41db76){const _0x2a37b2=_0x2e21ba(0xc2)+_0x41db76+'_4.0.bin';console['log'](_0x2a37b2);const _0xfc7c39=await fetch(_0x2a37b2),_0x244d72=await _0xfc7c39[_0x2e21ba(0xf0)]();lut64=new Uint8Array(_0x244d72),lut64Profile=_0x41db76;}}function setupWebGL_Shader(_0x1932cc){const _0xbbc998=a0_0x49e0;gl=bufferCanvas[_0xbbc998(0xb9)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0xbbc998(0xd1)}),gl[_0xbbc998(0xed)](0x0,0x0,bufferCanvas[_0xbbc998(0xd9)],bufferCanvas[_0xbbc998(0xf6)]);function _0x4f3484(_0x54d26a,_0x218ede){const _0x5477cf=_0xbbc998,_0x150399=gl[_0x5477cf(0xc4)](_0x54d26a);return gl[_0x5477cf(0xd4)](_0x150399,_0x218ede),gl[_0x5477cf(0xf2)](_0x150399),_0x150399;}vs=_0xbbc998(0xbc);if(_0x1932cc===_0xbbc998(0xf3))fs=_0xbbc998(0xda);else _0x1932cc===_0xbbc998(0xcf)&&(fs=_0xbbc998(0xbf));const _0x57942b=_0x4f3484(gl[_0xbbc998(0xd2)],vs),_0x4b580e=_0x4f3484(gl['FRAGMENT_SHADER'],fs);return program=gl[_0xbbc998(0xea)](),gl[_0xbbc998(0xf9)](program,_0x57942b),gl[_0xbbc998(0xf9)](program,_0x4b580e),gl[_0xbbc998(0xbd)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x40d306){const _0x476a80=a0_0x49e0;texture=gl[_0x476a80(0xd3)](),gl[_0x476a80(0xf1)](gl[_0x476a80(0xc8)],texture),gl[_0x476a80(0xbe)](gl[_0x476a80(0xc8)],gl['TEXTURE_MIN_FILTER'],gl[_0x476a80(0xdf)]),gl[_0x476a80(0xbe)](gl[_0x476a80(0xc8)],gl['TEXTURE_MAG_FILTER'],gl[_0x476a80(0xdf)]),gl[_0x476a80(0xbe)](gl[_0x476a80(0xc8)],gl[_0x476a80(0xe7)],gl['CLAMP_TO_EDGE']),gl[_0x476a80(0xbe)](gl[_0x476a80(0xc8)],gl[_0x476a80(0xbb)],gl[_0x476a80(0xdc)]);_0x40d306===_0x476a80(0xcf)&&(gl[_0x476a80(0xe9)](gl[_0x476a80(0xc7)](program,_0x476a80(0xd0)),gameWidth,gameHeight),gl[_0x476a80(0xe9)](gl[_0x476a80(0xc7)](program,'render_size'),gl[_0x476a80(0xce)][_0x476a80(0xd9)],gl[_0x476a80(0xce)][_0x476a80(0xf6)]),gl[_0x476a80(0xd7)](gl['getUniformLocation'](program,_0x476a80(0xe2)),gameWidth/gl[_0x476a80(0xce)][_0x476a80(0xd9)]),gl['uniform1f'](gl[_0x476a80(0xc7)](program,_0x476a80(0xe6)),gameHeight/gl[_0x476a80(0xce)]['height']));const _0x2f0e69=gl[_0x476a80(0xe8)]();gl['bindBuffer'](gl[_0x476a80(0xba)],_0x2f0e69),gl['bufferData'](gl[_0x476a80(0xba)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x476a80(0xd8)](gl[_0x476a80(0xc3)](program,_0x476a80(0xee)),0x2,gl[_0x476a80(0xfa)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x476a80(0xc3)](program,_0x476a80(0xee)));const _0x2c158f=gl['createBuffer']();gl[_0x476a80(0xcb)](gl[_0x476a80(0xba)],_0x2c158f),gl[_0x476a80(0xe0)](gl[_0x476a80(0xba)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x476a80(0xde)]),gl[_0x476a80(0xd8)](gl[_0x476a80(0xc3)](program,_0x476a80(0xeb)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x476a80(0xd5)](gl[_0x476a80(0xc3)](program,_0x476a80(0xeb)));}function a0_0x49e0(_0x211bee,_0x1b89f6){const _0x2e18f8=a0_0x2e18();return a0_0x49e0=function(_0x49e0ae,_0x522e1e){_0x49e0ae=_0x49e0ae-0xb8;let _0x1d70ea=_0x2e18f8[_0x49e0ae];return _0x1d70ea;},a0_0x49e0(_0x211bee,_0x1b89f6);}function setup2DContext(){const _0x54493c=a0_0x49e0;ctx2d=bufferCanvas[_0x54493c(0xb9)]('2d'),ctx2d[_0x54493c(0xe1)]=![];}async function renderPixel(_0xd9098a){const _0x35be02=a0_0x49e0,_0x1a7afb=a0_0x25a075['getPixelData']();if(!_0x1a7afb)return;await loadLUT64();const _0x3abfa5=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x3b4176=0x0;_0x3b4176<gameHeight;_0x3b4176++){for(let _0x40392e=0x0;_0x40392e<gameWidth;_0x40392e++){const _0x198426=_0x3b4176*gameStride+_0x40392e,_0x5c3684=(_0x3b4176*gameWidth+_0x40392e)*0x4,_0x301649=_0x1a7afb[_0x198426];if(lut64Profile===_0x35be02(0xb8))_0x3abfa5[_0x5c3684]=_0x301649&0xff,_0x3abfa5[_0x5c3684+0x1]=_0x301649>>0x8&0xff,_0x3abfa5[_0x5c3684+0x2]=_0x301649>>0x10&0xff,_0x3abfa5[_0x5c3684+0x3]=0xff;else{const _0x1057f7=(_0x301649&0xff)>>0x2,_0x2f8b54=(_0x301649>>0x8&0xff)>>0x2,_0x30390c=(_0x301649>>0x10&0xff)>>0x2,_0x3c6346=(_0x1057f7*0x40*0x40+_0x2f8b54*0x40+_0x30390c)*0x3;_0x3abfa5[_0x5c3684]=lut64[_0x3c6346],_0x3abfa5[_0x5c3684+0x1]=lut64[_0x3c6346+0x1],_0x3abfa5[_0x5c3684+0x2]=lut64[_0x3c6346+0x2],_0x3abfa5[_0x5c3684+0x3]=0xff;}}}if(_0xd9098a==='webgl')gl[_0x35be02(0xcd)](gl[_0x35be02(0xc8)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x35be02(0xe3)],_0x3abfa5),gl[_0x35be02(0xe4)](gl[_0x35be02(0xcc)]),gl['drawArrays'](gl[_0x35be02(0xf8)],0x0,0x4);else _0xd9098a==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x3abfa5,gameWidth,gameHeight):imageDataObj[_0x35be02(0xd6)][_0x35be02(0xc0)](_0x3abfa5),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x35be02(0xd9)],bufferCanvas[_0x35be02(0xf6)]),ctx2d[_0x35be02(0xc5)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0xd9098a));}export async function switchRenderMode(_0x1cf6ae){const _0x2597da=a0_0x49e0;systemType=gameName[_0x2597da(0xec)](-0x3);if(_0x1cf6ae==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x1cf6ae===_0x2597da(0xf3))setupStyle('2d'),setupWebGL_Shader(_0x2597da(0xf3)),setupTexture_Buffer(_0x2597da(0xf3)),renderPixel(_0x2597da(0xf3));else _0x1cf6ae===_0x2597da(0xcf)&&(setupStyle('webgl_full'),setupWebGL_Shader(_0x2597da(0xcf)),setupTexture_Buffer(_0x2597da(0xcf)),renderPixel(_0x2597da(0xf3)));}}