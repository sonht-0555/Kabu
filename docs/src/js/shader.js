(function(_0x56521e,_0x101a6a){const _0x1387ee=a0_0x13e8,_0x2ae26c=_0x56521e();while(!![]){try{const _0x2a3f09=-parseInt(_0x1387ee(0x184))/0x1+parseInt(_0x1387ee(0x169))/0x2+parseInt(_0x1387ee(0x191))/0x3+-parseInt(_0x1387ee(0x18f))/0x4+-parseInt(_0x1387ee(0x190))/0x5*(-parseInt(_0x1387ee(0x19d))/0x6)+parseInt(_0x1387ee(0x168))/0x7*(-parseInt(_0x1387ee(0x194))/0x8)+-parseInt(_0x1387ee(0x16a))/0x9*(-parseInt(_0x1387ee(0x176))/0xa);if(_0x2a3f09===_0x101a6a)break;else _0x2ae26c['push'](_0x2ae26c['shift']());}catch(_0x1f7444){_0x2ae26c['push'](_0x2ae26c['shift']());}}}(a0_0x2ebc,0x32978));import*as a0_0x416498 from'./main.js';function a0_0x13e8(_0x43818d,_0x43f9e5){const _0x2ebcc7=a0_0x2ebc();return a0_0x13e8=function(_0x13e8b8,_0x1f8392){_0x13e8b8=_0x13e8b8-0x168;let _0x27915d=_0x2ebcc7[_0x13e8b8];return _0x27915d;},a0_0x13e8(_0x43818d,_0x43f9e5);}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x1226dd=a0_0x13e8;systemType=gameName[_0x1226dd(0x186)](-0x3);const _0x5b7b52=localStorage[_0x1226dd(0x1a1)](gameName+_0x1226dd(0x182))||'4.0',_0x322440=(localStorage[_0x1226dd(0x1a1)](gameName+'_temperature')||_0x1226dd(0x16f))[_0x1226dd(0x199)]();if(!lut64||lut64Streng!==_0x5b7b52||lut64Profile!==_0x322440){const _0x547130=_0x1226dd(0x18a)+_0x322440+'_'+_0x5b7b52+'.bin';console['log'](_0x547130);const _0xae4ecb=await fetch(_0x547130),_0x13ada5=await _0xae4ecb['arrayBuffer']();lut64=new Uint8Array(_0x13ada5),lut64Streng=_0x5b7b52,lut64Profile=_0x322440;}}function setupWebGL_Shader(_0x2eee77){const _0x22e369=a0_0x13e8;gl=bufferCanvas[_0x22e369(0x193)](_0x22e369(0x173),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0x22e369(0x18c)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x22e369(0x17e)]);function _0x7e5efb(_0x1c04d5,_0x3bfaaf){const _0x21d329=_0x22e369,_0x4ab7ec=gl[_0x21d329(0x171)](_0x1c04d5);return gl['shaderSource'](_0x4ab7ec,_0x3bfaaf),gl[_0x21d329(0x17d)](_0x4ab7ec),_0x4ab7ec;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x2eee77==='webgl')fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x2eee77===_0x22e369(0x16d)&&(fs=_0x22e369(0x1a0));const _0x345ecc=_0x7e5efb(gl['VERTEX_SHADER'],vs),_0x2914fb=_0x7e5efb(gl[_0x22e369(0x19f)],fs);return program=gl['createProgram'](),gl[_0x22e369(0x188)](program,_0x345ecc),gl[_0x22e369(0x188)](program,_0x2914fb),gl[_0x22e369(0x189)](program),gl[_0x22e369(0x19c)](program),program;}function setupTexture_Buffer(_0x36ae61){const _0x596d0b=a0_0x13e8;texture=gl[_0x596d0b(0x1a3)](),gl['bindTexture'](gl[_0x596d0b(0x16b)],texture),gl['texParameteri'](gl[_0x596d0b(0x16b)],gl[_0x596d0b(0x18e)],gl['NEAREST']),gl[_0x596d0b(0x180)](gl[_0x596d0b(0x16b)],gl['TEXTURE_MAG_FILTER'],gl[_0x596d0b(0x183)]),gl['texParameteri'](gl[_0x596d0b(0x16b)],gl['TEXTURE_WRAP_S'],gl[_0x596d0b(0x177)]),gl[_0x596d0b(0x180)](gl['TEXTURE_2D'],gl[_0x596d0b(0x18d)],gl['CLAMP_TO_EDGE']);_0x36ae61===_0x596d0b(0x16d)&&(gl[_0x596d0b(0x16e)](gl[_0x596d0b(0x16c)](program,_0x596d0b(0x196)),gameWidth,gameHeight),gl['uniform2f'](gl['getUniformLocation'](program,_0x596d0b(0x195)),gl['canvas'][_0x596d0b(0x178)],gl[_0x596d0b(0x19a)][_0x596d0b(0x17e)]),gl[_0x596d0b(0x174)](gl[_0x596d0b(0x16c)](program,_0x596d0b(0x187)),gameWidth/gl[_0x596d0b(0x19a)]['width']),gl['uniform1f'](gl['getUniformLocation'](program,_0x596d0b(0x17a)),gameHeight/gl['canvas'][_0x596d0b(0x17e)]));const _0x47d962=gl[_0x596d0b(0x1a4)]();gl['bindBuffer'](gl[_0x596d0b(0x17f)],_0x47d962),gl[_0x596d0b(0x185)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x596d0b(0x175)]),gl[_0x596d0b(0x17b)](gl[_0x596d0b(0x197)](program,'position'),0x2,gl['FLOAT'],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x596d0b(0x197)](program,_0x596d0b(0x181)));const _0xf48864=gl[_0x596d0b(0x1a4)]();gl[_0x596d0b(0x192)](gl[_0x596d0b(0x17f)],_0xf48864),gl[_0x596d0b(0x185)](gl[_0x596d0b(0x17f)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x596d0b(0x175)]),gl[_0x596d0b(0x17b)](gl[_0x596d0b(0x197)](program,_0x596d0b(0x170)),0x2,gl[_0x596d0b(0x172)],![],0x0,0x0),gl[_0x596d0b(0x18b)](gl['getAttribLocation'](program,_0x596d0b(0x170)));}function a0_0x2ebc(){const _0x2fda23=['warm','texcoord','createShader','FLOAT','webgl','uniform1f','STATIC_DRAW','290bnNuNR','CLAMP_TO_EDGE','width','UNSIGNED_BYTE','smooth_height','vertexAttribPointer','clear','compileShader','height','ARRAY_BUFFER','texParameteri','position','_streng','NEAREST','379401gZAsBD','bufferData','slice','smooth_width','attachShader','linkProgram','./src/lut/lut64_','enableVertexAttribArray','viewport','TEXTURE_WRAP_T','TEXTURE_MIN_FILTER','402612rBZeEd','100585Odtwlo','1126608PSNnBl','bindBuffer','getContext','16yciZIQ','render_size','game_size','getAttribLocation','TRIANGLE_STRIP','toLowerCase','canvas','texImage2D','useProgram','6NbGZcV','RGBA','FRAGMENT_SHADER','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','getItem','clearRect','createTexture','createBuffer','COLOR_BUFFER_BIT','746900fKKDBZ','83616zOGcsM','143757jcLrGL','TEXTURE_2D','getUniformLocation','webgl_full','uniform2f'];a0_0x2ebc=function(){return _0x2fda23;};return a0_0x2ebc();}function setup2DContext(){const _0x442274=a0_0x13e8;ctx2d=bufferCanvas[_0x442274(0x193)]('2d'),ctx2d['imageSmoothingEnabled']=![];}async function renderPixel(_0x2798ab){const _0x1db352=a0_0x13e8,_0x1ef53d=a0_0x416498['getPixelData']();if(!_0x1ef53d)return;await loadLUT64();const _0x5dbde1=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1cf55b=0x0;_0x1cf55b<gameHeight;_0x1cf55b++){for(let _0x48ed04=0x0;_0x48ed04<gameWidth;_0x48ed04++){const _0xee8276=_0x1cf55b*gameStride+_0x48ed04,_0x23bbb5=(_0x1cf55b*gameWidth+_0x48ed04)*0x4,_0x482de4=_0x1ef53d[_0xee8276],_0xf7a973=(_0x482de4&0xff)>>0x2,_0xe4b922=(_0x482de4>>0x8&0xff)>>0x2,_0x36cc5e=(_0x482de4>>0x10&0xff)>>0x2,_0x3d6017=(_0xf7a973*0x40*0x40+_0xe4b922*0x40+_0x36cc5e)*0x3;_0x5dbde1[_0x23bbb5]=lut64[_0x3d6017],_0x5dbde1[_0x23bbb5+0x1]=lut64[_0x3d6017+0x1],_0x5dbde1[_0x23bbb5+0x2]=lut64[_0x3d6017+0x2],_0x5dbde1[_0x23bbb5+0x3]=0xff;}}if(_0x2798ab===_0x1db352(0x173))gl[_0x1db352(0x19b)](gl[_0x1db352(0x16b)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x1db352(0x19e)],gl[_0x1db352(0x179)],_0x5dbde1),gl[_0x1db352(0x17c)](gl[_0x1db352(0x1a5)]),gl['drawArrays'](gl[_0x1db352(0x198)],0x0,0x4);else _0x2798ab==='2d'&&(imageDataObj=new ImageData(_0x5dbde1,gameWidth,gameHeight),createImageBitmap(imageDataObj)['then'](_0x490ea1=>{const _0x324f44=_0x1db352;ctx2d[_0x324f44(0x1a2)](0x0,0x0,bufferCanvas[_0x324f44(0x178)],bufferCanvas[_0x324f44(0x17e)]),ctx2d['drawImage'](_0x490ea1,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x2798ab));}export async function switchRenderMode(_0x444911){const _0x11e234=a0_0x13e8;systemType=gameName['slice'](-0x3);if(_0x444911==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x444911===_0x11e234(0x173))setupStyle('2d'),setupWebGL_Shader(_0x11e234(0x173)),setupTexture_Buffer(_0x11e234(0x173)),renderPixel('webgl');else _0x444911===_0x11e234(0x16d)&&(setupStyle(_0x11e234(0x16d)),setupWebGL_Shader(_0x11e234(0x16d)),setupTexture_Buffer('webgl_full'),renderPixel(_0x11e234(0x173)));}}