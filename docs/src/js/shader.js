function a0_0x5423(_0x5dbb99,_0xb9baa6){const _0x34626b=a0_0x3462();return a0_0x5423=function(_0x542310,_0x461748){_0x542310=_0x542310-0x1bb;let _0xa8d96c=_0x34626b[_0x542310];return _0xa8d96c;},a0_0x5423(_0x5dbb99,_0xb9baa6);}(function(_0x183c75,_0x4c0f6d){const _0x5d9d3b=a0_0x5423,_0x127661=_0x183c75();while(!![]){try{const _0x54dd15=parseInt(_0x5d9d3b(0x1f9))/0x1+-parseInt(_0x5d9d3b(0x1f2))/0x2*(parseInt(_0x5d9d3b(0x1dc))/0x3)+-parseInt(_0x5d9d3b(0x1ce))/0x4*(-parseInt(_0x5d9d3b(0x1ed))/0x5)+parseInt(_0x5d9d3b(0x1ea))/0x6*(parseInt(_0x5d9d3b(0x202))/0x7)+-parseInt(_0x5d9d3b(0x1fe))/0x8+-parseInt(_0x5d9d3b(0x1fa))/0x9+parseInt(_0x5d9d3b(0x1d7))/0xa*(parseInt(_0x5d9d3b(0x200))/0xb);if(_0x54dd15===_0x4c0f6d)break;else _0x127661['push'](_0x127661['shift']());}catch(_0x4b8ebb){_0x127661['push'](_0x127661['shift']());}}}(a0_0x3462,0xc0091));import*as a0_0xf0a657 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x4d1e16=a0_0x5423;systemType=gameName[_0x4d1e16(0x1d0)](-0x3);const _0x21470c=(localStorage[_0x4d1e16(0x1f6)](gameName+_0x4d1e16(0x1cc))||_0x4d1e16(0x1df))[_0x4d1e16(0x1cb)]();if(!lut64||lut64Profile!==_0x21470c){const _0x3b9354=_0x4d1e16(0x1c9)+_0x21470c+'_4.0.bin';console[_0x4d1e16(0x1bb)](_0x3b9354);const _0x5921be=await fetch(_0x3b9354),_0x3133c4=await _0x5921be['arrayBuffer']();lut64=new Uint8Array(_0x3133c4),lut64Profile=_0x21470c;}}function setupWebGL_Shader(_0x4572cc){const _0x40db8b=a0_0x5423;gl=bufferCanvas[_0x40db8b(0x1f5)](_0x40db8b(0x1c2),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x40db8b(0x1f1)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x40db8b(0x1eb)],bufferCanvas[_0x40db8b(0x1d5)]);function _0x545347(_0x3579c0,_0x3232ff){const _0x139671=_0x40db8b,_0x301b80=gl[_0x139671(0x1c8)](_0x3579c0);return gl[_0x139671(0x1f0)](_0x301b80,_0x3232ff),gl[_0x139671(0x1de)](_0x301b80),_0x301b80;}vs=_0x40db8b(0x1fd);if(_0x4572cc==='webgl')fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x4572cc===_0x40db8b(0x1bc)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x1f4349=_0x545347(gl[_0x40db8b(0x1ff)],vs),_0xf6623f=_0x545347(gl[_0x40db8b(0x1cd)],fs);return program=gl[_0x40db8b(0x1e9)](),gl['attachShader'](program,_0x1f4349),gl['attachShader'](program,_0xf6623f),gl[_0x40db8b(0x1bd)](program),gl[_0x40db8b(0x1c7)](program),program;}function setupTexture_Buffer(_0x23b6c5){const _0x2e1f63=a0_0x5423;texture=gl[_0x2e1f63(0x1dd)](),gl[_0x2e1f63(0x1e1)](gl[_0x2e1f63(0x1e6)],texture),gl[_0x2e1f63(0x1d3)](gl[_0x2e1f63(0x1e6)],gl[_0x2e1f63(0x1d1)],gl[_0x2e1f63(0x1f4)]),gl[_0x2e1f63(0x1d3)](gl['TEXTURE_2D'],gl[_0x2e1f63(0x1f7)],gl[_0x2e1f63(0x1f4)]),gl[_0x2e1f63(0x1d3)](gl[_0x2e1f63(0x1e6)],gl['TEXTURE_WRAP_S'],gl[_0x2e1f63(0x1ca)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x2e1f63(0x1c1)],gl[_0x2e1f63(0x1ca)]);_0x23b6c5===_0x2e1f63(0x1bc)&&(gl['uniform2f'](gl[_0x2e1f63(0x1be)](program,_0x2e1f63(0x1fb)),gameWidth,gameHeight),gl[_0x2e1f63(0x1f8)](gl[_0x2e1f63(0x1be)](program,_0x2e1f63(0x1e5)),gl[_0x2e1f63(0x1e2)][_0x2e1f63(0x1eb)],gl[_0x2e1f63(0x1e2)]['height']),gl['uniform1f'](gl[_0x2e1f63(0x1be)](program,_0x2e1f63(0x1c3)),gameWidth/gl[_0x2e1f63(0x1e2)]['width']),gl[_0x2e1f63(0x1ef)](gl[_0x2e1f63(0x1be)](program,_0x2e1f63(0x1d8)),gameHeight/gl[_0x2e1f63(0x1e2)]['height']));const _0x39b35f=gl[_0x2e1f63(0x1e4)]();gl['bindBuffer'](gl[_0x2e1f63(0x1e8)],_0x39b35f),gl[_0x2e1f63(0x1e7)](gl[_0x2e1f63(0x1e8)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2e1f63(0x1d4)]),gl['vertexAttribPointer'](gl[_0x2e1f63(0x1fc)](program,_0x2e1f63(0x1e0)),0x2,gl[_0x2e1f63(0x1c6)],![],0x0,0x0),gl[_0x2e1f63(0x1f3)](gl[_0x2e1f63(0x1fc)](program,_0x2e1f63(0x1e0)));const _0x5accf2=gl[_0x2e1f63(0x1e4)]();gl[_0x2e1f63(0x1ec)](gl['ARRAY_BUFFER'],_0x5accf2),gl[_0x2e1f63(0x1e7)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2e1f63(0x1d4)]),gl[_0x2e1f63(0x1c4)](gl[_0x2e1f63(0x1fc)](program,_0x2e1f63(0x1c0)),0x2,gl[_0x2e1f63(0x1c6)],![],0x0,0x0),gl[_0x2e1f63(0x1f3)](gl[_0x2e1f63(0x1fc)](program,'texcoord'));}function setup2DContext(){const _0x14466f=a0_0x5423;ctx2d=bufferCanvas[_0x14466f(0x1f5)]('2d'),ctx2d[_0x14466f(0x1db)]=![];}async function renderPixel(_0x5e2c6d){const _0x344714=a0_0x5423,_0x4c67f4=a0_0xf0a657[_0x344714(0x1d2)]();if(!_0x4c67f4)return;await loadLUT64();const _0xf6be81=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2247e0=0x0;_0x2247e0<gameHeight;_0x2247e0++){for(let _0x272d30=0x0;_0x272d30<gameWidth;_0x272d30++){const _0x2e0880=_0x2247e0*gameStride+_0x272d30,_0xfa9928=(_0x2247e0*gameWidth+_0x272d30)*0x4,_0x4bcddb=_0x4c67f4[_0x2e0880];if(lut64Profile===_0x344714(0x1df))_0xf6be81[_0xfa9928]=_0x4bcddb&0xff,_0xf6be81[_0xfa9928+0x1]=_0x4bcddb>>0x8&0xff,_0xf6be81[_0xfa9928+0x2]=_0x4bcddb>>0x10&0xff,_0xf6be81[_0xfa9928+0x3]=0xff;else{const _0x51db9d=(_0x4bcddb&0xff)>>0x2,_0x2f7971=(_0x4bcddb>>0x8&0xff)>>0x2,_0xcea032=(_0x4bcddb>>0x10&0xff)>>0x2,_0x3ad2fa=(_0x51db9d*0x40*0x40+_0x2f7971*0x40+_0xcea032)*0x3;_0xf6be81[_0xfa9928]=lut64[_0x3ad2fa],_0xf6be81[_0xfa9928+0x1]=lut64[_0x3ad2fa+0x1],_0xf6be81[_0xfa9928+0x2]=lut64[_0x3ad2fa+0x2],_0xf6be81[_0xfa9928+0x3]=0xff;}}}if(_0x5e2c6d===_0x344714(0x1c2))gl['texImage2D'](gl[_0x344714(0x1e6)],0x0,gl[_0x344714(0x1c5)],gameWidth,gameHeight,0x0,gl[_0x344714(0x1c5)],gl[_0x344714(0x1cf)],_0xf6be81),gl[_0x344714(0x1e3)](gl['COLOR_BUFFER_BIT']),gl[_0x344714(0x201)](gl[_0x344714(0x1ee)],0x0,0x4);else _0x5e2c6d==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0xf6be81,gameWidth,gameHeight):imageDataObj[_0x344714(0x1d9)][_0x344714(0x1d6)](_0xf6be81),ctx2d[_0x344714(0x1bf)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x344714(0x1d5)]),ctx2d[_0x344714(0x1da)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x5e2c6d));}function a0_0x3462(){const _0x1fdd52=['canvas','clear','createBuffer','render_size','TEXTURE_2D','bufferData','ARRAY_BUFFER','createProgram','24Icfrzo','width','bindBuffer','1729470BtKmrZ','TRIANGLE_STRIP','uniform1f','shaderSource','low-power','24826FhnPmg','enableVertexAttribArray','NEAREST','getContext','getItem','TEXTURE_MAG_FILTER','uniform2f','898004MJNbrW','9714069obWgan','game_size','getAttribLocation','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','3885120ysAjux','VERTEX_SHADER','9687579egdXgd','drawArrays','2069851YVkICk','log','webgl_full','linkProgram','getUniformLocation','clearRect','texcoord','TEXTURE_WRAP_T','webgl','smooth_width','vertexAttribPointer','RGBA','FLOAT','useProgram','createShader','./src/lut/lut64_','CLAMP_TO_EDGE','toLowerCase','_temperature','FRAGMENT_SHADER','4caOxKR','UNSIGNED_BYTE','slice','TEXTURE_MIN_FILTER','getPixelData','texParameteri','STATIC_DRAW','height','set','10RZPiqL','smooth_height','data','putImageData','imageSmoothingEnabled','231TfuopP','createTexture','compileShader','none','position','bindTexture'];a0_0x3462=function(){return _0x1fdd52;};return a0_0x3462();}export async function switchRenderMode(_0x1f1b88){const _0x24348f=a0_0x5423;systemType=gameName[_0x24348f(0x1d0)](-0x3);if(_0x1f1b88==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x1f1b88==='webgl')setupStyle('2d'),setupWebGL_Shader(_0x24348f(0x1c2)),setupTexture_Buffer(_0x24348f(0x1c2)),renderPixel(_0x24348f(0x1c2));else _0x1f1b88===_0x24348f(0x1bc)&&(setupStyle('webgl_full'),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x24348f(0x1bc)),renderPixel(_0x24348f(0x1c2)));}}