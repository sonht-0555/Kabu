const a0_0x2da73e=a0_0x103a;(function(_0x4e0992,_0x105aa4){const _0x48efe7=a0_0x103a,_0x1c1697=_0x4e0992();while(!![]){try{const _0x3c9e27=-parseInt(_0x48efe7(0x17d))/0x1*(parseInt(_0x48efe7(0x164))/0x2)+parseInt(_0x48efe7(0x1a2))/0x3*(-parseInt(_0x48efe7(0x16b))/0x4)+parseInt(_0x48efe7(0x15b))/0x5+-parseInt(_0x48efe7(0x169))/0x6+-parseInt(_0x48efe7(0x180))/0x7*(parseInt(_0x48efe7(0x17c))/0x8)+-parseInt(_0x48efe7(0x170))/0x9+parseInt(_0x48efe7(0x157))/0xa*(parseInt(_0x48efe7(0x183))/0xb);if(_0x3c9e27===_0x105aa4)break;else _0x1c1697['push'](_0x1c1697['shift']());}catch(_0xfb900a){_0x1c1697['push'](_0x1c1697['shift']());}}}(a0_0x34dc,0x62afa));import*as a0_0xeb16e0 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;function a0_0x103a(_0x3dd8c0,_0xa766a1){const _0x34dcc1=a0_0x34dc();return a0_0x103a=function(_0x103a30,_0x26cba4){_0x103a30=_0x103a30-0x141;let _0x378a77=_0x34dcc1[_0x103a30];return _0x378a77;},a0_0x103a(_0x3dd8c0,_0xa766a1);}const textured=document[a0_0x2da73e(0x152)]('textured'),bufferCanvas=document[a0_0x2da73e(0x152)](a0_0x2da73e(0x17e)),canvasContainer=document['getElementById'](a0_0x2da73e(0x19b)),imgShader=document[a0_0x2da73e(0x152)](a0_0x2da73e(0x198)),settingContainer=document[a0_0x2da73e(0x1a6)](a0_0x2da73e(0x18f)),messageContainer=document['querySelectorAll'](a0_0x2da73e(0x15f)),stateTitle=document[a0_0x2da73e(0x1a6)](a0_0x2da73e(0x18a));let imageDataObj=null;async function loadLUT64(){const _0xe7aa55=a0_0x2da73e;systemType=gameName[_0xe7aa55(0x18b)](-0x3);const _0x31cdcc=localStorage[_0xe7aa55(0x154)](gameName+_0xe7aa55(0x179))||_0xe7aa55(0x158),_0x87b8f3=(localStorage[_0xe7aa55(0x154)](gameName+_0xe7aa55(0x1a7))||_0xe7aa55(0x17a))['toLowerCase']();if(!lut64||lut64Streng!==_0x31cdcc||lut64Profile!==_0x87b8f3){const _0x2b3041=_0xe7aa55(0x195)+_0x87b8f3+'_'+_0x31cdcc+_0xe7aa55(0x196);console[_0xe7aa55(0x143)](_0x2b3041);const _0x206ceb=await fetch(_0x2b3041),_0x1181f9=await _0x206ceb[_0xe7aa55(0x15d)]();lut64=new Uint8Array(_0x1181f9),lut64Streng=_0x31cdcc,lut64Profile=_0x87b8f3;}}async function loadShaderSource(_0x10cb7a){const _0x5ebcd7=a0_0x2da73e,_0x87f6bb=await fetch(_0x10cb7a);return await _0x87f6bb[_0x5ebcd7(0x14a)]();}function setupStyle(_0x3b914c){const _0x18b11f=a0_0x2da73e;clientWidth=document[_0x18b11f(0x163)][_0x18b11f(0x176)];const _0x406441=window[_0x18b11f(0x159)];systemType===_0x18b11f(0x15c)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x18b11f(0x14e)](clientWidth*_0x406441/gameWidth),localStorage[_0x18b11f(0x1a1)](_0x18b11f(0x178),_0x18b11f(0x14c)+gameWidth*(integerScaling/_0x406441)+','+gameHeight*(integerScaling/_0x406441))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x18b11f(0x14e)](clientWidth*_0x406441/gameWidth),localStorage[_0x18b11f(0x1a1)](_0x18b11f(0x178),_0x18b11f(0x14c)+gameWidth*(integerScaling/_0x406441)+','+gameHeight*(integerScaling/_0x406441)));if(_0x3b914c==='2d')bufferCanvas[_0x18b11f(0x185)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x18b11f(0x165)]['zoom']=''+integerScaling/_0x406441,bufferCanvas[_0x18b11f(0x165)]['imageRendering']='crisp-edges',canvasContainer[_0x18b11f(0x165)]['width']=gameWidth*(integerScaling/_0x406441)+'px',canvasContainer['style']['height']=gameHeight*(integerScaling/_0x406441)+'px',textured[_0x18b11f(0x165)][_0x18b11f(0x185)]=gameWidth*(integerScaling/_0x406441)+'px',textured['style'][_0x18b11f(0x167)]=gameHeight*(integerScaling/_0x406441)+'px',imgShader[_0x18b11f(0x165)]['transform']=_0x18b11f(0x197)+integerScaling/_0x406441/upscaleShader+')',settingContainer[_0x18b11f(0x190)](function(_0x4ab77c){const _0x277548=_0x18b11f;_0x4ab77c[_0x277548(0x165)][_0x277548(0x185)]=gameWidth*(integerScaling/_0x406441)+'px',_0x4ab77c[_0x277548(0x165)]['height']=gameHeight*(integerScaling/_0x406441)+'px';}),messageContainer['forEach'](function(_0x4ae651){const _0x222e14=_0x18b11f;_0x4ae651[_0x222e14(0x165)][_0x222e14(0x185)]=gameWidth+'px',_0x4ae651[_0x222e14(0x165)][_0x222e14(0x167)]=gameHeight+'px',_0x4ae651[_0x222e14(0x165)][_0x222e14(0x193)]=''+integerScaling/_0x406441;}),stateTitle[_0x18b11f(0x190)](function(_0x1f163c){const _0x4f312f=_0x18b11f;_0x1f163c[_0x4f312f(0x171)]['remove'](_0x4f312f(0x148));});else _0x3b914c==='webgl2'&&(bufferCanvas[_0x18b11f(0x185)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x18b11f(0x165)][_0x18b11f(0x193)]=''+0x1/upscaleFactor,bufferCanvas[_0x18b11f(0x165)][_0x18b11f(0x19e)]='',canvasContainer[_0x18b11f(0x165)][_0x18b11f(0x185)]=clientWidth+'px',canvasContainer[_0x18b11f(0x165)][_0x18b11f(0x167)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x18b11f(0x165)]['width']=clientWidth+'px',textured[_0x18b11f(0x165)][_0x18b11f(0x167)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x18b11f(0x165)][_0x18b11f(0x1a5)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x18b11f(0x190)](function(_0x4a2239){const _0x5a13ab=_0x18b11f;_0x4a2239['style'][_0x5a13ab(0x185)]=clientWidth+'px',_0x4a2239[_0x5a13ab(0x165)][_0x5a13ab(0x167)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer['forEach'](function(_0x5c0042){const _0x5e980b=_0x18b11f;_0x5c0042[_0x5e980b(0x165)][_0x5e980b(0x185)]=gameWidth+'px',_0x5c0042[_0x5e980b(0x165)]['height']=gameHeight+'px',_0x5c0042['style']['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x18b11f(0x190)](function(_0x288306){const _0x45ea11=_0x18b11f;_0x288306['classList'][_0x45ea11(0x14d)](_0x45ea11(0x148));}));imgShader[_0x18b11f(0x165)]['width']=gameWidth*upscaleShader+'px',imgShader[_0x18b11f(0x165)][_0x18b11f(0x167)]=gameHeight*upscaleShader+'px',imgShader['style'][_0x18b11f(0x187)]='top\x20center',imgShader['style'][_0x18b11f(0x18c)](_0x18b11f(0x142),upscaleShader+'px\x20'+upscaleShader+'px');}function a0_0x34dc(){const _0x5703a0=['getShaderInfoLog','createTexture','canvas-container','linkProgram','drawArrays','imageRendering','smooth_width','texcoord','setItem','17235IBoDvP','uniform1f','getPixelData','transform','querySelectorAll','_temperature','STATIC_DRAW','createShader','--bg-size','log','TEXTURE_MIN_FILTER','drawImage','error','getShaderParameter','fefs','getContext','text','RGBA','0,0,','add','floor','TRIANGLE_STRIP','bindBuffer','texImage2D','getElementById','webgl2','getItem','vertexAttribPointer','compileShader','81820aBrDbr','4.0','devicePixelRatio','createProgram','2534620PCKCAD','gbc','arrayBuffer','TEXTURE_2D','.message-container','TEXTURE_MAG_FILTER','FLOAT','COLOR_BUFFER_BIT','documentElement','202svLJeM','style','COMPILE_STATUS','height','FRAGMENT_SHADER','3231090EJMhVo','attachShader','92xAOOLJ','UNSIGNED_BYTE','CLAMP_TO_EDGE','getAttribLocation','TEXTURE_WRAP_T','5453082MAQzeE','classList','getUniformLocation','NEAREST','render_size','texParameteri','clientWidth','uniform2f','screenSize','_streng','warm','createBuffer','632KhNQbr','2281omcQfx','canvas','bindTexture','57547KZJJtB','game_size','position','2761XzKWCS','imageSmoothingEnabled','width','deleteShader','transformOrigin','enableVertexAttribArray','then','.stateTitle,\x20.stateDate','slice','setProperty','useProgram','clearRect','.setting-container','forEach','ARRAY_BUFFER','./src/shaders/vertexShader.glsl','zoom','bufferData','./src/lut/lut64_','.bin','scale(','img-shader'];a0_0x34dc=function(){return _0x5703a0;};return a0_0x34dc();}function setupWebGL(){const _0xa28926=a0_0x2da73e;gl=bufferCanvas[_0xa28926(0x149)](_0xa28926(0x153));if(!gl)return console['error']('WebGL2\x20not\x20supported'),null;gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']);}function createShader(_0x2ad7d1,_0x42948e){const _0xf86c1e=a0_0x2da73e,_0xf7cab=gl[_0xf86c1e(0x141)](_0x2ad7d1);gl['shaderSource'](_0xf7cab,_0x42948e),gl[_0xf86c1e(0x156)](_0xf7cab);if(!gl[_0xf86c1e(0x147)](_0xf7cab,gl[_0xf86c1e(0x166)]))return console[_0xf86c1e(0x146)](gl[_0xf86c1e(0x199)](_0xf7cab)),gl[_0xf86c1e(0x186)](_0xf7cab),null;return _0xf7cab;}async function setupShaders(){const _0x1fe330=a0_0x2da73e,_0x316b0a=await loadShaderSource(_0x1fe330(0x192)),_0x131fe8=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x59ee61=createShader(gl['VERTEX_SHADER'],_0x316b0a),_0x10f7bf=createShader(gl[_0x1fe330(0x168)],_0x131fe8);return program=gl[_0x1fe330(0x15a)](),gl['attachShader'](program,_0x59ee61),gl[_0x1fe330(0x16a)](program,_0x10f7bf),gl[_0x1fe330(0x19c)](program),gl[_0x1fe330(0x18d)](program),program;}function setupTexture(){const _0x7b0330=a0_0x2da73e;texture=gl[_0x7b0330(0x19a)](),gl[_0x7b0330(0x17f)](gl[_0x7b0330(0x15e)],texture),gl[_0x7b0330(0x175)](gl[_0x7b0330(0x15e)],gl[_0x7b0330(0x144)],gl[_0x7b0330(0x173)]),gl[_0x7b0330(0x175)](gl[_0x7b0330(0x15e)],gl[_0x7b0330(0x160)],gl[_0x7b0330(0x173)]),gl['texParameteri'](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0x7b0330(0x16d)]),gl[_0x7b0330(0x175)](gl[_0x7b0330(0x15e)],gl[_0x7b0330(0x16f)],gl[_0x7b0330(0x16d)]),gl[_0x7b0330(0x177)](gl['getUniformLocation'](program,_0x7b0330(0x181)),gameWidth,gameHeight),gl[_0x7b0330(0x177)](gl[_0x7b0330(0x172)](program,_0x7b0330(0x174)),gl[_0x7b0330(0x17e)]['width'],gl[_0x7b0330(0x17e)][_0x7b0330(0x167)]),gl[_0x7b0330(0x1a3)](gl[_0x7b0330(0x172)](program,_0x7b0330(0x19f)),gameWidth/gl[_0x7b0330(0x17e)][_0x7b0330(0x185)]),gl[_0x7b0330(0x1a3)](gl[_0x7b0330(0x172)](program,'smooth_height'),gameHeight/gl[_0x7b0330(0x17e)]['height']);}function setupBuffers(){const _0x2347fe=a0_0x2da73e,_0x25cf7a=gl[_0x2347fe(0x17b)]();gl[_0x2347fe(0x150)](gl[_0x2347fe(0x191)],_0x25cf7a),gl[_0x2347fe(0x194)](gl[_0x2347fe(0x191)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2347fe(0x1a8)]);const _0x51c8f8=gl[_0x2347fe(0x16e)](program,_0x2347fe(0x182));gl[_0x2347fe(0x188)](_0x51c8f8),gl[_0x2347fe(0x155)](_0x51c8f8,0x2,gl[_0x2347fe(0x161)],![],0x0,0x0);const _0x5665ad=gl['createBuffer']();gl[_0x2347fe(0x150)](gl['ARRAY_BUFFER'],_0x5665ad),gl[_0x2347fe(0x194)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2347fe(0x1a8)]);const _0x59e9e9=gl[_0x2347fe(0x16e)](program,_0x2347fe(0x1a0));gl[_0x2347fe(0x188)](_0x59e9e9),gl[_0x2347fe(0x155)](_0x59e9e9,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0x9e0c78){const _0x3e8ecb=a0_0x2da73e,_0x27aea9=a0_0xeb16e0[_0x3e8ecb(0x1a4)]();if(!_0x27aea9)return;await loadLUT64();const _0x5f48f8=new Uint8ClampedArray(gameWidth*gameHeight*0x4),_0x4b3fc2=gameWidth*gameHeight;for(let _0x527585=0x0;_0x527585<_0x4b3fc2;_0x527585++){const _0x21b5fd=_0x527585%gameWidth,_0x1f6d2b=Math[_0x3e8ecb(0x14e)](_0x527585/gameWidth),_0x47d248=_0x1f6d2b*gameStride+_0x21b5fd,_0x3e507a=_0x527585*0x4,_0x324617=_0x27aea9[_0x47d248],_0x5e0ccf=(_0x324617&0xff)>>0x2,_0x36e7e5=(_0x324617>>0x8&0xff)>>0x2,_0x45c901=(_0x324617>>0x10&0xff)>>0x2,_0x32182b=(_0x5e0ccf*0x40*0x40+_0x36e7e5*0x40+_0x45c901)*0x3;_0x5f48f8[_0x3e507a]=lut64[_0x32182b],_0x5f48f8[_0x3e507a+0x1]=lut64[_0x32182b+0x1],_0x5f48f8[_0x3e507a+0x2]=lut64[_0x32182b+0x2],_0x5f48f8[_0x3e507a+0x3]=0xff;}if(_0x9e0c78===_0x3e8ecb(0x153))gl[_0x3e8ecb(0x17f)](gl['TEXTURE_2D'],texture),gl[_0x3e8ecb(0x151)](gl[_0x3e8ecb(0x15e)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x3e8ecb(0x14b)],gl[_0x3e8ecb(0x16c)],_0x5f48f8),gl['clear'](gl[_0x3e8ecb(0x162)]),gl[_0x3e8ecb(0x19d)](gl[_0x3e8ecb(0x14f)],0x0,0x4);else _0x9e0c78==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas[_0x3e8ecb(0x149)]('2d',{'alpha':![]}),ctx2d[_0x3e8ecb(0x184)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj['data']['set'](_0x5f48f8),createImageBitmap(imageDataObj)[_0x3e8ecb(0x189)](_0x2bb98f=>{const _0x38d30c=_0x3e8ecb;ctx2d[_0x38d30c(0x18e)](0x0,0x0,bufferCanvas[_0x38d30c(0x185)],bufferCanvas['height']),ctx2d[_0x38d30c(0x145)](_0x2bb98f,0x0,0x0),_0x2bb98f['close']();}));requestAnimationFrame(()=>renderPixel(_0x9e0c78));}export async function switchRenderMode(_0x746a33){const _0x554dec=a0_0x2da73e;systemType=gameName[_0x554dec(0x18b)](-0x3);if(_0x746a33==='2d')setupStyle('2d'),renderPixel('2d');else _0x746a33===_0x554dec(0x153)&&(setupStyle(_0x554dec(0x153)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x554dec(0x153)));}document['addEventListener']('DOMContentLoaded',function(){});