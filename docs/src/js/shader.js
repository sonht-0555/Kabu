(function(_0x10b991,_0x28859a){const _0x23c220=a0_0x25d6,_0x10e970=_0x10b991();while(!![]){try{const _0xb1afe8=-parseInt(_0x23c220(0xcc))/0x1+-parseInt(_0x23c220(0xd4))/0x2+-parseInt(_0x23c220(0xa4))/0x3*(parseInt(_0x23c220(0xb4))/0x4)+parseInt(_0x23c220(0xae))/0x5*(parseInt(_0x23c220(0xb2))/0x6)+parseInt(_0x23c220(0xd9))/0x7*(parseInt(_0x23c220(0xcd))/0x8)+parseInt(_0x23c220(0xa0))/0x9*(-parseInt(_0x23c220(0xb5))/0xa)+parseInt(_0x23c220(0x99))/0xb*(parseInt(_0x23c220(0xca))/0xc);if(_0xb1afe8===_0x28859a)break;else _0x10e970['push'](_0x10e970['shift']());}catch(_0x313855){_0x10e970['push'](_0x10e970['shift']());}}}(a0_0x558e,0xbc98b));import*as a0_0x4b6ad3 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x1fbc3a=a0_0x25d6;systemType=gameName['slice'](-0x3);const _0x2c12ee=(localStorage[_0x1fbc3a(0xd6)](gameName+_0x1fbc3a(0x9b))||_0x1fbc3a(0xc3))['toLowerCase']();if(!lut64||lut64Profile!==_0x2c12ee){const _0x1d77f4=_0x1fbc3a(0xd8)+_0x2c12ee+_0x1fbc3a(0xc5);console[_0x1fbc3a(0xd3)](_0x1d77f4);const _0x23d20f=await fetch(_0x1d77f4),_0x5e4017=await _0x23d20f['arrayBuffer']();lut64=new Uint8Array(_0x5e4017),lut64Profile=_0x2c12ee;}}function a0_0x25d6(_0x415dfc,_0x2cad8c){const _0x558e2d=a0_0x558e();return a0_0x25d6=function(_0x25d63f,_0x4b6954){_0x25d63f=_0x25d63f-0x96;let _0x50fbec=_0x558e2d[_0x25d63f];return _0x50fbec;},a0_0x25d6(_0x415dfc,_0x2cad8c);}function setupWebGL_Shader(_0x41491e){const _0x3db44b=a0_0x25d6;gl=bufferCanvas[_0x3db44b(0xb7)](_0x3db44b(0xd5),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x3db44b(0xd2)}),gl[_0x3db44b(0x98)](0x0,0x0,bufferCanvas[_0x3db44b(0xc8)],bufferCanvas[_0x3db44b(0xa1)]);function _0x3f793a(_0x1a6037,_0x38c2d6){const _0x4ea40c=_0x3db44b,_0x2d37cc=gl[_0x4ea40c(0xb0)](_0x1a6037);return gl[_0x4ea40c(0xbf)](_0x2d37cc,_0x38c2d6),gl[_0x4ea40c(0xc4)](_0x2d37cc),_0x2d37cc;}vs=_0x3db44b(0xbe);if(_0x41491e==='webgl')fs=_0x3db44b(0xbc);else _0x41491e===_0x3db44b(0xd7)&&(fs=_0x3db44b(0xcb));const _0xea0a63=_0x3f793a(gl[_0x3db44b(0xc0)],vs),_0x18e687=_0x3f793a(gl[_0x3db44b(0xc9)],fs);return program=gl['createProgram'](),gl[_0x3db44b(0xdb)](program,_0xea0a63),gl['attachShader'](program,_0x18e687),gl[_0x3db44b(0x96)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x165068){const _0x5db6b5=a0_0x25d6;texture=gl[_0x5db6b5(0xc7)](),gl[_0x5db6b5(0xa2)](gl[_0x5db6b5(0xb6)],texture),gl['texParameteri'](gl[_0x5db6b5(0xb6)],gl['TEXTURE_MIN_FILTER'],gl[_0x5db6b5(0xa6)]),gl[_0x5db6b5(0xa5)](gl[_0x5db6b5(0xb6)],gl[_0x5db6b5(0xda)],gl[_0x5db6b5(0xa6)]),gl[_0x5db6b5(0xa5)](gl[_0x5db6b5(0xb6)],gl[_0x5db6b5(0xbb)],gl['CLAMP_TO_EDGE']),gl['texParameteri'](gl[_0x5db6b5(0xb6)],gl[_0x5db6b5(0xb1)],gl['CLAMP_TO_EDGE']);_0x165068===_0x5db6b5(0xd7)&&(gl[_0x5db6b5(0xc6)](gl['getUniformLocation'](program,'game_size'),gameWidth,gameHeight),gl[_0x5db6b5(0xc6)](gl[_0x5db6b5(0x9f)](program,_0x5db6b5(0xcf)),gl[_0x5db6b5(0xc1)]['width'],gl['canvas'][_0x5db6b5(0xa1)]),gl[_0x5db6b5(0xaa)](gl[_0x5db6b5(0x9f)](program,'smooth_width'),gameWidth/gl[_0x5db6b5(0xc1)][_0x5db6b5(0xc8)]),gl[_0x5db6b5(0xaa)](gl[_0x5db6b5(0x9f)](program,_0x5db6b5(0xb9)),gameHeight/gl[_0x5db6b5(0xc1)][_0x5db6b5(0xa1)]));const _0x43c754=gl[_0x5db6b5(0xab)]();gl[_0x5db6b5(0xba)](gl[_0x5db6b5(0xa3)],_0x43c754),gl['bufferData'](gl[_0x5db6b5(0xa3)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x5db6b5(0xa7)]),gl[_0x5db6b5(0xb3)](gl['getAttribLocation'](program,_0x5db6b5(0x9a)),0x2,gl[_0x5db6b5(0xd0)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x5db6b5(0xd1)](program,_0x5db6b5(0x9a)));const _0x5b1653=gl['createBuffer']();gl[_0x5db6b5(0xba)](gl[_0x5db6b5(0xa3)],_0x5b1653),gl[_0x5db6b5(0x97)](gl[_0x5db6b5(0xa3)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x5db6b5(0xa7)]),gl['vertexAttribPointer'](gl[_0x5db6b5(0xd1)](program,'texcoord'),0x2,gl[_0x5db6b5(0xd0)],![],0x0,0x0),gl[_0x5db6b5(0xc2)](gl['getAttribLocation'](program,_0x5db6b5(0x9d)));}function setup2DContext(){const _0x4e5464=a0_0x25d6;ctx2d=bufferCanvas[_0x4e5464(0xb7)]('2d'),ctx2d[_0x4e5464(0xa8)]=![];}async function renderPixel(_0xbbc651){const _0x8858e2=a0_0x25d6,_0x344cf0=a0_0x4b6ad3[_0x8858e2(0x9e)]();if(!_0x344cf0)return;await loadLUT64();const _0x46cead=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x14a291=0x0;_0x14a291<gameHeight;_0x14a291++){for(let _0x586663=0x0;_0x586663<gameWidth;_0x586663++){const _0x74f55e=_0x14a291*gameStride+_0x586663,_0x4c6a6c=(_0x14a291*gameWidth+_0x586663)*0x4,_0x443de8=_0x344cf0[_0x74f55e];if(lut64Profile===_0x8858e2(0xc3))_0x46cead[_0x4c6a6c]=_0x443de8&0xff,_0x46cead[_0x4c6a6c+0x1]=_0x443de8>>0x8&0xff,_0x46cead[_0x4c6a6c+0x2]=_0x443de8>>0x10&0xff,_0x46cead[_0x4c6a6c+0x3]=0xff;else{const _0x3ec8e0=(_0x443de8&0xff)>>0x2,_0x4cd15d=(_0x443de8>>0x8&0xff)>>0x2,_0x419071=(_0x443de8>>0x10&0xff)>>0x2,_0x452028=(_0x3ec8e0*0x40*0x40+_0x4cd15d*0x40+_0x419071)*0x3;_0x46cead[_0x4c6a6c]=lut64[_0x452028],_0x46cead[_0x4c6a6c+0x1]=lut64[_0x452028+0x1],_0x46cead[_0x4c6a6c+0x2]=lut64[_0x452028+0x2],_0x46cead[_0x4c6a6c+0x3]=0xff;}}}if(_0xbbc651===_0x8858e2(0xd5))gl[_0x8858e2(0xaf)](gl[_0x8858e2(0xb6)],0x0,gl[_0x8858e2(0xa9)],gameWidth,gameHeight,0x0,gl[_0x8858e2(0xa9)],gl[_0x8858e2(0xac)],_0x46cead),gl['clear'](gl[_0x8858e2(0xbd)]),gl[_0x8858e2(0xb8)](gl[_0x8858e2(0xce)],0x0,0x4);else _0xbbc651==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x46cead,gameWidth,gameHeight):imageDataObj[_0x8858e2(0x9c)]['set'](_0x46cead),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x8858e2(0xc8)],bufferCanvas[_0x8858e2(0xa1)]),ctx2d[_0x8858e2(0xad)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0xbbc651));}function a0_0x558e(){const _0x3db8c3=['getItem','webgl_full','./src/lut/lut64_','28KBOufk','TEXTURE_MAG_FILTER','attachShader','linkProgram','bufferData','viewport','11RgRQJR','position','_temperature','data','texcoord','getPixelData','getUniformLocation','9VmVlsW','height','bindTexture','ARRAY_BUFFER','964737TBMkRX','texParameteri','NEAREST','STATIC_DRAW','imageSmoothingEnabled','RGBA','uniform1f','createBuffer','UNSIGNED_BYTE','putImageData','5daZVRE','texImage2D','createShader','TEXTURE_WRAP_T','2667894FJyMtk','vertexAttribPointer','16eWanhX','2692510ifwrsO','TEXTURE_2D','getContext','drawArrays','smooth_height','bindBuffer','TEXTURE_WRAP_S','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','COLOR_BUFFER_BIT','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','shaderSource','VERTEX_SHADER','canvas','enableVertexAttribArray','none','compileShader','_4.0.bin','uniform2f','createTexture','width','FRAGMENT_SHADER','46072428senqDC','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','1500795XyLFuC','2078848VGdWjZ','TRIANGLE_STRIP','render_size','FLOAT','getAttribLocation','low-power','log','2989178uBfwYd','webgl'];a0_0x558e=function(){return _0x3db8c3;};return a0_0x558e();}export async function switchRenderMode(_0x468c14){const _0x29765a=a0_0x25d6;systemType=gameName['slice'](-0x3);if(_0x468c14==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x468c14===_0x29765a(0xd5))setupStyle('2d'),setupWebGL_Shader(_0x29765a(0xd5)),setupTexture_Buffer(_0x29765a(0xd5)),renderPixel(_0x29765a(0xd5));else _0x468c14===_0x29765a(0xd7)&&(setupStyle(_0x29765a(0xd7)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x29765a(0xd7)),renderPixel('webgl'));}}