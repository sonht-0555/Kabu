const a0_0x3eadfc=a0_0x3ff8;(function(_0x2f1bfe,_0x47461a){const _0x490165=a0_0x3ff8,_0x499c8b=_0x2f1bfe();while(!![]){try{const _0xcc055c=-parseInt(_0x490165(0x140))/0x1*(parseInt(_0x490165(0x139))/0x2)+-parseInt(_0x490165(0x144))/0x3+parseInt(_0x490165(0x15b))/0x4*(parseInt(_0x490165(0x156))/0x5)+parseInt(_0x490165(0x141))/0x6*(-parseInt(_0x490165(0x124))/0x7)+-parseInt(_0x490165(0x120))/0x8*(-parseInt(_0x490165(0x131))/0x9)+parseInt(_0x490165(0x14c))/0xa+parseInt(_0x490165(0x170))/0xb*(parseInt(_0x490165(0x159))/0xc);if(_0xcc055c===_0x47461a)break;else _0x499c8b['push'](_0x499c8b['shift']());}catch(_0x62c5a4){_0x499c8b['push'](_0x499c8b['shift']());}}}(a0_0x4e13,0x8eb9e));import*as a0_0x6815de from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x3eadfc(0x174)]('textured'),bufferCanvas=document[a0_0x3eadfc(0x174)](a0_0x3eadfc(0x126)),canvasContainer=document[a0_0x3eadfc(0x174)]('canvas-container'),imgShader=document[a0_0x3eadfc(0x174)](a0_0x3eadfc(0x134)),settingContainer=document[a0_0x3eadfc(0x148)](a0_0x3eadfc(0x17e)),messageContainer=document[a0_0x3eadfc(0x148)](a0_0x3eadfc(0x167)),stateTitle=document['querySelectorAll'](a0_0x3eadfc(0x16f));async function loadLUT64(){const _0x46f922=a0_0x3eadfc;systemType=gameName[_0x46f922(0x137)](-0x3);const _0x2162dd=localStorage['getItem'](gameName+_0x46f922(0x160))||'4.0',_0x1592bf=(localStorage[_0x46f922(0x164)](gameName+_0x46f922(0x181))||'warm')[_0x46f922(0x165)]();if(!lut64||lut64Streng!==_0x2162dd||lut64Profile!==_0x1592bf){const _0x244c04=_0x46f922(0x17c)+_0x1592bf+'_'+_0x2162dd+_0x46f922(0x150);console[_0x46f922(0x173)](_0x244c04);const _0x250bf3=await fetch(_0x244c04),_0xfacb0f=await _0x250bf3[_0x46f922(0x14e)]();lut64=new Uint8Array(_0xfacb0f),lut64Streng=_0x2162dd,lut64Profile=_0x1592bf;}}async function loadShaderSource(_0x14b0ad){const _0x499f41=a0_0x3eadfc,_0x3b5157=await fetch(_0x14b0ad);return await _0x3b5157[_0x499f41(0x168)]();}function setupStyle(_0x357e43){const _0x440f95=a0_0x3eadfc;clientWidth=document['documentElement'][_0x440f95(0x129)];const _0x55cfb9=window[_0x440f95(0x15e)];systemType===_0x440f95(0x147)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x440f95(0x176)](clientWidth*_0x55cfb9/gameWidth),localStorage[_0x440f95(0x16c)](_0x440f95(0x17f),_0x440f95(0x180)+gameWidth*(integerScaling/_0x55cfb9)+','+gameHeight*(integerScaling/_0x55cfb9))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x440f95(0x176)](clientWidth*_0x55cfb9/gameWidth),localStorage[_0x440f95(0x16c)](_0x440f95(0x17f),_0x440f95(0x180)+gameWidth*(integerScaling/_0x55cfb9)+','+gameHeight*(integerScaling/_0x55cfb9)));if(_0x357e43==='2d')bufferCanvas[_0x440f95(0x16b)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x440f95(0x169)][_0x440f95(0x138)]=''+integerScaling/_0x55cfb9,bufferCanvas[_0x440f95(0x169)][_0x440f95(0x13f)]=_0x440f95(0x12b),canvasContainer['style']['width']=gameWidth*(integerScaling/_0x55cfb9)+'px',canvasContainer[_0x440f95(0x169)]['height']=gameHeight*(integerScaling/_0x55cfb9)+'px',textured[_0x440f95(0x169)][_0x440f95(0x16b)]=gameWidth*(integerScaling/_0x55cfb9)+'px',textured['style'][_0x440f95(0x13b)]=gameHeight*(integerScaling/_0x55cfb9)+'px',imgShader[_0x440f95(0x169)][_0x440f95(0x15a)]=_0x440f95(0x158)+integerScaling/_0x55cfb9/upscaleShader+')',settingContainer[_0x440f95(0x16e)](function(_0x508a53){const _0x54b7b9=_0x440f95;_0x508a53[_0x54b7b9(0x169)]['width']=gameWidth*(integerScaling/_0x55cfb9)+'px',_0x508a53['style']['height']=gameHeight*(integerScaling/_0x55cfb9)+'px';}),messageContainer['forEach'](function(_0x4213b6){const _0x363f7b=_0x440f95;_0x4213b6[_0x363f7b(0x169)][_0x363f7b(0x16b)]=gameWidth+'px',_0x4213b6['style'][_0x363f7b(0x13b)]=gameHeight+'px',_0x4213b6[_0x363f7b(0x169)][_0x363f7b(0x138)]=''+integerScaling/_0x55cfb9;}),stateTitle[_0x440f95(0x16e)](function(_0x597fdc){const _0x527884=_0x440f95;_0x597fdc['classList'][_0x527884(0x14d)]('fefs');});else _0x357e43==='webgl2'&&(bufferCanvas[_0x440f95(0x16b)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style']['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x440f95(0x169)][_0x440f95(0x13f)]='',canvasContainer[_0x440f95(0x169)]['width']=clientWidth+'px',canvasContainer[_0x440f95(0x169)][_0x440f95(0x13b)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x440f95(0x169)][_0x440f95(0x16b)]=clientWidth+'px',textured['style'][_0x440f95(0x13b)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x440f95(0x169)][_0x440f95(0x15a)]=_0x440f95(0x158)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x440f95(0x16e)](function(_0x230d23){const _0x426dd9=_0x440f95;_0x230d23[_0x426dd9(0x169)][_0x426dd9(0x16b)]=clientWidth+'px',_0x230d23[_0x426dd9(0x169)][_0x426dd9(0x13b)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x440f95(0x16e)](function(_0x3785ec){const _0x4bf302=_0x440f95;_0x3785ec[_0x4bf302(0x169)][_0x4bf302(0x16b)]=gameWidth+'px',_0x3785ec[_0x4bf302(0x169)][_0x4bf302(0x13b)]=gameHeight+'px',_0x3785ec[_0x4bf302(0x169)][_0x4bf302(0x138)]=''+clientWidth/gameWidth;}),stateTitle[_0x440f95(0x16e)](function(_0x4c2856){const _0x1be513=_0x440f95;_0x4c2856['classList'][_0x1be513(0x133)](_0x1be513(0x15f));}));imgShader[_0x440f95(0x169)][_0x440f95(0x16b)]=gameWidth*upscaleShader+'px',imgShader[_0x440f95(0x169)][_0x440f95(0x13b)]=gameHeight*upscaleShader+'px',imgShader['style']['transformOrigin']=_0x440f95(0x153),imgShader[_0x440f95(0x169)][_0x440f95(0x12e)]('--bg-size',upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x3a56bb=a0_0x3eadfc;gl=bufferCanvas['getContext'](_0x3a56bb(0x149));if(!gl)return console[_0x3a56bb(0x130)](_0x3a56bb(0x157)),null;gl[_0x3a56bb(0x171)](0x0,0x0,bufferCanvas[_0x3a56bb(0x16b)],bufferCanvas[_0x3a56bb(0x13b)]);}function createShader(_0x2f2854,_0x4ad36f){const _0x430470=a0_0x3eadfc,_0x2e38be=gl[_0x430470(0x12f)](_0x2f2854);gl[_0x430470(0x145)](_0x2e38be,_0x4ad36f),gl['compileShader'](_0x2e38be);if(!gl[_0x430470(0x125)](_0x2e38be,gl[_0x430470(0x12d)]))return console[_0x430470(0x130)](gl[_0x430470(0x14b)](_0x2e38be)),gl[_0x430470(0x13d)](_0x2e38be),null;return _0x2e38be;}async function setupShaders(){const _0x3697a7=a0_0x3eadfc,_0x2bbaef=await loadShaderSource(_0x3697a7(0x12c)),_0x3deadf=await loadShaderSource(_0x3697a7(0x14f)),_0x42f3e7=createShader(gl[_0x3697a7(0x175)],_0x2bbaef),_0x1a61c7=createShader(gl[_0x3697a7(0x179)],_0x3deadf);return program=gl[_0x3697a7(0x154)](),gl[_0x3697a7(0x13c)](program,_0x42f3e7),gl[_0x3697a7(0x13c)](program,_0x1a61c7),gl['linkProgram'](program),gl[_0x3697a7(0x172)](program),program;}function setupTexture(){const _0x181bd3=a0_0x3eadfc;texture=gl[_0x181bd3(0x155)](),gl['bindTexture'](gl[_0x181bd3(0x17b)],texture),gl[_0x181bd3(0x11d)](gl[_0x181bd3(0x17b)],gl['TEXTURE_MIN_FILTER'],gl[_0x181bd3(0x151)]),gl[_0x181bd3(0x11d)](gl['TEXTURE_2D'],gl[_0x181bd3(0x16a)],gl[_0x181bd3(0x151)]),gl[_0x181bd3(0x11d)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0x181bd3(0x123)]),gl[_0x181bd3(0x11d)](gl[_0x181bd3(0x17b)],gl['TEXTURE_WRAP_T'],gl[_0x181bd3(0x123)]),gl['uniform2f'](gl[_0x181bd3(0x121)](program,_0x181bd3(0x162)),gameWidth,gameHeight),gl['uniform2f'](gl['getUniformLocation'](program,_0x181bd3(0x127)),gl[_0x181bd3(0x126)][_0x181bd3(0x16b)],gl[_0x181bd3(0x126)][_0x181bd3(0x13b)]),gl[_0x181bd3(0x14a)](gl[_0x181bd3(0x121)](program,_0x181bd3(0x152)),gameWidth/gl['canvas'][_0x181bd3(0x16b)]),gl[_0x181bd3(0x14a)](gl[_0x181bd3(0x121)](program,_0x181bd3(0x132)),gameHeight/gl['canvas'][_0x181bd3(0x13b)]);}function a0_0x3ff8(_0x102faa,_0x5d3b13){const _0x4e130b=a0_0x4e13();return a0_0x3ff8=function(_0x3ff836,_0xf6a6e3){_0x3ff836=_0x3ff836-0x11d;let _0x19be42=_0x4e130b[_0x3ff836];return _0x19be42;},a0_0x3ff8(_0x102faa,_0x5d3b13);}function setupBuffers(){const _0x29ea26=a0_0x3eadfc,_0x50df0e=gl[_0x29ea26(0x17d)]();gl['bindBuffer'](gl[_0x29ea26(0x143)],_0x50df0e),gl[_0x29ea26(0x15c)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x29ea26(0x13e)]);const _0x27f94d=gl[_0x29ea26(0x16d)](program,_0x29ea26(0x136));gl[_0x29ea26(0x11e)](_0x27f94d),gl[_0x29ea26(0x166)](_0x27f94d,0x2,gl[_0x29ea26(0x177)],![],0x0,0x0);const _0x2b33af=gl[_0x29ea26(0x17d)]();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x2b33af),gl[_0x29ea26(0x15c)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']);const _0x502c26=gl['getAttribLocation'](program,_0x29ea26(0x135));gl[_0x29ea26(0x11e)](_0x502c26),gl[_0x29ea26(0x166)](_0x502c26,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0xadc234){const _0x336445=a0_0x3eadfc,_0x3cf435=a0_0x6815de[_0x336445(0x161)]();if(!_0x3cf435)return;await loadLUT64();const _0x5185d0=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x4c0811=0x0;_0x4c0811<gameHeight;_0x4c0811++){for(let _0x1f8e25=0x0;_0x1f8e25<gameWidth;_0x1f8e25++){const _0x2d4f95=_0x4c0811*gameStride+_0x1f8e25,_0x5cb10f=(_0x4c0811*gameWidth+_0x1f8e25)*0x4,_0x5e81d9=_0x3cf435[_0x2d4f95],_0x32d127=(_0x5e81d9&0xff)>>0x2,_0x5d6f33=(_0x5e81d9>>0x8&0xff)>>0x2,_0x1648ec=(_0x5e81d9>>0x10&0xff)>>0x2,_0x25fcc1=(_0x32d127*0x40*0x40+_0x5d6f33*0x40+_0x1648ec)*0x3;_0x5185d0[_0x5cb10f]=lut64[_0x25fcc1],_0x5185d0[_0x5cb10f+0x1]=lut64[_0x25fcc1+0x1],_0x5185d0[_0x5cb10f+0x2]=lut64[_0x25fcc1+0x2],_0x5185d0[_0x5cb10f+0x3]=0xff;}}if(_0xadc234===_0x336445(0x149))gl[_0x336445(0x17a)](gl[_0x336445(0x17b)],texture),gl[_0x336445(0x128)](gl[_0x336445(0x17b)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x336445(0x146)],gl[_0x336445(0x11f)],_0x5185d0),gl[_0x336445(0x163)](gl[_0x336445(0x178)]),gl['drawArrays'](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0xadc234==='2d'){ctx2d=bufferCanvas[_0x336445(0x13a)]('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x4bf72b=new ImageData(_0x5185d0,gameWidth,gameHeight);createImageBitmap(_0x4bf72b)[_0x336445(0x122)](_0x231789=>{const _0x3ee70c=_0x336445;ctx2d[_0x3ee70c(0x12a)](0x0,0x0,bufferCanvas[_0x3ee70c(0x16b)],bufferCanvas[_0x3ee70c(0x13b)]),ctx2d['drawImage'](_0x231789,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0xadc234));}function a0_0x4e13(){const _0x205368=['_temperature','texParameteri','enableVertexAttribArray','UNSIGNED_BYTE','190072ypGznN','getUniformLocation','then','CLAMP_TO_EDGE','34237oAiHfV','getShaderParameter','canvas','render_size','texImage2D','clientWidth','clearRect','crisp-edges','./src/shaders/vertexShader.glsl','COMPILE_STATUS','setProperty','createShader','error','252gdEGnc','smooth_height','add','img-shader','texcoord','position','slice','zoom','124UgUdFM','getContext','height','attachShader','deleteShader','STATIC_DRAW','imageRendering','7043QYriOx','1428SHubgC','addEventListener','ARRAY_BUFFER','1364424kbqgLb','shaderSource','RGBA','gbc','querySelectorAll','webgl2','uniform1f','getShaderInfoLog','7465810NvWIGj','remove','arrayBuffer','./src/shaders/fragmentShader.glsl','.bin','NEAREST','smooth_width','top\x20center','createProgram','createTexture','5cpLijN','WebGL2\x20not\x20supported','scale(','12YxdOHE','transform','3240172oYoEDX','bufferData','DOMContentLoaded','devicePixelRatio','fefs','_streng','getPixelData','game_size','clear','getItem','toLowerCase','vertexAttribPointer','.message-container','text','style','TEXTURE_MAG_FILTER','width','setItem','getAttribLocation','forEach','.stateTitle,\x20.stateDate','4600882lmOnkM','viewport','useProgram','log','getElementById','VERTEX_SHADER','floor','FLOAT','COLOR_BUFFER_BIT','FRAGMENT_SHADER','bindTexture','TEXTURE_2D','./src/lut/lut64_','createBuffer','.setting-container','screenSize','0,0,'];a0_0x4e13=function(){return _0x205368;};return a0_0x4e13();}export async function switchRenderMode(_0x199510){const _0x26eacc=a0_0x3eadfc;systemType=gameName[_0x26eacc(0x137)](-0x3);if(_0x199510==='2d')setupStyle('2d'),renderPixel('2d');else _0x199510===_0x26eacc(0x149)&&(setupStyle('webgl2'),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x26eacc(0x149)));}document[a0_0x3eadfc(0x142)](a0_0x3eadfc(0x15d),function(){});