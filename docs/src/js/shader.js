(function(_0x1629cf,_0x5bd5d5){const _0x54e8cc=a0_0x46fc,_0x4cb039=_0x1629cf();while(!![]){try{const _0x2fa545=parseInt(_0x54e8cc(0x17b))/0x1*(-parseInt(_0x54e8cc(0x195))/0x2)+-parseInt(_0x54e8cc(0x18b))/0x3*(parseInt(_0x54e8cc(0x16f))/0x4)+-parseInt(_0x54e8cc(0x17c))/0x5+parseInt(_0x54e8cc(0x163))/0x6*(parseInt(_0x54e8cc(0x160))/0x7)+parseInt(_0x54e8cc(0x196))/0x8+parseInt(_0x54e8cc(0x172))/0x9*(-parseInt(_0x54e8cc(0x178))/0xa)+parseInt(_0x54e8cc(0x168))/0xb;if(_0x2fa545===_0x5bd5d5)break;else _0x4cb039['push'](_0x4cb039['shift']());}catch(_0x2d8c8c){_0x4cb039['push'](_0x4cb039['shift']());}}}(a0_0x4221,0x562ac));import*as a0_0x4315fa from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x37b77d=a0_0x46fc;systemType=gameName[_0x37b77d(0x18a)](-0x3);const _0x17f01c=(localStorage['getItem'](gameName+_0x37b77d(0x17e))||_0x37b77d(0x15d))[_0x37b77d(0x188)]();if(!lut64||lut64Profile!==_0x17f01c){const _0x198027=_0x37b77d(0x169)+_0x17f01c+_0x37b77d(0x175);console[_0x37b77d(0x179)](_0x198027);const _0x36713d=await fetch(_0x198027),_0xb44ec2=await _0x36713d[_0x37b77d(0x191)]();lut64=new Uint8Array(_0xb44ec2),lut64Profile=_0x17f01c;}}function setupWebGL_Shader(_0x30fd76){const _0x4dc33f=a0_0x46fc;gl=bufferCanvas[_0x4dc33f(0x187)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl['viewport'](0x0,0x0,bufferCanvas[_0x4dc33f(0x157)],bufferCanvas[_0x4dc33f(0x186)]);function _0x231c72(_0x429eb0,_0x13c87b){const _0xf3fdbe=_0x4dc33f,_0x345fb0=gl[_0xf3fdbe(0x16c)](_0x429eb0);return gl['shaderSource'](_0x345fb0,_0x13c87b),gl['compileShader'](_0x345fb0),_0x345fb0;}vs=_0x4dc33f(0x193);if(_0x30fd76===_0x4dc33f(0x183))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x30fd76===_0x4dc33f(0x161)&&(fs=_0x4dc33f(0x190));const _0x1060a4=_0x231c72(gl[_0x4dc33f(0x17f)],vs),_0x4c4390=_0x231c72(gl[_0x4dc33f(0x16b)],fs);return program=gl['createProgram'](),gl[_0x4dc33f(0x173)](program,_0x1060a4),gl[_0x4dc33f(0x173)](program,_0x4c4390),gl[_0x4dc33f(0x162)](program),gl[_0x4dc33f(0x17d)](program),program;}function setupTexture_Buffer(_0xbca6da){const _0x543dd5=a0_0x46fc;texture=gl[_0x543dd5(0x176)](),gl['bindTexture'](gl[_0x543dd5(0x177)],texture),gl[_0x543dd5(0x18f)](gl[_0x543dd5(0x177)],gl['TEXTURE_MIN_FILTER'],gl[_0x543dd5(0x18d)]),gl[_0x543dd5(0x18f)](gl[_0x543dd5(0x177)],gl[_0x543dd5(0x170)],gl['NEAREST']),gl[_0x543dd5(0x18f)](gl[_0x543dd5(0x177)],gl['TEXTURE_WRAP_S'],gl[_0x543dd5(0x171)]),gl[_0x543dd5(0x18f)](gl[_0x543dd5(0x177)],gl['TEXTURE_WRAP_T'],gl[_0x543dd5(0x171)]);_0xbca6da===_0x543dd5(0x161)&&(gl[_0x543dd5(0x164)](gl['getUniformLocation'](program,_0x543dd5(0x16d)),gameWidth,gameHeight),gl[_0x543dd5(0x164)](gl['getUniformLocation'](program,_0x543dd5(0x15c)),gl[_0x543dd5(0x194)][_0x543dd5(0x157)],gl[_0x543dd5(0x194)]['height']),gl[_0x543dd5(0x192)](gl[_0x543dd5(0x159)](program,_0x543dd5(0x165)),gameWidth/gl[_0x543dd5(0x194)][_0x543dd5(0x157)]),gl[_0x543dd5(0x192)](gl[_0x543dd5(0x159)](program,_0x543dd5(0x174)),gameHeight/gl[_0x543dd5(0x194)][_0x543dd5(0x186)]));const _0x59759c=gl[_0x543dd5(0x15b)]();gl['bindBuffer'](gl[_0x543dd5(0x181)],_0x59759c),gl[_0x543dd5(0x189)](gl[_0x543dd5(0x181)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x543dd5(0x184)](gl[_0x543dd5(0x167)](program,'position'),0x2,gl['FLOAT'],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x543dd5(0x167)](program,'position'));const _0x1035c6=gl[_0x543dd5(0x15b)]();gl[_0x543dd5(0x18e)](gl[_0x543dd5(0x181)],_0x1035c6),gl['bufferData'](gl[_0x543dd5(0x181)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x543dd5(0x16a)]),gl[_0x543dd5(0x184)](gl[_0x543dd5(0x167)](program,_0x543dd5(0x15e)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x543dd5(0x16e)](gl[_0x543dd5(0x167)](program,_0x543dd5(0x15e)));}function a0_0x46fc(_0x104822,_0xd04891){const _0x4221b3=a0_0x4221();return a0_0x46fc=function(_0x46fcbb,_0x3ccb85){_0x46fcbb=_0x46fcbb-0x156;let _0x529a7a=_0x4221b3[_0x46fcbb];return _0x529a7a;},a0_0x46fc(_0x104822,_0xd04891);}function setup2DContext(){const _0x11f84c=a0_0x46fc;ctx2d=bufferCanvas[_0x11f84c(0x187)]('2d'),ctx2d[_0x11f84c(0x182)]=![];}async function renderPixel(_0x1684a5){const _0x26b044=a0_0x46fc,_0x5afb2b=a0_0x4315fa[_0x26b044(0x18c)]();if(!_0x5afb2b)return;await loadLUT64();const _0x30985f=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x55bd18=0x0;_0x55bd18<gameHeight;_0x55bd18++){for(let _0x4d8f09=0x0;_0x4d8f09<gameWidth;_0x4d8f09++){const _0xd7f115=_0x55bd18*gameStride+_0x4d8f09,_0x5ae9f5=(_0x55bd18*gameWidth+_0x4d8f09)*0x4,_0x55c384=_0x5afb2b[_0xd7f115];if(lut64Profile===_0x26b044(0x15d))_0x30985f[_0x5ae9f5]=_0x55c384&0xff,_0x30985f[_0x5ae9f5+0x1]=_0x55c384>>0x8&0xff,_0x30985f[_0x5ae9f5+0x2]=_0x55c384>>0x10&0xff,_0x30985f[_0x5ae9f5+0x3]=0xff;else{const _0x6ba5ec=(_0x55c384&0xff)>>0x2,_0x16e971=(_0x55c384>>0x8&0xff)>>0x2,_0x46758e=(_0x55c384>>0x10&0xff)>>0x2,_0x8a6072=(_0x6ba5ec*0x40*0x40+_0x16e971*0x40+_0x46758e)*0x3;_0x30985f[_0x5ae9f5]=lut64[_0x8a6072],_0x30985f[_0x5ae9f5+0x1]=lut64[_0x8a6072+0x1],_0x30985f[_0x5ae9f5+0x2]=lut64[_0x8a6072+0x2],_0x30985f[_0x5ae9f5+0x3]=0xff;}}}if(_0x1684a5===_0x26b044(0x183))gl[_0x26b044(0x17a)](gl[_0x26b044(0x177)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x26b044(0x15a)],gl[_0x26b044(0x180)],_0x30985f),gl[_0x26b044(0x156)](gl[_0x26b044(0x166)]),gl[_0x26b044(0x15f)](gl[_0x26b044(0x185)],0x0,0x4);else _0x1684a5==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x30985f,gameWidth,gameHeight):imageDataObj['data'][_0x26b044(0x158)](_0x30985f),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x26b044(0x157)],bufferCanvas[_0x26b044(0x186)]),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x1684a5));}export async function switchRenderMode(_0x54cbb1){const _0x4052ee=a0_0x46fc;systemType=gameName['slice'](-0x3);if(_0x54cbb1==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x54cbb1==='webgl')setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(_0x4052ee(0x183)),renderPixel(_0x4052ee(0x183));else _0x54cbb1===_0x4052ee(0x161)&&(setupStyle('webgl_full'),setupWebGL_Shader(_0x4052ee(0x161)),setupTexture_Buffer(_0x4052ee(0x161)),renderPixel(_0x4052ee(0x183)));}}function a0_0x4221(){const _0x1b263b=['webgl_full','linkProgram','6wJKTfU','uniform2f','smooth_width','COLOR_BUFFER_BIT','getAttribLocation','17491397eqXjrX','./src/lut/lut64_','STATIC_DRAW','FRAGMENT_SHADER','createShader','game_size','enableVertexAttribArray','2920NrAzlD','TEXTURE_MAG_FILTER','CLAMP_TO_EDGE','288larOQl','attachShader','smooth_height','_4.0.bin','createTexture','TEXTURE_2D','220050GElsnA','log','texImage2D','91024qIoRlN','1138590NUeugw','useProgram','_temperature','VERTEX_SHADER','UNSIGNED_BYTE','ARRAY_BUFFER','imageSmoothingEnabled','webgl','vertexAttribPointer','TRIANGLE_STRIP','height','getContext','toLowerCase','bufferData','slice','1647NNqmzT','getPixelData','NEAREST','bindBuffer','texParameteri','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','arrayBuffer','uniform1f','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','canvas','4NjHlGB','1608304wyhSOC','clear','width','set','getUniformLocation','RGBA','createBuffer','render_size','none','texcoord','drawArrays','535297ZjUtEm'];a0_0x4221=function(){return _0x1b263b;};return a0_0x4221();}