(function(_0x11d785,_0x483232){const _0x28d812=a0_0x26ec,_0x1a6ee9=_0x11d785();while(!![]){try{const _0x5a06e1=parseInt(_0x28d812(0x81))/0x1+parseInt(_0x28d812(0xa9))/0x2+parseInt(_0x28d812(0xba))/0x3*(-parseInt(_0x28d812(0x7f))/0x4)+parseInt(_0x28d812(0xb8))/0x5+-parseInt(_0x28d812(0x8e))/0x6*(parseInt(_0x28d812(0x96))/0x7)+-parseInt(_0x28d812(0x7c))/0x8*(-parseInt(_0x28d812(0xbf))/0x9)+-parseInt(_0x28d812(0x7d))/0xa;if(_0x5a06e1===_0x483232)break;else _0x1a6ee9['push'](_0x1a6ee9['shift']());}catch(_0x5ba692){_0x1a6ee9['push'](_0x1a6ee9['shift']());}}}(a0_0xe8de,0xabdb3));import*as a0_0x47989b from'./main.js';function a0_0xe8de(){const _0x16792e=['getUniformLocation','texParameteri','uniform1f','bufferData','createShader','arrayBuffer','1927026QesAio','smooth_height','compileShader','ARRAY_BUFFER','canvas','getItem','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','slice','21CWTIYv','_4.0.bin','FRAGMENT_SHADER','toLowerCase','data','height','none','bindBuffer','FLOAT','shaderSource','TEXTURE_MIN_FILTER','VERTEX_SHADER','bindTexture','createProgram','TEXTURE_2D','createBuffer','putImageData','COLOR_BUFFER_BIT','width','1100098FFPnmi','TEXTURE_WRAP_S','STATIC_DRAW','position','getContext','attachShader','uniform2f','game_size','TRIANGLE_STRIP','set','drawArrays','viewport','TEXTURE_MAG_FILTER','CLAMP_TO_EDGE','log','3865505WPxGTa','RGBA','12960yvHQjf','UNSIGNED_BYTE','webgl_full','getAttribLocation','webgl','25236zNlrKS','getPixelData','smooth_width','enableVertexAttribArray','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','clearRect','3544ryIXQz','9330620MNhDbY','createTexture','1228qqvzkz','imageSmoothingEnabled','1361416yMoobJ','NEAREST','low-power','./src/lut/lut64_','texcoord','linkProgram','clear'];a0_0xe8de=function(){return _0x16792e;};return a0_0xe8de();}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x11cb30=a0_0x26ec;systemType=gameName[_0x11cb30(0x95)](-0x3);const _0x2de83c=(localStorage[_0x11cb30(0x93)](gameName+'_temperature')||_0x11cb30(0x9c))[_0x11cb30(0x99)]();if(!lut64||lut64Profile!==_0x2de83c){const _0x5c26af=_0x11cb30(0x84)+_0x2de83c+_0x11cb30(0x97);console[_0x11cb30(0xb7)](_0x5c26af);const _0x1e1af4=await fetch(_0x5c26af),_0x5a4e50=await _0x1e1af4[_0x11cb30(0x8d)]();lut64=new Uint8Array(_0x5a4e50),lut64Profile=_0x2de83c;}}function setupWebGL_Shader(_0x3760aa){const _0x1aaa1c=a0_0x26ec;gl=bufferCanvas[_0x1aaa1c(0xad)](_0x1aaa1c(0xbe),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x1aaa1c(0x83)}),gl[_0x1aaa1c(0xb4)](0x0,0x0,bufferCanvas[_0x1aaa1c(0xa8)],bufferCanvas[_0x1aaa1c(0x9b)]);function _0x4d198f(_0x2ef950,_0x256dda){const _0xb97d54=_0x1aaa1c,_0x4ca139=gl[_0xb97d54(0x8c)](_0x2ef950);return gl[_0xb97d54(0x9f)](_0x4ca139,_0x256dda),gl[_0xb97d54(0x90)](_0x4ca139),_0x4ca139;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x3760aa==='webgl')fs=_0x1aaa1c(0x7a);else _0x3760aa===_0x1aaa1c(0xbc)&&(fs=_0x1aaa1c(0x94));const _0x4db858=_0x4d198f(gl[_0x1aaa1c(0xa1)],vs),_0x1f0b67=_0x4d198f(gl[_0x1aaa1c(0x98)],fs);return program=gl[_0x1aaa1c(0xa3)](),gl[_0x1aaa1c(0xae)](program,_0x4db858),gl[_0x1aaa1c(0xae)](program,_0x1f0b67),gl[_0x1aaa1c(0x86)](program),gl['useProgram'](program),program;}function a0_0x26ec(_0x19a3fb,_0xecc3b7){const _0xe8dee7=a0_0xe8de();return a0_0x26ec=function(_0x26eca7,_0x414069){_0x26eca7=_0x26eca7-0x77;let _0xcb0a73=_0xe8dee7[_0x26eca7];return _0xcb0a73;},a0_0x26ec(_0x19a3fb,_0xecc3b7);}function setupTexture_Buffer(_0x55947b){const _0x2bfe83=a0_0x26ec;texture=gl[_0x2bfe83(0x7e)](),gl[_0x2bfe83(0xa2)](gl['TEXTURE_2D'],texture),gl[_0x2bfe83(0x89)](gl[_0x2bfe83(0xa4)],gl[_0x2bfe83(0xa0)],gl[_0x2bfe83(0x82)]),gl['texParameteri'](gl[_0x2bfe83(0xa4)],gl[_0x2bfe83(0xb5)],gl['NEAREST']),gl[_0x2bfe83(0x89)](gl[_0x2bfe83(0xa4)],gl[_0x2bfe83(0xaa)],gl[_0x2bfe83(0xb6)]),gl[_0x2bfe83(0x89)](gl[_0x2bfe83(0xa4)],gl['TEXTURE_WRAP_T'],gl[_0x2bfe83(0xb6)]);_0x55947b===_0x2bfe83(0xbc)&&(gl[_0x2bfe83(0xaf)](gl[_0x2bfe83(0x88)](program,_0x2bfe83(0xb0)),gameWidth,gameHeight),gl[_0x2bfe83(0xaf)](gl[_0x2bfe83(0x88)](program,'render_size'),gl['canvas'][_0x2bfe83(0xa8)],gl[_0x2bfe83(0x92)]['height']),gl[_0x2bfe83(0x8a)](gl[_0x2bfe83(0x88)](program,_0x2bfe83(0x78)),gameWidth/gl[_0x2bfe83(0x92)][_0x2bfe83(0xa8)]),gl[_0x2bfe83(0x8a)](gl[_0x2bfe83(0x88)](program,_0x2bfe83(0x8f)),gameHeight/gl[_0x2bfe83(0x92)][_0x2bfe83(0x9b)]));const _0x3e3b01=gl[_0x2bfe83(0xa5)]();gl[_0x2bfe83(0x9d)](gl['ARRAY_BUFFER'],_0x3e3b01),gl[_0x2bfe83(0x8b)](gl[_0x2bfe83(0x91)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2bfe83(0xab)]),gl['vertexAttribPointer'](gl[_0x2bfe83(0xbd)](program,_0x2bfe83(0xac)),0x2,gl['FLOAT'],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x2bfe83(0xbd)](program,'position'));const _0x1fc7ee=gl[_0x2bfe83(0xa5)]();gl['bindBuffer'](gl[_0x2bfe83(0x91)],_0x1fc7ee),gl[_0x2bfe83(0x8b)](gl[_0x2bfe83(0x91)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2bfe83(0xab)]),gl['vertexAttribPointer'](gl[_0x2bfe83(0xbd)](program,_0x2bfe83(0x85)),0x2,gl[_0x2bfe83(0x9e)],![],0x0,0x0),gl[_0x2bfe83(0x79)](gl[_0x2bfe83(0xbd)](program,_0x2bfe83(0x85)));}function setup2DContext(){const _0x432434=a0_0x26ec;ctx2d=bufferCanvas[_0x432434(0xad)]('2d'),ctx2d[_0x432434(0x80)]=![];}async function renderPixel(_0x4bc1cd){const _0x3e8f07=a0_0x26ec,_0x482995=a0_0x47989b[_0x3e8f07(0x77)]();if(!_0x482995)return;await loadLUT64();const _0x8f07e1=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x53548a=0x0;_0x53548a<gameHeight;_0x53548a++){for(let _0x520b0d=0x0;_0x520b0d<gameWidth;_0x520b0d++){const _0x510f4a=_0x53548a*gameStride+_0x520b0d,_0x204f56=(_0x53548a*gameWidth+_0x520b0d)*0x4,_0x5e7904=_0x482995[_0x510f4a];if(lut64Profile===_0x3e8f07(0x9c))_0x8f07e1[_0x204f56]=_0x5e7904&0xff,_0x8f07e1[_0x204f56+0x1]=_0x5e7904>>0x8&0xff,_0x8f07e1[_0x204f56+0x2]=_0x5e7904>>0x10&0xff,_0x8f07e1[_0x204f56+0x3]=0xff;else{const _0x268d4a=(_0x5e7904&0xff)>>0x2,_0x50439e=(_0x5e7904>>0x8&0xff)>>0x2,_0x3fb561=(_0x5e7904>>0x10&0xff)>>0x2,_0x27bba6=(_0x268d4a*0x40*0x40+_0x50439e*0x40+_0x3fb561)*0x3;_0x8f07e1[_0x204f56]=lut64[_0x27bba6],_0x8f07e1[_0x204f56+0x1]=lut64[_0x27bba6+0x1],_0x8f07e1[_0x204f56+0x2]=lut64[_0x27bba6+0x2],_0x8f07e1[_0x204f56+0x3]=0xff;}}}if(_0x4bc1cd==='webgl')gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x3e8f07(0xb9)],gameWidth,gameHeight,0x0,gl[_0x3e8f07(0xb9)],gl[_0x3e8f07(0xbb)],_0x8f07e1),gl[_0x3e8f07(0x87)](gl[_0x3e8f07(0xa7)]),gl[_0x3e8f07(0xb3)](gl[_0x3e8f07(0xb1)],0x0,0x4);else _0x4bc1cd==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x8f07e1,gameWidth,gameHeight):imageDataObj[_0x3e8f07(0x9a)][_0x3e8f07(0xb2)](_0x8f07e1),ctx2d[_0x3e8f07(0x7b)](0x0,0x0,bufferCanvas[_0x3e8f07(0xa8)],bufferCanvas[_0x3e8f07(0x9b)]),ctx2d[_0x3e8f07(0xa6)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x4bc1cd));}export async function switchRenderMode(_0x4c8587){const _0x14cc0a=a0_0x26ec;systemType=gameName[_0x14cc0a(0x95)](-0x3);if(_0x4c8587==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x4c8587===_0x14cc0a(0xbe))setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(_0x14cc0a(0xbe)),renderPixel(_0x14cc0a(0xbe));else _0x4c8587===_0x14cc0a(0xbc)&&(setupStyle(_0x14cc0a(0xbc)),setupWebGL_Shader(_0x14cc0a(0xbc)),setupTexture_Buffer(_0x14cc0a(0xbc)),renderPixel('webgl'));}}