const a0_0x4b46e1=a0_0x1f81;(function(_0x4d994b,_0x2b8d12){const _0x3e03db=a0_0x1f81,_0x235218=_0x4d994b();while(!![]){try{const _0x1a1307=-parseInt(_0x3e03db(0x9a))/0x1*(-parseInt(_0x3e03db(0x8a))/0x2)+parseInt(_0x3e03db(0xb0))/0x3*(parseInt(_0x3e03db(0xb5))/0x4)+-parseInt(_0x3e03db(0x76))/0x5*(-parseInt(_0x3e03db(0x77))/0x6)+parseInt(_0x3e03db(0xbe))/0x7*(-parseInt(_0x3e03db(0xc8))/0x8)+-parseInt(_0x3e03db(0x74))/0x9*(-parseInt(_0x3e03db(0xb2))/0xa)+-parseInt(_0x3e03db(0xa7))/0xb+parseInt(_0x3e03db(0xab))/0xc*(-parseInt(_0x3e03db(0x9f))/0xd);if(_0x1a1307===_0x2b8d12)break;else _0x235218['push'](_0x235218['shift']());}catch(_0x13d44c){_0x235218['push'](_0x235218['shift']());}}}(a0_0x4c0f,0xd3c28));import*as a0_0x133a14 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0x4b46e1(0xae)),bufferCanvas=document[a0_0x4b46e1(0x7b)](a0_0x4b46e1(0xb3)),canvasContainer=document[a0_0x4b46e1(0x7b)](a0_0x4b46e1(0xc1)),imgShader=document[a0_0x4b46e1(0x7b)](a0_0x4b46e1(0xc9)),settingContainer=document['querySelectorAll'](a0_0x4b46e1(0x9b)),messageContainer=document[a0_0x4b46e1(0x8b)]('.message-container'),stateTitle=document['querySelectorAll']('.stateTitle,\x20.stateDate');async function loadLUT64(){const _0x4b75c2=a0_0x4b46e1;systemType=gameName[_0x4b75c2(0x7a)](-0x3);const _0x528a5d=localStorage[_0x4b75c2(0x98)](gameName+'_streng')||_0x4b75c2(0x95),_0x445de1=(localStorage[_0x4b75c2(0x98)](gameName+_0x4b75c2(0xd6))||_0x4b75c2(0xa5))['toLowerCase']();if(!lut64||lut64Streng!==_0x528a5d||lut64Profile!==_0x445de1){const _0xf84592=_0x4b75c2(0x87)+_0x445de1+'_'+_0x528a5d+_0x4b75c2(0xaa);console[_0x4b75c2(0xc4)](_0xf84592);const _0x2a070e=await fetch(_0xf84592),_0x1ff7a8=await _0x2a070e[_0x4b75c2(0x82)]();lut64=new Uint8Array(_0x1ff7a8),lut64Streng=_0x528a5d,lut64Profile=_0x445de1;}}async function loadShaderSource(_0x3fb4d9){const _0x29e7e6=await fetch(_0x3fb4d9);return await _0x29e7e6['text']();}function setupStyle(_0x2ddb31){const _0x573e96=a0_0x4b46e1;clientWidth=document[_0x573e96(0xba)]['clientWidth'];const _0x25940e=window[_0x573e96(0x97)];systemType===_0x573e96(0xa9)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x573e96(0x8c)](clientWidth*_0x25940e/gameWidth),localStorage[_0x573e96(0xd3)](_0x573e96(0xcf),_0x573e96(0x7e)+gameWidth*(integerScaling/_0x25940e)+','+gameHeight*(integerScaling/_0x25940e))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x573e96(0x8c)](clientWidth*_0x25940e/gameWidth),localStorage['setItem']('screenSize',_0x573e96(0x7e)+gameWidth*(integerScaling/_0x25940e)+','+gameHeight*(integerScaling/_0x25940e)));if(_0x2ddb31==='2d')bufferCanvas[_0x573e96(0xcb)]=gameWidth,bufferCanvas[_0x573e96(0xa2)]=gameHeight,bufferCanvas[_0x573e96(0x89)][_0x573e96(0xca)]=''+integerScaling/_0x25940e,bufferCanvas['style'][_0x573e96(0xcd)]='crisp-edges',canvasContainer[_0x573e96(0x89)][_0x573e96(0xcb)]=gameWidth*(integerScaling/_0x25940e)+'px',canvasContainer['style']['height']=gameHeight*(integerScaling/_0x25940e)+'px',textured[_0x573e96(0x89)][_0x573e96(0xcb)]=gameWidth*(integerScaling/_0x25940e)+'px',textured[_0x573e96(0x89)][_0x573e96(0xa2)]=gameHeight*(integerScaling/_0x25940e)+'px',imgShader['style']['transform']=_0x573e96(0x91)+integerScaling/_0x25940e/upscaleShader+')',settingContainer[_0x573e96(0xaf)](function(_0x483152){const _0xcba5dd=_0x573e96;_0x483152[_0xcba5dd(0x89)][_0xcba5dd(0xcb)]=gameWidth*(integerScaling/_0x25940e)+'px',_0x483152[_0xcba5dd(0x89)]['height']=gameHeight*(integerScaling/_0x25940e)+'px';}),messageContainer[_0x573e96(0xaf)](function(_0x206ee1){const _0x27c1a8=_0x573e96;_0x206ee1[_0x27c1a8(0x89)][_0x27c1a8(0xcb)]=gameWidth+'px',_0x206ee1['style'][_0x27c1a8(0xa2)]=gameHeight+'px',_0x206ee1[_0x27c1a8(0x89)][_0x27c1a8(0xca)]=''+integerScaling/_0x25940e;}),stateTitle[_0x573e96(0xaf)](function(_0x260c97){const _0x1b6106=_0x573e96;_0x260c97[_0x1b6106(0x80)][_0x1b6106(0x7d)](_0x1b6106(0x79));});else _0x2ddb31==='webgl2'&&(bufferCanvas[_0x573e96(0xcb)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x573e96(0x89)][_0x573e96(0xca)]=''+0x1/upscaleFactor,bufferCanvas['style'][_0x573e96(0xcd)]='',canvasContainer[_0x573e96(0x89)][_0x573e96(0xcb)]=clientWidth+'px',canvasContainer[_0x573e96(0x89)][_0x573e96(0xa2)]=clientWidth*(gameHeight/gameWidth)+'px',textured['style'][_0x573e96(0xcb)]=clientWidth+'px',textured['style'][_0x573e96(0xa2)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x573e96(0x89)][_0x573e96(0xcc)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x573e96(0xaf)](function(_0x380ff6){const _0x41a003=_0x573e96;_0x380ff6[_0x41a003(0x89)][_0x41a003(0xcb)]=clientWidth+'px',_0x380ff6[_0x41a003(0x89)][_0x41a003(0xa2)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x573e96(0xaf)](function(_0x53cbc1){const _0x4a44cf=_0x573e96;_0x53cbc1[_0x4a44cf(0x89)][_0x4a44cf(0xcb)]=gameWidth+'px',_0x53cbc1[_0x4a44cf(0x89)][_0x4a44cf(0xa2)]=gameHeight+'px',_0x53cbc1['style'][_0x4a44cf(0xca)]=''+clientWidth/gameWidth;}),stateTitle[_0x573e96(0xaf)](function(_0x1169ef){const _0x4677fc=_0x573e96;_0x1169ef[_0x4677fc(0x80)][_0x4677fc(0xb7)]('fefs');}));imgShader['style'][_0x573e96(0xcb)]=gameWidth*upscaleShader+'px',imgShader[_0x573e96(0x89)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x573e96(0x89)][_0x573e96(0xc0)]=_0x573e96(0xc5),imgShader[_0x573e96(0x89)][_0x573e96(0x86)](_0x573e96(0x9e),upscaleShader+_0x573e96(0xb4)+upscaleShader+'px');}function setupWebGL(){const _0x207332=a0_0x4b46e1;gl=bufferCanvas['getContext']('webgl2');if(!gl)return console[_0x207332(0xa3)]('WebGL2\x20not\x20supported'),null;gl[_0x207332(0x96)](0x0,0x0,bufferCanvas[_0x207332(0xcb)],bufferCanvas['height']);}function createShader(_0x1bbe55,_0x5b9326){const _0x36c519=a0_0x4b46e1,_0xe3cd4c=gl['createShader'](_0x1bbe55);gl[_0x36c519(0xd5)](_0xe3cd4c,_0x5b9326),gl[_0x36c519(0xd0)](_0xe3cd4c);if(!gl[_0x36c519(0xd4)](_0xe3cd4c,gl[_0x36c519(0x7c)]))return console[_0x36c519(0xa3)](gl['getShaderInfoLog'](_0xe3cd4c)),gl[_0x36c519(0xd7)](_0xe3cd4c),null;return _0xe3cd4c;}async function setupShaders(){const _0x5740ef=a0_0x4b46e1,_0x40f738=await loadShaderSource(_0x5740ef(0xa1)),_0x1de022=await loadShaderSource(_0x5740ef(0xb8)),_0x1cdacc=createShader(gl[_0x5740ef(0x81)],_0x40f738),_0x5ab43f=createShader(gl[_0x5740ef(0xd1)],_0x1de022);return program=gl[_0x5740ef(0xb6)](),gl[_0x5740ef(0xbb)](program,_0x1cdacc),gl['attachShader'](program,_0x5ab43f),gl[_0x5740ef(0x92)](program),gl[_0x5740ef(0x8e)](program),program;}function setupTexture(){const _0x5dbdb1=a0_0x4b46e1;texture=gl[_0x5dbdb1(0x84)](),gl[_0x5dbdb1(0xbd)](gl[_0x5dbdb1(0x99)],texture),gl[_0x5dbdb1(0x73)](gl['TEXTURE_2D'],gl[_0x5dbdb1(0x85)],gl['NEAREST']),gl[_0x5dbdb1(0x73)](gl[_0x5dbdb1(0x99)],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl[_0x5dbdb1(0x73)](gl[_0x5dbdb1(0x99)],gl['TEXTURE_WRAP_S'],gl[_0x5dbdb1(0xc6)]),gl[_0x5dbdb1(0x73)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_T'],gl[_0x5dbdb1(0xc6)]),gl[_0x5dbdb1(0xa6)](gl[_0x5dbdb1(0x83)](program,_0x5dbdb1(0xc2)),gameWidth,gameHeight),gl[_0x5dbdb1(0xa6)](gl['getUniformLocation'](program,_0x5dbdb1(0x9d)),gl['canvas']['width'],gl[_0x5dbdb1(0xb3)][_0x5dbdb1(0xa2)]),gl[_0x5dbdb1(0xa4)](gl[_0x5dbdb1(0x83)](program,'smooth_width'),gameWidth/gl[_0x5dbdb1(0xb3)][_0x5dbdb1(0xcb)]),gl[_0x5dbdb1(0xa4)](gl[_0x5dbdb1(0x83)](program,_0x5dbdb1(0xa0)),gameHeight/gl[_0x5dbdb1(0xb3)]['height']);}function setupBuffers(){const _0x507fdf=a0_0x4b46e1,_0x3a06dc=gl['createBuffer']();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x3a06dc),gl[_0x507fdf(0x9c)](gl[_0x507fdf(0x7f)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x570693=gl[_0x507fdf(0x8d)](program,_0x507fdf(0xb9));gl[_0x507fdf(0xd2)](_0x570693),gl[_0x507fdf(0xc7)](_0x570693,0x2,gl[_0x507fdf(0x8f)],![],0x0,0x0);const _0x456b7b=gl[_0x507fdf(0xa8)]();gl[_0x507fdf(0x93)](gl['ARRAY_BUFFER'],_0x456b7b),gl['bufferData'](gl[_0x507fdf(0x7f)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x507fdf(0xb1)]);const _0x380e3f=gl[_0x507fdf(0x8d)](program,_0x507fdf(0xce));gl['enableVertexAttribArray'](_0x380e3f),gl[_0x507fdf(0xc7)](_0x380e3f,0x2,gl[_0x507fdf(0x8f)],![],0x0,0x0);}async function renderPixel(_0x3e5613){const _0xfe3adf=a0_0x4b46e1,_0x34eb3c=a0_0x133a14[_0xfe3adf(0x75)]();if(!_0x34eb3c)return;await loadLUT64();const _0x6aaa43=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5aaf3a=0x0;_0x5aaf3a<gameHeight;_0x5aaf3a++){for(let _0x311a62=0x0;_0x311a62<gameWidth;_0x311a62++){const _0x122ef0=_0x5aaf3a*gameStride+_0x311a62,_0x4674e3=(_0x5aaf3a*gameWidth+_0x311a62)*0x4,_0x44b0aa=_0x34eb3c[_0x122ef0],_0x24513e=(_0x44b0aa&0xff)>>0x2,_0x330bec=(_0x44b0aa>>0x8&0xff)>>0x2,_0x25f070=(_0x44b0aa>>0x10&0xff)>>0x2,_0x4b0648=(_0x24513e*0x40*0x40+_0x330bec*0x40+_0x25f070)*0x3;_0x6aaa43[_0x4674e3]=lut64[_0x4b0648],_0x6aaa43[_0x4674e3+0x1]=lut64[_0x4b0648+0x1],_0x6aaa43[_0x4674e3+0x2]=lut64[_0x4b0648+0x2],_0x6aaa43[_0x4674e3+0x3]=0xff;}}if(_0x3e5613==='webgl2')gl[_0xfe3adf(0xbd)](gl[_0xfe3adf(0x99)],texture),gl[_0xfe3adf(0xad)](gl[_0xfe3adf(0x99)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl['RGBA'],gl['UNSIGNED_BYTE'],_0x6aaa43),gl[_0xfe3adf(0xbc)](gl['COLOR_BUFFER_BIT']),gl[_0xfe3adf(0x94)](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x3e5613==='2d'){ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0xfe3adf(0xac)]=![];const _0x1cfd20=new ImageData(_0x6aaa43,gameWidth,gameHeight);createImageBitmap(_0x1cfd20)[_0xfe3adf(0x90)](_0x3924c5=>{const _0x154ec5=_0xfe3adf;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x154ec5(0xcb)],bufferCanvas[_0x154ec5(0xa2)]),ctx2d[_0x154ec5(0x78)](_0x3924c5,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x3e5613));}function a0_0x1f81(_0xc08074,_0x5d917c){const _0x4c0f59=a0_0x4c0f();return a0_0x1f81=function(_0x1f8152,_0x2eb24b){_0x1f8152=_0x1f8152-0x73;let _0x5cbdc8=_0x4c0f59[_0x1f8152];return _0x5cbdc8;},a0_0x1f81(_0xc08074,_0x5d917c);}export async function switchRenderMode(_0x457039){const _0x4cbd8a=a0_0x4b46e1;systemType=gameName[_0x4cbd8a(0x7a)](-0x3);if(_0x457039==='2d')setupStyle('2d'),renderPixel('2d');else _0x457039===_0x4cbd8a(0xbf)&&(setupStyle(_0x4cbd8a(0xbf)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x4cbd8a(0xbf)));}function a0_0x4c0f(){const _0x52ba39=['transformOrigin','canvas-container','game_size','DOMContentLoaded','log','top\x20center','CLAMP_TO_EDGE','vertexAttribPointer','8VHPZYq','img-shader','zoom','width','transform','imageRendering','texcoord','screenSize','compileShader','FRAGMENT_SHADER','enableVertexAttribArray','setItem','getShaderParameter','shaderSource','_temperature','deleteShader','texParameteri','2363589SxJpvr','getPixelData','568900DEDXYf','90pbHXdT','drawImage','fefs','slice','getElementById','COMPILE_STATUS','remove','0,0,','ARRAY_BUFFER','classList','VERTEX_SHADER','arrayBuffer','getUniformLocation','createTexture','TEXTURE_MIN_FILTER','setProperty','./src/lut/lut64_','addEventListener','style','150754owErkF','querySelectorAll','floor','getAttribLocation','useProgram','FLOAT','then','scale(','linkProgram','bindBuffer','drawArrays','4.0','viewport','devicePixelRatio','getItem','TEXTURE_2D','1OxfwxD','.setting-container','bufferData','render_size','--bg-size','30121039VxjLdc','smooth_height','./src/shaders/vertexShader.glsl','height','error','uniform1f','warm','uniform2f','3690929FxjFgt','createBuffer','gbc','.bin','12gAnyUM','imageSmoothingEnabled','texImage2D','textured','forEach','4394307ALbFaN','STATIC_DRAW','40SqwxGk','canvas','px\x20','4dUPBdV','createProgram','add','./src/shaders/fragmentShader.glsl','position','documentElement','attachShader','clear','bindTexture','5441940KpvlfI','webgl2'];a0_0x4c0f=function(){return _0x52ba39;};return a0_0x4c0f();}document[a0_0x4b46e1(0x88)](a0_0x4b46e1(0xc3),function(){});