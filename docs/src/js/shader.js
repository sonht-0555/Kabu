const a0_0x311e1d=a0_0x2dea;(function(_0x291769,_0x5a5709){const _0x34829f=a0_0x2dea,_0x555caa=_0x291769();while(!![]){try{const _0xb3ed8a=parseInt(_0x34829f(0x187))/0x1+-parseInt(_0x34829f(0x16e))/0x2+parseInt(_0x34829f(0x1c2))/0x3*(-parseInt(_0x34829f(0x1ba))/0x4)+parseInt(_0x34829f(0x1bb))/0x5+parseInt(_0x34829f(0x192))/0x6*(parseInt(_0x34829f(0x18b))/0x7)+-parseInt(_0x34829f(0x184))/0x8+parseInt(_0x34829f(0x197))/0x9;if(_0xb3ed8a===_0x5a5709)break;else _0x555caa['push'](_0x555caa['shift']());}catch(_0x57a8ba){_0x555caa['push'](_0x555caa['shift']());}}}(a0_0x2859,0xcc2e9));import*as a0_0xb6b474 from'./main.js';function a0_0x2dea(_0x10e4da,_0x29875b){const _0x28596d=a0_0x2859();return a0_0x2dea=function(_0x2deab0,_0x5547c5){_0x2deab0=_0x2deab0-0x166;let _0x1bd98f=_0x28596d[_0x2deab0];return _0x1bd98f;},a0_0x2dea(_0x10e4da,_0x29875b);}let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0x311e1d(0x1b0)),bufferCanvas=document[a0_0x311e1d(0x1c6)](a0_0x311e1d(0x195)),canvasContainer=document[a0_0x311e1d(0x1c6)](a0_0x311e1d(0x176)),imgShader=document[a0_0x311e1d(0x1c6)](a0_0x311e1d(0x186)),settingContainer=document[a0_0x311e1d(0x196)](a0_0x311e1d(0x185)),messageContainer=document[a0_0x311e1d(0x196)]('.message-container'),stateTitle=document[a0_0x311e1d(0x196)](a0_0x311e1d(0x16a));async function loadLUT64(){const _0x5de6ae=a0_0x311e1d;systemType=gameName[_0x5de6ae(0x190)](-0x3);const _0x1808fe=localStorage['getItem'](gameName+_0x5de6ae(0x1c3))||_0x5de6ae(0x1ac),_0x4bacee=(localStorage[_0x5de6ae(0x17a)](gameName+_0x5de6ae(0x1ad))||'warm')[_0x5de6ae(0x1cb)]();if(!lut64||lut64Streng!==_0x1808fe||lut64Profile!==_0x4bacee){const _0x3accde='./src/lut/lut64_'+_0x4bacee+'_'+_0x1808fe+'.bin';console['log'](_0x3accde);const _0x1777d3=await fetch(_0x3accde),_0x49c014=await _0x1777d3[_0x5de6ae(0x19e)]();lut64=new Uint8Array(_0x49c014),lut64Streng=_0x1808fe,lut64Profile=_0x4bacee;}}async function loadShaderSource(_0x3091d1){const _0x2ee6b2=a0_0x311e1d,_0x3b6760=await fetch(_0x3091d1);return await _0x3b6760[_0x2ee6b2(0x1a4)]();}function setupStyle(_0x37cc34){const _0x28a08=a0_0x311e1d;clientWidth=document[_0x28a08(0x1c9)][_0x28a08(0x1a3)];const _0x3a9c53=window[_0x28a08(0x177)];systemType===_0x28a08(0x1ca)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x28a08(0x1cc)](clientWidth*_0x3a9c53/gameWidth),localStorage[_0x28a08(0x173)](_0x28a08(0x1b9),_0x28a08(0x175)+gameWidth*(integerScaling/_0x3a9c53)+','+gameHeight*(integerScaling/_0x3a9c53))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x28a08(0x1cc)](clientWidth*_0x3a9c53/gameWidth),localStorage[_0x28a08(0x173)](_0x28a08(0x1b9),'0,0,'+gameWidth*(integerScaling/_0x3a9c53)+','+gameHeight*(integerScaling/_0x3a9c53)));if(_0x37cc34==='2d')bufferCanvas[_0x28a08(0x17d)]=gameWidth,bufferCanvas[_0x28a08(0x1af)]=gameHeight,bufferCanvas['style'][_0x28a08(0x172)]=''+integerScaling/_0x3a9c53,bufferCanvas[_0x28a08(0x1a5)][_0x28a08(0x18a)]=_0x28a08(0x1c1),canvasContainer[_0x28a08(0x1a5)][_0x28a08(0x17d)]=gameWidth*(integerScaling/_0x3a9c53)+'px',canvasContainer[_0x28a08(0x1a5)][_0x28a08(0x1af)]=gameHeight*(integerScaling/_0x3a9c53)+'px',textured[_0x28a08(0x1a5)]['width']=gameWidth*(integerScaling/_0x3a9c53)+'px',textured[_0x28a08(0x1a5)]['height']=gameHeight*(integerScaling/_0x3a9c53)+'px',imgShader[_0x28a08(0x1a5)][_0x28a08(0x18e)]=_0x28a08(0x1c0)+integerScaling/_0x3a9c53/upscaleShader+')',settingContainer[_0x28a08(0x170)](function(_0x3b7ccb){const _0x2ec4af=_0x28a08;_0x3b7ccb[_0x2ec4af(0x1a5)][_0x2ec4af(0x17d)]=gameWidth*(integerScaling/_0x3a9c53)+'px',_0x3b7ccb[_0x2ec4af(0x1a5)]['height']=gameHeight*(integerScaling/_0x3a9c53)+'px';}),messageContainer[_0x28a08(0x170)](function(_0x554cd7){const _0x4543f4=_0x28a08;_0x554cd7['style']['width']=gameWidth+'px',_0x554cd7[_0x4543f4(0x1a5)][_0x4543f4(0x1af)]=gameHeight+'px',_0x554cd7[_0x4543f4(0x1a5)][_0x4543f4(0x172)]=''+integerScaling/_0x3a9c53;}),stateTitle[_0x28a08(0x170)](function(_0x15bdb3){const _0x52dbc5=_0x28a08;_0x15bdb3['classList'][_0x52dbc5(0x1b6)](_0x52dbc5(0x1a8));});else _0x37cc34===_0x28a08(0x174)&&(bufferCanvas[_0x28a08(0x17d)]=clientWidth*upscaleFactor,bufferCanvas[_0x28a08(0x1af)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x28a08(0x1a5)][_0x28a08(0x172)]=''+0x1/upscaleFactor,bufferCanvas[_0x28a08(0x1a5)][_0x28a08(0x18a)]='',canvasContainer[_0x28a08(0x1a5)][_0x28a08(0x17d)]=clientWidth+'px',canvasContainer[_0x28a08(0x1a5)]['height']=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x28a08(0x1a5)][_0x28a08(0x17d)]=clientWidth+'px',textured[_0x28a08(0x1a5)][_0x28a08(0x1af)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style'][_0x28a08(0x18e)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x28a08(0x170)](function(_0xceee56){const _0x55347d=_0x28a08;_0xceee56[_0x55347d(0x1a5)]['width']=clientWidth+'px',_0xceee56[_0x55347d(0x1a5)][_0x55347d(0x1af)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x28a08(0x170)](function(_0x3d24ca){const _0x28faf3=_0x28a08;_0x3d24ca[_0x28faf3(0x1a5)][_0x28faf3(0x17d)]=gameWidth+'px',_0x3d24ca[_0x28faf3(0x1a5)][_0x28faf3(0x1af)]=gameHeight+'px',_0x3d24ca['style'][_0x28faf3(0x172)]=''+clientWidth/gameWidth;}),stateTitle[_0x28a08(0x170)](function(_0x4ad040){const _0x5e1162=_0x28a08;_0x4ad040[_0x5e1162(0x19d)][_0x5e1162(0x188)](_0x5e1162(0x1a8));}));imgShader[_0x28a08(0x1a5)][_0x28a08(0x17d)]=gameWidth*upscaleShader+'px',imgShader[_0x28a08(0x1a5)][_0x28a08(0x1af)]=gameHeight*upscaleShader+'px',imgShader[_0x28a08(0x1a5)][_0x28a08(0x1c4)]=_0x28a08(0x193),imgShader[_0x28a08(0x1a5)]['setProperty']('--bg-size',upscaleShader+_0x28a08(0x1ab)+upscaleShader+'px');}function a0_0x2859(){const _0x37e111=['6124945CoJBku','texcoord','createTexture','getPixelData','getShaderParameter','scale(','crisp-edges','938172axChMl','_streng','transformOrigin','TEXTURE_WRAP_S','getElementById','texParameteri','createProgram','documentElement','gbc','toLowerCase','floor','getAttribLocation','smooth_width','drawImage','getContext','.stateTitle,\x20.stateDate','addEventListener','CLAMP_TO_EDGE','vertexAttribPointer','407540ZwNVFn','game_size','forEach','enableVertexAttribArray','zoom','setItem','webgl2','0,0,','canvas-container','devicePixelRatio','VERTEX_SHADER','clear','getItem','bindTexture','COMPILE_STATUS','width','TEXTURE_MIN_FILTER','attachShader','getShaderInfoLog','UNSIGNED_BYTE','TEXTURE_MAG_FILTER','createShader','5751928bVqTOH','.setting-container','img-shader','150264KGpVwY','add','bindBuffer','imageRendering','350kgjLut','createBuffer','ARRAY_BUFFER','transform','deleteShader','slice','STATIC_DRAW','39318GCIaAl','top\x20center','uniform1f','canvas','querySelectorAll','6134715faeDnE','linkProgram','error','./src/shaders/vertexShader.glsl','render_size','uniform2f','classList','arrayBuffer','WebGL2\x20not\x20supported','compileShader','smooth_height','RGBA','clientWidth','text','style','shaderSource','clearRect','fefs','getUniformLocation','position','px\x20','4.0','_temperature','./src/shaders/fragmentShader.glsl','height','textured','TEXTURE_2D','COLOR_BUFFER_BIT','useProgram','bufferData','TEXTURE_WRAP_T','remove','FLOAT','texImage2D','screenSize','8VISVbV'];a0_0x2859=function(){return _0x37e111;};return a0_0x2859();}function setupWebGL(){const _0x40cf9f=a0_0x311e1d;gl=bufferCanvas[_0x40cf9f(0x169)](_0x40cf9f(0x174));if(!gl)return console[_0x40cf9f(0x199)](_0x40cf9f(0x19f)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x40cf9f(0x17d)],bufferCanvas[_0x40cf9f(0x1af)]);}function createShader(_0xfb75c9,_0x47ca9b){const _0x5eb136=a0_0x311e1d,_0x3cc42e=gl[_0x5eb136(0x183)](_0xfb75c9);gl[_0x5eb136(0x1a6)](_0x3cc42e,_0x47ca9b),gl[_0x5eb136(0x1a0)](_0x3cc42e);if(!gl[_0x5eb136(0x1bf)](_0x3cc42e,gl[_0x5eb136(0x17c)]))return console[_0x5eb136(0x199)](gl[_0x5eb136(0x180)](_0x3cc42e)),gl[_0x5eb136(0x18f)](_0x3cc42e),null;return _0x3cc42e;}async function setupShaders(){const _0x97279b=a0_0x311e1d,_0xa1e864=await loadShaderSource(_0x97279b(0x19a)),_0xe3fc67=await loadShaderSource(_0x97279b(0x1ae)),_0x4ec887=createShader(gl[_0x97279b(0x178)],_0xa1e864),_0x5467b4=createShader(gl['FRAGMENT_SHADER'],_0xe3fc67);return program=gl[_0x97279b(0x1c8)](),gl['attachShader'](program,_0x4ec887),gl[_0x97279b(0x17f)](program,_0x5467b4),gl[_0x97279b(0x198)](program),gl[_0x97279b(0x1b3)](program),program;}function setupTexture(){const _0x2cafc7=a0_0x311e1d;texture=gl[_0x2cafc7(0x1bd)](),gl['bindTexture'](gl[_0x2cafc7(0x1b1)],texture),gl[_0x2cafc7(0x1c7)](gl[_0x2cafc7(0x1b1)],gl[_0x2cafc7(0x17e)],gl['NEAREST']),gl[_0x2cafc7(0x1c7)](gl['TEXTURE_2D'],gl[_0x2cafc7(0x182)],gl['NEAREST']),gl['texParameteri'](gl[_0x2cafc7(0x1b1)],gl[_0x2cafc7(0x1c5)],gl[_0x2cafc7(0x16c)]),gl[_0x2cafc7(0x1c7)](gl[_0x2cafc7(0x1b1)],gl[_0x2cafc7(0x1b5)],gl[_0x2cafc7(0x16c)]),gl[_0x2cafc7(0x19c)](gl[_0x2cafc7(0x1a9)](program,_0x2cafc7(0x16f)),gameWidth,gameHeight),gl[_0x2cafc7(0x19c)](gl[_0x2cafc7(0x1a9)](program,_0x2cafc7(0x19b)),gl[_0x2cafc7(0x195)]['width'],gl[_0x2cafc7(0x195)][_0x2cafc7(0x1af)]),gl['uniform1f'](gl[_0x2cafc7(0x1a9)](program,_0x2cafc7(0x167)),gameWidth/gl[_0x2cafc7(0x195)][_0x2cafc7(0x17d)]),gl[_0x2cafc7(0x194)](gl[_0x2cafc7(0x1a9)](program,_0x2cafc7(0x1a1)),gameHeight/gl[_0x2cafc7(0x195)][_0x2cafc7(0x1af)]);}function setupBuffers(){const _0x30aa00=a0_0x311e1d,_0xa9ccfa=gl[_0x30aa00(0x18c)]();gl[_0x30aa00(0x189)](gl[_0x30aa00(0x18d)],_0xa9ccfa),gl[_0x30aa00(0x1b4)](gl[_0x30aa00(0x18d)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x30aa00(0x191)]);const _0x1be822=gl[_0x30aa00(0x166)](program,_0x30aa00(0x1aa));gl[_0x30aa00(0x171)](_0x1be822),gl[_0x30aa00(0x16d)](_0x1be822,0x2,gl[_0x30aa00(0x1b7)],![],0x0,0x0);const _0x41f286=gl[_0x30aa00(0x18c)]();gl[_0x30aa00(0x189)](gl['ARRAY_BUFFER'],_0x41f286),gl[_0x30aa00(0x1b4)](gl[_0x30aa00(0x18d)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x30aa00(0x191)]);const _0x122b9e=gl[_0x30aa00(0x166)](program,_0x30aa00(0x1bc));gl[_0x30aa00(0x171)](_0x122b9e),gl[_0x30aa00(0x16d)](_0x122b9e,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0x39bb2b){const _0x14a970=a0_0x311e1d,_0xe5f584=a0_0xb6b474[_0x14a970(0x1be)]();if(!_0xe5f584)return;await loadLUT64();const _0x3a5874=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x56ae38=0x0;_0x56ae38<gameHeight;_0x56ae38++){for(let _0x270ec1=0x0;_0x270ec1<gameWidth;_0x270ec1++){const _0xd49190=_0x56ae38*gameStride+_0x270ec1,_0x351fca=(_0x56ae38*gameWidth+_0x270ec1)*0x4,_0x503033=_0xe5f584[_0xd49190],_0x2391a2=(_0x503033&0xff)>>0x2,_0x37676a=(_0x503033>>0x8&0xff)>>0x2,_0xd027e7=(_0x503033>>0x10&0xff)>>0x2,_0x3dd841=(_0x2391a2*0x40*0x40+_0x37676a*0x40+_0xd027e7)*0x3;_0x3a5874[_0x351fca]=lut64[_0x3dd841],_0x3a5874[_0x351fca+0x1]=lut64[_0x3dd841+0x1],_0x3a5874[_0x351fca+0x2]=lut64[_0x3dd841+0x2],_0x3a5874[_0x351fca+0x3]=0xff;}}if(_0x39bb2b===_0x14a970(0x174))gl[_0x14a970(0x17b)](gl['TEXTURE_2D'],texture),gl[_0x14a970(0x1b8)](gl[_0x14a970(0x1b1)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x14a970(0x1a2)],gl[_0x14a970(0x181)],_0x3a5874),gl[_0x14a970(0x179)](gl[_0x14a970(0x1b2)]),gl['drawArrays'](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x39bb2b==='2d'){ctx2d=bufferCanvas[_0x14a970(0x169)]('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x410f64=new ImageData(_0x3a5874,gameWidth,gameHeight);createImageBitmap(_0x410f64)['then'](_0x124f53=>{const _0x303811=_0x14a970;ctx2d[_0x303811(0x1a7)](0x0,0x0,bufferCanvas[_0x303811(0x17d)],bufferCanvas[_0x303811(0x1af)]),ctx2d[_0x303811(0x168)](_0x124f53,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x39bb2b));}export async function switchRenderMode(_0x53f5dc){const _0x599eff=a0_0x311e1d;systemType=gameName[_0x599eff(0x190)](-0x3);if(_0x53f5dc==='2d')setupStyle('2d'),renderPixel('2d');else _0x53f5dc===_0x599eff(0x174)&&(setupStyle('webgl2'),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x599eff(0x174)));}document[a0_0x311e1d(0x16b)]('DOMContentLoaded',function(){});