function a0_0x471c(){const _0x38fbed=['createProgram','TEXTURE_MIN_FILTER','TEXTURE_WRAP_T','NEAREST','putImageData','width','smooth_width','webgl_full','TEXTURE_MAG_FILTER','568555DiKGIn','COLOR_BUFFER_BIT','TEXTURE_2D','texParameteri','viewport','11837619CDOHLI','uniform2f','useProgram','STATIC_DRAW','10bmbtvI','set','1535304ITdYbp','724554vRPxqc','render_size','createShader','CLAMP_TO_EDGE','61537bHSfiC','getContext','position','_temperature','186376BVWKVu','FLOAT','bufferData','enableVertexAttribArray','RGBA','uniform1f','shaderSource','slice','204bIeFvh','VERTEX_SHADER','attachShader','getPixelData','none','createBuffer','log','texcoord','bindTexture','data','webgl','low-power','imageSmoothingEnabled','ARRAY_BUFFER','getUniformLocation','drawArrays','368950JgylAj','clearRect','game_size','getAttribLocation','90uPCkdh','linkProgram','UNSIGNED_BYTE','bindBuffer','FRAGMENT_SHADER','canvas','height','clear','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','getItem','vertexAttribPointer','toLowerCase','TRIANGLE_STRIP'];a0_0x471c=function(){return _0x38fbed;};return a0_0x471c();}(function(_0x12da57,_0x4d4436){const _0x771367=a0_0x260c,_0x4bbbe5=_0x12da57();while(!![]){try{const _0x597de0=-parseInt(_0x771367(0x95))/0x1+-parseInt(_0x771367(0xc1))/0x2+parseInt(_0x771367(0xa1))/0x3+-parseInt(_0x771367(0xa9))/0x4*(parseInt(_0x771367(0xc5))/0x5)+parseInt(_0x771367(0xb1))/0x6*(parseInt(_0x771367(0xa5))/0x7)+parseInt(_0x771367(0xa0))/0x8+parseInt(_0x771367(0x9a))/0x9*(parseInt(_0x771367(0x9e))/0xa);if(_0x597de0===_0x4d4436)break;else _0x4bbbe5['push'](_0x4bbbe5['shift']());}catch(_0x4d385b){_0x4bbbe5['push'](_0x4bbbe5['shift']());}}}(a0_0x471c,0x6f4d6));import*as a0_0x26f287 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x260c(_0x322f6c,_0x2e1cef){const _0x471cb8=a0_0x471c();return a0_0x260c=function(_0x260cec,_0x354d0f){_0x260cec=_0x260cec-0x90;let _0x221c1f=_0x471cb8[_0x260cec];return _0x221c1f;},a0_0x260c(_0x322f6c,_0x2e1cef);}async function loadLUT64(){const _0x4aa0be=a0_0x260c;systemType=gameName[_0x4aa0be(0xb0)](-0x3);const _0x1f45b7=(localStorage[_0x4aa0be(0xce)](gameName+_0x4aa0be(0xa8))||_0x4aa0be(0xb5))[_0x4aa0be(0xd0)]();if(!lut64||lut64Profile!==_0x1f45b7){const _0x1e2ed0='./src/lut/lut64_'+_0x1f45b7+'_4.0.bin';console[_0x4aa0be(0xb7)](_0x1e2ed0);const _0x1e2c2c=await fetch(_0x1e2ed0),_0x38edf1=await _0x1e2c2c['arrayBuffer']();lut64=new Uint8Array(_0x38edf1),lut64Profile=_0x1f45b7;}}function setupWebGL_Shader(_0x5222f5){const _0x3a234d=a0_0x260c;gl=bufferCanvas[_0x3a234d(0xa6)](_0x3a234d(0xbb),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x3a234d(0xbc)}),gl[_0x3a234d(0x99)](0x0,0x0,bufferCanvas[_0x3a234d(0x91)],bufferCanvas[_0x3a234d(0xcb)]);function _0x4c75d6(_0x247476,_0xaf523c){const _0x5b4b3b=_0x3a234d,_0x69ab1=gl[_0x5b4b3b(0xa3)](_0x247476);return gl[_0x5b4b3b(0xaf)](_0x69ab1,_0xaf523c),gl['compileShader'](_0x69ab1),_0x69ab1;}vs=_0x3a234d(0xcd);if(_0x5222f5==='webgl')fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x5222f5===_0x3a234d(0x93)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x205ab9=_0x4c75d6(gl[_0x3a234d(0xb2)],vs),_0x2dc64f=_0x4c75d6(gl[_0x3a234d(0xc9)],fs);return program=gl[_0x3a234d(0xd2)](),gl[_0x3a234d(0xb3)](program,_0x205ab9),gl['attachShader'](program,_0x2dc64f),gl[_0x3a234d(0xc6)](program),gl[_0x3a234d(0x9c)](program),program;}function setupTexture_Buffer(_0x3cecf0){const _0x18ebe0=a0_0x260c;texture=gl['createTexture'](),gl[_0x18ebe0(0xb9)](gl[_0x18ebe0(0x97)],texture),gl[_0x18ebe0(0x98)](gl[_0x18ebe0(0x97)],gl[_0x18ebe0(0xd3)],gl['NEAREST']),gl['texParameteri'](gl[_0x18ebe0(0x97)],gl[_0x18ebe0(0x94)],gl[_0x18ebe0(0xd5)]),gl[_0x18ebe0(0x98)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0x18ebe0(0xa4)]),gl[_0x18ebe0(0x98)](gl['TEXTURE_2D'],gl[_0x18ebe0(0xd4)],gl[_0x18ebe0(0xa4)]);_0x3cecf0===_0x18ebe0(0x93)&&(gl[_0x18ebe0(0x9b)](gl['getUniformLocation'](program,_0x18ebe0(0xc3)),gameWidth,gameHeight),gl[_0x18ebe0(0x9b)](gl[_0x18ebe0(0xbf)](program,_0x18ebe0(0xa2)),gl[_0x18ebe0(0xca)][_0x18ebe0(0x91)],gl[_0x18ebe0(0xca)][_0x18ebe0(0xcb)]),gl['uniform1f'](gl[_0x18ebe0(0xbf)](program,_0x18ebe0(0x92)),gameWidth/gl['canvas'][_0x18ebe0(0x91)]),gl[_0x18ebe0(0xae)](gl['getUniformLocation'](program,'smooth_height'),gameHeight/gl[_0x18ebe0(0xca)]['height']));const _0x5667db=gl['createBuffer']();gl[_0x18ebe0(0xc8)](gl[_0x18ebe0(0xbe)],_0x5667db),gl[_0x18ebe0(0xab)](gl[_0x18ebe0(0xbe)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x18ebe0(0x9d)]),gl[_0x18ebe0(0xcf)](gl[_0x18ebe0(0xc4)](program,_0x18ebe0(0xa7)),0x2,gl[_0x18ebe0(0xaa)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x18ebe0(0xc4)](program,'position'));const _0x41e320=gl[_0x18ebe0(0xb6)]();gl[_0x18ebe0(0xc8)](gl['ARRAY_BUFFER'],_0x41e320),gl[_0x18ebe0(0xab)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x18ebe0(0x9d)]),gl['vertexAttribPointer'](gl['getAttribLocation'](program,_0x18ebe0(0xb8)),0x2,gl[_0x18ebe0(0xaa)],![],0x0,0x0),gl[_0x18ebe0(0xac)](gl[_0x18ebe0(0xc4)](program,'texcoord'));}function setup2DContext(){const _0x41a499=a0_0x260c;ctx2d=bufferCanvas[_0x41a499(0xa6)]('2d'),ctx2d[_0x41a499(0xbd)]=![];}async function renderPixel(_0xd357c3){const _0xf240ff=a0_0x260c,_0x39abd6=a0_0x26f287[_0xf240ff(0xb4)]();if(!_0x39abd6)return;await loadLUT64();const _0x49108f=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x47be49=0x0;_0x47be49<gameHeight;_0x47be49++){for(let _0x9b9a5e=0x0;_0x9b9a5e<gameWidth;_0x9b9a5e++){const _0x30ca18=_0x47be49*gameStride+_0x9b9a5e,_0x360fa4=(_0x47be49*gameWidth+_0x9b9a5e)*0x4,_0xb2d46d=_0x39abd6[_0x30ca18];if(lut64Profile==='none')_0x49108f[_0x360fa4]=_0xb2d46d&0xff,_0x49108f[_0x360fa4+0x1]=_0xb2d46d>>0x8&0xff,_0x49108f[_0x360fa4+0x2]=_0xb2d46d>>0x10&0xff,_0x49108f[_0x360fa4+0x3]=0xff;else{const _0x3907e0=(_0xb2d46d&0xff)>>0x2,_0xcf5126=(_0xb2d46d>>0x8&0xff)>>0x2,_0x16d98f=(_0xb2d46d>>0x10&0xff)>>0x2,_0x3409d9=(_0x3907e0*0x40*0x40+_0xcf5126*0x40+_0x16d98f)*0x3;_0x49108f[_0x360fa4]=lut64[_0x3409d9],_0x49108f[_0x360fa4+0x1]=lut64[_0x3409d9+0x1],_0x49108f[_0x360fa4+0x2]=lut64[_0x3409d9+0x2],_0x49108f[_0x360fa4+0x3]=0xff;}}}if(_0xd357c3==='webgl')gl['texImage2D'](gl[_0xf240ff(0x97)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0xf240ff(0xad)],gl[_0xf240ff(0xc7)],_0x49108f),gl[_0xf240ff(0xcc)](gl[_0xf240ff(0x96)]),gl[_0xf240ff(0xc0)](gl[_0xf240ff(0xd1)],0x0,0x4);else _0xd357c3==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x49108f,gameWidth,gameHeight):imageDataObj[_0xf240ff(0xba)][_0xf240ff(0x9f)](_0x49108f),ctx2d[_0xf240ff(0xc2)](0x0,0x0,bufferCanvas[_0xf240ff(0x91)],bufferCanvas[_0xf240ff(0xcb)]),ctx2d[_0xf240ff(0x90)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0xd357c3));}export async function switchRenderMode(_0x5a9c52){const _0x4294e0=a0_0x260c;systemType=gameName[_0x4294e0(0xb0)](-0x3);if(_0x5a9c52==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x5a9c52==='webgl')setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer('webgl'),renderPixel(_0x4294e0(0xbb));else _0x5a9c52===_0x4294e0(0x93)&&(setupStyle(_0x4294e0(0x93)),setupWebGL_Shader(_0x4294e0(0x93)),setupTexture_Buffer(_0x4294e0(0x93)),renderPixel(_0x4294e0(0xbb)));}}