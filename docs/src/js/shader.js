(function(_0x1e118a,_0x512d22){const _0x75b06f=a0_0x2756,_0x1eb848=_0x1e118a();while(!![]){try{const _0x390e30=parseInt(_0x75b06f(0x124))/0x1*(parseInt(_0x75b06f(0x13c))/0x2)+parseInt(_0x75b06f(0x12c))/0x3*(parseInt(_0x75b06f(0x115))/0x4)+parseInt(_0x75b06f(0x113))/0x5*(parseInt(_0x75b06f(0x11b))/0x6)+-parseInt(_0x75b06f(0x14f))/0x7*(parseInt(_0x75b06f(0x129))/0x8)+parseInt(_0x75b06f(0x13b))/0x9*(parseInt(_0x75b06f(0x145))/0xa)+-parseInt(_0x75b06f(0x140))/0xb+-parseInt(_0x75b06f(0x118))/0xc;if(_0x390e30===_0x512d22)break;else _0x1eb848['push'](_0x1eb848['shift']());}catch(_0xf8807d){_0x1eb848['push'](_0x1eb848['shift']());}}}(a0_0x2833,0x3c96b));function a0_0x2756(_0x27b036,_0x865e5d){const _0x28339d=a0_0x2833();return a0_0x2756=function(_0x2756fe,_0x220dfe){_0x2756fe=_0x2756fe-0x10e;let _0x2ddab6=_0x28339d[_0x2756fe];return _0x2ddab6;},a0_0x2756(_0x27b036,_0x865e5d);}import*as a0_0x304ce0 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x2833(){const _0x42c9a3=['11898RyWrTP','NEAREST','linkProgram','attachShader','TEXTURE_WRAP_S','compileShader','STATIC_DRAW','arrayBuffer','bufferData','11YmslBp','position','TRIANGLE_STRIP','_temperature','slice','5752YWzajL','VERTEX_SHADER','smooth_height','879XgKBmW','clearRect','low-power','TEXTURE_MAG_FILTER','game_size','log','webgl','canvas','_4.0.bin','createBuffer','shaderSource','createTexture','imageSmoothingEnabled','none','ARRAY_BUFFER','7632DPiwNp','79866sxKGlH','getUniformLocation','uniform2f','data','3541340DYLvKE','enableVertexAttribArray','drawArrays','createShader','RGBA','3190GPHNzu','bindBuffer','TEXTURE_MIN_FILTER','set','TEXTURE_2D','UNSIGNED_BYTE','getPixelData','texImage2D','uniform1f','height','1267guVKfE','getItem','texcoord','webgl_full','CLAMP_TO_EDGE','width','getAttribLocation','getContext','1135KSpurj','createProgram','4WcjmAU','texParameteri','TEXTURE_WRAP_T','5519508vKNFAa','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','FLOAT'];a0_0x2833=function(){return _0x42c9a3;};return a0_0x2833();}async function loadLUT64(){const _0x2f7871=a0_0x2756;systemType=gameName[_0x2f7871(0x128)](-0x3);const _0x38aba0=(localStorage[_0x2f7871(0x150)](gameName+_0x2f7871(0x127))||'none')['toLowerCase']();if(!lut64||lut64Profile!==_0x38aba0){const _0x3c8466='./src/lut/lut64_'+_0x38aba0+_0x2f7871(0x134);console[_0x2f7871(0x131)](_0x3c8466);const _0x4ca105=await fetch(_0x3c8466),_0x13945f=await _0x4ca105[_0x2f7871(0x122)]();lut64=new Uint8Array(_0x13945f),lut64Profile=_0x38aba0;}}function setupWebGL_Shader(_0x135ab5){const _0x4fc51e=a0_0x2756;gl=bufferCanvas[_0x4fc51e(0x112)](_0x4fc51e(0x132),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x4fc51e(0x12e)}),gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x4fc51e(0x14e)]);function _0x47bec6(_0x1e394a,_0x41149b){const _0x5ce34f=_0x4fc51e,_0x2e0b82=gl[_0x5ce34f(0x143)](_0x1e394a);return gl[_0x5ce34f(0x136)](_0x2e0b82,_0x41149b),gl[_0x5ce34f(0x120)](_0x2e0b82),_0x2e0b82;}vs=_0x4fc51e(0x119);if(_0x135ab5===_0x4fc51e(0x132))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x135ab5===_0x4fc51e(0x10e)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x142493=_0x47bec6(gl[_0x4fc51e(0x12a)],vs),_0x17cf8a=_0x47bec6(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x4fc51e(0x114)](),gl[_0x4fc51e(0x11e)](program,_0x142493),gl[_0x4fc51e(0x11e)](program,_0x17cf8a),gl[_0x4fc51e(0x11d)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x42fc7b){const _0x56f749=a0_0x2756;texture=gl[_0x56f749(0x137)](),gl['bindTexture'](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x56f749(0x147)],gl[_0x56f749(0x11c)]),gl[_0x56f749(0x116)](gl[_0x56f749(0x149)],gl[_0x56f749(0x12f)],gl[_0x56f749(0x11c)]),gl[_0x56f749(0x116)](gl[_0x56f749(0x149)],gl[_0x56f749(0x11f)],gl['CLAMP_TO_EDGE']),gl[_0x56f749(0x116)](gl['TEXTURE_2D'],gl[_0x56f749(0x117)],gl[_0x56f749(0x10f)]);_0x42fc7b==='webgl_full'&&(gl['uniform2f'](gl[_0x56f749(0x13d)](program,_0x56f749(0x130)),gameWidth,gameHeight),gl[_0x56f749(0x13e)](gl[_0x56f749(0x13d)](program,'render_size'),gl['canvas']['width'],gl['canvas'][_0x56f749(0x14e)]),gl['uniform1f'](gl[_0x56f749(0x13d)](program,'smooth_width'),gameWidth/gl[_0x56f749(0x133)][_0x56f749(0x110)]),gl[_0x56f749(0x14d)](gl[_0x56f749(0x13d)](program,_0x56f749(0x12b)),gameHeight/gl[_0x56f749(0x133)][_0x56f749(0x14e)]));const _0x58aaf5=gl[_0x56f749(0x135)]();gl[_0x56f749(0x146)](gl[_0x56f749(0x13a)],_0x58aaf5),gl[_0x56f749(0x123)](gl[_0x56f749(0x13a)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x56f749(0x121)]),gl['vertexAttribPointer'](gl[_0x56f749(0x111)](program,'position'),0x2,gl[_0x56f749(0x11a)],![],0x0,0x0),gl[_0x56f749(0x141)](gl[_0x56f749(0x111)](program,_0x56f749(0x125)));const _0x496be2=gl[_0x56f749(0x135)]();gl[_0x56f749(0x146)](gl[_0x56f749(0x13a)],_0x496be2),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x56f749(0x121)]),gl['vertexAttribPointer'](gl[_0x56f749(0x111)](program,'texcoord'),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x56f749(0x141)](gl[_0x56f749(0x111)](program,_0x56f749(0x151)));}function setup2DContext(){const _0x577376=a0_0x2756;ctx2d=bufferCanvas[_0x577376(0x112)]('2d'),ctx2d[_0x577376(0x138)]=![];}async function renderPixel(_0x32d767){const _0x41d2fa=a0_0x2756,_0x4d995b=a0_0x304ce0[_0x41d2fa(0x14b)]();if(!_0x4d995b)return;await loadLUT64();const _0x3f6ac0=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5306fa=0x0;_0x5306fa<gameHeight;_0x5306fa++){for(let _0x142133=0x0;_0x142133<gameWidth;_0x142133++){const _0x42b995=_0x5306fa*gameStride+_0x142133,_0x1e9416=(_0x5306fa*gameWidth+_0x142133)*0x4,_0x3e460f=_0x4d995b[_0x42b995];if(lut64Profile===_0x41d2fa(0x139))_0x3f6ac0[_0x1e9416]=_0x3e460f&0xff,_0x3f6ac0[_0x1e9416+0x1]=_0x3e460f>>0x8&0xff,_0x3f6ac0[_0x1e9416+0x2]=_0x3e460f>>0x10&0xff,_0x3f6ac0[_0x1e9416+0x3]=0xff;else{const _0xe08558=(_0x3e460f&0xff)>>0x2,_0x1ad331=(_0x3e460f>>0x8&0xff)>>0x2,_0x3e723e=(_0x3e460f>>0x10&0xff)>>0x2,_0x267dbb=(_0xe08558*0x40*0x40+_0x1ad331*0x40+_0x3e723e)*0x3;_0x3f6ac0[_0x1e9416]=lut64[_0x267dbb],_0x3f6ac0[_0x1e9416+0x1]=lut64[_0x267dbb+0x1],_0x3f6ac0[_0x1e9416+0x2]=lut64[_0x267dbb+0x2],_0x3f6ac0[_0x1e9416+0x3]=0xff;}}}if(_0x32d767===_0x41d2fa(0x132))gl[_0x41d2fa(0x14c)](gl[_0x41d2fa(0x149)],0x0,gl[_0x41d2fa(0x144)],gameWidth,gameHeight,0x0,gl[_0x41d2fa(0x144)],gl[_0x41d2fa(0x14a)],_0x3f6ac0),gl['clear'](gl['COLOR_BUFFER_BIT']),gl[_0x41d2fa(0x142)](gl[_0x41d2fa(0x126)],0x0,0x4);else _0x32d767==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x3f6ac0,gameWidth,gameHeight):imageDataObj[_0x41d2fa(0x13f)][_0x41d2fa(0x148)](_0x3f6ac0),ctx2d[_0x41d2fa(0x12d)](0x0,0x0,bufferCanvas[_0x41d2fa(0x110)],bufferCanvas[_0x41d2fa(0x14e)]),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x32d767));}export async function switchRenderMode(_0x57aa66){const _0x3580d2=a0_0x2756;systemType=gameName['slice'](-0x3);if(_0x57aa66==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x57aa66===_0x3580d2(0x132))setupStyle('2d'),setupWebGL_Shader(_0x3580d2(0x132)),setupTexture_Buffer(_0x3580d2(0x132)),renderPixel(_0x3580d2(0x132));else _0x57aa66===_0x3580d2(0x10e)&&(setupStyle(_0x3580d2(0x10e)),setupWebGL_Shader(_0x3580d2(0x10e)),setupTexture_Buffer(_0x3580d2(0x10e)),renderPixel(_0x3580d2(0x132)));}}