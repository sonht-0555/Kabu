const a0_0xad0494=a0_0x1564;(function(_0x3e7721,_0x38b9cc){const _0x17dee3=a0_0x1564,_0x575232=_0x3e7721();while(!![]){try{const _0x1c1c8c=-parseInt(_0x17dee3(0xb3))/0x1*(-parseInt(_0x17dee3(0xbe))/0x2)+-parseInt(_0x17dee3(0xc7))/0x3+-parseInt(_0x17dee3(0xca))/0x4+-parseInt(_0x17dee3(0x77))/0x5*(-parseInt(_0x17dee3(0xb8))/0x6)+parseInt(_0x17dee3(0x9e))/0x7+-parseInt(_0x17dee3(0x75))/0x8*(-parseInt(_0x17dee3(0xb5))/0x9)+-parseInt(_0x17dee3(0x8d))/0xa;if(_0x1c1c8c===_0x38b9cc)break;else _0x575232['push'](_0x575232['shift']());}catch(_0x49a981){_0x575232['push'](_0x575232['shift']());}}}(a0_0x208b,0xf3531));function a0_0x1564(_0x194df2,_0x46d8b7){const _0x208be6=a0_0x208b();return a0_0x1564=function(_0x156486,_0x5e5aab){_0x156486=_0x156486-0x6d;let _0x3323d7=_0x208be6[_0x156486];return _0x3323d7;},a0_0x1564(_0x194df2,_0x46d8b7);}import*as a0_0x2e086b from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0xad0494(0x91)),bufferCanvas=document[a0_0xad0494(0xd1)](a0_0xad0494(0xa8)),canvasContainer=document[a0_0xad0494(0xd1)](a0_0xad0494(0xcb)),imgShader=document[a0_0xad0494(0xd1)](a0_0xad0494(0x97)),settingContainer=document[a0_0xad0494(0xb0)](a0_0xad0494(0x80)),messageContainer=document[a0_0xad0494(0xb0)]('.message-container'),stateTitle=document['querySelectorAll']('.stateTitle,\x20.stateDate');function a0_0x208b(){const _0x461a83=['imageRendering','createBuffer','bufferData','classList','querySelectorAll','slice','smooth_width','141464dzVudo','drawArrays','9jRWMEK','.bin','width','11456778OqEngF','clearRect','uniform2f','_streng','0,0,','NEAREST','20gKmxYy','getUniformLocation','top\x20center','uniform1f','warm','./src/shaders/fragmentShader.glsl','height','webgl2','shaderSource','1883541PydZTy','4.0','render_size','4089492yJvwzb','canvas-container','setProperty','getItem','TEXTURE_WRAP_S','px\x20','fefs','getElementById','deleteShader','_temperature','bindTexture','remove','./src/lut/lut64_','COLOR_BUFFER_BIT','smooth_height','arrayBuffer','game_size','10969480nUYTjd','vertexAttribPointer','5OZXlPQ','scale(','RGBA','getPixelData','position','clientWidth','texParameteri','addEventListener','getShaderInfoLog','.setting-container','screenSize','useProgram','forEach','UNSIGNED_BYTE','style','COMPILE_STATUS','compileShader','texcoord','crisp-edges','viewport','floor','DOMContentLoaded','35817900PAPbpb','imageSmoothingEnabled','enableVertexAttribArray','FLOAT','textured','drawImage','text','gbc','WebGL2\x20not\x20supported','toLowerCase','img-shader','attachShader','error','ARRAY_BUFFER','bindBuffer','texImage2D','setItem','10733653FHRzwM','VERTEX_SHADER','documentElement','devicePixelRatio','add','TEXTURE_2D','getShaderParameter','getContext','getAttribLocation','number','canvas','data','CLAMP_TO_EDGE','zoom'];a0_0x208b=function(){return _0x461a83;};return a0_0x208b();}let imageDataObj=null;async function loadLUT64(){const _0x543bce=a0_0xad0494;systemType=gameName['slice'](-0x3);const _0x35da01=localStorage[_0x543bce(0xcd)](gameName+_0x543bce(0xbb))||_0x543bce(0xc8),_0xdad383=(localStorage['getItem'](gameName+_0x543bce(0x6d))||_0x543bce(0xc2))[_0x543bce(0x96)]();if(!lut64||lut64Streng!==_0x35da01||lut64Profile!==_0xdad383){const _0x9f6fac=_0x543bce(0x70)+_0xdad383+'_'+_0x35da01+_0x543bce(0xb6);console['log'](_0x9f6fac);const _0x5bcaa7=await fetch(_0x9f6fac),_0x564a2f=await _0x5bcaa7[_0x543bce(0x73)]();lut64=new Uint8Array(_0x564a2f),lut64Streng=_0x35da01,lut64Profile=_0xdad383;}}async function loadShaderSource(_0xacb5f3){const _0x576cb3=a0_0xad0494,_0x3b28cf=await fetch(_0xacb5f3);return await _0x3b28cf[_0x576cb3(0x93)]();}function setupStyle(_0x41ac0f){const _0x3d9560=a0_0xad0494;clientWidth=document[_0x3d9560(0xa0)][_0x3d9560(0x7c)];const _0x1abce6=window[_0x3d9560(0xa1)];systemType===_0x3d9560(0x94)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x3d9560(0x8b)](clientWidth*_0x1abce6/gameWidth),localStorage[_0x3d9560(0x9d)](_0x3d9560(0x81),_0x3d9560(0xbc)+gameWidth*(integerScaling/_0x1abce6)+','+gameHeight*(integerScaling/_0x1abce6))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x1abce6/gameWidth),localStorage['setItem'](_0x3d9560(0x81),_0x3d9560(0xbc)+gameWidth*(integerScaling/_0x1abce6)+','+gameHeight*(integerScaling/_0x1abce6)));if(_0x41ac0f==='2d')bufferCanvas[_0x3d9560(0xb7)]=gameWidth,bufferCanvas[_0x3d9560(0xc4)]=gameHeight,bufferCanvas[_0x3d9560(0x85)][_0x3d9560(0xab)]=''+integerScaling/_0x1abce6,bufferCanvas['style'][_0x3d9560(0xac)]=_0x3d9560(0x89),canvasContainer[_0x3d9560(0x85)][_0x3d9560(0xb7)]=gameWidth*(integerScaling/_0x1abce6)+'px',canvasContainer[_0x3d9560(0x85)][_0x3d9560(0xc4)]=gameHeight*(integerScaling/_0x1abce6)+'px',textured[_0x3d9560(0x85)][_0x3d9560(0xb7)]=gameWidth*(integerScaling/_0x1abce6)+'px',textured['style'][_0x3d9560(0xc4)]=gameHeight*(integerScaling/_0x1abce6)+'px',imgShader['style']['transform']=_0x3d9560(0x78)+integerScaling/_0x1abce6/upscaleShader+')',settingContainer[_0x3d9560(0x83)](function(_0x381222){const _0x2c9080=_0x3d9560;_0x381222[_0x2c9080(0x85)][_0x2c9080(0xb7)]=gameWidth*(integerScaling/_0x1abce6)+'px',_0x381222[_0x2c9080(0x85)]['height']=gameHeight*(integerScaling/_0x1abce6)+'px';}),messageContainer[_0x3d9560(0x83)](function(_0xa44d13){const _0x2be8aa=_0x3d9560;_0xa44d13['style'][_0x2be8aa(0xb7)]=gameWidth+'px',_0xa44d13[_0x2be8aa(0x85)][_0x2be8aa(0xc4)]=gameHeight+'px',_0xa44d13[_0x2be8aa(0x85)][_0x2be8aa(0xab)]=''+integerScaling/_0x1abce6;}),stateTitle[_0x3d9560(0x83)](function(_0x3f6fb7){const _0x530cc9=_0x3d9560;_0x3f6fb7[_0x530cc9(0xaf)][_0x530cc9(0x6f)](_0x530cc9(0xd0));});else _0x41ac0f===_0x3d9560(0xc5)&&(bufferCanvas[_0x3d9560(0xb7)]=clientWidth*upscaleFactor,bufferCanvas[_0x3d9560(0xc4)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x3d9560(0x85)]['zoom']=''+0x1/upscaleFactor,bufferCanvas['style'][_0x3d9560(0xac)]='',canvasContainer['style'][_0x3d9560(0xb7)]=clientWidth+'px',canvasContainer[_0x3d9560(0x85)]['height']=clientWidth*(gameHeight/gameWidth)+'px',textured['style'][_0x3d9560(0xb7)]=clientWidth+'px',textured[_0x3d9560(0x85)][_0x3d9560(0xc4)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style']['transform']=_0x3d9560(0x78)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x3d9560(0x83)](function(_0x3a5135){const _0x4a11cf=_0x3d9560;_0x3a5135['style']['width']=clientWidth+'px',_0x3a5135[_0x4a11cf(0x85)][_0x4a11cf(0xc4)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x3d9560(0x83)](function(_0x29ea1d){const _0x33fb84=_0x3d9560;_0x29ea1d[_0x33fb84(0x85)][_0x33fb84(0xb7)]=gameWidth+'px',_0x29ea1d['style'][_0x33fb84(0xc4)]=gameHeight+'px',_0x29ea1d['style'][_0x33fb84(0xab)]=''+clientWidth/gameWidth;}),stateTitle[_0x3d9560(0x83)](function(_0x3d3356){const _0xb4ce45=_0x3d9560;_0x3d3356[_0xb4ce45(0xaf)][_0xb4ce45(0xa2)]('fefs');}));imgShader[_0x3d9560(0x85)][_0x3d9560(0xb7)]=gameWidth*upscaleShader+'px',imgShader[_0x3d9560(0x85)][_0x3d9560(0xc4)]=gameHeight*upscaleShader+'px',imgShader[_0x3d9560(0x85)]['transformOrigin']=_0x3d9560(0xc0),imgShader[_0x3d9560(0x85)][_0x3d9560(0xcc)]('--bg-size',upscaleShader+_0x3d9560(0xcf)+upscaleShader+'px');}function setupWebGL(){const _0x17eb9a=a0_0xad0494;gl=bufferCanvas[_0x17eb9a(0xa5)]('webgl2');if(!gl)return console[_0x17eb9a(0x99)](_0x17eb9a(0x95)),null;gl[_0x17eb9a(0x8a)](0x0,0x0,bufferCanvas[_0x17eb9a(0xb7)],bufferCanvas[_0x17eb9a(0xc4)]);}function createShader(_0x3c2f37,_0x1d8716){const _0x51a414=a0_0xad0494,_0x2ea363=gl['createShader'](_0x3c2f37);gl[_0x51a414(0xc6)](_0x2ea363,_0x1d8716),gl[_0x51a414(0x87)](_0x2ea363);if(!gl[_0x51a414(0xa4)](_0x2ea363,gl[_0x51a414(0x86)]))return console[_0x51a414(0x99)](gl[_0x51a414(0x7f)](_0x2ea363)),gl[_0x51a414(0xd2)](_0x2ea363),null;return _0x2ea363;}async function setupShaders(){const _0xba485=a0_0xad0494,_0x567f1d=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x5644c8=await loadShaderSource(_0xba485(0xc3)),_0x1d945b=createShader(gl[_0xba485(0x9f)],_0x567f1d),_0x1e5575=createShader(gl['FRAGMENT_SHADER'],_0x5644c8);return program=gl['createProgram'](),gl[_0xba485(0x98)](program,_0x1d945b),gl[_0xba485(0x98)](program,_0x1e5575),gl['linkProgram'](program),gl[_0xba485(0x82)](program),program;}function setupTexture(){const _0x1d4c73=a0_0xad0494;texture=gl['createTexture'](),gl[_0x1d4c73(0x6e)](gl[_0x1d4c73(0xa3)],texture),gl[_0x1d4c73(0x7d)](gl[_0x1d4c73(0xa3)],gl['TEXTURE_MIN_FILTER'],gl[_0x1d4c73(0xbd)]),gl['texParameteri'](gl[_0x1d4c73(0xa3)],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl[_0x1d4c73(0x7d)](gl[_0x1d4c73(0xa3)],gl[_0x1d4c73(0xce)],gl[_0x1d4c73(0xaa)]),gl['texParameteri'](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_T'],gl[_0x1d4c73(0xaa)]),gl[_0x1d4c73(0xba)](gl[_0x1d4c73(0xbf)](program,_0x1d4c73(0x74)),gameWidth,gameHeight),gl[_0x1d4c73(0xba)](gl[_0x1d4c73(0xbf)](program,_0x1d4c73(0xc9)),gl[_0x1d4c73(0xa8)][_0x1d4c73(0xb7)],gl['canvas'][_0x1d4c73(0xc4)]),gl[_0x1d4c73(0xc1)](gl[_0x1d4c73(0xbf)](program,_0x1d4c73(0xb2)),gameWidth/gl[_0x1d4c73(0xa8)][_0x1d4c73(0xb7)]),gl[_0x1d4c73(0xc1)](gl[_0x1d4c73(0xbf)](program,_0x1d4c73(0x72)),gameHeight/gl[_0x1d4c73(0xa8)][_0x1d4c73(0xc4)]);}function setupBuffers(){const _0x5491a9=a0_0xad0494,_0x19ec86=gl[_0x5491a9(0xad)]();gl['bindBuffer'](gl[_0x5491a9(0x9a)],_0x19ec86),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x582593=gl[_0x5491a9(0xa6)](program,_0x5491a9(0x7b));gl[_0x5491a9(0x8f)](_0x582593),gl[_0x5491a9(0x76)](_0x582593,0x2,gl[_0x5491a9(0x90)],![],0x0,0x0);const _0x582b49=gl[_0x5491a9(0xad)]();gl[_0x5491a9(0x9b)](gl[_0x5491a9(0x9a)],_0x582b49),gl[_0x5491a9(0xae)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']);const _0x4ed942=gl[_0x5491a9(0xa6)](program,_0x5491a9(0x88));gl['enableVertexAttribArray'](_0x4ed942),gl[_0x5491a9(0x76)](_0x4ed942,0x2,gl[_0x5491a9(0x90)],![],0x0,0x0);}async function renderPixel(_0xbfce8c){const _0x2f16f3=a0_0xad0494,_0x59bdc8=a0_0x2e086b[_0x2f16f3(0x7a)]();if(!_0x59bdc8)return;await loadLUT64();const _0x23f451=new Uint8ClampedArray(gameWidth*gameHeight*0x4),_0x5500b2=typeof gameStride===_0x2f16f3(0xa7)&&gameStride!==gameWidth;let _0x4cd9e6=0x0;const _0x1c845c=_0x54c213=>{const _0x1fc852=_0x54c213>>0x2&0x3f,_0x1d0be5=_0x54c213>>0xa&0x3f,_0x38c664=_0x54c213>>0x12&0x3f,_0x922684=(_0x1fc852<<0xc|_0x1d0be5<<0x6|_0x38c664)*0x3;_0x23f451[_0x4cd9e6++]=lut64[_0x922684],_0x23f451[_0x4cd9e6++]=lut64[_0x922684+0x1],_0x23f451[_0x4cd9e6++]=lut64[_0x922684+0x2],_0x23f451[_0x4cd9e6++]=0xff;};if(_0x5500b2)for(let _0x4ee809=0x0;_0x4ee809<gameHeight;_0x4ee809++){let _0x222c8c=_0x4ee809*gameStride;for(let _0x58b4c4=0x0;_0x58b4c4<gameWidth;_0x58b4c4++){_0x1c845c(_0x59bdc8[_0x222c8c++]);}}else for(let _0x4bac7d=0x0;_0x4bac7d<gameWidth*gameHeight;_0x4bac7d++){_0x1c845c(_0x59bdc8[_0x4bac7d]);}if(_0xbfce8c===_0x2f16f3(0xc5))gl['bindTexture'](gl[_0x2f16f3(0xa3)],texture),gl[_0x2f16f3(0x9c)](gl[_0x2f16f3(0xa3)],0x0,gl[_0x2f16f3(0x79)],gameWidth,gameHeight,0x0,gl[_0x2f16f3(0x79)],gl[_0x2f16f3(0x84)],_0x23f451),gl['clear'](gl[_0x2f16f3(0x71)]),gl[_0x2f16f3(0xb4)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0xbfce8c==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas[_0x2f16f3(0xa5)]('2d',{'willReadFrequently':!![]}),ctx2d[_0x2f16f3(0x8e)]=![]),(!imageDataObj||imageDataObj[_0x2f16f3(0xb7)]!==gameWidth||imageDataObj['height']!==gameHeight)&&(imageDataObj=new ImageData(gameWidth,gameHeight)),imageDataObj[_0x2f16f3(0xa9)]['set'](_0x23f451),createImageBitmap(imageDataObj)['then'](_0x475427=>{const _0x359d17=_0x2f16f3;ctx2d[_0x359d17(0xb9)](0x0,0x0,bufferCanvas[_0x359d17(0xb7)],bufferCanvas[_0x359d17(0xc4)]),ctx2d[_0x359d17(0x92)](_0x475427,0x0,0x0),_0x475427['close']();}));requestAnimationFrame(()=>renderPixel(_0xbfce8c));}export async function switchRenderMode(_0x15003b){const _0x4b6434=a0_0xad0494;systemType=gameName[_0x4b6434(0xb1)](-0x3);if(_0x15003b==='2d')setupStyle('2d'),renderPixel('2d');else _0x15003b==='webgl2'&&(setupStyle(_0x4b6434(0xc5)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x4b6434(0xc5)));}document[a0_0xad0494(0x7e)](a0_0xad0494(0x8c),function(){});