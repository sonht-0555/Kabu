(function(_0x28648b,_0x4f6af4){const _0x152dc9=a0_0x3d66,_0x2ae374=_0x28648b();while(!![]){try{const _0x89166a=parseInt(_0x152dc9(0x135))/0x1*(parseInt(_0x152dc9(0x12d))/0x2)+-parseInt(_0x152dc9(0x165))/0x3*(parseInt(_0x152dc9(0x137))/0x4)+parseInt(_0x152dc9(0x15a))/0x5+-parseInt(_0x152dc9(0x141))/0x6*(parseInt(_0x152dc9(0x158))/0x7)+parseInt(_0x152dc9(0x149))/0x8+parseInt(_0x152dc9(0x16c))/0x9*(-parseInt(_0x152dc9(0x15b))/0xa)+parseInt(_0x152dc9(0x13f))/0xb;if(_0x89166a===_0x4f6af4)break;else _0x2ae374['push'](_0x2ae374['shift']());}catch(_0x4ec666){_0x2ae374['push'](_0x2ae374['shift']());}}}(a0_0x2112,0x24a9f));function a0_0x3d66(_0x3c6059,_0x1ab6f7){const _0x211269=a0_0x2112();return a0_0x3d66=function(_0x3d66f8,_0x30b2b8){_0x3d66f8=_0x3d66f8-0x129;let _0x38de06=_0x211269[_0x3d66f8];return _0x38de06;},a0_0x3d66(_0x3c6059,_0x1ab6f7);}import*as a0_0x410c7d from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x3a085a=a0_0x3d66;systemType=gameName[_0x3a085a(0x14c)](-0x3);const _0x1f83a1=(localStorage[_0x3a085a(0x140)](gameName+_0x3a085a(0x15e))||_0x3a085a(0x147))[_0x3a085a(0x150)]();if(!lut64||lut64Profile!==_0x1f83a1){const _0x4aa948='./src/lut/lut64_'+_0x1f83a1+_0x3a085a(0x132);console[_0x3a085a(0x16a)](_0x4aa948);const _0x55664c=await fetch(_0x4aa948),_0x32eb9b=await _0x55664c[_0x3a085a(0x16f)]();lut64=new Uint8Array(_0x32eb9b),lut64Profile=_0x1f83a1;}}function setupWebGL_Shader(_0xfbe623){const _0x26f1dd=a0_0x3d66;gl=bufferCanvas[_0x26f1dd(0x161)](_0x26f1dd(0x154),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x26f1dd(0x169)}),gl[_0x26f1dd(0x170)](0x0,0x0,bufferCanvas[_0x26f1dd(0x13c)],bufferCanvas['height']);function _0xcc34ad(_0x2b46b9,_0x5b6e14){const _0x20aa23=_0x26f1dd,_0x4cb40a=gl[_0x20aa23(0x146)](_0x2b46b9);return gl[_0x20aa23(0x152)](_0x4cb40a,_0x5b6e14),gl[_0x20aa23(0x148)](_0x4cb40a),_0x4cb40a;}vs=_0x26f1dd(0x14e);if(_0xfbe623===_0x26f1dd(0x154))fs=_0x26f1dd(0x168);else _0xfbe623===_0x26f1dd(0x159)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x3dd0bb=_0xcc34ad(gl[_0x26f1dd(0x12c)],vs),_0x9a7c81=_0xcc34ad(gl[_0x26f1dd(0x13e)],fs);return program=gl[_0x26f1dd(0x160)](),gl[_0x26f1dd(0x129)](program,_0x3dd0bb),gl[_0x26f1dd(0x129)](program,_0x9a7c81),gl[_0x26f1dd(0x16e)](program),gl[_0x26f1dd(0x14a)](program),program;}function setupTexture_Buffer(_0x2cc17d){const _0x46bdea=a0_0x3d66;texture=gl[_0x46bdea(0x145)](),gl['bindTexture'](gl[_0x46bdea(0x13d)],texture),gl[_0x46bdea(0x138)](gl[_0x46bdea(0x13d)],gl[_0x46bdea(0x12a)],gl[_0x46bdea(0x151)]),gl[_0x46bdea(0x138)](gl[_0x46bdea(0x13d)],gl[_0x46bdea(0x139)],gl[_0x46bdea(0x151)]),gl['texParameteri'](gl[_0x46bdea(0x13d)],gl['TEXTURE_WRAP_S'],gl[_0x46bdea(0x164)]),gl[_0x46bdea(0x138)](gl['TEXTURE_2D'],gl[_0x46bdea(0x12e)],gl[_0x46bdea(0x164)]);_0x2cc17d===_0x46bdea(0x159)&&(gl[_0x46bdea(0x167)](gl[_0x46bdea(0x15f)](program,_0x46bdea(0x153)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x46bdea(0x15f)](program,_0x46bdea(0x134)),gl[_0x46bdea(0x16d)]['width'],gl[_0x46bdea(0x16d)][_0x46bdea(0x142)]),gl[_0x46bdea(0x14f)](gl['getUniformLocation'](program,_0x46bdea(0x133)),gameWidth/gl[_0x46bdea(0x16d)]['width']),gl[_0x46bdea(0x14f)](gl[_0x46bdea(0x15f)](program,_0x46bdea(0x171)),gameHeight/gl['canvas'][_0x46bdea(0x142)]));const _0x394735=gl[_0x46bdea(0x162)]();gl[_0x46bdea(0x157)](gl['ARRAY_BUFFER'],_0x394735),gl[_0x46bdea(0x143)](gl[_0x46bdea(0x14d)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl['vertexAttribPointer'](gl[_0x46bdea(0x155)](program,_0x46bdea(0x13a)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x46bdea(0x14b)](gl[_0x46bdea(0x155)](program,_0x46bdea(0x13a)));const _0x1f7d1e=gl[_0x46bdea(0x162)]();gl[_0x46bdea(0x157)](gl['ARRAY_BUFFER'],_0x1f7d1e),gl[_0x46bdea(0x143)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']),gl[_0x46bdea(0x136)](gl[_0x46bdea(0x155)](program,'texcoord'),0x2,gl[_0x46bdea(0x144)],![],0x0,0x0),gl[_0x46bdea(0x14b)](gl['getAttribLocation'](program,_0x46bdea(0x130)));}function setup2DContext(){const _0x53077f=a0_0x3d66;ctx2d=bufferCanvas[_0x53077f(0x161)]('2d'),ctx2d[_0x53077f(0x16b)]=![];}async function renderPixel(_0x1e3d82){const _0x5316d0=a0_0x3d66,_0x9bde27=a0_0x410c7d['getPixelData']();if(!_0x9bde27)return;await loadLUT64();const _0x23e201=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x9058cb=0x0;_0x9058cb<gameHeight;_0x9058cb++){for(let _0x11f187=0x0;_0x11f187<gameWidth;_0x11f187++){const _0x6084df=_0x9058cb*gameStride+_0x11f187,_0x25f56d=(_0x9058cb*gameWidth+_0x11f187)*0x4,_0x196367=_0x9bde27[_0x6084df];if(lut64Profile===_0x5316d0(0x147))_0x23e201[_0x25f56d]=_0x196367&0xff,_0x23e201[_0x25f56d+0x1]=_0x196367>>0x8&0xff,_0x23e201[_0x25f56d+0x2]=_0x196367>>0x10&0xff,_0x23e201[_0x25f56d+0x3]=0xff;else{const _0x27bbe2=(_0x196367&0xff)>>0x2,_0x23bb37=(_0x196367>>0x8&0xff)>>0x2,_0x297260=(_0x196367>>0x10&0xff)>>0x2,_0x110aa9=(_0x27bbe2*0x40*0x40+_0x23bb37*0x40+_0x297260)*0x3;_0x23e201[_0x25f56d]=lut64[_0x110aa9],_0x23e201[_0x25f56d+0x1]=lut64[_0x110aa9+0x1],_0x23e201[_0x25f56d+0x2]=lut64[_0x110aa9+0x2],_0x23e201[_0x25f56d+0x3]=0xff;}}}if(_0x1e3d82===_0x5316d0(0x154))gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x5316d0(0x12b)],gl[_0x5316d0(0x12f)],_0x23e201),gl[_0x5316d0(0x131)](gl[_0x5316d0(0x163)]),gl[_0x5316d0(0x156)](gl[_0x5316d0(0x15c)],0x0,0x4);else _0x1e3d82==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x23e201,gameWidth,gameHeight):imageDataObj['data'][_0x5316d0(0x15d)](_0x23e201),ctx2d[_0x5316d0(0x166)](0x0,0x0,bufferCanvas[_0x5316d0(0x13c)],bufferCanvas[_0x5316d0(0x142)]),ctx2d[_0x5316d0(0x13b)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x1e3d82));}function a0_0x2112(){const _0x2559c1=['height','bufferData','FLOAT','createTexture','createShader','none','compileShader','1616360kzicgZ','useProgram','enableVertexAttribArray','slice','ARRAY_BUFFER','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','uniform1f','toLowerCase','NEAREST','shaderSource','game_size','webgl','getAttribLocation','drawArrays','bindBuffer','8876vedufK','webgl_full','970070TFkTTm','10hbUQRj','TRIANGLE_STRIP','set','_temperature','getUniformLocation','createProgram','getContext','createBuffer','COLOR_BUFFER_BIT','CLAMP_TO_EDGE','73221fKVTfy','clearRect','uniform2f','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','low-power','log','imageSmoothingEnabled','1276191PWYcYK','canvas','linkProgram','arrayBuffer','viewport','smooth_height','attachShader','TEXTURE_MIN_FILTER','RGBA','VERTEX_SHADER','192968jUDNeT','TEXTURE_WRAP_T','UNSIGNED_BYTE','texcoord','clear','_4.0.bin','smooth_width','render_size','1mZvLGg','vertexAttribPointer','44jcyuma','texParameteri','TEXTURE_MAG_FILTER','position','putImageData','width','TEXTURE_2D','FRAGMENT_SHADER','2643916RrSAKM','getItem','816qOthvV'];a0_0x2112=function(){return _0x2559c1;};return a0_0x2112();}export async function switchRenderMode(_0x25d67c){const _0x5ed431=a0_0x3d66;systemType=gameName[_0x5ed431(0x14c)](-0x3);if(_0x25d67c==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x25d67c===_0x5ed431(0x154))setupStyle('2d'),setupWebGL_Shader(_0x5ed431(0x154)),setupTexture_Buffer(_0x5ed431(0x154)),renderPixel('webgl');else _0x25d67c==='webgl_full'&&(setupStyle(_0x5ed431(0x159)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x5ed431(0x159)),renderPixel(_0x5ed431(0x154)));}}