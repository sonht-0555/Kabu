(function(_0x1db842,_0x2b9659){const _0x17e111=a0_0x1fb6,_0x740209=_0x1db842();while(!![]){try{const _0x125afa=parseInt(_0x17e111(0x154))/0x1+-parseInt(_0x17e111(0x16a))/0x2*(-parseInt(_0x17e111(0x179))/0x3)+-parseInt(_0x17e111(0x178))/0x4+parseInt(_0x17e111(0x14e))/0x5*(parseInt(_0x17e111(0x170))/0x6)+-parseInt(_0x17e111(0x14d))/0x7*(parseInt(_0x17e111(0x146))/0x8)+parseInt(_0x17e111(0x180))/0x9*(parseInt(_0x17e111(0x148))/0xa)+-parseInt(_0x17e111(0x15c))/0xb;if(_0x125afa===_0x2b9659)break;else _0x740209['push'](_0x740209['shift']());}catch(_0x3cd6b3){_0x740209['push'](_0x740209['shift']());}}}(a0_0x2838,0xaf4e7));import*as a0_0x461f4c from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x3b24b5=a0_0x1fb6;systemType=gameName[_0x3b24b5(0x15d)](-0x3);const _0x45820b=(localStorage['getItem'](gameName+_0x3b24b5(0x17f))||_0x3b24b5(0x176))[_0x3b24b5(0x15b)]();if(!lut64||lut64Profile!==_0x45820b){const _0x337f89=_0x3b24b5(0x181)+_0x45820b+'_4.0.bin';console[_0x3b24b5(0x186)](_0x337f89);const _0x443efb=await fetch(_0x337f89),_0x5795b5=await _0x443efb['arrayBuffer']();lut64=new Uint8Array(_0x5795b5),lut64Profile=_0x45820b;}}function setupWebGL_Shader(_0x177628){const _0x180c33=a0_0x1fb6;gl=bufferCanvas[_0x180c33(0x17e)](_0x180c33(0x168),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl['viewport'](0x0,0x0,bufferCanvas[_0x180c33(0x164)],bufferCanvas[_0x180c33(0x15a)]);function _0x4ba98b(_0x39670c,_0x1ca39d){const _0x57625a=_0x180c33,_0x3ea64f=gl[_0x57625a(0x184)](_0x39670c);return gl[_0x57625a(0x17b)](_0x3ea64f,_0x1ca39d),gl[_0x57625a(0x149)](_0x3ea64f),_0x3ea64f;}vs=_0x180c33(0x165);if(_0x177628===_0x180c33(0x168))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x177628==='webgl_full'&&(fs=_0x180c33(0x175));const _0xa682e6=_0x4ba98b(gl['VERTEX_SHADER'],vs),_0x4a8f76=_0x4ba98b(gl[_0x180c33(0x16b)],fs);return program=gl[_0x180c33(0x185)](),gl[_0x180c33(0x172)](program,_0xa682e6),gl['attachShader'](program,_0x4a8f76),gl[_0x180c33(0x166)](program),gl[_0x180c33(0x162)](program),program;}function a0_0x1fb6(_0x5f0418,_0xfe43f3){const _0x2838af=a0_0x2838();return a0_0x1fb6=function(_0x1fb678,_0x180c57){_0x1fb678=_0x1fb678-0x145;let _0xafd648=_0x2838af[_0x1fb678];return _0xafd648;},a0_0x1fb6(_0x5f0418,_0xfe43f3);}function setupTexture_Buffer(_0x598de2){const _0xe35b2b=a0_0x1fb6;texture=gl[_0xe35b2b(0x17c)](),gl[_0xe35b2b(0x188)](gl[_0xe35b2b(0x14f)],texture),gl[_0xe35b2b(0x15e)](gl['TEXTURE_2D'],gl[_0xe35b2b(0x174)],gl[_0xe35b2b(0x17d)]),gl[_0xe35b2b(0x15e)](gl['TEXTURE_2D'],gl[_0xe35b2b(0x161)],gl['NEAREST']),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0xe35b2b(0x14a)],gl[_0xe35b2b(0x163)]),gl[_0xe35b2b(0x15e)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_T'],gl[_0xe35b2b(0x163)]);_0x598de2===_0xe35b2b(0x16e)&&(gl[_0xe35b2b(0x171)](gl[_0xe35b2b(0x14b)](program,_0xe35b2b(0x16f)),gameWidth,gameHeight),gl[_0xe35b2b(0x171)](gl[_0xe35b2b(0x14b)](program,_0xe35b2b(0x169)),gl['canvas'][_0xe35b2b(0x164)],gl[_0xe35b2b(0x155)][_0xe35b2b(0x15a)]),gl['uniform1f'](gl[_0xe35b2b(0x14b)](program,_0xe35b2b(0x187)),gameWidth/gl['canvas']['width']),gl[_0xe35b2b(0x145)](gl[_0xe35b2b(0x14b)](program,_0xe35b2b(0x183)),gameHeight/gl[_0xe35b2b(0x155)]['height']));const _0x3a9ee7=gl['createBuffer']();gl['bindBuffer'](gl[_0xe35b2b(0x14c)],_0x3a9ee7),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0xe35b2b(0x177)]),gl['vertexAttribPointer'](gl['getAttribLocation'](program,'position'),0x2,gl[_0xe35b2b(0x156)],![],0x0,0x0),gl[_0xe35b2b(0x15f)](gl[_0xe35b2b(0x17a)](program,_0xe35b2b(0x158)));const _0x1e1e4b=gl[_0xe35b2b(0x160)]();gl[_0xe35b2b(0x150)](gl[_0xe35b2b(0x14c)],_0x1e1e4b),gl[_0xe35b2b(0x16d)](gl[_0xe35b2b(0x14c)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0xe35b2b(0x177)]),gl[_0xe35b2b(0x152)](gl[_0xe35b2b(0x17a)](program,_0xe35b2b(0x159)),0x2,gl[_0xe35b2b(0x156)],![],0x0,0x0),gl[_0xe35b2b(0x15f)](gl[_0xe35b2b(0x17a)](program,_0xe35b2b(0x159)));}function setup2DContext(){const _0x16c13f=a0_0x1fb6;ctx2d=bufferCanvas[_0x16c13f(0x17e)]('2d'),ctx2d[_0x16c13f(0x167)]=![];}function a0_0x2838(){const _0x5b714a=['none','STATIC_DRAW','4571152KDoabY','15LTaCus','getAttribLocation','shaderSource','createTexture','NEAREST','getContext','_temperature','9iUewgV','./src/lut/lut64_','texImage2D','smooth_height','createShader','createProgram','log','smooth_width','bindTexture','UNSIGNED_BYTE','putImageData','uniform1f','696zoeojp','drawArrays','2313720OVMDNl','compileShader','TEXTURE_WRAP_S','getUniformLocation','ARRAY_BUFFER','47131azlxyi','5gKBmdV','TEXTURE_2D','bindBuffer','set','vertexAttribPointer','data','1247774AekFKU','canvas','FLOAT','TRIANGLE_STRIP','position','texcoord','height','toLowerCase','1371568AGwlyq','slice','texParameteri','enableVertexAttribArray','createBuffer','TEXTURE_MAG_FILTER','useProgram','CLAMP_TO_EDGE','width','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','linkProgram','imageSmoothingEnabled','webgl','render_size','338558MMWEzF','FRAGMENT_SHADER','RGBA','bufferData','webgl_full','game_size','1474566ahMUQC','uniform2f','attachShader','COLOR_BUFFER_BIT','TEXTURE_MIN_FILTER','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}'];a0_0x2838=function(){return _0x5b714a;};return a0_0x2838();}async function renderPixel(_0x46c4c4){const _0x3d8b34=a0_0x1fb6,_0x1e93a5=a0_0x461f4c['getPixelData']();if(!_0x1e93a5)return;await loadLUT64();const _0x26f557=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x50a0ef=0x0;_0x50a0ef<gameHeight;_0x50a0ef++){for(let _0x4903fa=0x0;_0x4903fa<gameWidth;_0x4903fa++){const _0x526ad4=_0x50a0ef*gameStride+_0x4903fa,_0x2d2c80=(_0x50a0ef*gameWidth+_0x4903fa)*0x4,_0x284646=_0x1e93a5[_0x526ad4];if(lut64Profile===_0x3d8b34(0x176))_0x26f557[_0x2d2c80]=_0x284646&0xff,_0x26f557[_0x2d2c80+0x1]=_0x284646>>0x8&0xff,_0x26f557[_0x2d2c80+0x2]=_0x284646>>0x10&0xff,_0x26f557[_0x2d2c80+0x3]=0xff;else{const _0xc963d1=(_0x284646&0xff)>>0x2,_0x4708e4=(_0x284646>>0x8&0xff)>>0x2,_0x491f13=(_0x284646>>0x10&0xff)>>0x2,_0x25f7a3=(_0xc963d1*0x40*0x40+_0x4708e4*0x40+_0x491f13)*0x3;_0x26f557[_0x2d2c80]=lut64[_0x25f7a3],_0x26f557[_0x2d2c80+0x1]=lut64[_0x25f7a3+0x1],_0x26f557[_0x2d2c80+0x2]=lut64[_0x25f7a3+0x2],_0x26f557[_0x2d2c80+0x3]=0xff;}}}if(_0x46c4c4===_0x3d8b34(0x168))gl[_0x3d8b34(0x182)](gl[_0x3d8b34(0x14f)],0x0,gl[_0x3d8b34(0x16c)],gameWidth,gameHeight,0x0,gl[_0x3d8b34(0x16c)],gl[_0x3d8b34(0x189)],_0x26f557),gl['clear'](gl[_0x3d8b34(0x173)]),gl[_0x3d8b34(0x147)](gl[_0x3d8b34(0x157)],0x0,0x4);else _0x46c4c4==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x26f557,gameWidth,gameHeight):imageDataObj[_0x3d8b34(0x153)][_0x3d8b34(0x151)](_0x26f557),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x3d8b34(0x164)],bufferCanvas[_0x3d8b34(0x15a)]),ctx2d[_0x3d8b34(0x18a)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x46c4c4));}export async function switchRenderMode(_0x3a31ee){const _0x3ccbb6=a0_0x1fb6;systemType=gameName[_0x3ccbb6(0x15d)](-0x3);if(_0x3a31ee==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x3a31ee===_0x3ccbb6(0x168))setupStyle('2d'),setupWebGL_Shader(_0x3ccbb6(0x168)),setupTexture_Buffer(_0x3ccbb6(0x168)),renderPixel(_0x3ccbb6(0x168));else _0x3a31ee===_0x3ccbb6(0x16e)&&(setupStyle(_0x3ccbb6(0x16e)),setupWebGL_Shader(_0x3ccbb6(0x16e)),setupTexture_Buffer(_0x3ccbb6(0x16e)),renderPixel(_0x3ccbb6(0x168)));}}