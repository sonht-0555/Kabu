(function(_0x534a74,_0x2976bc){const _0xed0814=a0_0x40ab,_0x53c776=_0x534a74();while(!![]){try{const _0x1cca45=parseInt(_0xed0814(0x13e))/0x1*(parseInt(_0xed0814(0x158))/0x2)+parseInt(_0xed0814(0x14a))/0x3+-parseInt(_0xed0814(0x16a))/0x4+-parseInt(_0xed0814(0x143))/0x5*(parseInt(_0xed0814(0x141))/0x6)+-parseInt(_0xed0814(0x15f))/0x7+parseInt(_0xed0814(0x148))/0x8+parseInt(_0xed0814(0x14d))/0x9;if(_0x1cca45===_0x2976bc)break;else _0x53c776['push'](_0x53c776['shift']());}catch(_0x484461){_0x53c776['push'](_0x53c776['shift']());}}}(a0_0x44a3,0x5adeb));import*as a0_0x488d28 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x5a35a4=a0_0x40ab;systemType=gameName[_0x5a35a4(0x147)](-0x3);const _0x2be6d4=(localStorage['getItem'](gameName+_0x5a35a4(0x161))||_0x5a35a4(0x15a))[_0x5a35a4(0x160)]();if(!lut64||lut64Profile!==_0x2be6d4){const _0x49611d='./src/lut/lut64_'+_0x2be6d4+_0x5a35a4(0x13f);console['log'](_0x49611d);const _0x411eef=await fetch(_0x49611d),_0x2af602=await _0x411eef[_0x5a35a4(0x138)]();lut64=new Uint8Array(_0x2af602),lut64Profile=_0x2be6d4;}}function a0_0x40ab(_0x6d257b,_0x108429){const _0x44a344=a0_0x44a3();return a0_0x40ab=function(_0x40ab41,_0x3602c2){_0x40ab41=_0x40ab41-0x134;let _0x21135d=_0x44a344[_0x40ab41];return _0x21135d;},a0_0x40ab(_0x6d257b,_0x108429);}function setupWebGL_Shader(_0x53fa3c){const _0x54b6d7=a0_0x40ab;gl=bufferCanvas[_0x54b6d7(0x144)](_0x54b6d7(0x174),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0x54b6d7(0x164)](0x0,0x0,bufferCanvas[_0x54b6d7(0x15e)],bufferCanvas[_0x54b6d7(0x134)]);function _0x329009(_0xa170df,_0x283461){const _0x3dc913=_0x54b6d7,_0x55d188=gl[_0x3dc913(0x156)](_0xa170df);return gl[_0x3dc913(0x135)](_0x55d188,_0x283461),gl['compileShader'](_0x55d188),_0x55d188;}vs=_0x54b6d7(0x139);if(_0x53fa3c===_0x54b6d7(0x174))fs=_0x54b6d7(0x146);else _0x53fa3c===_0x54b6d7(0x137)&&(fs=_0x54b6d7(0x15d));const _0x1b4695=_0x329009(gl['VERTEX_SHADER'],vs),_0xbefc28=_0x329009(gl['FRAGMENT_SHADER'],fs);return program=gl['createProgram'](),gl[_0x54b6d7(0x13d)](program,_0x1b4695),gl[_0x54b6d7(0x13d)](program,_0xbefc28),gl['linkProgram'](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x16cf08){const _0x2df8a1=a0_0x40ab;texture=gl[_0x2df8a1(0x14e)](),gl[_0x2df8a1(0x16b)](gl[_0x2df8a1(0x151)],texture),gl[_0x2df8a1(0x16f)](gl[_0x2df8a1(0x151)],gl[_0x2df8a1(0x14b)],gl[_0x2df8a1(0x171)]),gl['texParameteri'](gl[_0x2df8a1(0x151)],gl[_0x2df8a1(0x142)],gl[_0x2df8a1(0x171)]),gl[_0x2df8a1(0x16f)](gl['TEXTURE_2D'],gl[_0x2df8a1(0x16d)],gl['CLAMP_TO_EDGE']),gl[_0x2df8a1(0x16f)](gl['TEXTURE_2D'],gl[_0x2df8a1(0x140)],gl[_0x2df8a1(0x162)]);_0x16cf08==='webgl_full'&&(gl[_0x2df8a1(0x168)](gl[_0x2df8a1(0x13a)](program,'game_size'),gameWidth,gameHeight),gl[_0x2df8a1(0x168)](gl[_0x2df8a1(0x13a)](program,_0x2df8a1(0x172)),gl['canvas'][_0x2df8a1(0x15e)],gl[_0x2df8a1(0x153)]['height']),gl[_0x2df8a1(0x155)](gl[_0x2df8a1(0x13a)](program,_0x2df8a1(0x149)),gameWidth/gl[_0x2df8a1(0x153)][_0x2df8a1(0x15e)]),gl['uniform1f'](gl['getUniformLocation'](program,_0x2df8a1(0x169)),gameHeight/gl[_0x2df8a1(0x153)][_0x2df8a1(0x134)]));const _0x445e8a=gl[_0x2df8a1(0x159)]();gl[_0x2df8a1(0x14c)](gl[_0x2df8a1(0x173)],_0x445e8a),gl[_0x2df8a1(0x165)](gl[_0x2df8a1(0x173)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2df8a1(0x150)]),gl[_0x2df8a1(0x154)](gl[_0x2df8a1(0x167)](program,_0x2df8a1(0x16e)),0x2,gl[_0x2df8a1(0x13c)],![],0x0,0x0),gl[_0x2df8a1(0x13b)](gl[_0x2df8a1(0x167)](program,'position'));const _0x672518=gl[_0x2df8a1(0x159)]();gl[_0x2df8a1(0x14c)](gl['ARRAY_BUFFER'],_0x672518),gl[_0x2df8a1(0x165)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2df8a1(0x150)]),gl[_0x2df8a1(0x154)](gl['getAttribLocation'](program,_0x2df8a1(0x15b)),0x2,gl[_0x2df8a1(0x13c)],![],0x0,0x0),gl[_0x2df8a1(0x13b)](gl[_0x2df8a1(0x167)](program,_0x2df8a1(0x15b)));}function setup2DContext(){ctx2d=bufferCanvas['getContext']('2d'),ctx2d['imageSmoothingEnabled']=![];}async function renderPixel(_0x56cb6a){const _0x17dac4=a0_0x40ab,_0x5ac58e=a0_0x488d28['getPixelData']();if(!_0x5ac58e)return;await loadLUT64();const _0x25ea8e=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x4a1637=0x0;_0x4a1637<gameHeight;_0x4a1637++){for(let _0x4c0b62=0x0;_0x4c0b62<gameWidth;_0x4c0b62++){const _0x15c2c9=_0x4a1637*gameStride+_0x4c0b62,_0x1357f5=(_0x4a1637*gameWidth+_0x4c0b62)*0x4,_0x4572db=_0x5ac58e[_0x15c2c9];if(lut64Profile===_0x17dac4(0x15a))_0x25ea8e[_0x1357f5]=_0x4572db&0xff,_0x25ea8e[_0x1357f5+0x1]=_0x4572db>>0x8&0xff,_0x25ea8e[_0x1357f5+0x2]=_0x4572db>>0x10&0xff,_0x25ea8e[_0x1357f5+0x3]=0xff;else{const _0x241ea7=(_0x4572db&0xff)>>0x2,_0x15979b=(_0x4572db>>0x8&0xff)>>0x2,_0x4d217a=(_0x4572db>>0x10&0xff)>>0x2,_0x172316=(_0x241ea7*0x40*0x40+_0x15979b*0x40+_0x4d217a)*0x3;_0x25ea8e[_0x1357f5]=lut64[_0x172316],_0x25ea8e[_0x1357f5+0x1]=lut64[_0x172316+0x1],_0x25ea8e[_0x1357f5+0x2]=lut64[_0x172316+0x2],_0x25ea8e[_0x1357f5+0x3]=0xff;}}}if(_0x56cb6a===_0x17dac4(0x174))gl['texImage2D'](gl[_0x17dac4(0x151)],0x0,gl[_0x17dac4(0x152)],gameWidth,gameHeight,0x0,gl[_0x17dac4(0x152)],gl[_0x17dac4(0x163)],_0x25ea8e),gl[_0x17dac4(0x15c)](gl[_0x17dac4(0x14f)]),gl[_0x17dac4(0x16c)](gl[_0x17dac4(0x166)],0x0,0x4);else _0x56cb6a==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x25ea8e,gameWidth,gameHeight):imageDataObj[_0x17dac4(0x136)][_0x17dac4(0x145)](_0x25ea8e),ctx2d[_0x17dac4(0x170)](0x0,0x0,bufferCanvas[_0x17dac4(0x15e)],bufferCanvas[_0x17dac4(0x134)]),ctx2d[_0x17dac4(0x157)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x56cb6a));}export async function switchRenderMode(_0x4cc9fa){const _0x19b737=a0_0x40ab;systemType=gameName['slice'](-0x3);if(_0x4cc9fa==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x4cc9fa===_0x19b737(0x174))setupStyle('2d'),setupWebGL_Shader(_0x19b737(0x174)),setupTexture_Buffer(_0x19b737(0x174)),renderPixel(_0x19b737(0x174));else _0x4cc9fa===_0x19b737(0x137)&&(setupStyle(_0x19b737(0x137)),setupWebGL_Shader(_0x19b737(0x137)),setupTexture_Buffer(_0x19b737(0x137)),renderPixel(_0x19b737(0x174)));}}function a0_0x44a3(){const _0x2e0d2f=['ARRAY_BUFFER','webgl','height','shaderSource','data','webgl_full','arrayBuffer','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','getUniformLocation','enableVertexAttribArray','FLOAT','attachShader','294302rccYSF','_4.0.bin','TEXTURE_WRAP_T','12KZFJkd','TEXTURE_MAG_FILTER','1012090kDWACS','getContext','set','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','slice','1163512LTbsaU','smooth_width','1927386HkhAip','TEXTURE_MIN_FILTER','bindBuffer','2950650OfDJPd','createTexture','COLOR_BUFFER_BIT','STATIC_DRAW','TEXTURE_2D','RGBA','canvas','vertexAttribPointer','uniform1f','createShader','putImageData','4oBPFQc','createBuffer','none','texcoord','clear','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','width','2477671pMrncd','toLowerCase','_temperature','CLAMP_TO_EDGE','UNSIGNED_BYTE','viewport','bufferData','TRIANGLE_STRIP','getAttribLocation','uniform2f','smooth_height','2293452WCcLtM','bindTexture','drawArrays','TEXTURE_WRAP_S','position','texParameteri','clearRect','NEAREST','render_size'];a0_0x44a3=function(){return _0x2e0d2f;};return a0_0x44a3();}