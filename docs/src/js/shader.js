const a0_0x4da85e=a0_0x40d1;(function(_0x2d37c1,_0x454db2){const _0xd2f83c=a0_0x40d1,_0x106b12=_0x2d37c1();while(!![]){try{const _0x181a32=parseInt(_0xd2f83c(0x14f))/0x1+-parseInt(_0xd2f83c(0x147))/0x2+parseInt(_0xd2f83c(0x183))/0x3*(parseInt(_0xd2f83c(0x18d))/0x4)+parseInt(_0xd2f83c(0x144))/0x5*(-parseInt(_0xd2f83c(0x169))/0x6)+parseInt(_0xd2f83c(0x1a0))/0x7*(parseInt(_0xd2f83c(0x165))/0x8)+parseInt(_0xd2f83c(0x16f))/0x9+-parseInt(_0xd2f83c(0x17c))/0xa*(parseInt(_0xd2f83c(0x16e))/0xb);if(_0x181a32===_0x454db2)break;else _0x106b12['push'](_0x106b12['shift']());}catch(_0x1f53d9){_0x106b12['push'](_0x106b12['shift']());}}}(a0_0x4fc1,0x9b265));import*as a0_0x958934 from'./main.js';function a0_0x4fc1(){const _0x1afe63=['NEAREST','imageRendering','0,0,','246OEutQB','canvas-container','texImage2D','textured','./src/shaders/fragmentShader.glsl','arrayBuffer','style','error','toLowerCase','setProperty','27272LPWULE','log','height','position','getItem','getAttribLocation','getContext','forEach','bindTexture','transformOrigin','documentElement','TEXTURE_MIN_FILTER','uniform1f','uniform2f','createProgram','deleteShader','--bg-size','enableVertexAttribArray','transform','119bPdfMS','shaderSource','then','smooth_height','drawArrays','RGBA','screenSize','attachShader','2852405pUIhGG','bindBuffer','imageSmoothingEnabled','353756XbgMml','FLOAT','texParameteri','getShaderParameter','getUniformLocation','VERTEX_SHADER','addEventListener','top\x20center','359404cCPdAr','TEXTURE_2D','STATIC_DRAW','render_size','warm','4.0','img-shader','.message-container','floor','canvas','querySelectorAll','webgl2','texcoord','zoom','TEXTURE_WRAP_T','clear','TEXTURE_WRAP_S','CLAMP_TO_EDGE','slice','./src/lut/lut64_','createTexture','TEXTURE_MAG_FILTER','492088Tvveyz','getElementById','bufferData','.stateTitle,\x20.stateDate','12wwTFuN','linkProgram','add','createShader','smooth_width','6364457DMJmvn','5109777SpEIuO','gbc','COLOR_BUFFER_BIT','FRAGMENT_SHADER','text','clearRect','ARRAY_BUFFER','createBuffer','game_size','width','crisp-edges','_streng','fefs','10rvhpuc','UNSIGNED_BYTE','setItem','scale('];a0_0x4fc1=function(){return _0x1afe63;};return a0_0x4fc1();}let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;function a0_0x40d1(_0x28098e,_0x101412){const _0x4fc187=a0_0x4fc1();return a0_0x40d1=function(_0x40d1a5,_0x4035ea){_0x40d1a5=_0x40d1a5-0x143;let _0x12c853=_0x4fc187[_0x40d1a5];return _0x12c853;},a0_0x40d1(_0x28098e,_0x101412);}const textured=document[a0_0x4da85e(0x166)](a0_0x4da85e(0x186)),bufferCanvas=document[a0_0x4da85e(0x166)](a0_0x4da85e(0x158)),canvasContainer=document[a0_0x4da85e(0x166)](a0_0x4da85e(0x184)),imgShader=document[a0_0x4da85e(0x166)](a0_0x4da85e(0x155)),settingContainer=document['querySelectorAll']('.setting-container'),messageContainer=document[a0_0x4da85e(0x159)](a0_0x4da85e(0x156)),stateTitle=document[a0_0x4da85e(0x159)](a0_0x4da85e(0x168));async function loadLUT64(){const _0x50628b=a0_0x4da85e;systemType=gameName[_0x50628b(0x161)](-0x3);const _0x10d067=localStorage[_0x50628b(0x191)](gameName+_0x50628b(0x17a))||_0x50628b(0x154),_0x5b4a8d=(localStorage[_0x50628b(0x191)](gameName+'_temperature')||_0x50628b(0x153))[_0x50628b(0x18b)]();if(!lut64||lut64Streng!==_0x10d067||lut64Profile!==_0x5b4a8d){const _0x1ff0ce=_0x50628b(0x162)+_0x5b4a8d+'_'+_0x10d067+'.bin';console[_0x50628b(0x18e)](_0x1ff0ce);const _0x43a77e=await fetch(_0x1ff0ce),_0x3b65a9=await _0x43a77e[_0x50628b(0x188)]();lut64=new Uint8Array(_0x3b65a9),lut64Streng=_0x10d067,lut64Profile=_0x5b4a8d;}}async function loadShaderSource(_0x582c32){const _0x502048=a0_0x4da85e,_0xab70a=await fetch(_0x582c32);return await _0xab70a[_0x502048(0x173)]();}function setupStyle(_0x339be3){const _0x2f676e=a0_0x4da85e;clientWidth=document[_0x2f676e(0x197)]['clientWidth'];const _0xe1fa35=window['devicePixelRatio'];systemType===_0x2f676e(0x170)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0xe1fa35/gameWidth),localStorage[_0x2f676e(0x17e)]('screenSize',_0x2f676e(0x182)+gameWidth*(integerScaling/_0xe1fa35)+','+gameHeight*(integerScaling/_0xe1fa35))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x2f676e(0x157)](clientWidth*_0xe1fa35/gameWidth),localStorage[_0x2f676e(0x17e)](_0x2f676e(0x1a6),_0x2f676e(0x182)+gameWidth*(integerScaling/_0xe1fa35)+','+gameHeight*(integerScaling/_0xe1fa35)));if(_0x339be3==='2d')bufferCanvas['width']=gameWidth,bufferCanvas[_0x2f676e(0x18f)]=gameHeight,bufferCanvas['style'][_0x2f676e(0x15c)]=''+integerScaling/_0xe1fa35,bufferCanvas[_0x2f676e(0x189)][_0x2f676e(0x181)]=_0x2f676e(0x179),canvasContainer[_0x2f676e(0x189)][_0x2f676e(0x178)]=gameWidth*(integerScaling/_0xe1fa35)+'px',canvasContainer['style']['height']=gameHeight*(integerScaling/_0xe1fa35)+'px',textured[_0x2f676e(0x189)]['width']=gameWidth*(integerScaling/_0xe1fa35)+'px',textured['style'][_0x2f676e(0x18f)]=gameHeight*(integerScaling/_0xe1fa35)+'px',imgShader[_0x2f676e(0x189)]['transform']=_0x2f676e(0x17f)+integerScaling/_0xe1fa35/upscaleShader+')',settingContainer['forEach'](function(_0x3c70be){const _0x456ac3=_0x2f676e;_0x3c70be[_0x456ac3(0x189)][_0x456ac3(0x178)]=gameWidth*(integerScaling/_0xe1fa35)+'px',_0x3c70be[_0x456ac3(0x189)]['height']=gameHeight*(integerScaling/_0xe1fa35)+'px';}),messageContainer[_0x2f676e(0x194)](function(_0x1c015a){const _0x515802=_0x2f676e;_0x1c015a[_0x515802(0x189)][_0x515802(0x178)]=gameWidth+'px',_0x1c015a[_0x515802(0x189)][_0x515802(0x18f)]=gameHeight+'px',_0x1c015a[_0x515802(0x189)]['zoom']=''+integerScaling/_0xe1fa35;}),stateTitle['forEach'](function(_0x3707bf){const _0x47fa52=_0x2f676e;_0x3707bf['classList']['remove'](_0x47fa52(0x17b));});else _0x339be3===_0x2f676e(0x15a)&&(bufferCanvas[_0x2f676e(0x178)]=clientWidth*upscaleFactor,bufferCanvas[_0x2f676e(0x18f)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x2f676e(0x15c)]=''+0x1/upscaleFactor,bufferCanvas[_0x2f676e(0x189)][_0x2f676e(0x181)]='',canvasContainer[_0x2f676e(0x189)][_0x2f676e(0x178)]=clientWidth+'px',canvasContainer[_0x2f676e(0x189)][_0x2f676e(0x18f)]=clientWidth*(gameHeight/gameWidth)+'px',textured['style'][_0x2f676e(0x178)]=clientWidth+'px',textured['style']['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style'][_0x2f676e(0x19f)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x2f676e(0x194)](function(_0x1de5c6){const _0x50e1cb=_0x2f676e;_0x1de5c6[_0x50e1cb(0x189)]['width']=clientWidth+'px',_0x1de5c6[_0x50e1cb(0x189)][_0x50e1cb(0x18f)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer['forEach'](function(_0xc3e578){const _0x19dead=_0x2f676e;_0xc3e578[_0x19dead(0x189)][_0x19dead(0x178)]=gameWidth+'px',_0xc3e578[_0x19dead(0x189)]['height']=gameHeight+'px',_0xc3e578[_0x19dead(0x189)][_0x19dead(0x15c)]=''+clientWidth/gameWidth;}),stateTitle[_0x2f676e(0x194)](function(_0x36d490){const _0x733c85=_0x2f676e;_0x36d490['classList'][_0x733c85(0x16b)](_0x733c85(0x17b));}));imgShader[_0x2f676e(0x189)]['width']=gameWidth*upscaleShader+'px',imgShader[_0x2f676e(0x189)][_0x2f676e(0x18f)]=gameHeight*upscaleShader+'px',imgShader[_0x2f676e(0x189)][_0x2f676e(0x196)]=_0x2f676e(0x14e),imgShader[_0x2f676e(0x189)][_0x2f676e(0x18c)](_0x2f676e(0x19d),upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x3d06c0=a0_0x4da85e;gl=bufferCanvas[_0x3d06c0(0x193)](_0x3d06c0(0x15a));if(!gl)return console[_0x3d06c0(0x18a)]('WebGL2\x20not\x20supported'),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x3d06c0(0x178)],bufferCanvas['height']);}function createShader(_0x44b97e,_0x16e85e){const _0x2d31d5=a0_0x4da85e,_0x44c582=gl[_0x2d31d5(0x16c)](_0x44b97e);gl[_0x2d31d5(0x1a1)](_0x44c582,_0x16e85e),gl['compileShader'](_0x44c582);if(!gl[_0x2d31d5(0x14a)](_0x44c582,gl['COMPILE_STATUS']))return console[_0x2d31d5(0x18a)](gl['getShaderInfoLog'](_0x44c582)),gl[_0x2d31d5(0x19c)](_0x44c582),null;return _0x44c582;}async function setupShaders(){const _0x4a34f1=a0_0x4da85e,_0x454cb8=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x1026ce=await loadShaderSource(_0x4a34f1(0x187)),_0x54b9d9=createShader(gl[_0x4a34f1(0x14c)],_0x454cb8),_0x54e55b=createShader(gl[_0x4a34f1(0x172)],_0x1026ce);return program=gl[_0x4a34f1(0x19b)](),gl[_0x4a34f1(0x143)](program,_0x54b9d9),gl[_0x4a34f1(0x143)](program,_0x54e55b),gl[_0x4a34f1(0x16a)](program),gl['useProgram'](program),program;}function setupTexture(){const _0x1cdd40=a0_0x4da85e;texture=gl[_0x1cdd40(0x163)](),gl[_0x1cdd40(0x195)](gl[_0x1cdd40(0x150)],texture),gl[_0x1cdd40(0x149)](gl[_0x1cdd40(0x150)],gl[_0x1cdd40(0x198)],gl['NEAREST']),gl[_0x1cdd40(0x149)](gl[_0x1cdd40(0x150)],gl[_0x1cdd40(0x164)],gl[_0x1cdd40(0x180)]),gl['texParameteri'](gl[_0x1cdd40(0x150)],gl[_0x1cdd40(0x15f)],gl[_0x1cdd40(0x160)]),gl[_0x1cdd40(0x149)](gl[_0x1cdd40(0x150)],gl[_0x1cdd40(0x15d)],gl['CLAMP_TO_EDGE']),gl[_0x1cdd40(0x19a)](gl['getUniformLocation'](program,_0x1cdd40(0x177)),gameWidth,gameHeight),gl['uniform2f'](gl['getUniformLocation'](program,_0x1cdd40(0x152)),gl[_0x1cdd40(0x158)][_0x1cdd40(0x178)],gl[_0x1cdd40(0x158)][_0x1cdd40(0x18f)]),gl[_0x1cdd40(0x199)](gl[_0x1cdd40(0x14b)](program,_0x1cdd40(0x16d)),gameWidth/gl[_0x1cdd40(0x158)][_0x1cdd40(0x178)]),gl[_0x1cdd40(0x199)](gl[_0x1cdd40(0x14b)](program,_0x1cdd40(0x1a3)),gameHeight/gl[_0x1cdd40(0x158)][_0x1cdd40(0x18f)]);}function setupBuffers(){const _0x5e0474=a0_0x4da85e,_0x195983=gl[_0x5e0474(0x176)]();gl['bindBuffer'](gl[_0x5e0474(0x175)],_0x195983),gl[_0x5e0474(0x167)](gl[_0x5e0474(0x175)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x5e0474(0x151)]);const _0x51ad63=gl[_0x5e0474(0x192)](program,_0x5e0474(0x190));gl[_0x5e0474(0x19e)](_0x51ad63),gl['vertexAttribPointer'](_0x51ad63,0x2,gl[_0x5e0474(0x148)],![],0x0,0x0);const _0x5e68d6=gl[_0x5e0474(0x176)]();gl[_0x5e0474(0x145)](gl[_0x5e0474(0x175)],_0x5e68d6),gl[_0x5e0474(0x167)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x5e0474(0x151)]);const _0x4160b7=gl['getAttribLocation'](program,_0x5e0474(0x15b));gl[_0x5e0474(0x19e)](_0x4160b7),gl['vertexAttribPointer'](_0x4160b7,0x2,gl[_0x5e0474(0x148)],![],0x0,0x0);}async function renderPixel(_0x53e076){const _0x3cce61=a0_0x4da85e,_0x2bf2fc=a0_0x958934['getPixelData']();if(!_0x2bf2fc)return;await loadLUT64();const _0x26b764=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2fff45=0x0;_0x2fff45<gameHeight;_0x2fff45++){for(let _0x444466=0x0;_0x444466<gameWidth;_0x444466++){const _0x2bc965=_0x2fff45*gameStride+_0x444466,_0x5ef4b0=(_0x2fff45*gameWidth+_0x444466)*0x4,_0x23bb09=_0x2bf2fc[_0x2bc965],_0x3efe14=(_0x23bb09&0xff)>>0x2,_0x369506=(_0x23bb09>>0x8&0xff)>>0x2,_0x25ad3c=(_0x23bb09>>0x10&0xff)>>0x2,_0xf5957c=(_0x3efe14*0x40*0x40+_0x369506*0x40+_0x25ad3c)*0x3;_0x26b764[_0x5ef4b0]=lut64[_0xf5957c],_0x26b764[_0x5ef4b0+0x1]=lut64[_0xf5957c+0x1],_0x26b764[_0x5ef4b0+0x2]=lut64[_0xf5957c+0x2],_0x26b764[_0x5ef4b0+0x3]=0xff;}}if(_0x53e076===_0x3cce61(0x15a))gl['bindTexture'](gl['TEXTURE_2D'],texture),gl[_0x3cce61(0x185)](gl[_0x3cce61(0x150)],0x0,gl[_0x3cce61(0x1a5)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x3cce61(0x17d)],_0x26b764),gl[_0x3cce61(0x15e)](gl[_0x3cce61(0x171)]),gl[_0x3cce61(0x1a4)](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x53e076==='2d'){ctx2d=bufferCanvas[_0x3cce61(0x193)]('2d'),ctx2d[_0x3cce61(0x146)]=![];const _0x21a0e4=new ImageData(_0x26b764,gameWidth,gameHeight);createImageBitmap(_0x21a0e4)[_0x3cce61(0x1a2)](_0x44b669=>{const _0x222846=_0x3cce61;ctx2d[_0x222846(0x174)](0x0,0x0,bufferCanvas[_0x222846(0x178)],bufferCanvas['height']),ctx2d['drawImage'](_0x44b669,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x53e076));}export async function switchRenderMode(_0x57ab1c){const _0x2f4896=a0_0x4da85e;systemType=gameName[_0x2f4896(0x161)](-0x3);if(_0x57ab1c==='2d')setupStyle('2d'),renderPixel('2d');else _0x57ab1c===_0x2f4896(0x15a)&&(setupStyle(_0x2f4896(0x15a)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x4da85e(0x14d)]('DOMContentLoaded',function(){});