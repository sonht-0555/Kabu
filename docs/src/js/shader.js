function a0_0x3238(){const _0x4db527=['shaderSource','crisp-edges','bufferData','querySelectorAll','style','attachShader','remove','TEXTURE_MAG_FILTER','uniform2f','devicePixelRatio','TEXTURE_WRAP_S','vertexAttribPointer','UNSIGNED_BYTE','screenSize','addEventListener','getPixelData','canvas-container','getShaderParameter','enableVertexAttribArray','./src/shaders/fragmentShader.glsl','toLowerCase','viewport','.bin','getItem','height','createBuffer','position','72642mHEfjR','slice','webgl2','smooth_width','COMPILE_STATUS','RGBA','TEXTURE_2D','floor','getAttribLocation','warm','.message-container','111BJKova','CLAMP_TO_EDGE','error','365pJsyol','TEXTURE_MIN_FILTER','_temperature','TEXTURE_WRAP_T','./src/shaders/vertexShader.glsl','canvas','bindBuffer','then','fefs','width','transform','getShaderInfoLog','35416SpUxIh','WebGL2\x20not\x20supported','drawArrays','compileShader','textured','render_size','texcoord','getElementById','useProgram','ARRAY_BUFFER','4.0','getUniformLocation','FRAGMENT_SHADER','.setting-container','259jmSvVR','imageRendering','NEAREST','classList','scale(','zoom','0,0,','linkProgram','arrayBuffer','.stateTitle,\x20.stateDate','text','forEach','FLOAT','createShader','texParameteri','TRIANGLE_STRIP','_streng','log','img-shader','999ZhGypy','createTexture','documentElement','DOMContentLoaded','top\x20center','VERTEX_SHADER','2656104RwzqCI','game_size','setItem','drawImage','3494660lxLvDY','smooth_height','STATIC_DRAW','getContext','setProperty','clear','--bg-size','7324GCbBSl','imageSmoothingEnabled','gbc','292934CdwFXG','1922XvGrom','transformOrigin'];a0_0x3238=function(){return _0x4db527;};return a0_0x3238();}const a0_0x110c6d=a0_0x4eee;function a0_0x4eee(_0x4f01de,_0xfaea81){const _0x32382c=a0_0x3238();return a0_0x4eee=function(_0x4eeef4,_0x1c8de4){_0x4eeef4=_0x4eeef4-0x1aa;let _0x1801d4=_0x32382c[_0x4eeef4];return _0x1801d4;},a0_0x4eee(_0x4f01de,_0xfaea81);}(function(_0x2e38b7,_0x2fd2a3){const _0x1447dc=a0_0x4eee,_0x563f07=_0x2e38b7();while(!![]){try{const _0x598988=parseInt(_0x1447dc(0x1fe))/0x1+parseInt(_0x1447dc(0x1ff))/0x2*(parseInt(_0x1447dc(0x1ba))/0x3)+parseInt(_0x1447dc(0x1fb))/0x4*(-parseInt(_0x1447dc(0x1bd))/0x5)+-parseInt(_0x1447dc(0x1af))/0x6*(-parseInt(_0x1447dc(0x1d7))/0x7)+parseInt(_0x1447dc(0x1c9))/0x8*(-parseInt(_0x1447dc(0x1ea))/0x9)+parseInt(_0x1447dc(0x1f4))/0xa+-parseInt(_0x1447dc(0x1f0))/0xb;if(_0x598988===_0x2fd2a3)break;else _0x563f07['push'](_0x563f07['shift']());}catch(_0x4f90bd){_0x563f07['push'](_0x563f07['shift']());}}}(a0_0x3238,0x3f540));import*as a0_0x321d64 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x110c6d(0x1d0)](a0_0x110c6d(0x1cd)),bufferCanvas=document[a0_0x110c6d(0x1d0)](a0_0x110c6d(0x1c2)),canvasContainer=document[a0_0x110c6d(0x1d0)](a0_0x110c6d(0x211)),imgShader=document[a0_0x110c6d(0x1d0)](a0_0x110c6d(0x1e9)),settingContainer=document['querySelectorAll'](a0_0x110c6d(0x1d6)),messageContainer=document['querySelectorAll'](a0_0x110c6d(0x1b9)),stateTitle=document[a0_0x110c6d(0x204)](a0_0x110c6d(0x1e0));async function loadLUT64(){const _0x3480b5=a0_0x110c6d;systemType=gameName[_0x3480b5(0x1b0)](-0x3);const _0x26c091=localStorage[_0x3480b5(0x1ab)](gameName+_0x3480b5(0x1e7))||_0x3480b5(0x1d3),_0x86bee5=(localStorage[_0x3480b5(0x1ab)](gameName+_0x3480b5(0x1bf))||_0x3480b5(0x1b8))[_0x3480b5(0x215)]();if(!lut64||lut64Streng!==_0x26c091||lut64Profile!==_0x86bee5){const _0x2da4cf='./src/lut/lut64_'+_0x86bee5+'_'+_0x26c091+_0x3480b5(0x1aa);console[_0x3480b5(0x1e8)](_0x2da4cf);const _0xc63cb0=await fetch(_0x2da4cf),_0x2c194a=await _0xc63cb0[_0x3480b5(0x1df)]();lut64=new Uint8Array(_0x2c194a),lut64Streng=_0x26c091,lut64Profile=_0x86bee5;}}async function loadShaderSource(_0x4a8c00){const _0x2f8842=a0_0x110c6d,_0x544766=await fetch(_0x4a8c00);return await _0x544766[_0x2f8842(0x1e1)]();}function setupStyle(_0x1a66fe){const _0x1a247f=a0_0x110c6d;clientWidth=document[_0x1a247f(0x1ec)]['clientWidth'];const _0xe2881=window[_0x1a247f(0x20a)];systemType===_0x1a247f(0x1fd)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x1a247f(0x1b6)](clientWidth*_0xe2881/gameWidth),localStorage[_0x1a247f(0x1f2)]('screenSize','0,0,'+gameWidth*(integerScaling/_0xe2881)+','+gameHeight*(integerScaling/_0xe2881))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x1a247f(0x1b6)](clientWidth*_0xe2881/gameWidth),localStorage[_0x1a247f(0x1f2)](_0x1a247f(0x20e),_0x1a247f(0x1dd)+gameWidth*(integerScaling/_0xe2881)+','+gameHeight*(integerScaling/_0xe2881)));if(_0x1a66fe==='2d')bufferCanvas[_0x1a247f(0x1c6)]=gameWidth,bufferCanvas[_0x1a247f(0x1ac)]=gameHeight,bufferCanvas[_0x1a247f(0x205)]['zoom']=''+integerScaling/_0xe2881,bufferCanvas[_0x1a247f(0x205)][_0x1a247f(0x1d8)]=_0x1a247f(0x202),canvasContainer[_0x1a247f(0x205)][_0x1a247f(0x1c6)]=gameWidth*(integerScaling/_0xe2881)+'px',canvasContainer[_0x1a247f(0x205)][_0x1a247f(0x1ac)]=gameHeight*(integerScaling/_0xe2881)+'px',textured[_0x1a247f(0x205)][_0x1a247f(0x1c6)]=gameWidth*(integerScaling/_0xe2881)+'px',textured[_0x1a247f(0x205)]['height']=gameHeight*(integerScaling/_0xe2881)+'px',imgShader[_0x1a247f(0x205)]['transform']=_0x1a247f(0x1db)+integerScaling/_0xe2881/upscaleShader+')',settingContainer[_0x1a247f(0x1e2)](function(_0x50b68a){const _0x4e570d=_0x1a247f;_0x50b68a[_0x4e570d(0x205)]['width']=gameWidth*(integerScaling/_0xe2881)+'px',_0x50b68a[_0x4e570d(0x205)][_0x4e570d(0x1ac)]=gameHeight*(integerScaling/_0xe2881)+'px';}),messageContainer[_0x1a247f(0x1e2)](function(_0x2c755e){const _0xac7504=_0x1a247f;_0x2c755e[_0xac7504(0x205)][_0xac7504(0x1c6)]=gameWidth+'px',_0x2c755e[_0xac7504(0x205)][_0xac7504(0x1ac)]=gameHeight+'px',_0x2c755e['style']['zoom']=''+integerScaling/_0xe2881;}),stateTitle[_0x1a247f(0x1e2)](function(_0x4f6625){const _0x3a5e59=_0x1a247f;_0x4f6625[_0x3a5e59(0x1da)][_0x3a5e59(0x207)](_0x3a5e59(0x1c5));});else _0x1a66fe===_0x1a247f(0x1b1)&&(bufferCanvas[_0x1a247f(0x1c6)]=clientWidth*upscaleFactor,bufferCanvas[_0x1a247f(0x1ac)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x1a247f(0x205)]['zoom']=''+0x1/upscaleFactor,bufferCanvas['style'][_0x1a247f(0x1d8)]='',canvasContainer['style'][_0x1a247f(0x1c6)]=clientWidth+'px',canvasContainer[_0x1a247f(0x205)][_0x1a247f(0x1ac)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x1a247f(0x205)][_0x1a247f(0x1c6)]=clientWidth+'px',textured['style'][_0x1a247f(0x1ac)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style'][_0x1a247f(0x1c7)]=_0x1a247f(0x1db)+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x297509){const _0x50564c=_0x1a247f;_0x297509[_0x50564c(0x205)][_0x50564c(0x1c6)]=clientWidth+'px',_0x297509[_0x50564c(0x205)][_0x50564c(0x1ac)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x1a247f(0x1e2)](function(_0x51c6c6){const _0x233905=_0x1a247f;_0x51c6c6['style'][_0x233905(0x1c6)]=gameWidth+'px',_0x51c6c6['style'][_0x233905(0x1ac)]=gameHeight+'px',_0x51c6c6[_0x233905(0x205)][_0x233905(0x1dc)]=''+clientWidth/gameWidth;}),stateTitle[_0x1a247f(0x1e2)](function(_0x4132e5){const _0x4f2f8f=_0x1a247f;_0x4132e5[_0x4f2f8f(0x1da)]['add'](_0x4f2f8f(0x1c5));}));imgShader[_0x1a247f(0x205)][_0x1a247f(0x1c6)]=gameWidth*upscaleShader+'px',imgShader['style'][_0x1a247f(0x1ac)]=gameHeight*upscaleShader+'px',imgShader[_0x1a247f(0x205)][_0x1a247f(0x200)]=_0x1a247f(0x1ee),imgShader[_0x1a247f(0x205)][_0x1a247f(0x1f8)](_0x1a247f(0x1fa),upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x38c435=a0_0x110c6d;gl=bufferCanvas[_0x38c435(0x1f7)](_0x38c435(0x1b1));if(!gl)return console[_0x38c435(0x1bc)](_0x38c435(0x1ca)),null;gl[_0x38c435(0x216)](0x0,0x0,bufferCanvas[_0x38c435(0x1c6)],bufferCanvas[_0x38c435(0x1ac)]);}function createShader(_0x5cb534,_0x3ce833){const _0x1e0b4e=a0_0x110c6d,_0x226eb0=gl[_0x1e0b4e(0x1e4)](_0x5cb534);gl[_0x1e0b4e(0x201)](_0x226eb0,_0x3ce833),gl[_0x1e0b4e(0x1cc)](_0x226eb0);if(!gl[_0x1e0b4e(0x212)](_0x226eb0,gl[_0x1e0b4e(0x1b3)]))return console[_0x1e0b4e(0x1bc)](gl[_0x1e0b4e(0x1c8)](_0x226eb0)),gl['deleteShader'](_0x226eb0),null;return _0x226eb0;}async function setupShaders(){const _0x4e5975=a0_0x110c6d,_0x55bff6=await loadShaderSource(_0x4e5975(0x1c1)),_0x3a6415=await loadShaderSource(_0x4e5975(0x214)),_0x911615=createShader(gl[_0x4e5975(0x1ef)],_0x55bff6),_0x2812d3=createShader(gl[_0x4e5975(0x1d5)],_0x3a6415);return program=gl['createProgram'](),gl[_0x4e5975(0x206)](program,_0x911615),gl[_0x4e5975(0x206)](program,_0x2812d3),gl[_0x4e5975(0x1de)](program),gl[_0x4e5975(0x1d1)](program),program;}function setupTexture(){const _0x4d091a=a0_0x110c6d;texture=gl[_0x4d091a(0x1eb)](),gl['bindTexture'](gl[_0x4d091a(0x1b5)],texture),gl[_0x4d091a(0x1e5)](gl[_0x4d091a(0x1b5)],gl[_0x4d091a(0x1be)],gl[_0x4d091a(0x1d9)]),gl[_0x4d091a(0x1e5)](gl[_0x4d091a(0x1b5)],gl[_0x4d091a(0x208)],gl['NEAREST']),gl[_0x4d091a(0x1e5)](gl['TEXTURE_2D'],gl[_0x4d091a(0x20b)],gl[_0x4d091a(0x1bb)]),gl['texParameteri'](gl[_0x4d091a(0x1b5)],gl[_0x4d091a(0x1c0)],gl[_0x4d091a(0x1bb)]),gl[_0x4d091a(0x209)](gl['getUniformLocation'](program,_0x4d091a(0x1f1)),gameWidth,gameHeight),gl[_0x4d091a(0x209)](gl[_0x4d091a(0x1d4)](program,_0x4d091a(0x1ce)),gl[_0x4d091a(0x1c2)]['width'],gl[_0x4d091a(0x1c2)][_0x4d091a(0x1ac)]),gl['uniform1f'](gl['getUniformLocation'](program,_0x4d091a(0x1b2)),gameWidth/gl[_0x4d091a(0x1c2)]['width']),gl['uniform1f'](gl[_0x4d091a(0x1d4)](program,_0x4d091a(0x1f5)),gameHeight/gl[_0x4d091a(0x1c2)][_0x4d091a(0x1ac)]);}function setupBuffers(){const _0x5a2275=a0_0x110c6d,_0xfe4940=gl['createBuffer']();gl[_0x5a2275(0x1c3)](gl[_0x5a2275(0x1d2)],_0xfe4940),gl[_0x5a2275(0x203)](gl[_0x5a2275(0x1d2)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x5a2275(0x1f6)]);const _0x5c5e35=gl[_0x5a2275(0x1b7)](program,_0x5a2275(0x1ae));gl['enableVertexAttribArray'](_0x5c5e35),gl[_0x5a2275(0x20c)](_0x5c5e35,0x2,gl[_0x5a2275(0x1e3)],![],0x0,0x0);const _0x11a680=gl[_0x5a2275(0x1ad)]();gl[_0x5a2275(0x1c3)](gl['ARRAY_BUFFER'],_0x11a680),gl['bufferData'](gl[_0x5a2275(0x1d2)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x5a2275(0x1f6)]);const _0x4d7407=gl['getAttribLocation'](program,_0x5a2275(0x1cf));gl[_0x5a2275(0x213)](_0x4d7407),gl[_0x5a2275(0x20c)](_0x4d7407,0x2,gl[_0x5a2275(0x1e3)],![],0x0,0x0);}async function renderPixel(_0x5a01ed){const _0x45b2a1=a0_0x110c6d,_0x1e2f69=a0_0x321d64[_0x45b2a1(0x210)]();if(!_0x1e2f69)return;await loadLUT64();const _0x4872c9=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x577f19=0x0;_0x577f19<gameHeight;_0x577f19++){for(let _0x442f85=0x0;_0x442f85<gameWidth;_0x442f85++){const _0x344c85=_0x577f19*gameStride+_0x442f85,_0x2ec4d1=(_0x577f19*gameWidth+_0x442f85)*0x4,_0x4eeec9=_0x1e2f69[_0x344c85],_0x4661e1=(_0x4eeec9&0xff)>>0x2,_0x574a26=(_0x4eeec9>>0x8&0xff)>>0x2,_0x28f13f=(_0x4eeec9>>0x10&0xff)>>0x2,_0x18374c=(_0x4661e1*0x40*0x40+_0x574a26*0x40+_0x28f13f)*0x3;_0x4872c9[_0x2ec4d1]=lut64[_0x18374c],_0x4872c9[_0x2ec4d1+0x1]=lut64[_0x18374c+0x1],_0x4872c9[_0x2ec4d1+0x2]=lut64[_0x18374c+0x2],_0x4872c9[_0x2ec4d1+0x3]=0xff;}}if(_0x5a01ed==='webgl2')gl['bindTexture'](gl[_0x45b2a1(0x1b5)],texture),gl['texImage2D'](gl[_0x45b2a1(0x1b5)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x45b2a1(0x1b4)],gl[_0x45b2a1(0x20d)],_0x4872c9),gl[_0x45b2a1(0x1f9)](gl['COLOR_BUFFER_BIT']),gl[_0x45b2a1(0x1cb)](gl[_0x45b2a1(0x1e6)],0x0,0x4);else{if(_0x5a01ed==='2d'){ctx2d=bufferCanvas[_0x45b2a1(0x1f7)]('2d'),ctx2d[_0x45b2a1(0x1fc)]=![];const _0x173104=new ImageData(_0x4872c9,gameWidth,gameHeight);createImageBitmap(_0x173104)[_0x45b2a1(0x1c4)](_0x532ed1=>{const _0x5ae765=_0x45b2a1;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x5ae765(0x1c6)],bufferCanvas[_0x5ae765(0x1ac)]),ctx2d[_0x5ae765(0x1f3)](_0x532ed1,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x5a01ed));}export async function switchRenderMode(_0x235329){const _0x3cc0d2=a0_0x110c6d;systemType=gameName['slice'](-0x3);if(_0x235329==='2d')setupStyle('2d'),renderPixel('2d');else _0x235329===_0x3cc0d2(0x1b1)&&(setupStyle(_0x3cc0d2(0x1b1)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x110c6d(0x20f)](a0_0x110c6d(0x1ed),function(){});