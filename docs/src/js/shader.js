const a0_0x572e67=a0_0x541a;(function(_0xa9ccdd,_0x448cbe){const _0x139b49=a0_0x541a,_0x1ad8e5=_0xa9ccdd();while(!![]){try{const _0x94fd84=-parseInt(_0x139b49(0x1ff))/0x1*(-parseInt(_0x139b49(0x22c))/0x2)+parseInt(_0x139b49(0x20d))/0x3+-parseInt(_0x139b49(0x23f))/0x4*(parseInt(_0x139b49(0x206))/0x5)+-parseInt(_0x139b49(0x240))/0x6*(-parseInt(_0x139b49(0x214))/0x7)+parseInt(_0x139b49(0x1fb))/0x8+-parseInt(_0x139b49(0x210))/0x9+-parseInt(_0x139b49(0x1ec))/0xa;if(_0x94fd84===_0x448cbe)break;else _0x1ad8e5['push'](_0x1ad8e5['shift']());}catch(_0x4bc2e4){_0x1ad8e5['push'](_0x1ad8e5['shift']());}}}(a0_0x26a2,0xb5267));import*as a0_0xa07bfe from'./main.js';function a0_0x541a(_0x266bbc,_0x43b208){const _0x26a239=a0_0x26a2();return a0_0x541a=function(_0x541a22,_0x2ecafd){_0x541a22=_0x541a22-0x1ec;let _0x12c17b=_0x26a239[_0x541a22];return _0x12c17b;},a0_0x541a(_0x266bbc,_0x43b208);}let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0x572e67(0x228)),bufferCanvas=document[a0_0x572e67(0x224)]('canvas'),canvasContainer=document[a0_0x572e67(0x224)](a0_0x572e67(0x226)),imgShader=document[a0_0x572e67(0x224)](a0_0x572e67(0x246)),settingContainer=document['querySelectorAll'](a0_0x572e67(0x234)),messageContainer=document['querySelectorAll'](a0_0x572e67(0x223)),stateTitle=document[a0_0x572e67(0x219)]('.stateTitle,\x20.stateDate');async function loadLUT64(){const _0x207fcd=a0_0x572e67;systemType=gameName[_0x207fcd(0x233)](-0x3);const _0x24a56c=localStorage[_0x207fcd(0x21b)](gameName+_0x207fcd(0x202))||_0x207fcd(0x22d),_0x4d5d70=(localStorage['getItem'](gameName+'_temperature')||_0x207fcd(0x222))['toLowerCase']();if(!lut64||lut64Streng!==_0x24a56c||lut64Profile!==_0x4d5d70){const _0x426367=_0x207fcd(0x21f)+_0x4d5d70+'_'+_0x24a56c+_0x207fcd(0x232);console['log'](_0x426367);const _0x1cd98b=await fetch(_0x426367),_0x1b913d=await _0x1cd98b[_0x207fcd(0x221)]();lut64=new Uint8Array(_0x1b913d),lut64Streng=_0x24a56c,lut64Profile=_0x4d5d70;}}async function loadShaderSource(_0x873cdf){const _0x34fed1=a0_0x572e67,_0x27b8e8=await fetch(_0x873cdf);return await _0x27b8e8[_0x34fed1(0x24e)]();}function setupStyle(_0x2bb408){const _0x114d53=a0_0x572e67;clientWidth=document[_0x114d53(0x24d)][_0x114d53(0x218)];const _0x2d1701=window['devicePixelRatio'];systemType===_0x114d53(0x1ee)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x114d53(0x1f8)](clientWidth*_0x2d1701/gameWidth),localStorage[_0x114d53(0x237)](_0x114d53(0x22f),_0x114d53(0x217)+gameWidth*(integerScaling/_0x2d1701)+','+gameHeight*(integerScaling/_0x2d1701))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x114d53(0x1f8)](clientWidth*_0x2d1701/gameWidth),localStorage['setItem']('screenSize',_0x114d53(0x217)+gameWidth*(integerScaling/_0x2d1701)+','+gameHeight*(integerScaling/_0x2d1701)));if(_0x2bb408==='2d')bufferCanvas[_0x114d53(0x1f2)]=gameWidth,bufferCanvas[_0x114d53(0x22e)]=gameHeight,bufferCanvas['style'][_0x114d53(0x21d)]=''+integerScaling/_0x2d1701,bufferCanvas['style']['imageRendering']=_0x114d53(0x229),canvasContainer[_0x114d53(0x1fe)][_0x114d53(0x1f2)]=gameWidth*(integerScaling/_0x2d1701)+'px',canvasContainer['style'][_0x114d53(0x22e)]=gameHeight*(integerScaling/_0x2d1701)+'px',textured[_0x114d53(0x1fe)][_0x114d53(0x1f2)]=gameWidth*(integerScaling/_0x2d1701)+'px',textured[_0x114d53(0x1fe)]['height']=gameHeight*(integerScaling/_0x2d1701)+'px',imgShader[_0x114d53(0x1fe)][_0x114d53(0x249)]='scale('+integerScaling/_0x2d1701/upscaleShader+')',settingContainer['forEach'](function(_0x345e16){const _0x55e7ac=_0x114d53;_0x345e16[_0x55e7ac(0x1fe)][_0x55e7ac(0x1f2)]=gameWidth*(integerScaling/_0x2d1701)+'px',_0x345e16[_0x55e7ac(0x1fe)][_0x55e7ac(0x22e)]=gameHeight*(integerScaling/_0x2d1701)+'px';}),messageContainer['forEach'](function(_0x291a5f){const _0xbbd4e5=_0x114d53;_0x291a5f[_0xbbd4e5(0x1fe)]['width']=gameWidth+'px',_0x291a5f[_0xbbd4e5(0x1fe)]['height']=gameHeight+'px',_0x291a5f[_0xbbd4e5(0x1fe)]['zoom']=''+integerScaling/_0x2d1701;}),stateTitle[_0x114d53(0x24b)](function(_0x16b051){const _0xae66d9=_0x114d53;_0x16b051[_0xae66d9(0x230)][_0xae66d9(0x211)]('fefs');});else _0x2bb408===_0x114d53(0x242)&&(bufferCanvas[_0x114d53(0x1f2)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x114d53(0x1fe)][_0x114d53(0x21d)]=''+0x1/upscaleFactor,bufferCanvas[_0x114d53(0x1fe)][_0x114d53(0x244)]='',canvasContainer[_0x114d53(0x1fe)][_0x114d53(0x1f2)]=clientWidth+'px',canvasContainer[_0x114d53(0x1fe)][_0x114d53(0x22e)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x114d53(0x1fe)][_0x114d53(0x1f2)]=clientWidth+'px',textured['style']['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x114d53(0x1fe)][_0x114d53(0x249)]=_0x114d53(0x235)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x114d53(0x24b)](function(_0x49448e){const _0x39e811=_0x114d53;_0x49448e['style'][_0x39e811(0x1f2)]=clientWidth+'px',_0x49448e[_0x39e811(0x1fe)][_0x39e811(0x22e)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x114d53(0x24b)](function(_0x90525d){const _0xe85995=_0x114d53;_0x90525d[_0xe85995(0x1fe)][_0xe85995(0x1f2)]=gameWidth+'px',_0x90525d['style'][_0xe85995(0x22e)]=gameHeight+'px',_0x90525d[_0xe85995(0x1fe)][_0xe85995(0x21d)]=''+clientWidth/gameWidth;}),stateTitle[_0x114d53(0x24b)](function(_0x148f6b){const _0x451fb8=_0x114d53;_0x148f6b[_0x451fb8(0x230)][_0x451fb8(0x1f5)](_0x451fb8(0x239));}));imgShader['style'][_0x114d53(0x1f2)]=gameWidth*upscaleShader+'px',imgShader[_0x114d53(0x1fe)][_0x114d53(0x22e)]=gameHeight*upscaleShader+'px',imgShader[_0x114d53(0x1fe)][_0x114d53(0x23a)]='top\x20center',imgShader[_0x114d53(0x1fe)][_0x114d53(0x1f7)](_0x114d53(0x23e),upscaleShader+_0x114d53(0x243)+upscaleShader+'px');}function setupWebGL(){const _0x2f984a=a0_0x572e67;gl=bufferCanvas[_0x2f984a(0x236)](_0x2f984a(0x242));if(!gl)return console[_0x2f984a(0x205)](_0x2f984a(0x1f3)),null;gl[_0x2f984a(0x1fc)](0x0,0x0,bufferCanvas[_0x2f984a(0x1f2)],bufferCanvas['height']);}function createShader(_0x42c0ce,_0x2fe4fa){const _0x246a25=a0_0x572e67,_0x13fa83=gl['createShader'](_0x42c0ce);gl[_0x246a25(0x200)](_0x13fa83,_0x2fe4fa),gl[_0x246a25(0x20f)](_0x13fa83);if(!gl[_0x246a25(0x1f9)](_0x13fa83,gl[_0x246a25(0x203)]))return console[_0x246a25(0x205)](gl['getShaderInfoLog'](_0x13fa83)),gl['deleteShader'](_0x13fa83),null;return _0x13fa83;}function a0_0x26a2(){const _0x4adba6=['warm','.message-container','getElementById','bufferData','canvas-container','clear','textured','crisp-edges','ARRAY_BUFFER','DOMContentLoaded','1050ghJgzG','4.0','height','screenSize','classList','addEventListener','.bin','slice','.setting-container','scale(','getContext','setItem','TEXTURE_MAG_FILTER','fefs','transformOrigin','uniform2f','smooth_width','linkProgram','--bg-size','268bSgMfs','8807268TiAZCG','FLOAT','webgl2','px\x20','imageRendering','TEXTURE_MIN_FILTER','img-shader','texParameteri','attachShader','transform','getPixelData','forEach','RGBA','documentElement','text','18790720MgRDem','clearRect','gbc','TRIANGLE_STRIP','STATIC_DRAW','CLAMP_TO_EDGE','width','WebGL2\x20not\x20supported','getAttribLocation','add','texcoord','setProperty','floor','getShaderParameter','bindTexture','4334440hgDIXM','viewport','bindBuffer','style','2807EwRfwy','shaderSource','uniform1f','_streng','COMPILE_STATUS','COLOR_BUFFER_BIT','error','92245uigUqu','TEXTURE_2D','NEAREST','drawArrays','createBuffer','enableVertexAttribArray','render_size','1933257oXgsZs','VERTEX_SHADER','compileShader','2435679NFpgde','remove','vertexAttribPointer','createTexture','7jAwPRe','position','drawImage','0,0,','clientWidth','querySelectorAll','UNSIGNED_BYTE','getItem','getUniformLocation','zoom','canvas','./src/lut/lut64_','TEXTURE_WRAP_S','arrayBuffer'];a0_0x26a2=function(){return _0x4adba6;};return a0_0x26a2();}async function setupShaders(){const _0x5b4764=a0_0x572e67,_0x41c2f9=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x4f3104=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x47a26d=createShader(gl[_0x5b4764(0x20e)],_0x41c2f9),_0x5226c2=createShader(gl['FRAGMENT_SHADER'],_0x4f3104);return program=gl['createProgram'](),gl[_0x5b4764(0x248)](program,_0x47a26d),gl['attachShader'](program,_0x5226c2),gl[_0x5b4764(0x23d)](program),gl['useProgram'](program),program;}function setupTexture(){const _0x59b23e=a0_0x572e67;texture=gl[_0x59b23e(0x213)](),gl[_0x59b23e(0x1fa)](gl[_0x59b23e(0x207)],texture),gl[_0x59b23e(0x247)](gl[_0x59b23e(0x207)],gl[_0x59b23e(0x245)],gl['NEAREST']),gl[_0x59b23e(0x247)](gl['TEXTURE_2D'],gl[_0x59b23e(0x238)],gl[_0x59b23e(0x208)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x59b23e(0x220)],gl[_0x59b23e(0x1f1)]),gl[_0x59b23e(0x247)](gl[_0x59b23e(0x207)],gl['TEXTURE_WRAP_T'],gl[_0x59b23e(0x1f1)]),gl[_0x59b23e(0x23b)](gl[_0x59b23e(0x21c)](program,'game_size'),gameWidth,gameHeight),gl[_0x59b23e(0x23b)](gl[_0x59b23e(0x21c)](program,_0x59b23e(0x20c)),gl[_0x59b23e(0x21e)][_0x59b23e(0x1f2)],gl[_0x59b23e(0x21e)]['height']),gl[_0x59b23e(0x201)](gl[_0x59b23e(0x21c)](program,_0x59b23e(0x23c)),gameWidth/gl['canvas']['width']),gl['uniform1f'](gl[_0x59b23e(0x21c)](program,'smooth_height'),gameHeight/gl['canvas'][_0x59b23e(0x22e)]);}function setupBuffers(){const _0x479752=a0_0x572e67,_0x2e37a6=gl[_0x479752(0x20a)]();gl[_0x479752(0x1fd)](gl[_0x479752(0x22a)],_0x2e37a6),gl[_0x479752(0x225)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x5cdf92=gl['getAttribLocation'](program,_0x479752(0x215));gl[_0x479752(0x20b)](_0x5cdf92),gl[_0x479752(0x212)](_0x5cdf92,0x2,gl['FLOAT'],![],0x0,0x0);const _0x46a843=gl[_0x479752(0x20a)]();gl[_0x479752(0x1fd)](gl['ARRAY_BUFFER'],_0x46a843),gl[_0x479752(0x225)](gl[_0x479752(0x22a)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x479752(0x1f0)]);const _0x2d2deb=gl[_0x479752(0x1f4)](program,_0x479752(0x1f6));gl['enableVertexAttribArray'](_0x2d2deb),gl[_0x479752(0x212)](_0x2d2deb,0x2,gl[_0x479752(0x241)],![],0x0,0x0);}async function renderPixel(_0x237195){const _0x127e93=a0_0x572e67,_0x3148e7=a0_0xa07bfe[_0x127e93(0x24a)]();if(!_0x3148e7)return;await loadLUT64();const _0x1f514e=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x28da9f=0x0;_0x28da9f<gameHeight;_0x28da9f++){for(let _0x46abe4=0x0;_0x46abe4<gameWidth;_0x46abe4++){const _0x94e69c=_0x28da9f*gameStride+_0x46abe4,_0x9adb1a=(_0x28da9f*gameWidth+_0x46abe4)*0x4,_0x1e2e3d=_0x3148e7[_0x94e69c],_0x12b454=(_0x1e2e3d&0xff)>>0x2,_0x1a13b2=(_0x1e2e3d>>0x8&0xff)>>0x2,_0x1526f1=(_0x1e2e3d>>0x10&0xff)>>0x2,_0x433867=(_0x12b454*0x40*0x40+_0x1a13b2*0x40+_0x1526f1)*0x3;_0x1f514e[_0x9adb1a]=lut64[_0x433867],_0x1f514e[_0x9adb1a+0x1]=lut64[_0x433867+0x1],_0x1f514e[_0x9adb1a+0x2]=lut64[_0x433867+0x2],_0x1f514e[_0x9adb1a+0x3]=0xff;}}if(_0x237195===_0x127e93(0x242))gl[_0x127e93(0x1fa)](gl[_0x127e93(0x207)],texture),gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x127e93(0x24c)],gameWidth,gameHeight,0x0,gl[_0x127e93(0x24c)],gl[_0x127e93(0x21a)],_0x1f514e),gl[_0x127e93(0x227)](gl[_0x127e93(0x204)]),gl[_0x127e93(0x209)](gl[_0x127e93(0x1ef)],0x0,0x4);else{if(_0x237195==='2d'){ctx2d=bufferCanvas['getContext']('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x5cb9d4=new ImageData(_0x1f514e,gameWidth,gameHeight);createImageBitmap(_0x5cb9d4)['then'](_0x3445e0=>{const _0x47d50d=_0x127e93;ctx2d[_0x47d50d(0x1ed)](0x0,0x0,bufferCanvas[_0x47d50d(0x1f2)],bufferCanvas[_0x47d50d(0x22e)]),ctx2d[_0x47d50d(0x216)](_0x3445e0,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x237195));}export async function switchRenderMode(_0x5f2d47){const _0x1079b2=a0_0x572e67;systemType=gameName[_0x1079b2(0x233)](-0x3);if(_0x5f2d47==='2d')setupStyle('2d'),renderPixel('2d');else _0x5f2d47===_0x1079b2(0x242)&&(setupStyle('webgl2'),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x1079b2(0x242)));}document[a0_0x572e67(0x231)](a0_0x572e67(0x22b),function(){});