(function(_0x2a472a,_0x518077){const _0x21542b=a0_0x289d,_0x522da5=_0x2a472a();while(!![]){try{const _0x17a38c=parseInt(_0x21542b(0x16f))/0x1*(parseInt(_0x21542b(0x140))/0x2)+-parseInt(_0x21542b(0x157))/0x3*(parseInt(_0x21542b(0x14f))/0x4)+-parseInt(_0x21542b(0x177))/0x5+parseInt(_0x21542b(0x15a))/0x6*(parseInt(_0x21542b(0x169))/0x7)+-parseInt(_0x21542b(0x172))/0x8+-parseInt(_0x21542b(0x15d))/0x9*(-parseInt(_0x21542b(0x143))/0xa)+parseInt(_0x21542b(0x159))/0xb;if(_0x17a38c===_0x518077)break;else _0x522da5['push'](_0x522da5['shift']());}catch(_0x33117b){_0x522da5['push'](_0x522da5['shift']());}}}(a0_0x1a43,0xc1431));import*as a0_0x199079 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x1a43(){const _0x44067e=['FLOAT','RGBA','arrayBuffer','texImage2D','6168090uIjExN','width','smooth_height','position','attachShader','bindBuffer','canvas','game_size','render_size','./src/lut/lut64_','log','createShader','createBuffer','VERTEX_SHADER','COLOR_BUFFER_BIT','51432eYEYHG','shaderSource','clearRect','10MJlylt','bindTexture','height','ARRAY_BUFFER','drawImage','smooth_width','getItem','UNSIGNED_BYTE','linkProgram','texcoord','TEXTURE_WRAP_T','warm','1890664YvZBFh','TEXTURE_MIN_FILTER','TEXTURE_2D','getUniformLocation','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','compileShader','createProgram','.bin','9WZxKIi','webgl_full','19008847dPhzRk','318OKetGY','toLowerCase','vertexAttribPointer','2117178ZQgCQG','texParameteri','low-power','slice','getContext','webgl','then','drawArrays','uniform2f','TRIANGLE_STRIP','createTexture','STATIC_DRAW','184618IkDIEh','FRAGMENT_SHADER','viewport','CLAMP_TO_EDGE','getAttribLocation','_temperature','31SZGWja','enableVertexAttribArray','uniform1f','5720960xASGFd'];a0_0x1a43=function(){return _0x44067e;};return a0_0x1a43();}async function loadLUT64(){const _0x4d05c0=a0_0x289d;systemType=gameName[_0x4d05c0(0x160)](-0x3);const _0x14b948=localStorage[_0x4d05c0(0x149)](gameName+'_streng')||'4.0',_0x178d47=(localStorage[_0x4d05c0(0x149)](gameName+_0x4d05c0(0x16e))||_0x4d05c0(0x14e))[_0x4d05c0(0x15b)]();if(!lut64||lut64Streng!==_0x14b948||lut64Profile!==_0x178d47){const _0x3b8fee=_0x4d05c0(0x13a)+_0x178d47+'_'+_0x14b948+_0x4d05c0(0x156);console[_0x4d05c0(0x13b)](_0x3b8fee);const _0x29cb7d=await fetch(_0x3b8fee),_0x394d2b=await _0x29cb7d[_0x4d05c0(0x175)]();lut64=new Uint8Array(_0x394d2b),lut64Streng=_0x14b948,lut64Profile=_0x178d47;}}function a0_0x289d(_0x4828df,_0x32d112){const _0x1a430d=a0_0x1a43();return a0_0x289d=function(_0x289dbd,_0x500e12){_0x289dbd=_0x289dbd-0x13a;let _0x3d7dce=_0x1a430d[_0x289dbd];return _0x3d7dce;},a0_0x289d(_0x4828df,_0x32d112);}function setupWebGL_Shader(_0x5b7a49){const _0x50c716=a0_0x289d;gl=bufferCanvas['getContext']('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x50c716(0x15f)}),gl[_0x50c716(0x16b)](0x0,0x0,bufferCanvas[_0x50c716(0x178)],bufferCanvas[_0x50c716(0x145)]);function _0x2a90d1(_0x28ed7b,_0x38ad45){const _0x2b8078=_0x50c716,_0x2887ff=gl[_0x2b8078(0x13c)](_0x28ed7b);return gl[_0x2b8078(0x141)](_0x2887ff,_0x38ad45),gl[_0x2b8078(0x154)](_0x2887ff),_0x2887ff;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x5b7a49===_0x50c716(0x162))fs=_0x50c716(0x153);else _0x5b7a49===_0x50c716(0x158)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x524181=_0x2a90d1(gl[_0x50c716(0x13e)],vs),_0x532d5f=_0x2a90d1(gl[_0x50c716(0x16a)],fs);return program=gl[_0x50c716(0x155)](),gl[_0x50c716(0x17b)](program,_0x524181),gl['attachShader'](program,_0x532d5f),gl[_0x50c716(0x14b)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x2229fb){const _0x4969a2=a0_0x289d;texture=gl[_0x4969a2(0x167)](),gl[_0x4969a2(0x144)](gl['TEXTURE_2D'],texture),gl[_0x4969a2(0x15e)](gl[_0x4969a2(0x151)],gl[_0x4969a2(0x150)],gl['NEAREST']),gl['texParameteri'](gl['TEXTURE_2D'],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl['texParameteri'](gl[_0x4969a2(0x151)],gl['TEXTURE_WRAP_S'],gl['CLAMP_TO_EDGE']),gl[_0x4969a2(0x15e)](gl['TEXTURE_2D'],gl[_0x4969a2(0x14d)],gl[_0x4969a2(0x16c)]);_0x2229fb===_0x4969a2(0x158)&&(gl[_0x4969a2(0x165)](gl[_0x4969a2(0x152)](program,_0x4969a2(0x17e)),gameWidth,gameHeight),gl[_0x4969a2(0x165)](gl[_0x4969a2(0x152)](program,_0x4969a2(0x17f)),gl[_0x4969a2(0x17d)][_0x4969a2(0x178)],gl[_0x4969a2(0x17d)]['height']),gl['uniform1f'](gl['getUniformLocation'](program,_0x4969a2(0x148)),gameWidth/gl[_0x4969a2(0x17d)][_0x4969a2(0x178)]),gl[_0x4969a2(0x171)](gl[_0x4969a2(0x152)](program,_0x4969a2(0x179)),gameHeight/gl[_0x4969a2(0x17d)][_0x4969a2(0x145)]));const _0x1ee8cc=gl[_0x4969a2(0x13d)]();gl[_0x4969a2(0x17c)](gl[_0x4969a2(0x146)],_0x1ee8cc),gl['bufferData'](gl[_0x4969a2(0x146)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x4969a2(0x168)]),gl[_0x4969a2(0x15c)](gl[_0x4969a2(0x16d)](program,_0x4969a2(0x17a)),0x2,gl[_0x4969a2(0x173)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x4969a2(0x16d)](program,_0x4969a2(0x17a)));const _0x3ed906=gl[_0x4969a2(0x13d)]();gl[_0x4969a2(0x17c)](gl['ARRAY_BUFFER'],_0x3ed906),gl['bufferData'](gl[_0x4969a2(0x146)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4969a2(0x168)]),gl[_0x4969a2(0x15c)](gl['getAttribLocation'](program,_0x4969a2(0x14c)),0x2,gl[_0x4969a2(0x173)],![],0x0,0x0),gl[_0x4969a2(0x170)](gl[_0x4969a2(0x16d)](program,_0x4969a2(0x14c)));}function setup2DContext(){const _0x15a858=a0_0x289d;ctx2d=bufferCanvas[_0x15a858(0x161)]('2d'),ctx2d['imageSmoothingEnabled']=![];}async function renderPixel(_0x3dd98e){const _0x219579=a0_0x289d,_0x5c2f13=a0_0x199079['getPixelData']();if(!_0x5c2f13)return;await loadLUT64();const _0x24a1ba=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x497c32=0x0;_0x497c32<gameHeight;_0x497c32++){for(let _0xcfaccc=0x0;_0xcfaccc<gameWidth;_0xcfaccc++){const _0x377b1a=_0x497c32*gameStride+_0xcfaccc,_0x2caa15=(_0x497c32*gameWidth+_0xcfaccc)*0x4,_0x2cdbd9=_0x5c2f13[_0x377b1a],_0x30fb04=(_0x2cdbd9&0xff)>>0x2,_0x7cf5=(_0x2cdbd9>>0x8&0xff)>>0x2,_0x192ba5=(_0x2cdbd9>>0x10&0xff)>>0x2,_0xe81b17=(_0x30fb04*0x40*0x40+_0x7cf5*0x40+_0x192ba5)*0x3;_0x24a1ba[_0x2caa15]=lut64[_0xe81b17],_0x24a1ba[_0x2caa15+0x1]=lut64[_0xe81b17+0x1],_0x24a1ba[_0x2caa15+0x2]=lut64[_0xe81b17+0x2],_0x24a1ba[_0x2caa15+0x3]=0xff;}}if(_0x3dd98e===_0x219579(0x162))gl[_0x219579(0x176)](gl[_0x219579(0x151)],0x0,gl[_0x219579(0x174)],gameWidth,gameHeight,0x0,gl[_0x219579(0x174)],gl[_0x219579(0x14a)],_0x24a1ba),gl['clear'](gl[_0x219579(0x13f)]),gl[_0x219579(0x164)](gl[_0x219579(0x166)],0x0,0x4);else _0x3dd98e==='2d'&&(imageDataObj=new ImageData(_0x24a1ba,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x219579(0x163)](_0x4351be=>{const _0x511a21=_0x219579;ctx2d[_0x511a21(0x142)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x511a21(0x145)]),ctx2d[_0x511a21(0x147)](_0x4351be,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x3dd98e));}export async function switchRenderMode(_0x1e8f50){const _0xf98dba=a0_0x289d;systemType=gameName[_0xf98dba(0x160)](-0x3);if(_0x1e8f50==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x1e8f50===_0xf98dba(0x162))setupStyle('2d'),setupWebGL_Shader(_0xf98dba(0x162)),setupTexture_Buffer(_0xf98dba(0x162)),renderPixel(_0xf98dba(0x162));else _0x1e8f50===_0xf98dba(0x158)&&(setupStyle(_0xf98dba(0x158)),setupWebGL_Shader(_0xf98dba(0x158)),setupTexture_Buffer(_0xf98dba(0x158)),renderPixel(_0xf98dba(0x162)));}}