(function(_0x4fdb10,_0x22e0a1){const _0x8bdccf=a0_0x4ed0,_0x1b7dcb=_0x4fdb10();while(!![]){try{const _0x46b146=-parseInt(_0x8bdccf(0x1fa))/0x1+-parseInt(_0x8bdccf(0x1d7))/0x2*(parseInt(_0x8bdccf(0x1e8))/0x3)+-parseInt(_0x8bdccf(0x1f5))/0x4*(parseInt(_0x8bdccf(0x1ce))/0x5)+parseInt(_0x8bdccf(0x1f1))/0x6*(parseInt(_0x8bdccf(0x1fc))/0x7)+-parseInt(_0x8bdccf(0x1d8))/0x8+parseInt(_0x8bdccf(0x203))/0x9+-parseInt(_0x8bdccf(0x1db))/0xa*(-parseInt(_0x8bdccf(0x1cd))/0xb);if(_0x46b146===_0x22e0a1)break;else _0x1b7dcb['push'](_0x1b7dcb['shift']());}catch(_0x22cc34){_0x1b7dcb['push'](_0x1b7dcb['shift']());}}}(a0_0x32da,0x54ff7));import*as a0_0x7077cd from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x589337=a0_0x4ed0;systemType=gameName[_0x589337(0x201)](-0x3);const _0x23ebb1=(localStorage[_0x589337(0x202)](gameName+_0x589337(0x1e5))||_0x589337(0x1cb))[_0x589337(0x20a)]();if(!lut64||lut64Profile!==_0x23ebb1){const _0x9d0eda=_0x589337(0x1e2)+_0x23ebb1+'_4.0.bin';console[_0x589337(0x1ed)](_0x9d0eda);const _0x22ea27=await fetch(_0x9d0eda),_0xa38d50=await _0x22ea27['arrayBuffer']();lut64=new Uint8Array(_0xa38d50),lut64Profile=_0x23ebb1;}}function setupWebGL_Shader(_0x4e599b){const _0x1c38ae=a0_0x4ed0;gl=bufferCanvas[_0x1c38ae(0x1e0)](_0x1c38ae(0x1d3),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x1c38ae(0x1d5)}),gl[_0x1c38ae(0x1e6)](0x0,0x0,bufferCanvas[_0x1c38ae(0x1dd)],bufferCanvas['height']);function _0x460802(_0x228ff5,_0x1b4243){const _0x31c718=_0x1c38ae,_0xeb43d8=gl['createShader'](_0x228ff5);return gl[_0x31c718(0x1ec)](_0xeb43d8,_0x1b4243),gl[_0x31c718(0x1f3)](_0xeb43d8),_0xeb43d8;}vs=_0x1c38ae(0x1ff);if(_0x4e599b===_0x1c38ae(0x1d3))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x4e599b===_0x1c38ae(0x200)&&(fs=_0x1c38ae(0x205));const _0x5c70c7=_0x460802(gl[_0x1c38ae(0x1fd)],vs),_0xd3b314=_0x460802(gl[_0x1c38ae(0x1fe)],fs);return program=gl[_0x1c38ae(0x1f4)](),gl[_0x1c38ae(0x1da)](program,_0x5c70c7),gl[_0x1c38ae(0x1da)](program,_0xd3b314),gl['linkProgram'](program),gl['useProgram'](program),program;}function a0_0x32da(){const _0x5a67bc=['getItem','798777gSUmIJ','uniform2f','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','enableVertexAttribArray','TEXTURE_MAG_FILTER','getAttribLocation','TRIANGLE_STRIP','toLowerCase','clear','bufferData','getUniformLocation','FLOAT','bindTexture','ARRAY_BUFFER','none','height','1179222TkrrDf','1819830bLjNTz','render_size','texImage2D','createTexture','bindBuffer','webgl','texParameteri','low-power','data','7816sVgJvC','535120HTPpss','createBuffer','attachShader','120QKqcWW','UNSIGNED_BYTE','width','COLOR_BUFFER_BIT','TEXTURE_2D','getContext','getPixelData','./src/lut/lut64_','uniform1f','set','_temperature','viewport','canvas','192PHVTZI','smooth_height','TEXTURE_WRAP_S','NEAREST','shaderSource','log','game_size','TEXTURE_MIN_FILTER','putImageData','11094QokuKr','position','compileShader','createProgram','4pjGqIm','RGBA','vertexAttribPointer','texcoord','STATIC_DRAW','408924UmUkFm','smooth_width','238PCYWhW','VERTEX_SHADER','FRAGMENT_SHADER','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','webgl_full','slice'];a0_0x32da=function(){return _0x5a67bc;};return a0_0x32da();}function setupTexture_Buffer(_0x272851){const _0x54cc37=a0_0x4ed0;texture=gl[_0x54cc37(0x1d1)](),gl[_0x54cc37(0x20f)](gl[_0x54cc37(0x1df)],texture),gl[_0x54cc37(0x1d4)](gl[_0x54cc37(0x1df)],gl[_0x54cc37(0x1ef)],gl[_0x54cc37(0x1eb)]),gl[_0x54cc37(0x1d4)](gl[_0x54cc37(0x1df)],gl[_0x54cc37(0x207)],gl[_0x54cc37(0x1eb)]),gl[_0x54cc37(0x1d4)](gl['TEXTURE_2D'],gl[_0x54cc37(0x1ea)],gl['CLAMP_TO_EDGE']),gl[_0x54cc37(0x1d4)](gl[_0x54cc37(0x1df)],gl['TEXTURE_WRAP_T'],gl['CLAMP_TO_EDGE']);_0x272851===_0x54cc37(0x200)&&(gl[_0x54cc37(0x204)](gl[_0x54cc37(0x20d)](program,_0x54cc37(0x1ee)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x54cc37(0x20d)](program,_0x54cc37(0x1cf)),gl[_0x54cc37(0x1e7)][_0x54cc37(0x1dd)],gl['canvas'][_0x54cc37(0x1cc)]),gl[_0x54cc37(0x1e3)](gl['getUniformLocation'](program,_0x54cc37(0x1fb)),gameWidth/gl[_0x54cc37(0x1e7)][_0x54cc37(0x1dd)]),gl[_0x54cc37(0x1e3)](gl[_0x54cc37(0x20d)](program,_0x54cc37(0x1e9)),gameHeight/gl['canvas'][_0x54cc37(0x1cc)]));const _0x2d1a71=gl[_0x54cc37(0x1d9)]();gl[_0x54cc37(0x1d2)](gl[_0x54cc37(0x1ca)],_0x2d1a71),gl[_0x54cc37(0x20c)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x54cc37(0x1f9)]),gl['vertexAttribPointer'](gl['getAttribLocation'](program,'position'),0x2,gl[_0x54cc37(0x20e)],![],0x0,0x0),gl[_0x54cc37(0x206)](gl[_0x54cc37(0x208)](program,_0x54cc37(0x1f2)));const _0x22ea60=gl[_0x54cc37(0x1d9)]();gl['bindBuffer'](gl[_0x54cc37(0x1ca)],_0x22ea60),gl[_0x54cc37(0x20c)](gl[_0x54cc37(0x1ca)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x54cc37(0x1f9)]),gl[_0x54cc37(0x1f7)](gl[_0x54cc37(0x208)](program,_0x54cc37(0x1f8)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x54cc37(0x206)](gl[_0x54cc37(0x208)](program,'texcoord'));}function setup2DContext(){ctx2d=bufferCanvas['getContext']('2d'),ctx2d['imageSmoothingEnabled']=![];}function a0_0x4ed0(_0x1d4db4,_0x2a96fd){const _0x32da18=a0_0x32da();return a0_0x4ed0=function(_0x4ed0f2,_0x491bf1){_0x4ed0f2=_0x4ed0f2-0x1ca;let _0x59cb06=_0x32da18[_0x4ed0f2];return _0x59cb06;},a0_0x4ed0(_0x1d4db4,_0x2a96fd);}async function renderPixel(_0x43275a){const _0x14bac5=a0_0x4ed0,_0x5c59ac=a0_0x7077cd[_0x14bac5(0x1e1)]();if(!_0x5c59ac)return;await loadLUT64();const _0x2e09f5=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1f5b11=0x0;_0x1f5b11<gameHeight;_0x1f5b11++){for(let _0x4eb0a0=0x0;_0x4eb0a0<gameWidth;_0x4eb0a0++){const _0x3c6d81=_0x1f5b11*gameStride+_0x4eb0a0,_0x4a9194=(_0x1f5b11*gameWidth+_0x4eb0a0)*0x4,_0x33ca42=_0x5c59ac[_0x3c6d81];if(lut64Profile===_0x14bac5(0x1cb))_0x2e09f5[_0x4a9194]=_0x33ca42&0xff,_0x2e09f5[_0x4a9194+0x1]=_0x33ca42>>0x8&0xff,_0x2e09f5[_0x4a9194+0x2]=_0x33ca42>>0x10&0xff,_0x2e09f5[_0x4a9194+0x3]=0xff;else{const _0x391723=(_0x33ca42&0xff)>>0x2,_0x492072=(_0x33ca42>>0x8&0xff)>>0x2,_0x402d41=(_0x33ca42>>0x10&0xff)>>0x2,_0x41057f=(_0x391723*0x40*0x40+_0x492072*0x40+_0x402d41)*0x3;_0x2e09f5[_0x4a9194]=lut64[_0x41057f],_0x2e09f5[_0x4a9194+0x1]=lut64[_0x41057f+0x1],_0x2e09f5[_0x4a9194+0x2]=lut64[_0x41057f+0x2],_0x2e09f5[_0x4a9194+0x3]=0xff;}}}if(_0x43275a===_0x14bac5(0x1d3))gl[_0x14bac5(0x1d0)](gl[_0x14bac5(0x1df)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x14bac5(0x1f6)],gl[_0x14bac5(0x1dc)],_0x2e09f5),gl[_0x14bac5(0x20b)](gl[_0x14bac5(0x1de)]),gl['drawArrays'](gl[_0x14bac5(0x209)],0x0,0x4);else _0x43275a==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x2e09f5,gameWidth,gameHeight):imageDataObj[_0x14bac5(0x1d6)][_0x14bac5(0x1e4)](_0x2e09f5),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x14bac5(0x1dd)],bufferCanvas['height']),ctx2d[_0x14bac5(0x1f0)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x43275a));}export async function switchRenderMode(_0x28486b){const _0x22c300=a0_0x4ed0;systemType=gameName[_0x22c300(0x201)](-0x3);if(_0x28486b==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x28486b===_0x22c300(0x1d3))setupStyle('2d'),setupWebGL_Shader(_0x22c300(0x1d3)),setupTexture_Buffer(_0x22c300(0x1d3)),renderPixel(_0x22c300(0x1d3));else _0x28486b===_0x22c300(0x200)&&(setupStyle('webgl_full'),setupWebGL_Shader(_0x22c300(0x200)),setupTexture_Buffer('webgl_full'),renderPixel(_0x22c300(0x1d3)));}}