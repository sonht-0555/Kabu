(function(_0x2ffcd6,_0x322fff){const _0x3c8bbf=a0_0x4849,_0x4c84eb=_0x2ffcd6();while(!![]){try{const _0x9dd8b0=parseInt(_0x3c8bbf(0xd7))/0x1*(-parseInt(_0x3c8bbf(0xf9))/0x2)+parseInt(_0x3c8bbf(0xfd))/0x3*(parseInt(_0x3c8bbf(0x101))/0x4)+-parseInt(_0x3c8bbf(0xf0))/0x5+-parseInt(_0x3c8bbf(0xf7))/0x6*(-parseInt(_0x3c8bbf(0xed))/0x7)+-parseInt(_0x3c8bbf(0x107))/0x8+parseInt(_0x3c8bbf(0xe0))/0x9*(-parseInt(_0x3c8bbf(0xec))/0xa)+-parseInt(_0x3c8bbf(0x105))/0xb*(-parseInt(_0x3c8bbf(0x103))/0xc);if(_0x9dd8b0===_0x322fff)break;else _0x4c84eb['push'](_0x4c84eb['shift']());}catch(_0x297a33){_0x4c84eb['push'](_0x4c84eb['shift']());}}}(a0_0x13f0,0xacd79));import*as a0_0x3cf53e from'./main.js';function a0_0x13f0(){const _0x12c8df=['TEXTURE_WRAP_T','24228BWLUwJ','position','18568DTybRF','getAttribLocation','9413576LpSGkR','TEXTURE_MIN_FILTER','clearRect','UNSIGNED_BYTE','TEXTURE_MAG_FILTER','enableVertexAttribArray','NEAREST','getItem','webgl','TRIANGLE_STRIP','getContext','linkProgram','1114019AlPdhw','.bin','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','CLAMP_TO_EDGE','then','./src/lut/lut64_','ARRAY_BUFFER','width','clear','4938453cRkHTs','texImage2D','imageSmoothingEnabled','COLOR_BUFFER_BIT','low-power','warm','createTexture','bindBuffer','TEXTURE_2D','texcoord','drawImage','vertexAttribPointer','20tnDXaB','1113147NDBKim','viewport','attachShader','2672300pZcWAx','slice','_streng','bufferData','STATIC_DRAW','compileShader','shaderSource','6hgCcWb','texParameteri','2ljHCqd','_temperature','FLOAT','height','3eNikLv','createBuffer','RGBA','createShader','4253912vXDzXC'];a0_0x13f0=function(){return _0x12c8df;};return a0_0x13f0();}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null;async function loadLUT64(){const _0x53dccf=a0_0x4849;systemType=gameName[_0x53dccf(0xf1)](-0x3);const _0x29c8f8=localStorage[_0x53dccf(0x10e)](gameName+_0x53dccf(0xf2))||'4.0',_0x314fc7=(localStorage[_0x53dccf(0x10e)](gameName+_0x53dccf(0xfa))||_0x53dccf(0xe5))['toLowerCase']();if(!lut64||lut64Streng!==_0x29c8f8||lut64Profile!==_0x314fc7){const _0x56eb02=_0x53dccf(0xdc)+_0x314fc7+'_'+_0x29c8f8+_0x53dccf(0xd8);console['log'](_0x56eb02);const _0x2d6c97=await fetch(_0x56eb02),_0x283557=await _0x2d6c97['arrayBuffer']();lut64=new Uint8Array(_0x283557),lut64Streng=_0x29c8f8,lut64Profile=_0x314fc7;}}function a0_0x4849(_0x4123fa,_0x49c72c){const _0x13f016=a0_0x13f0();return a0_0x4849=function(_0x48499a,_0x5612df){_0x48499a=_0x48499a-0xd5;let _0x4fa663=_0x13f016[_0x48499a];return _0x4fa663;},a0_0x4849(_0x4123fa,_0x49c72c);}function setupWebGL_Shader(_0x4cbaf0){const _0x29a2b2=a0_0x4849;gl=bufferCanvas[_0x29a2b2(0xd5)](_0x4cbaf0,{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x29a2b2(0xe4)}),gl[_0x29a2b2(0xee)](0x0,0x0,bufferCanvas[_0x29a2b2(0xde)],bufferCanvas[_0x29a2b2(0xfc)]);function _0x133f39(_0x31e860,_0x242f2a){const _0x2e41ba=_0x29a2b2,_0x4463fd=gl[_0x2e41ba(0x100)](_0x31e860);return gl[_0x2e41ba(0xf6)](_0x4463fd,_0x242f2a),gl[_0x2e41ba(0xf5)](_0x4463fd),_0x4463fd;}const _0x1dd5f2='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}',_0x2db803=_0x29a2b2(0xd9),_0x270799=_0x133f39(gl['VERTEX_SHADER'],_0x1dd5f2),_0xd18298=_0x133f39(gl['FRAGMENT_SHADER'],_0x2db803);return program=gl['createProgram'](),gl['attachShader'](program,_0x270799),gl[_0x29a2b2(0xef)](program,_0xd18298),gl[_0x29a2b2(0xd6)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(){const _0x13053d=a0_0x4849;texture=gl[_0x13053d(0xe6)](),gl['bindTexture'](gl[_0x13053d(0xe8)],texture),gl['texParameteri'](gl[_0x13053d(0xe8)],gl[_0x13053d(0x108)],gl[_0x13053d(0x10d)]),gl['texParameteri'](gl[_0x13053d(0xe8)],gl[_0x13053d(0x10b)],gl[_0x13053d(0x10d)]),gl[_0x13053d(0xf8)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0x13053d(0xda)]),gl[_0x13053d(0xf8)](gl[_0x13053d(0xe8)],gl[_0x13053d(0x102)],gl['CLAMP_TO_EDGE']);const _0x6852ef=gl[_0x13053d(0xfe)]();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x6852ef),gl[_0x13053d(0xf3)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x13053d(0xeb)](gl[_0x13053d(0x106)](program,_0x13053d(0x104)),0x2,gl[_0x13053d(0xfb)],![],0x0,0x0),gl[_0x13053d(0x10c)](gl[_0x13053d(0x106)](program,_0x13053d(0x104)));const _0x30125c=gl[_0x13053d(0xfe)]();gl[_0x13053d(0xe7)](gl[_0x13053d(0xdd)],_0x30125c),gl[_0x13053d(0xf3)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x13053d(0xf4)]),gl[_0x13053d(0xeb)](gl[_0x13053d(0x106)](program,_0x13053d(0xe9)),0x2,gl[_0x13053d(0xfb)],![],0x0,0x0),gl[_0x13053d(0x10c)](gl[_0x13053d(0x106)](program,_0x13053d(0xe9)));}function setup2DContext(){const _0x5295d5=a0_0x4849;ctx2d=bufferCanvas[_0x5295d5(0xd5)]('2d'),ctx2d[_0x5295d5(0xe2)]=![];}async function renderPixel(_0x24762b){const _0x5e0e5b=a0_0x4849,_0xb69017=a0_0x3cf53e['getPixelData']();if(!_0xb69017)return;await loadLUT64();const _0x3723cb=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x282c86=0x0;_0x282c86<gameHeight;_0x282c86++){for(let _0x56e72f=0x0;_0x56e72f<gameWidth;_0x56e72f++){const _0xc96416=_0x282c86*gameStride+_0x56e72f,_0x4cfb7b=(_0x282c86*gameWidth+_0x56e72f)*0x4,_0x11abb4=_0xb69017[_0xc96416],_0x7360ff=(_0x11abb4&0xff)>>0x2,_0x7ba7e6=(_0x11abb4>>0x8&0xff)>>0x2,_0x2a4c31=(_0x11abb4>>0x10&0xff)>>0x2,_0x31f072=(_0x7360ff*0x40*0x40+_0x7ba7e6*0x40+_0x2a4c31)*0x3;_0x3723cb[_0x4cfb7b]=lut64[_0x31f072],_0x3723cb[_0x4cfb7b+0x1]=lut64[_0x31f072+0x1],_0x3723cb[_0x4cfb7b+0x2]=lut64[_0x31f072+0x2],_0x3723cb[_0x4cfb7b+0x3]=0xff;}}if(_0x24762b===_0x5e0e5b(0x10f))gl[_0x5e0e5b(0xe1)](gl['TEXTURE_2D'],0x0,gl[_0x5e0e5b(0xff)],gameWidth,gameHeight,0x0,gl[_0x5e0e5b(0xff)],gl[_0x5e0e5b(0x10a)],_0x3723cb),gl[_0x5e0e5b(0xdf)](gl[_0x5e0e5b(0xe3)]),gl['drawArrays'](gl[_0x5e0e5b(0x110)],0x0,0x4);else _0x24762b==='2d'&&(imageDataObj=new ImageData(_0x3723cb,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x5e0e5b(0xdb)](_0x208391=>{const _0x316c24=_0x5e0e5b;ctx2d[_0x316c24(0x109)](0x0,0x0,bufferCanvas[_0x316c24(0xde)],bufferCanvas[_0x316c24(0xfc)]),ctx2d[_0x316c24(0xea)](_0x208391,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x24762b));}export async function switchRenderMode(_0x225048){const _0x59fc26=a0_0x4849;systemType=gameName[_0x59fc26(0xf1)](-0x3);if(_0x225048==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else _0x225048===_0x59fc26(0x10f)&&(setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer(),renderPixel('webgl'));}