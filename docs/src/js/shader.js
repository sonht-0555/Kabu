(function(_0x942309,_0x5b09aa){const _0x135e4a=a0_0x4e35,_0x5e4635=_0x942309();while(!![]){try{const _0x465e0a=parseInt(_0x135e4a(0x100))/0x1*(-parseInt(_0x135e4a(0x119))/0x2)+-parseInt(_0x135e4a(0xe3))/0x3+parseInt(_0x135e4a(0xeb))/0x4+parseInt(_0x135e4a(0x10a))/0x5*(-parseInt(_0x135e4a(0x117))/0x6)+parseInt(_0x135e4a(0x10b))/0x7+-parseInt(_0x135e4a(0x11f))/0x8+parseInt(_0x135e4a(0xe7))/0x9*(parseInt(_0x135e4a(0xed))/0xa);if(_0x465e0a===_0x5b09aa)break;else _0x5e4635['push'](_0x5e4635['shift']());}catch(_0x2bc85){_0x5e4635['push'](_0x5e4635['shift']());}}}(a0_0x4580,0x29f97));import*as a0_0x542635 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x4e112a=a0_0x4e35;systemType=gameName[_0x4e112a(0x111)](-0x3);const _0x4d518c=(localStorage[_0x4e112a(0x107)](gameName+_0x4e112a(0x102))||_0x4e112a(0x118))['toLowerCase']();if(!lut64||lut64Profile!==_0x4d518c){const _0x1e0388=_0x4e112a(0xe9)+_0x4d518c+_0x4e112a(0xe8);console[_0x4e112a(0xec)](_0x1e0388);const _0x1c6ccd=await fetch(_0x1e0388),_0xccef42=await _0x1c6ccd['arrayBuffer']();lut64=new Uint8Array(_0xccef42),lut64Profile=_0x4d518c;}}function setupWebGL_Shader(_0x25d263){const _0x42914e=a0_0x4e35;gl=bufferCanvas[_0x42914e(0xea)](_0x42914e(0x101),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x42914e(0x115)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x42914e(0x105)],bufferCanvas[_0x42914e(0x11b)]);function _0xef8e9e(_0x4f9fd2,_0x4661d5){const _0x12708d=_0x42914e,_0x4a737f=gl[_0x12708d(0x114)](_0x4f9fd2);return gl['shaderSource'](_0x4a737f,_0x4661d5),gl[_0x12708d(0x120)](_0x4a737f),_0x4a737f;}vs=_0x42914e(0xf8);if(_0x25d263==='webgl')fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x25d263==='webgl_full'&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x4974b9=_0xef8e9e(gl['VERTEX_SHADER'],vs),_0x1c9d70=_0xef8e9e(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x42914e(0xef)](),gl[_0x42914e(0xfd)](program,_0x4974b9),gl[_0x42914e(0xfd)](program,_0x1c9d70),gl['linkProgram'](program),gl[_0x42914e(0xee)](program),program;}function a0_0x4580(){const _0xb01913=['imageSmoothingEnabled','drawArrays','COLOR_BUFFER_BIT','getPixelData','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','createBuffer','NEAREST','bindTexture','TEXTURE_MAG_FILTER','attachShader','smooth_height','webgl_full','1eeirNX','webgl','_temperature','ARRAY_BUFFER','getUniformLocation','width','TEXTURE_MIN_FILTER','getItem','putImageData','texImage2D','25sXkTwm','882903wfaKhb','texParameteri','STATIC_DRAW','uniform1f','bufferData','TRIANGLE_STRIP','slice','getAttribLocation','canvas','createShader','low-power','uniform2f','6918dSIaVM','none','671444tTIUVa','clear','height','enableVertexAttribArray','RGBA','createTexture','2546656KWZKZT','compileShader','game_size','texcoord','UNSIGNED_BYTE','626781fbKScW','bindBuffer','TEXTURE_2D','TEXTURE_WRAP_S','2695023orAUBr','_4.0.bin','./src/lut/lut64_','getContext','64812hdGVIq','log','30HmmAjF','useProgram','createProgram','set','position','FLOAT','vertexAttribPointer'];a0_0x4580=function(){return _0xb01913;};return a0_0x4580();}function setupTexture_Buffer(_0x14364c){const _0x3dd860=a0_0x4e35;texture=gl[_0x3dd860(0x11e)](),gl[_0x3dd860(0xfb)](gl['TEXTURE_2D'],texture),gl[_0x3dd860(0x10c)](gl[_0x3dd860(0xe5)],gl[_0x3dd860(0x106)],gl['NEAREST']),gl['texParameteri'](gl[_0x3dd860(0xe5)],gl[_0x3dd860(0xfc)],gl[_0x3dd860(0xfa)]),gl[_0x3dd860(0x10c)](gl['TEXTURE_2D'],gl[_0x3dd860(0xe6)],gl['CLAMP_TO_EDGE']),gl[_0x3dd860(0x10c)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_T'],gl['CLAMP_TO_EDGE']);_0x14364c==='webgl_full'&&(gl[_0x3dd860(0x116)](gl[_0x3dd860(0x104)](program,_0x3dd860(0xe0)),gameWidth,gameHeight),gl[_0x3dd860(0x116)](gl[_0x3dd860(0x104)](program,'render_size'),gl['canvas'][_0x3dd860(0x105)],gl[_0x3dd860(0x113)]['height']),gl['uniform1f'](gl[_0x3dd860(0x104)](program,'smooth_width'),gameWidth/gl[_0x3dd860(0x113)]['width']),gl[_0x3dd860(0x10e)](gl['getUniformLocation'](program,_0x3dd860(0xfe)),gameHeight/gl[_0x3dd860(0x113)][_0x3dd860(0x11b)]));const _0x279e11=gl[_0x3dd860(0xf9)]();gl[_0x3dd860(0xe4)](gl['ARRAY_BUFFER'],_0x279e11),gl[_0x3dd860(0x10f)](gl[_0x3dd860(0x103)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x3dd860(0x10d)]),gl[_0x3dd860(0xf3)](gl['getAttribLocation'](program,_0x3dd860(0xf1)),0x2,gl['FLOAT'],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x3dd860(0x112)](program,_0x3dd860(0xf1)));const _0x15de6a=gl['createBuffer']();gl[_0x3dd860(0xe4)](gl['ARRAY_BUFFER'],_0x15de6a),gl['bufferData'](gl[_0x3dd860(0x103)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x3dd860(0x10d)]),gl[_0x3dd860(0xf3)](gl['getAttribLocation'](program,_0x3dd860(0xe1)),0x2,gl[_0x3dd860(0xf2)],![],0x0,0x0),gl[_0x3dd860(0x11c)](gl['getAttribLocation'](program,'texcoord'));}function setup2DContext(){const _0x11a306=a0_0x4e35;ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x11a306(0xf4)]=![];}async function renderPixel(_0x460818){const _0x4c1d1c=a0_0x4e35,_0x15b34c=a0_0x542635[_0x4c1d1c(0xf7)]();if(!_0x15b34c)return;await loadLUT64();const _0x3fa971=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x21fcab=0x0;_0x21fcab<gameHeight;_0x21fcab++){for(let _0x4f57a0=0x0;_0x4f57a0<gameWidth;_0x4f57a0++){const _0x20ab02=_0x21fcab*gameStride+_0x4f57a0,_0x218f2b=(_0x21fcab*gameWidth+_0x4f57a0)*0x4,_0x29dc1b=_0x15b34c[_0x20ab02];if(lut64Profile==='none')_0x3fa971[_0x218f2b]=_0x29dc1b&0xff,_0x3fa971[_0x218f2b+0x1]=_0x29dc1b>>0x8&0xff,_0x3fa971[_0x218f2b+0x2]=_0x29dc1b>>0x10&0xff,_0x3fa971[_0x218f2b+0x3]=0xff;else{const _0x2594fd=(_0x29dc1b&0xff)>>0x2,_0x5e5ab1=(_0x29dc1b>>0x8&0xff)>>0x2,_0x1c3f95=(_0x29dc1b>>0x10&0xff)>>0x2,_0x180ba0=(_0x2594fd*0x40*0x40+_0x5e5ab1*0x40+_0x1c3f95)*0x3;_0x3fa971[_0x218f2b]=lut64[_0x180ba0],_0x3fa971[_0x218f2b+0x1]=lut64[_0x180ba0+0x1],_0x3fa971[_0x218f2b+0x2]=lut64[_0x180ba0+0x2],_0x3fa971[_0x218f2b+0x3]=0xff;}}}if(_0x460818===_0x4c1d1c(0x101))gl[_0x4c1d1c(0x109)](gl[_0x4c1d1c(0xe5)],0x0,gl[_0x4c1d1c(0x11d)],gameWidth,gameHeight,0x0,gl[_0x4c1d1c(0x11d)],gl[_0x4c1d1c(0xe2)],_0x3fa971),gl[_0x4c1d1c(0x11a)](gl[_0x4c1d1c(0xf6)]),gl[_0x4c1d1c(0xf5)](gl[_0x4c1d1c(0x110)],0x0,0x4);else _0x460818==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x3fa971,gameWidth,gameHeight):imageDataObj['data'][_0x4c1d1c(0xf0)](_0x3fa971),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x4c1d1c(0x105)],bufferCanvas[_0x4c1d1c(0x11b)]),ctx2d[_0x4c1d1c(0x108)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x460818));}function a0_0x4e35(_0xf7be2,_0x390dd5){const _0x45804a=a0_0x4580();return a0_0x4e35=function(_0x4e3509,_0x1db2ed){_0x4e3509=_0x4e3509-0xe0;let _0x3a2cd0=_0x45804a[_0x4e3509];return _0x3a2cd0;},a0_0x4e35(_0xf7be2,_0x390dd5);}export async function switchRenderMode(_0x4111fd){const _0x1310cb=a0_0x4e35;systemType=gameName[_0x1310cb(0x111)](-0x3);if(_0x4111fd==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x4111fd===_0x1310cb(0x101))setupStyle('2d'),setupWebGL_Shader(_0x1310cb(0x101)),setupTexture_Buffer(_0x1310cb(0x101)),renderPixel(_0x1310cb(0x101));else _0x4111fd==='webgl_full'&&(setupStyle(_0x1310cb(0xff)),setupWebGL_Shader(_0x1310cb(0xff)),setupTexture_Buffer(_0x1310cb(0xff)),renderPixel('webgl'));}}