const a0_0x115cda=a0_0x22b2;function a0_0x22b2(_0x151f26,_0x3331c1){const _0x3848a7=a0_0x3848();return a0_0x22b2=function(_0x22b247,_0x522454){_0x22b247=_0x22b247-0x1e5;let _0x1b71e7=_0x3848a7[_0x22b247];return _0x1b71e7;},a0_0x22b2(_0x151f26,_0x3331c1);}(function(_0x1a723c,_0x1f2c77){const _0xe231e4=a0_0x22b2,_0x1557db=_0x1a723c();while(!![]){try{const _0x1c9a7f=-parseInt(_0xe231e4(0x213))/0x1*(-parseInt(_0xe231e4(0x1f2))/0x2)+parseInt(_0xe231e4(0x202))/0x3+-parseInt(_0xe231e4(0x22c))/0x4+parseInt(_0xe231e4(0x23f))/0x5+-parseInt(_0xe231e4(0x201))/0x6*(-parseInt(_0xe231e4(0x22b))/0x7)+parseInt(_0xe231e4(0x219))/0x8*(-parseInt(_0xe231e4(0x23e))/0x9)+-parseInt(_0xe231e4(0x22a))/0xa;if(_0x1c9a7f===_0x1f2c77)break;else _0x1557db['push'](_0x1557db['shift']());}catch(_0x117b1f){_0x1557db['push'](_0x1557db['shift']());}}}(a0_0x3848,0x875e5));import*as a0_0x5a5dd3 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x115cda(0x203)](a0_0x115cda(0x1e8)),bufferCanvas=document[a0_0x115cda(0x203)]('canvas'),canvasContainer=document['getElementById'](a0_0x115cda(0x1fa)),imgShader=document['getElementById'](a0_0x115cda(0x216)),settingContainer=document[a0_0x115cda(0x1ff)]('.setting-container'),messageContainer=document[a0_0x115cda(0x1ff)]('.message-container'),stateTitle=document[a0_0x115cda(0x1ff)](a0_0x115cda(0x228));let imageDataObj=null;async function loadLUT64(){const _0x38c546=a0_0x115cda;systemType=gameName['slice'](-0x3);const _0x53d2dc=localStorage[_0x38c546(0x222)](gameName+_0x38c546(0x23c))||_0x38c546(0x212),_0x28ff85=(localStorage[_0x38c546(0x222)](gameName+'_temperature')||'warm')['toLowerCase']();if(!lut64||lut64Streng!==_0x53d2dc||lut64Profile!==_0x28ff85){const _0x37c9c6=_0x38c546(0x24b)+_0x28ff85+'_'+_0x53d2dc+_0x38c546(0x204);console[_0x38c546(0x23d)](_0x37c9c6);const _0x2ce016=await fetch(_0x37c9c6),_0x240717=await _0x2ce016[_0x38c546(0x21f)]();lut64=new Uint8Array(_0x240717),lut64Streng=_0x53d2dc,lut64Profile=_0x28ff85;}}function a0_0x3848(){const _0x4ca679=['VERTEX_SHADER','textured','style','imageRendering','setItem','texParameteri','documentElement','getShaderInfoLog','bindTexture','scale(','webgl2','228PSlpVc','compileShader','clearRect','close','clientWidth','forEach','FRAGMENT_SHADER','error','canvas-container','remove','transformOrigin','WebGL2\x20not\x20supported','game_size','querySelectorAll','add','6avesqz','2252814TUOiDV','getElementById','.bin','createProgram','width','canvas','linkProgram','0,0,','text','enableVertexAttribArray','CLAMP_TO_EDGE','./src/shaders/fragmentShader.glsl','getPixelData','useProgram','then','texcoord','4.0','5380iQIaxV','uniform2f','gbc','img-shader','floor','top\x20center','184MNJOzs','TEXTURE_MAG_FILTER','FLOAT','TRIANGLE_STRIP','drawArrays','position','arrayBuffer','fefs','COMPILE_STATUS','getItem','createBuffer','height','uniform1f','./src/shaders/vertexShader.glsl','smooth_height','.stateTitle,\x20.stateDate','TEXTURE_WRAP_T','4298500TwIjVA','6186530UBGsCM','2636604YIBPAd','setProperty','viewport','getUniformLocation','crisp-edges','TEXTURE_WRAP_S','slice','drawImage','bindBuffer','NEAREST','attachShader','RGBA','UNSIGNED_BYTE','set','transform','TEXTURE_2D','_streng','log','415971GzFKdr','2292295vRYVxj','zoom','clear','COLOR_BUFFER_BIT','getAttribLocation','createTexture','texImage2D','screenSize','ARRAY_BUFFER','STATIC_DRAW','vertexAttribPointer','getShaderParameter','./src/lut/lut64_','imageSmoothingEnabled','bufferData','classList'];a0_0x3848=function(){return _0x4ca679;};return a0_0x3848();}async function loadShaderSource(_0x140e02){const _0x3706a9=a0_0x115cda,_0x4ad6c1=await fetch(_0x140e02);return await _0x4ad6c1[_0x3706a9(0x20a)]();}function setupStyle(_0x4979e8){const _0x3b4715=a0_0x115cda;clientWidth=document[_0x3b4715(0x1ed)][_0x3b4715(0x1f6)];const _0x1ec8b9=window['devicePixelRatio'];systemType===_0x3b4715(0x215)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x1ec8b9/gameWidth),localStorage[_0x3b4715(0x1eb)](_0x3b4715(0x246),_0x3b4715(0x209)+gameWidth*(integerScaling/_0x1ec8b9)+','+gameHeight*(integerScaling/_0x1ec8b9))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x3b4715(0x217)](clientWidth*_0x1ec8b9/gameWidth),localStorage[_0x3b4715(0x1eb)]('screenSize',_0x3b4715(0x209)+gameWidth*(integerScaling/_0x1ec8b9)+','+gameHeight*(integerScaling/_0x1ec8b9)));if(_0x4979e8==='2d')bufferCanvas['width']=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x3b4715(0x1e9)][_0x3b4715(0x240)]=''+integerScaling/_0x1ec8b9,bufferCanvas[_0x3b4715(0x1e9)][_0x3b4715(0x1ea)]=_0x3b4715(0x230),canvasContainer[_0x3b4715(0x1e9)][_0x3b4715(0x206)]=gameWidth*(integerScaling/_0x1ec8b9)+'px',canvasContainer['style']['height']=gameHeight*(integerScaling/_0x1ec8b9)+'px',textured[_0x3b4715(0x1e9)][_0x3b4715(0x206)]=gameWidth*(integerScaling/_0x1ec8b9)+'px',textured['style'][_0x3b4715(0x224)]=gameHeight*(integerScaling/_0x1ec8b9)+'px',imgShader['style'][_0x3b4715(0x23a)]=_0x3b4715(0x1f0)+integerScaling/_0x1ec8b9/upscaleShader+')',settingContainer['forEach'](function(_0x156784){const _0x4b901f=_0x3b4715;_0x156784[_0x4b901f(0x1e9)][_0x4b901f(0x206)]=gameWidth*(integerScaling/_0x1ec8b9)+'px',_0x156784[_0x4b901f(0x1e9)][_0x4b901f(0x224)]=gameHeight*(integerScaling/_0x1ec8b9)+'px';}),messageContainer[_0x3b4715(0x1f7)](function(_0xc506b4){const _0x20a44d=_0x3b4715;_0xc506b4[_0x20a44d(0x1e9)]['width']=gameWidth+'px',_0xc506b4['style']['height']=gameHeight+'px',_0xc506b4[_0x20a44d(0x1e9)][_0x20a44d(0x240)]=''+integerScaling/_0x1ec8b9;}),stateTitle['forEach'](function(_0x49d483){const _0x55125c=_0x3b4715;_0x49d483['classList'][_0x55125c(0x1fb)](_0x55125c(0x220));});else _0x4979e8===_0x3b4715(0x1f1)&&(bufferCanvas[_0x3b4715(0x206)]=clientWidth*upscaleFactor,bufferCanvas[_0x3b4715(0x224)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style']['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x3b4715(0x1e9)][_0x3b4715(0x1ea)]='',canvasContainer[_0x3b4715(0x1e9)][_0x3b4715(0x206)]=clientWidth+'px',canvasContainer['style'][_0x3b4715(0x224)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x3b4715(0x1e9)][_0x3b4715(0x206)]=clientWidth+'px',textured['style']['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x3b4715(0x1e9)][_0x3b4715(0x23a)]=_0x3b4715(0x1f0)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x3b4715(0x1f7)](function(_0x287dc4){const _0x5e52d4=_0x3b4715;_0x287dc4[_0x5e52d4(0x1e9)][_0x5e52d4(0x206)]=clientWidth+'px',_0x287dc4[_0x5e52d4(0x1e9)]['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x3b4715(0x1f7)](function(_0x57b7b9){const _0x403847=_0x3b4715;_0x57b7b9[_0x403847(0x1e9)]['width']=gameWidth+'px',_0x57b7b9[_0x403847(0x1e9)][_0x403847(0x224)]=gameHeight+'px',_0x57b7b9[_0x403847(0x1e9)][_0x403847(0x240)]=''+clientWidth/gameWidth;}),stateTitle[_0x3b4715(0x1f7)](function(_0x52e40c){const _0x4865b8=_0x3b4715;_0x52e40c[_0x4865b8(0x1e6)][_0x4865b8(0x200)](_0x4865b8(0x220));}));imgShader[_0x3b4715(0x1e9)][_0x3b4715(0x206)]=gameWidth*upscaleShader+'px',imgShader[_0x3b4715(0x1e9)][_0x3b4715(0x224)]=gameHeight*upscaleShader+'px',imgShader[_0x3b4715(0x1e9)][_0x3b4715(0x1fc)]=_0x3b4715(0x218),imgShader[_0x3b4715(0x1e9)][_0x3b4715(0x22d)]('--bg-size',upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x56abcf=a0_0x115cda;gl=bufferCanvas['getContext'](_0x56abcf(0x1f1));if(!gl)return console[_0x56abcf(0x1f9)](_0x56abcf(0x1fd)),null;gl[_0x56abcf(0x22e)](0x0,0x0,bufferCanvas[_0x56abcf(0x206)],bufferCanvas[_0x56abcf(0x224)]);}function createShader(_0x528828,_0x514d13){const _0x229e2f=a0_0x115cda,_0x5c0720=gl['createShader'](_0x528828);gl['shaderSource'](_0x5c0720,_0x514d13),gl[_0x229e2f(0x1f3)](_0x5c0720);if(!gl[_0x229e2f(0x24a)](_0x5c0720,gl[_0x229e2f(0x221)]))return console['error'](gl[_0x229e2f(0x1ee)](_0x5c0720)),gl['deleteShader'](_0x5c0720),null;return _0x5c0720;}async function setupShaders(){const _0x51b9ae=a0_0x115cda,_0x1ebd70=await loadShaderSource(_0x51b9ae(0x226)),_0x405f98=await loadShaderSource(_0x51b9ae(0x20d)),_0x5cfa4e=createShader(gl[_0x51b9ae(0x1e7)],_0x1ebd70),_0x5ed1c0=createShader(gl[_0x51b9ae(0x1f8)],_0x405f98);return program=gl[_0x51b9ae(0x205)](),gl[_0x51b9ae(0x236)](program,_0x5cfa4e),gl[_0x51b9ae(0x236)](program,_0x5ed1c0),gl[_0x51b9ae(0x208)](program),gl[_0x51b9ae(0x20f)](program),program;}function setupTexture(){const _0x32d7c6=a0_0x115cda;texture=gl[_0x32d7c6(0x244)](),gl['bindTexture'](gl['TEXTURE_2D'],texture),gl[_0x32d7c6(0x1ec)](gl[_0x32d7c6(0x23b)],gl['TEXTURE_MIN_FILTER'],gl[_0x32d7c6(0x235)]),gl[_0x32d7c6(0x1ec)](gl[_0x32d7c6(0x23b)],gl[_0x32d7c6(0x21a)],gl[_0x32d7c6(0x235)]),gl[_0x32d7c6(0x1ec)](gl[_0x32d7c6(0x23b)],gl[_0x32d7c6(0x231)],gl[_0x32d7c6(0x20c)]),gl['texParameteri'](gl[_0x32d7c6(0x23b)],gl[_0x32d7c6(0x229)],gl['CLAMP_TO_EDGE']),gl['uniform2f'](gl[_0x32d7c6(0x22f)](program,_0x32d7c6(0x1fe)),gameWidth,gameHeight),gl[_0x32d7c6(0x214)](gl['getUniformLocation'](program,'render_size'),gl[_0x32d7c6(0x207)][_0x32d7c6(0x206)],gl['canvas']['height']),gl[_0x32d7c6(0x225)](gl[_0x32d7c6(0x22f)](program,'smooth_width'),gameWidth/gl['canvas'][_0x32d7c6(0x206)]),gl['uniform1f'](gl['getUniformLocation'](program,_0x32d7c6(0x227)),gameHeight/gl[_0x32d7c6(0x207)]['height']);}function setupBuffers(){const _0x54edb8=a0_0x115cda,_0x787d83=gl['createBuffer']();gl[_0x54edb8(0x234)](gl[_0x54edb8(0x247)],_0x787d83),gl[_0x54edb8(0x1e5)](gl[_0x54edb8(0x247)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x54edb8(0x248)]);const _0x39c81b=gl[_0x54edb8(0x243)](program,_0x54edb8(0x21e));gl[_0x54edb8(0x20b)](_0x39c81b),gl[_0x54edb8(0x249)](_0x39c81b,0x2,gl[_0x54edb8(0x21b)],![],0x0,0x0);const _0x21a0ea=gl[_0x54edb8(0x223)]();gl[_0x54edb8(0x234)](gl[_0x54edb8(0x247)],_0x21a0ea),gl['bufferData'](gl[_0x54edb8(0x247)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x54edb8(0x248)]);const _0x1d5f5a=gl[_0x54edb8(0x243)](program,_0x54edb8(0x211));gl[_0x54edb8(0x20b)](_0x1d5f5a),gl[_0x54edb8(0x249)](_0x1d5f5a,0x2,gl[_0x54edb8(0x21b)],![],0x0,0x0);}async function renderPixel(_0xca1452){const _0x22c48a=a0_0x115cda,_0x53ee6a=a0_0x5a5dd3[_0x22c48a(0x20e)]();if(!_0x53ee6a)return;await loadLUT64();const _0x1d01de=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2f87b8=0x0;_0x2f87b8<gameHeight;_0x2f87b8++){for(let _0x9f066e=0x0;_0x9f066e<gameWidth;_0x9f066e++){const _0xcca818=_0x2f87b8*gameStride+_0x9f066e,_0x463471=(_0x2f87b8*gameWidth+_0x9f066e)*0x4,_0x269e7f=_0x53ee6a[_0xcca818],_0xad6c30=(_0x269e7f&0xff)>>0x2,_0x2e0a44=(_0x269e7f>>0x8&0xff)>>0x2,_0x2bc731=(_0x269e7f>>0x10&0xff)>>0x2,_0x43f714=(_0xad6c30*0x40*0x40+_0x2e0a44*0x40+_0x2bc731)*0x3;_0x1d01de[_0x463471]=lut64[_0x43f714],_0x1d01de[_0x463471+0x1]=lut64[_0x43f714+0x1],_0x1d01de[_0x463471+0x2]=lut64[_0x43f714+0x2],_0x1d01de[_0x463471+0x3]=0xff;}}if(_0xca1452===_0x22c48a(0x1f1))gl[_0x22c48a(0x1ef)](gl[_0x22c48a(0x23b)],texture),gl[_0x22c48a(0x245)](gl[_0x22c48a(0x23b)],0x0,gl[_0x22c48a(0x237)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x22c48a(0x238)],_0x1d01de),gl[_0x22c48a(0x241)](gl[_0x22c48a(0x242)]),gl[_0x22c48a(0x21d)](gl[_0x22c48a(0x21c)],0x0,0x4);else _0xca1452==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d',{'alpha':![]}),ctx2d[_0x22c48a(0x24c)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj['data'][_0x22c48a(0x239)](_0x1d01de),createImageBitmap(imageDataObj)[_0x22c48a(0x210)](_0x5d8775=>{const _0x406c6a=_0x22c48a;ctx2d[_0x406c6a(0x1f4)](0x0,0x0,bufferCanvas[_0x406c6a(0x206)],bufferCanvas[_0x406c6a(0x224)]),ctx2d[_0x406c6a(0x233)](_0x5d8775,0x0,0x0),_0x5d8775[_0x406c6a(0x1f5)]();}));requestAnimationFrame(()=>renderPixel(_0xca1452));}export async function switchRenderMode(_0x1e24dd){const _0x5ea13d=a0_0x115cda;systemType=gameName[_0x5ea13d(0x232)](-0x3);if(_0x1e24dd==='2d')setupStyle('2d'),renderPixel('2d');else _0x1e24dd===_0x5ea13d(0x1f1)&&(setupStyle(_0x5ea13d(0x1f1)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document['addEventListener']('DOMContentLoaded',function(){});