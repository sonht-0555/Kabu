(function(_0x4ce6d2,_0x1f47ab){const _0x35fef1=a0_0x46d4,_0x5a1eb7=_0x4ce6d2();while(!![]){try{const _0x49319f=parseInt(_0x35fef1(0x151))/0x1*(parseInt(_0x35fef1(0x16d))/0x2)+parseInt(_0x35fef1(0x184))/0x3*(parseInt(_0x35fef1(0x17a))/0x4)+-parseInt(_0x35fef1(0x144))/0x5*(parseInt(_0x35fef1(0x14f))/0x6)+parseInt(_0x35fef1(0x14e))/0x7+-parseInt(_0x35fef1(0x178))/0x8+-parseInt(_0x35fef1(0x15d))/0x9+parseInt(_0x35fef1(0x150))/0xa;if(_0x49319f===_0x1f47ab)break;else _0x5a1eb7['push'](_0x5a1eb7['shift']());}catch(_0x480075){_0x5a1eb7['push'](_0x5a1eb7['shift']());}}}(a0_0x4a9c,0xe20c7));import*as a0_0x1b176f from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x4a9c(){const _0x2a27a0=['854798gNcooY','18lRXCAW','7576630BfKmTQ','30379gnZSrx','none','getContext','render_size','TRIANGLE_STRIP','smooth_width','drawArrays','vertexAttribPointer','height','shaderSource','canvas','STATIC_DRAW','2648691fymKmr','log','webgl','compileShader','webgl_full','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','TEXTURE_MIN_FILTER','getItem','getAttribLocation','_temperature','NEAREST','arrayBuffer','COLOR_BUFFER_BIT','width','clear','bindTexture','34VcprNg','ARRAY_BUFFER','data','UNSIGNED_BYTE','useProgram','linkProgram','enableVertexAttribArray','createBuffer','FRAGMENT_SHADER','uniform1f','TEXTURE_MAG_FILTER','7554936DUtnfq','texcoord','8EURLCc','uniform2f','texParameteri','CLAMP_TO_EDGE','imageSmoothingEnabled','bindBuffer','low-power','getUniformLocation','viewport','./src/lut/lut64_','2506710anbAXj','clearRect','createShader','bufferData','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','slice','texImage2D','toLowerCase','1504665iFWvzM','createTexture','VERTEX_SHADER','createProgram','FLOAT','smooth_height','TEXTURE_2D','attachShader','RGBA','position'];a0_0x4a9c=function(){return _0x2a27a0;};return a0_0x4a9c();}async function loadLUT64(){const _0x262e3a=a0_0x46d4;systemType=gameName[_0x262e3a(0x141)](-0x3);const _0xd79f4c=(localStorage[_0x262e3a(0x164)](gameName+_0x262e3a(0x166))||_0x262e3a(0x152))[_0x262e3a(0x143)]();if(!lut64||lut64Profile!==_0xd79f4c){const _0x1ccadd=_0x262e3a(0x183)+_0xd79f4c+'_4.0.bin';console[_0x262e3a(0x15e)](_0x1ccadd);const _0x444845=await fetch(_0x1ccadd),_0x4417d7=await _0x444845[_0x262e3a(0x168)]();lut64=new Uint8Array(_0x4417d7),lut64Profile=_0xd79f4c;}}function setupWebGL_Shader(_0x119992){const _0x565927=a0_0x46d4;gl=bufferCanvas[_0x565927(0x153)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x565927(0x180)}),gl[_0x565927(0x182)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x565927(0x159)]);function _0x506d75(_0x377709,_0x3e2705){const _0x56dc5a=_0x565927,_0x242e93=gl[_0x56dc5a(0x186)](_0x377709);return gl[_0x56dc5a(0x15a)](_0x242e93,_0x3e2705),gl[_0x56dc5a(0x160)](_0x242e93),_0x242e93;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x119992===_0x565927(0x15f))fs=_0x565927(0x140);else _0x119992==='webgl_full'&&(fs=_0x565927(0x162));const _0x5cf07e=_0x506d75(gl[_0x565927(0x146)],vs),_0x1a3841=_0x506d75(gl[_0x565927(0x175)],fs);return program=gl[_0x565927(0x147)](),gl[_0x565927(0x14b)](program,_0x5cf07e),gl[_0x565927(0x14b)](program,_0x1a3841),gl[_0x565927(0x172)](program),gl[_0x565927(0x171)](program),program;}function setupTexture_Buffer(_0x43a913){const _0x15fdaa=a0_0x46d4;texture=gl[_0x15fdaa(0x145)](),gl[_0x15fdaa(0x16c)](gl[_0x15fdaa(0x14a)],texture),gl[_0x15fdaa(0x17c)](gl[_0x15fdaa(0x14a)],gl[_0x15fdaa(0x163)],gl[_0x15fdaa(0x167)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x15fdaa(0x177)],gl[_0x15fdaa(0x167)]),gl[_0x15fdaa(0x17c)](gl[_0x15fdaa(0x14a)],gl['TEXTURE_WRAP_S'],gl['CLAMP_TO_EDGE']),gl[_0x15fdaa(0x17c)](gl[_0x15fdaa(0x14a)],gl['TEXTURE_WRAP_T'],gl[_0x15fdaa(0x17d)]);_0x43a913==='webgl_full'&&(gl[_0x15fdaa(0x17b)](gl[_0x15fdaa(0x181)](program,'game_size'),gameWidth,gameHeight),gl['uniform2f'](gl[_0x15fdaa(0x181)](program,_0x15fdaa(0x154)),gl[_0x15fdaa(0x15b)][_0x15fdaa(0x16a)],gl[_0x15fdaa(0x15b)][_0x15fdaa(0x159)]),gl['uniform1f'](gl[_0x15fdaa(0x181)](program,_0x15fdaa(0x156)),gameWidth/gl[_0x15fdaa(0x15b)][_0x15fdaa(0x16a)]),gl[_0x15fdaa(0x176)](gl[_0x15fdaa(0x181)](program,_0x15fdaa(0x149)),gameHeight/gl[_0x15fdaa(0x15b)][_0x15fdaa(0x159)]));const _0x47ee33=gl[_0x15fdaa(0x174)]();gl[_0x15fdaa(0x17f)](gl[_0x15fdaa(0x16e)],_0x47ee33),gl['bufferData'](gl[_0x15fdaa(0x16e)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x15fdaa(0x15c)]),gl[_0x15fdaa(0x158)](gl[_0x15fdaa(0x165)](program,_0x15fdaa(0x14d)),0x2,gl[_0x15fdaa(0x148)],![],0x0,0x0),gl['enableVertexAttribArray'](gl['getAttribLocation'](program,'position'));const _0x259074=gl[_0x15fdaa(0x174)]();gl['bindBuffer'](gl[_0x15fdaa(0x16e)],_0x259074),gl[_0x15fdaa(0x13f)](gl[_0x15fdaa(0x16e)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x15fdaa(0x15c)]),gl['vertexAttribPointer'](gl[_0x15fdaa(0x165)](program,_0x15fdaa(0x179)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x15fdaa(0x173)](gl[_0x15fdaa(0x165)](program,'texcoord'));}function a0_0x46d4(_0x142719,_0x568480){const _0x4a9c99=a0_0x4a9c();return a0_0x46d4=function(_0x46d4f6,_0x3c7e0d){_0x46d4f6=_0x46d4f6-0x13f;let _0x27b78e=_0x4a9c99[_0x46d4f6];return _0x27b78e;},a0_0x46d4(_0x142719,_0x568480);}function setup2DContext(){const _0xd1dea=a0_0x46d4;ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0xd1dea(0x17e)]=![];}async function renderPixel(_0x2507ef){const _0x112702=a0_0x46d4,_0x8ca392=a0_0x1b176f['getPixelData']();if(!_0x8ca392)return;await loadLUT64();const _0x3571a6=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x18af88=0x0;_0x18af88<gameHeight;_0x18af88++){for(let _0x1b62f0=0x0;_0x1b62f0<gameWidth;_0x1b62f0++){const _0x16907d=_0x18af88*gameStride+_0x1b62f0,_0x4d14b9=(_0x18af88*gameWidth+_0x1b62f0)*0x4,_0x2c9551=_0x8ca392[_0x16907d];if(lut64Profile==='none')_0x3571a6[_0x4d14b9]=_0x2c9551&0xff,_0x3571a6[_0x4d14b9+0x1]=_0x2c9551>>0x8&0xff,_0x3571a6[_0x4d14b9+0x2]=_0x2c9551>>0x10&0xff,_0x3571a6[_0x4d14b9+0x3]=0xff;else{const _0x367296=(_0x2c9551&0xff)>>0x2,_0x493112=(_0x2c9551>>0x8&0xff)>>0x2,_0x37eccc=(_0x2c9551>>0x10&0xff)>>0x2,_0x2b807b=(_0x367296*0x40*0x40+_0x493112*0x40+_0x37eccc)*0x3;_0x3571a6[_0x4d14b9]=lut64[_0x2b807b],_0x3571a6[_0x4d14b9+0x1]=lut64[_0x2b807b+0x1],_0x3571a6[_0x4d14b9+0x2]=lut64[_0x2b807b+0x2],_0x3571a6[_0x4d14b9+0x3]=0xff;}}}if(_0x2507ef===_0x112702(0x15f))gl[_0x112702(0x142)](gl['TEXTURE_2D'],0x0,gl[_0x112702(0x14c)],gameWidth,gameHeight,0x0,gl[_0x112702(0x14c)],gl[_0x112702(0x170)],_0x3571a6),gl[_0x112702(0x16b)](gl[_0x112702(0x169)]),gl[_0x112702(0x157)](gl[_0x112702(0x155)],0x0,0x4);else _0x2507ef==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x3571a6,gameWidth,gameHeight):imageDataObj[_0x112702(0x16f)]['set'](_0x3571a6),ctx2d[_0x112702(0x185)](0x0,0x0,bufferCanvas[_0x112702(0x16a)],bufferCanvas[_0x112702(0x159)]),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x2507ef));}export async function switchRenderMode(_0x296e4d){const _0x400060=a0_0x46d4;systemType=gameName[_0x400060(0x141)](-0x3);if(_0x296e4d==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x296e4d==='webgl')setupStyle('2d'),setupWebGL_Shader(_0x400060(0x15f)),setupTexture_Buffer(_0x400060(0x15f)),renderPixel(_0x400060(0x15f));else _0x296e4d===_0x400060(0x161)&&(setupStyle(_0x400060(0x161)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x400060(0x161)),renderPixel(_0x400060(0x15f)));}}