const a0_0x49d940=a0_0x31ab;(function(_0xb66b13,_0x62b4c2){const _0x1c30aa=a0_0x31ab,_0x5e55ef=_0xb66b13();while(!![]){try{const _0x30ff8a=parseInt(_0x1c30aa(0x8d))/0x1*(parseInt(_0x1c30aa(0xa6))/0x2)+parseInt(_0x1c30aa(0x9e))/0x3+parseInt(_0x1c30aa(0xec))/0x4+-parseInt(_0x1c30aa(0xe6))/0x5+-parseInt(_0x1c30aa(0xcc))/0x6*(parseInt(_0x1c30aa(0x8f))/0x7)+parseInt(_0x1c30aa(0xd1))/0x8+-parseInt(_0x1c30aa(0xc8))/0x9*(parseInt(_0x1c30aa(0xd4))/0xa);if(_0x30ff8a===_0x62b4c2)break;else _0x5e55ef['push'](_0x5e55ef['shift']());}catch(_0x4a475d){_0x5e55ef['push'](_0x5e55ef['shift']());}}}(a0_0x216c,0x54c91));import*as a0_0x2750ac from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById']('textured'),bufferCanvas=document[a0_0x49d940(0xe0)](a0_0x49d940(0xd8)),canvasContainer=document['getElementById'](a0_0x49d940(0x91)),imgShader=document[a0_0x49d940(0xe0)](a0_0x49d940(0xe8)),settingContainer=document['querySelectorAll']('.setting-container'),messageContainer=document['querySelectorAll'](a0_0x49d940(0xb1)),stateTitle=document['querySelectorAll']('.stateTitle,\x20.stateDate');let imageDataObj=null;function a0_0x31ab(_0x4563a6,_0x663b5f){const _0x216c49=a0_0x216c();return a0_0x31ab=function(_0x31ab7b,_0x511ac7){_0x31ab7b=_0x31ab7b-0x8c;let _0x41a550=_0x216c49[_0x31ab7b];return _0x41a550;},a0_0x31ab(_0x4563a6,_0x663b5f);}async function loadLUT64(){const _0x4fed3f=a0_0x49d940;systemType=gameName['slice'](-0x3);const _0x466459=localStorage['getItem'](gameName+'_streng')||_0x4fed3f(0xe9),_0x125ac2=(localStorage[_0x4fed3f(0xa4)](gameName+_0x4fed3f(0xd2))||_0x4fed3f(0x8e))[_0x4fed3f(0xba)]();if(!lut64||lut64Streng!==_0x466459||lut64Profile!==_0x125ac2){const _0x246b15='./src/lut/lut64_'+_0x125ac2+'_'+_0x466459+_0x4fed3f(0xed);console['log'](_0x246b15);const _0x4c04af=await fetch(_0x246b15),_0x2e7364=await _0x4c04af[_0x4fed3f(0xbd)]();lut64=new Uint8Array(_0x2e7364),lut64Streng=_0x466459,lut64Profile=_0x125ac2;}}function a0_0x216c(){const _0x360817=['close','top\x20center','202401cvXMCp','getAttribLocation','FRAGMENT_SHADER','attachShader','texParameteri','classList','getItem','CLAMP_TO_EDGE','8NxitsF','smooth_height','zoom','NEAREST','floor','uniform2f','--bg-size','RGBA','position','drawImage','text','.message-container','smooth_width','drawArrays','px\x20','TEXTURE_WRAP_T','0,0,','VERTEX_SHADER','useProgram','WebGL2\x20not\x20supported','toLowerCase','crisp-edges','webgl2','arrayBuffer','getContext','setItem','imageRendering','TRIANGLE_STRIP','getPixelData','addEventListener','screenSize','then','game_size','fefs','9BFhsey','createShader','linkProgram','scale(','564npnwzR','./src/shaders/fragmentShader.glsl','devicePixelRatio','TEXTURE_MAG_FILTER','createTexture','1617808LnNvqf','_temperature','setProperty','5116840WSuWVP','getShaderParameter','clear','COMPILE_STATUS','canvas','bufferData','transformOrigin','TEXTURE_2D','ARRAY_BUFFER','transform','TEXTURE_WRAP_S','vertexAttribPointer','getElementById','DOMContentLoaded','deleteShader','set','clearRect','enableVertexAttribArray','217310xKwJPD','texImage2D','img-shader','4.0','STATIC_DRAW','getUniformLocation','2764800kqfoYW','.bin','forEach','TEXTURE_MIN_FILTER','bindBuffer','bindTexture','texcoord','width','26720AhdbCS','warm','12313NBMruJ','createBuffer','canvas-container','clientWidth','shaderSource','imageSmoothingEnabled','height','remove','style','getShaderInfoLog','uniform1f','FLOAT','error'];a0_0x216c=function(){return _0x360817;};return a0_0x216c();}async function loadShaderSource(_0x45c29b){const _0x126fb5=a0_0x49d940,_0x16193a=await fetch(_0x45c29b);return await _0x16193a[_0x126fb5(0xb0)]();}function setupStyle(_0xb27342){const _0x4bcd73=a0_0x49d940;clientWidth=document['documentElement'][_0x4bcd73(0x92)];const _0x53bb44=window[_0x4bcd73(0xce)];systemType==='gbc'?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x4bcd73(0xaa)](clientWidth*_0x53bb44/gameWidth),localStorage[_0x4bcd73(0xbf)](_0x4bcd73(0xc4),_0x4bcd73(0xb6)+gameWidth*(integerScaling/_0x53bb44)+','+gameHeight*(integerScaling/_0x53bb44))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x4bcd73(0xaa)](clientWidth*_0x53bb44/gameWidth),localStorage[_0x4bcd73(0xbf)](_0x4bcd73(0xc4),'0,0,'+gameWidth*(integerScaling/_0x53bb44)+','+gameHeight*(integerScaling/_0x53bb44)));if(_0xb27342==='2d')bufferCanvas[_0x4bcd73(0x8c)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x4bcd73(0x97)][_0x4bcd73(0xa8)]=''+integerScaling/_0x53bb44,bufferCanvas[_0x4bcd73(0x97)][_0x4bcd73(0xc0)]=_0x4bcd73(0xbb),canvasContainer[_0x4bcd73(0x97)]['width']=gameWidth*(integerScaling/_0x53bb44)+'px',canvasContainer[_0x4bcd73(0x97)][_0x4bcd73(0x95)]=gameHeight*(integerScaling/_0x53bb44)+'px',textured[_0x4bcd73(0x97)]['width']=gameWidth*(integerScaling/_0x53bb44)+'px',textured[_0x4bcd73(0x97)][_0x4bcd73(0x95)]=gameHeight*(integerScaling/_0x53bb44)+'px',imgShader['style'][_0x4bcd73(0xdd)]='scale('+integerScaling/_0x53bb44/upscaleShader+')',settingContainer['forEach'](function(_0x281bd0){const _0x43de75=_0x4bcd73;_0x281bd0[_0x43de75(0x97)][_0x43de75(0x8c)]=gameWidth*(integerScaling/_0x53bb44)+'px',_0x281bd0[_0x43de75(0x97)][_0x43de75(0x95)]=gameHeight*(integerScaling/_0x53bb44)+'px';}),messageContainer[_0x4bcd73(0xee)](function(_0x5f1b92){const _0x183de7=_0x4bcd73;_0x5f1b92[_0x183de7(0x97)]['width']=gameWidth+'px',_0x5f1b92[_0x183de7(0x97)][_0x183de7(0x95)]=gameHeight+'px',_0x5f1b92['style'][_0x183de7(0xa8)]=''+integerScaling/_0x53bb44;}),stateTitle['forEach'](function(_0x791b15){const _0x4a39b8=_0x4bcd73;_0x791b15[_0x4a39b8(0xa3)][_0x4a39b8(0x96)](_0x4a39b8(0xc7));});else _0xb27342===_0x4bcd73(0xbc)&&(bufferCanvas[_0x4bcd73(0x8c)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x4bcd73(0x97)][_0x4bcd73(0xa8)]=''+0x1/upscaleFactor,bufferCanvas[_0x4bcd73(0x97)][_0x4bcd73(0xc0)]='',canvasContainer[_0x4bcd73(0x97)][_0x4bcd73(0x8c)]=clientWidth+'px',canvasContainer['style'][_0x4bcd73(0x95)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x4bcd73(0x97)][_0x4bcd73(0x8c)]=clientWidth+'px',textured['style']['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x4bcd73(0x97)]['transform']=_0x4bcd73(0xcb)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x4bcd73(0xee)](function(_0x52b835){const _0x4e6192=_0x4bcd73;_0x52b835['style']['width']=clientWidth+'px',_0x52b835[_0x4e6192(0x97)][_0x4e6192(0x95)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x4bcd73(0xee)](function(_0x57ad9c){const _0x5b426d=_0x4bcd73;_0x57ad9c[_0x5b426d(0x97)][_0x5b426d(0x8c)]=gameWidth+'px',_0x57ad9c[_0x5b426d(0x97)][_0x5b426d(0x95)]=gameHeight+'px',_0x57ad9c[_0x5b426d(0x97)][_0x5b426d(0xa8)]=''+clientWidth/gameWidth;}),stateTitle[_0x4bcd73(0xee)](function(_0x2d561a){const _0xefadbc=_0x4bcd73;_0x2d561a[_0xefadbc(0xa3)]['add'](_0xefadbc(0xc7));}));imgShader[_0x4bcd73(0x97)][_0x4bcd73(0x8c)]=gameWidth*upscaleShader+'px',imgShader[_0x4bcd73(0x97)][_0x4bcd73(0x95)]=gameHeight*upscaleShader+'px',imgShader[_0x4bcd73(0x97)][_0x4bcd73(0xda)]=_0x4bcd73(0x9d),imgShader['style'][_0x4bcd73(0xd3)](_0x4bcd73(0xac),upscaleShader+_0x4bcd73(0xb4)+upscaleShader+'px');}function setupWebGL(){const _0x32c064=a0_0x49d940;gl=bufferCanvas[_0x32c064(0xbe)](_0x32c064(0xbc));if(!gl)return console['error'](_0x32c064(0xb9)),null;gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x32c064(0x95)]);}function createShader(_0x5b2bbf,_0x320601){const _0x4ae31c=a0_0x49d940,_0x53662b=gl[_0x4ae31c(0xc9)](_0x5b2bbf);gl[_0x4ae31c(0x93)](_0x53662b,_0x320601),gl['compileShader'](_0x53662b);if(!gl[_0x4ae31c(0xd5)](_0x53662b,gl[_0x4ae31c(0xd7)]))return console[_0x4ae31c(0x9b)](gl[_0x4ae31c(0x98)](_0x53662b)),gl[_0x4ae31c(0xe2)](_0x53662b),null;return _0x53662b;}async function setupShaders(){const _0x1aefa1=a0_0x49d940,_0x2d135c=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x107160=await loadShaderSource(_0x1aefa1(0xcd)),_0x38c61=createShader(gl[_0x1aefa1(0xb7)],_0x2d135c),_0x53ea72=createShader(gl[_0x1aefa1(0xa0)],_0x107160);return program=gl['createProgram'](),gl['attachShader'](program,_0x38c61),gl[_0x1aefa1(0xa1)](program,_0x53ea72),gl[_0x1aefa1(0xca)](program),gl[_0x1aefa1(0xb8)](program),program;}function setupTexture(){const _0x5ac0ec=a0_0x49d940;texture=gl[_0x5ac0ec(0xd0)](),gl[_0x5ac0ec(0xf1)](gl[_0x5ac0ec(0xdb)],texture),gl[_0x5ac0ec(0xa2)](gl['TEXTURE_2D'],gl[_0x5ac0ec(0xef)],gl[_0x5ac0ec(0xa9)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x5ac0ec(0xcf)],gl[_0x5ac0ec(0xa9)]),gl['texParameteri'](gl[_0x5ac0ec(0xdb)],gl[_0x5ac0ec(0xde)],gl[_0x5ac0ec(0xa5)]),gl[_0x5ac0ec(0xa2)](gl[_0x5ac0ec(0xdb)],gl[_0x5ac0ec(0xb5)],gl['CLAMP_TO_EDGE']),gl['uniform2f'](gl['getUniformLocation'](program,_0x5ac0ec(0xc6)),gameWidth,gameHeight),gl[_0x5ac0ec(0xab)](gl['getUniformLocation'](program,'render_size'),gl[_0x5ac0ec(0xd8)][_0x5ac0ec(0x8c)],gl['canvas'][_0x5ac0ec(0x95)]),gl[_0x5ac0ec(0x99)](gl['getUniformLocation'](program,_0x5ac0ec(0xb2)),gameWidth/gl[_0x5ac0ec(0xd8)][_0x5ac0ec(0x8c)]),gl['uniform1f'](gl[_0x5ac0ec(0xeb)](program,_0x5ac0ec(0xa7)),gameHeight/gl['canvas'][_0x5ac0ec(0x95)]);}function setupBuffers(){const _0x42b338=a0_0x49d940,_0x3ef453=gl[_0x42b338(0x90)]();gl[_0x42b338(0xf0)](gl[_0x42b338(0xdc)],_0x3ef453),gl['bufferData'](gl[_0x42b338(0xdc)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x42b338(0xea)]);const _0x73c54f=gl['getAttribLocation'](program,_0x42b338(0xae));gl['enableVertexAttribArray'](_0x73c54f),gl[_0x42b338(0xdf)](_0x73c54f,0x2,gl[_0x42b338(0x9a)],![],0x0,0x0);const _0x33adcb=gl[_0x42b338(0x90)]();gl['bindBuffer'](gl[_0x42b338(0xdc)],_0x33adcb),gl[_0x42b338(0xd9)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x42b338(0xea)]);const _0x5b5aee=gl[_0x42b338(0x9f)](program,_0x42b338(0xf2));gl[_0x42b338(0xe5)](_0x5b5aee),gl[_0x42b338(0xdf)](_0x5b5aee,0x2,gl[_0x42b338(0x9a)],![],0x0,0x0);}async function renderPixel(_0x3e8a55){const _0x146dbd=a0_0x49d940,_0x233163=a0_0x2750ac[_0x146dbd(0xc2)]();if(!_0x233163)return;await loadLUT64();const _0xcc0aca=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0xdc2ae2=0x0;_0xdc2ae2<gameHeight;_0xdc2ae2++){for(let _0x23674e=0x0;_0x23674e<gameWidth;_0x23674e++){const _0x17fa0d=_0xdc2ae2*gameStride+_0x23674e,_0x382f5e=(_0xdc2ae2*gameWidth+_0x23674e)*0x4,_0xcef691=_0x233163[_0x17fa0d],_0x397dc4=(_0xcef691&0xff)>>0x2,_0x2fff12=(_0xcef691>>0x8&0xff)>>0x2,_0x169215=(_0xcef691>>0x10&0xff)>>0x2,_0x2ff9cc=(_0x397dc4*0x40*0x40+_0x2fff12*0x40+_0x169215)*0x3;_0xcc0aca[_0x382f5e]=lut64[_0x2ff9cc],_0xcc0aca[_0x382f5e+0x1]=lut64[_0x2ff9cc+0x1],_0xcc0aca[_0x382f5e+0x2]=lut64[_0x2ff9cc+0x2],_0xcc0aca[_0x382f5e+0x3]=0xff;}}if(_0x3e8a55==='webgl2')gl[_0x146dbd(0xf1)](gl[_0x146dbd(0xdb)],texture),gl[_0x146dbd(0xe7)](gl['TEXTURE_2D'],0x0,gl[_0x146dbd(0xad)],gameWidth,gameHeight,0x0,gl[_0x146dbd(0xad)],gl['UNSIGNED_BYTE'],_0xcc0aca),gl[_0x146dbd(0xd6)](gl['COLOR_BUFFER_BIT']),gl[_0x146dbd(0xb3)](gl[_0x146dbd(0xc1)],0x0,0x4);else _0x3e8a55==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas[_0x146dbd(0xbe)]('2d',{'alpha':![]}),ctx2d[_0x146dbd(0x94)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj['data'][_0x146dbd(0xe3)](_0xcc0aca),createImageBitmap(imageDataObj)[_0x146dbd(0xc5)](_0x24cda9=>{const _0xe3a9f9=_0x146dbd;ctx2d[_0xe3a9f9(0xe4)](0x0,0x0,bufferCanvas[_0xe3a9f9(0x8c)],bufferCanvas['height']),ctx2d[_0xe3a9f9(0xaf)](_0x24cda9,0x0,0x0),_0x24cda9[_0xe3a9f9(0x9c)]();}));requestAnimationFrame(()=>renderPixel(_0x3e8a55));}export async function switchRenderMode(_0x3a7f1d){systemType=gameName['slice'](-0x3);if(_0x3a7f1d==='2d')setupStyle('2d'),renderPixel('2d');else _0x3a7f1d==='webgl2'&&(setupStyle('webgl2'),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x49d940(0xc3)](a0_0x49d940(0xe1),function(){});