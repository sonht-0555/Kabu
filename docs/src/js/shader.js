(function(_0x41e79f,_0x40ab1c){const _0x236a1c=a0_0x4272,_0x493338=_0x41e79f();while(!![]){try{const _0x4743a0=parseInt(_0x236a1c(0x1a6))/0x1*(parseInt(_0x236a1c(0x1a2))/0x2)+-parseInt(_0x236a1c(0x183))/0x3*(parseInt(_0x236a1c(0x1ae))/0x4)+parseInt(_0x236a1c(0x171))/0x5+-parseInt(_0x236a1c(0x189))/0x6*(-parseInt(_0x236a1c(0x1af))/0x7)+parseInt(_0x236a1c(0x1ab))/0x8*(parseInt(_0x236a1c(0x18a))/0x9)+-parseInt(_0x236a1c(0x1a0))/0xa*(-parseInt(_0x236a1c(0x196))/0xb)+-parseInt(_0x236a1c(0x1a8))/0xc*(parseInt(_0x236a1c(0x175))/0xd);if(_0x4743a0===_0x40ab1c)break;else _0x493338['push'](_0x493338['shift']());}catch(_0x6fa353){_0x493338['push'](_0x493338['shift']());}}}(a0_0x29ea,0xd86dc));function a0_0x4272(_0x231e8d,_0x3f5ea1){const _0x29ea10=a0_0x29ea();return a0_0x4272=function(_0x4272a3,_0x30f12c){_0x4272a3=_0x4272a3-0x16f;let _0x14ac12=_0x29ea10[_0x4272a3];return _0x14ac12;},a0_0x4272(_0x231e8d,_0x3f5ea1);}import*as a0_0xf212a1 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x29ea(){const _0x1e5468=['NEAREST','canvas','linkProgram','createShader','webgl','texParameteri','render_size','VERTEX_SHADER','3ZvpTIc','getAttribLocation','shaderSource','FRAGMENT_SHADER','compileShader','set','102ukvtFy','1952127UkzlwZ','getContext','low-power','drawArrays','none','UNSIGNED_BYTE','COLOR_BUFFER_BIT','height','enableVertexAttribArray','ARRAY_BUFFER','TEXTURE_MIN_FILTER','position','1899700GnQddx','bufferData','uniform2f','log','vertexAttribPointer','viewport','createBuffer','./src/lut/lut64_','bindTexture','bindBuffer','50cleOgB','clearRect','254VMzYbZ','TEXTURE_WRAP_S','createTexture','smooth_width','10135xNhjpf','FLOAT','60AiaZMV','TEXTURE_MAG_FILTER','width','24OkBDJq','webgl_full','texImage2D','1537908YFLoME','11018rxTMZT','STATIC_DRAW','getUniformLocation','_4.0.bin','uniform1f','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','createProgram','toLowerCase','TEXTURE_2D','imageSmoothingEnabled','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','7953110MgGnUC','attachShader','data','CLAMP_TO_EDGE','8184189FemzhU','TRIANGLE_STRIP','_temperature','getItem','texcoord','smooth_height'];a0_0x29ea=function(){return _0x1e5468;};return a0_0x29ea();}async function loadLUT64(){const _0x344d00=a0_0x4272;systemType=gameName['slice'](-0x3);const _0x520223=(localStorage[_0x344d00(0x178)](gameName+_0x344d00(0x177))||_0x344d00(0x18e))[_0x344d00(0x1b6)]();if(!lut64||lut64Profile!==_0x520223){const _0x9eb97b=_0x344d00(0x19d)+_0x520223+_0x344d00(0x1b2);console[_0x344d00(0x199)](_0x9eb97b);const _0x244191=await fetch(_0x9eb97b),_0x7f939=await _0x244191['arrayBuffer']();lut64=new Uint8Array(_0x7f939),lut64Profile=_0x520223;}}function setupWebGL_Shader(_0x4308d0){const _0x3f9397=a0_0x4272;gl=bufferCanvas[_0x3f9397(0x18b)](_0x3f9397(0x17f),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x3f9397(0x18c)}),gl[_0x3f9397(0x19b)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x3f9397(0x191)]);function _0x3b547d(_0x165ad5,_0x11824f){const _0x25c11d=_0x3f9397,_0x18853f=gl[_0x25c11d(0x17e)](_0x165ad5);return gl[_0x25c11d(0x185)](_0x18853f,_0x11824f),gl[_0x25c11d(0x187)](_0x18853f),_0x18853f;}vs=_0x3f9397(0x170);if(_0x4308d0==='webgl')fs=_0x3f9397(0x1b4);else _0x4308d0==='webgl_full'&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x556050=_0x3b547d(gl[_0x3f9397(0x182)],vs),_0x545216=_0x3b547d(gl[_0x3f9397(0x186)],fs);return program=gl[_0x3f9397(0x1b5)](),gl['attachShader'](program,_0x556050),gl[_0x3f9397(0x172)](program,_0x545216),gl[_0x3f9397(0x17d)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x2e2fa8){const _0x1247b6=a0_0x4272;texture=gl[_0x1247b6(0x1a4)](),gl[_0x1247b6(0x19e)](gl[_0x1247b6(0x1b7)],texture),gl[_0x1247b6(0x180)](gl[_0x1247b6(0x1b7)],gl[_0x1247b6(0x194)],gl[_0x1247b6(0x17b)]),gl[_0x1247b6(0x180)](gl['TEXTURE_2D'],gl[_0x1247b6(0x1a9)],gl['NEAREST']),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x1247b6(0x1a3)],gl[_0x1247b6(0x174)]),gl[_0x1247b6(0x180)](gl[_0x1247b6(0x1b7)],gl['TEXTURE_WRAP_T'],gl[_0x1247b6(0x174)]);_0x2e2fa8===_0x1247b6(0x1ac)&&(gl[_0x1247b6(0x198)](gl[_0x1247b6(0x1b1)](program,'game_size'),gameWidth,gameHeight),gl[_0x1247b6(0x198)](gl[_0x1247b6(0x1b1)](program,_0x1247b6(0x181)),gl[_0x1247b6(0x17c)][_0x1247b6(0x1aa)],gl['canvas']['height']),gl[_0x1247b6(0x1b3)](gl[_0x1247b6(0x1b1)](program,_0x1247b6(0x1a5)),gameWidth/gl[_0x1247b6(0x17c)][_0x1247b6(0x1aa)]),gl[_0x1247b6(0x1b3)](gl['getUniformLocation'](program,_0x1247b6(0x17a)),gameHeight/gl[_0x1247b6(0x17c)]['height']));const _0x818d6e=gl[_0x1247b6(0x19c)]();gl['bindBuffer'](gl[_0x1247b6(0x193)],_0x818d6e),gl[_0x1247b6(0x197)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x1247b6(0x1b0)]),gl[_0x1247b6(0x19a)](gl[_0x1247b6(0x184)](program,_0x1247b6(0x195)),0x2,gl[_0x1247b6(0x1a7)],![],0x0,0x0),gl[_0x1247b6(0x192)](gl[_0x1247b6(0x184)](program,_0x1247b6(0x195)));const _0x230ff0=gl[_0x1247b6(0x19c)]();gl[_0x1247b6(0x19f)](gl[_0x1247b6(0x193)],_0x230ff0),gl['bufferData'](gl[_0x1247b6(0x193)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x1247b6(0x1b0)]),gl[_0x1247b6(0x19a)](gl[_0x1247b6(0x184)](program,_0x1247b6(0x179)),0x2,gl[_0x1247b6(0x1a7)],![],0x0,0x0),gl[_0x1247b6(0x192)](gl['getAttribLocation'](program,'texcoord'));}function setup2DContext(){const _0x5de800=a0_0x4272;ctx2d=bufferCanvas[_0x5de800(0x18b)]('2d'),ctx2d[_0x5de800(0x16f)]=![];}async function renderPixel(_0x43a96a){const _0x12f128=a0_0x4272,_0x52059d=a0_0xf212a1['getPixelData']();if(!_0x52059d)return;await loadLUT64();const _0x101299=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2c8fc3=0x0;_0x2c8fc3<gameHeight;_0x2c8fc3++){for(let _0x45ba15=0x0;_0x45ba15<gameWidth;_0x45ba15++){const _0x3f8940=_0x2c8fc3*gameStride+_0x45ba15,_0x67e437=(_0x2c8fc3*gameWidth+_0x45ba15)*0x4,_0x47b0b3=_0x52059d[_0x3f8940];if(lut64Profile===_0x12f128(0x18e))_0x101299[_0x67e437]=_0x47b0b3&0xff,_0x101299[_0x67e437+0x1]=_0x47b0b3>>0x8&0xff,_0x101299[_0x67e437+0x2]=_0x47b0b3>>0x10&0xff,_0x101299[_0x67e437+0x3]=0xff;else{const _0x201dc6=(_0x47b0b3&0xff)>>0x2,_0x4f3d00=(_0x47b0b3>>0x8&0xff)>>0x2,_0x5f26f5=(_0x47b0b3>>0x10&0xff)>>0x2,_0x3190e4=(_0x201dc6*0x40*0x40+_0x4f3d00*0x40+_0x5f26f5)*0x3;_0x101299[_0x67e437]=lut64[_0x3190e4],_0x101299[_0x67e437+0x1]=lut64[_0x3190e4+0x1],_0x101299[_0x67e437+0x2]=lut64[_0x3190e4+0x2],_0x101299[_0x67e437+0x3]=0xff;}}}if(_0x43a96a==='webgl')gl[_0x12f128(0x1ad)](gl[_0x12f128(0x1b7)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x12f128(0x18f)],_0x101299),gl['clear'](gl[_0x12f128(0x190)]),gl[_0x12f128(0x18d)](gl[_0x12f128(0x176)],0x0,0x4);else _0x43a96a==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x101299,gameWidth,gameHeight):imageDataObj[_0x12f128(0x173)][_0x12f128(0x188)](_0x101299),ctx2d[_0x12f128(0x1a1)](0x0,0x0,bufferCanvas[_0x12f128(0x1aa)],bufferCanvas[_0x12f128(0x191)]),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x43a96a));}export async function switchRenderMode(_0x895a13){const _0x2490fc=a0_0x4272;systemType=gameName['slice'](-0x3);if(_0x895a13==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x895a13===_0x2490fc(0x17f))setupStyle('2d'),setupWebGL_Shader(_0x2490fc(0x17f)),setupTexture_Buffer(_0x2490fc(0x17f)),renderPixel(_0x2490fc(0x17f));else _0x895a13===_0x2490fc(0x1ac)&&(setupStyle(_0x2490fc(0x1ac)),setupWebGL_Shader(_0x2490fc(0x1ac)),setupTexture_Buffer(_0x2490fc(0x1ac)),renderPixel(_0x2490fc(0x17f)));}}