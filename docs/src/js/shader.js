(function(_0x5eb866,_0xc84c63){const _0x2425e2=a0_0x1fa2,_0x43c579=_0x5eb866();while(!![]){try{const _0x50e613=parseInt(_0x2425e2(0x19a))/0x1*(-parseInt(_0x2425e2(0x1a1))/0x2)+parseInt(_0x2425e2(0x1bf))/0x3*(-parseInt(_0x2425e2(0x1cb))/0x4)+parseInt(_0x2425e2(0x1a3))/0x5+parseInt(_0x2425e2(0x1d4))/0x6*(parseInt(_0x2425e2(0x1bd))/0x7)+parseInt(_0x2425e2(0x1ae))/0x8*(-parseInt(_0x2425e2(0x1c9))/0x9)+parseInt(_0x2425e2(0x1b7))/0xa*(-parseInt(_0x2425e2(0x1ad))/0xb)+parseInt(_0x2425e2(0x1c0))/0xc*(parseInt(_0x2425e2(0x1b1))/0xd);if(_0x50e613===_0xc84c63)break;else _0x43c579['push'](_0x43c579['shift']());}catch(_0x37fa1e){_0x43c579['push'](_0x43c579['shift']());}}}(a0_0x304d,0x90e96));import*as a0_0x281b28 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x353fed=a0_0x1fa2;systemType=gameName[_0x353fed(0x1b6)](-0x3);const _0x21f254=localStorage[_0x353fed(0x1c7)](gameName+'_streng')||'4.0',_0xf4699c=(localStorage[_0x353fed(0x1c7)](gameName+'_temperature')||'warm')[_0x353fed(0x1ba)]();if(!lut64||lut64Streng!==_0x21f254||lut64Profile!==_0xf4699c){const _0x1972cd='./src/lut/lut64_'+_0xf4699c+'_'+_0x21f254+_0x353fed(0x1b0);console[_0x353fed(0x19e)](_0x1972cd);const _0x5ef9aa=await fetch(_0x1972cd),_0x2ed725=await _0x5ef9aa[_0x353fed(0x1ac)]();lut64=new Uint8Array(_0x2ed725),lut64Streng=_0x21f254,lut64Profile=_0xf4699c;}}function a0_0x1fa2(_0x1220a5,_0x465dfb){const _0x304ddc=a0_0x304d();return a0_0x1fa2=function(_0x1fa26b,_0x390561){_0x1fa26b=_0x1fa26b-0x197;let _0x159bbc=_0x304ddc[_0x1fa26b];return _0x159bbc;},a0_0x1fa2(_0x1220a5,_0x465dfb);}function setupWebGL_Shader(_0x501f17){const _0x2ee9db=a0_0x1fa2;gl=bufferCanvas[_0x2ee9db(0x1c1)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0x2ee9db(0x1ca)](0x0,0x0,bufferCanvas[_0x2ee9db(0x1c2)],bufferCanvas['height']);function _0x2c0a09(_0x51d11e,_0x4a7ee4){const _0x4a6f43=_0x2ee9db,_0x266b8c=gl[_0x4a6f43(0x1a6)](_0x51d11e);return gl[_0x4a6f43(0x1b3)](_0x266b8c,_0x4a7ee4),gl['compileShader'](_0x266b8c),_0x266b8c;}vs=_0x2ee9db(0x1aa);if(_0x501f17===_0x2ee9db(0x1ce))fs=_0x2ee9db(0x1c5);else _0x501f17===_0x2ee9db(0x1ab)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x50b3fa=_0x2c0a09(gl['VERTEX_SHADER'],vs),_0x1f3539=_0x2c0a09(gl['FRAGMENT_SHADER'],fs);return program=gl['createProgram'](),gl['attachShader'](program,_0x50b3fa),gl[_0x2ee9db(0x1d0)](program,_0x1f3539),gl['linkProgram'](program),gl['useProgram'](program),program;}function a0_0x304d(){const _0xce05d7=['ARRAY_BUFFER','shaderSource','height','then','slice','561520gwlfIS','position','getAttribLocation','toLowerCase','drawImage','enableVertexAttribArray','21Zadjvy','getUniformLocation','5406UDJCLA','708BeDDLR','getContext','width','uniform1f','smooth_height','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','imageSmoothingEnabled','getItem','STATIC_DRAW','83403aigCfc','viewport','2564AGAhCj','TEXTURE_2D','getPixelData','webgl','bindTexture','attachShader','bindBuffer','createTexture','uniform2f','623874kpppuY','bufferData','texParameteri','CLAMP_TO_EDGE','1xKjyNJ','game_size','UNSIGNED_BYTE','clearRect','log','createBuffer','TEXTURE_MAG_FILTER','1649720UzEIZP','vertexAttribPointer','3429350wGpTKB','canvas','RGBA','createShader','NEAREST','smooth_width','texcoord','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','webgl_full','arrayBuffer','154CqNzvl','960RKUSSI','TEXTURE_MIN_FILTER','.bin','765427YQFoXt'];a0_0x304d=function(){return _0xce05d7;};return a0_0x304d();}function setupTexture_Buffer(_0x43bac6){const _0x576b86=a0_0x1fa2;texture=gl[_0x576b86(0x1d2)](),gl[_0x576b86(0x1cf)](gl[_0x576b86(0x1cc)],texture),gl['texParameteri'](gl[_0x576b86(0x1cc)],gl[_0x576b86(0x1af)],gl[_0x576b86(0x1a7)]),gl['texParameteri'](gl[_0x576b86(0x1cc)],gl[_0x576b86(0x1a0)],gl[_0x576b86(0x1a7)]),gl['texParameteri'](gl[_0x576b86(0x1cc)],gl['TEXTURE_WRAP_S'],gl[_0x576b86(0x199)]),gl[_0x576b86(0x198)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_T'],gl[_0x576b86(0x199)]);_0x43bac6==='webgl_full'&&(gl['uniform2f'](gl[_0x576b86(0x1be)](program,_0x576b86(0x19b)),gameWidth,gameHeight),gl[_0x576b86(0x1d3)](gl['getUniformLocation'](program,'render_size'),gl[_0x576b86(0x1a4)]['width'],gl[_0x576b86(0x1a4)][_0x576b86(0x1b4)]),gl[_0x576b86(0x1c3)](gl[_0x576b86(0x1be)](program,_0x576b86(0x1a8)),gameWidth/gl[_0x576b86(0x1a4)][_0x576b86(0x1c2)]),gl[_0x576b86(0x1c3)](gl[_0x576b86(0x1be)](program,_0x576b86(0x1c4)),gameHeight/gl[_0x576b86(0x1a4)][_0x576b86(0x1b4)]));const _0x13c8be=gl[_0x576b86(0x19f)]();gl['bindBuffer'](gl[_0x576b86(0x1b2)],_0x13c8be),gl[_0x576b86(0x197)](gl[_0x576b86(0x1b2)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x576b86(0x1c8)]),gl[_0x576b86(0x1a2)](gl[_0x576b86(0x1b9)](program,_0x576b86(0x1b8)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x576b86(0x1bc)](gl[_0x576b86(0x1b9)](program,_0x576b86(0x1b8)));const _0x321739=gl[_0x576b86(0x19f)]();gl[_0x576b86(0x1d1)](gl[_0x576b86(0x1b2)],_0x321739),gl[_0x576b86(0x197)](gl[_0x576b86(0x1b2)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x576b86(0x1c8)]),gl['vertexAttribPointer'](gl[_0x576b86(0x1b9)](program,_0x576b86(0x1a9)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x576b86(0x1bc)](gl[_0x576b86(0x1b9)](program,_0x576b86(0x1a9)));}function setup2DContext(){const _0x292d3a=a0_0x1fa2;ctx2d=bufferCanvas[_0x292d3a(0x1c1)]('2d'),ctx2d[_0x292d3a(0x1c6)]=![];}async function renderPixel(_0x1a924f){const _0x48de08=a0_0x1fa2,_0x33a906=a0_0x281b28[_0x48de08(0x1cd)]();if(!_0x33a906)return;await loadLUT64();const _0x314622=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x3ac0f0=0x0;_0x3ac0f0<gameHeight;_0x3ac0f0++){for(let _0x3d514a=0x0;_0x3d514a<gameWidth;_0x3d514a++){const _0x29265e=_0x3ac0f0*gameStride+_0x3d514a,_0x238003=(_0x3ac0f0*gameWidth+_0x3d514a)*0x4,_0x1a6c25=_0x33a906[_0x29265e],_0x1027d6=(_0x1a6c25&0xff)>>0x2,_0x5643c5=(_0x1a6c25>>0x8&0xff)>>0x2,_0x32be9b=(_0x1a6c25>>0x10&0xff)>>0x2,_0x452869=(_0x1027d6*0x40*0x40+_0x5643c5*0x40+_0x32be9b)*0x3;_0x314622[_0x238003]=lut64[_0x452869],_0x314622[_0x238003+0x1]=lut64[_0x452869+0x1],_0x314622[_0x238003+0x2]=lut64[_0x452869+0x2],_0x314622[_0x238003+0x3]=0xff;}}if(_0x1a924f===_0x48de08(0x1ce))gl['texImage2D'](gl[_0x48de08(0x1cc)],0x0,gl[_0x48de08(0x1a5)],gameWidth,gameHeight,0x0,gl[_0x48de08(0x1a5)],gl[_0x48de08(0x19c)],_0x314622),gl['clear'](gl['COLOR_BUFFER_BIT']),gl['drawArrays'](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x1a924f==='2d'&&(imageDataObj=new ImageData(_0x314622,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x48de08(0x1b5)](_0xbbdcf1=>{const _0x9823f4=_0x48de08;ctx2d[_0x9823f4(0x19d)](0x0,0x0,bufferCanvas[_0x9823f4(0x1c2)],bufferCanvas[_0x9823f4(0x1b4)]),ctx2d[_0x9823f4(0x1bb)](_0xbbdcf1,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x1a924f));}export async function switchRenderMode(_0x47dade){const _0x4b54b2=a0_0x1fa2;systemType=gameName[_0x4b54b2(0x1b6)](-0x3);if(_0x47dade==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x47dade===_0x4b54b2(0x1ce))setupStyle('2d'),setupWebGL_Shader(_0x4b54b2(0x1ce)),setupTexture_Buffer('webgl'),renderPixel('webgl');else _0x47dade===_0x4b54b2(0x1ab)&&(setupStyle(_0x4b54b2(0x1ab)),setupWebGL_Shader(_0x4b54b2(0x1ab)),setupTexture_Buffer(_0x4b54b2(0x1ab)),renderPixel('webgl'));}}