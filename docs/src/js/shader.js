(function(_0x206caa,_0x13507a){const _0x28172d=a0_0x31a9,_0x4e2784=_0x206caa();while(!![]){try{const _0x1f7f08=-parseInt(_0x28172d(0x124))/0x1+-parseInt(_0x28172d(0x144))/0x2+-parseInt(_0x28172d(0x14d))/0x3+-parseInt(_0x28172d(0x140))/0x4*(-parseInt(_0x28172d(0x120))/0x5)+-parseInt(_0x28172d(0x153))/0x6*(parseInt(_0x28172d(0x13a))/0x7)+-parseInt(_0x28172d(0x132))/0x8*(-parseInt(_0x28172d(0x133))/0x9)+parseInt(_0x28172d(0x14c))/0xa*(parseInt(_0x28172d(0x143))/0xb);if(_0x1f7f08===_0x13507a)break;else _0x4e2784['push'](_0x4e2784['shift']());}catch(_0x48f590){_0x4e2784['push'](_0x4e2784['shift']());}}}(a0_0xb396,0x619cb));function a0_0xb396(){const _0xe2e01c=['attachShader','smooth_height','createProgram','texcoord','135oBrXTI','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','bindTexture','game_size','519143DtUyNq','CLAMP_TO_EDGE','createShader','TEXTURE_2D','imageSmoothingEnabled','clear','shaderSource','getItem','bindBuffer','STATIC_DRAW','drawArrays','render_size','vertexAttribPointer','RGBA','34064yFpgUr','1638VTzAbT','getAttribLocation','height','none','UNSIGNED_BYTE','webgl_full','width','7gtGLpm','slice','COLOR_BUFFER_BIT','TEXTURE_MIN_FILTER','getPixelData','NEAREST','2916lqvCVL','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','arrayBuffer','52613TALSXe','629468fsaDQI','getUniformLocation','ARRAY_BUFFER','FRAGMENT_SHADER','VERTEX_SHADER','smooth_width','linkProgram','getContext','1940yOZGXG','1119996FtHFih','data','uniform1f','./src/lut/lut64_','webgl','toLowerCase','693078AHmQaL','canvas','useProgram','bufferData','log','_4.0.bin','viewport','position','createBuffer','clearRect','texParameteri'];a0_0xb396=function(){return _0xe2e01c;};return a0_0xb396();}import*as a0_0x2b634d from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x31a9(_0x42ffb3,_0x5f0a46){const _0xb39606=a0_0xb396();return a0_0x31a9=function(_0x31a96d,_0x4581f5){_0x31a96d=_0x31a96d-0x11c;let _0x3395e5=_0xb39606[_0x31a96d];return _0x3395e5;},a0_0x31a9(_0x42ffb3,_0x5f0a46);}async function loadLUT64(){const _0x20dc6=a0_0x31a9;systemType=gameName[_0x20dc6(0x13b)](-0x3);const _0x1e4b39=(localStorage[_0x20dc6(0x12b)](gameName+'_temperature')||_0x20dc6(0x136))[_0x20dc6(0x152)]();if(!lut64||lut64Profile!==_0x1e4b39){const _0x3ce590=_0x20dc6(0x150)+_0x1e4b39+_0x20dc6(0x158);console[_0x20dc6(0x157)](_0x3ce590);const _0x12f760=await fetch(_0x3ce590),_0x1ae741=await _0x12f760[_0x20dc6(0x142)]();lut64=new Uint8Array(_0x1ae741),lut64Profile=_0x1e4b39;}}function setupWebGL_Shader(_0xa1e99d){const _0x5f2fc6=a0_0x31a9;gl=bufferCanvas[_0x5f2fc6(0x14b)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0x5f2fc6(0x159)](0x0,0x0,bufferCanvas[_0x5f2fc6(0x139)],bufferCanvas[_0x5f2fc6(0x135)]);function _0x3011fd(_0x5d4937,_0x381eca){const _0x3a06fd=_0x5f2fc6,_0x2bb11f=gl[_0x3a06fd(0x126)](_0x5d4937);return gl[_0x3a06fd(0x12a)](_0x2bb11f,_0x381eca),gl['compileShader'](_0x2bb11f),_0x2bb11f;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0xa1e99d===_0x5f2fc6(0x151))fs=_0x5f2fc6(0x121);else _0xa1e99d==='webgl_full'&&(fs=_0x5f2fc6(0x141));const _0x4766ab=_0x3011fd(gl[_0x5f2fc6(0x148)],vs),_0x510cc1=_0x3011fd(gl[_0x5f2fc6(0x147)],fs);return program=gl[_0x5f2fc6(0x11e)](),gl[_0x5f2fc6(0x11c)](program,_0x4766ab),gl[_0x5f2fc6(0x11c)](program,_0x510cc1),gl[_0x5f2fc6(0x14a)](program),gl[_0x5f2fc6(0x155)](program),program;}function setupTexture_Buffer(_0xe1bca4){const _0xea3a85=a0_0x31a9;texture=gl['createTexture'](),gl[_0xea3a85(0x122)](gl[_0xea3a85(0x127)],texture),gl[_0xea3a85(0x15d)](gl[_0xea3a85(0x127)],gl[_0xea3a85(0x13d)],gl[_0xea3a85(0x13f)]),gl['texParameteri'](gl[_0xea3a85(0x127)],gl['TEXTURE_MAG_FILTER'],gl[_0xea3a85(0x13f)]),gl[_0xea3a85(0x15d)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0xea3a85(0x125)]),gl[_0xea3a85(0x15d)](gl[_0xea3a85(0x127)],gl['TEXTURE_WRAP_T'],gl['CLAMP_TO_EDGE']);_0xe1bca4==='webgl_full'&&(gl['uniform2f'](gl['getUniformLocation'](program,_0xea3a85(0x123)),gameWidth,gameHeight),gl['uniform2f'](gl[_0xea3a85(0x145)](program,_0xea3a85(0x12f)),gl[_0xea3a85(0x154)]['width'],gl[_0xea3a85(0x154)]['height']),gl[_0xea3a85(0x14f)](gl[_0xea3a85(0x145)](program,_0xea3a85(0x149)),gameWidth/gl[_0xea3a85(0x154)][_0xea3a85(0x139)]),gl[_0xea3a85(0x14f)](gl[_0xea3a85(0x145)](program,_0xea3a85(0x11d)),gameHeight/gl['canvas']['height']));const _0x95264d=gl[_0xea3a85(0x15b)]();gl['bindBuffer'](gl[_0xea3a85(0x146)],_0x95264d),gl[_0xea3a85(0x156)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0xea3a85(0x12d)]),gl[_0xea3a85(0x130)](gl[_0xea3a85(0x134)](program,_0xea3a85(0x15a)),0x2,gl['FLOAT'],![],0x0,0x0),gl['enableVertexAttribArray'](gl['getAttribLocation'](program,'position'));const _0xed408c=gl[_0xea3a85(0x15b)]();gl[_0xea3a85(0x12c)](gl[_0xea3a85(0x146)],_0xed408c),gl[_0xea3a85(0x156)](gl[_0xea3a85(0x146)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']),gl[_0xea3a85(0x130)](gl[_0xea3a85(0x134)](program,_0xea3a85(0x11f)),0x2,gl['FLOAT'],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0xea3a85(0x134)](program,'texcoord'));}function setup2DContext(){const _0x3b7f03=a0_0x31a9;ctx2d=bufferCanvas[_0x3b7f03(0x14b)]('2d'),ctx2d[_0x3b7f03(0x128)]=![];}async function renderPixel(_0x5da2b6){const _0x389b9a=a0_0x31a9,_0x5b69d6=a0_0x2b634d[_0x389b9a(0x13e)]();if(!_0x5b69d6)return;await loadLUT64();const _0x153ebc=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2188d4=0x0;_0x2188d4<gameHeight;_0x2188d4++){for(let _0x33489f=0x0;_0x33489f<gameWidth;_0x33489f++){const _0x537ebc=_0x2188d4*gameStride+_0x33489f,_0x48c4a9=(_0x2188d4*gameWidth+_0x33489f)*0x4,_0x10b2f0=_0x5b69d6[_0x537ebc];if(lut64Profile==='none')_0x153ebc[_0x48c4a9]=_0x10b2f0&0xff,_0x153ebc[_0x48c4a9+0x1]=_0x10b2f0>>0x8&0xff,_0x153ebc[_0x48c4a9+0x2]=_0x10b2f0>>0x10&0xff,_0x153ebc[_0x48c4a9+0x3]=0xff;else{const _0x10a982=(_0x10b2f0&0xff)>>0x2,_0x59b224=(_0x10b2f0>>0x8&0xff)>>0x2,_0x270f44=(_0x10b2f0>>0x10&0xff)>>0x2,_0x142e3e=(_0x10a982*0x40*0x40+_0x59b224*0x40+_0x270f44)*0x3;_0x153ebc[_0x48c4a9]=lut64[_0x142e3e],_0x153ebc[_0x48c4a9+0x1]=lut64[_0x142e3e+0x1],_0x153ebc[_0x48c4a9+0x2]=lut64[_0x142e3e+0x2],_0x153ebc[_0x48c4a9+0x3]=0xff;}}}if(_0x5da2b6===_0x389b9a(0x151))gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x389b9a(0x131)],gameWidth,gameHeight,0x0,gl[_0x389b9a(0x131)],gl[_0x389b9a(0x137)],_0x153ebc),gl[_0x389b9a(0x129)](gl[_0x389b9a(0x13c)]),gl[_0x389b9a(0x12e)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x5da2b6==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x153ebc,gameWidth,gameHeight):imageDataObj[_0x389b9a(0x14e)]['set'](_0x153ebc),ctx2d[_0x389b9a(0x15c)](0x0,0x0,bufferCanvas[_0x389b9a(0x139)],bufferCanvas['height']),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x5da2b6));}export async function switchRenderMode(_0x545f36){const _0x2b96d2=a0_0x31a9;systemType=gameName['slice'](-0x3);if(_0x545f36==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x545f36===_0x2b96d2(0x151))setupStyle('2d'),setupWebGL_Shader(_0x2b96d2(0x151)),setupTexture_Buffer('webgl'),renderPixel(_0x2b96d2(0x151));else _0x545f36==='webgl_full'&&(setupStyle(_0x2b96d2(0x138)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x2b96d2(0x138)),renderPixel(_0x2b96d2(0x151)));}}