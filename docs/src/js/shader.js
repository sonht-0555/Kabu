(function(_0x4b7e75,_0x4db39b){const _0x527783=a0_0x51f1,_0x29c143=_0x4b7e75();while(!![]){try{const _0x466257=-parseInt(_0x527783(0x1c7))/0x1+parseInt(_0x527783(0x18a))/0x2*(parseInt(_0x527783(0x18e))/0x3)+-parseInt(_0x527783(0x185))/0x4+parseInt(_0x527783(0x1b2))/0x5*(-parseInt(_0x527783(0x1c5))/0x6)+-parseInt(_0x527783(0x19c))/0x7+-parseInt(_0x527783(0x1a6))/0x8+-parseInt(_0x527783(0x1b3))/0x9*(-parseInt(_0x527783(0x1a2))/0xa);if(_0x466257===_0x4db39b)break;else _0x29c143['push'](_0x29c143['shift']());}catch(_0x4f09df){_0x29c143['push'](_0x29c143['shift']());}}}(a0_0x1086,0x1ae74));function a0_0x1086(){const _0x570012=['TEXTURE_WRAP_S','258Noxbau','texImage2D','VERTEX_SHADER','FLOAT','bindTexture','bufferData','STATIC_DRAW','getItem','getContext','smooth_height','position','slice','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','enableVertexAttribArray','107660NFmNcI','imageSmoothingEnabled','warm','then','TEXTURE_WRAP_T','getAttribLocation','10qmCDsD','TEXTURE_MIN_FILTER','getPixelData','webgl','1231208rUDXjq','clear','createBuffer','linkProgram','ARRAY_BUFFER','FRAGMENT_SHADER','TEXTURE_2D','RGBA','COLOR_BUFFER_BIT','useProgram','TEXTURE_MAG_FILTER','uniform2f','880bzXkGU','2839572ZXtAgM','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','webgl_full','attachShader','NEAREST','log','uniform1f','createShader','getUniformLocation','bindBuffer','viewport','texParameteri','render_size','height','4.0','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','compileShader','./src/lut/lut64_','1002TlEbnp','texcoord','198376lPrSad','canvas','CLAMP_TO_EDGE','vertexAttribPointer','38356IVyaHe','width','_temperature','TRIANGLE_STRIP','low-power','4682DtGAgv','UNSIGNED_BYTE','arrayBuffer'];a0_0x1086=function(){return _0x570012;};return a0_0x1086();}import*as a0_0x19650d from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x51f1(_0x4e147a,_0x3fce6f){const _0x10863f=a0_0x1086();return a0_0x51f1=function(_0x51f1c8,_0x551d48){_0x51f1c8=_0x51f1c8-0x183;let _0x5369f2=_0x10863f[_0x51f1c8];return _0x5369f2;},a0_0x51f1(_0x4e147a,_0x3fce6f);}async function loadLUT64(){const _0x3d9cdb=a0_0x51f1;systemType=gameName[_0x3d9cdb(0x199)](-0x3);const _0xbe4fce=localStorage[_0x3d9cdb(0x195)](gameName+'_streng')||_0x3d9cdb(0x1c1),_0x6dd9c5=(localStorage[_0x3d9cdb(0x195)](gameName+_0x3d9cdb(0x187))||_0x3d9cdb(0x19e))['toLowerCase']();if(!lut64||lut64Streng!==_0xbe4fce||lut64Profile!==_0x6dd9c5){const _0x59dd21=_0x3d9cdb(0x1c4)+_0x6dd9c5+'_'+_0xbe4fce+'.bin';console[_0x3d9cdb(0x1b8)](_0x59dd21);const _0x2032d6=await fetch(_0x59dd21),_0x1d94ec=await _0x2032d6[_0x3d9cdb(0x18c)]();lut64=new Uint8Array(_0x1d94ec),lut64Streng=_0xbe4fce,lut64Profile=_0x6dd9c5;}}function setupWebGL_Shader(_0x1cc080){const _0x5d6483=a0_0x51f1;gl=bufferCanvas[_0x5d6483(0x196)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x5d6483(0x189)}),gl[_0x5d6483(0x1bd)](0x0,0x0,bufferCanvas[_0x5d6483(0x186)],bufferCanvas[_0x5d6483(0x1c0)]);function _0x2e7af3(_0x1993ba,_0xe4578d){const _0x2dfa64=_0x5d6483,_0x56cb64=gl[_0x2dfa64(0x1ba)](_0x1993ba);return gl['shaderSource'](_0x56cb64,_0xe4578d),gl[_0x2dfa64(0x1c3)](_0x56cb64),_0x56cb64;}vs=_0x5d6483(0x19a);if(_0x1cc080===_0x5d6483(0x1a5))fs=_0x5d6483(0x1b4);else _0x1cc080===_0x5d6483(0x1b5)&&(fs=_0x5d6483(0x1c2));const _0x21d765=_0x2e7af3(gl[_0x5d6483(0x190)],vs),_0x51b9cb=_0x2e7af3(gl[_0x5d6483(0x1ab)],fs);return program=gl['createProgram'](),gl[_0x5d6483(0x1b6)](program,_0x21d765),gl[_0x5d6483(0x1b6)](program,_0x51b9cb),gl[_0x5d6483(0x1a9)](program),gl[_0x5d6483(0x1af)](program),program;}function setupTexture_Buffer(_0x331af9){const _0x3a60af=a0_0x51f1;texture=gl['createTexture'](),gl[_0x3a60af(0x192)](gl[_0x3a60af(0x1ac)],texture),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x3a60af(0x1a3)],gl[_0x3a60af(0x1b7)]),gl[_0x3a60af(0x1be)](gl[_0x3a60af(0x1ac)],gl[_0x3a60af(0x1b0)],gl[_0x3a60af(0x1b7)]),gl['texParameteri'](gl[_0x3a60af(0x1ac)],gl[_0x3a60af(0x18d)],gl[_0x3a60af(0x183)]),gl[_0x3a60af(0x1be)](gl['TEXTURE_2D'],gl[_0x3a60af(0x1a0)],gl['CLAMP_TO_EDGE']);_0x331af9===_0x3a60af(0x1b5)&&(gl[_0x3a60af(0x1b1)](gl[_0x3a60af(0x1bb)](program,'game_size'),gameWidth,gameHeight),gl[_0x3a60af(0x1b1)](gl[_0x3a60af(0x1bb)](program,_0x3a60af(0x1bf)),gl[_0x3a60af(0x1c8)][_0x3a60af(0x186)],gl[_0x3a60af(0x1c8)][_0x3a60af(0x1c0)]),gl[_0x3a60af(0x1b9)](gl[_0x3a60af(0x1bb)](program,'smooth_width'),gameWidth/gl[_0x3a60af(0x1c8)][_0x3a60af(0x186)]),gl[_0x3a60af(0x1b9)](gl[_0x3a60af(0x1bb)](program,_0x3a60af(0x197)),gameHeight/gl['canvas'][_0x3a60af(0x1c0)]));const _0x54e56f=gl['createBuffer']();gl[_0x3a60af(0x1bc)](gl[_0x3a60af(0x1aa)],_0x54e56f),gl[_0x3a60af(0x193)](gl[_0x3a60af(0x1aa)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x3a60af(0x194)]),gl[_0x3a60af(0x184)](gl['getAttribLocation'](program,_0x3a60af(0x198)),0x2,gl[_0x3a60af(0x191)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x3a60af(0x1a1)](program,_0x3a60af(0x198)));const _0x1794fa=gl[_0x3a60af(0x1a8)]();gl['bindBuffer'](gl[_0x3a60af(0x1aa)],_0x1794fa),gl[_0x3a60af(0x193)](gl[_0x3a60af(0x1aa)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x3a60af(0x194)]),gl['vertexAttribPointer'](gl[_0x3a60af(0x1a1)](program,_0x3a60af(0x1c6)),0x2,gl[_0x3a60af(0x191)],![],0x0,0x0),gl[_0x3a60af(0x19b)](gl[_0x3a60af(0x1a1)](program,_0x3a60af(0x1c6)));}function setup2DContext(){const _0x5d30d8=a0_0x51f1;ctx2d=bufferCanvas[_0x5d30d8(0x196)]('2d'),ctx2d[_0x5d30d8(0x19d)]=![];}async function renderPixel(_0xdaa67f){const _0x1cde25=a0_0x51f1,_0x46c725=a0_0x19650d[_0x1cde25(0x1a4)]();if(!_0x46c725)return;await loadLUT64();const _0x13fa3f=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0xdabd55=0x0;_0xdabd55<gameHeight;_0xdabd55++){for(let _0x3e8f13=0x0;_0x3e8f13<gameWidth;_0x3e8f13++){const _0x5b292c=_0xdabd55*gameStride+_0x3e8f13,_0x277dd3=(_0xdabd55*gameWidth+_0x3e8f13)*0x4,_0x44b215=_0x46c725[_0x5b292c],_0x3932bf=(_0x44b215&0xff)>>0x2,_0x1a8063=(_0x44b215>>0x8&0xff)>>0x2,_0x8adf96=(_0x44b215>>0x10&0xff)>>0x2,_0x3176d4=(_0x3932bf*0x40*0x40+_0x1a8063*0x40+_0x8adf96)*0x3;_0x13fa3f[_0x277dd3]=lut64[_0x3176d4],_0x13fa3f[_0x277dd3+0x1]=lut64[_0x3176d4+0x1],_0x13fa3f[_0x277dd3+0x2]=lut64[_0x3176d4+0x2],_0x13fa3f[_0x277dd3+0x3]=0xff;}}if(_0xdaa67f===_0x1cde25(0x1a5))gl[_0x1cde25(0x18f)](gl[_0x1cde25(0x1ac)],0x0,gl[_0x1cde25(0x1ad)],gameWidth,gameHeight,0x0,gl[_0x1cde25(0x1ad)],gl[_0x1cde25(0x18b)],_0x13fa3f),gl[_0x1cde25(0x1a7)](gl[_0x1cde25(0x1ae)]),gl['drawArrays'](gl[_0x1cde25(0x188)],0x0,0x4);else _0xdaa67f==='2d'&&(imageDataObj=new ImageData(_0x13fa3f,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x1cde25(0x19f)](_0x73b202=>{const _0x15f7ef=_0x1cde25;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x15f7ef(0x186)],bufferCanvas[_0x15f7ef(0x1c0)]),ctx2d['drawImage'](_0x73b202,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0xdaa67f));}export async function switchRenderMode(_0x257289){const _0x50005b=a0_0x51f1;systemType=gameName['slice'](-0x3);if(_0x257289==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x257289===_0x50005b(0x1a5))setupStyle('2d'),setupWebGL_Shader(_0x50005b(0x1a5)),setupTexture_Buffer(_0x50005b(0x1a5)),renderPixel('webgl');else _0x257289==='webgl_full'&&(setupStyle(_0x50005b(0x1b5)),setupWebGL_Shader(_0x50005b(0x1b5)),setupTexture_Buffer(_0x50005b(0x1b5)),renderPixel('webgl'));}}