const a0_0xd6bdd7=a0_0x4b13;(function(_0x50765c,_0x7b4084){const _0x2196e8=a0_0x4b13,_0x57688d=_0x50765c();while(!![]){try{const _0x59c9d5=parseInt(_0x2196e8(0x1f8))/0x1+-parseInt(_0x2196e8(0x230))/0x2*(parseInt(_0x2196e8(0x245))/0x3)+parseInt(_0x2196e8(0x1ff))/0x4+-parseInt(_0x2196e8(0x235))/0x5+parseInt(_0x2196e8(0x20e))/0x6*(parseInt(_0x2196e8(0x219))/0x7)+-parseInt(_0x2196e8(0x1f6))/0x8*(-parseInt(_0x2196e8(0x21d))/0x9)+parseInt(_0x2196e8(0x24b))/0xa;if(_0x59c9d5===_0x7b4084)break;else _0x57688d['push'](_0x57688d['shift']());}catch(_0x1b4901){_0x57688d['push'](_0x57688d['shift']());}}}(a0_0x3593,0xd2eae));import*as a0_0x345d4e from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0xd6bdd7(0x1fd)](a0_0xd6bdd7(0x255)),bufferCanvas=document[a0_0xd6bdd7(0x1fd)](a0_0xd6bdd7(0x212)),canvasContainer=document['getElementById'](a0_0xd6bdd7(0x1fe)),imgShader=document[a0_0xd6bdd7(0x1fd)](a0_0xd6bdd7(0x204)),settingContainer=document[a0_0xd6bdd7(0x242)](a0_0xd6bdd7(0x23a)),messageContainer=document[a0_0xd6bdd7(0x242)](a0_0xd6bdd7(0x211)),stateTitle=document[a0_0xd6bdd7(0x242)]('.stateTitle,\x20.stateDate');function a0_0x4b13(_0x1c37d2,_0x53d8e1){const _0x359359=a0_0x3593();return a0_0x4b13=function(_0x4b13d4,_0x2982c8){_0x4b13d4=_0x4b13d4-0x1f4;let _0x456896=_0x359359[_0x4b13d4];return _0x456896;},a0_0x4b13(_0x1c37d2,_0x53d8e1);}let imageDataObj=null;async function loadLUT64(){const _0x435f13=a0_0xd6bdd7;systemType=gameName[_0x435f13(0x226)](-0x3);const _0x25c9e9=localStorage[_0x435f13(0x22d)](gameName+_0x435f13(0x20c))||'4.0',_0x1d29e2=(localStorage[_0x435f13(0x22d)](gameName+_0x435f13(0x224))||'warm')['toLowerCase']();if(!lut64||lut64Streng!==_0x25c9e9||lut64Profile!==_0x1d29e2){const _0x4c17ab=_0x435f13(0x209)+_0x1d29e2+'_'+_0x25c9e9+'.bin';console[_0x435f13(0x22c)](_0x4c17ab);const _0x3b748b=await fetch(_0x4c17ab),_0x209aee=await _0x3b748b[_0x435f13(0x1fb)]();lut64=new Uint8Array(_0x209aee),lut64Streng=_0x25c9e9,lut64Profile=_0x1d29e2;}}async function loadShaderSource(_0xf23272){const _0x5f4763=a0_0xd6bdd7,_0x5b7acf=await fetch(_0xf23272);return await _0x5b7acf[_0x5f4763(0x20d)]();}function setupStyle(_0x56ed25){const _0x392561=a0_0xd6bdd7;clientWidth=document[_0x392561(0x203)][_0x392561(0x218)];const _0x7058bc=window['devicePixelRatio'];systemType===_0x392561(0x208)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x392561(0x247)](clientWidth*_0x7058bc/gameWidth),localStorage[_0x392561(0x238)](_0x392561(0x244),_0x392561(0x23d)+gameWidth*(integerScaling/_0x7058bc)+','+gameHeight*(integerScaling/_0x7058bc))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x392561(0x247)](clientWidth*_0x7058bc/gameWidth),localStorage['setItem'](_0x392561(0x244),_0x392561(0x23d)+gameWidth*(integerScaling/_0x7058bc)+','+gameHeight*(integerScaling/_0x7058bc)));if(_0x56ed25==='2d')bufferCanvas['width']=gameWidth,bufferCanvas[_0x392561(0x213)]=gameHeight,bufferCanvas[_0x392561(0x256)][_0x392561(0x231)]=''+integerScaling/_0x7058bc,bufferCanvas[_0x392561(0x256)][_0x392561(0x246)]=_0x392561(0x229),canvasContainer['style'][_0x392561(0x20f)]=gameWidth*(integerScaling/_0x7058bc)+'px',canvasContainer['style'][_0x392561(0x213)]=gameHeight*(integerScaling/_0x7058bc)+'px',textured['style'][_0x392561(0x20f)]=gameWidth*(integerScaling/_0x7058bc)+'px',textured[_0x392561(0x256)][_0x392561(0x213)]=gameHeight*(integerScaling/_0x7058bc)+'px',imgShader[_0x392561(0x256)]['transform']=_0x392561(0x236)+integerScaling/_0x7058bc/upscaleShader+')',settingContainer[_0x392561(0x240)](function(_0x13ade5){const _0x304032=_0x392561;_0x13ade5['style'][_0x304032(0x20f)]=gameWidth*(integerScaling/_0x7058bc)+'px',_0x13ade5[_0x304032(0x256)][_0x304032(0x213)]=gameHeight*(integerScaling/_0x7058bc)+'px';}),messageContainer['forEach'](function(_0x5641d7){const _0x56dc40=_0x392561;_0x5641d7['style'][_0x56dc40(0x20f)]=gameWidth+'px',_0x5641d7[_0x56dc40(0x256)][_0x56dc40(0x213)]=gameHeight+'px',_0x5641d7['style'][_0x56dc40(0x231)]=''+integerScaling/_0x7058bc;}),stateTitle[_0x392561(0x240)](function(_0x34038d){const _0x18f3cb=_0x392561;_0x34038d[_0x18f3cb(0x1f9)][_0x18f3cb(0x23e)]('fefs');});else _0x56ed25===_0x392561(0x202)&&(bufferCanvas[_0x392561(0x20f)]=clientWidth*upscaleFactor,bufferCanvas[_0x392561(0x213)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x392561(0x256)][_0x392561(0x231)]=''+0x1/upscaleFactor,bufferCanvas[_0x392561(0x256)][_0x392561(0x246)]='',canvasContainer['style']['width']=clientWidth+'px',canvasContainer[_0x392561(0x256)]['height']=clientWidth*(gameHeight/gameWidth)+'px',textured['style'][_0x392561(0x20f)]=clientWidth+'px',textured[_0x392561(0x256)][_0x392561(0x213)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x392561(0x256)]['transform']=_0x392561(0x236)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x392561(0x240)](function(_0x109d0f){const _0x4b1862=_0x392561;_0x109d0f['style'][_0x4b1862(0x20f)]=clientWidth+'px',_0x109d0f[_0x4b1862(0x256)]['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer['forEach'](function(_0x5a55dd){const _0x2950cc=_0x392561;_0x5a55dd[_0x2950cc(0x256)][_0x2950cc(0x20f)]=gameWidth+'px',_0x5a55dd[_0x2950cc(0x256)]['height']=gameHeight+'px',_0x5a55dd[_0x2950cc(0x256)][_0x2950cc(0x231)]=''+clientWidth/gameWidth;}),stateTitle[_0x392561(0x240)](function(_0x507db3){const _0x44820d=_0x392561;_0x507db3[_0x44820d(0x1f9)][_0x44820d(0x205)](_0x44820d(0x1f5));}));imgShader['style'][_0x392561(0x20f)]=gameWidth*upscaleShader+'px',imgShader[_0x392561(0x256)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x392561(0x256)]['transformOrigin']=_0x392561(0x23b),imgShader[_0x392561(0x256)][_0x392561(0x217)](_0x392561(0x241),upscaleShader+'px\x20'+upscaleShader+'px');}function a0_0x3593(){const _0x1dc151=['drawImage','gbc','./src/lut/lut64_','TRIANGLE_STRIP','./src/shaders/fragmentShader.glsl','_streng','text','1992HWpSwt','width','texcoord','.message-container','canvas','height','then','useProgram','FLOAT','setProperty','clientWidth','13531cbGvME','enableVertexAttribArray','clearRect','shaderSource','36hAlTph','NEAREST','smooth_height','getAttribLocation','vertexAttribPointer','ARRAY_BUFFER','getPixelData','_temperature','CLAMP_TO_EDGE','slice','getShaderParameter','DOMContentLoaded','crisp-edges','error','COLOR_BUFFER_BIT','log','getItem','linkProgram','STATIC_DRAW','3446xgmOfz','zoom','getUniformLocation','TEXTURE_2D','texParameteri','4802330WRbAeo','scale(','smooth_width','setItem','bindBuffer','.setting-container','top\x20center','bufferData','0,0,','remove','imageSmoothingEnabled','forEach','--bg-size','querySelectorAll','VERTEX_SHADER','screenSize','2046HywQiI','imageRendering','floor','TEXTURE_MIN_FILTER','./src/shaders/vertexShader.glsl','uniform1f','380460OKANbz','data','set','UNSIGNED_BYTE','TEXTURE_WRAP_S','viewport','createTexture','position','bindTexture','createBuffer','textured','style','texImage2D','fefs','1375552fJuTgl','attachShader','613930uixpEf','classList','uniform2f','arrayBuffer','TEXTURE_MAG_FILTER','getElementById','canvas-container','4071848xABOCY','TEXTURE_WRAP_T','deleteShader','webgl2','documentElement','img-shader','add','RGBA'];a0_0x3593=function(){return _0x1dc151;};return a0_0x3593();}function setupWebGL(){const _0x4983a6=a0_0xd6bdd7;gl=bufferCanvas['getContext'](_0x4983a6(0x202));if(!gl)return console[_0x4983a6(0x22a)]('WebGL2\x20not\x20supported'),null;gl[_0x4983a6(0x250)](0x0,0x0,bufferCanvas[_0x4983a6(0x20f)],bufferCanvas['height']);}function createShader(_0x1aba4e,_0x49b031){const _0x18443d=a0_0xd6bdd7,_0x1f4188=gl['createShader'](_0x1aba4e);gl[_0x18443d(0x21c)](_0x1f4188,_0x49b031),gl['compileShader'](_0x1f4188);if(!gl[_0x18443d(0x227)](_0x1f4188,gl['COMPILE_STATUS']))return console['error'](gl['getShaderInfoLog'](_0x1f4188)),gl[_0x18443d(0x201)](_0x1f4188),null;return _0x1f4188;}async function setupShaders(){const _0x11d51b=a0_0xd6bdd7,_0x37a1e0=await loadShaderSource(_0x11d51b(0x249)),_0x448cc7=await loadShaderSource(_0x11d51b(0x20b)),_0x214a4f=createShader(gl[_0x11d51b(0x243)],_0x37a1e0),_0x5dc430=createShader(gl['FRAGMENT_SHADER'],_0x448cc7);return program=gl['createProgram'](),gl[_0x11d51b(0x1f7)](program,_0x214a4f),gl[_0x11d51b(0x1f7)](program,_0x5dc430),gl[_0x11d51b(0x22e)](program),gl[_0x11d51b(0x215)](program),program;}function setupTexture(){const _0x334610=a0_0xd6bdd7;texture=gl[_0x334610(0x251)](),gl[_0x334610(0x253)](gl['TEXTURE_2D'],texture),gl[_0x334610(0x234)](gl[_0x334610(0x233)],gl[_0x334610(0x248)],gl[_0x334610(0x21e)]),gl[_0x334610(0x234)](gl[_0x334610(0x233)],gl[_0x334610(0x1fc)],gl[_0x334610(0x21e)]),gl[_0x334610(0x234)](gl['TEXTURE_2D'],gl[_0x334610(0x24f)],gl[_0x334610(0x225)]),gl['texParameteri'](gl[_0x334610(0x233)],gl[_0x334610(0x200)],gl[_0x334610(0x225)]),gl[_0x334610(0x1fa)](gl['getUniformLocation'](program,'game_size'),gameWidth,gameHeight),gl[_0x334610(0x1fa)](gl[_0x334610(0x232)](program,'render_size'),gl[_0x334610(0x212)][_0x334610(0x20f)],gl['canvas'][_0x334610(0x213)]),gl[_0x334610(0x24a)](gl[_0x334610(0x232)](program,_0x334610(0x237)),gameWidth/gl[_0x334610(0x212)][_0x334610(0x20f)]),gl['uniform1f'](gl[_0x334610(0x232)](program,_0x334610(0x21f)),gameHeight/gl[_0x334610(0x212)][_0x334610(0x213)]);}function setupBuffers(){const _0x2a3835=a0_0xd6bdd7,_0x5c5712=gl[_0x2a3835(0x254)]();gl[_0x2a3835(0x239)](gl[_0x2a3835(0x222)],_0x5c5712),gl['bufferData'](gl[_0x2a3835(0x222)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2a3835(0x22f)]);const _0x541e37=gl['getAttribLocation'](program,_0x2a3835(0x252));gl[_0x2a3835(0x21a)](_0x541e37),gl[_0x2a3835(0x221)](_0x541e37,0x2,gl[_0x2a3835(0x216)],![],0x0,0x0);const _0x188dee=gl['createBuffer']();gl['bindBuffer'](gl[_0x2a3835(0x222)],_0x188dee),gl[_0x2a3835(0x23c)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']);const _0x5effca=gl[_0x2a3835(0x220)](program,_0x2a3835(0x210));gl['enableVertexAttribArray'](_0x5effca),gl[_0x2a3835(0x221)](_0x5effca,0x2,gl[_0x2a3835(0x216)],![],0x0,0x0);}async function renderPixel(_0x37d1dd){const _0x3d80cb=a0_0xd6bdd7,_0x25a298=a0_0x345d4e[_0x3d80cb(0x223)]();if(!_0x25a298)return;await loadLUT64();const _0x5e47f3=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x417083=0x0;_0x417083<gameHeight;_0x417083++){for(let _0x52ccc1=0x0;_0x52ccc1<gameWidth;_0x52ccc1++){const _0x90ceb8=_0x417083*gameStride+_0x52ccc1,_0x358d49=(_0x417083*gameWidth+_0x52ccc1)*0x4,_0x15d14c=_0x25a298[_0x90ceb8],_0x3fe2f3=(_0x15d14c&0xff)>>0x2,_0x5c256e=(_0x15d14c>>0x8&0xff)>>0x2,_0x43e768=(_0x15d14c>>0x10&0xff)>>0x2,_0x66a1b5=(_0x3fe2f3*0x40*0x40+_0x5c256e*0x40+_0x43e768)*0x3;_0x5e47f3[_0x358d49]=lut64[_0x66a1b5],_0x5e47f3[_0x358d49+0x1]=lut64[_0x66a1b5+0x1],_0x5e47f3[_0x358d49+0x2]=lut64[_0x66a1b5+0x2],_0x5e47f3[_0x358d49+0x3]=0xff;}}if(_0x37d1dd===_0x3d80cb(0x202))gl['bindTexture'](gl['TEXTURE_2D'],texture),gl[_0x3d80cb(0x1f4)](gl[_0x3d80cb(0x233)],0x0,gl[_0x3d80cb(0x206)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x3d80cb(0x24e)],_0x5e47f3),gl['clear'](gl[_0x3d80cb(0x22b)]),gl['drawArrays'](gl[_0x3d80cb(0x20a)],0x0,0x4);else _0x37d1dd==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d',{'alpha':![]}),ctx2d[_0x3d80cb(0x23f)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj[_0x3d80cb(0x24c)][_0x3d80cb(0x24d)](_0x5e47f3),createImageBitmap(imageDataObj)[_0x3d80cb(0x214)](_0x361fc0=>{const _0x43196e=_0x3d80cb;ctx2d[_0x43196e(0x21b)](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']),ctx2d[_0x43196e(0x207)](_0x361fc0,0x0,0x0),_0x361fc0['close']();}));requestAnimationFrame(()=>renderPixel(_0x37d1dd));}export async function switchRenderMode(_0x2f25f6){const _0x515f03=a0_0xd6bdd7;systemType=gameName[_0x515f03(0x226)](-0x3);if(_0x2f25f6==='2d')setupStyle('2d'),renderPixel('2d');else _0x2f25f6===_0x515f03(0x202)&&(setupStyle('webgl2'),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document['addEventListener'](a0_0xd6bdd7(0x228),function(){});