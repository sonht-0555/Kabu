(function(_0x2df62a,_0x5529e3){const _0x24d6b6=a0_0x333b,_0x5da476=_0x2df62a();while(!![]){try{const _0x3d185b=-parseInt(_0x24d6b6(0xd7))/0x1*(parseInt(_0x24d6b6(0xe1))/0x2)+parseInt(_0x24d6b6(0xcb))/0x3+parseInt(_0x24d6b6(0xf1))/0x4*(parseInt(_0x24d6b6(0xc7))/0x5)+-parseInt(_0x24d6b6(0xc0))/0x6+parseInt(_0x24d6b6(0xc1))/0x7*(-parseInt(_0x24d6b6(0xd4))/0x8)+-parseInt(_0x24d6b6(0xc3))/0x9+parseInt(_0x24d6b6(0xfb))/0xa*(parseInt(_0x24d6b6(0xc9))/0xb);if(_0x3d185b===_0x5529e3)break;else _0x5da476['push'](_0x5da476['shift']());}catch(_0x37b44c){_0x5da476['push'](_0x5da476['shift']());}}}(a0_0x279e,0x3bc54));import*as a0_0x25f03d from'./main.js';function a0_0x333b(_0x454643,_0x5d14b5){const _0x279e46=a0_0x279e();return a0_0x333b=function(_0x333bcd,_0x4f439b){_0x333bcd=_0x333bcd-0xb9;let _0xf4e64a=_0x279e46[_0x333bcd];return _0xf4e64a;},a0_0x333b(_0x454643,_0x5d14b5);}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x15d1c8=a0_0x333b;systemType=gameName[_0x15d1c8(0xcd)](-0x3);const _0x20d5a6=(localStorage[_0x15d1c8(0xba)](gameName+'_temperature')||_0x15d1c8(0xdb))[_0x15d1c8(0xc5)]();if(!lut64||lut64Profile!==_0x20d5a6){const _0x440dea=_0x15d1c8(0xf3)+_0x20d5a6+'_4.0.bin';console[_0x15d1c8(0xc8)](_0x440dea);const _0x13c027=await fetch(_0x440dea),_0x265d12=await _0x13c027[_0x15d1c8(0xc4)]();lut64=new Uint8Array(_0x265d12),lut64Profile=_0x20d5a6;}}function a0_0x279e(){const _0x5f51a1=['enableVertexAttribArray','createProgram','smooth_height','TEXTURE_WRAP_S','FLOAT','bindBuffer','getContext','CLAMP_TO_EDGE','NEAREST','game_size','vertexAttribPointer','height','STATIC_DRAW','ARRAY_BUFFER','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','1916924BYxrnK','TEXTURE_MIN_FILTER','./src/lut/lut64_','TEXTURE_WRAP_T','clear','attachShader','getAttribLocation','bufferData','set','putImageData','100EIEXTl','VERTEX_SHADER','width','texParameteri','UNSIGNED_BYTE','shaderSource','getItem','data','webgl','bindTexture','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','clearRect','224412UtZKcO','546vrrYVx','canvas','3346794VBqBGp','arrayBuffer','toLowerCase','FRAGMENT_SHADER','5VvNKCF','log','604527BHHcOB','linkProgram','602994DmRVKd','low-power','slice','uniform2f','TRIANGLE_STRIP','TEXTURE_MAG_FILTER','useProgram','drawArrays','RGBA','42696JvTMZI','createBuffer','TEXTURE_2D','22775uANhEi','position','uniform1f','texcoord','none','imageSmoothingEnabled','getUniformLocation','webgl_full','smooth_width','createTexture','14OKZsGy'];a0_0x279e=function(){return _0x5f51a1;};return a0_0x279e();}function setupWebGL_Shader(_0x173351){const _0x314998=a0_0x333b;gl=bufferCanvas[_0x314998(0xe8)](_0x314998(0xbc),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x314998(0xcc)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x314998(0xfd)],bufferCanvas[_0x314998(0xed)]);function _0x29de8d(_0x9fa2e3,_0x2de54d){const _0xb8b800=_0x314998,_0x2dedb4=gl['createShader'](_0x9fa2e3);return gl[_0xb8b800(0xb9)](_0x2dedb4,_0x2de54d),gl['compileShader'](_0x2dedb4),_0x2dedb4;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x173351==='webgl')fs=_0x314998(0xbe);else _0x173351===_0x314998(0xde)&&(fs=_0x314998(0xf0));const _0x1fdae9=_0x29de8d(gl[_0x314998(0xfc)],vs),_0x5b96fa=_0x29de8d(gl[_0x314998(0xc6)],fs);return program=gl[_0x314998(0xe3)](),gl[_0x314998(0xf6)](program,_0x1fdae9),gl[_0x314998(0xf6)](program,_0x5b96fa),gl[_0x314998(0xca)](program),gl[_0x314998(0xd1)](program),program;}function setupTexture_Buffer(_0x29288d){const _0x2382a3=a0_0x333b;texture=gl[_0x2382a3(0xe0)](),gl[_0x2382a3(0xbd)](gl[_0x2382a3(0xd6)],texture),gl[_0x2382a3(0xfe)](gl[_0x2382a3(0xd6)],gl[_0x2382a3(0xf2)],gl[_0x2382a3(0xea)]),gl[_0x2382a3(0xfe)](gl[_0x2382a3(0xd6)],gl[_0x2382a3(0xd0)],gl[_0x2382a3(0xea)]),gl['texParameteri'](gl[_0x2382a3(0xd6)],gl[_0x2382a3(0xe5)],gl[_0x2382a3(0xe9)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x2382a3(0xf4)],gl[_0x2382a3(0xe9)]);_0x29288d===_0x2382a3(0xde)&&(gl[_0x2382a3(0xce)](gl[_0x2382a3(0xdd)](program,_0x2382a3(0xeb)),gameWidth,gameHeight),gl[_0x2382a3(0xce)](gl[_0x2382a3(0xdd)](program,'render_size'),gl['canvas'][_0x2382a3(0xfd)],gl[_0x2382a3(0xc2)]['height']),gl[_0x2382a3(0xd9)](gl[_0x2382a3(0xdd)](program,_0x2382a3(0xdf)),gameWidth/gl[_0x2382a3(0xc2)][_0x2382a3(0xfd)]),gl[_0x2382a3(0xd9)](gl['getUniformLocation'](program,_0x2382a3(0xe4)),gameHeight/gl['canvas'][_0x2382a3(0xed)]));const _0x237f6c=gl[_0x2382a3(0xd5)]();gl[_0x2382a3(0xe7)](gl[_0x2382a3(0xef)],_0x237f6c),gl[_0x2382a3(0xf8)](gl[_0x2382a3(0xef)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2382a3(0xee)]),gl[_0x2382a3(0xec)](gl[_0x2382a3(0xf7)](program,_0x2382a3(0xd8)),0x2,gl[_0x2382a3(0xe6)],![],0x0,0x0),gl[_0x2382a3(0xe2)](gl[_0x2382a3(0xf7)](program,_0x2382a3(0xd8)));const _0x592384=gl['createBuffer']();gl[_0x2382a3(0xe7)](gl[_0x2382a3(0xef)],_0x592384),gl[_0x2382a3(0xf8)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2382a3(0xee)]),gl['vertexAttribPointer'](gl[_0x2382a3(0xf7)](program,_0x2382a3(0xda)),0x2,gl[_0x2382a3(0xe6)],![],0x0,0x0),gl[_0x2382a3(0xe2)](gl[_0x2382a3(0xf7)](program,_0x2382a3(0xda)));}function setup2DContext(){const _0x15c189=a0_0x333b;ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x15c189(0xdc)]=![];}async function renderPixel(_0x506a76){const _0x46b3e1=a0_0x333b,_0x7bb3df=a0_0x25f03d['getPixelData']();if(!_0x7bb3df)return;await loadLUT64();const _0x1fa7a7=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5377ab=0x0;_0x5377ab<gameHeight;_0x5377ab++){for(let _0x2ecc83=0x0;_0x2ecc83<gameWidth;_0x2ecc83++){const _0x34a509=_0x5377ab*gameStride+_0x2ecc83,_0xc7ada2=(_0x5377ab*gameWidth+_0x2ecc83)*0x4,_0x320f77=_0x7bb3df[_0x34a509];if(lut64Profile===_0x46b3e1(0xdb))_0x1fa7a7[_0xc7ada2]=_0x320f77&0xff,_0x1fa7a7[_0xc7ada2+0x1]=_0x320f77>>0x8&0xff,_0x1fa7a7[_0xc7ada2+0x2]=_0x320f77>>0x10&0xff,_0x1fa7a7[_0xc7ada2+0x3]=0xff;else{const _0x495042=(_0x320f77&0xff)>>0x2,_0x212434=(_0x320f77>>0x8&0xff)>>0x2,_0xa29eed=(_0x320f77>>0x10&0xff)>>0x2,_0x89cdb1=(_0x495042*0x40*0x40+_0x212434*0x40+_0xa29eed)*0x3;_0x1fa7a7[_0xc7ada2]=lut64[_0x89cdb1],_0x1fa7a7[_0xc7ada2+0x1]=lut64[_0x89cdb1+0x1],_0x1fa7a7[_0xc7ada2+0x2]=lut64[_0x89cdb1+0x2],_0x1fa7a7[_0xc7ada2+0x3]=0xff;}}}if(_0x506a76===_0x46b3e1(0xbc))gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x46b3e1(0xd3)],gameWidth,gameHeight,0x0,gl[_0x46b3e1(0xd3)],gl[_0x46b3e1(0xff)],_0x1fa7a7),gl[_0x46b3e1(0xf5)](gl['COLOR_BUFFER_BIT']),gl[_0x46b3e1(0xd2)](gl[_0x46b3e1(0xcf)],0x0,0x4);else _0x506a76==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x1fa7a7,gameWidth,gameHeight):imageDataObj[_0x46b3e1(0xbb)][_0x46b3e1(0xf9)](_0x1fa7a7),ctx2d[_0x46b3e1(0xbf)](0x0,0x0,bufferCanvas[_0x46b3e1(0xfd)],bufferCanvas['height']),ctx2d[_0x46b3e1(0xfa)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x506a76));}export async function switchRenderMode(_0x1d49b3){const _0x55a96a=a0_0x333b;systemType=gameName['slice'](-0x3);if(_0x1d49b3==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x1d49b3===_0x55a96a(0xbc))setupStyle('2d'),setupWebGL_Shader(_0x55a96a(0xbc)),setupTexture_Buffer('webgl'),renderPixel(_0x55a96a(0xbc));else _0x1d49b3===_0x55a96a(0xde)&&(setupStyle('webgl_full'),setupWebGL_Shader(_0x55a96a(0xde)),setupTexture_Buffer('webgl_full'),renderPixel(_0x55a96a(0xbc)));}}