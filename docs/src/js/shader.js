(function(_0x1189fb,_0xe8e446){const _0x1352ca=a0_0x19fe,_0x1ea189=_0x1189fb();while(!![]){try{const _0x2b2c5a=parseInt(_0x1352ca(0xc0))/0x1+parseInt(_0x1352ca(0xbc))/0x2*(parseInt(_0x1352ca(0x9e))/0x3)+-parseInt(_0x1352ca(0xbd))/0x4*(-parseInt(_0x1352ca(0xc8))/0x5)+parseInt(_0x1352ca(0x9c))/0x6+-parseInt(_0x1352ca(0xb1))/0x7+parseInt(_0x1352ca(0xd4))/0x8+-parseInt(_0x1352ca(0xb7))/0x9*(parseInt(_0x1352ca(0xa4))/0xa);if(_0x2b2c5a===_0xe8e446)break;else _0x1ea189['push'](_0x1ea189['shift']());}catch(_0x861d3f){_0x1ea189['push'](_0x1ea189['shift']());}}}(a0_0x3420,0xc1753));function a0_0x19fe(_0x14c32a,_0x111efa){const _0x342098=a0_0x3420();return a0_0x19fe=function(_0x19feee,_0x18043b){_0x19feee=_0x19feee-0x9b;let _0x7b837c=_0x342098[_0x19feee];return _0x7b837c;},a0_0x19fe(_0x14c32a,_0x111efa);}import*as a0_0x11cfa1 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x547771=a0_0x19fe;systemType=gameName[_0x547771(0xaf)](-0x3);const _0x14b747=localStorage[_0x547771(0xab)](gameName+_0x547771(0xad))||_0x547771(0xa1),_0x441325=(localStorage[_0x547771(0xab)](gameName+_0x547771(0xa3))||_0x547771(0xde))[_0x547771(0xb5)]();if(!lut64||lut64Streng!==_0x14b747||lut64Profile!==_0x441325){const _0x11ae1d=_0x547771(0xb9)+_0x441325+'_'+_0x14b747+'.bin';console[_0x547771(0xdd)](_0x11ae1d);const _0xf54e86=await fetch(_0x11ae1d),_0x1219a8=await _0xf54e86[_0x547771(0xa7)]();lut64=new Uint8Array(_0x1219a8),lut64Streng=_0x14b747,lut64Profile=_0x441325;}}function a0_0x3420(){const _0x49f1c4=['position','RGBA','uniform1f','UNSIGNED_BYTE','NEAREST','vertexAttribPointer','createBuffer','getPixelData','log','warm','FLOAT','TEXTURE_WRAP_T','8975754kMweqv','ARRAY_BUFFER','99357kElwWB','VERTEX_SHADER','low-power','4.0','TEXTURE_MAG_FILTER','_temperature','10452860ovjgcw','height','canvas','arrayBuffer','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','viewport','TEXTURE_MIN_FILTER','getItem','TEXTURE_2D','_streng','drawImage','slice','bindBuffer','7125629gcRSch','useProgram','then','shaderSource','toLowerCase','clearRect','18mVZRDy','texcoord','./src/lut/lut64_','texParameteri','getUniformLocation','2OQhzBl','8IYDGpc','uniform2f','compileShader','205801bwZmxv','enableVertexAttribArray','TRIANGLE_STRIP','webgl_full','FRAGMENT_SHADER','getContext','getAttribLocation','attachShader','2379325GumYhJ','createShader','width','bufferData','CLAMP_TO_EDGE','createProgram','texImage2D','linkProgram','webgl','STATIC_DRAW','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','game_size','9714504ktUrzO'];a0_0x3420=function(){return _0x49f1c4;};return a0_0x3420();}function setupWebGL_Shader(_0x11c8b6){const _0x496c24=a0_0x19fe;gl=bufferCanvas['getContext'](_0x496c24(0xd0),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x496c24(0xa0)}),gl[_0x496c24(0xa9)](0x0,0x0,bufferCanvas[_0x496c24(0xca)],bufferCanvas[_0x496c24(0xa5)]);function _0x2c0a21(_0x590f7d,_0x171a25){const _0x4dca87=_0x496c24,_0x5b5693=gl[_0x4dca87(0xc9)](_0x590f7d);return gl[_0x4dca87(0xb4)](_0x5b5693,_0x171a25),gl[_0x4dca87(0xbf)](_0x5b5693),_0x5b5693;}vs=_0x496c24(0xa8);if(_0x11c8b6==='webgl')fs=_0x496c24(0xd2);else _0x11c8b6===_0x496c24(0xc3)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x4fd794=_0x2c0a21(gl[_0x496c24(0x9f)],vs),_0x21cc4a=_0x2c0a21(gl[_0x496c24(0xc4)],fs);return program=gl[_0x496c24(0xcd)](),gl['attachShader'](program,_0x4fd794),gl[_0x496c24(0xc7)](program,_0x21cc4a),gl[_0x496c24(0xcf)](program),gl[_0x496c24(0xb2)](program),program;}function setupTexture_Buffer(_0x30d602){const _0x28cb31=a0_0x19fe;texture=gl['createTexture'](),gl['bindTexture'](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl[_0x28cb31(0xac)],gl[_0x28cb31(0xaa)],gl[_0x28cb31(0xd9)]),gl[_0x28cb31(0xba)](gl[_0x28cb31(0xac)],gl[_0x28cb31(0xa2)],gl[_0x28cb31(0xd9)]),gl['texParameteri'](gl[_0x28cb31(0xac)],gl['TEXTURE_WRAP_S'],gl[_0x28cb31(0xcc)]),gl['texParameteri'](gl[_0x28cb31(0xac)],gl[_0x28cb31(0x9b)],gl[_0x28cb31(0xcc)]);_0x30d602===_0x28cb31(0xc3)&&(gl[_0x28cb31(0xbe)](gl['getUniformLocation'](program,_0x28cb31(0xd3)),gameWidth,gameHeight),gl[_0x28cb31(0xbe)](gl['getUniformLocation'](program,'render_size'),gl[_0x28cb31(0xa6)][_0x28cb31(0xca)],gl[_0x28cb31(0xa6)][_0x28cb31(0xa5)]),gl[_0x28cb31(0xd7)](gl['getUniformLocation'](program,'smooth_width'),gameWidth/gl[_0x28cb31(0xa6)]['width']),gl[_0x28cb31(0xd7)](gl[_0x28cb31(0xbb)](program,'smooth_height'),gameHeight/gl[_0x28cb31(0xa6)]['height']));const _0xd4361d=gl['createBuffer']();gl[_0x28cb31(0xb0)](gl[_0x28cb31(0x9d)],_0xd4361d),gl[_0x28cb31(0xcb)](gl[_0x28cb31(0x9d)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x28cb31(0xd1)]),gl[_0x28cb31(0xda)](gl[_0x28cb31(0xc6)](program,'position'),0x2,gl[_0x28cb31(0xdf)],![],0x0,0x0),gl[_0x28cb31(0xc1)](gl['getAttribLocation'](program,_0x28cb31(0xd5)));const _0x4834bd=gl[_0x28cb31(0xdb)]();gl[_0x28cb31(0xb0)](gl[_0x28cb31(0x9d)],_0x4834bd),gl[_0x28cb31(0xcb)](gl[_0x28cb31(0x9d)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x28cb31(0xd1)]),gl['vertexAttribPointer'](gl[_0x28cb31(0xc6)](program,_0x28cb31(0xb8)),0x2,gl[_0x28cb31(0xdf)],![],0x0,0x0),gl[_0x28cb31(0xc1)](gl[_0x28cb31(0xc6)](program,_0x28cb31(0xb8)));}function setup2DContext(){const _0x302601=a0_0x19fe;ctx2d=bufferCanvas[_0x302601(0xc5)]('2d'),ctx2d['imageSmoothingEnabled']=![];}async function renderPixel(_0x13d298){const _0x29d4ee=a0_0x19fe,_0x293158=a0_0x11cfa1[_0x29d4ee(0xdc)]();if(!_0x293158)return;await loadLUT64();const _0x20ace5=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x156acb=0x0;_0x156acb<gameHeight;_0x156acb++){for(let _0xf97851=0x0;_0xf97851<gameWidth;_0xf97851++){const _0x16a2b0=_0x156acb*gameStride+_0xf97851,_0x376f93=(_0x156acb*gameWidth+_0xf97851)*0x4,_0x37bdc3=_0x293158[_0x16a2b0],_0x376871=(_0x37bdc3&0xff)>>0x2,_0x4868b0=(_0x37bdc3>>0x8&0xff)>>0x2,_0x328944=(_0x37bdc3>>0x10&0xff)>>0x2,_0x13c7da=(_0x376871*0x40*0x40+_0x4868b0*0x40+_0x328944)*0x3;_0x20ace5[_0x376f93]=lut64[_0x13c7da],_0x20ace5[_0x376f93+0x1]=lut64[_0x13c7da+0x1],_0x20ace5[_0x376f93+0x2]=lut64[_0x13c7da+0x2],_0x20ace5[_0x376f93+0x3]=0xff;}}if(_0x13d298===_0x29d4ee(0xd0))gl[_0x29d4ee(0xce)](gl[_0x29d4ee(0xac)],0x0,gl[_0x29d4ee(0xd6)],gameWidth,gameHeight,0x0,gl[_0x29d4ee(0xd6)],gl[_0x29d4ee(0xd8)],_0x20ace5),gl['clear'](gl['COLOR_BUFFER_BIT']),gl['drawArrays'](gl[_0x29d4ee(0xc2)],0x0,0x4);else _0x13d298==='2d'&&(imageDataObj=new ImageData(_0x20ace5,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x29d4ee(0xb3)](_0x13383c=>{const _0x216af9=_0x29d4ee;ctx2d[_0x216af9(0xb6)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x216af9(0xa5)]),ctx2d[_0x216af9(0xae)](_0x13383c,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x13d298));}export async function switchRenderMode(_0xb05313){const _0x5e1dfa=a0_0x19fe;systemType=gameName['slice'](-0x3);if(_0xb05313==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0xb05313==='webgl')setupStyle('2d'),setupWebGL_Shader(_0x5e1dfa(0xd0)),setupTexture_Buffer(_0x5e1dfa(0xd0)),renderPixel(_0x5e1dfa(0xd0));else _0xb05313===_0x5e1dfa(0xc3)&&(setupStyle('webgl_full'),setupWebGL_Shader(_0x5e1dfa(0xc3)),setupTexture_Buffer(_0x5e1dfa(0xc3)),renderPixel(_0x5e1dfa(0xd0)));}}