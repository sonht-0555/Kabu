(function(_0x46c973,_0x617a35){const _0x4c032f=a0_0x5123,_0xadc612=_0x46c973();while(!![]){try{const _0x2bb230=parseInt(_0x4c032f(0x140))/0x1+-parseInt(_0x4c032f(0x17b))/0x2*(-parseInt(_0x4c032f(0x142))/0x3)+parseInt(_0x4c032f(0x16a))/0x4*(parseInt(_0x4c032f(0x15a))/0x5)+-parseInt(_0x4c032f(0x158))/0x6*(-parseInt(_0x4c032f(0x177))/0x7)+-parseInt(_0x4c032f(0x175))/0x8*(-parseInt(_0x4c032f(0x13a))/0x9)+-parseInt(_0x4c032f(0x174))/0xa+-parseInt(_0x4c032f(0x147))/0xb*(parseInt(_0x4c032f(0x17d))/0xc);if(_0x2bb230===_0x617a35)break;else _0xadc612['push'](_0xadc612['shift']());}catch(_0x199a88){_0xadc612['push'](_0xadc612['shift']());}}}(a0_0x21a2,0x66679));import*as a0_0x576bc8 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x5b763e=a0_0x5123;systemType=gameName[_0x5b763e(0x148)](-0x3);const _0x4424f3=(localStorage['getItem'](gameName+_0x5b763e(0x138))||_0x5b763e(0x17c))[_0x5b763e(0x16e)]();if(!lut64||lut64Profile!==_0x4424f3){const _0x5552c4=_0x5b763e(0x14d)+_0x4424f3+_0x5b763e(0x146);console[_0x5b763e(0x17f)](_0x5552c4);const _0x2349c9=await fetch(_0x5552c4),_0x352d5f=await _0x2349c9[_0x5b763e(0x135)]();lut64=new Uint8Array(_0x352d5f),lut64Profile=_0x4424f3;}}function setupWebGL_Shader(_0x1c10a0){const _0x5afeb0=a0_0x5123;gl=bufferCanvas['getContext'](_0x5afeb0(0x165),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x5afeb0(0x143)}),gl[_0x5afeb0(0x139)](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']);function _0x4add78(_0x10328b,_0x54d805){const _0x278fe5=_0x5afeb0,_0x14070c=gl[_0x278fe5(0x160)](_0x10328b);return gl[_0x278fe5(0x155)](_0x14070c,_0x54d805),gl['compileShader'](_0x14070c),_0x14070c;}vs=_0x5afeb0(0x149);if(_0x1c10a0===_0x5afeb0(0x165))fs=_0x5afeb0(0x171);else _0x1c10a0==='webgl_full'&&(fs=_0x5afeb0(0x162));const _0x5219f3=_0x4add78(gl[_0x5afeb0(0x141)],vs),_0x610236=_0x4add78(gl[_0x5afeb0(0x173)],fs);return program=gl['createProgram'](),gl[_0x5afeb0(0x154)](program,_0x5219f3),gl['attachShader'](program,_0x610236),gl[_0x5afeb0(0x164)](program),gl[_0x5afeb0(0x14e)](program),program;}function setupTexture_Buffer(_0x256cc1){const _0x41dfd6=a0_0x5123;texture=gl[_0x41dfd6(0x179)](),gl[_0x41dfd6(0x152)](gl[_0x41dfd6(0x16c)],texture),gl[_0x41dfd6(0x137)](gl[_0x41dfd6(0x16c)],gl[_0x41dfd6(0x172)],gl[_0x41dfd6(0x16f)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x41dfd6(0x14c)],gl[_0x41dfd6(0x16f)]),gl[_0x41dfd6(0x137)](gl[_0x41dfd6(0x16c)],gl['TEXTURE_WRAP_S'],gl[_0x41dfd6(0x14b)]),gl[_0x41dfd6(0x137)](gl[_0x41dfd6(0x16c)],gl[_0x41dfd6(0x161)],gl[_0x41dfd6(0x14b)]);_0x256cc1===_0x41dfd6(0x157)&&(gl['uniform2f'](gl[_0x41dfd6(0x16b)](program,_0x41dfd6(0x15e)),gameWidth,gameHeight),gl[_0x41dfd6(0x14f)](gl[_0x41dfd6(0x16b)](program,_0x41dfd6(0x176)),gl[_0x41dfd6(0x159)]['width'],gl[_0x41dfd6(0x159)][_0x41dfd6(0x17e)]),gl[_0x41dfd6(0x170)](gl['getUniformLocation'](program,_0x41dfd6(0x168)),gameWidth/gl[_0x41dfd6(0x159)][_0x41dfd6(0x156)]),gl[_0x41dfd6(0x170)](gl[_0x41dfd6(0x16b)](program,'smooth_height'),gameHeight/gl[_0x41dfd6(0x159)]['height']));const _0xb58441=gl[_0x41dfd6(0x13d)]();gl[_0x41dfd6(0x13c)](gl['ARRAY_BUFFER'],_0xb58441),gl[_0x41dfd6(0x17a)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x41dfd6(0x169)]),gl[_0x41dfd6(0x15f)](gl[_0x41dfd6(0x14a)](program,'position'),0x2,gl[_0x41dfd6(0x15c)],![],0x0,0x0),gl[_0x41dfd6(0x136)](gl['getAttribLocation'](program,'position'));const _0x2d255a=gl['createBuffer']();gl[_0x41dfd6(0x13c)](gl[_0x41dfd6(0x150)],_0x2d255a),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x41dfd6(0x169)]),gl[_0x41dfd6(0x15f)](gl[_0x41dfd6(0x14a)](program,_0x41dfd6(0x144)),0x2,gl[_0x41dfd6(0x15c)],![],0x0,0x0),gl[_0x41dfd6(0x136)](gl[_0x41dfd6(0x14a)](program,'texcoord'));}function setup2DContext(){const _0x4d0642=a0_0x5123;ctx2d=bufferCanvas[_0x4d0642(0x178)]('2d'),ctx2d[_0x4d0642(0x15b)]=![];}function a0_0x21a2(){const _0x263cd6=['FLOAT','set','game_size','vertexAttribPointer','createShader','TEXTURE_WRAP_T','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','drawArrays','linkProgram','webgl','TRIANGLE_STRIP','putImageData','smooth_width','STATIC_DRAW','2349628gLfndc','getUniformLocation','TEXTURE_2D','clearRect','toLowerCase','NEAREST','uniform1f','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','TEXTURE_MIN_FILTER','FRAGMENT_SHADER','5957400olkkVB','362200lWwKZv','render_size','656810lKUTCd','getContext','createTexture','bufferData','154920ovqKgG','none','24DUFjmj','height','log','arrayBuffer','enableVertexAttribArray','texParameteri','_temperature','viewport','18BWOroi','UNSIGNED_BYTE','bindBuffer','createBuffer','clear','data','678200XtzFsn','VERTEX_SHADER','15AnNngE','low-power','texcoord','texImage2D','_4.0.bin','6585799EqOTBa','slice','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','getAttribLocation','CLAMP_TO_EDGE','TEXTURE_MAG_FILTER','./src/lut/lut64_','useProgram','uniform2f','ARRAY_BUFFER','RGBA','bindTexture','COLOR_BUFFER_BIT','attachShader','shaderSource','width','webgl_full','30djQkJZ','canvas','5MxvSqh','imageSmoothingEnabled'];a0_0x21a2=function(){return _0x263cd6;};return a0_0x21a2();}async function renderPixel(_0x3bc863){const _0x46415a=a0_0x5123,_0x3c1847=a0_0x576bc8['getPixelData']();if(!_0x3c1847)return;await loadLUT64();const _0x38b14c=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x42da33=0x0;_0x42da33<gameHeight;_0x42da33++){for(let _0x29d075=0x0;_0x29d075<gameWidth;_0x29d075++){const _0x6b8d28=_0x42da33*gameStride+_0x29d075,_0x473bee=(_0x42da33*gameWidth+_0x29d075)*0x4,_0x5e42d0=_0x3c1847[_0x6b8d28];if(lut64Profile==='none')_0x38b14c[_0x473bee]=_0x5e42d0&0xff,_0x38b14c[_0x473bee+0x1]=_0x5e42d0>>0x8&0xff,_0x38b14c[_0x473bee+0x2]=_0x5e42d0>>0x10&0xff,_0x38b14c[_0x473bee+0x3]=0xff;else{const _0x563d80=(_0x5e42d0&0xff)>>0x2,_0x50d943=(_0x5e42d0>>0x8&0xff)>>0x2,_0x13c214=(_0x5e42d0>>0x10&0xff)>>0x2,_0x4d6b2e=(_0x563d80*0x40*0x40+_0x50d943*0x40+_0x13c214)*0x3;_0x38b14c[_0x473bee]=lut64[_0x4d6b2e],_0x38b14c[_0x473bee+0x1]=lut64[_0x4d6b2e+0x1],_0x38b14c[_0x473bee+0x2]=lut64[_0x4d6b2e+0x2],_0x38b14c[_0x473bee+0x3]=0xff;}}}if(_0x3bc863==='webgl')gl[_0x46415a(0x145)](gl[_0x46415a(0x16c)],0x0,gl[_0x46415a(0x151)],gameWidth,gameHeight,0x0,gl[_0x46415a(0x151)],gl[_0x46415a(0x13b)],_0x38b14c),gl[_0x46415a(0x13e)](gl[_0x46415a(0x153)]),gl[_0x46415a(0x163)](gl[_0x46415a(0x166)],0x0,0x4);else _0x3bc863==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x38b14c,gameWidth,gameHeight):imageDataObj[_0x46415a(0x13f)][_0x46415a(0x15d)](_0x38b14c),ctx2d[_0x46415a(0x16d)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x46415a(0x17e)]),ctx2d[_0x46415a(0x167)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x3bc863));}function a0_0x5123(_0x6392bd,_0x107c12){const _0x21a218=a0_0x21a2();return a0_0x5123=function(_0x5123f0,_0x212b72){_0x5123f0=_0x5123f0-0x135;let _0x2e77b8=_0x21a218[_0x5123f0];return _0x2e77b8;},a0_0x5123(_0x6392bd,_0x107c12);}export async function switchRenderMode(_0x3cc655){const _0x13991d=a0_0x5123;systemType=gameName[_0x13991d(0x148)](-0x3);if(_0x3cc655==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x3cc655===_0x13991d(0x165))setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer('webgl'),renderPixel(_0x13991d(0x165));else _0x3cc655==='webgl_full'&&(setupStyle('webgl_full'),setupWebGL_Shader('webgl_full'),setupTexture_Buffer('webgl_full'),renderPixel(_0x13991d(0x165)));}}