const a0_0x57dea3=a0_0x57c7;(function(_0x148d12,_0x2befd8){const _0x41a18a=a0_0x57c7,_0x2873aa=_0x148d12();while(!![]){try{const _0xea06d2=-parseInt(_0x41a18a(0x149))/0x1*(-parseInt(_0x41a18a(0x11d))/0x2)+-parseInt(_0x41a18a(0x10f))/0x3+parseInt(_0x41a18a(0x147))/0x4+parseInt(_0x41a18a(0xfe))/0x5+parseInt(_0x41a18a(0x14c))/0x6+-parseInt(_0x41a18a(0x131))/0x7*(parseInt(_0x41a18a(0x11f))/0x8)+parseInt(_0x41a18a(0x110))/0x9;if(_0xea06d2===_0x2befd8)break;else _0x2873aa['push'](_0x2873aa['shift']());}catch(_0x957963){_0x2873aa['push'](_0x2873aa['shift']());}}}(a0_0x1122,0x844e3));import*as a0_0xe16f8b from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x57dea3(0x10a)](a0_0x57dea3(0x117)),bufferCanvas=document[a0_0x57dea3(0x10a)](a0_0x57dea3(0x139)),canvasContainer=document['getElementById'](a0_0x57dea3(0x11c)),imgShader=document[a0_0x57dea3(0x10a)]('img-shader'),settingContainer=document[a0_0x57dea3(0x128)](a0_0x57dea3(0xf8)),messageContainer=document[a0_0x57dea3(0x128)]('.message-container'),stateTitle=document['querySelectorAll']('.stateTitle,\x20.stateDate');function a0_0x57c7(_0x35e747,_0x3986e4){const _0x11229a=a0_0x1122();return a0_0x57c7=function(_0x57c7cc,_0xcd11da){_0x57c7cc=_0x57c7cc-0xec;let _0x56fe48=_0x11229a[_0x57c7cc];return _0x56fe48;},a0_0x57c7(_0x35e747,_0x3986e4);}async function loadLUT64(){const _0x456cc3=a0_0x57dea3;systemType=gameName['slice'](-0x3);const _0x38c224=localStorage[_0x456cc3(0x141)](gameName+_0x456cc3(0x146))||_0x456cc3(0x137),_0xd0be2c=(localStorage[_0x456cc3(0x141)](gameName+'_temperature')||_0x456cc3(0xfa))['toLowerCase']();if(!lut64||lut64Streng!==_0x38c224||lut64Profile!==_0xd0be2c){const _0x2c0208='./src/lut/lut64_'+_0xd0be2c+'_'+_0x38c224+_0x456cc3(0x13e);console['log'](_0x2c0208);const _0x4dbac6=await fetch(_0x2c0208),_0x5c2622=await _0x4dbac6[_0x456cc3(0x135)]();lut64=new Uint8Array(_0x5c2622),lut64Streng=_0x38c224,lut64Profile=_0xd0be2c;}}function a0_0x1122(){const _0x1f324a=['gbc','setItem','textured','CLAMP_TO_EDGE','getShaderInfoLog','then','WebGL2\x20not\x20supported','canvas-container','289108OCTbDh','zoom','24NStQIf','COLOR_BUFFER_BIT','texcoord','smooth_width','texImage2D','FRAGMENT_SHADER','0,0,','bufferData','compileShader','querySelectorAll','clearRect','clientWidth','fefs','transform','screenSize','TEXTURE_2D','./src/shaders/fragmentShader.glsl','TEXTURE_WRAP_T','1742167ZmSYFP','createProgram','ARRAY_BUFFER','getAttribLocation','arrayBuffer','top\x20center','4.0','transformOrigin','canvas','bindBuffer','TRIANGLE_STRIP','getPixelData','drawImage','.bin','RGBA','useProgram','getItem','render_size','drawArrays','height','shaderSource','_streng','298708VPJKay','VERTEX_SHADER','1DSODUn','attachShader','uniform2f','813036Xhotul','bindTexture','imageRendering','--bg-size','DOMContentLoaded','smooth_height','createShader','COMPILE_STATUS','remove','webgl2','vertexAttribPointer','position','floor','style','.setting-container','getUniformLocation','warm','viewport','createTexture','devicePixelRatio','2985980gkPrwP','forEach','createBuffer','classList','uniform1f','getShaderParameter','error','documentElement','text','getContext','./src/shaders/vertexShader.glsl','FLOAT','getElementById','scale(','width','enableVertexAttribArray','texParameteri','1636446tSnlRm','7939035weZONd','imageSmoothingEnabled','deleteShader','crisp-edges','NEAREST'];a0_0x1122=function(){return _0x1f324a;};return a0_0x1122();}async function loadShaderSource(_0x49acbb){const _0xd402e3=a0_0x57dea3,_0x3c4f70=await fetch(_0x49acbb);return await _0x3c4f70[_0xd402e3(0x106)]();}function setupStyle(_0x5dce11){const _0x2827dc=a0_0x57dea3;clientWidth=document[_0x2827dc(0x105)][_0x2827dc(0x12a)];const _0x5a6eff=window[_0x2827dc(0xfd)];systemType===_0x2827dc(0x115)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x2827dc(0xf6)](clientWidth*_0x5a6eff/gameWidth),localStorage[_0x2827dc(0x116)](_0x2827dc(0x12d),_0x2827dc(0x125)+gameWidth*(integerScaling/_0x5a6eff)+','+gameHeight*(integerScaling/_0x5a6eff))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x2827dc(0xf6)](clientWidth*_0x5a6eff/gameWidth),localStorage['setItem'](_0x2827dc(0x12d),_0x2827dc(0x125)+gameWidth*(integerScaling/_0x5a6eff)+','+gameHeight*(integerScaling/_0x5a6eff)));if(_0x5dce11==='2d')bufferCanvas[_0x2827dc(0x10c)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x2827dc(0xf7)]['zoom']=''+integerScaling/_0x5a6eff,bufferCanvas[_0x2827dc(0xf7)][_0x2827dc(0xec)]=_0x2827dc(0x113),canvasContainer[_0x2827dc(0xf7)][_0x2827dc(0x10c)]=gameWidth*(integerScaling/_0x5a6eff)+'px',canvasContainer['style'][_0x2827dc(0x144)]=gameHeight*(integerScaling/_0x5a6eff)+'px',textured[_0x2827dc(0xf7)][_0x2827dc(0x10c)]=gameWidth*(integerScaling/_0x5a6eff)+'px',textured[_0x2827dc(0xf7)][_0x2827dc(0x144)]=gameHeight*(integerScaling/_0x5a6eff)+'px',imgShader[_0x2827dc(0xf7)][_0x2827dc(0x12c)]=_0x2827dc(0x10b)+integerScaling/_0x5a6eff/upscaleShader+')',settingContainer['forEach'](function(_0x22c3e3){const _0x3c3c7b=_0x2827dc;_0x22c3e3[_0x3c3c7b(0xf7)][_0x3c3c7b(0x10c)]=gameWidth*(integerScaling/_0x5a6eff)+'px',_0x22c3e3[_0x3c3c7b(0xf7)][_0x3c3c7b(0x144)]=gameHeight*(integerScaling/_0x5a6eff)+'px';}),messageContainer[_0x2827dc(0xff)](function(_0x5c2fbe){const _0x136549=_0x2827dc;_0x5c2fbe['style'][_0x136549(0x10c)]=gameWidth+'px',_0x5c2fbe['style'][_0x136549(0x144)]=gameHeight+'px',_0x5c2fbe[_0x136549(0xf7)][_0x136549(0x11e)]=''+integerScaling/_0x5a6eff;}),stateTitle['forEach'](function(_0x543e1d){const _0x19e2a7=_0x2827dc;_0x543e1d[_0x19e2a7(0x101)][_0x19e2a7(0xf2)]('fefs');});else _0x5dce11==='webgl2'&&(bufferCanvas[_0x2827dc(0x10c)]=clientWidth*upscaleFactor,bufferCanvas[_0x2827dc(0x144)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x2827dc(0xf7)]['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x2827dc(0xf7)][_0x2827dc(0xec)]='',canvasContainer['style'][_0x2827dc(0x10c)]=clientWidth+'px',canvasContainer[_0x2827dc(0xf7)][_0x2827dc(0x144)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x2827dc(0xf7)][_0x2827dc(0x10c)]=clientWidth+'px',textured[_0x2827dc(0xf7)][_0x2827dc(0x144)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x2827dc(0xf7)][_0x2827dc(0x12c)]=_0x2827dc(0x10b)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x2827dc(0xff)](function(_0x13d3a8){const _0x230d68=_0x2827dc;_0x13d3a8[_0x230d68(0xf7)]['width']=clientWidth+'px',_0x13d3a8[_0x230d68(0xf7)]['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x2827dc(0xff)](function(_0xd01fbc){const _0x4f9722=_0x2827dc;_0xd01fbc[_0x4f9722(0xf7)][_0x4f9722(0x10c)]=gameWidth+'px',_0xd01fbc[_0x4f9722(0xf7)][_0x4f9722(0x144)]=gameHeight+'px',_0xd01fbc[_0x4f9722(0xf7)][_0x4f9722(0x11e)]=''+clientWidth/gameWidth;}),stateTitle[_0x2827dc(0xff)](function(_0x153437){const _0x3c7b29=_0x2827dc;_0x153437[_0x3c7b29(0x101)]['add'](_0x3c7b29(0x12b));}));imgShader[_0x2827dc(0xf7)]['width']=gameWidth*upscaleShader+'px',imgShader[_0x2827dc(0xf7)][_0x2827dc(0x144)]=gameHeight*upscaleShader+'px',imgShader[_0x2827dc(0xf7)][_0x2827dc(0x138)]=_0x2827dc(0x136),imgShader[_0x2827dc(0xf7)]['setProperty'](_0x2827dc(0xed),upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x374edc=a0_0x57dea3;gl=bufferCanvas[_0x374edc(0x107)](_0x374edc(0xf3));if(!gl)return console['error'](_0x374edc(0x11b)),null;gl[_0x374edc(0xfb)](0x0,0x0,bufferCanvas[_0x374edc(0x10c)],bufferCanvas[_0x374edc(0x144)]);}function createShader(_0x2d1f6,_0x304bbc){const _0x17955a=a0_0x57dea3,_0x5729ae=gl[_0x17955a(0xf0)](_0x2d1f6);gl[_0x17955a(0x145)](_0x5729ae,_0x304bbc),gl[_0x17955a(0x127)](_0x5729ae);if(!gl[_0x17955a(0x103)](_0x5729ae,gl[_0x17955a(0xf1)]))return console[_0x17955a(0x104)](gl[_0x17955a(0x119)](_0x5729ae)),gl[_0x17955a(0x112)](_0x5729ae),null;return _0x5729ae;}async function setupShaders(){const _0x42ac5a=a0_0x57dea3,_0x2e29b4=await loadShaderSource(_0x42ac5a(0x108)),_0x380232=await loadShaderSource(_0x42ac5a(0x12f)),_0x967ec4=createShader(gl[_0x42ac5a(0x148)],_0x2e29b4),_0x408f87=createShader(gl[_0x42ac5a(0x124)],_0x380232);return program=gl[_0x42ac5a(0x132)](),gl[_0x42ac5a(0x14a)](program,_0x967ec4),gl[_0x42ac5a(0x14a)](program,_0x408f87),gl['linkProgram'](program),gl[_0x42ac5a(0x140)](program),program;}function setupTexture(){const _0x26ab12=a0_0x57dea3;texture=gl[_0x26ab12(0xfc)](),gl[_0x26ab12(0x14d)](gl['TEXTURE_2D'],texture),gl[_0x26ab12(0x10e)](gl[_0x26ab12(0x12e)],gl['TEXTURE_MIN_FILTER'],gl[_0x26ab12(0x114)]),gl[_0x26ab12(0x10e)](gl[_0x26ab12(0x12e)],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl[_0x26ab12(0x10e)](gl[_0x26ab12(0x12e)],gl['TEXTURE_WRAP_S'],gl[_0x26ab12(0x118)]),gl['texParameteri'](gl[_0x26ab12(0x12e)],gl[_0x26ab12(0x130)],gl['CLAMP_TO_EDGE']),gl[_0x26ab12(0x14b)](gl[_0x26ab12(0xf9)](program,'game_size'),gameWidth,gameHeight),gl[_0x26ab12(0x14b)](gl[_0x26ab12(0xf9)](program,_0x26ab12(0x142)),gl[_0x26ab12(0x139)][_0x26ab12(0x10c)],gl[_0x26ab12(0x139)][_0x26ab12(0x144)]),gl[_0x26ab12(0x102)](gl['getUniformLocation'](program,_0x26ab12(0x122)),gameWidth/gl[_0x26ab12(0x139)][_0x26ab12(0x10c)]),gl[_0x26ab12(0x102)](gl[_0x26ab12(0xf9)](program,_0x26ab12(0xef)),gameHeight/gl[_0x26ab12(0x139)][_0x26ab12(0x144)]);}function setupBuffers(){const _0x5c712f=a0_0x57dea3,_0x2c657f=gl['createBuffer']();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x2c657f),gl[_0x5c712f(0x126)](gl[_0x5c712f(0x133)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x5ba091=gl[_0x5c712f(0x134)](program,_0x5c712f(0xf5));gl[_0x5c712f(0x10d)](_0x5ba091),gl[_0x5c712f(0xf4)](_0x5ba091,0x2,gl[_0x5c712f(0x109)],![],0x0,0x0);const _0x180a1e=gl[_0x5c712f(0x100)]();gl[_0x5c712f(0x13a)](gl['ARRAY_BUFFER'],_0x180a1e),gl[_0x5c712f(0x126)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']);const _0x5e4be2=gl['getAttribLocation'](program,_0x5c712f(0x121));gl[_0x5c712f(0x10d)](_0x5e4be2),gl['vertexAttribPointer'](_0x5e4be2,0x2,gl[_0x5c712f(0x109)],![],0x0,0x0);}async function renderPixel(_0x43b365){const _0x5efba6=a0_0x57dea3,_0x176a95=a0_0xe16f8b[_0x5efba6(0x13c)]();if(!_0x176a95)return;await loadLUT64();const _0x44b898=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0xf59d2e=0x0;_0xf59d2e<gameHeight;_0xf59d2e++){for(let _0x4c1180=0x0;_0x4c1180<gameWidth;_0x4c1180++){const _0x56d314=_0xf59d2e*gameStride+_0x4c1180,_0x1e1125=(_0xf59d2e*gameWidth+_0x4c1180)*0x4,_0x38b6da=_0x176a95[_0x56d314],_0x20a8fe=(_0x38b6da&0xff)>>0x2,_0x218908=(_0x38b6da>>0x8&0xff)>>0x2,_0x2e05c1=(_0x38b6da>>0x10&0xff)>>0x2,_0xdef53e=(_0x20a8fe*0x40*0x40+_0x218908*0x40+_0x2e05c1)*0x3;_0x44b898[_0x1e1125]=lut64[_0xdef53e],_0x44b898[_0x1e1125+0x1]=lut64[_0xdef53e+0x1],_0x44b898[_0x1e1125+0x2]=lut64[_0xdef53e+0x2],_0x44b898[_0x1e1125+0x3]=0xff;}}if(_0x43b365===_0x5efba6(0xf3))gl['bindTexture'](gl[_0x5efba6(0x12e)],texture),gl[_0x5efba6(0x123)](gl['TEXTURE_2D'],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x5efba6(0x13f)],gl['UNSIGNED_BYTE'],_0x44b898),gl['clear'](gl[_0x5efba6(0x120)]),gl[_0x5efba6(0x143)](gl[_0x5efba6(0x13b)],0x0,0x4);else{if(_0x43b365==='2d'){ctx2d=bufferCanvas[_0x5efba6(0x107)]('2d'),ctx2d[_0x5efba6(0x111)]=![];const _0x425403=new ImageData(_0x44b898,gameWidth,gameHeight);createImageBitmap(_0x425403)[_0x5efba6(0x11a)](_0x8a2bc0=>{const _0x1b24a6=_0x5efba6;ctx2d[_0x1b24a6(0x129)](0x0,0x0,bufferCanvas[_0x1b24a6(0x10c)],bufferCanvas[_0x1b24a6(0x144)]),ctx2d[_0x1b24a6(0x13d)](_0x8a2bc0,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x43b365));}export async function switchRenderMode(_0x5163c7){const _0x42c5c1=a0_0x57dea3;systemType=gameName['slice'](-0x3);if(_0x5163c7==='2d')setupStyle('2d'),renderPixel('2d');else _0x5163c7==='webgl2'&&(setupStyle(_0x42c5c1(0xf3)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document['addEventListener'](a0_0x57dea3(0xee),function(){});