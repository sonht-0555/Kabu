(function(_0x142b43,_0x110f36){const _0x1196e4=a0_0x5ed3,_0x95dbfb=_0x142b43();while(!![]){try{const _0x3c171f=-parseInt(_0x1196e4(0x155))/0x1+parseInt(_0x1196e4(0x166))/0x2*(-parseInt(_0x1196e4(0x14e))/0x3)+parseInt(_0x1196e4(0x13d))/0x4+parseInt(_0x1196e4(0x13c))/0x5*(parseInt(_0x1196e4(0x13e))/0x6)+parseInt(_0x1196e4(0x157))/0x7+parseInt(_0x1196e4(0x163))/0x8+-parseInt(_0x1196e4(0x139))/0x9;if(_0x3c171f===_0x110f36)break;else _0x95dbfb['push'](_0x95dbfb['shift']());}catch(_0x3e2db9){_0x95dbfb['push'](_0x95dbfb['shift']());}}}(a0_0x5b74,0x6a596));import*as a0_0xfbd102 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x5b74(){const _0x28f4ff=['3Ztsiol','TEXTURE_WRAP_T','uniform1f','uniform2f','getUniformLocation','COLOR_BUFFER_BIT','height','701406lsOLPD','render_size','6016640lkYOiC','createProgram','shaderSource','none','bindTexture','_4.0.bin','ARRAY_BUFFER','low-power','FRAGMENT_SHADER','texParameteri','RGBA','set','3881896jYFjjT','texImage2D','clear','425714ereZEu','TEXTURE_MAG_FILTER','TRIANGLE_STRIP','webgl_full','enableVertexAttribArray','createBuffer','bindBuffer','imageSmoothingEnabled','data','smooth_height','compileShader','webgl','game_size','getAttribLocation','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','FLOAT','useProgram','STATIC_DRAW','NEAREST','VERTEX_SHADER','14284431ZcRuee','texcoord','vertexAttribPointer','1990385eUWJmG','3184468CJpCum','12mIaXfN','TEXTURE_WRAP_S','bufferData','getItem','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','TEXTURE_2D','position','getContext','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','clearRect','TEXTURE_MIN_FILTER','CLAMP_TO_EDGE','attachShader','slice','width','_temperature'];a0_0x5b74=function(){return _0x28f4ff;};return a0_0x5b74();}function a0_0x5ed3(_0x239b77,_0x304438){const _0x5b74d1=a0_0x5b74();return a0_0x5ed3=function(_0x5ed3dd,_0xd4cc1f){_0x5ed3dd=_0x5ed3dd-0x12c;let _0x2d413d=_0x5b74d1[_0x5ed3dd];return _0x2d413d;},a0_0x5ed3(_0x239b77,_0x304438);}async function loadLUT64(){const _0x379e5a=a0_0x5ed3;systemType=gameName[_0x379e5a(0x14b)](-0x3);const _0x13f6e5=(localStorage[_0x379e5a(0x141)](gameName+_0x379e5a(0x14d))||'none')['toLowerCase']();if(!lut64||lut64Profile!==_0x13f6e5){const _0x18683a='./src/lut/lut64_'+_0x13f6e5+_0x379e5a(0x15c);console['log'](_0x18683a);const _0x19b8da=await fetch(_0x18683a),_0x4efedf=await _0x19b8da['arrayBuffer']();lut64=new Uint8Array(_0x4efedf),lut64Profile=_0x13f6e5;}}function setupWebGL_Shader(_0x22ffe9){const _0x258447=a0_0x5ed3;gl=bufferCanvas[_0x258447(0x145)](_0x258447(0x130),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x258447(0x15e)}),gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']);function _0x2eed31(_0x16dd8b,_0x4d58ed){const _0x40469f=_0x258447,_0x266cf6=gl['createShader'](_0x16dd8b);return gl[_0x40469f(0x159)](_0x266cf6,_0x4d58ed),gl[_0x40469f(0x12f)](_0x266cf6),_0x266cf6;}vs=_0x258447(0x146);if(_0x22ffe9==='webgl')fs=_0x258447(0x133);else _0x22ffe9===_0x258447(0x169)&&(fs=_0x258447(0x142));const _0x59baa6=_0x2eed31(gl[_0x258447(0x138)],vs),_0x4f8ec4=_0x2eed31(gl[_0x258447(0x15f)],fs);return program=gl[_0x258447(0x158)](),gl[_0x258447(0x14a)](program,_0x59baa6),gl[_0x258447(0x14a)](program,_0x4f8ec4),gl['linkProgram'](program),gl[_0x258447(0x135)](program),program;}function setupTexture_Buffer(_0x1e040a){const _0x53f40e=a0_0x5ed3;texture=gl['createTexture'](),gl[_0x53f40e(0x15b)](gl[_0x53f40e(0x143)],texture),gl[_0x53f40e(0x160)](gl[_0x53f40e(0x143)],gl[_0x53f40e(0x148)],gl[_0x53f40e(0x137)]),gl['texParameteri'](gl[_0x53f40e(0x143)],gl[_0x53f40e(0x167)],gl[_0x53f40e(0x137)]),gl[_0x53f40e(0x160)](gl[_0x53f40e(0x143)],gl[_0x53f40e(0x13f)],gl[_0x53f40e(0x149)]),gl[_0x53f40e(0x160)](gl['TEXTURE_2D'],gl[_0x53f40e(0x14f)],gl[_0x53f40e(0x149)]);_0x1e040a==='webgl_full'&&(gl[_0x53f40e(0x151)](gl['getUniformLocation'](program,_0x53f40e(0x131)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x53f40e(0x152)](program,_0x53f40e(0x156)),gl['canvas'][_0x53f40e(0x14c)],gl['canvas'][_0x53f40e(0x154)]),gl[_0x53f40e(0x150)](gl[_0x53f40e(0x152)](program,'smooth_width'),gameWidth/gl['canvas']['width']),gl['uniform1f'](gl[_0x53f40e(0x152)](program,_0x53f40e(0x12e)),gameHeight/gl['canvas'][_0x53f40e(0x154)]));const _0x476d91=gl['createBuffer']();gl[_0x53f40e(0x16c)](gl['ARRAY_BUFFER'],_0x476d91),gl[_0x53f40e(0x140)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl['vertexAttribPointer'](gl[_0x53f40e(0x132)](program,_0x53f40e(0x144)),0x2,gl[_0x53f40e(0x134)],![],0x0,0x0),gl[_0x53f40e(0x16a)](gl[_0x53f40e(0x132)](program,'position'));const _0x1f496f=gl[_0x53f40e(0x16b)]();gl[_0x53f40e(0x16c)](gl[_0x53f40e(0x15d)],_0x1f496f),gl[_0x53f40e(0x140)](gl[_0x53f40e(0x15d)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x53f40e(0x136)]),gl[_0x53f40e(0x13b)](gl[_0x53f40e(0x132)](program,_0x53f40e(0x13a)),0x2,gl[_0x53f40e(0x134)],![],0x0,0x0),gl[_0x53f40e(0x16a)](gl[_0x53f40e(0x132)](program,_0x53f40e(0x13a)));}function setup2DContext(){const _0x28f73f=a0_0x5ed3;ctx2d=bufferCanvas[_0x28f73f(0x145)]('2d'),ctx2d[_0x28f73f(0x12c)]=![];}async function renderPixel(_0x14d8a1){const _0x19c5f0=a0_0x5ed3,_0xdab580=a0_0xfbd102['getPixelData']();if(!_0xdab580)return;await loadLUT64();const _0x5e06e7=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1e8981=0x0;_0x1e8981<gameHeight;_0x1e8981++){for(let _0xf9d656=0x0;_0xf9d656<gameWidth;_0xf9d656++){const _0x197047=_0x1e8981*gameStride+_0xf9d656,_0x47628a=(_0x1e8981*gameWidth+_0xf9d656)*0x4,_0x3353d2=_0xdab580[_0x197047];if(lut64Profile===_0x19c5f0(0x15a))_0x5e06e7[_0x47628a]=_0x3353d2&0xff,_0x5e06e7[_0x47628a+0x1]=_0x3353d2>>0x8&0xff,_0x5e06e7[_0x47628a+0x2]=_0x3353d2>>0x10&0xff,_0x5e06e7[_0x47628a+0x3]=0xff;else{const _0x291206=(_0x3353d2&0xff)>>0x2,_0xc8fa9b=(_0x3353d2>>0x8&0xff)>>0x2,_0x582c6f=(_0x3353d2>>0x10&0xff)>>0x2,_0x22f89f=(_0x291206*0x40*0x40+_0xc8fa9b*0x40+_0x582c6f)*0x3;_0x5e06e7[_0x47628a]=lut64[_0x22f89f],_0x5e06e7[_0x47628a+0x1]=lut64[_0x22f89f+0x1],_0x5e06e7[_0x47628a+0x2]=lut64[_0x22f89f+0x2],_0x5e06e7[_0x47628a+0x3]=0xff;}}}if(_0x14d8a1===_0x19c5f0(0x130))gl[_0x19c5f0(0x164)](gl[_0x19c5f0(0x143)],0x0,gl[_0x19c5f0(0x161)],gameWidth,gameHeight,0x0,gl[_0x19c5f0(0x161)],gl['UNSIGNED_BYTE'],_0x5e06e7),gl[_0x19c5f0(0x165)](gl[_0x19c5f0(0x153)]),gl['drawArrays'](gl[_0x19c5f0(0x168)],0x0,0x4);else _0x14d8a1==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x5e06e7,gameWidth,gameHeight):imageDataObj[_0x19c5f0(0x12d)][_0x19c5f0(0x162)](_0x5e06e7),ctx2d[_0x19c5f0(0x147)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x19c5f0(0x154)]),ctx2d['putImageData'](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x14d8a1));}export async function switchRenderMode(_0x430522){const _0x3c4078=a0_0x5ed3;systemType=gameName[_0x3c4078(0x14b)](-0x3);if(_0x430522==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x430522===_0x3c4078(0x130))setupStyle('2d'),setupWebGL_Shader(_0x3c4078(0x130)),setupTexture_Buffer(_0x3c4078(0x130)),renderPixel(_0x3c4078(0x130));else _0x430522===_0x3c4078(0x169)&&(setupStyle(_0x3c4078(0x169)),setupWebGL_Shader(_0x3c4078(0x169)),setupTexture_Buffer('webgl_full'),renderPixel(_0x3c4078(0x130)));}}