(function(_0x38a720,_0x297fa9){const _0x209872=a0_0x8008,_0x1db7df=_0x38a720();while(!![]){try{const _0x150c1d=parseInt(_0x209872(0x118))/0x1*(-parseInt(_0x209872(0x11c))/0x2)+-parseInt(_0x209872(0x146))/0x3+parseInt(_0x209872(0x132))/0x4+-parseInt(_0x209872(0x131))/0x5*(-parseInt(_0x209872(0x14d))/0x6)+-parseInt(_0x209872(0x125))/0x7+parseInt(_0x209872(0x11a))/0x8*(-parseInt(_0x209872(0x13d))/0x9)+parseInt(_0x209872(0x111))/0xa;if(_0x150c1d===_0x297fa9)break;else _0x1db7df['push'](_0x1db7df['shift']());}catch(_0x3b674a){_0x1db7df['push'](_0x1db7df['shift']());}}}(a0_0x22f3,0x6abcb));import*as a0_0x2411c9 from'./main.js';function a0_0x22f3(){const _0x5523f0=['attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','compileShader','117DDeGYE','putImageData','game_size','toLowerCase','getPixelData','RGBA','ARRAY_BUFFER','useProgram','bindBuffer','2404899aIECeC','clear','STATIC_DRAW','width','texcoord','FRAGMENT_SHADER','smooth_height','60018vLTyGD','TEXTURE_MIN_FILTER','UNSIGNED_BYTE','drawArrays','warm','getContext','18438680tAzkNh','VERTEX_SHADER','slice','0.0','texImage2D','uniform1f','position','22uZCsLi','CLAMP_TO_EDGE','403336QHjPFp','createProgram','47844ogjaYy','getUniformLocation','smooth_width','set','NEAREST','arrayBuffer','viewport','height','texParameteri','3049627UifPIa','TEXTURE_WRAP_S','linkProgram','data','FLOAT','4.0','getAttribLocation','attachShader','.bin','createTexture','getItem','COLOR_BUFFER_BIT','305vjUJVp','1608572gdABpv','TRIANGLE_STRIP','vertexAttribPointer','enableVertexAttribArray','TEXTURE_2D','webgl','webgl_full','canvas','imageSmoothingEnabled'];a0_0x22f3=function(){return _0x5523f0;};return a0_0x22f3();}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x2a2dfa=a0_0x8008;systemType=gameName[_0x2a2dfa(0x113)](-0x3);const _0x5c1af1=localStorage[_0x2a2dfa(0x12f)](gameName+'_streng')||_0x2a2dfa(0x12a),_0x177621=(localStorage[_0x2a2dfa(0x12f)](gameName+'_temperature')||_0x2a2dfa(0x10f))[_0x2a2dfa(0x140)]();if(!lut64||lut64Streng!==_0x5c1af1||lut64Profile!==_0x177621){const _0x39801e='./src/lut/lut64_'+_0x177621+'_'+_0x5c1af1+_0x2a2dfa(0x12d);console['log'](_0x39801e);const _0x3a1239=await fetch(_0x39801e),_0x1c76dc=await _0x3a1239[_0x2a2dfa(0x121)]();lut64=new Uint8Array(_0x1c76dc),lut64Streng=_0x5c1af1,lut64Profile=_0x177621;}}function a0_0x8008(_0x32390e,_0x18ca44){const _0x22f393=a0_0x22f3();return a0_0x8008=function(_0x8008aa,_0x26ce41){_0x8008aa=_0x8008aa-0x10d;let _0x561042=_0x22f393[_0x8008aa];return _0x561042;},a0_0x8008(_0x32390e,_0x18ca44);}function setupWebGL_Shader(_0x3ecc4f){const _0x8af725=a0_0x8008;gl=bufferCanvas[_0x8af725(0x110)](_0x8af725(0x137),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0x8af725(0x122)](0x0,0x0,bufferCanvas[_0x8af725(0x149)],bufferCanvas[_0x8af725(0x123)]);function _0x1bde15(_0x192fa0,_0xa6139){const _0x25ee57=_0x8af725,_0x5823e1=gl['createShader'](_0x192fa0);return gl['shaderSource'](_0x5823e1,_0xa6139),gl[_0x25ee57(0x13c)](_0x5823e1),_0x5823e1;}vs=_0x8af725(0x13b);if(_0x3ecc4f===_0x8af725(0x137))fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x3ecc4f===_0x8af725(0x138)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x447fc6=_0x1bde15(gl[_0x8af725(0x112)],vs),_0x1d3caa=_0x1bde15(gl[_0x8af725(0x14b)],fs);return program=gl[_0x8af725(0x11b)](),gl[_0x8af725(0x12c)](program,_0x447fc6),gl[_0x8af725(0x12c)](program,_0x1d3caa),gl[_0x8af725(0x127)](program),gl[_0x8af725(0x144)](program),program;}function setupTexture_Buffer(_0x13396c){const _0x1bb670=a0_0x8008;texture=gl[_0x1bb670(0x12e)](),gl['bindTexture'](gl[_0x1bb670(0x136)],texture),gl[_0x1bb670(0x124)](gl['TEXTURE_2D'],gl[_0x1bb670(0x14e)],gl[_0x1bb670(0x120)]),gl[_0x1bb670(0x124)](gl['TEXTURE_2D'],gl['TEXTURE_MAG_FILTER'],gl[_0x1bb670(0x120)]),gl[_0x1bb670(0x124)](gl[_0x1bb670(0x136)],gl[_0x1bb670(0x126)],gl[_0x1bb670(0x119)]),gl[_0x1bb670(0x124)](gl[_0x1bb670(0x136)],gl['TEXTURE_WRAP_T'],gl[_0x1bb670(0x119)]);_0x13396c===_0x1bb670(0x138)&&(gl['uniform2f'](gl[_0x1bb670(0x11d)](program,_0x1bb670(0x13f)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x1bb670(0x11d)](program,'render_size'),gl['canvas'][_0x1bb670(0x149)],gl[_0x1bb670(0x139)][_0x1bb670(0x123)]),gl[_0x1bb670(0x116)](gl[_0x1bb670(0x11d)](program,_0x1bb670(0x11e)),gameWidth/gl[_0x1bb670(0x139)][_0x1bb670(0x149)]),gl[_0x1bb670(0x116)](gl[_0x1bb670(0x11d)](program,_0x1bb670(0x14c)),gameHeight/gl[_0x1bb670(0x139)][_0x1bb670(0x123)]));const _0x32222c=gl['createBuffer']();gl['bindBuffer'](gl[_0x1bb670(0x143)],_0x32222c),gl['bufferData'](gl[_0x1bb670(0x143)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x1bb670(0x148)]),gl[_0x1bb670(0x134)](gl[_0x1bb670(0x12b)](program,'position'),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x1bb670(0x135)](gl[_0x1bb670(0x12b)](program,_0x1bb670(0x117)));const _0x52fc39=gl['createBuffer']();gl[_0x1bb670(0x145)](gl['ARRAY_BUFFER'],_0x52fc39),gl['bufferData'](gl[_0x1bb670(0x143)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x1bb670(0x148)]),gl['vertexAttribPointer'](gl[_0x1bb670(0x12b)](program,_0x1bb670(0x14a)),0x2,gl[_0x1bb670(0x129)],![],0x0,0x0),gl[_0x1bb670(0x135)](gl['getAttribLocation'](program,_0x1bb670(0x14a)));}function setup2DContext(){const _0x1c2f8a=a0_0x8008;ctx2d=bufferCanvas[_0x1c2f8a(0x110)]('2d'),ctx2d[_0x1c2f8a(0x13a)]=![];}async function renderPixel(_0x2ff281){const _0x5dd334=a0_0x8008,_0x235dc5=a0_0x2411c9[_0x5dd334(0x141)]();if(!_0x235dc5)return;await loadLUT64();const _0x22747e=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x572a14=0x0;_0x572a14<gameHeight;_0x572a14++){for(let _0x4afdde=0x0;_0x4afdde<gameWidth;_0x4afdde++){const _0x503ec6=_0x572a14*gameStride+_0x4afdde,_0x2875c1=(_0x572a14*gameWidth+_0x4afdde)*0x4,_0x3e6694=_0x235dc5[_0x503ec6];if(lut64Streng===_0x5dd334(0x114))_0x22747e[_0x2875c1]=_0x3e6694&0xff,_0x22747e[_0x2875c1+0x1]=_0x3e6694>>0x8&0xff,_0x22747e[_0x2875c1+0x2]=_0x3e6694>>0x10&0xff,_0x22747e[_0x2875c1+0x3]=0xff;else{const _0x1d12e4=(_0x3e6694&0xff)>>0x2,_0x48eb96=(_0x3e6694>>0x8&0xff)>>0x2,_0x1d5b4b=(_0x3e6694>>0x10&0xff)>>0x2,_0x32eb97=(_0x1d12e4*0x40*0x40+_0x48eb96*0x40+_0x1d5b4b)*0x3;_0x22747e[_0x2875c1]=lut64[_0x32eb97],_0x22747e[_0x2875c1+0x1]=lut64[_0x32eb97+0x1],_0x22747e[_0x2875c1+0x2]=lut64[_0x32eb97+0x2],_0x22747e[_0x2875c1+0x3]=0xff;}}}if(_0x2ff281==='webgl')gl[_0x5dd334(0x115)](gl['TEXTURE_2D'],0x0,gl[_0x5dd334(0x142)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x5dd334(0x10d)],_0x22747e),gl[_0x5dd334(0x147)](gl[_0x5dd334(0x130)]),gl[_0x5dd334(0x10e)](gl[_0x5dd334(0x133)],0x0,0x4);else _0x2ff281==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x22747e,gameWidth,gameHeight):imageDataObj[_0x5dd334(0x128)][_0x5dd334(0x11f)](_0x22747e),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x5dd334(0x149)],bufferCanvas['height']),ctx2d[_0x5dd334(0x13e)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x2ff281));}export async function switchRenderMode(_0x382bbc){const _0x8e396a=a0_0x8008;systemType=gameName[_0x8e396a(0x113)](-0x3);if(_0x382bbc==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x382bbc===_0x8e396a(0x137))setupStyle('2d'),setupWebGL_Shader(_0x8e396a(0x137)),setupTexture_Buffer(_0x8e396a(0x137)),renderPixel(_0x8e396a(0x137));else _0x382bbc===_0x8e396a(0x138)&&(setupStyle(_0x8e396a(0x138)),setupWebGL_Shader(_0x8e396a(0x138)),setupTexture_Buffer('webgl_full'),renderPixel(_0x8e396a(0x137)));}}