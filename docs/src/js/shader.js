const a0_0x4ab7d8=a0_0x3387;(function(_0x256ac6,_0x5039f0){const _0x817849=a0_0x3387,_0x4c1d54=_0x256ac6();while(!![]){try{const _0x4dbe19=-parseInt(_0x817849(0x232))/0x1*(parseInt(_0x817849(0x236))/0x2)+parseInt(_0x817849(0x21d))/0x3*(parseInt(_0x817849(0x1dc))/0x4)+parseInt(_0x817849(0x231))/0x5*(parseInt(_0x817849(0x206))/0x6)+parseInt(_0x817849(0x1d7))/0x7*(parseInt(_0x817849(0x1f4))/0x8)+parseInt(_0x817849(0x1f8))/0x9*(parseInt(_0x817849(0x222))/0xa)+parseInt(_0x817849(0x208))/0xb*(-parseInt(_0x817849(0x233))/0xc)+-parseInt(_0x817849(0x1f1))/0xd*(parseInt(_0x817849(0x1db))/0xe);if(_0x4dbe19===_0x5039f0)break;else _0x4c1d54['push'](_0x4c1d54['shift']());}catch(_0x5c667a){_0x4c1d54['push'](_0x4c1d54['shift']());}}}(a0_0x471c,0xdfdc5));import*as a0_0xc54855 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x4ab7d8(0x207)](a0_0x4ab7d8(0x1d4)),bufferCanvas=document[a0_0x4ab7d8(0x207)](a0_0x4ab7d8(0x22b)),canvasContainer=document[a0_0x4ab7d8(0x207)](a0_0x4ab7d8(0x230)),imgShader=document[a0_0x4ab7d8(0x207)](a0_0x4ab7d8(0x202)),settingContainer=document[a0_0x4ab7d8(0x211)](a0_0x4ab7d8(0x23f)),messageContainer=document['querySelectorAll'](a0_0x4ab7d8(0x20e)),stateTitle=document[a0_0x4ab7d8(0x211)]('.stateTitle,\x20.stateDate');async function loadLUT64(){const _0x27bf82=a0_0x4ab7d8;systemType=gameName[_0x27bf82(0x1da)](-0x3);const _0x4200e6=localStorage[_0x27bf82(0x1ed)](gameName+_0x27bf82(0x1f7))||_0x27bf82(0x223),_0x3caa3a=(localStorage[_0x27bf82(0x1ed)](gameName+_0x27bf82(0x1f5))||'warm')[_0x27bf82(0x1d5)]();if(!lut64||lut64Streng!==_0x4200e6||lut64Profile!==_0x3caa3a){const _0x2e62f2=_0x27bf82(0x1e8)+_0x3caa3a+'_'+_0x4200e6+_0x27bf82(0x229);console[_0x27bf82(0x1fe)](_0x2e62f2);const _0x2b9fdb=await fetch(_0x2e62f2),_0x177340=await _0x2b9fdb[_0x27bf82(0x21a)]();lut64=new Uint8Array(_0x177340),lut64Streng=_0x4200e6,lut64Profile=_0x3caa3a;}}function a0_0x471c(){const _0x43c5b2=['addEventListener','createShader','483EQzbyL','error','createTexture','style','getPixelData','50yvSjYp','4.0','texParameteri','smooth_height','STATIC_DRAW','imageSmoothingEnabled','FRAGMENT_SHADER','.bin','classList','canvas','viewport','clientWidth','then','TEXTURE_WRAP_T','canvas-container','40jpXEAy','21971aNfQAP','80412EYKlaC','TEXTURE_MAG_FILTER','getShaderParameter','154yAYtOi','getContext','clearRect','clear','width','floor','bufferData','--bg-size','deleteShader','.setting-container','CLAMP_TO_EDGE','textured','toLowerCase','top\x20center','5066782XygeKo','crisp-edges','RGBA','slice','1974mqeSHy','27004xupRlO','render_size','devicePixelRatio','compileShader','FLOAT','forEach','drawArrays','WebGL2\x20not\x20supported','screenSize','setItem','bindTexture','createProgram','./src/lut/lut64_','TEXTURE_2D','ARRAY_BUFFER','vertexAttribPointer','transformOrigin','getItem','NEAREST','uniform1f','TEXTURE_MIN_FILTER','74113ouzoCW','texImage2D','drawImage','16TZbJOi','_temperature','position','_streng','343557EkluTZ','zoom','webgl2','attachShader','gbc','setProperty','log','transform','texcoord','uniform2f','img-shader','enableVertexAttribArray','getAttribLocation','scale(','1053090yyvQBW','getElementById','1177lxnYfD','linkProgram','TEXTURE_WRAP_S','bindBuffer','VERTEX_SHADER','createBuffer','.message-container','height','getUniformLocation','querySelectorAll','add','smooth_width','fefs','COMPILE_STATUS','0,0,','text','TRIANGLE_STRIP','UNSIGNED_BYTE','arrayBuffer'];a0_0x471c=function(){return _0x43c5b2;};return a0_0x471c();}async function loadShaderSource(_0x333aa6){const _0x875156=a0_0x4ab7d8,_0x57228e=await fetch(_0x333aa6);return await _0x57228e[_0x875156(0x217)]();}function setupStyle(_0x45ca78){const _0x6134=a0_0x4ab7d8;clientWidth=document['documentElement'][_0x6134(0x22d)];const _0x4d3ed0=window[_0x6134(0x1de)];systemType===_0x6134(0x1fc)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x4d3ed0/gameWidth),localStorage[_0x6134(0x1e5)](_0x6134(0x1e4),_0x6134(0x216)+gameWidth*(integerScaling/_0x4d3ed0)+','+gameHeight*(integerScaling/_0x4d3ed0))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x6134(0x23b)](clientWidth*_0x4d3ed0/gameWidth),localStorage[_0x6134(0x1e5)](_0x6134(0x1e4),'0,0,'+gameWidth*(integerScaling/_0x4d3ed0)+','+gameHeight*(integerScaling/_0x4d3ed0)));if(_0x45ca78==='2d')bufferCanvas[_0x6134(0x23a)]=gameWidth,bufferCanvas[_0x6134(0x20f)]=gameHeight,bufferCanvas[_0x6134(0x220)][_0x6134(0x1f9)]=''+integerScaling/_0x4d3ed0,bufferCanvas[_0x6134(0x220)]['imageRendering']=_0x6134(0x1d8),canvasContainer['style']['width']=gameWidth*(integerScaling/_0x4d3ed0)+'px',canvasContainer[_0x6134(0x220)][_0x6134(0x20f)]=gameHeight*(integerScaling/_0x4d3ed0)+'px',textured[_0x6134(0x220)][_0x6134(0x23a)]=gameWidth*(integerScaling/_0x4d3ed0)+'px',textured[_0x6134(0x220)]['height']=gameHeight*(integerScaling/_0x4d3ed0)+'px',imgShader[_0x6134(0x220)]['transform']='scale('+integerScaling/_0x4d3ed0/upscaleShader+')',settingContainer['forEach'](function(_0x384d42){const _0x4d06bb=_0x6134;_0x384d42[_0x4d06bb(0x220)][_0x4d06bb(0x23a)]=gameWidth*(integerScaling/_0x4d3ed0)+'px',_0x384d42[_0x4d06bb(0x220)]['height']=gameHeight*(integerScaling/_0x4d3ed0)+'px';}),messageContainer[_0x6134(0x1e1)](function(_0x3881fc){const _0x4d4a21=_0x6134;_0x3881fc[_0x4d4a21(0x220)][_0x4d4a21(0x23a)]=gameWidth+'px',_0x3881fc[_0x4d4a21(0x220)][_0x4d4a21(0x20f)]=gameHeight+'px',_0x3881fc[_0x4d4a21(0x220)][_0x4d4a21(0x1f9)]=''+integerScaling/_0x4d3ed0;}),stateTitle[_0x6134(0x1e1)](function(_0x586f1d){const _0x1525be=_0x6134;_0x586f1d[_0x1525be(0x22a)]['remove'](_0x1525be(0x214));});else _0x45ca78===_0x6134(0x1fa)&&(bufferCanvas[_0x6134(0x23a)]=clientWidth*upscaleFactor,bufferCanvas[_0x6134(0x20f)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x6134(0x220)][_0x6134(0x1f9)]=''+0x1/upscaleFactor,bufferCanvas['style']['imageRendering']='',canvasContainer[_0x6134(0x220)][_0x6134(0x23a)]=clientWidth+'px',canvasContainer['style']['height']=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x6134(0x220)][_0x6134(0x23a)]=clientWidth+'px',textured[_0x6134(0x220)]['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x6134(0x220)][_0x6134(0x1ff)]=_0x6134(0x205)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x6134(0x1e1)](function(_0x31af21){const _0x38b825=_0x6134;_0x31af21[_0x38b825(0x220)][_0x38b825(0x23a)]=clientWidth+'px',_0x31af21[_0x38b825(0x220)][_0x38b825(0x20f)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x6134(0x1e1)](function(_0x2c6df7){const _0x1ace38=_0x6134;_0x2c6df7[_0x1ace38(0x220)][_0x1ace38(0x23a)]=gameWidth+'px',_0x2c6df7[_0x1ace38(0x220)][_0x1ace38(0x20f)]=gameHeight+'px',_0x2c6df7[_0x1ace38(0x220)][_0x1ace38(0x1f9)]=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x4d3a12){const _0x18c183=_0x6134;_0x4d3a12[_0x18c183(0x22a)][_0x18c183(0x212)](_0x18c183(0x214));}));imgShader['style']['width']=gameWidth*upscaleShader+'px',imgShader['style'][_0x6134(0x20f)]=gameHeight*upscaleShader+'px',imgShader[_0x6134(0x220)][_0x6134(0x1ec)]=_0x6134(0x1d6),imgShader[_0x6134(0x220)][_0x6134(0x1fd)](_0x6134(0x23d),upscaleShader+'px\x20'+upscaleShader+'px');}function a0_0x3387(_0x36a457,_0x46f636){const _0x471cc3=a0_0x471c();return a0_0x3387=function(_0x33879c,_0x8341d0){_0x33879c=_0x33879c-0x1d4;let _0x5d31c8=_0x471cc3[_0x33879c];return _0x5d31c8;},a0_0x3387(_0x36a457,_0x46f636);}function setupWebGL(){const _0x1b19ee=a0_0x4ab7d8;gl=bufferCanvas[_0x1b19ee(0x237)]('webgl2');if(!gl)return console[_0x1b19ee(0x21e)](_0x1b19ee(0x1e3)),null;gl[_0x1b19ee(0x22c)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x1b19ee(0x20f)]);}function createShader(_0x53399d,_0x19acc6){const _0x1ac86d=a0_0x4ab7d8,_0x471da6=gl[_0x1ac86d(0x21c)](_0x53399d);gl['shaderSource'](_0x471da6,_0x19acc6),gl[_0x1ac86d(0x1df)](_0x471da6);if(!gl[_0x1ac86d(0x235)](_0x471da6,gl[_0x1ac86d(0x215)]))return console[_0x1ac86d(0x21e)](gl['getShaderInfoLog'](_0x471da6)),gl[_0x1ac86d(0x23e)](_0x471da6),null;return _0x471da6;}async function setupShaders(){const _0x5d8007=a0_0x4ab7d8,_0xda1c98=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x3427eb=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x804d4d=createShader(gl[_0x5d8007(0x20c)],_0xda1c98),_0x12f869=createShader(gl[_0x5d8007(0x228)],_0x3427eb);return program=gl[_0x5d8007(0x1e7)](),gl[_0x5d8007(0x1fb)](program,_0x804d4d),gl['attachShader'](program,_0x12f869),gl[_0x5d8007(0x209)](program),gl['useProgram'](program),program;}function setupTexture(){const _0x4ceb7f=a0_0x4ab7d8;texture=gl[_0x4ceb7f(0x21f)](),gl['bindTexture'](gl[_0x4ceb7f(0x1e9)],texture),gl[_0x4ceb7f(0x224)](gl['TEXTURE_2D'],gl[_0x4ceb7f(0x1f0)],gl[_0x4ceb7f(0x1ee)]),gl[_0x4ceb7f(0x224)](gl[_0x4ceb7f(0x1e9)],gl[_0x4ceb7f(0x234)],gl[_0x4ceb7f(0x1ee)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x4ceb7f(0x20a)],gl['CLAMP_TO_EDGE']),gl[_0x4ceb7f(0x224)](gl[_0x4ceb7f(0x1e9)],gl[_0x4ceb7f(0x22f)],gl[_0x4ceb7f(0x240)]),gl[_0x4ceb7f(0x201)](gl[_0x4ceb7f(0x210)](program,'game_size'),gameWidth,gameHeight),gl[_0x4ceb7f(0x201)](gl[_0x4ceb7f(0x210)](program,_0x4ceb7f(0x1dd)),gl[_0x4ceb7f(0x22b)][_0x4ceb7f(0x23a)],gl[_0x4ceb7f(0x22b)][_0x4ceb7f(0x20f)]),gl['uniform1f'](gl[_0x4ceb7f(0x210)](program,_0x4ceb7f(0x213)),gameWidth/gl['canvas']['width']),gl[_0x4ceb7f(0x1ef)](gl['getUniformLocation'](program,_0x4ceb7f(0x225)),gameHeight/gl['canvas'][_0x4ceb7f(0x20f)]);}function setupBuffers(){const _0x512bf3=a0_0x4ab7d8,_0x2b019e=gl['createBuffer']();gl[_0x512bf3(0x20b)](gl[_0x512bf3(0x1ea)],_0x2b019e),gl[_0x512bf3(0x23c)](gl[_0x512bf3(0x1ea)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x512bf3(0x226)]);const _0x2ad805=gl[_0x512bf3(0x204)](program,_0x512bf3(0x1f6));gl[_0x512bf3(0x203)](_0x2ad805),gl[_0x512bf3(0x1eb)](_0x2ad805,0x2,gl[_0x512bf3(0x1e0)],![],0x0,0x0);const _0x3b006f=gl[_0x512bf3(0x20d)]();gl['bindBuffer'](gl[_0x512bf3(0x1ea)],_0x3b006f),gl[_0x512bf3(0x23c)](gl[_0x512bf3(0x1ea)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x512bf3(0x226)]);const _0x441bdd=gl['getAttribLocation'](program,_0x512bf3(0x200));gl[_0x512bf3(0x203)](_0x441bdd),gl['vertexAttribPointer'](_0x441bdd,0x2,gl[_0x512bf3(0x1e0)],![],0x0,0x0);}async function renderPixel(_0x3de820){const _0x4f2f02=a0_0x4ab7d8,_0x3f45f0=a0_0xc54855[_0x4f2f02(0x221)]();if(!_0x3f45f0)return;await loadLUT64();const _0x167206=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5757fd=0x0;_0x5757fd<gameHeight;_0x5757fd++){for(let _0x46f6e9=0x0;_0x46f6e9<gameWidth;_0x46f6e9++){const _0x5539a0=_0x5757fd*gameStride+_0x46f6e9,_0x526f49=(_0x5757fd*gameWidth+_0x46f6e9)*0x4,_0x3cc3c1=_0x3f45f0[_0x5539a0],_0x273719=(_0x3cc3c1&0xff)>>0x2,_0x7c21aa=(_0x3cc3c1>>0x8&0xff)>>0x2,_0x1ea0bd=(_0x3cc3c1>>0x10&0xff)>>0x2,_0x15f6e6=(_0x273719*0x40*0x40+_0x7c21aa*0x40+_0x1ea0bd)*0x3;_0x167206[_0x526f49]=lut64[_0x15f6e6],_0x167206[_0x526f49+0x1]=lut64[_0x15f6e6+0x1],_0x167206[_0x526f49+0x2]=lut64[_0x15f6e6+0x2],_0x167206[_0x526f49+0x3]=0xff;}}if(_0x3de820==='webgl2')gl[_0x4f2f02(0x1e6)](gl[_0x4f2f02(0x1e9)],texture),gl[_0x4f2f02(0x1f2)](gl[_0x4f2f02(0x1e9)],0x0,gl[_0x4f2f02(0x1d9)],gameWidth,gameHeight,0x0,gl[_0x4f2f02(0x1d9)],gl[_0x4f2f02(0x219)],_0x167206),gl[_0x4f2f02(0x239)](gl['COLOR_BUFFER_BIT']),gl[_0x4f2f02(0x1e2)](gl[_0x4f2f02(0x218)],0x0,0x4);else{if(_0x3de820==='2d'){ctx2d=bufferCanvas[_0x4f2f02(0x237)]('2d'),ctx2d[_0x4f2f02(0x227)]=![];const _0x55ddb2=new ImageData(_0x167206,gameWidth,gameHeight);createImageBitmap(_0x55ddb2)[_0x4f2f02(0x22e)](_0x1aa9b4=>{const _0x1d0fad=_0x4f2f02;ctx2d[_0x1d0fad(0x238)](0x0,0x0,bufferCanvas[_0x1d0fad(0x23a)],bufferCanvas['height']),ctx2d[_0x1d0fad(0x1f3)](_0x1aa9b4,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x3de820));}export async function switchRenderMode(_0x4cb51e){const _0x1e1fbe=a0_0x4ab7d8;systemType=gameName[_0x1e1fbe(0x1da)](-0x3);if(_0x4cb51e==='2d')setupStyle('2d'),renderPixel('2d');else _0x4cb51e==='webgl2'&&(setupStyle(_0x1e1fbe(0x1fa)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x1e1fbe(0x1fa)));}document[a0_0x4ab7d8(0x21b)]('DOMContentLoaded',function(){});