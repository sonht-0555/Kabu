(function(_0x14cb14,_0x5f51fa){const _0x615c3=a0_0x2059,_0x399b8b=_0x14cb14();while(!![]){try{const _0x4d81cc=-parseInt(_0x615c3(0x97))/0x1*(parseInt(_0x615c3(0x82))/0x2)+parseInt(_0x615c3(0x8b))/0x3*(parseInt(_0x615c3(0x7c))/0x4)+parseInt(_0x615c3(0xa3))/0x5+-parseInt(_0x615c3(0x9b))/0x6+-parseInt(_0x615c3(0x7b))/0x7+parseInt(_0x615c3(0x80))/0x8*(-parseInt(_0x615c3(0x87))/0x9)+-parseInt(_0x615c3(0x94))/0xa*(-parseInt(_0x615c3(0xa0))/0xb);if(_0x4d81cc===_0x5f51fa)break;else _0x399b8b['push'](_0x399b8b['shift']());}catch(_0x1b1206){_0x399b8b['push'](_0x399b8b['shift']());}}}(a0_0x1370,0x2cbc9));import*as a0_0x30312f from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x31aae8=a0_0x2059;systemType=gameName[_0x31aae8(0x8d)](-0x3);const _0x532b31=(localStorage[_0x31aae8(0xa4)](gameName+_0x31aae8(0x98))||_0x31aae8(0x84))[_0x31aae8(0xa2)]();if(!lut64||lut64Profile!==_0x532b31){const _0x3f16ba=_0x31aae8(0xab)+_0x532b31+_0x31aae8(0x9a);console[_0x31aae8(0x93)](_0x3f16ba);const _0x206684=await fetch(_0x3f16ba),_0x492ab6=await _0x206684['arrayBuffer']();lut64=new Uint8Array(_0x492ab6),lut64Profile=_0x532b31;}}function setupWebGL_Shader(_0x4938f5){const _0x40cca5=a0_0x2059;gl=bufferCanvas[_0x40cca5(0x86)](_0x40cca5(0x99),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x40cca5(0xae)}),gl[_0x40cca5(0x77)](0x0,0x0,bufferCanvas[_0x40cca5(0x96)],bufferCanvas[_0x40cca5(0xad)]);function _0x30bdb9(_0x27fb2a,_0x30399f){const _0x594ce4=_0x40cca5,_0x57ee95=gl['createShader'](_0x27fb2a);return gl[_0x594ce4(0x92)](_0x57ee95,_0x30399f),gl[_0x594ce4(0xaf)](_0x57ee95),_0x57ee95;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x4938f5===_0x40cca5(0x99))fs=_0x40cca5(0x7a);else _0x4938f5===_0x40cca5(0x76)&&(fs=_0x40cca5(0x9c));const _0x2001b7=_0x30bdb9(gl['VERTEX_SHADER'],vs),_0x1e62a5=_0x30bdb9(gl['FRAGMENT_SHADER'],fs);return program=gl[_0x40cca5(0x74)](),gl[_0x40cca5(0x9d)](program,_0x2001b7),gl['attachShader'](program,_0x1e62a5),gl[_0x40cca5(0x81)](program),gl[_0x40cca5(0x79)](program),program;}function setupTexture_Buffer(_0x3f2824){const _0x3d78ee=a0_0x2059;texture=gl['createTexture'](),gl[_0x3d78ee(0x85)](gl[_0x3d78ee(0x73)],texture),gl['texParameteri'](gl[_0x3d78ee(0x73)],gl[_0x3d78ee(0xb6)],gl[_0x3d78ee(0xa7)]),gl[_0x3d78ee(0xa6)](gl[_0x3d78ee(0x73)],gl[_0x3d78ee(0x7f)],gl[_0x3d78ee(0xa7)]),gl[_0x3d78ee(0xa6)](gl[_0x3d78ee(0x73)],gl['TEXTURE_WRAP_S'],gl[_0x3d78ee(0x78)]),gl[_0x3d78ee(0xa6)](gl['TEXTURE_2D'],gl[_0x3d78ee(0x8f)],gl[_0x3d78ee(0x78)]);_0x3f2824===_0x3d78ee(0x76)&&(gl[_0x3d78ee(0x9e)](gl[_0x3d78ee(0xb2)](program,_0x3d78ee(0xb4)),gameWidth,gameHeight),gl[_0x3d78ee(0x9e)](gl[_0x3d78ee(0xb2)](program,_0x3d78ee(0xb3)),gl[_0x3d78ee(0xa8)][_0x3d78ee(0x96)],gl[_0x3d78ee(0xa8)][_0x3d78ee(0xad)]),gl['uniform1f'](gl[_0x3d78ee(0xb2)](program,_0x3d78ee(0xb0)),gameWidth/gl[_0x3d78ee(0xa8)][_0x3d78ee(0x96)]),gl[_0x3d78ee(0x7e)](gl[_0x3d78ee(0xb2)](program,_0x3d78ee(0x8c)),gameHeight/gl[_0x3d78ee(0xa8)][_0x3d78ee(0xad)]));const _0x18f0a6=gl['createBuffer']();gl[_0x3d78ee(0xac)](gl['ARRAY_BUFFER'],_0x18f0a6),gl['bufferData'](gl[_0x3d78ee(0xb1)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x3d78ee(0x83)]),gl[_0x3d78ee(0x7d)](gl['getAttribLocation'](program,_0x3d78ee(0x8e)),0x2,gl[_0x3d78ee(0xa1)],![],0x0,0x0),gl[_0x3d78ee(0xaa)](gl['getAttribLocation'](program,'position'));const _0x32e1c0=gl['createBuffer']();gl[_0x3d78ee(0xac)](gl[_0x3d78ee(0xb1)],_0x32e1c0),gl['bufferData'](gl[_0x3d78ee(0xb1)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x3d78ee(0x83)]),gl[_0x3d78ee(0x7d)](gl[_0x3d78ee(0x88)](program,_0x3d78ee(0x95)),0x2,gl['FLOAT'],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x3d78ee(0x88)](program,_0x3d78ee(0x95)));}function a0_0x2059(_0x53e60e,_0x8aa6cc){const _0x13709f=a0_0x1370();return a0_0x2059=function(_0x2059c4,_0x580410){_0x2059c4=_0x2059c4-0x73;let _0x3a724c=_0x13709f[_0x2059c4];return _0x3a724c;},a0_0x2059(_0x53e60e,_0x8aa6cc);}function setup2DContext(){const _0x26b3a7=a0_0x2059;ctx2d=bufferCanvas[_0x26b3a7(0x86)]('2d'),ctx2d['imageSmoothingEnabled']=![];}function a0_0x1370(){const _0x4b3ef2=['10jDvzYb','texcoord','width','357863zDYVRh','_temperature','webgl','_4.0.bin','767178aKEqlo','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','attachShader','uniform2f','TRIANGLE_STRIP','6901576MdEQel','FLOAT','toLowerCase','878815uTtVXY','getItem','clearRect','texParameteri','NEAREST','canvas','getPixelData','enableVertexAttribArray','./src/lut/lut64_','bindBuffer','height','low-power','compileShader','smooth_width','ARRAY_BUFFER','getUniformLocation','render_size','game_size','texImage2D','TEXTURE_MIN_FILTER','TEXTURE_2D','createProgram','putImageData','webgl_full','viewport','CLAMP_TO_EDGE','useProgram','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','2486512ZrqIZD','8JBxMUy','vertexAttribPointer','uniform1f','TEXTURE_MAG_FILTER','136YVmwio','linkProgram','2bQXAbk','STATIC_DRAW','none','bindTexture','getContext','28296pTXZQs','getAttribLocation','RGBA','data','411678NUUlTg','smooth_height','slice','position','TEXTURE_WRAP_T','drawArrays','clear','shaderSource','log'];a0_0x1370=function(){return _0x4b3ef2;};return a0_0x1370();}async function renderPixel(_0x2179f6){const _0x13420c=a0_0x2059,_0x3c6996=a0_0x30312f[_0x13420c(0xa9)]();if(!_0x3c6996)return;await loadLUT64();const _0x24d382=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1df7f8=0x0;_0x1df7f8<gameHeight;_0x1df7f8++){for(let _0x478196=0x0;_0x478196<gameWidth;_0x478196++){const _0x5bc31b=_0x1df7f8*gameStride+_0x478196,_0x37717e=(_0x1df7f8*gameWidth+_0x478196)*0x4,_0x3643d3=_0x3c6996[_0x5bc31b];if(lut64Profile==='none')_0x24d382[_0x37717e]=_0x3643d3&0xff,_0x24d382[_0x37717e+0x1]=_0x3643d3>>0x8&0xff,_0x24d382[_0x37717e+0x2]=_0x3643d3>>0x10&0xff,_0x24d382[_0x37717e+0x3]=0xff;else{const _0x353b0f=(_0x3643d3&0xff)>>0x2,_0x11197c=(_0x3643d3>>0x8&0xff)>>0x2,_0x4a25aa=(_0x3643d3>>0x10&0xff)>>0x2,_0x3feb37=(_0x353b0f*0x40*0x40+_0x11197c*0x40+_0x4a25aa)*0x3;_0x24d382[_0x37717e]=lut64[_0x3feb37],_0x24d382[_0x37717e+0x1]=lut64[_0x3feb37+0x1],_0x24d382[_0x37717e+0x2]=lut64[_0x3feb37+0x2],_0x24d382[_0x37717e+0x3]=0xff;}}}if(_0x2179f6===_0x13420c(0x99))gl[_0x13420c(0xb5)](gl[_0x13420c(0x73)],0x0,gl[_0x13420c(0x89)],gameWidth,gameHeight,0x0,gl[_0x13420c(0x89)],gl['UNSIGNED_BYTE'],_0x24d382),gl[_0x13420c(0x91)](gl['COLOR_BUFFER_BIT']),gl[_0x13420c(0x90)](gl[_0x13420c(0x9f)],0x0,0x4);else _0x2179f6==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x24d382,gameWidth,gameHeight):imageDataObj[_0x13420c(0x8a)]['set'](_0x24d382),ctx2d[_0x13420c(0xa5)](0x0,0x0,bufferCanvas[_0x13420c(0x96)],bufferCanvas[_0x13420c(0xad)]),ctx2d[_0x13420c(0x75)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x2179f6));}export async function switchRenderMode(_0x22323e){const _0x8039ca=a0_0x2059;systemType=gameName['slice'](-0x3);if(_0x22323e==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x22323e===_0x8039ca(0x99))setupStyle('2d'),setupWebGL_Shader(_0x8039ca(0x99)),setupTexture_Buffer(_0x8039ca(0x99)),renderPixel(_0x8039ca(0x99));else _0x22323e==='webgl_full'&&(setupStyle(_0x8039ca(0x76)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x8039ca(0x76)),renderPixel(_0x8039ca(0x99)));}}