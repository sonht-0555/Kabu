const a0_0x5237c2=a0_0x3c35;(function(_0x4d4974,_0x93e3cc){const _0x3d42fb=a0_0x3c35,_0x120c2f=_0x4d4974();while(!![]){try{const _0x16d9b6=-parseInt(_0x3d42fb(0x107))/0x1+parseInt(_0x3d42fb(0xea))/0x2+-parseInt(_0x3d42fb(0xdc))/0x3+-parseInt(_0x3d42fb(0x115))/0x4*(-parseInt(_0x3d42fb(0x127))/0x5)+-parseInt(_0x3d42fb(0xfb))/0x6+parseInt(_0x3d42fb(0xfa))/0x7+parseInt(_0x3d42fb(0xd3))/0x8;if(_0x16d9b6===_0x93e3cc)break;else _0x120c2f['push'](_0x120c2f['shift']());}catch(_0x243d30){_0x120c2f['push'](_0x120c2f['shift']());}}}(a0_0x5d42,0xe611f));import*as a0_0x38aa1f from'./main.js';function a0_0x5d42(){const _0x447e9c=['bindBuffer','webgl2','./src/shaders/fragmentShader.glsl','getItem','fefs','0,0,','STATIC_DRAW','clientWidth','_streng','NEAREST','RGBA','CLAMP_TO_EDGE','imageRendering','5oUzZmS','toLowerCase','getUniformLocation','documentElement','transformOrigin','slice','VERTEX_SHADER','classList','width','drawImage','compileShader','arrayBuffer','TEXTURE_2D','smooth_width','UNSIGNED_BYTE','text','_temperature','smooth_height','add','zoom','14657288MzsLbf','getShaderInfoLog','TEXTURE_MAG_FILTER','uniform2f','bufferData','shaderSource','img-shader','style','getContext','5186718NpDtwK','querySelectorAll','bindTexture','.bin','COMPILE_STATUS','error','FRAGMENT_SHADER','FLOAT','./src/lut/lut64_','texParameteri','.setting-container','createBuffer','imageSmoothingEnabled','then','1870258kDatrJ','position','addEventListener','uniform1f','canvas','attachShader','useProgram','viewport','log','forEach','devicePixelRatio','enableVertexAttribArray','ARRAY_BUFFER','setItem','clearRect','floor','9544717tUyMEU','4150842MjeoTN','TEXTURE_WRAP_T','textured','transform','TRIANGLE_STRIP','remove','height','game_size','scale(','createTexture','getShaderParameter','deleteShader','1232257USIjCF','createProgram','vertexAttribPointer','.message-container','linkProgram','getElementById','top\x20center','screenSize','drawArrays','.stateTitle,\x20.stateDate','texImage2D','getPixelData','render_size','createShader','1858064MaIxcr','texcoord','setProperty','4.0','crisp-edges'];a0_0x5d42=function(){return _0x447e9c;};return a0_0x5d42();}let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x5237c2(0x10c)](a0_0x5237c2(0xfd)),bufferCanvas=document['getElementById'](a0_0x5237c2(0xee)),canvasContainer=document['getElementById']('canvas-container'),imgShader=document[a0_0x5237c2(0x10c)](a0_0x5237c2(0xd9)),settingContainer=document['querySelectorAll'](a0_0x5237c2(0xe6)),messageContainer=document[a0_0x5237c2(0xdd)](a0_0x5237c2(0x10a)),stateTitle=document['querySelectorAll'](a0_0x5237c2(0x110));async function loadLUT64(){const _0x15e78d=a0_0x5237c2;systemType=gameName[_0x15e78d(0xc4)](-0x3);const _0x186308=localStorage[_0x15e78d(0x11d)](gameName+_0x15e78d(0x122))||_0x15e78d(0x118),_0x127061=(localStorage[_0x15e78d(0x11d)](gameName+_0x15e78d(0xcf))||'warm')[_0x15e78d(0xc0)]();if(!lut64||lut64Streng!==_0x186308||lut64Profile!==_0x127061){const _0x5af893=_0x15e78d(0xe4)+_0x127061+'_'+_0x186308+_0x15e78d(0xdf);console[_0x15e78d(0xf2)](_0x5af893);const _0x35712c=await fetch(_0x5af893),_0x3aecfe=await _0x35712c[_0x15e78d(0xca)]();lut64=new Uint8Array(_0x3aecfe),lut64Streng=_0x186308,lut64Profile=_0x127061;}}async function loadShaderSource(_0x1e3820){const _0x4ac3bc=a0_0x5237c2,_0x3a0998=await fetch(_0x1e3820);return await _0x3a0998[_0x4ac3bc(0xce)]();}function setupStyle(_0x52a6b5){const _0x5a1fbd=a0_0x5237c2;clientWidth=document[_0x5a1fbd(0xc2)][_0x5a1fbd(0x121)];const _0x6f99b9=window[_0x5a1fbd(0xf4)];systemType==='gbc'?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x5a1fbd(0xf9)](clientWidth*_0x6f99b9/gameWidth),localStorage[_0x5a1fbd(0xf7)](_0x5a1fbd(0x10e),_0x5a1fbd(0x11f)+gameWidth*(integerScaling/_0x6f99b9)+','+gameHeight*(integerScaling/_0x6f99b9))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x5a1fbd(0xf9)](clientWidth*_0x6f99b9/gameWidth),localStorage[_0x5a1fbd(0xf7)](_0x5a1fbd(0x10e),_0x5a1fbd(0x11f)+gameWidth*(integerScaling/_0x6f99b9)+','+gameHeight*(integerScaling/_0x6f99b9)));if(_0x52a6b5==='2d')bufferCanvas[_0x5a1fbd(0xc7)]=gameWidth,bufferCanvas[_0x5a1fbd(0x101)]=gameHeight,bufferCanvas[_0x5a1fbd(0xda)]['zoom']=''+integerScaling/_0x6f99b9,bufferCanvas[_0x5a1fbd(0xda)][_0x5a1fbd(0x126)]=_0x5a1fbd(0x119),canvasContainer['style'][_0x5a1fbd(0xc7)]=gameWidth*(integerScaling/_0x6f99b9)+'px',canvasContainer['style']['height']=gameHeight*(integerScaling/_0x6f99b9)+'px',textured[_0x5a1fbd(0xda)][_0x5a1fbd(0xc7)]=gameWidth*(integerScaling/_0x6f99b9)+'px',textured[_0x5a1fbd(0xda)][_0x5a1fbd(0x101)]=gameHeight*(integerScaling/_0x6f99b9)+'px',imgShader[_0x5a1fbd(0xda)]['transform']=_0x5a1fbd(0x103)+integerScaling/_0x6f99b9/upscaleShader+')',settingContainer[_0x5a1fbd(0xf3)](function(_0x5a2119){const _0x1a7a61=_0x5a1fbd;_0x5a2119['style']['width']=gameWidth*(integerScaling/_0x6f99b9)+'px',_0x5a2119[_0x1a7a61(0xda)][_0x1a7a61(0x101)]=gameHeight*(integerScaling/_0x6f99b9)+'px';}),messageContainer[_0x5a1fbd(0xf3)](function(_0x16e4e){const _0x2da618=_0x5a1fbd;_0x16e4e[_0x2da618(0xda)][_0x2da618(0xc7)]=gameWidth+'px',_0x16e4e[_0x2da618(0xda)][_0x2da618(0x101)]=gameHeight+'px',_0x16e4e[_0x2da618(0xda)]['zoom']=''+integerScaling/_0x6f99b9;}),stateTitle['forEach'](function(_0x3b713f){const _0x506c54=_0x5a1fbd;_0x3b713f[_0x506c54(0xc6)][_0x506c54(0x100)](_0x506c54(0x11e));});else _0x52a6b5===_0x5a1fbd(0x11b)&&(bufferCanvas[_0x5a1fbd(0xc7)]=clientWidth*upscaleFactor,bufferCanvas[_0x5a1fbd(0x101)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style']['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x5a1fbd(0xda)][_0x5a1fbd(0x126)]='',canvasContainer[_0x5a1fbd(0xda)][_0x5a1fbd(0xc7)]=clientWidth+'px',canvasContainer[_0x5a1fbd(0xda)][_0x5a1fbd(0x101)]=clientWidth*(gameHeight/gameWidth)+'px',textured['style'][_0x5a1fbd(0xc7)]=clientWidth+'px',textured[_0x5a1fbd(0xda)][_0x5a1fbd(0x101)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x5a1fbd(0xda)][_0x5a1fbd(0xfe)]=_0x5a1fbd(0x103)+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x38b10d){const _0x32b9d9=_0x5a1fbd;_0x38b10d[_0x32b9d9(0xda)][_0x32b9d9(0xc7)]=clientWidth+'px',_0x38b10d[_0x32b9d9(0xda)][_0x32b9d9(0x101)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x5a1fbd(0xf3)](function(_0xfc19a3){const _0x2b7f68=_0x5a1fbd;_0xfc19a3[_0x2b7f68(0xda)][_0x2b7f68(0xc7)]=gameWidth+'px',_0xfc19a3[_0x2b7f68(0xda)][_0x2b7f68(0x101)]=gameHeight+'px',_0xfc19a3[_0x2b7f68(0xda)][_0x2b7f68(0xd2)]=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x51a75f){const _0x356e16=_0x5a1fbd;_0x51a75f[_0x356e16(0xc6)][_0x356e16(0xd1)](_0x356e16(0x11e));}));imgShader[_0x5a1fbd(0xda)][_0x5a1fbd(0xc7)]=gameWidth*upscaleShader+'px',imgShader[_0x5a1fbd(0xda)][_0x5a1fbd(0x101)]=gameHeight*upscaleShader+'px',imgShader['style'][_0x5a1fbd(0xc3)]=_0x5a1fbd(0x10d),imgShader[_0x5a1fbd(0xda)][_0x5a1fbd(0x117)]('--bg-size',upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x2c24f8=a0_0x5237c2;gl=bufferCanvas[_0x2c24f8(0xdb)](_0x2c24f8(0x11b));if(!gl)return console[_0x2c24f8(0xe1)]('WebGL2\x20not\x20supported'),null;gl[_0x2c24f8(0xf1)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x2c24f8(0x101)]);}function createShader(_0x336204,_0x1f1b20){const _0x305096=a0_0x5237c2,_0x440332=gl[_0x305096(0x114)](_0x336204);gl[_0x305096(0xd8)](_0x440332,_0x1f1b20),gl[_0x305096(0xc9)](_0x440332);if(!gl[_0x305096(0x105)](_0x440332,gl[_0x305096(0xe0)]))return console[_0x305096(0xe1)](gl[_0x305096(0xd4)](_0x440332)),gl[_0x305096(0x106)](_0x440332),null;return _0x440332;}async function setupShaders(){const _0x3d723c=a0_0x5237c2,_0x7f3181=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x1d6d4c=await loadShaderSource(_0x3d723c(0x11c)),_0x5824bd=createShader(gl[_0x3d723c(0xc5)],_0x7f3181),_0x58e082=createShader(gl[_0x3d723c(0xe2)],_0x1d6d4c);return program=gl[_0x3d723c(0x108)](),gl[_0x3d723c(0xef)](program,_0x5824bd),gl[_0x3d723c(0xef)](program,_0x58e082),gl[_0x3d723c(0x10b)](program),gl[_0x3d723c(0xf0)](program),program;}function setupTexture(){const _0x6b1957=a0_0x5237c2;texture=gl[_0x6b1957(0x104)](),gl[_0x6b1957(0xde)](gl[_0x6b1957(0xcb)],texture),gl['texParameteri'](gl[_0x6b1957(0xcb)],gl['TEXTURE_MIN_FILTER'],gl['NEAREST']),gl[_0x6b1957(0xe5)](gl[_0x6b1957(0xcb)],gl[_0x6b1957(0xd5)],gl[_0x6b1957(0x123)]),gl['texParameteri'](gl[_0x6b1957(0xcb)],gl['TEXTURE_WRAP_S'],gl[_0x6b1957(0x125)]),gl[_0x6b1957(0xe5)](gl['TEXTURE_2D'],gl[_0x6b1957(0xfc)],gl[_0x6b1957(0x125)]),gl[_0x6b1957(0xd6)](gl[_0x6b1957(0xc1)](program,_0x6b1957(0x102)),gameWidth,gameHeight),gl[_0x6b1957(0xd6)](gl[_0x6b1957(0xc1)](program,_0x6b1957(0x113)),gl[_0x6b1957(0xee)][_0x6b1957(0xc7)],gl[_0x6b1957(0xee)][_0x6b1957(0x101)]),gl[_0x6b1957(0xed)](gl[_0x6b1957(0xc1)](program,_0x6b1957(0xcc)),gameWidth/gl[_0x6b1957(0xee)][_0x6b1957(0xc7)]),gl['uniform1f'](gl[_0x6b1957(0xc1)](program,_0x6b1957(0xd0)),gameHeight/gl[_0x6b1957(0xee)][_0x6b1957(0x101)]);}function setupBuffers(){const _0x199e59=a0_0x5237c2,_0x1ed029=gl[_0x199e59(0xe7)]();gl['bindBuffer'](gl[_0x199e59(0xf6)],_0x1ed029),gl[_0x199e59(0xd7)](gl[_0x199e59(0xf6)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x199e59(0x120)]);const _0x5d2dc1=gl['getAttribLocation'](program,_0x199e59(0xeb));gl[_0x199e59(0xf5)](_0x5d2dc1),gl[_0x199e59(0x109)](_0x5d2dc1,0x2,gl[_0x199e59(0xe3)],![],0x0,0x0);const _0x5781fa=gl[_0x199e59(0xe7)]();gl[_0x199e59(0x11a)](gl[_0x199e59(0xf6)],_0x5781fa),gl[_0x199e59(0xd7)](gl[_0x199e59(0xf6)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x199e59(0x120)]);const _0x237a17=gl['getAttribLocation'](program,_0x199e59(0x116));gl[_0x199e59(0xf5)](_0x237a17),gl[_0x199e59(0x109)](_0x237a17,0x2,gl[_0x199e59(0xe3)],![],0x0,0x0);}async function renderPixel(_0x484c87){const _0x25952a=a0_0x5237c2,_0x37f46b=a0_0x38aa1f[_0x25952a(0x112)]();if(!_0x37f46b)return;await loadLUT64();const _0x41edb8=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x20e276=0x0;_0x20e276<gameHeight;_0x20e276++){for(let _0x44ba00=0x0;_0x44ba00<gameWidth;_0x44ba00++){const _0xc8b507=_0x20e276*gameStride+_0x44ba00,_0x3ff42c=(_0x20e276*gameWidth+_0x44ba00)*0x4,_0x371bce=_0x37f46b[_0xc8b507],_0x6dacdb=(_0x371bce&0xff)>>0x2,_0x17a9ef=(_0x371bce>>0x8&0xff)>>0x2,_0x3315b7=(_0x371bce>>0x10&0xff)>>0x2,_0x4d5354=(_0x6dacdb*0x40*0x40+_0x17a9ef*0x40+_0x3315b7)*0x3;_0x41edb8[_0x3ff42c]=lut64[_0x4d5354],_0x41edb8[_0x3ff42c+0x1]=lut64[_0x4d5354+0x1],_0x41edb8[_0x3ff42c+0x2]=lut64[_0x4d5354+0x2],_0x41edb8[_0x3ff42c+0x3]=0xff;}}if(_0x484c87==='webgl2')gl[_0x25952a(0xde)](gl['TEXTURE_2D'],texture),gl[_0x25952a(0x111)](gl[_0x25952a(0xcb)],0x0,gl[_0x25952a(0x124)],gameWidth,gameHeight,0x0,gl[_0x25952a(0x124)],gl[_0x25952a(0xcd)],_0x41edb8),gl['clear'](gl['COLOR_BUFFER_BIT']),gl[_0x25952a(0x10f)](gl[_0x25952a(0xff)],0x0,0x4);else{if(_0x484c87==='2d'){ctx2d=bufferCanvas[_0x25952a(0xdb)]('2d'),ctx2d[_0x25952a(0xe8)]=![];const _0x511400=new ImageData(_0x41edb8,gameWidth,gameHeight);createImageBitmap(_0x511400)[_0x25952a(0xe9)](_0x4957d4=>{const _0x205965=_0x25952a;ctx2d[_0x205965(0xf8)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x205965(0x101)]),ctx2d[_0x205965(0xc8)](_0x4957d4,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x484c87));}function a0_0x3c35(_0x4bd1fb,_0x295507){const _0x5d421e=a0_0x5d42();return a0_0x3c35=function(_0x3c350f,_0x4fc522){_0x3c350f=_0x3c350f-0xc0;let _0x99b7d3=_0x5d421e[_0x3c350f];return _0x99b7d3;},a0_0x3c35(_0x4bd1fb,_0x295507);}export async function switchRenderMode(_0x2f85c2){const _0x5bd1a4=a0_0x5237c2;systemType=gameName[_0x5bd1a4(0xc4)](-0x3);if(_0x2f85c2==='2d')setupStyle('2d'),renderPixel('2d');else _0x2f85c2===_0x5bd1a4(0x11b)&&(setupStyle(_0x5bd1a4(0x11b)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x5237c2(0xec)]('DOMContentLoaded',function(){});