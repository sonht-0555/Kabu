(function(_0x5c985f,_0x3c43c7){const _0x5393ca=a0_0x67f7,_0x467561=_0x5c985f();while(!![]){try{const _0x34068d=-parseInt(_0x5393ca(0x104))/0x1+parseInt(_0x5393ca(0x108))/0x2+-parseInt(_0x5393ca(0xf0))/0x3+-parseInt(_0x5393ca(0x115))/0x4*(parseInt(_0x5393ca(0x121))/0x5)+parseInt(_0x5393ca(0xf9))/0x6+parseInt(_0x5393ca(0xe7))/0x7+-parseInt(_0x5393ca(0xed))/0x8*(-parseInt(_0x5393ca(0x112))/0x9);if(_0x34068d===_0x3c43c7)break;else _0x467561['push'](_0x467561['shift']());}catch(_0x197da1){_0x467561['push'](_0x467561['shift']());}}}(a0_0x2e87,0xa5fae));import*as a0_0x183853 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x1580da=a0_0x67f7;systemType=gameName[_0x1580da(0x102)](-0x3);const _0x21b066=(localStorage['getItem'](gameName+_0x1580da(0x11d))||_0x1580da(0x109))[_0x1580da(0xec)]();if(!lut64||lut64Profile!==_0x21b066){const _0x12dad1='./src/lut/lut64_'+_0x21b066+_0x1580da(0x100);console[_0x1580da(0xfd)](_0x12dad1);const _0x5cad6a=await fetch(_0x12dad1),_0x16f6fb=await _0x5cad6a[_0x1580da(0xeb)]();lut64=new Uint8Array(_0x16f6fb),lut64Profile=_0x21b066;}}function setupWebGL_Shader(_0x42d40d){const _0x1d5d7f=a0_0x67f7;gl=bufferCanvas[_0x1d5d7f(0x126)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x1d5d7f(0x11f)}),gl[_0x1d5d7f(0xf1)](0x0,0x0,bufferCanvas[_0x1d5d7f(0x10a)],bufferCanvas[_0x1d5d7f(0xfa)]);function _0x55ecd5(_0x3514c9,_0x24d670){const _0x4be86b=_0x1d5d7f,_0x189bc2=gl[_0x4be86b(0x106)](_0x3514c9);return gl[_0x4be86b(0x11c)](_0x189bc2,_0x24d670),gl[_0x4be86b(0x11a)](_0x189bc2),_0x189bc2;}vs=_0x1d5d7f(0x128);if(_0x42d40d==='webgl')fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}';else _0x42d40d===_0x1d5d7f(0x10c)&&(fs=_0x1d5d7f(0x10e));const _0x3a55f7=_0x55ecd5(gl[_0x1d5d7f(0x120)],vs),_0x4596d8=_0x55ecd5(gl['FRAGMENT_SHADER'],fs);return program=gl['createProgram'](),gl[_0x1d5d7f(0xfc)](program,_0x3a55f7),gl[_0x1d5d7f(0xfc)](program,_0x4596d8),gl['linkProgram'](program),gl[_0x1d5d7f(0xf2)](program),program;}function setupTexture_Buffer(_0x5ba1b3){const _0x4bf4cf=a0_0x67f7;texture=gl[_0x4bf4cf(0x114)](),gl[_0x4bf4cf(0xfb)](gl[_0x4bf4cf(0x105)],texture),gl[_0x4bf4cf(0x125)](gl[_0x4bf4cf(0x105)],gl['TEXTURE_MIN_FILTER'],gl[_0x4bf4cf(0x118)]),gl[_0x4bf4cf(0x125)](gl['TEXTURE_2D'],gl[_0x4bf4cf(0xe5)],gl['NEAREST']),gl[_0x4bf4cf(0x125)](gl[_0x4bf4cf(0x105)],gl[_0x4bf4cf(0x111)],gl[_0x4bf4cf(0xf7)]),gl[_0x4bf4cf(0x125)](gl[_0x4bf4cf(0x105)],gl['TEXTURE_WRAP_T'],gl['CLAMP_TO_EDGE']);_0x5ba1b3===_0x4bf4cf(0x10c)&&(gl[_0x4bf4cf(0x123)](gl[_0x4bf4cf(0x10f)](program,_0x4bf4cf(0xee)),gameWidth,gameHeight),gl[_0x4bf4cf(0x123)](gl[_0x4bf4cf(0x10f)](program,_0x4bf4cf(0xff)),gl['canvas'][_0x4bf4cf(0x10a)],gl[_0x4bf4cf(0x124)]['height']),gl['uniform1f'](gl[_0x4bf4cf(0x10f)](program,_0x4bf4cf(0xf5)),gameWidth/gl[_0x4bf4cf(0x124)][_0x4bf4cf(0x10a)]),gl['uniform1f'](gl[_0x4bf4cf(0x10f)](program,_0x4bf4cf(0xe9)),gameHeight/gl[_0x4bf4cf(0x124)]['height']));const _0x1b4198=gl[_0x4bf4cf(0xe8)]();gl['bindBuffer'](gl[_0x4bf4cf(0x119)],_0x1b4198),gl[_0x4bf4cf(0x11e)](gl[_0x4bf4cf(0x119)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x4bf4cf(0xf4)](gl[_0x4bf4cf(0xef)](program,'position'),0x2,gl[_0x4bf4cf(0x127)],![],0x0,0x0),gl[_0x4bf4cf(0xfe)](gl[_0x4bf4cf(0xef)](program,_0x4bf4cf(0x107)));const _0x1dec3b=gl[_0x4bf4cf(0xe8)]();gl[_0x4bf4cf(0xe6)](gl[_0x4bf4cf(0x119)],_0x1dec3b),gl[_0x4bf4cf(0x11e)](gl[_0x4bf4cf(0x119)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4bf4cf(0x116)]),gl[_0x4bf4cf(0xf4)](gl[_0x4bf4cf(0xef)](program,_0x4bf4cf(0xf6)),0x2,gl[_0x4bf4cf(0x127)],![],0x0,0x0),gl[_0x4bf4cf(0xfe)](gl[_0x4bf4cf(0xef)](program,'texcoord'));}function setup2DContext(){const _0x2a2001=a0_0x67f7;ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x2a2001(0x122)]=![];}function a0_0x2e87(){const _0x35641e=['precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','getUniformLocation','getPixelData','TEXTURE_WRAP_S','9050616UujRZM','drawArrays','createTexture','324dHIwLz','STATIC_DRAW','UNSIGNED_BYTE','NEAREST','ARRAY_BUFFER','compileShader','texImage2D','shaderSource','_temperature','bufferData','low-power','VERTEX_SHADER','60145jtiWAm','imageSmoothingEnabled','uniform2f','canvas','texParameteri','getContext','FLOAT','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','TEXTURE_MAG_FILTER','bindBuffer','1340430LJyxOr','createBuffer','smooth_height','RGBA','arrayBuffer','toLowerCase','16DDhjlr','game_size','getAttribLocation','3331317dsPBnn','viewport','useProgram','webgl','vertexAttribPointer','smooth_width','texcoord','CLAMP_TO_EDGE','data','2922114OPFEKb','height','bindTexture','attachShader','log','enableVertexAttribArray','render_size','_4.0.bin','set','slice','putImageData','223351mrlMDr','TEXTURE_2D','createShader','position','596472dGRpdy','none','width','TRIANGLE_STRIP','webgl_full','COLOR_BUFFER_BIT'];a0_0x2e87=function(){return _0x35641e;};return a0_0x2e87();}function a0_0x67f7(_0x5ab9cf,_0x4148bf){const _0x2e8714=a0_0x2e87();return a0_0x67f7=function(_0x67f763,_0x391713){_0x67f763=_0x67f763-0xe5;let _0x4a5aa4=_0x2e8714[_0x67f763];return _0x4a5aa4;},a0_0x67f7(_0x5ab9cf,_0x4148bf);}async function renderPixel(_0x317188){const _0x23cfd8=a0_0x67f7,_0x378a8f=a0_0x183853[_0x23cfd8(0x110)]();if(!_0x378a8f)return;await loadLUT64();const _0x41e32f=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x509a4e=0x0;_0x509a4e<gameHeight;_0x509a4e++){for(let _0x3af4de=0x0;_0x3af4de<gameWidth;_0x3af4de++){const _0x5c6714=_0x509a4e*gameStride+_0x3af4de,_0x5e1566=(_0x509a4e*gameWidth+_0x3af4de)*0x4,_0x375d8e=_0x378a8f[_0x5c6714];if(lut64Profile===_0x23cfd8(0x109))_0x41e32f[_0x5e1566]=_0x375d8e&0xff,_0x41e32f[_0x5e1566+0x1]=_0x375d8e>>0x8&0xff,_0x41e32f[_0x5e1566+0x2]=_0x375d8e>>0x10&0xff,_0x41e32f[_0x5e1566+0x3]=0xff;else{const _0xf69b4a=(_0x375d8e&0xff)>>0x2,_0x2c007b=(_0x375d8e>>0x8&0xff)>>0x2,_0x2f9a00=(_0x375d8e>>0x10&0xff)>>0x2,_0x4b1215=(_0xf69b4a*0x40*0x40+_0x2c007b*0x40+_0x2f9a00)*0x3;_0x41e32f[_0x5e1566]=lut64[_0x4b1215],_0x41e32f[_0x5e1566+0x1]=lut64[_0x4b1215+0x1],_0x41e32f[_0x5e1566+0x2]=lut64[_0x4b1215+0x2],_0x41e32f[_0x5e1566+0x3]=0xff;}}}if(_0x317188==='webgl')gl[_0x23cfd8(0x11b)](gl[_0x23cfd8(0x105)],0x0,gl[_0x23cfd8(0xea)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x23cfd8(0x117)],_0x41e32f),gl['clear'](gl[_0x23cfd8(0x10d)]),gl[_0x23cfd8(0x113)](gl[_0x23cfd8(0x10b)],0x0,0x4);else _0x317188==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x41e32f,gameWidth,gameHeight):imageDataObj[_0x23cfd8(0xf8)][_0x23cfd8(0x101)](_0x41e32f),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x23cfd8(0x10a)],bufferCanvas[_0x23cfd8(0xfa)]),ctx2d[_0x23cfd8(0x103)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x317188));}export async function switchRenderMode(_0x422512){const _0x422471=a0_0x67f7;systemType=gameName[_0x422471(0x102)](-0x3);if(_0x422512==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x422512===_0x422471(0xf3))setupStyle('2d'),setupWebGL_Shader(_0x422471(0xf3)),setupTexture_Buffer(_0x422471(0xf3)),renderPixel('webgl');else _0x422512===_0x422471(0x10c)&&(setupStyle(_0x422471(0x10c)),setupWebGL_Shader(_0x422471(0x10c)),setupTexture_Buffer('webgl_full'),renderPixel(_0x422471(0xf3)));}}