function a0_0x42c1(){const _0x3755c8=['_temperature','5646mEsRnc','low-power','canvas','enableVertexAttribArray','texImage2D','STATIC_DRAW','uniform1f','getPixelData','texcoord','none','webgl','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','compileShader','6341517CSShUd','1795EFVjVN','slice','RGBA','set','TEXTURE_WRAP_S','game_size','vertexAttribPointer','shaderSource','putImageData','getAttribLocation','smooth_width','VERTEX_SHADER','smooth_height','drawArrays','attachShader','TEXTURE_MAG_FILTER','createProgram','ARRAY_BUFFER','bindBuffer','clearRect','CLAMP_TO_EDGE','getUniformLocation','2545176AYxKzt','TEXTURE_2D','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','11279048ZMXEtt','4933411UYYfpX','COLOR_BUFFER_BIT','createBuffer','2237391QZcNLW','getItem','data','bindTexture','TRIANGLE_STRIP','render_size','toLowerCase','_4.0.bin','viewport','arrayBuffer','createTexture','getContext','124HrAzAd','position','width','webgl_full','5316ugsAXC','uniform2f','TEXTURE_WRAP_T','FRAGMENT_SHADER','FLOAT','NEAREST','imageSmoothingEnabled','height'];a0_0x42c1=function(){return _0x3755c8;};return a0_0x42c1();}(function(_0x126346,_0x3608f3){const _0x2ba11b=a0_0xbf13,_0x5a7304=_0x126346();while(!![]){try{const _0x5fc702=-parseInt(_0x2ba11b(0x174))/0x1*(parseInt(_0x2ba11b(0x1b4))/0x2)+parseInt(_0x2ba11b(0x1a8))/0x3+parseInt(_0x2ba11b(0x1a1))/0x4+-parseInt(_0x2ba11b(0x18b))/0x5*(parseInt(_0x2ba11b(0x17d))/0x6)+-parseInt(_0x2ba11b(0x1a5))/0x7+parseInt(_0x2ba11b(0x1a4))/0x8+-parseInt(_0x2ba11b(0x18a))/0x9;if(_0x5fc702===_0x3608f3)break;else _0x5a7304['push'](_0x5a7304['shift']());}catch(_0x2450c4){_0x5a7304['push'](_0x5a7304['shift']());}}}(a0_0x42c1,0xae9a7));import*as a0_0x36732a from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0xc73bf3=a0_0xbf13;systemType=gameName[_0xc73bf3(0x18c)](-0x3);const _0x3d565b=(localStorage[_0xc73bf3(0x1a9)](gameName+_0xc73bf3(0x17c))||_0xc73bf3(0x186))[_0xc73bf3(0x1ae)]();if(!lut64||lut64Profile!==_0x3d565b){const _0x5837c3='./src/lut/lut64_'+_0x3d565b+_0xc73bf3(0x1af);console['log'](_0x5837c3);const _0x9f8dcb=await fetch(_0x5837c3),_0x5b22ba=await _0x9f8dcb[_0xc73bf3(0x1b1)]();lut64=new Uint8Array(_0x5b22ba),lut64Profile=_0x3d565b;}}function setupWebGL_Shader(_0x1d33f3){const _0x174dd8=a0_0xbf13;gl=bufferCanvas[_0x174dd8(0x1b3)](_0x174dd8(0x187),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x174dd8(0x17e)}),gl[_0x174dd8(0x1b0)](0x0,0x0,bufferCanvas[_0x174dd8(0x172)],bufferCanvas['height']);function _0x513678(_0x55866f,_0x2f5d7a){const _0x1d5f20=_0x174dd8,_0x302993=gl['createShader'](_0x55866f);return gl[_0x1d5f20(0x192)](_0x302993,_0x2f5d7a),gl[_0x1d5f20(0x189)](_0x302993),_0x302993;}vs='attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}';if(_0x1d33f3===_0x174dd8(0x187))fs=_0x174dd8(0x1a3);else _0x1d33f3===_0x174dd8(0x173)&&(fs=_0x174dd8(0x188));const _0x34d44c=_0x513678(gl[_0x174dd8(0x196)],vs),_0x14cbc4=_0x513678(gl[_0x174dd8(0x177)],fs);return program=gl[_0x174dd8(0x19b)](),gl[_0x174dd8(0x199)](program,_0x34d44c),gl[_0x174dd8(0x199)](program,_0x14cbc4),gl['linkProgram'](program),gl['useProgram'](program),program;}function a0_0xbf13(_0x5569cd,_0x1874cc){const _0x42c11f=a0_0x42c1();return a0_0xbf13=function(_0xbf1307,_0x4a5acf){_0xbf1307=_0xbf1307-0x171;let _0x59eca2=_0x42c11f[_0xbf1307];return _0x59eca2;},a0_0xbf13(_0x5569cd,_0x1874cc);}function setupTexture_Buffer(_0x12284d){const _0x1fa57f=a0_0xbf13;texture=gl[_0x1fa57f(0x1b2)](),gl[_0x1fa57f(0x1ab)](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl[_0x1fa57f(0x1a2)],gl['TEXTURE_MIN_FILTER'],gl[_0x1fa57f(0x179)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x1fa57f(0x19a)],gl[_0x1fa57f(0x179)]),gl['texParameteri'](gl[_0x1fa57f(0x1a2)],gl[_0x1fa57f(0x18f)],gl[_0x1fa57f(0x19f)]),gl['texParameteri'](gl[_0x1fa57f(0x1a2)],gl[_0x1fa57f(0x176)],gl[_0x1fa57f(0x19f)]);_0x12284d===_0x1fa57f(0x173)&&(gl[_0x1fa57f(0x175)](gl['getUniformLocation'](program,_0x1fa57f(0x190)),gameWidth,gameHeight),gl['uniform2f'](gl['getUniformLocation'](program,_0x1fa57f(0x1ad)),gl['canvas']['width'],gl[_0x1fa57f(0x17f)]['height']),gl[_0x1fa57f(0x183)](gl['getUniformLocation'](program,_0x1fa57f(0x195)),gameWidth/gl[_0x1fa57f(0x17f)][_0x1fa57f(0x172)]),gl[_0x1fa57f(0x183)](gl[_0x1fa57f(0x1a0)](program,_0x1fa57f(0x197)),gameHeight/gl['canvas'][_0x1fa57f(0x17b)]));const _0x1b007e=gl[_0x1fa57f(0x1a7)]();gl[_0x1fa57f(0x19d)](gl[_0x1fa57f(0x19c)],_0x1b007e),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x1fa57f(0x182)]),gl[_0x1fa57f(0x191)](gl[_0x1fa57f(0x194)](program,_0x1fa57f(0x171)),0x2,gl[_0x1fa57f(0x178)],![],0x0,0x0),gl[_0x1fa57f(0x180)](gl[_0x1fa57f(0x194)](program,_0x1fa57f(0x171)));const _0x36bae2=gl[_0x1fa57f(0x1a7)]();gl[_0x1fa57f(0x19d)](gl[_0x1fa57f(0x19c)],_0x36bae2),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x1fa57f(0x182)]),gl['vertexAttribPointer'](gl[_0x1fa57f(0x194)](program,_0x1fa57f(0x185)),0x2,gl[_0x1fa57f(0x178)],![],0x0,0x0),gl[_0x1fa57f(0x180)](gl[_0x1fa57f(0x194)](program,'texcoord'));}function setup2DContext(){const _0x5c7131=a0_0xbf13;ctx2d=bufferCanvas[_0x5c7131(0x1b3)]('2d'),ctx2d[_0x5c7131(0x17a)]=![];}async function renderPixel(_0x3d2fb7){const _0x29477c=a0_0xbf13,_0x53a14a=a0_0x36732a[_0x29477c(0x184)]();if(!_0x53a14a)return;await loadLUT64();const _0x1b0ba9=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x43af44=0x0;_0x43af44<gameHeight;_0x43af44++){for(let _0x522bf5=0x0;_0x522bf5<gameWidth;_0x522bf5++){const _0x20f743=_0x43af44*gameStride+_0x522bf5,_0x3c60b9=(_0x43af44*gameWidth+_0x522bf5)*0x4,_0x202bf2=_0x53a14a[_0x20f743];if(lut64Profile===_0x29477c(0x186))_0x1b0ba9[_0x3c60b9]=_0x202bf2&0xff,_0x1b0ba9[_0x3c60b9+0x1]=_0x202bf2>>0x8&0xff,_0x1b0ba9[_0x3c60b9+0x2]=_0x202bf2>>0x10&0xff,_0x1b0ba9[_0x3c60b9+0x3]=0xff;else{const _0x3f2581=(_0x202bf2&0xff)>>0x2,_0x4f96d6=(_0x202bf2>>0x8&0xff)>>0x2,_0x598f65=(_0x202bf2>>0x10&0xff)>>0x2,_0x5eafbe=(_0x3f2581*0x40*0x40+_0x4f96d6*0x40+_0x598f65)*0x3;_0x1b0ba9[_0x3c60b9]=lut64[_0x5eafbe],_0x1b0ba9[_0x3c60b9+0x1]=lut64[_0x5eafbe+0x1],_0x1b0ba9[_0x3c60b9+0x2]=lut64[_0x5eafbe+0x2],_0x1b0ba9[_0x3c60b9+0x3]=0xff;}}}if(_0x3d2fb7===_0x29477c(0x187))gl[_0x29477c(0x181)](gl[_0x29477c(0x1a2)],0x0,gl[_0x29477c(0x18d)],gameWidth,gameHeight,0x0,gl[_0x29477c(0x18d)],gl['UNSIGNED_BYTE'],_0x1b0ba9),gl['clear'](gl[_0x29477c(0x1a6)]),gl[_0x29477c(0x198)](gl[_0x29477c(0x1ac)],0x0,0x4);else _0x3d2fb7==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x1b0ba9,gameWidth,gameHeight):imageDataObj[_0x29477c(0x1aa)][_0x29477c(0x18e)](_0x1b0ba9),ctx2d[_0x29477c(0x19e)](0x0,0x0,bufferCanvas[_0x29477c(0x172)],bufferCanvas[_0x29477c(0x17b)]),ctx2d[_0x29477c(0x193)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x3d2fb7));}export async function switchRenderMode(_0x27647e){const _0x436ca0=a0_0xbf13;systemType=gameName['slice'](-0x3);if(_0x27647e==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x27647e==='webgl')setupStyle('2d'),setupWebGL_Shader(_0x436ca0(0x187)),setupTexture_Buffer(_0x436ca0(0x187)),renderPixel(_0x436ca0(0x187));else _0x27647e===_0x436ca0(0x173)&&(setupStyle('webgl_full'),setupWebGL_Shader(_0x436ca0(0x173)),setupTexture_Buffer(_0x436ca0(0x173)),renderPixel(_0x436ca0(0x187)));}}