const a0_0x34117d=a0_0x82b1;(function(_0x3cf0f8,_0x5c3604){const _0x1d95fc=a0_0x82b1,_0x27570f=_0x3cf0f8();while(!![]){try{const _0x23c809=parseInt(_0x1d95fc(0xd1))/0x1*(-parseInt(_0x1d95fc(0x104))/0x2)+-parseInt(_0x1d95fc(0xca))/0x3*(parseInt(_0x1d95fc(0xfc))/0x4)+parseInt(_0x1d95fc(0xea))/0x5*(parseInt(_0x1d95fc(0xe4))/0x6)+-parseInt(_0x1d95fc(0xbe))/0x7+parseInt(_0x1d95fc(0xe0))/0x8*(-parseInt(_0x1d95fc(0xc9))/0x9)+parseInt(_0x1d95fc(0x117))/0xa*(-parseInt(_0x1d95fc(0xe9))/0xb)+-parseInt(_0x1d95fc(0xed))/0xc*(-parseInt(_0x1d95fc(0xc6))/0xd);if(_0x23c809===_0x5c3604)break;else _0x27570f['push'](_0x27570f['shift']());}catch(_0x196fc5){_0x27570f['push'](_0x27570f['shift']());}}}(a0_0x5a47,0x57855));import*as a0_0x42f3ff from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0x34117d(0x115)),bufferCanvas=document[a0_0x34117d(0xfe)]('canvas'),canvasContainer=document[a0_0x34117d(0xfe)](a0_0x34117d(0x105)),imgShader=document[a0_0x34117d(0xfe)](a0_0x34117d(0x108)),settingContainer=document[a0_0x34117d(0x123)](a0_0x34117d(0xf5)),messageContainer=document[a0_0x34117d(0x123)](a0_0x34117d(0x10f)),stateTitle=document['querySelectorAll'](a0_0x34117d(0xc2));async function loadLUT64(){const _0x4b598d=a0_0x34117d;systemType=gameName['slice'](-0x3);const _0x3225e4=localStorage['getItem'](gameName+_0x4b598d(0xff))||_0x4b598d(0xc3),_0x569cb5=(localStorage[_0x4b598d(0xd4)](gameName+_0x4b598d(0xf7))||_0x4b598d(0xdc))['toLowerCase']();if(!lut64||lut64Streng!==_0x3225e4||lut64Profile!==_0x569cb5){const _0x316d82='./src/lut/lut64_'+_0x569cb5+'_'+_0x3225e4+_0x4b598d(0xfb);console['log'](_0x316d82);const _0x4fe60f=await fetch(_0x316d82),_0x4f55b0=await _0x4fe60f[_0x4b598d(0x120)]();lut64=new Uint8Array(_0x4f55b0),lut64Streng=_0x3225e4,lut64Profile=_0x569cb5;}}async function loadShaderSource(_0x280d66){const _0x503afe=a0_0x34117d,_0x2cc618=await fetch(_0x280d66);return await _0x2cc618[_0x503afe(0xf6)]();}function a0_0x82b1(_0x2ccdd3,_0x2319e4){const _0x5a4708=a0_0x5a47();return a0_0x82b1=function(_0x82b1b5,_0x131888){_0x82b1b5=_0x82b1b5-0xbe;let _0x48bc3e=_0x5a4708[_0x82b1b5];return _0x48bc3e;},a0_0x82b1(_0x2ccdd3,_0x2319e4);}function setupStyle(_0x1f519f){const _0xcabd21=a0_0x34117d;clientWidth=document[_0xcabd21(0xdf)][_0xcabd21(0xf3)];const _0xe5a201=window[_0xcabd21(0xd0)];systemType===_0xcabd21(0xc0)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0xcabd21(0xd3)](clientWidth*_0xe5a201/gameWidth),localStorage[_0xcabd21(0xe6)](_0xcabd21(0xce),_0xcabd21(0x111)+gameWidth*(integerScaling/_0xe5a201)+','+gameHeight*(integerScaling/_0xe5a201))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0xe5a201/gameWidth),localStorage[_0xcabd21(0xe6)](_0xcabd21(0xce),_0xcabd21(0x111)+gameWidth*(integerScaling/_0xe5a201)+','+gameHeight*(integerScaling/_0xe5a201)));if(_0x1f519f==='2d')bufferCanvas[_0xcabd21(0xcc)]=gameWidth,bufferCanvas[_0xcabd21(0x11b)]=gameHeight,bufferCanvas[_0xcabd21(0x103)][_0xcabd21(0xe5)]=''+integerScaling/_0xe5a201,bufferCanvas[_0xcabd21(0x103)][_0xcabd21(0x11a)]=_0xcabd21(0xc4),canvasContainer[_0xcabd21(0x103)]['width']=gameWidth*(integerScaling/_0xe5a201)+'px',canvasContainer['style'][_0xcabd21(0x11b)]=gameHeight*(integerScaling/_0xe5a201)+'px',textured['style'][_0xcabd21(0xcc)]=gameWidth*(integerScaling/_0xe5a201)+'px',textured[_0xcabd21(0x103)][_0xcabd21(0x11b)]=gameHeight*(integerScaling/_0xe5a201)+'px',imgShader['style'][_0xcabd21(0xd5)]=_0xcabd21(0xe8)+integerScaling/_0xe5a201/upscaleShader+')',settingContainer[_0xcabd21(0x10b)](function(_0x3844bc){const _0x54f1a1=_0xcabd21;_0x3844bc[_0x54f1a1(0x103)][_0x54f1a1(0xcc)]=gameWidth*(integerScaling/_0xe5a201)+'px',_0x3844bc[_0x54f1a1(0x103)][_0x54f1a1(0x11b)]=gameHeight*(integerScaling/_0xe5a201)+'px';}),messageContainer['forEach'](function(_0x36446b){const _0x49b27c=_0xcabd21;_0x36446b['style'][_0x49b27c(0xcc)]=gameWidth+'px',_0x36446b[_0x49b27c(0x103)][_0x49b27c(0x11b)]=gameHeight+'px',_0x36446b[_0x49b27c(0x103)]['zoom']=''+integerScaling/_0xe5a201;}),stateTitle['forEach'](function(_0x42c7cf){const _0x11fadb=_0xcabd21;_0x42c7cf['classList'][_0x11fadb(0x113)](_0x11fadb(0xd8));});else _0x1f519f==='webgl2'&&(bufferCanvas[_0xcabd21(0xcc)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0xcabd21(0x103)][_0xcabd21(0xe5)]=''+0x1/upscaleFactor,bufferCanvas[_0xcabd21(0x103)][_0xcabd21(0x11a)]='',canvasContainer[_0xcabd21(0x103)]['width']=clientWidth+'px',canvasContainer['style']['height']=clientWidth*(gameHeight/gameWidth)+'px',textured[_0xcabd21(0x103)]['width']=clientWidth+'px',textured[_0xcabd21(0x103)][_0xcabd21(0x11b)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0xcabd21(0x103)][_0xcabd21(0xd5)]=_0xcabd21(0xe8)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0xcabd21(0x10b)](function(_0x833989){const _0x2d528d=_0xcabd21;_0x833989[_0x2d528d(0x103)][_0x2d528d(0xcc)]=clientWidth+'px',_0x833989[_0x2d528d(0x103)][_0x2d528d(0x11b)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0xcabd21(0x10b)](function(_0x465513){const _0x11cb4a=_0xcabd21;_0x465513['style'][_0x11cb4a(0xcc)]=gameWidth+'px',_0x465513[_0x11cb4a(0x103)][_0x11cb4a(0x11b)]=gameHeight+'px',_0x465513[_0x11cb4a(0x103)][_0x11cb4a(0xe5)]=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x238e1f){const _0x153e0f=_0xcabd21;_0x238e1f['classList'][_0x153e0f(0xe7)]('fefs');}));imgShader['style']['width']=gameWidth*upscaleShader+'px',imgShader[_0xcabd21(0x103)]['height']=gameHeight*upscaleShader+'px',imgShader[_0xcabd21(0x103)][_0xcabd21(0x10e)]=_0xcabd21(0xd6),imgShader[_0xcabd21(0x103)]['setProperty'](_0xcabd21(0xcd),upscaleShader+_0xcabd21(0x10d)+upscaleShader+'px');}function setupWebGL(){const _0xca58ce=a0_0x34117d;gl=bufferCanvas[_0xca58ce(0x10c)]('webgl2');if(!gl)return console[_0xca58ce(0x107)](_0xca58ce(0xd7)),null;gl[_0xca58ce(0x106)](0x0,0x0,bufferCanvas[_0xca58ce(0xcc)],bufferCanvas[_0xca58ce(0x11b)]);}function createShader(_0x157826,_0x2ff69b){const _0x93458f=a0_0x34117d,_0x2e00f4=gl[_0x93458f(0xe1)](_0x157826);gl[_0x93458f(0xeb)](_0x2e00f4,_0x2ff69b),gl[_0x93458f(0x11e)](_0x2e00f4);if(!gl[_0x93458f(0xc8)](_0x2e00f4,gl[_0x93458f(0x125)]))return console[_0x93458f(0x107)](gl['getShaderInfoLog'](_0x2e00f4)),gl[_0x93458f(0xf9)](_0x2e00f4),null;return _0x2e00f4;}async function setupShaders(){const _0x5f3d54=a0_0x34117d,_0x48affe=await loadShaderSource(_0x5f3d54(0x100)),_0x498a6a=await loadShaderSource(_0x5f3d54(0xde)),_0x385867=createShader(gl[_0x5f3d54(0xe3)],_0x48affe),_0x198476=createShader(gl['FRAGMENT_SHADER'],_0x498a6a);return program=gl[_0x5f3d54(0xcb)](),gl[_0x5f3d54(0x11f)](program,_0x385867),gl['attachShader'](program,_0x198476),gl['linkProgram'](program),gl['useProgram'](program),program;}function setupTexture(){const _0x54e8e9=a0_0x34117d;texture=gl[_0x54e8e9(0xfd)](),gl[_0x54e8e9(0xbf)](gl[_0x54e8e9(0x126)],texture),gl[_0x54e8e9(0x112)](gl[_0x54e8e9(0x126)],gl[_0x54e8e9(0xc7)],gl['NEAREST']),gl[_0x54e8e9(0x112)](gl[_0x54e8e9(0x126)],gl['TEXTURE_MAG_FILTER'],gl[_0x54e8e9(0x124)]),gl['texParameteri'](gl[_0x54e8e9(0x126)],gl[_0x54e8e9(0xd2)],gl['CLAMP_TO_EDGE']),gl['texParameteri'](gl[_0x54e8e9(0x126)],gl[_0x54e8e9(0x109)],gl['CLAMP_TO_EDGE']),gl['uniform2f'](gl[_0x54e8e9(0x119)](program,_0x54e8e9(0xc5)),gameWidth,gameHeight),gl['uniform2f'](gl['getUniformLocation'](program,'render_size'),gl[_0x54e8e9(0x10a)][_0x54e8e9(0xcc)],gl[_0x54e8e9(0x10a)]['height']),gl[_0x54e8e9(0xcf)](gl['getUniformLocation'](program,_0x54e8e9(0xe2)),gameWidth/gl[_0x54e8e9(0x10a)][_0x54e8e9(0xcc)]),gl[_0x54e8e9(0xcf)](gl[_0x54e8e9(0x119)](program,_0x54e8e9(0xda)),gameHeight/gl[_0x54e8e9(0x10a)]['height']);}function a0_0x5a47(){const _0x36e458=['uniform1f','devicePixelRatio','102125PaBTkn','TEXTURE_WRAP_S','floor','getItem','transform','top\x20center','WebGL2\x20not\x20supported','fefs','enableVertexAttribArray','smooth_height','texImage2D','warm','addEventListener','./src/shaders/fragmentShader.glsl','documentElement','8SuISnt','createShader','smooth_width','VERTEX_SHADER','1062upwVEO','zoom','setItem','add','scale(','99PtVZwu','485WnRbgV','shaderSource','STATIC_DRAW','6512244zgKmeF','imageSmoothingEnabled','COLOR_BUFFER_BIT','bufferData','vertexAttribPointer','ARRAY_BUFFER','clientWidth','bindBuffer','.setting-container','text','_temperature','DOMContentLoaded','deleteShader','getPixelData','.bin','12gNNiJW','createTexture','getElementById','_streng','./src/shaders/vertexShader.glsl','UNSIGNED_BYTE','then','style','10jCYnIF','canvas-container','viewport','error','img-shader','TEXTURE_WRAP_T','canvas','forEach','getContext','px\x20','transformOrigin','.message-container','webgl2','0,0,','texParameteri','remove','FLOAT','textured','clearRect','718610QUGnwn','clear','getUniformLocation','imageRendering','height','drawImage','RGBA','compileShader','attachShader','arrayBuffer','drawArrays','createBuffer','querySelectorAll','NEAREST','COMPILE_STATUS','TEXTURE_2D','1808506TCMtND','bindTexture','gbc','texcoord','.stateTitle,\x20.stateDate','4.0','crisp-edges','game_size','65GcmhOm','TEXTURE_MIN_FILTER','getShaderParameter','6125832yZzvYY','275739NZLSmk','createProgram','width','--bg-size','screenSize'];a0_0x5a47=function(){return _0x36e458;};return a0_0x5a47();}function setupBuffers(){const _0x5d25e5=a0_0x34117d,_0x4ef1e0=gl[_0x5d25e5(0x122)]();gl[_0x5d25e5(0xf4)](gl[_0x5d25e5(0xf2)],_0x4ef1e0),gl[_0x5d25e5(0xf0)](gl[_0x5d25e5(0xf2)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x2f8614=gl['getAttribLocation'](program,'position');gl[_0x5d25e5(0xd9)](_0x2f8614),gl[_0x5d25e5(0xf1)](_0x2f8614,0x2,gl['FLOAT'],![],0x0,0x0);const _0x5b707e=gl[_0x5d25e5(0x122)]();gl[_0x5d25e5(0xf4)](gl[_0x5d25e5(0xf2)],_0x5b707e),gl[_0x5d25e5(0xf0)](gl[_0x5d25e5(0xf2)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x5d25e5(0xec)]);const _0x394e83=gl['getAttribLocation'](program,_0x5d25e5(0xc1));gl['enableVertexAttribArray'](_0x394e83),gl['vertexAttribPointer'](_0x394e83,0x2,gl[_0x5d25e5(0x114)],![],0x0,0x0);}async function renderPixel(_0x1b4bb6){const _0x3ea087=a0_0x34117d,_0x1e2d5e=a0_0x42f3ff[_0x3ea087(0xfa)]();if(!_0x1e2d5e)return;await loadLUT64();const _0x2c1562=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x22259c=0x0;_0x22259c<gameHeight;_0x22259c++){for(let _0x34423e=0x0;_0x34423e<gameWidth;_0x34423e++){const _0x4adba4=_0x22259c*gameStride+_0x34423e,_0x42b7a4=(_0x22259c*gameWidth+_0x34423e)*0x4,_0x5922d0=_0x1e2d5e[_0x4adba4],_0x243877=(_0x5922d0&0xff)>>0x2,_0x576a77=(_0x5922d0>>0x8&0xff)>>0x2,_0x3ac6c1=(_0x5922d0>>0x10&0xff)>>0x2,_0x1a1945=(_0x243877*0x40*0x40+_0x576a77*0x40+_0x3ac6c1)*0x3;_0x2c1562[_0x42b7a4]=lut64[_0x1a1945],_0x2c1562[_0x42b7a4+0x1]=lut64[_0x1a1945+0x1],_0x2c1562[_0x42b7a4+0x2]=lut64[_0x1a1945+0x2],_0x2c1562[_0x42b7a4+0x3]=0xff;}}if(_0x1b4bb6===_0x3ea087(0x110))gl[_0x3ea087(0xbf)](gl[_0x3ea087(0x126)],texture),gl[_0x3ea087(0xdb)](gl[_0x3ea087(0x126)],0x0,gl[_0x3ea087(0x11d)],gameWidth,gameHeight,0x0,gl[_0x3ea087(0x11d)],gl[_0x3ea087(0x101)],_0x2c1562),gl[_0x3ea087(0x118)](gl[_0x3ea087(0xef)]),gl[_0x3ea087(0x121)](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x1b4bb6==='2d'){ctx2d=bufferCanvas[_0x3ea087(0x10c)]('2d'),ctx2d[_0x3ea087(0xee)]=![];const _0x573839=new ImageData(_0x2c1562,gameWidth,gameHeight);createImageBitmap(_0x573839)[_0x3ea087(0x102)](_0x12482d=>{const _0x1b49c7=_0x3ea087;ctx2d[_0x1b49c7(0x116)](0x0,0x0,bufferCanvas[_0x1b49c7(0xcc)],bufferCanvas['height']),ctx2d[_0x1b49c7(0x11c)](_0x12482d,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x1b4bb6));}export async function switchRenderMode(_0x45cb6c){const _0x393827=a0_0x34117d;systemType=gameName['slice'](-0x3);if(_0x45cb6c==='2d')setupStyle('2d'),renderPixel('2d');else _0x45cb6c===_0x393827(0x110)&&(setupStyle(_0x393827(0x110)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x34117d(0xdd)](a0_0x34117d(0xf8),function(){});