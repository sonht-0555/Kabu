(function(_0x372d5b,_0xd99acd){const _0x1191a3=a0_0x60da,_0xb4aa64=_0x372d5b();while(!![]){try{const _0xae1379=-parseInt(_0x1191a3(0xef))/0x1+-parseInt(_0x1191a3(0xfe))/0x2*(-parseInt(_0x1191a3(0x120))/0x3)+-parseInt(_0x1191a3(0xf0))/0x4*(-parseInt(_0x1191a3(0x102))/0x5)+parseInt(_0x1191a3(0x111))/0x6*(-parseInt(_0x1191a3(0x101))/0x7)+-parseInt(_0x1191a3(0x115))/0x8*(parseInt(_0x1191a3(0x116))/0x9)+parseInt(_0x1191a3(0x11e))/0xa+parseInt(_0x1191a3(0x10e))/0xb*(parseInt(_0x1191a3(0xfa))/0xc);if(_0xae1379===_0xd99acd)break;else _0xb4aa64['push'](_0xb4aa64['shift']());}catch(_0x25d86b){_0xb4aa64['push'](_0xb4aa64['shift']());}}}(a0_0x1ea3,0x90dcc));function a0_0x1ea3(){const _0xeeeedc=['1969690jYSZiI','TEXTURE_WRAP_T','255CMGrgA','getUniformLocation','putImageData','vertexAttribPointer','CLAMP_TO_EDGE','TEXTURE_2D','attachShader','linkProgram','log','texParameteri','bindBuffer','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','uniform2f','_4.0.bin','VERTEX_SHADER','data','viewport','NEAREST','FLOAT','RGBA','game_size','FRAGMENT_SHADER','height','1143388cQgNLl','8nnduwf','TEXTURE_MAG_FILTER','createBuffer','bindTexture','none','arrayBuffer','_temperature','smooth_width','clear','position','24468TlGopn','getContext','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','enableVertexAttribArray','20738rxmWLc','webgl_full','texcoord','7cCoKWV','1185335yNYVno','COLOR_BUFFER_BIT','./src/lut/lut64_','shaderSource','set','TRIANGLE_STRIP','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','createProgram','UNSIGNED_BYTE','ARRAY_BUFFER','uniform1f','webgl','5731jaJWHa','STATIC_DRAW','clearRect','3253386ixOJlm','render_size','getPixelData','getAttribLocation','72608ydBauD','333MmSVTh','bufferData','slice','low-power','toLowerCase','canvas','width','createTexture'];a0_0x1ea3=function(){return _0xeeeedc;};return a0_0x1ea3();}import*as a0_0x2e436e from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x3bb8f3=a0_0x60da;systemType=gameName[_0x3bb8f3(0x118)](-0x3);const _0x5de257=(localStorage['getItem'](gameName+_0x3bb8f3(0xf6))||_0x3bb8f3(0xf4))[_0x3bb8f3(0x11a)]();if(!lut64||lut64Profile!==_0x5de257){const _0x118ca9=_0x3bb8f3(0x104)+_0x5de257+_0x3bb8f3(0x12d);console[_0x3bb8f3(0x128)](_0x118ca9);const _0x413ed8=await fetch(_0x118ca9),_0x34002a=await _0x413ed8[_0x3bb8f3(0xf5)]();lut64=new Uint8Array(_0x34002a),lut64Profile=_0x5de257;}}function setupWebGL_Shader(_0x611165){const _0x5c1954=a0_0x60da;gl=bufferCanvas['getContext'](_0x5c1954(0x10d),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x5c1954(0x119)}),gl[_0x5c1954(0x130)](0x0,0x0,bufferCanvas[_0x5c1954(0x11c)],bufferCanvas[_0x5c1954(0xee)]);function _0x257574(_0x5c6feb,_0x10850d){const _0x4883cd=_0x5c1954,_0x38c539=gl['createShader'](_0x5c6feb);return gl[_0x4883cd(0x105)](_0x38c539,_0x10850d),gl['compileShader'](_0x38c539),_0x38c539;}vs=_0x5c1954(0xfc);if(_0x611165===_0x5c1954(0x10d))fs=_0x5c1954(0x12b);else _0x611165===_0x5c1954(0xff)&&(fs=_0x5c1954(0x108));const _0x1d17d9=_0x257574(gl[_0x5c1954(0x12e)],vs),_0xd2f3a=_0x257574(gl[_0x5c1954(0xed)],fs);return program=gl[_0x5c1954(0x109)](),gl[_0x5c1954(0x126)](program,_0x1d17d9),gl[_0x5c1954(0x126)](program,_0xd2f3a),gl[_0x5c1954(0x127)](program),gl['useProgram'](program),program;}function a0_0x60da(_0x4fd20b,_0x3ed2a){const _0x1ea3a0=a0_0x1ea3();return a0_0x60da=function(_0x60dad4,_0x139c37){_0x60dad4=_0x60dad4-0xea;let _0x418e67=_0x1ea3a0[_0x60dad4];return _0x418e67;},a0_0x60da(_0x4fd20b,_0x3ed2a);}function setupTexture_Buffer(_0x438404){const _0x105fd2=a0_0x60da;texture=gl[_0x105fd2(0x11d)](),gl[_0x105fd2(0xf3)](gl['TEXTURE_2D'],texture),gl[_0x105fd2(0x129)](gl[_0x105fd2(0x125)],gl['TEXTURE_MIN_FILTER'],gl[_0x105fd2(0x131)]),gl[_0x105fd2(0x129)](gl[_0x105fd2(0x125)],gl[_0x105fd2(0xf1)],gl['NEAREST']),gl[_0x105fd2(0x129)](gl[_0x105fd2(0x125)],gl['TEXTURE_WRAP_S'],gl[_0x105fd2(0x124)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x105fd2(0x11f)],gl['CLAMP_TO_EDGE']);_0x438404===_0x105fd2(0xff)&&(gl[_0x105fd2(0x12c)](gl[_0x105fd2(0x121)](program,_0x105fd2(0xec)),gameWidth,gameHeight),gl[_0x105fd2(0x12c)](gl[_0x105fd2(0x121)](program,_0x105fd2(0x112)),gl['canvas'][_0x105fd2(0x11c)],gl['canvas']['height']),gl[_0x105fd2(0x10c)](gl[_0x105fd2(0x121)](program,_0x105fd2(0xf7)),gameWidth/gl[_0x105fd2(0x11b)]['width']),gl[_0x105fd2(0x10c)](gl[_0x105fd2(0x121)](program,'smooth_height'),gameHeight/gl[_0x105fd2(0x11b)][_0x105fd2(0xee)]));const _0x5cc0ad=gl[_0x105fd2(0xf2)]();gl[_0x105fd2(0x12a)](gl[_0x105fd2(0x10b)],_0x5cc0ad),gl['bufferData'](gl[_0x105fd2(0x10b)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x105fd2(0x10f)]),gl['vertexAttribPointer'](gl[_0x105fd2(0x114)](program,_0x105fd2(0xf9)),0x2,gl[_0x105fd2(0xea)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x105fd2(0x114)](program,_0x105fd2(0xf9)));const _0x3814fc=gl['createBuffer']();gl[_0x105fd2(0x12a)](gl[_0x105fd2(0x10b)],_0x3814fc),gl[_0x105fd2(0x117)](gl[_0x105fd2(0x10b)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']),gl[_0x105fd2(0x123)](gl['getAttribLocation'](program,'texcoord'),0x2,gl[_0x105fd2(0xea)],![],0x0,0x0),gl[_0x105fd2(0xfd)](gl[_0x105fd2(0x114)](program,_0x105fd2(0x100)));}function setup2DContext(){const _0x4607a1=a0_0x60da;ctx2d=bufferCanvas[_0x4607a1(0xfb)]('2d'),ctx2d['imageSmoothingEnabled']=![];}async function renderPixel(_0x511a38){const _0x3f9bd2=a0_0x60da,_0x180834=a0_0x2e436e[_0x3f9bd2(0x113)]();if(!_0x180834)return;await loadLUT64();const _0x4e1aa7=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2b914f=0x0;_0x2b914f<gameHeight;_0x2b914f++){for(let _0x369f3c=0x0;_0x369f3c<gameWidth;_0x369f3c++){const _0x13b0a3=_0x2b914f*gameStride+_0x369f3c,_0x14e9de=(_0x2b914f*gameWidth+_0x369f3c)*0x4,_0x454d0b=_0x180834[_0x13b0a3];if(lut64Profile===_0x3f9bd2(0xf4))_0x4e1aa7[_0x14e9de]=_0x454d0b&0xff,_0x4e1aa7[_0x14e9de+0x1]=_0x454d0b>>0x8&0xff,_0x4e1aa7[_0x14e9de+0x2]=_0x454d0b>>0x10&0xff,_0x4e1aa7[_0x14e9de+0x3]=0xff;else{const _0x52cc0f=(_0x454d0b&0xff)>>0x2,_0x1d1530=(_0x454d0b>>0x8&0xff)>>0x2,_0x3d131a=(_0x454d0b>>0x10&0xff)>>0x2,_0x477b2c=(_0x52cc0f*0x40*0x40+_0x1d1530*0x40+_0x3d131a)*0x3;_0x4e1aa7[_0x14e9de]=lut64[_0x477b2c],_0x4e1aa7[_0x14e9de+0x1]=lut64[_0x477b2c+0x1],_0x4e1aa7[_0x14e9de+0x2]=lut64[_0x477b2c+0x2],_0x4e1aa7[_0x14e9de+0x3]=0xff;}}}if(_0x511a38===_0x3f9bd2(0x10d))gl['texImage2D'](gl[_0x3f9bd2(0x125)],0x0,gl[_0x3f9bd2(0xeb)],gameWidth,gameHeight,0x0,gl[_0x3f9bd2(0xeb)],gl[_0x3f9bd2(0x10a)],_0x4e1aa7),gl[_0x3f9bd2(0xf8)](gl[_0x3f9bd2(0x103)]),gl['drawArrays'](gl[_0x3f9bd2(0x107)],0x0,0x4);else _0x511a38==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x4e1aa7,gameWidth,gameHeight):imageDataObj[_0x3f9bd2(0x12f)][_0x3f9bd2(0x106)](_0x4e1aa7),ctx2d[_0x3f9bd2(0x110)](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']),ctx2d[_0x3f9bd2(0x122)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x511a38));}export async function switchRenderMode(_0x1dd280){const _0x1db4ae=a0_0x60da;systemType=gameName[_0x1db4ae(0x118)](-0x3);if(_0x1dd280==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x1dd280==='webgl')setupStyle('2d'),setupWebGL_Shader(_0x1db4ae(0x10d)),setupTexture_Buffer(_0x1db4ae(0x10d)),renderPixel(_0x1db4ae(0x10d));else _0x1dd280===_0x1db4ae(0xff)&&(setupStyle(_0x1db4ae(0xff)),setupWebGL_Shader(_0x1db4ae(0xff)),setupTexture_Buffer(_0x1db4ae(0xff)),renderPixel(_0x1db4ae(0x10d)));}}