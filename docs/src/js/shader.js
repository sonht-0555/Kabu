const a0_0x375bae=a0_0x3402;function a0_0x3402(_0x4fec73,_0x3847c7){const _0x1c5c63=a0_0x1c5c();return a0_0x3402=function(_0x34024e,_0x1e089c){_0x34024e=_0x34024e-0x108;let _0x42fa39=_0x1c5c63[_0x34024e];return _0x42fa39;},a0_0x3402(_0x4fec73,_0x3847c7);}function a0_0x1c5c(){const _0x583c8e=['width','UNSIGNED_BYTE','px\x20','TEXTURE_MIN_FILTER','setItem','canvas','_temperature','1494PvOruL','getElementById','crisp-edges','60360CoBNiQ','texParameteri','getContext','transformOrigin','CLAMP_TO_EDGE','TRIANGLE_STRIP','.setting-container','position','error','textured','_streng','render_size','img-shader','devicePixelRatio','8665013xdnEGo','imageSmoothingEnabled','getAttribLocation','bufferData','4albHxa','top\x20center','scale(','webgl2','smooth_height','ARRAY_BUFFER','FRAGMENT_SHADER','log','toLowerCase','drawArrays','clientWidth','viewport','FLOAT','imageRendering','setProperty','getShaderInfoLog','createTexture','screenSize','arrayBuffer','.stateTitle,\x20.stateDate','.message-container','bindBuffer','slice','transform','205wwHFic','./src/lut/lut64_','bindTexture','style','COMPILE_STATUS','TEXTURE_MAG_FILTER','COLOR_BUFFER_BIT','enableVertexAttribArray','getItem','TEXTURE_2D','height','addEventListener','4.0','0,0,','canvas-container','uniform1f','NEAREST','classList','remove','getPixelData','querySelectorAll','clear','uniform2f','173786ZbkDNL','5427750tdNVGZ','createBuffer','game_size','floor','forEach','1751649yXkoaE','WebGL2\x20not\x20supported','VERTEX_SHADER','87304MXakev','drawImage','vertexAttribPointer','20388vCFivI','7271CdfJOc','texImage2D','DOMContentLoaded','getUniformLocation','shaderSource','texcoord','8BpRoca','gbc','then','smooth_width','compileShader','zoom','getShaderParameter','./src/shaders/fragmentShader.glsl','--bg-size','./src/shaders/vertexShader.glsl','clearRect','fefs','STATIC_DRAW','attachShader','text'];a0_0x1c5c=function(){return _0x583c8e;};return a0_0x1c5c();}(function(_0x56a738,_0x42dc04){const _0x2bdbc5=a0_0x3402,_0x9115d4=_0x56a738();while(!![]){try{const _0x2368f0=-parseInt(_0x2bdbc5(0x135))/0x1*(-parseInt(_0x2bdbc5(0x164))/0x2)+-parseInt(_0x2bdbc5(0x16a))/0x3+-parseInt(_0x2bdbc5(0x16d))/0x4*(-parseInt(_0x2bdbc5(0x14d))/0x5)+-parseInt(_0x2bdbc5(0x165))/0x6+-parseInt(_0x2bdbc5(0x131))/0x7*(parseInt(_0x2bdbc5(0x10a))/0x8)+-parseInt(_0x2bdbc5(0x120))/0x9*(-parseInt(_0x2bdbc5(0x123))/0xa)+-parseInt(_0x2bdbc5(0x171))/0xb*(-parseInt(_0x2bdbc5(0x170))/0xc);if(_0x2368f0===_0x42dc04)break;else _0x9115d4['push'](_0x9115d4['shift']());}catch(_0x2917ae){_0x9115d4['push'](_0x9115d4['shift']());}}}(a0_0x1c5c,0x9c83e));import*as a0_0x57f3f1 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0x375bae(0x12c)),bufferCanvas=document[a0_0x375bae(0x121)](a0_0x375bae(0x11e)),canvasContainer=document['getElementById'](a0_0x375bae(0x15b)),imgShader=document[a0_0x375bae(0x121)](a0_0x375bae(0x12f)),settingContainer=document[a0_0x375bae(0x161)](a0_0x375bae(0x129)),messageContainer=document[a0_0x375bae(0x161)](a0_0x375bae(0x149)),stateTitle=document[a0_0x375bae(0x161)](a0_0x375bae(0x148));async function loadLUT64(){const _0x873be5=a0_0x375bae;systemType=gameName[_0x873be5(0x14b)](-0x3);const _0x26a6ca=localStorage[_0x873be5(0x155)](gameName+_0x873be5(0x12d))||_0x873be5(0x159),_0x22bd4d=(localStorage['getItem'](gameName+_0x873be5(0x11f))||'warm')[_0x873be5(0x13d)]();if(!lut64||lut64Streng!==_0x26a6ca||lut64Profile!==_0x22bd4d){const _0x344bc9=_0x873be5(0x14e)+_0x22bd4d+'_'+_0x26a6ca+'.bin';console[_0x873be5(0x13c)](_0x344bc9);const _0x5b8d52=await fetch(_0x344bc9),_0x172141=await _0x5b8d52[_0x873be5(0x147)]();lut64=new Uint8Array(_0x172141),lut64Streng=_0x26a6ca,lut64Profile=_0x22bd4d;}}async function loadShaderSource(_0x401264){const _0x4acb9c=a0_0x375bae,_0x2098db=await fetch(_0x401264);return await _0x2098db[_0x4acb9c(0x118)]();}function setupStyle(_0x16442a){const _0x4452d5=a0_0x375bae;clientWidth=document['documentElement'][_0x4452d5(0x13f)];const _0x5a4451=window[_0x4452d5(0x130)];systemType===_0x4452d5(0x10b)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x4452d5(0x168)](clientWidth*_0x5a4451/gameWidth),localStorage[_0x4452d5(0x11d)](_0x4452d5(0x146),_0x4452d5(0x15a)+gameWidth*(integerScaling/_0x5a4451)+','+gameHeight*(integerScaling/_0x5a4451))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x4452d5(0x168)](clientWidth*_0x5a4451/gameWidth),localStorage[_0x4452d5(0x11d)](_0x4452d5(0x146),'0,0,'+gameWidth*(integerScaling/_0x5a4451)+','+gameHeight*(integerScaling/_0x5a4451)));if(_0x16442a==='2d')bufferCanvas[_0x4452d5(0x119)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas['style'][_0x4452d5(0x10f)]=''+integerScaling/_0x5a4451,bufferCanvas[_0x4452d5(0x150)][_0x4452d5(0x142)]=_0x4452d5(0x122),canvasContainer['style']['width']=gameWidth*(integerScaling/_0x5a4451)+'px',canvasContainer['style'][_0x4452d5(0x157)]=gameHeight*(integerScaling/_0x5a4451)+'px',textured[_0x4452d5(0x150)][_0x4452d5(0x119)]=gameWidth*(integerScaling/_0x5a4451)+'px',textured[_0x4452d5(0x150)][_0x4452d5(0x157)]=gameHeight*(integerScaling/_0x5a4451)+'px',imgShader[_0x4452d5(0x150)][_0x4452d5(0x14c)]=_0x4452d5(0x137)+integerScaling/_0x5a4451/upscaleShader+')',settingContainer[_0x4452d5(0x169)](function(_0x43f6d6){const _0x47a672=_0x4452d5;_0x43f6d6[_0x47a672(0x150)][_0x47a672(0x119)]=gameWidth*(integerScaling/_0x5a4451)+'px',_0x43f6d6[_0x47a672(0x150)][_0x47a672(0x157)]=gameHeight*(integerScaling/_0x5a4451)+'px';}),messageContainer[_0x4452d5(0x169)](function(_0x4d24d6){const _0x497159=_0x4452d5;_0x4d24d6[_0x497159(0x150)][_0x497159(0x119)]=gameWidth+'px',_0x4d24d6[_0x497159(0x150)][_0x497159(0x157)]=gameHeight+'px',_0x4d24d6['style']['zoom']=''+integerScaling/_0x5a4451;}),stateTitle[_0x4452d5(0x169)](function(_0x1c14e7){const _0xd6a156=_0x4452d5;_0x1c14e7[_0xd6a156(0x15e)][_0xd6a156(0x15f)](_0xd6a156(0x115));});else _0x16442a===_0x4452d5(0x138)&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x4452d5(0x150)]['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x4452d5(0x150)]['imageRendering']='',canvasContainer['style'][_0x4452d5(0x119)]=clientWidth+'px',canvasContainer[_0x4452d5(0x150)][_0x4452d5(0x157)]=clientWidth*(gameHeight/gameWidth)+'px',textured['style']['width']=clientWidth+'px',textured[_0x4452d5(0x150)][_0x4452d5(0x157)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x4452d5(0x150)][_0x4452d5(0x14c)]=_0x4452d5(0x137)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x4452d5(0x169)](function(_0x31e998){const _0xe82b5b=_0x4452d5;_0x31e998[_0xe82b5b(0x150)]['width']=clientWidth+'px',_0x31e998[_0xe82b5b(0x150)][_0xe82b5b(0x157)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x4452d5(0x169)](function(_0x1a7ff3){const _0xd9f139=_0x4452d5;_0x1a7ff3['style'][_0xd9f139(0x119)]=gameWidth+'px',_0x1a7ff3[_0xd9f139(0x150)][_0xd9f139(0x157)]=gameHeight+'px',_0x1a7ff3['style']['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x4452d5(0x169)](function(_0x30c7c7){const _0x221c87=_0x4452d5;_0x30c7c7[_0x221c87(0x15e)]['add']('fefs');}));imgShader['style'][_0x4452d5(0x119)]=gameWidth*upscaleShader+'px',imgShader[_0x4452d5(0x150)][_0x4452d5(0x157)]=gameHeight*upscaleShader+'px',imgShader[_0x4452d5(0x150)][_0x4452d5(0x126)]=_0x4452d5(0x136),imgShader['style'][_0x4452d5(0x143)](_0x4452d5(0x112),upscaleShader+_0x4452d5(0x11b)+upscaleShader+'px');}function setupWebGL(){const _0x2a9b12=a0_0x375bae;gl=bufferCanvas[_0x2a9b12(0x125)](_0x2a9b12(0x138));if(!gl)return console['error'](_0x2a9b12(0x16b)),null;gl[_0x2a9b12(0x140)](0x0,0x0,bufferCanvas[_0x2a9b12(0x119)],bufferCanvas[_0x2a9b12(0x157)]);}function createShader(_0x41cc2a,_0x4ea778){const _0x29d425=a0_0x375bae,_0x32ab19=gl['createShader'](_0x41cc2a);gl[_0x29d425(0x108)](_0x32ab19,_0x4ea778),gl[_0x29d425(0x10e)](_0x32ab19);if(!gl[_0x29d425(0x110)](_0x32ab19,gl[_0x29d425(0x151)]))return console[_0x29d425(0x12b)](gl[_0x29d425(0x144)](_0x32ab19)),gl['deleteShader'](_0x32ab19),null;return _0x32ab19;}async function setupShaders(){const _0x5b7780=a0_0x375bae,_0xe856=await loadShaderSource(_0x5b7780(0x113)),_0x50f742=await loadShaderSource(_0x5b7780(0x111)),_0x2491ff=createShader(gl[_0x5b7780(0x16c)],_0xe856),_0x132cb4=createShader(gl[_0x5b7780(0x13b)],_0x50f742);return program=gl['createProgram'](),gl['attachShader'](program,_0x2491ff),gl[_0x5b7780(0x117)](program,_0x132cb4),gl['linkProgram'](program),gl['useProgram'](program),program;}function setupTexture(){const _0x56b42c=a0_0x375bae;texture=gl[_0x56b42c(0x145)](),gl[_0x56b42c(0x14f)](gl['TEXTURE_2D'],texture),gl[_0x56b42c(0x124)](gl[_0x56b42c(0x156)],gl[_0x56b42c(0x11c)],gl['NEAREST']),gl[_0x56b42c(0x124)](gl[_0x56b42c(0x156)],gl[_0x56b42c(0x152)],gl[_0x56b42c(0x15d)]),gl[_0x56b42c(0x124)](gl[_0x56b42c(0x156)],gl['TEXTURE_WRAP_S'],gl[_0x56b42c(0x127)]),gl[_0x56b42c(0x124)](gl[_0x56b42c(0x156)],gl['TEXTURE_WRAP_T'],gl[_0x56b42c(0x127)]),gl[_0x56b42c(0x163)](gl[_0x56b42c(0x174)](program,_0x56b42c(0x167)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x56b42c(0x174)](program,_0x56b42c(0x12e)),gl[_0x56b42c(0x11e)][_0x56b42c(0x119)],gl[_0x56b42c(0x11e)][_0x56b42c(0x157)]),gl[_0x56b42c(0x15c)](gl['getUniformLocation'](program,_0x56b42c(0x10d)),gameWidth/gl['canvas'][_0x56b42c(0x119)]),gl[_0x56b42c(0x15c)](gl[_0x56b42c(0x174)](program,_0x56b42c(0x139)),gameHeight/gl[_0x56b42c(0x11e)][_0x56b42c(0x157)]);}function setupBuffers(){const _0x4578f5=a0_0x375bae,_0x55b026=gl[_0x4578f5(0x166)]();gl['bindBuffer'](gl[_0x4578f5(0x13a)],_0x55b026),gl['bufferData'](gl[_0x4578f5(0x13a)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x4578f5(0x116)]);const _0x577580=gl[_0x4578f5(0x133)](program,_0x4578f5(0x12a));gl[_0x4578f5(0x154)](_0x577580),gl[_0x4578f5(0x16f)](_0x577580,0x2,gl[_0x4578f5(0x141)],![],0x0,0x0);const _0x27254f=gl[_0x4578f5(0x166)]();gl[_0x4578f5(0x14a)](gl[_0x4578f5(0x13a)],_0x27254f),gl[_0x4578f5(0x134)](gl[_0x4578f5(0x13a)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4578f5(0x116)]);const _0x4fe3a0=gl[_0x4578f5(0x133)](program,_0x4578f5(0x109));gl[_0x4578f5(0x154)](_0x4fe3a0),gl[_0x4578f5(0x16f)](_0x4fe3a0,0x2,gl[_0x4578f5(0x141)],![],0x0,0x0);}async function renderPixel(_0x3ab442){const _0x2f4ece=a0_0x375bae,_0x3f4dfb=a0_0x57f3f1[_0x2f4ece(0x160)]();if(!_0x3f4dfb)return;await loadLUT64();const _0x3279a0=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1f2f90=0x0;_0x1f2f90<gameHeight;_0x1f2f90++){for(let _0x308f68=0x0;_0x308f68<gameWidth;_0x308f68++){const _0x59eab5=_0x1f2f90*gameStride+_0x308f68,_0x4ecb5b=(_0x1f2f90*gameWidth+_0x308f68)*0x4,_0x20b1fd=_0x3f4dfb[_0x59eab5],_0x2b8fc7=(_0x20b1fd&0xff)>>0x2,_0x198bbf=(_0x20b1fd>>0x8&0xff)>>0x2,_0x2796f7=(_0x20b1fd>>0x10&0xff)>>0x2,_0x3c8e8a=(_0x2b8fc7*0x40*0x40+_0x198bbf*0x40+_0x2796f7)*0x3;_0x3279a0[_0x4ecb5b]=lut64[_0x3c8e8a],_0x3279a0[_0x4ecb5b+0x1]=lut64[_0x3c8e8a+0x1],_0x3279a0[_0x4ecb5b+0x2]=lut64[_0x3c8e8a+0x2],_0x3279a0[_0x4ecb5b+0x3]=0xff;}}if(_0x3ab442===_0x2f4ece(0x138))gl[_0x2f4ece(0x14f)](gl[_0x2f4ece(0x156)],texture),gl[_0x2f4ece(0x172)](gl['TEXTURE_2D'],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x2f4ece(0x11a)],_0x3279a0),gl[_0x2f4ece(0x162)](gl[_0x2f4ece(0x153)]),gl[_0x2f4ece(0x13e)](gl[_0x2f4ece(0x128)],0x0,0x4);else{if(_0x3ab442==='2d'){ctx2d=bufferCanvas[_0x2f4ece(0x125)]('2d'),ctx2d[_0x2f4ece(0x132)]=![];const _0x4d5d6b=new ImageData(_0x3279a0,gameWidth,gameHeight);createImageBitmap(_0x4d5d6b)[_0x2f4ece(0x10c)](_0x256cac=>{const _0x28f352=_0x2f4ece;ctx2d[_0x28f352(0x114)](0x0,0x0,bufferCanvas[_0x28f352(0x119)],bufferCanvas[_0x28f352(0x157)]),ctx2d[_0x28f352(0x16e)](_0x256cac,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x3ab442));}export async function switchRenderMode(_0xea2a56){const _0x188ac8=a0_0x375bae;systemType=gameName[_0x188ac8(0x14b)](-0x3);if(_0xea2a56==='2d')setupStyle('2d'),renderPixel('2d');else _0xea2a56===_0x188ac8(0x138)&&(setupStyle(_0x188ac8(0x138)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x375bae(0x158)](a0_0x375bae(0x173),function(){});