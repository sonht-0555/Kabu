const a0_0x33cca0=a0_0x1665;(function(_0x3818f0,_0x108f8e){const _0x4653bb=a0_0x1665,_0x4c81f2=_0x3818f0();while(!![]){try{const _0x547fbc=parseInt(_0x4653bb(0xa6))/0x1+parseInt(_0x4653bb(0x95))/0x2*(-parseInt(_0x4653bb(0x72))/0x3)+-parseInt(_0x4653bb(0xcd))/0x4*(parseInt(_0x4653bb(0x9c))/0x5)+parseInt(_0x4653bb(0x8f))/0x6+parseInt(_0x4653bb(0x81))/0x7*(parseInt(_0x4653bb(0x70))/0x8)+-parseInt(_0x4653bb(0xad))/0x9+parseInt(_0x4653bb(0xba))/0xa;if(_0x547fbc===_0x108f8e)break;else _0x4c81f2['push'](_0x4c81f2['shift']());}catch(_0xe0a020){_0x4c81f2['push'](_0x4c81f2['shift']());}}}(a0_0x45e7,0x69df9));import*as a0_0x43b4c2 from'./main.js';function a0_0x45e7(){const _0x445902=['FLOAT','./src/shaders/fragmentShader.glsl','7794960DQThNu','style','getShaderParameter','setItem','position','img-shader','ARRAY_BUFFER','clearRect','bindBuffer','.message-container','useProgram','forEach','drawArrays','--bg-size','DOMContentLoaded','bufferData','createProgram','drawImage','webgl2','28pUrKsU','texcoord','compileShader','clientWidth','slice','4.0','text','761528oHubeb','gbc','123567TMvJxT','getAttribLocation','setProperty','_temperature','textured','scale(','arrayBuffer','TRIANGLE_STRIP','COLOR_BUFFER_BIT','remove','crisp-edges','./src/shaders/vertexShader.glsl','render_size','warm','0,0,','21guLsWJ','getPixelData','toLowerCase','addEventListener','deleteShader','TEXTURE_WRAP_T','data','getContext','texParameteri','createBuffer','then','documentElement','top\x20center','transformOrigin','1127172cJJVjS','TEXTURE_2D','devicePixelRatio','imageRendering','attachShader','WebGL2\x20not\x20supported','26afEacx','getElementById','px\x20','FRAGMENT_SHADER','getUniformLocation','.setting-container','floor','11030JksnyJ','height','STATIC_DRAW','close','TEXTURE_MIN_FILTER','error','CLAMP_TO_EDGE','canvas','zoom','shaderSource','123690vuwFDw','UNSIGNED_BYTE','width','screenSize','vertexAttribPointer','set','bindTexture','3528585XpXTLy','fefs','./src/lut/lut64_','RGBA','getItem','querySelectorAll','classList','uniform1f','NEAREST','uniform2f','createTexture'];a0_0x45e7=function(){return _0x445902;};return a0_0x45e7();}let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0x33cca0(0x76)),bufferCanvas=document[a0_0x33cca0(0x96)](a0_0x33cca0(0xa3)),canvasContainer=document[a0_0x33cca0(0x96)]('canvas-container'),imgShader=document['getElementById'](a0_0x33cca0(0xbf)),settingContainer=document[a0_0x33cca0(0xb2)](a0_0x33cca0(0x9a)),messageContainer=document[a0_0x33cca0(0xb2)](a0_0x33cca0(0xc3)),stateTitle=document[a0_0x33cca0(0xb2)]('.stateTitle,\x20.stateDate');let imageDataObj=null;async function loadLUT64(){const _0x1945f4=a0_0x33cca0;systemType=gameName[_0x1945f4(0x6d)](-0x3);const _0x5ec464=localStorage[_0x1945f4(0xb1)](gameName+'_streng')||_0x1945f4(0x6e),_0x17b205=(localStorage[_0x1945f4(0xb1)](gameName+_0x1945f4(0x75))||_0x1945f4(0x7f))[_0x1945f4(0x83)]();if(!lut64||lut64Streng!==_0x5ec464||lut64Profile!==_0x17b205){const _0x2596d3=_0x1945f4(0xaf)+_0x17b205+'_'+_0x5ec464+'.bin';console['log'](_0x2596d3);const _0x3dcc9e=await fetch(_0x2596d3),_0x331d7f=await _0x3dcc9e[_0x1945f4(0x78)]();lut64=new Uint8Array(_0x331d7f),lut64Streng=_0x5ec464,lut64Profile=_0x17b205;}}function a0_0x1665(_0x4dd14a,_0x337153){const _0x45e7ad=a0_0x45e7();return a0_0x1665=function(_0x1665a1,_0x1bf6e1){_0x1665a1=_0x1665a1-0x6a;let _0x33f85f=_0x45e7ad[_0x1665a1];return _0x33f85f;},a0_0x1665(_0x4dd14a,_0x337153);}async function loadShaderSource(_0x22a72c){const _0x734c3d=a0_0x33cca0,_0x2c9b3a=await fetch(_0x22a72c);return await _0x2c9b3a[_0x734c3d(0x6f)]();}function setupStyle(_0x1570aa){const _0x540085=a0_0x33cca0;clientWidth=document[_0x540085(0x8c)][_0x540085(0x6c)];const _0x60ae40=window[_0x540085(0x91)];systemType===_0x540085(0x71)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x540085(0x9b)](clientWidth*_0x60ae40/gameWidth),localStorage['setItem'](_0x540085(0xa9),_0x540085(0x80)+gameWidth*(integerScaling/_0x60ae40)+','+gameHeight*(integerScaling/_0x60ae40))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x60ae40/gameWidth),localStorage[_0x540085(0xbd)]('screenSize','0,0,'+gameWidth*(integerScaling/_0x60ae40)+','+gameHeight*(integerScaling/_0x60ae40)));if(_0x1570aa==='2d')bufferCanvas[_0x540085(0xa8)]=gameWidth,bufferCanvas[_0x540085(0x9d)]=gameHeight,bufferCanvas[_0x540085(0xbb)][_0x540085(0xa4)]=''+integerScaling/_0x60ae40,bufferCanvas[_0x540085(0xbb)][_0x540085(0x92)]=_0x540085(0x7c),canvasContainer[_0x540085(0xbb)]['width']=gameWidth*(integerScaling/_0x60ae40)+'px',canvasContainer['style'][_0x540085(0x9d)]=gameHeight*(integerScaling/_0x60ae40)+'px',textured[_0x540085(0xbb)][_0x540085(0xa8)]=gameWidth*(integerScaling/_0x60ae40)+'px',textured[_0x540085(0xbb)][_0x540085(0x9d)]=gameHeight*(integerScaling/_0x60ae40)+'px',imgShader[_0x540085(0xbb)]['transform']=_0x540085(0x77)+integerScaling/_0x60ae40/upscaleShader+')',settingContainer['forEach'](function(_0xdaca45){const _0x2fe9e8=_0x540085;_0xdaca45[_0x2fe9e8(0xbb)]['width']=gameWidth*(integerScaling/_0x60ae40)+'px',_0xdaca45[_0x2fe9e8(0xbb)]['height']=gameHeight*(integerScaling/_0x60ae40)+'px';}),messageContainer['forEach'](function(_0xeeeb44){const _0x21e968=_0x540085;_0xeeeb44[_0x21e968(0xbb)][_0x21e968(0xa8)]=gameWidth+'px',_0xeeeb44[_0x21e968(0xbb)]['height']=gameHeight+'px',_0xeeeb44[_0x21e968(0xbb)][_0x21e968(0xa4)]=''+integerScaling/_0x60ae40;}),stateTitle[_0x540085(0xc5)](function(_0x54f8a2){const _0x1b72e0=_0x540085;_0x54f8a2[_0x1b72e0(0xb3)][_0x1b72e0(0x7b)](_0x1b72e0(0xae));});else _0x1570aa===_0x540085(0xcc)&&(bufferCanvas[_0x540085(0xa8)]=clientWidth*upscaleFactor,bufferCanvas[_0x540085(0x9d)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x540085(0xbb)][_0x540085(0xa4)]=''+0x1/upscaleFactor,bufferCanvas[_0x540085(0xbb)][_0x540085(0x92)]='',canvasContainer[_0x540085(0xbb)][_0x540085(0xa8)]=clientWidth+'px',canvasContainer['style'][_0x540085(0x9d)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x540085(0xbb)]['width']=clientWidth+'px',textured[_0x540085(0xbb)][_0x540085(0x9d)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x540085(0xbb)]['transform']=_0x540085(0x77)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x540085(0xc5)](function(_0x299ba2){const _0x1abc5b=_0x540085;_0x299ba2[_0x1abc5b(0xbb)][_0x1abc5b(0xa8)]=clientWidth+'px',_0x299ba2['style']['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x540085(0xc5)](function(_0x403acb){const _0x3ab43a=_0x540085;_0x403acb[_0x3ab43a(0xbb)]['width']=gameWidth+'px',_0x403acb[_0x3ab43a(0xbb)][_0x3ab43a(0x9d)]=gameHeight+'px',_0x403acb['style']['zoom']=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x44d7c7){const _0x12401f=_0x540085;_0x44d7c7[_0x12401f(0xb3)]['add'](_0x12401f(0xae));}));imgShader[_0x540085(0xbb)][_0x540085(0xa8)]=gameWidth*upscaleShader+'px',imgShader['style'][_0x540085(0x9d)]=gameHeight*upscaleShader+'px',imgShader[_0x540085(0xbb)][_0x540085(0x8e)]=_0x540085(0x8d),imgShader[_0x540085(0xbb)][_0x540085(0x74)](_0x540085(0xc7),upscaleShader+_0x540085(0x97)+upscaleShader+'px');}function setupWebGL(){const _0x4a7096=a0_0x33cca0;gl=bufferCanvas['getContext'](_0x4a7096(0xcc));if(!gl)return console[_0x4a7096(0xa1)](_0x4a7096(0x94)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x4a7096(0xa8)],bufferCanvas[_0x4a7096(0x9d)]);}function createShader(_0x1e1476,_0x55b410){const _0xec8b00=a0_0x33cca0,_0x27d837=gl['createShader'](_0x1e1476);gl[_0xec8b00(0xa5)](_0x27d837,_0x55b410),gl[_0xec8b00(0x6b)](_0x27d837);if(!gl[_0xec8b00(0xbc)](_0x27d837,gl['COMPILE_STATUS']))return console[_0xec8b00(0xa1)](gl['getShaderInfoLog'](_0x27d837)),gl[_0xec8b00(0x85)](_0x27d837),null;return _0x27d837;}async function setupShaders(){const _0x3cb2e7=a0_0x33cca0,_0x1c8e74=await loadShaderSource(_0x3cb2e7(0x7d)),_0x1af404=await loadShaderSource(_0x3cb2e7(0xb9)),_0x3f5fb0=createShader(gl['VERTEX_SHADER'],_0x1c8e74),_0x419792=createShader(gl[_0x3cb2e7(0x98)],_0x1af404);return program=gl[_0x3cb2e7(0xca)](),gl[_0x3cb2e7(0x93)](program,_0x3f5fb0),gl[_0x3cb2e7(0x93)](program,_0x419792),gl['linkProgram'](program),gl[_0x3cb2e7(0xc4)](program),program;}function setupTexture(){const _0x7d6068=a0_0x33cca0;texture=gl[_0x7d6068(0xb7)](),gl['bindTexture'](gl[_0x7d6068(0x90)],texture),gl[_0x7d6068(0x89)](gl[_0x7d6068(0x90)],gl[_0x7d6068(0xa0)],gl[_0x7d6068(0xb5)]),gl['texParameteri'](gl[_0x7d6068(0x90)],gl['TEXTURE_MAG_FILTER'],gl['NEAREST']),gl[_0x7d6068(0x89)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0x7d6068(0xa2)]),gl[_0x7d6068(0x89)](gl[_0x7d6068(0x90)],gl[_0x7d6068(0x86)],gl['CLAMP_TO_EDGE']),gl[_0x7d6068(0xb6)](gl[_0x7d6068(0x99)](program,'game_size'),gameWidth,gameHeight),gl['uniform2f'](gl[_0x7d6068(0x99)](program,_0x7d6068(0x7e)),gl[_0x7d6068(0xa3)][_0x7d6068(0xa8)],gl[_0x7d6068(0xa3)]['height']),gl[_0x7d6068(0xb4)](gl[_0x7d6068(0x99)](program,'smooth_width'),gameWidth/gl[_0x7d6068(0xa3)][_0x7d6068(0xa8)]),gl[_0x7d6068(0xb4)](gl[_0x7d6068(0x99)](program,'smooth_height'),gameHeight/gl[_0x7d6068(0xa3)][_0x7d6068(0x9d)]);}function setupBuffers(){const _0x2a189f=a0_0x33cca0,_0x4b320f=gl[_0x2a189f(0x8a)]();gl['bindBuffer'](gl[_0x2a189f(0xc0)],_0x4b320f),gl['bufferData'](gl[_0x2a189f(0xc0)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x2a189f(0x9e)]);const _0x23b9d4=gl[_0x2a189f(0x73)](program,_0x2a189f(0xbe));gl['enableVertexAttribArray'](_0x23b9d4),gl['vertexAttribPointer'](_0x23b9d4,0x2,gl[_0x2a189f(0xb8)],![],0x0,0x0);const _0x2453d1=gl[_0x2a189f(0x8a)]();gl[_0x2a189f(0xc2)](gl[_0x2a189f(0xc0)],_0x2453d1),gl[_0x2a189f(0xc9)](gl[_0x2a189f(0xc0)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x2a189f(0x9e)]);const _0x2fcd32=gl[_0x2a189f(0x73)](program,_0x2a189f(0x6a));gl['enableVertexAttribArray'](_0x2fcd32),gl[_0x2a189f(0xaa)](_0x2fcd32,0x2,gl[_0x2a189f(0xb8)],![],0x0,0x0);}async function renderPixel(_0xde167e){const _0x388151=a0_0x33cca0,_0x51c4e6=a0_0x43b4c2[_0x388151(0x82)]();if(!_0x51c4e6)return;await loadLUT64();const _0x51f89f=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x32190b=0x0;_0x32190b<gameHeight;_0x32190b++){for(let _0x42b5de=0x0;_0x42b5de<gameWidth;_0x42b5de++){const _0x27a2d8=_0x32190b*gameStride+_0x42b5de,_0x3cf170=(_0x32190b*gameWidth+_0x42b5de)*0x4,_0x175752=_0x51c4e6[_0x27a2d8],_0x5a7cec=(_0x175752&0xff)>>0x2,_0x250f35=(_0x175752>>0x8&0xff)>>0x2,_0x563103=(_0x175752>>0x10&0xff)>>0x2,_0x3ffba4=(_0x5a7cec*0x40*0x40+_0x250f35*0x40+_0x563103)*0x3;_0x51f89f[_0x3cf170]=lut64[_0x3ffba4],_0x51f89f[_0x3cf170+0x1]=lut64[_0x3ffba4+0x1],_0x51f89f[_0x3cf170+0x2]=lut64[_0x3ffba4+0x2],_0x51f89f[_0x3cf170+0x3]=0xff;}}if(_0xde167e===_0x388151(0xcc))gl[_0x388151(0xac)](gl['TEXTURE_2D'],texture),gl['texImage2D'](gl[_0x388151(0x90)],0x0,gl[_0x388151(0xb0)],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x388151(0xa7)],_0x51f89f),gl['clear'](gl[_0x388151(0x7a)]),gl[_0x388151(0xc6)](gl[_0x388151(0x79)],0x0,0x4);else _0xde167e==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas[_0x388151(0x88)]('2d',{'willReadFrequently':!![]}),ctx2d['imageSmoothingEnabled']=![]),(!imageDataObj||imageDataObj[_0x388151(0xa8)]!==gameWidth||imageDataObj[_0x388151(0x9d)]!==gameHeight)&&(imageDataObj=new ImageData(gameWidth,gameHeight)),imageDataObj[_0x388151(0x87)][_0x388151(0xab)](_0x51f89f),createImageBitmap(imageDataObj)[_0x388151(0x8b)](_0x4e4d07=>{const _0x28b8b4=_0x388151;ctx2d[_0x28b8b4(0xc1)](0x0,0x0,bufferCanvas[_0x28b8b4(0xa8)],bufferCanvas[_0x28b8b4(0x9d)]),ctx2d[_0x28b8b4(0xcb)](_0x4e4d07,0x0,0x0),_0x4e4d07[_0x28b8b4(0x9f)]();}));requestAnimationFrame(()=>renderPixel(_0xde167e));}export async function switchRenderMode(_0x1bcae3){const _0x22ccf5=a0_0x33cca0;systemType=gameName[_0x22ccf5(0x6d)](-0x3);if(_0x1bcae3==='2d')setupStyle('2d'),renderPixel('2d');else _0x1bcae3===_0x22ccf5(0xcc)&&(setupStyle(_0x22ccf5(0xcc)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x22ccf5(0xcc)));}document[a0_0x33cca0(0x84)](a0_0x33cca0(0xc8),function(){});