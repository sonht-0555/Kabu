const a0_0x196559=a0_0x4a90;(function(_0x4b4521,_0x26986f){const _0xadc97=a0_0x4a90,_0x415baa=_0x4b4521();while(!![]){try{const _0x45b9d9=parseInt(_0xadc97(0x1dd))/0x1*(parseInt(_0xadc97(0x1be))/0x2)+parseInt(_0xadc97(0x1d2))/0x3+-parseInt(_0xadc97(0x1b8))/0x4+parseInt(_0xadc97(0x1e5))/0x5*(-parseInt(_0xadc97(0x204))/0x6)+-parseInt(_0xadc97(0x1bb))/0x7+-parseInt(_0xadc97(0x201))/0x8+-parseInt(_0xadc97(0x1b0))/0x9*(-parseInt(_0xadc97(0x1b3))/0xa);if(_0x45b9d9===_0x26986f)break;else _0x415baa['push'](_0x415baa['shift']());}catch(_0x3cec77){_0x415baa['push'](_0x415baa['shift']());}}}(a0_0x1514,0xd92fe));import*as a0_0x3e4fec from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x196559(0x1d0)](a0_0x196559(0x1fb)),bufferCanvas=document[a0_0x196559(0x1d0)](a0_0x196559(0x1dc)),canvasContainer=document[a0_0x196559(0x1d0)]('canvas-container'),imgShader=document[a0_0x196559(0x1d0)](a0_0x196559(0x1cc)),settingContainer=document[a0_0x196559(0x1af)](a0_0x196559(0x1b9)),messageContainer=document['querySelectorAll'](a0_0x196559(0x1c2)),stateTitle=document['querySelectorAll']('.stateTitle,\x20.stateDate');function a0_0x1514(){const _0x55fb5f=['TRIANGLE_STRIP','vertexAttribPointer','ARRAY_BUFFER','STATIC_DRAW','COMPILE_STATUS','uniform1f','floor','deleteShader','warm','textured','TEXTURE_MIN_FILTER','imageSmoothingEnabled','.bin','screenSize','clear','14127304rzEFAZ','height','crisp-edges','8257092khicHt','RGBA','getContext','FLOAT','slice','TEXTURE_WRAP_S','linkProgram','--bg-size','getPixelData','style','createProgram','_streng','forEach','texcoord','compileShader','width','4.0','DOMContentLoaded','querySelectorAll','32069547QZHOjl','createBuffer','transformOrigin','10fvJRNX','setProperty','COLOR_BUFFER_BIT','zoom','VERTEX_SHADER','4701476JZfvMq','.setting-container','smooth_height','4786929jPxzBZ','uniform2f','createTexture','234170lzqNzN','useProgram','bindTexture','viewport','.message-container','error','getItem','game_size','getAttribLocation','CLAMP_TO_EDGE','0,0,','scale(','TEXTURE_WRAP_T','devicePixelRatio','img-shader','smooth_width','remove','TEXTURE_MAG_FILTER','getElementById','transform','4172838RujprU','bindBuffer','webgl2','texParameteri','shaderSource','setItem','top\x20center','toLowerCase','./src/shaders/fragmentShader.glsl','px\x20','canvas','8MwgkoD','bufferData','UNSIGNED_BYTE','addEventListener','clientWidth','./src/lut/lut64_','WebGL2\x20not\x20supported','text','5ZxTyGa','getUniformLocation','classList','render_size','NEAREST','then','fefs','imageRendering','drawArrays','gbc','TEXTURE_2D','documentElement','attachShader'];a0_0x1514=function(){return _0x55fb5f;};return a0_0x1514();}function a0_0x4a90(_0x145ca0,_0x2ecb86){const _0x151437=a0_0x1514();return a0_0x4a90=function(_0x4a90bc,_0x4eb48c){_0x4a90bc=_0x4a90bc-0x1a8;let _0x52345d=_0x151437[_0x4a90bc];return _0x52345d;},a0_0x4a90(_0x145ca0,_0x2ecb86);}async function loadLUT64(){const _0x5b96dc=a0_0x196559;systemType=gameName[_0x5b96dc(0x208)](-0x3);const _0x36cd8b=localStorage[_0x5b96dc(0x1c4)](gameName+_0x5b96dc(0x1a8))||_0x5b96dc(0x1ad),_0x1104d5=(localStorage['getItem'](gameName+'_temperature')||_0x5b96dc(0x1fa))[_0x5b96dc(0x1d9)]();if(!lut64||lut64Streng!==_0x36cd8b||lut64Profile!==_0x1104d5){const _0x35ac8=_0x5b96dc(0x1e2)+_0x1104d5+'_'+_0x36cd8b+_0x5b96dc(0x1fe);console['log'](_0x35ac8);const _0x3410ca=await fetch(_0x35ac8),_0x599315=await _0x3410ca['arrayBuffer']();lut64=new Uint8Array(_0x599315),lut64Streng=_0x36cd8b,lut64Profile=_0x1104d5;}}async function loadShaderSource(_0xb75406){const _0xfb8f7e=a0_0x196559,_0x2d7d80=await fetch(_0xb75406);return await _0x2d7d80[_0xfb8f7e(0x1e4)]();}function setupStyle(_0x2a952f){const _0x7a0a2f=a0_0x196559;clientWidth=document[_0x7a0a2f(0x1f0)][_0x7a0a2f(0x1e1)];const _0x309a6c=window[_0x7a0a2f(0x1cb)];systemType===_0x7a0a2f(0x1ee)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x309a6c/gameWidth),localStorage[_0x7a0a2f(0x1d7)]('screenSize',_0x7a0a2f(0x1c8)+gameWidth*(integerScaling/_0x309a6c)+','+gameHeight*(integerScaling/_0x309a6c))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x7a0a2f(0x1f8)](clientWidth*_0x309a6c/gameWidth),localStorage[_0x7a0a2f(0x1d7)](_0x7a0a2f(0x1ff),_0x7a0a2f(0x1c8)+gameWidth*(integerScaling/_0x309a6c)+','+gameHeight*(integerScaling/_0x309a6c)));if(_0x2a952f==='2d')bufferCanvas['width']=gameWidth,bufferCanvas[_0x7a0a2f(0x202)]=gameHeight,bufferCanvas['style'][_0x7a0a2f(0x1b6)]=''+integerScaling/_0x309a6c,bufferCanvas[_0x7a0a2f(0x20d)][_0x7a0a2f(0x1ec)]=_0x7a0a2f(0x203),canvasContainer['style']['width']=gameWidth*(integerScaling/_0x309a6c)+'px',canvasContainer[_0x7a0a2f(0x20d)]['height']=gameHeight*(integerScaling/_0x309a6c)+'px',textured[_0x7a0a2f(0x20d)]['width']=gameWidth*(integerScaling/_0x309a6c)+'px',textured[_0x7a0a2f(0x20d)]['height']=gameHeight*(integerScaling/_0x309a6c)+'px',imgShader[_0x7a0a2f(0x20d)][_0x7a0a2f(0x1d1)]=_0x7a0a2f(0x1c9)+integerScaling/_0x309a6c/upscaleShader+')',settingContainer[_0x7a0a2f(0x1a9)](function(_0x47be05){const _0x56a705=_0x7a0a2f;_0x47be05[_0x56a705(0x20d)][_0x56a705(0x1ac)]=gameWidth*(integerScaling/_0x309a6c)+'px',_0x47be05[_0x56a705(0x20d)]['height']=gameHeight*(integerScaling/_0x309a6c)+'px';}),messageContainer['forEach'](function(_0x348844){const _0x5850e9=_0x7a0a2f;_0x348844[_0x5850e9(0x20d)][_0x5850e9(0x1ac)]=gameWidth+'px',_0x348844[_0x5850e9(0x20d)][_0x5850e9(0x202)]=gameHeight+'px',_0x348844[_0x5850e9(0x20d)][_0x5850e9(0x1b6)]=''+integerScaling/_0x309a6c;}),stateTitle[_0x7a0a2f(0x1a9)](function(_0x185655){const _0x1c200e=_0x7a0a2f;_0x185655[_0x1c200e(0x1e7)][_0x1c200e(0x1ce)]('fefs');});else _0x2a952f===_0x7a0a2f(0x1d4)&&(bufferCanvas[_0x7a0a2f(0x1ac)]=clientWidth*upscaleFactor,bufferCanvas[_0x7a0a2f(0x202)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x7a0a2f(0x20d)][_0x7a0a2f(0x1b6)]=''+0x1/upscaleFactor,bufferCanvas['style'][_0x7a0a2f(0x1ec)]='',canvasContainer[_0x7a0a2f(0x20d)][_0x7a0a2f(0x1ac)]=clientWidth+'px',canvasContainer[_0x7a0a2f(0x20d)][_0x7a0a2f(0x202)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x7a0a2f(0x20d)][_0x7a0a2f(0x1ac)]=clientWidth+'px',textured['style'][_0x7a0a2f(0x202)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x7a0a2f(0x20d)][_0x7a0a2f(0x1d1)]=_0x7a0a2f(0x1c9)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x7a0a2f(0x1a9)](function(_0x284921){const _0x19ae60=_0x7a0a2f;_0x284921['style'][_0x19ae60(0x1ac)]=clientWidth+'px',_0x284921[_0x19ae60(0x20d)]['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x7a0a2f(0x1a9)](function(_0x34356a){const _0x4b0ec6=_0x7a0a2f;_0x34356a['style']['width']=gameWidth+'px',_0x34356a[_0x4b0ec6(0x20d)][_0x4b0ec6(0x202)]=gameHeight+'px',_0x34356a[_0x4b0ec6(0x20d)][_0x4b0ec6(0x1b6)]=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x22f446){const _0x51f924=_0x7a0a2f;_0x22f446[_0x51f924(0x1e7)]['add'](_0x51f924(0x1eb));}));imgShader['style'][_0x7a0a2f(0x1ac)]=gameWidth*upscaleShader+'px',imgShader[_0x7a0a2f(0x20d)][_0x7a0a2f(0x202)]=gameHeight*upscaleShader+'px',imgShader[_0x7a0a2f(0x20d)][_0x7a0a2f(0x1b2)]=_0x7a0a2f(0x1d8),imgShader['style'][_0x7a0a2f(0x1b4)](_0x7a0a2f(0x20b),upscaleShader+_0x7a0a2f(0x1db)+upscaleShader+'px');}function setupWebGL(){const _0x56828d=a0_0x196559;gl=bufferCanvas[_0x56828d(0x206)]('webgl2');if(!gl)return console[_0x56828d(0x1c3)](_0x56828d(0x1e3)),null;gl[_0x56828d(0x1c1)](0x0,0x0,bufferCanvas[_0x56828d(0x1ac)],bufferCanvas['height']);}function createShader(_0x1704ac,_0x5681c8){const _0xaf2bf4=a0_0x196559,_0xcd393b=gl['createShader'](_0x1704ac);gl[_0xaf2bf4(0x1d6)](_0xcd393b,_0x5681c8),gl[_0xaf2bf4(0x1ab)](_0xcd393b);if(!gl['getShaderParameter'](_0xcd393b,gl[_0xaf2bf4(0x1f6)]))return console['error'](gl['getShaderInfoLog'](_0xcd393b)),gl[_0xaf2bf4(0x1f9)](_0xcd393b),null;return _0xcd393b;}async function setupShaders(){const _0x5e89bc=a0_0x196559,_0x2caf6e=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x2d48eb=await loadShaderSource(_0x5e89bc(0x1da)),_0x272749=createShader(gl[_0x5e89bc(0x1b7)],_0x2caf6e),_0x51811c=createShader(gl['FRAGMENT_SHADER'],_0x2d48eb);return program=gl[_0x5e89bc(0x20e)](),gl[_0x5e89bc(0x1f1)](program,_0x272749),gl[_0x5e89bc(0x1f1)](program,_0x51811c),gl[_0x5e89bc(0x20a)](program),gl[_0x5e89bc(0x1bf)](program),program;}function setupTexture(){const _0x2350ba=a0_0x196559;texture=gl[_0x2350ba(0x1bd)](),gl['bindTexture'](gl[_0x2350ba(0x1ef)],texture),gl[_0x2350ba(0x1d5)](gl[_0x2350ba(0x1ef)],gl[_0x2350ba(0x1fc)],gl[_0x2350ba(0x1e9)]),gl['texParameteri'](gl[_0x2350ba(0x1ef)],gl[_0x2350ba(0x1cf)],gl[_0x2350ba(0x1e9)]),gl[_0x2350ba(0x1d5)](gl[_0x2350ba(0x1ef)],gl[_0x2350ba(0x209)],gl[_0x2350ba(0x1c7)]),gl[_0x2350ba(0x1d5)](gl[_0x2350ba(0x1ef)],gl[_0x2350ba(0x1ca)],gl[_0x2350ba(0x1c7)]),gl[_0x2350ba(0x1bc)](gl[_0x2350ba(0x1e6)](program,_0x2350ba(0x1c5)),gameWidth,gameHeight),gl[_0x2350ba(0x1bc)](gl[_0x2350ba(0x1e6)](program,_0x2350ba(0x1e8)),gl[_0x2350ba(0x1dc)]['width'],gl[_0x2350ba(0x1dc)][_0x2350ba(0x202)]),gl[_0x2350ba(0x1f7)](gl[_0x2350ba(0x1e6)](program,_0x2350ba(0x1cd)),gameWidth/gl[_0x2350ba(0x1dc)]['width']),gl[_0x2350ba(0x1f7)](gl[_0x2350ba(0x1e6)](program,_0x2350ba(0x1ba)),gameHeight/gl['canvas']['height']);}function setupBuffers(){const _0x51fba4=a0_0x196559,_0x22e94b=gl['createBuffer']();gl[_0x51fba4(0x1d3)](gl[_0x51fba4(0x1f4)],_0x22e94b),gl[_0x51fba4(0x1de)](gl[_0x51fba4(0x1f4)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x51fba4(0x1f5)]);const _0x20722b=gl[_0x51fba4(0x1c6)](program,'position');gl['enableVertexAttribArray'](_0x20722b),gl[_0x51fba4(0x1f3)](_0x20722b,0x2,gl[_0x51fba4(0x207)],![],0x0,0x0);const _0x2fc09f=gl[_0x51fba4(0x1b1)]();gl[_0x51fba4(0x1d3)](gl[_0x51fba4(0x1f4)],_0x2fc09f),gl['bufferData'](gl[_0x51fba4(0x1f4)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x51fba4(0x1f5)]);const _0x5610da=gl[_0x51fba4(0x1c6)](program,_0x51fba4(0x1aa));gl['enableVertexAttribArray'](_0x5610da),gl['vertexAttribPointer'](_0x5610da,0x2,gl[_0x51fba4(0x207)],![],0x0,0x0);}async function renderPixel(_0xbddcb1){const _0x43b95d=a0_0x196559,_0x4695a0=a0_0x3e4fec[_0x43b95d(0x20c)]();if(!_0x4695a0)return;await loadLUT64();const _0x538320=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x15242b=0x0;_0x15242b<gameHeight;_0x15242b++){for(let _0x2855d1=0x0;_0x2855d1<gameWidth;_0x2855d1++){const _0x356ce7=_0x15242b*gameStride+_0x2855d1,_0x533ef7=(_0x15242b*gameWidth+_0x2855d1)*0x4,_0x41d056=_0x4695a0[_0x356ce7],_0x46455e=(_0x41d056&0xff)>>0x2,_0x2cef2f=(_0x41d056>>0x8&0xff)>>0x2,_0x454325=(_0x41d056>>0x10&0xff)>>0x2,_0x2c35e3=(_0x46455e*0x40*0x40+_0x2cef2f*0x40+_0x454325)*0x3;_0x538320[_0x533ef7]=lut64[_0x2c35e3],_0x538320[_0x533ef7+0x1]=lut64[_0x2c35e3+0x1],_0x538320[_0x533ef7+0x2]=lut64[_0x2c35e3+0x2],_0x538320[_0x533ef7+0x3]=0xff;}}if(_0xbddcb1===_0x43b95d(0x1d4))gl[_0x43b95d(0x1c0)](gl['TEXTURE_2D'],texture),gl['texImage2D'](gl[_0x43b95d(0x1ef)],0x0,gl[_0x43b95d(0x205)],gameWidth,gameHeight,0x0,gl[_0x43b95d(0x205)],gl[_0x43b95d(0x1df)],_0x538320),gl[_0x43b95d(0x200)](gl[_0x43b95d(0x1b5)]),gl[_0x43b95d(0x1ed)](gl[_0x43b95d(0x1f2)],0x0,0x4);else{if(_0xbddcb1==='2d'){ctx2d=bufferCanvas[_0x43b95d(0x206)]('2d'),ctx2d[_0x43b95d(0x1fd)]=![];const _0x5ef804=new ImageData(_0x538320,gameWidth,gameHeight);createImageBitmap(_0x5ef804)[_0x43b95d(0x1ea)](_0x5704eb=>{const _0x56b5d7=_0x43b95d;ctx2d['clearRect'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x56b5d7(0x202)]),ctx2d['drawImage'](_0x5704eb,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0xbddcb1));}export async function switchRenderMode(_0x46a892){const _0x38a2e9=a0_0x196559;systemType=gameName[_0x38a2e9(0x208)](-0x3);if(_0x46a892==='2d')setupStyle('2d'),renderPixel('2d');else _0x46a892===_0x38a2e9(0x1d4)&&(setupStyle(_0x38a2e9(0x1d4)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x38a2e9(0x1d4)));}document[a0_0x196559(0x1e0)](a0_0x196559(0x1ae),function(){});