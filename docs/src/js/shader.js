const a0_0x3085d8=a0_0x3923;(function(_0x3a4547,_0x24dff5){const _0x56c076=a0_0x3923,_0x228678=_0x3a4547();while(!![]){try{const _0x5e9b7f=-parseInt(_0x56c076(0xff))/0x1*(-parseInt(_0x56c076(0xc5))/0x2)+-parseInt(_0x56c076(0xf9))/0x3*(parseInt(_0x56c076(0x100))/0x4)+parseInt(_0x56c076(0xfe))/0x5+parseInt(_0x56c076(0xbc))/0x6+parseInt(_0x56c076(0xdb))/0x7*(parseInt(_0x56c076(0xf1))/0x8)+parseInt(_0x56c076(0xdc))/0x9+parseInt(_0x56c076(0xee))/0xa*(-parseInt(_0x56c076(0x108))/0xb);if(_0x5e9b7f===_0x24dff5)break;else _0x228678['push'](_0x228678['shift']());}catch(_0x29a10a){_0x228678['push'](_0x228678['shift']());}}}(a0_0x28d9,0x574f1));import*as a0_0xcb7c92 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x3085d8(0xca)]('textured'),bufferCanvas=document['getElementById'](a0_0x3085d8(0xda)),canvasContainer=document['getElementById'](a0_0x3085d8(0xba)),imgShader=document[a0_0x3085d8(0xca)](a0_0x3085d8(0xd0)),settingContainer=document[a0_0x3085d8(0xa8)]('.setting-container'),messageContainer=document['querySelectorAll']('.message-container'),stateTitle=document[a0_0x3085d8(0xa8)](a0_0x3085d8(0xc3));async function loadLUT64(){const _0x23ab6c=a0_0x3085d8;systemType=gameName[_0x23ab6c(0xc2)](-0x3);const _0x379abe=localStorage['getItem'](gameName+_0x23ab6c(0xcc))||_0x23ab6c(0xcf),_0x263807=(localStorage[_0x23ab6c(0xa9)](gameName+_0x23ab6c(0xd9))||_0x23ab6c(0xef))[_0x23ab6c(0xb8)]();if(!lut64||lut64Streng!==_0x379abe||lut64Profile!==_0x263807){const _0x272c11=_0x23ab6c(0xd3)+_0x263807+'_'+_0x379abe+_0x23ab6c(0x101);console[_0x23ab6c(0x105)](_0x272c11);const _0x5b4ee0=await fetch(_0x272c11),_0x327afd=await _0x5b4ee0[_0x23ab6c(0xce)]();lut64=new Uint8Array(_0x327afd),lut64Streng=_0x379abe,lut64Profile=_0x263807;}}async function loadShaderSource(_0x559c6e){const _0x2480d7=a0_0x3085d8,_0x1a1040=await fetch(_0x559c6e);return await _0x1a1040[_0x2480d7(0xd1)]();}function setupStyle(_0x4f94d2){const _0x2c340d=a0_0x3085d8;clientWidth=document['documentElement'][_0x2c340d(0xe1)];const _0x5d839f=window[_0x2c340d(0xb4)];systemType===_0x2c340d(0xab)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x2c340d(0xf0)](clientWidth*_0x5d839f/gameWidth),localStorage[_0x2c340d(0xc1)](_0x2c340d(0xb1),_0x2c340d(0x103)+gameWidth*(integerScaling/_0x5d839f)+','+gameHeight*(integerScaling/_0x5d839f))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x2c340d(0xf0)](clientWidth*_0x5d839f/gameWidth),localStorage[_0x2c340d(0xc1)](_0x2c340d(0xb1),'0,0,'+gameWidth*(integerScaling/_0x5d839f)+','+gameHeight*(integerScaling/_0x5d839f)));if(_0x4f94d2==='2d')bufferCanvas[_0x2c340d(0xf6)]=gameWidth,bufferCanvas[_0x2c340d(0xac)]=gameHeight,bufferCanvas[_0x2c340d(0xcb)]['zoom']=''+integerScaling/_0x5d839f,bufferCanvas[_0x2c340d(0xcb)][_0x2c340d(0xb5)]='crisp-edges',canvasContainer[_0x2c340d(0xcb)][_0x2c340d(0xf6)]=gameWidth*(integerScaling/_0x5d839f)+'px',canvasContainer[_0x2c340d(0xcb)][_0x2c340d(0xac)]=gameHeight*(integerScaling/_0x5d839f)+'px',textured[_0x2c340d(0xcb)][_0x2c340d(0xf6)]=gameWidth*(integerScaling/_0x5d839f)+'px',textured[_0x2c340d(0xcb)][_0x2c340d(0xac)]=gameHeight*(integerScaling/_0x5d839f)+'px',imgShader['style'][_0x2c340d(0xc7)]=_0x2c340d(0xcd)+integerScaling/_0x5d839f/upscaleShader+')',settingContainer['forEach'](function(_0x15fb9f){const _0x1b3650=_0x2c340d;_0x15fb9f[_0x1b3650(0xcb)][_0x1b3650(0xf6)]=gameWidth*(integerScaling/_0x5d839f)+'px',_0x15fb9f['style'][_0x1b3650(0xac)]=gameHeight*(integerScaling/_0x5d839f)+'px';}),messageContainer['forEach'](function(_0x22d3b5){const _0x42ae87=_0x2c340d;_0x22d3b5[_0x42ae87(0xcb)]['width']=gameWidth+'px',_0x22d3b5['style'][_0x42ae87(0xac)]=gameHeight+'px',_0x22d3b5['style'][_0x42ae87(0xbb)]=''+integerScaling/_0x5d839f;}),stateTitle[_0x2c340d(0xb6)](function(_0xa0108){const _0x5bf9b7=_0x2c340d;_0xa0108[_0x5bf9b7(0xdd)][_0x5bf9b7(0x104)](_0x5bf9b7(0xb0));});else _0x4f94d2===_0x2c340d(0xc9)&&(bufferCanvas[_0x2c340d(0xf6)]=clientWidth*upscaleFactor,bufferCanvas[_0x2c340d(0xac)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x2c340d(0xbb)]=''+0x1/upscaleFactor,bufferCanvas[_0x2c340d(0xcb)][_0x2c340d(0xb5)]='',canvasContainer['style'][_0x2c340d(0xf6)]=clientWidth+'px',canvasContainer[_0x2c340d(0xcb)][_0x2c340d(0xac)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x2c340d(0xcb)][_0x2c340d(0xf6)]=clientWidth+'px',textured[_0x2c340d(0xcb)]['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x2c340d(0xcb)][_0x2c340d(0xc7)]=_0x2c340d(0xcd)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x2c340d(0xb6)](function(_0x359077){const _0x20deae=_0x2c340d;_0x359077['style'][_0x20deae(0xf6)]=clientWidth+'px',_0x359077[_0x20deae(0xcb)]['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x2c340d(0xb6)](function(_0x138399){const _0x462196=_0x2c340d;_0x138399['style'][_0x462196(0xf6)]=gameWidth+'px',_0x138399[_0x462196(0xcb)][_0x462196(0xac)]=gameHeight+'px',_0x138399[_0x462196(0xcb)]['zoom']=''+clientWidth/gameWidth;}),stateTitle[_0x2c340d(0xb6)](function(_0x69bff9){const _0x22b631=_0x2c340d;_0x69bff9['classList'][_0x22b631(0xd5)](_0x22b631(0xb0));}));imgShader['style'][_0x2c340d(0xf6)]=gameWidth*upscaleShader+'px',imgShader[_0x2c340d(0xcb)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x2c340d(0xcb)][_0x2c340d(0xd2)]='top\x20center',imgShader['style'][_0x2c340d(0xde)](_0x2c340d(0xe8),upscaleShader+_0x2c340d(0xf8)+upscaleShader+'px');}function setupWebGL(){const _0x4c893b=a0_0x3085d8;gl=bufferCanvas[_0x4c893b(0xd8)](_0x4c893b(0xc9));if(!gl)return console[_0x4c893b(0xc6)](_0x4c893b(0xd4)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x4c893b(0xf6)],bufferCanvas[_0x4c893b(0xac)]);}function createShader(_0x9e8877,_0x4d62f8){const _0x3a576f=a0_0x3085d8,_0x8a5ff9=gl[_0x3a576f(0xad)](_0x9e8877);gl['shaderSource'](_0x8a5ff9,_0x4d62f8),gl['compileShader'](_0x8a5ff9);if(!gl[_0x3a576f(0xbe)](_0x8a5ff9,gl[_0x3a576f(0xea)]))return console['error'](gl['getShaderInfoLog'](_0x8a5ff9)),gl[_0x3a576f(0xb7)](_0x8a5ff9),null;return _0x8a5ff9;}async function setupShaders(){const _0x4fd66a=a0_0x3085d8,_0x37bcd9=await loadShaderSource(_0x4fd66a(0xae)),_0x5be241=await loadShaderSource(_0x4fd66a(0x106)),_0x5bf5ba=createShader(gl[_0x4fd66a(0xe2)],_0x37bcd9),_0x31b62c=createShader(gl[_0x4fd66a(0xe0)],_0x5be241);return program=gl[_0x4fd66a(0x10c)](),gl[_0x4fd66a(0xe7)](program,_0x5bf5ba),gl['attachShader'](program,_0x31b62c),gl['linkProgram'](program),gl[_0x4fd66a(0xa7)](program),program;}function setupTexture(){const _0x23fe28=a0_0x3085d8;texture=gl[_0x23fe28(0x10a)](),gl[_0x23fe28(0xfa)](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl[_0x23fe28(0xfb)],gl[_0x23fe28(0xbf)],gl[_0x23fe28(0xe3)]),gl[_0x23fe28(0xc0)](gl[_0x23fe28(0xfb)],gl[_0x23fe28(0xf7)],gl[_0x23fe28(0xe3)]),gl[_0x23fe28(0xc0)](gl[_0x23fe28(0xfb)],gl[_0x23fe28(0x102)],gl[_0x23fe28(0xfc)]),gl['texParameteri'](gl[_0x23fe28(0xfb)],gl[_0x23fe28(0xbd)],gl[_0x23fe28(0xfc)]),gl[_0x23fe28(0xe6)](gl[_0x23fe28(0xf2)](program,_0x23fe28(0xd6)),gameWidth,gameHeight),gl[_0x23fe28(0xe6)](gl['getUniformLocation'](program,_0x23fe28(0xaf)),gl[_0x23fe28(0xda)]['width'],gl[_0x23fe28(0xda)][_0x23fe28(0xac)]),gl[_0x23fe28(0xc8)](gl[_0x23fe28(0xf2)](program,_0x23fe28(0xaa)),gameWidth/gl[_0x23fe28(0xda)][_0x23fe28(0xf6)]),gl[_0x23fe28(0xc8)](gl[_0x23fe28(0xf2)](program,_0x23fe28(0x10b)),gameHeight/gl[_0x23fe28(0xda)][_0x23fe28(0xac)]);}function a0_0x3923(_0x524730,_0x117c2a){const _0x28d9e4=a0_0x28d9();return a0_0x3923=function(_0x392315,_0x543532){_0x392315=_0x392315-0xa7;let _0x57fb74=_0x28d9e4[_0x392315];return _0x57fb74;},a0_0x3923(_0x524730,_0x117c2a);}function setupBuffers(){const _0x4923b3=a0_0x3085d8,_0x5a83e9=gl[_0x4923b3(0xc4)]();gl[_0x4923b3(0xdf)](gl[_0x4923b3(0xf5)],_0x5a83e9),gl[_0x4923b3(0xe5)](gl[_0x4923b3(0xf5)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x4923b3(0xeb)]);const _0x545d94=gl[_0x4923b3(0xf3)](program,_0x4923b3(0xfd));gl[_0x4923b3(0x107)](_0x545d94),gl[_0x4923b3(0x109)](_0x545d94,0x2,gl[_0x4923b3(0xb9)],![],0x0,0x0);const _0x53a006=gl['createBuffer']();gl['bindBuffer'](gl[_0x4923b3(0xf5)],_0x53a006),gl[_0x4923b3(0xe5)](gl[_0x4923b3(0xf5)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4923b3(0xeb)]);const _0x48da9c=gl[_0x4923b3(0xf3)](program,'texcoord');gl[_0x4923b3(0x107)](_0x48da9c),gl['vertexAttribPointer'](_0x48da9c,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0x2676b7){const _0x1c1ed2=a0_0x3085d8,_0x4de9f1=a0_0xcb7c92['getPixelData']();if(!_0x4de9f1)return;await loadLUT64();const _0x5532bf=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x581750=0x0;_0x581750<gameHeight;_0x581750++){for(let _0x1abecd=0x0;_0x1abecd<gameWidth;_0x1abecd++){const _0x2f220b=_0x581750*gameStride+_0x1abecd,_0x4c018f=(_0x581750*gameWidth+_0x1abecd)*0x4,_0x9b1293=_0x4de9f1[_0x2f220b],_0xbe6b0c=(_0x9b1293&0xff)>>0x2,_0x5d0e80=(_0x9b1293>>0x8&0xff)>>0x2,_0x195301=(_0x9b1293>>0x10&0xff)>>0x2,_0x5d19fa=(_0xbe6b0c*0x40*0x40+_0x5d0e80*0x40+_0x195301)*0x3;_0x5532bf[_0x4c018f]=lut64[_0x5d19fa],_0x5532bf[_0x4c018f+0x1]=lut64[_0x5d19fa+0x1],_0x5532bf[_0x4c018f+0x2]=lut64[_0x5d19fa+0x2],_0x5532bf[_0x4c018f+0x3]=0xff;}}if(_0x2676b7==='webgl2')gl[_0x1c1ed2(0xfa)](gl[_0x1c1ed2(0xfb)],texture),gl[_0x1c1ed2(0xe4)](gl[_0x1c1ed2(0xfb)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x1c1ed2(0xf4)],gl[_0x1c1ed2(0xe9)],_0x5532bf),gl['clear'](gl[_0x1c1ed2(0x10d)]),gl[_0x1c1ed2(0xec)](gl[_0x1c1ed2(0xb3)],0x0,0x4);else{if(_0x2676b7==='2d'){ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x1c1ed2(0xed)]=![];const _0x211669=new ImageData(_0x5532bf,gameWidth,gameHeight);createImageBitmap(_0x211669)['then'](_0x40be28=>{const _0x3bee2e=_0x1c1ed2;ctx2d[_0x3bee2e(0xb2)](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']),ctx2d['drawImage'](_0x40be28,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x2676b7));}export async function switchRenderMode(_0x5dc784){const _0x8ef5b3=a0_0x3085d8;systemType=gameName['slice'](-0x3);if(_0x5dc784==='2d')setupStyle('2d'),renderPixel('2d');else _0x5dc784===_0x8ef5b3(0xc9)&&(setupStyle(_0x8ef5b3(0xc9)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document[a0_0x3085d8(0xd7)]('DOMContentLoaded',function(){});function a0_0x28d9(){const _0x28f155=['createProgram','COLOR_BUFFER_BIT','useProgram','querySelectorAll','getItem','smooth_width','gbc','height','createShader','./src/shaders/vertexShader.glsl','render_size','fefs','screenSize','clearRect','TRIANGLE_STRIP','devicePixelRatio','imageRendering','forEach','deleteShader','toLowerCase','FLOAT','canvas-container','zoom','1468314rxJegA','TEXTURE_WRAP_T','getShaderParameter','TEXTURE_MIN_FILTER','texParameteri','setItem','slice','.stateTitle,\x20.stateDate','createBuffer','6EIhRTl','error','transform','uniform1f','webgl2','getElementById','style','_streng','scale(','arrayBuffer','4.0','img-shader','text','transformOrigin','./src/lut/lut64_','WebGL2\x20not\x20supported','add','game_size','addEventListener','getContext','_temperature','canvas','22281sMkklj','4755087JrgcKN','classList','setProperty','bindBuffer','FRAGMENT_SHADER','clientWidth','VERTEX_SHADER','NEAREST','texImage2D','bufferData','uniform2f','attachShader','--bg-size','UNSIGNED_BYTE','COMPILE_STATUS','STATIC_DRAW','drawArrays','imageSmoothingEnabled','10LBarax','warm','floor','1520xkKTJX','getUniformLocation','getAttribLocation','RGBA','ARRAY_BUFFER','width','TEXTURE_MAG_FILTER','px\x20','6SIiYmq','bindTexture','TEXTURE_2D','CLAMP_TO_EDGE','position','2815400HENIzZ','169308TFTial','475144jlGruy','.bin','TEXTURE_WRAP_S','0,0,','remove','log','./src/shaders/fragmentShader.glsl','enableVertexAttribArray','20390117Mywers','vertexAttribPointer','createTexture','smooth_height'];a0_0x28d9=function(){return _0x28f155;};return a0_0x28d9();}