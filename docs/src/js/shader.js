const a0_0x42f9c8=a0_0x5dcd;function a0_0x5dcd(_0x3615d1,_0x20255e){const _0x550098=a0_0x5500();return a0_0x5dcd=function(_0x5dcd9f,_0x52fbbe){_0x5dcd9f=_0x5dcd9f-0x92;let _0x1b7455=_0x550098[_0x5dcd9f];return _0x1b7455;},a0_0x5dcd(_0x3615d1,_0x20255e);}(function(_0x586a4a,_0x5c2133){const _0x3402b0=a0_0x5dcd,_0x541715=_0x586a4a();while(!![]){try{const _0x5a746e=parseInt(_0x3402b0(0xcc))/0x1*(parseInt(_0x3402b0(0xea))/0x2)+parseInt(_0x3402b0(0xa9))/0x3*(parseInt(_0x3402b0(0xf0))/0x4)+parseInt(_0x3402b0(0xd2))/0x5+-parseInt(_0x3402b0(0xc4))/0x6+parseInt(_0x3402b0(0xf7))/0x7+parseInt(_0x3402b0(0xd0))/0x8*(-parseInt(_0x3402b0(0xde))/0x9)+parseInt(_0x3402b0(0xc9))/0xa*(-parseInt(_0x3402b0(0xd8))/0xb);if(_0x5a746e===_0x5c2133)break;else _0x541715['push'](_0x541715['shift']());}catch(_0x1177c7){_0x541715['push'](_0x541715['shift']());}}}(a0_0x5500,0x990b6));import*as a0_0x3de341 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x42f9c8(0xa5)](a0_0x42f9c8(0xf6)),bufferCanvas=document[a0_0x42f9c8(0xa5)]('canvas'),canvasContainer=document[a0_0x42f9c8(0xa5)](a0_0x42f9c8(0xcd)),imgShader=document[a0_0x42f9c8(0xa5)](a0_0x42f9c8(0xe7)),settingContainer=document['querySelectorAll'](a0_0x42f9c8(0xe8)),messageContainer=document[a0_0x42f9c8(0xd7)]('.message-container'),stateTitle=document['querySelectorAll']('.stateTitle,\x20.stateDate');async function loadLUT64(){const _0x23aeff=a0_0x42f9c8;systemType=gameName[_0x23aeff(0xc6)](-0x3);const _0x491cd8=localStorage[_0x23aeff(0x9f)](gameName+_0x23aeff(0xc3))||_0x23aeff(0xcb),_0x1bbd6b=(localStorage['getItem'](gameName+_0x23aeff(0xa6))||_0x23aeff(0xdc))[_0x23aeff(0xab)]();if(!lut64||lut64Streng!==_0x491cd8||lut64Profile!==_0x1bbd6b){const _0x24e301=_0x23aeff(0xcf)+_0x1bbd6b+'_'+_0x491cd8+_0x23aeff(0xda);console[_0x23aeff(0xb1)](_0x24e301);const _0x124544=await fetch(_0x24e301),_0x328b60=await _0x124544[_0x23aeff(0xf3)]();lut64=new Uint8Array(_0x328b60),lut64Streng=_0x491cd8,lut64Profile=_0x1bbd6b;}}async function loadShaderSource(_0x450dc8){const _0x56863f=a0_0x42f9c8,_0x46e7bc=await fetch(_0x450dc8);return await _0x46e7bc[_0x56863f(0xae)]();}function setupStyle(_0xf29742){const _0x44a073=a0_0x42f9c8;clientWidth=document['documentElement'][_0x44a073(0xd3)];const _0x3ccee1=window[_0x44a073(0x9d)];systemType==='gbc'?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x44a073(0xf5)](clientWidth*_0x3ccee1/gameWidth),localStorage[_0x44a073(0x97)](_0x44a073(0xc8),_0x44a073(0x99)+gameWidth*(integerScaling/_0x3ccee1)+','+gameHeight*(integerScaling/_0x3ccee1))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x44a073(0xf5)](clientWidth*_0x3ccee1/gameWidth),localStorage[_0x44a073(0x97)]('screenSize','0,0,'+gameWidth*(integerScaling/_0x3ccee1)+','+gameHeight*(integerScaling/_0x3ccee1)));if(_0xf29742==='2d')bufferCanvas[_0x44a073(0xb6)]=gameWidth,bufferCanvas[_0x44a073(0xe9)]=gameHeight,bufferCanvas['style'][_0x44a073(0xa0)]=''+integerScaling/_0x3ccee1,bufferCanvas['style'][_0x44a073(0xdb)]=_0x44a073(0xed),canvasContainer['style']['width']=gameWidth*(integerScaling/_0x3ccee1)+'px',canvasContainer['style'][_0x44a073(0xe9)]=gameHeight*(integerScaling/_0x3ccee1)+'px',textured[_0x44a073(0xdd)][_0x44a073(0xb6)]=gameWidth*(integerScaling/_0x3ccee1)+'px',textured[_0x44a073(0xdd)]['height']=gameHeight*(integerScaling/_0x3ccee1)+'px',imgShader[_0x44a073(0xdd)]['transform']=_0x44a073(0xbf)+integerScaling/_0x3ccee1/upscaleShader+')',settingContainer[_0x44a073(0x96)](function(_0x4fdb2e){const _0x531d13=_0x44a073;_0x4fdb2e[_0x531d13(0xdd)]['width']=gameWidth*(integerScaling/_0x3ccee1)+'px',_0x4fdb2e[_0x531d13(0xdd)][_0x531d13(0xe9)]=gameHeight*(integerScaling/_0x3ccee1)+'px';}),messageContainer[_0x44a073(0x96)](function(_0x2799fc){const _0x5f0baa=_0x44a073;_0x2799fc['style']['width']=gameWidth+'px',_0x2799fc[_0x5f0baa(0xdd)][_0x5f0baa(0xe9)]=gameHeight+'px',_0x2799fc[_0x5f0baa(0xdd)][_0x5f0baa(0xa0)]=''+integerScaling/_0x3ccee1;}),stateTitle[_0x44a073(0x96)](function(_0x22108f){const _0x53aaa2=_0x44a073;_0x22108f[_0x53aaa2(0xad)]['remove'](_0x53aaa2(0xd5));});else _0xf29742===_0x44a073(0xa4)&&(bufferCanvas[_0x44a073(0xb6)]=clientWidth*upscaleFactor,bufferCanvas[_0x44a073(0xe9)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x44a073(0xdd)][_0x44a073(0xa0)]=''+0x1/upscaleFactor,bufferCanvas['style'][_0x44a073(0xdb)]='',canvasContainer[_0x44a073(0xdd)][_0x44a073(0xb6)]=clientWidth+'px',canvasContainer['style'][_0x44a073(0xe9)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x44a073(0xdd)][_0x44a073(0xb6)]=clientWidth+'px',textured[_0x44a073(0xdd)]['height']=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x44a073(0xdd)][_0x44a073(0xb4)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x44a073(0x96)](function(_0x195ab3){const _0x3a1c7f=_0x44a073;_0x195ab3[_0x3a1c7f(0xdd)]['width']=clientWidth+'px',_0x195ab3['style'][_0x3a1c7f(0xe9)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x44a073(0x96)](function(_0x572eb9){const _0x50a191=_0x44a073;_0x572eb9[_0x50a191(0xdd)]['width']=gameWidth+'px',_0x572eb9[_0x50a191(0xdd)][_0x50a191(0xe9)]=gameHeight+'px',_0x572eb9[_0x50a191(0xdd)][_0x50a191(0xa0)]=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x154673){const _0x35eaac=_0x44a073;_0x154673['classList'][_0x35eaac(0xbc)](_0x35eaac(0xd5));}));imgShader[_0x44a073(0xdd)]['width']=gameWidth*upscaleShader+'px',imgShader['style'][_0x44a073(0xe9)]=gameHeight*upscaleShader+'px',imgShader[_0x44a073(0xdd)]['transformOrigin']=_0x44a073(0xb0),imgShader[_0x44a073(0xdd)][_0x44a073(0xa2)](_0x44a073(0xa3),upscaleShader+_0x44a073(0xd9)+upscaleShader+'px');}function a0_0x5500(){const _0x129d45=['texcoord','createShader','WebGL2\x20not\x20supported','devicePixelRatio','COLOR_BUFFER_BIT','getItem','zoom','STATIC_DRAW','setProperty','--bg-size','webgl2','getElementById','_temperature','error','drawArrays','9MbvimQ','./src/shaders/vertexShader.glsl','toLowerCase','CLAMP_TO_EDGE','classList','text','getShaderParameter','top\x20center','log','bufferData','NEAREST','transform','addEventListener','width','clearRect','UNSIGNED_BYTE','TEXTURE_MAG_FILTER','canvas','uniform2f','add','TEXTURE_2D','getAttribLocation','scale(','FLOAT','TRIANGLE_STRIP','vertexAttribPointer','_streng','4775514qfUhGf','getUniformLocation','slice','RGBA','screenSize','40vDQGQw','then','4.0','6gaHaYr','canvas-container','compileShader','./src/lut/lut64_','16ymeGyx','useProgram','5478595zEJJnV','clientWidth','texParameteri','fefs','enableVertexAttribArray','querySelectorAll','3368002bcHsIM','px\x20','.bin','imageRendering','warm','style','2512575OMgzZp','DOMContentLoaded','TEXTURE_WRAP_T','TEXTURE_WRAP_S','drawImage','bindTexture','viewport','getPixelData','uniform1f','img-shader','.setting-container','height','101578garywN','attachShader','COMPILE_STATUS','crisp-edges','createTexture','getShaderInfoLog','1611404YCpwSO','texImage2D','render_size','arrayBuffer','createBuffer','floor','textured','4178027xeJyYX','getContext','game_size','ARRAY_BUFFER','bindBuffer','forEach','setItem','TEXTURE_MIN_FILTER','0,0,'];a0_0x5500=function(){return _0x129d45;};return a0_0x5500();}function setupWebGL(){const _0x3b7faf=a0_0x42f9c8;gl=bufferCanvas[_0x3b7faf(0x92)](_0x3b7faf(0xa4));if(!gl)return console[_0x3b7faf(0xa7)](_0x3b7faf(0x9c)),null;gl[_0x3b7faf(0xe4)](0x0,0x0,bufferCanvas[_0x3b7faf(0xb6)],bufferCanvas[_0x3b7faf(0xe9)]);}function createShader(_0x294685,_0x9c8f44){const _0x59fd41=a0_0x42f9c8,_0x14b6be=gl[_0x59fd41(0x9b)](_0x294685);gl['shaderSource'](_0x14b6be,_0x9c8f44),gl[_0x59fd41(0xce)](_0x14b6be);if(!gl[_0x59fd41(0xaf)](_0x14b6be,gl[_0x59fd41(0xec)]))return console['error'](gl[_0x59fd41(0xef)](_0x14b6be)),gl['deleteShader'](_0x14b6be),null;return _0x14b6be;}async function setupShaders(){const _0x34468d=a0_0x42f9c8,_0x4d95df=await loadShaderSource(_0x34468d(0xaa)),_0x205be1=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x556490=createShader(gl['VERTEX_SHADER'],_0x4d95df),_0x57b6a1=createShader(gl['FRAGMENT_SHADER'],_0x205be1);return program=gl['createProgram'](),gl[_0x34468d(0xeb)](program,_0x556490),gl[_0x34468d(0xeb)](program,_0x57b6a1),gl['linkProgram'](program),gl[_0x34468d(0xd1)](program),program;}function setupTexture(){const _0x41426d=a0_0x42f9c8;texture=gl[_0x41426d(0xee)](),gl[_0x41426d(0xe3)](gl[_0x41426d(0xbd)],texture),gl[_0x41426d(0xd4)](gl[_0x41426d(0xbd)],gl[_0x41426d(0x98)],gl[_0x41426d(0xb3)]),gl[_0x41426d(0xd4)](gl[_0x41426d(0xbd)],gl[_0x41426d(0xb9)],gl[_0x41426d(0xb3)]),gl[_0x41426d(0xd4)](gl['TEXTURE_2D'],gl[_0x41426d(0xe1)],gl['CLAMP_TO_EDGE']),gl['texParameteri'](gl[_0x41426d(0xbd)],gl[_0x41426d(0xe0)],gl[_0x41426d(0xac)]),gl[_0x41426d(0xbb)](gl[_0x41426d(0xc5)](program,_0x41426d(0x93)),gameWidth,gameHeight),gl[_0x41426d(0xbb)](gl[_0x41426d(0xc5)](program,_0x41426d(0xf2)),gl['canvas'][_0x41426d(0xb6)],gl[_0x41426d(0xba)]['height']),gl[_0x41426d(0xe6)](gl[_0x41426d(0xc5)](program,'smooth_width'),gameWidth/gl['canvas']['width']),gl[_0x41426d(0xe6)](gl[_0x41426d(0xc5)](program,'smooth_height'),gameHeight/gl[_0x41426d(0xba)][_0x41426d(0xe9)]);}function setupBuffers(){const _0x535d55=a0_0x42f9c8,_0x30c226=gl['createBuffer']();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x30c226),gl['bufferData'](gl[_0x535d55(0x94)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x535d55(0xa1)]);const _0x2196d1=gl[_0x535d55(0xbe)](program,'position');gl['enableVertexAttribArray'](_0x2196d1),gl['vertexAttribPointer'](_0x2196d1,0x2,gl[_0x535d55(0xc0)],![],0x0,0x0);const _0x59c171=gl[_0x535d55(0xf4)]();gl[_0x535d55(0x95)](gl['ARRAY_BUFFER'],_0x59c171),gl[_0x535d55(0xb2)](gl[_0x535d55(0x94)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x535d55(0xa1)]);const _0x25f7e5=gl[_0x535d55(0xbe)](program,_0x535d55(0x9a));gl[_0x535d55(0xd6)](_0x25f7e5),gl[_0x535d55(0xc2)](_0x25f7e5,0x2,gl[_0x535d55(0xc0)],![],0x0,0x0);}async function renderPixel(_0x185063){const _0x7a40cd=a0_0x42f9c8,_0x122ee3=a0_0x3de341[_0x7a40cd(0xe5)]();if(!_0x122ee3)return;await loadLUT64();const _0x277f25=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x140856=0x0;_0x140856<gameHeight;_0x140856++){for(let _0x11c994=0x0;_0x11c994<gameWidth;_0x11c994++){const _0x2afbda=_0x140856*gameStride+_0x11c994,_0x2ee3c7=(_0x140856*gameWidth+_0x11c994)*0x4,_0x3f50cb=_0x122ee3[_0x2afbda],_0x4071a8=(_0x3f50cb&0xff)>>0x2,_0x590965=(_0x3f50cb>>0x8&0xff)>>0x2,_0x35a313=(_0x3f50cb>>0x10&0xff)>>0x2,_0x3a2629=(_0x4071a8*0x40*0x40+_0x590965*0x40+_0x35a313)*0x3;_0x277f25[_0x2ee3c7]=lut64[_0x3a2629],_0x277f25[_0x2ee3c7+0x1]=lut64[_0x3a2629+0x1],_0x277f25[_0x2ee3c7+0x2]=lut64[_0x3a2629+0x2],_0x277f25[_0x2ee3c7+0x3]=0xff;}}if(_0x185063===_0x7a40cd(0xa4))gl[_0x7a40cd(0xe3)](gl[_0x7a40cd(0xbd)],texture),gl[_0x7a40cd(0xf1)](gl[_0x7a40cd(0xbd)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x7a40cd(0xc7)],gl[_0x7a40cd(0xb8)],_0x277f25),gl['clear'](gl[_0x7a40cd(0x9e)]),gl[_0x7a40cd(0xa8)](gl[_0x7a40cd(0xc1)],0x0,0x4);else{if(_0x185063==='2d'){ctx2d=bufferCanvas[_0x7a40cd(0x92)]('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x13829f=new ImageData(_0x277f25,gameWidth,gameHeight);createImageBitmap(_0x13829f)[_0x7a40cd(0xca)](_0x16ccf3=>{const _0x34d202=_0x7a40cd;ctx2d[_0x34d202(0xb7)](0x0,0x0,bufferCanvas[_0x34d202(0xb6)],bufferCanvas['height']),ctx2d[_0x34d202(0xe2)](_0x16ccf3,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x185063));}export async function switchRenderMode(_0x35a8f6){const _0x58bbec=a0_0x42f9c8;systemType=gameName[_0x58bbec(0xc6)](-0x3);if(_0x35a8f6==='2d')setupStyle('2d'),renderPixel('2d');else _0x35a8f6===_0x58bbec(0xa4)&&(setupStyle(_0x58bbec(0xa4)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x58bbec(0xa4)));}document[a0_0x42f9c8(0xb5)](a0_0x42f9c8(0xdf),function(){});