const a0_0x348b2a=a0_0x1a95;(function(_0x2b3bee,_0x35f9d0){const _0x50c16d=a0_0x1a95,_0x261776=_0x2b3bee();while(!![]){try{const _0x166f7d=-parseInt(_0x50c16d(0x116))/0x1+parseInt(_0x50c16d(0x144))/0x2*(parseInt(_0x50c16d(0x11b))/0x3)+parseInt(_0x50c16d(0x102))/0x4*(parseInt(_0x50c16d(0xf5))/0x5)+parseInt(_0x50c16d(0xe5))/0x6*(-parseInt(_0x50c16d(0x118))/0x7)+-parseInt(_0x50c16d(0xf2))/0x8*(parseInt(_0x50c16d(0x140))/0x9)+parseInt(_0x50c16d(0x11a))/0xa*(parseInt(_0x50c16d(0xec))/0xb)+-parseInt(_0x50c16d(0x13d))/0xc*(parseInt(_0x50c16d(0x11d))/0xd);if(_0x166f7d===_0x35f9d0)break;else _0x261776['push'](_0x261776['shift']());}catch(_0x43c94e){_0x261776['push'](_0x261776['shift']());}}}(a0_0x4b16,0xb2566));import*as a0_0x4b4ceb from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x348b2a(0x10d)](a0_0x348b2a(0xf9)),bufferCanvas=document['getElementById'](a0_0x348b2a(0xe4)),canvasContainer=document[a0_0x348b2a(0x10d)]('canvas-container'),imgShader=document['getElementById'](a0_0x348b2a(0x145)),settingContainer=document['querySelectorAll']('.setting-container'),messageContainer=document[a0_0x348b2a(0x129)](a0_0x348b2a(0x123)),stateTitle=document['querySelectorAll'](a0_0x348b2a(0xee));async function loadLUT64(){const _0x171919=a0_0x348b2a;systemType=gameName[_0x171919(0x135)](-0x3);const _0x513488=localStorage[_0x171919(0x105)](gameName+_0x171919(0xfb))||_0x171919(0x110),_0x5cbab8=(localStorage[_0x171919(0x105)](gameName+_0x171919(0x130))||_0x171919(0x11c))[_0x171919(0x120)]();if(!lut64||lut64Streng!==_0x513488||lut64Profile!==_0x5cbab8){const _0x15e55c=_0x171919(0xe7)+_0x5cbab8+'_'+_0x513488+'.bin';console[_0x171919(0xf6)](_0x15e55c);const _0x31de02=await fetch(_0x15e55c),_0x5bb6a0=await _0x31de02[_0x171919(0xf3)]();lut64=new Uint8Array(_0x5bb6a0),lut64Streng=_0x513488,lut64Profile=_0x5cbab8;}}async function loadShaderSource(_0xb4a7b6){const _0x3641bd=a0_0x348b2a,_0x237000=await fetch(_0xb4a7b6);return await _0x237000[_0x3641bd(0xe9)]();}function setupStyle(_0x16d000){const _0x4dd989=a0_0x348b2a;clientWidth=document['documentElement']['clientWidth'];const _0x37a97d=window['devicePixelRatio'];systemType===_0x4dd989(0x122)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x37a97d/gameWidth),localStorage[_0x4dd989(0xfe)](_0x4dd989(0x127),'0,0,'+gameWidth*(integerScaling/_0x37a97d)+','+gameHeight*(integerScaling/_0x37a97d))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x4dd989(0x10e)](clientWidth*_0x37a97d/gameWidth),localStorage[_0x4dd989(0xfe)]('screenSize',_0x4dd989(0xf0)+gameWidth*(integerScaling/_0x37a97d)+','+gameHeight*(integerScaling/_0x37a97d)));if(_0x16d000==='2d')bufferCanvas[_0x4dd989(0x100)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x4dd989(0xf1)]['zoom']=''+integerScaling/_0x37a97d,bufferCanvas[_0x4dd989(0xf1)]['imageRendering']=_0x4dd989(0x146),canvasContainer[_0x4dd989(0xf1)][_0x4dd989(0x100)]=gameWidth*(integerScaling/_0x37a97d)+'px',canvasContainer[_0x4dd989(0xf1)][_0x4dd989(0xef)]=gameHeight*(integerScaling/_0x37a97d)+'px',textured['style']['width']=gameWidth*(integerScaling/_0x37a97d)+'px',textured[_0x4dd989(0xf1)]['height']=gameHeight*(integerScaling/_0x37a97d)+'px',imgShader[_0x4dd989(0xf1)][_0x4dd989(0x117)]=_0x4dd989(0x128)+integerScaling/_0x37a97d/upscaleShader+')',settingContainer[_0x4dd989(0xeb)](function(_0x498532){const _0x8fc262=_0x4dd989;_0x498532[_0x8fc262(0xf1)]['width']=gameWidth*(integerScaling/_0x37a97d)+'px',_0x498532[_0x8fc262(0xf1)][_0x8fc262(0xef)]=gameHeight*(integerScaling/_0x37a97d)+'px';}),messageContainer[_0x4dd989(0xeb)](function(_0x2e21ab){const _0x340ecb=_0x4dd989;_0x2e21ab['style']['width']=gameWidth+'px',_0x2e21ab['style'][_0x340ecb(0xef)]=gameHeight+'px',_0x2e21ab['style'][_0x340ecb(0x141)]=''+integerScaling/_0x37a97d;}),stateTitle[_0x4dd989(0xeb)](function(_0x392376){const _0x3dc258=_0x4dd989;_0x392376[_0x3dc258(0x11e)][_0x3dc258(0x133)](_0x3dc258(0x111));});else _0x16d000===_0x4dd989(0x142)&&(bufferCanvas[_0x4dd989(0x100)]=clientWidth*upscaleFactor,bufferCanvas[_0x4dd989(0xef)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style'][_0x4dd989(0x141)]=''+0x1/upscaleFactor,bufferCanvas[_0x4dd989(0xf1)]['imageRendering']='',canvasContainer['style'][_0x4dd989(0x100)]=clientWidth+'px',canvasContainer['style'][_0x4dd989(0xef)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x4dd989(0xf1)][_0x4dd989(0x100)]=clientWidth+'px',textured[_0x4dd989(0xf1)][_0x4dd989(0xef)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x4dd989(0xf1)][_0x4dd989(0x117)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x4dd989(0xeb)](function(_0x25e381){const _0x2ebc2d=_0x4dd989;_0x25e381['style']['width']=clientWidth+'px',_0x25e381[_0x2ebc2d(0xf1)]['height']=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer['forEach'](function(_0x459bfb){const _0x17b7f3=_0x4dd989;_0x459bfb[_0x17b7f3(0xf1)][_0x17b7f3(0x100)]=gameWidth+'px',_0x459bfb[_0x17b7f3(0xf1)][_0x17b7f3(0xef)]=gameHeight+'px',_0x459bfb['style'][_0x17b7f3(0x141)]=''+clientWidth/gameWidth;}),stateTitle[_0x4dd989(0xeb)](function(_0x4dd948){const _0x5983e7=_0x4dd989;_0x4dd948[_0x5983e7(0x11e)][_0x5983e7(0xf8)](_0x5983e7(0x111));}));imgShader['style'][_0x4dd989(0x100)]=gameWidth*upscaleShader+'px',imgShader[_0x4dd989(0xf1)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x4dd989(0xf1)][_0x4dd989(0x124)]=_0x4dd989(0xf7),imgShader['style'][_0x4dd989(0x10a)](_0x4dd989(0xff),upscaleShader+_0x4dd989(0xe8)+upscaleShader+'px');}function setupWebGL(){const _0x307ca3=a0_0x348b2a;gl=bufferCanvas[_0x307ca3(0x136)](_0x307ca3(0x142));if(!gl)return console[_0x307ca3(0xfc)](_0x307ca3(0x119)),null;gl[_0x307ca3(0xfd)](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']);}function createShader(_0x1b24ec,_0x6d7e93){const _0x39a89a=a0_0x348b2a,_0x2439e8=gl[_0x39a89a(0x134)](_0x1b24ec);gl[_0x39a89a(0x115)](_0x2439e8,_0x6d7e93),gl['compileShader'](_0x2439e8);if(!gl[_0x39a89a(0x101)](_0x2439e8,gl[_0x39a89a(0x12e)]))return console['error'](gl['getShaderInfoLog'](_0x2439e8)),gl['deleteShader'](_0x2439e8),null;return _0x2439e8;}async function setupShaders(){const _0x42c6ab=a0_0x348b2a,_0x46caae=await loadShaderSource('./src/shaders/vertexShader.glsl'),_0x1050ad=await loadShaderSource(_0x42c6ab(0x106)),_0x348d0b=createShader(gl[_0x42c6ab(0xf4)],_0x46caae),_0x1972c2=createShader(gl[_0x42c6ab(0x109)],_0x1050ad);return program=gl[_0x42c6ab(0x13f)](),gl[_0x42c6ab(0xfa)](program,_0x348d0b),gl['attachShader'](program,_0x1972c2),gl['linkProgram'](program),gl['useProgram'](program),program;}function setupTexture(){const _0x244a91=a0_0x348b2a;texture=gl['createTexture'](),gl[_0x244a91(0x12c)](gl[_0x244a91(0x112)],texture),gl['texParameteri'](gl[_0x244a91(0x112)],gl[_0x244a91(0xea)],gl[_0x244a91(0x114)]),gl[_0x244a91(0x132)](gl[_0x244a91(0x112)],gl['TEXTURE_MAG_FILTER'],gl[_0x244a91(0x114)]),gl['texParameteri'](gl[_0x244a91(0x112)],gl[_0x244a91(0x13e)],gl[_0x244a91(0x139)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x244a91(0x13b)],gl[_0x244a91(0x139)]),gl[_0x244a91(0x10c)](gl[_0x244a91(0xe6)](program,'game_size'),gameWidth,gameHeight),gl[_0x244a91(0x10c)](gl['getUniformLocation'](program,_0x244a91(0x143)),gl[_0x244a91(0xe4)]['width'],gl[_0x244a91(0xe4)]['height']),gl[_0x244a91(0x121)](gl[_0x244a91(0xe6)](program,'smooth_width'),gameWidth/gl[_0x244a91(0xe4)][_0x244a91(0x100)]),gl[_0x244a91(0x121)](gl['getUniformLocation'](program,_0x244a91(0x12a)),gameHeight/gl[_0x244a91(0xe4)][_0x244a91(0xef)]);}function setupBuffers(){const _0x3aef2d=a0_0x348b2a,_0x341b65=gl[_0x3aef2d(0x113)]();gl['bindBuffer'](gl[_0x3aef2d(0x13a)],_0x341b65),gl[_0x3aef2d(0xe3)](gl[_0x3aef2d(0x13a)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x3aef2d(0xed)]);const _0xf531b9=gl[_0x3aef2d(0x126)](program,_0x3aef2d(0x137));gl[_0x3aef2d(0x107)](_0xf531b9),gl[_0x3aef2d(0x12d)](_0xf531b9,0x2,gl['FLOAT'],![],0x0,0x0);const _0x193994=gl[_0x3aef2d(0x113)]();gl[_0x3aef2d(0x138)](gl[_0x3aef2d(0x13a)],_0x193994),gl[_0x3aef2d(0xe3)](gl[_0x3aef2d(0x13a)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x3aef2d(0xed)]);const _0x4d3572=gl[_0x3aef2d(0x126)](program,_0x3aef2d(0x12b));gl[_0x3aef2d(0x107)](_0x4d3572),gl[_0x3aef2d(0x12d)](_0x4d3572,0x2,gl[_0x3aef2d(0x12f)],![],0x0,0x0);}function a0_0x1a95(_0x2a94bf,_0x590c8d){const _0x4b165c=a0_0x4b16();return a0_0x1a95=function(_0x1a95a0,_0x314b5a){_0x1a95a0=_0x1a95a0-0xe3;let _0x4ad511=_0x4b165c[_0x1a95a0];return _0x4ad511;},a0_0x1a95(_0x2a94bf,_0x590c8d);}async function renderPixel(_0x452ee9){const _0xbb48c6=a0_0x348b2a,_0x430ee0=a0_0x4b4ceb[_0xbb48c6(0x11f)]();if(!_0x430ee0)return;await loadLUT64();const _0x1490b1=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x3b5e09=0x0;_0x3b5e09<gameHeight;_0x3b5e09++){for(let _0x1b04d5=0x0;_0x1b04d5<gameWidth;_0x1b04d5++){const _0x2b965a=_0x3b5e09*gameStride+_0x1b04d5,_0x363f6a=(_0x3b5e09*gameWidth+_0x1b04d5)*0x4,_0x1a6605=_0x430ee0[_0x2b965a],_0x2d2b64=(_0x1a6605&0xff)>>0x2,_0x19370c=(_0x1a6605>>0x8&0xff)>>0x2,_0x130328=(_0x1a6605>>0x10&0xff)>>0x2,_0x1d27c0=(_0x2d2b64*0x40*0x40+_0x19370c*0x40+_0x130328)*0x3;_0x1490b1[_0x363f6a]=lut64[_0x1d27c0],_0x1490b1[_0x363f6a+0x1]=lut64[_0x1d27c0+0x1],_0x1490b1[_0x363f6a+0x2]=lut64[_0x1d27c0+0x2],_0x1490b1[_0x363f6a+0x3]=0xff;}}if(_0x452ee9===_0xbb48c6(0x142))gl['bindTexture'](gl[_0xbb48c6(0x112)],texture),gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0xbb48c6(0x103)],gameWidth,gameHeight,0x0,gl[_0xbb48c6(0x103)],gl[_0xbb48c6(0x147)],_0x1490b1),gl[_0xbb48c6(0x10f)](gl[_0xbb48c6(0x148)]),gl[_0xbb48c6(0x10b)](gl[_0xbb48c6(0x108)],0x0,0x4);else{if(_0x452ee9==='2d'){ctx2d=bufferCanvas[_0xbb48c6(0x136)]('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x25c770=new ImageData(_0x1490b1,gameWidth,gameHeight);createImageBitmap(_0x25c770)[_0xbb48c6(0x131)](_0x55e9d0=>{const _0x54ea10=_0xbb48c6;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x54ea10(0x100)],bufferCanvas[_0x54ea10(0xef)]),ctx2d[_0x54ea10(0x125)](_0x55e9d0,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x452ee9));}export async function switchRenderMode(_0x3ddcba){const _0x3a2f0e=a0_0x348b2a;systemType=gameName[_0x3a2f0e(0x135)](-0x3);if(_0x3ddcba==='2d')setupStyle('2d'),renderPixel('2d');else _0x3ddcba==='webgl2'&&(setupStyle(_0x3a2f0e(0x142)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x3a2f0e(0x142)));}function a0_0x4b16(){const _0x163997=['742794iDLJQG','img-shader','crisp-edges','UNSIGNED_BYTE','COLOR_BUFFER_BIT','bufferData','canvas','1099212XlFKOB','getUniformLocation','./src/lut/lut64_','px\x20','text','TEXTURE_MIN_FILTER','forEach','11zfFYnw','STATIC_DRAW','.stateTitle,\x20.stateDate','height','0,0,','style','16ZKpSBw','arrayBuffer','VERTEX_SHADER','7050485yyTVGh','log','top\x20center','add','textured','attachShader','_streng','error','viewport','setItem','--bg-size','width','getShaderParameter','4axpHIf','RGBA','addEventListener','getItem','./src/shaders/fragmentShader.glsl','enableVertexAttribArray','TRIANGLE_STRIP','FRAGMENT_SHADER','setProperty','drawArrays','uniform2f','getElementById','floor','clear','4.0','fefs','TEXTURE_2D','createBuffer','NEAREST','shaderSource','529565mBpvoh','transform','7MFeWWV','WebGL2\x20not\x20supported','4539430hSjcYN','6WNDkZc','warm','13lFgZPJ','classList','getPixelData','toLowerCase','uniform1f','gbc','.message-container','transformOrigin','drawImage','getAttribLocation','screenSize','scale(','querySelectorAll','smooth_height','texcoord','bindTexture','vertexAttribPointer','COMPILE_STATUS','FLOAT','_temperature','then','texParameteri','remove','createShader','slice','getContext','position','bindBuffer','CLAMP_TO_EDGE','ARRAY_BUFFER','TEXTURE_WRAP_T','DOMContentLoaded','6081396kwzPeA','TEXTURE_WRAP_S','createProgram','2955663ZpsOka','zoom','webgl2','render_size'];a0_0x4b16=function(){return _0x163997;};return a0_0x4b16();}document[a0_0x348b2a(0x104)](a0_0x348b2a(0x13c),function(){});