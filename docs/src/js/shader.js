(function(_0x530777,_0x4b169a){const _0x41e74e=a0_0xe710,_0x2adb14=_0x530777();while(!![]){try{const _0x187013=parseInt(_0x41e74e(0xe0))/0x1*(parseInt(_0x41e74e(0xd8))/0x2)+-parseInt(_0x41e74e(0xf0))/0x3+-parseInt(_0x41e74e(0xe8))/0x4+-parseInt(_0x41e74e(0x114))/0x5*(parseInt(_0x41e74e(0x116))/0x6)+parseInt(_0x41e74e(0x11b))/0x7*(parseInt(_0x41e74e(0x104))/0x8)+parseInt(_0x41e74e(0xe6))/0x9+parseInt(_0x41e74e(0xdc))/0xa;if(_0x187013===_0x4b169a)break;else _0x2adb14['push'](_0x2adb14['shift']());}catch(_0x1bc008){_0x2adb14['push'](_0x2adb14['shift']());}}}(a0_0x5c88,0xb75fb));import*as a0_0x333a20 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0xe710(_0x101004,_0xe95b76){const _0x5c88cc=a0_0x5c88();return a0_0xe710=function(_0xe710fa,_0x4cebf0){_0xe710fa=_0xe710fa-0xd6;let _0x1c28df=_0x5c88cc[_0xe710fa];return _0x1c28df;},a0_0xe710(_0x101004,_0xe95b76);}async function loadLUT64(){const _0x47bb6e=a0_0xe710;systemType=gameName['slice'](-0x3);const _0x52507c=localStorage['getItem'](gameName+'_streng')||_0x47bb6e(0x106),_0x2604ec=(localStorage[_0x47bb6e(0x111)](gameName+_0x47bb6e(0xf8))||'warm')[_0x47bb6e(0xdb)]();if(!lut64||lut64Streng!==_0x52507c||lut64Profile!==_0x2604ec){const _0x7ef634=_0x47bb6e(0xf4)+_0x2604ec+'_'+_0x52507c+_0x47bb6e(0xe7);console[_0x47bb6e(0x117)](_0x7ef634);const _0x10a967=await fetch(_0x7ef634),_0xb0bdd4=await _0x10a967[_0x47bb6e(0x10b)]();lut64=new Uint8Array(_0xb0bdd4),lut64Streng=_0x52507c,lut64Profile=_0x2604ec;}}function a0_0x5c88(){const _0x4858aa=['3696844KQYGGK','getContext','shaderSource','createTexture','vertexAttribPointer','position','height','texImage2D','361560OIpAkz','getAttribLocation','game_size','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','./src/lut/lut64_','TEXTURE_MAG_FILTER','drawArrays','compileShader','_temperature','bindBuffer','enableVertexAttribArray','render_size','COLOR_BUFFER_BIT','TEXTURE_2D','clear','slice','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','linkProgram','createShader','TEXTURE_WRAP_T','136IBVpPF','getUniformLocation','4.0','ARRAY_BUFFER','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','UNSIGNED_BYTE','webgl_full','arrayBuffer','RGBA','smooth_width','NEAREST','uniform1f','canvas','getItem','smooth_height','createBuffer','135DCKwyC','TEXTURE_MIN_FILTER','63150WCrZDv','log','CLAMP_TO_EDGE','bufferData','VERTEX_SHADER','178283iEUFuW','width','texcoord','STATIC_DRAW','TRIANGLE_STRIP','imageSmoothingEnabled','189928LKvVkI','texParameteri','getPixelData','toLowerCase','6709980aLlkwj','uniform2f','FLOAT','low-power','2mfocba','then','attachShader','TEXTURE_WRAP_S','webgl','drawImage','7074954jvrquf','.bin'];a0_0x5c88=function(){return _0x4858aa;};return a0_0x5c88();}function setupWebGL_Shader(_0x457ded){const _0x439007=a0_0xe710;gl=bufferCanvas[_0x439007(0xe9)](_0x439007(0xe4),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x439007(0xdf)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x439007(0x11c)],bufferCanvas[_0x439007(0xee)]);function _0x3bfd80(_0x35ae4f,_0x3df6cf){const _0x87a658=_0x439007,_0x124460=gl[_0x87a658(0x102)](_0x35ae4f);return gl[_0x87a658(0xea)](_0x124460,_0x3df6cf),gl[_0x87a658(0xf7)](_0x124460),_0x124460;}vs=_0x439007(0x108);if(_0x457ded===_0x439007(0xe4))fs=_0x439007(0xf3);else _0x457ded==='webgl_full'&&(fs=_0x439007(0x100));const _0x26c065=_0x3bfd80(gl[_0x439007(0x11a)],vs),_0x147a46=_0x3bfd80(gl['FRAGMENT_SHADER'],fs);return program=gl['createProgram'](),gl[_0x439007(0xe2)](program,_0x26c065),gl[_0x439007(0xe2)](program,_0x147a46),gl[_0x439007(0x101)](program),gl['useProgram'](program),program;}function setupTexture_Buffer(_0x1519a2){const _0x1364ba=a0_0xe710;texture=gl[_0x1364ba(0xeb)](),gl['bindTexture'](gl[_0x1364ba(0xfd)],texture),gl[_0x1364ba(0xd9)](gl['TEXTURE_2D'],gl[_0x1364ba(0x115)],gl[_0x1364ba(0x10e)]),gl[_0x1364ba(0xd9)](gl[_0x1364ba(0xfd)],gl[_0x1364ba(0xf5)],gl[_0x1364ba(0x10e)]),gl[_0x1364ba(0xd9)](gl[_0x1364ba(0xfd)],gl[_0x1364ba(0xe3)],gl[_0x1364ba(0x118)]),gl[_0x1364ba(0xd9)](gl[_0x1364ba(0xfd)],gl[_0x1364ba(0x103)],gl[_0x1364ba(0x118)]);_0x1519a2===_0x1364ba(0x10a)&&(gl[_0x1364ba(0xdd)](gl['getUniformLocation'](program,_0x1364ba(0xf2)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x1364ba(0x105)](program,_0x1364ba(0xfb)),gl[_0x1364ba(0x110)][_0x1364ba(0x11c)],gl['canvas'][_0x1364ba(0xee)]),gl[_0x1364ba(0x10f)](gl['getUniformLocation'](program,_0x1364ba(0x10d)),gameWidth/gl[_0x1364ba(0x110)]['width']),gl['uniform1f'](gl[_0x1364ba(0x105)](program,_0x1364ba(0x112)),gameHeight/gl[_0x1364ba(0x110)]['height']));const _0x13e3f2=gl[_0x1364ba(0x113)]();gl[_0x1364ba(0xf9)](gl[_0x1364ba(0x107)],_0x13e3f2),gl[_0x1364ba(0x119)](gl[_0x1364ba(0x107)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x1364ba(0x11e)]),gl[_0x1364ba(0xec)](gl['getAttribLocation'](program,_0x1364ba(0xed)),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x1364ba(0xfa)](gl[_0x1364ba(0xf1)](program,_0x1364ba(0xed)));const _0x249d52=gl[_0x1364ba(0x113)]();gl[_0x1364ba(0xf9)](gl['ARRAY_BUFFER'],_0x249d52),gl[_0x1364ba(0x119)](gl[_0x1364ba(0x107)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x1364ba(0x11e)]),gl[_0x1364ba(0xec)](gl['getAttribLocation'](program,_0x1364ba(0x11d)),0x2,gl[_0x1364ba(0xde)],![],0x0,0x0),gl[_0x1364ba(0xfa)](gl[_0x1364ba(0xf1)](program,_0x1364ba(0x11d)));}function setup2DContext(){const _0x5818da=a0_0xe710;ctx2d=bufferCanvas[_0x5818da(0xe9)]('2d'),ctx2d[_0x5818da(0xd7)]=![];}async function renderPixel(_0x2c74c5){const _0x5b08bc=a0_0xe710,_0x322712=a0_0x333a20[_0x5b08bc(0xda)]();if(!_0x322712)return;await loadLUT64();const _0x2eb52a=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x409111=0x0;_0x409111<gameHeight;_0x409111++){for(let _0x3a94f7=0x0;_0x3a94f7<gameWidth;_0x3a94f7++){const _0x1539f0=_0x409111*gameStride+_0x3a94f7,_0x4ac310=(_0x409111*gameWidth+_0x3a94f7)*0x4,_0x5314d5=_0x322712[_0x1539f0],_0x4f6dda=(_0x5314d5&0xff)>>0x2,_0x3063f7=(_0x5314d5>>0x8&0xff)>>0x2,_0x215232=(_0x5314d5>>0x10&0xff)>>0x2,_0x1c2fe5=(_0x4f6dda*0x40*0x40+_0x3063f7*0x40+_0x215232)*0x3;_0x2eb52a[_0x4ac310]=lut64[_0x1c2fe5],_0x2eb52a[_0x4ac310+0x1]=lut64[_0x1c2fe5+0x1],_0x2eb52a[_0x4ac310+0x2]=lut64[_0x1c2fe5+0x2],_0x2eb52a[_0x4ac310+0x3]=0xff;}}if(_0x2c74c5===_0x5b08bc(0xe4))gl[_0x5b08bc(0xef)](gl[_0x5b08bc(0xfd)],0x0,gl[_0x5b08bc(0x10c)],gameWidth,gameHeight,0x0,gl[_0x5b08bc(0x10c)],gl[_0x5b08bc(0x109)],_0x2eb52a),gl[_0x5b08bc(0xfe)](gl[_0x5b08bc(0xfc)]),gl[_0x5b08bc(0xf6)](gl[_0x5b08bc(0xd6)],0x0,0x4);else _0x2c74c5==='2d'&&(imageDataObj=new ImageData(_0x2eb52a,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x5b08bc(0xe1)](_0x20ba34=>{const _0x3dbf6f=_0x5b08bc;ctx2d['clearRect'](0x0,0x0,bufferCanvas['width'],bufferCanvas['height']),ctx2d[_0x3dbf6f(0xe5)](_0x20ba34,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x2c74c5));}export async function switchRenderMode(_0x166398){const _0x2e3b4e=a0_0xe710;systemType=gameName[_0x2e3b4e(0xff)](-0x3);if(_0x166398==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x166398==='webgl')setupStyle('2d'),setupWebGL_Shader('webgl'),setupTexture_Buffer('webgl'),renderPixel(_0x2e3b4e(0xe4));else _0x166398===_0x2e3b4e(0x10a)&&(setupStyle(_0x2e3b4e(0x10a)),setupWebGL_Shader(_0x2e3b4e(0x10a)),setupTexture_Buffer('webgl_full'),renderPixel('webgl'));}}