(function(_0x19b450,_0xdcb5df){const _0x341601=a0_0x1451,_0x4171d1=_0x19b450();while(!![]){try{const _0x2c15af=parseInt(_0x341601(0xf2))/0x1+parseInt(_0x341601(0x103))/0x2+parseInt(_0x341601(0xf6))/0x3+parseInt(_0x341601(0xfe))/0x4*(-parseInt(_0x341601(0x118))/0x5)+parseInt(_0x341601(0xdd))/0x6*(-parseInt(_0x341601(0xec))/0x7)+parseInt(_0x341601(0x11d))/0x8*(parseInt(_0x341601(0xf5))/0x9)+-parseInt(_0x341601(0x10f))/0xa;if(_0x2c15af===_0xdcb5df)break;else _0x4171d1['push'](_0x4171d1['shift']());}catch(_0x1bbbb6){_0x4171d1['push'](_0x4171d1['shift']());}}}(a0_0x1f3c,0xd83fa));import*as a0_0x4ccfa6 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x1451(_0x35a4de,_0x16ae26){const _0x1f3ca0=a0_0x1f3c();return a0_0x1451=function(_0x14513c,_0x1a36c9){_0x14513c=_0x14513c-0xdb;let _0x3bc308=_0x1f3ca0[_0x14513c];return _0x3bc308;},a0_0x1451(_0x35a4de,_0x16ae26);}function a0_0x1f3c(){const _0x4b6f8d=['STATIC_DRAW','134146qrDBqg','uniform2f','ARRAY_BUFFER','width','FRAGMENT_SHADER','toLowerCase','TEXTURE_2D','TEXTURE_WRAP_S','./src/lut/lut64_','VERTEX_SHADER','NEAREST','set','807710UusHqt','CLAMP_TO_EDGE','webgl','getPixelData','getContext','createBuffer','useProgram','createProgram','COLOR_BUFFER_BIT','25pxFnUD','slice','TRIANGLE_STRIP','arrayBuffer','none','97000nLQAKu','texParameteri','getItem','texcoord','vertexAttribPointer','compileShader','putImageData','4062tmxTnK','log','RGBA','uniform1f','drawArrays','bindTexture','render_size','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','linkProgram','attachShader','bindBuffer','enableVertexAttribArray','getAttribLocation','bufferData','clear','7301asLUNk','_4.0.bin','imageSmoothingEnabled','shaderSource','UNSIGNED_BYTE','TEXTURE_MIN_FILTER','1255332qmQeXO','position','canvas','378mXcWeh','3025218Kmygpn','webgl_full','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','smooth_width','createTexture','FLOAT','getUniformLocation','height','933940ZSfvyt','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','low-power','data'];a0_0x1f3c=function(){return _0x4b6f8d;};return a0_0x1f3c();}async function loadLUT64(){const _0xeb6f7d=a0_0x1451;systemType=gameName['slice'](-0x3);const _0x5b36a8=(localStorage[_0xeb6f7d(0x11f)](gameName+'_temperature')||'none')[_0xeb6f7d(0x108)]();if(!lut64||lut64Profile!==_0x5b36a8){const _0x4e6924=_0xeb6f7d(0x10b)+_0x5b36a8+_0xeb6f7d(0xed);console[_0xeb6f7d(0xde)](_0x4e6924);const _0x3a64bc=await fetch(_0x4e6924),_0x14dc57=await _0x3a64bc[_0xeb6f7d(0x11b)]();lut64=new Uint8Array(_0x14dc57),lut64Profile=_0x5b36a8;}}function setupWebGL_Shader(_0x640413){const _0x3c12ad=a0_0x1451;gl=bufferCanvas[_0x3c12ad(0x113)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x3c12ad(0x100)}),gl['viewport'](0x0,0x0,bufferCanvas[_0x3c12ad(0x106)],bufferCanvas[_0x3c12ad(0xfd)]);function _0x5f5956(_0x4e347b,_0x30d5ee){const _0x18096e=_0x3c12ad,_0x14fd61=gl['createShader'](_0x4e347b);return gl[_0x18096e(0xef)](_0x14fd61,_0x30d5ee),gl[_0x18096e(0xdb)](_0x14fd61),_0x14fd61;}vs=_0x3c12ad(0xe4);if(_0x640413===_0x3c12ad(0x111))fs=_0x3c12ad(0xff);else _0x640413===_0x3c12ad(0xf7)&&(fs=_0x3c12ad(0xf8));const _0x4f50aa=_0x5f5956(gl[_0x3c12ad(0x10c)],vs),_0x2aa1bb=_0x5f5956(gl[_0x3c12ad(0x107)],fs);return program=gl[_0x3c12ad(0x116)](),gl[_0x3c12ad(0xe6)](program,_0x4f50aa),gl[_0x3c12ad(0xe6)](program,_0x2aa1bb),gl[_0x3c12ad(0xe5)](program),gl[_0x3c12ad(0x115)](program),program;}function setupTexture_Buffer(_0xc7df10){const _0x25e41e=a0_0x1451;texture=gl[_0x25e41e(0xfa)](),gl[_0x25e41e(0xe2)](gl[_0x25e41e(0x109)],texture),gl[_0x25e41e(0x11e)](gl['TEXTURE_2D'],gl[_0x25e41e(0xf1)],gl['NEAREST']),gl[_0x25e41e(0x11e)](gl[_0x25e41e(0x109)],gl['TEXTURE_MAG_FILTER'],gl[_0x25e41e(0x10d)]),gl[_0x25e41e(0x11e)](gl['TEXTURE_2D'],gl[_0x25e41e(0x10a)],gl['CLAMP_TO_EDGE']),gl['texParameteri'](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_T'],gl[_0x25e41e(0x110)]);_0xc7df10===_0x25e41e(0xf7)&&(gl[_0x25e41e(0x104)](gl[_0x25e41e(0xfc)](program,'game_size'),gameWidth,gameHeight),gl[_0x25e41e(0x104)](gl[_0x25e41e(0xfc)](program,_0x25e41e(0xe3)),gl['canvas'][_0x25e41e(0x106)],gl['canvas'][_0x25e41e(0xfd)]),gl[_0x25e41e(0xe0)](gl[_0x25e41e(0xfc)](program,_0x25e41e(0xf9)),gameWidth/gl[_0x25e41e(0xf4)]['width']),gl[_0x25e41e(0xe0)](gl[_0x25e41e(0xfc)](program,'smooth_height'),gameHeight/gl[_0x25e41e(0xf4)][_0x25e41e(0xfd)]));const _0x2601d3=gl[_0x25e41e(0x114)]();gl[_0x25e41e(0xe7)](gl['ARRAY_BUFFER'],_0x2601d3),gl[_0x25e41e(0xea)](gl[_0x25e41e(0x105)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x25e41e(0x121)](gl['getAttribLocation'](program,'position'),0x2,gl[_0x25e41e(0xfb)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x25e41e(0xe9)](program,_0x25e41e(0xf3)));const _0x39a297=gl[_0x25e41e(0x114)]();gl[_0x25e41e(0xe7)](gl['ARRAY_BUFFER'],_0x39a297),gl[_0x25e41e(0xea)](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x25e41e(0x102)]),gl[_0x25e41e(0x121)](gl[_0x25e41e(0xe9)](program,_0x25e41e(0x120)),0x2,gl[_0x25e41e(0xfb)],![],0x0,0x0),gl[_0x25e41e(0xe8)](gl[_0x25e41e(0xe9)](program,_0x25e41e(0x120)));}function setup2DContext(){const _0x424a8b=a0_0x1451;ctx2d=bufferCanvas[_0x424a8b(0x113)]('2d'),ctx2d[_0x424a8b(0xee)]=![];}async function renderPixel(_0x16ea1b){const _0x57d0d5=a0_0x1451,_0x2a2a09=a0_0x4ccfa6[_0x57d0d5(0x112)]();if(!_0x2a2a09)return;await loadLUT64();const _0x1239d9=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x1552f4=0x0;_0x1552f4<gameHeight;_0x1552f4++){for(let _0x5340a9=0x0;_0x5340a9<gameWidth;_0x5340a9++){const _0x14231f=_0x1552f4*gameStride+_0x5340a9,_0x4aecd9=(_0x1552f4*gameWidth+_0x5340a9)*0x4,_0x4e7a2e=_0x2a2a09[_0x14231f];if(lut64Profile===_0x57d0d5(0x11c))_0x1239d9[_0x4aecd9]=_0x4e7a2e&0xff,_0x1239d9[_0x4aecd9+0x1]=_0x4e7a2e>>0x8&0xff,_0x1239d9[_0x4aecd9+0x2]=_0x4e7a2e>>0x10&0xff,_0x1239d9[_0x4aecd9+0x3]=0xff;else{const _0x235553=(_0x4e7a2e&0xff)>>0x2,_0x1c0489=(_0x4e7a2e>>0x8&0xff)>>0x2,_0x2b2c47=(_0x4e7a2e>>0x10&0xff)>>0x2,_0x9a2240=(_0x235553*0x40*0x40+_0x1c0489*0x40+_0x2b2c47)*0x3;_0x1239d9[_0x4aecd9]=lut64[_0x9a2240],_0x1239d9[_0x4aecd9+0x1]=lut64[_0x9a2240+0x1],_0x1239d9[_0x4aecd9+0x2]=lut64[_0x9a2240+0x2],_0x1239d9[_0x4aecd9+0x3]=0xff;}}}if(_0x16ea1b===_0x57d0d5(0x111))gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x57d0d5(0xdf)],gameWidth,gameHeight,0x0,gl[_0x57d0d5(0xdf)],gl[_0x57d0d5(0xf0)],_0x1239d9),gl[_0x57d0d5(0xeb)](gl[_0x57d0d5(0x117)]),gl[_0x57d0d5(0xe1)](gl[_0x57d0d5(0x11a)],0x0,0x4);else _0x16ea1b==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x1239d9,gameWidth,gameHeight):imageDataObj[_0x57d0d5(0x101)][_0x57d0d5(0x10e)](_0x1239d9),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x57d0d5(0x106)],bufferCanvas['height']),ctx2d[_0x57d0d5(0xdc)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x16ea1b));}export async function switchRenderMode(_0x4a9b29){const _0x50bd52=a0_0x1451;systemType=gameName[_0x50bd52(0x119)](-0x3);if(_0x4a9b29==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x4a9b29===_0x50bd52(0x111))setupStyle('2d'),setupWebGL_Shader(_0x50bd52(0x111)),setupTexture_Buffer(_0x50bd52(0x111)),renderPixel(_0x50bd52(0x111));else _0x4a9b29===_0x50bd52(0xf7)&&(setupStyle(_0x50bd52(0xf7)),setupWebGL_Shader(_0x50bd52(0xf7)),setupTexture_Buffer(_0x50bd52(0xf7)),renderPixel(_0x50bd52(0x111)));}}