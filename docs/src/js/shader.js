const a0_0x5bf003=a0_0x5332;(function(_0x5627a,_0x30f6f4){const _0x2548eb=a0_0x5332,_0xaa7dd4=_0x5627a();while(!![]){try{const _0x16d39b=parseInt(_0x2548eb(0x19f))/0x1*(-parseInt(_0x2548eb(0x140))/0x2)+parseInt(_0x2548eb(0x196))/0x3*(parseInt(_0x2548eb(0x19b))/0x4)+parseInt(_0x2548eb(0x14e))/0x5+-parseInt(_0x2548eb(0x17c))/0x6+parseInt(_0x2548eb(0x186))/0x7*(parseInt(_0x2548eb(0x170))/0x8)+parseInt(_0x2548eb(0x195))/0x9+parseInt(_0x2548eb(0x142))/0xa*(-parseInt(_0x2548eb(0x187))/0xb);if(_0x16d39b===_0x30f6f4)break;else _0xaa7dd4['push'](_0xaa7dd4['shift']());}catch(_0x30f5ac){_0xaa7dd4['push'](_0xaa7dd4['shift']());}}}(a0_0x2f7b,0x2ada7));import*as a0_0x3c8370 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x5bf003(0x154)](a0_0x5bf003(0x15a)),bufferCanvas=document[a0_0x5bf003(0x154)](a0_0x5bf003(0x149)),canvasContainer=document[a0_0x5bf003(0x154)](a0_0x5bf003(0x175)),imgShader=document['getElementById'](a0_0x5bf003(0x176)),settingContainer=document[a0_0x5bf003(0x17d)](a0_0x5bf003(0x144)),messageContainer=document['querySelectorAll'](a0_0x5bf003(0x194)),stateTitle=document[a0_0x5bf003(0x17d)](a0_0x5bf003(0x160));let imageDataObj=null;async function loadLUT64(){const _0x1d263b=a0_0x5bf003;systemType=gameName[_0x1d263b(0x1a0)](-0x3);const _0x32a836=localStorage['getItem'](gameName+_0x1d263b(0x18b))||'4.0',_0x185f6b=(localStorage[_0x1d263b(0x177)](gameName+_0x1d263b(0x172))||_0x1d263b(0x169))[_0x1d263b(0x15b)]();if(!lut64||lut64Streng!==_0x32a836||lut64Profile!==_0x185f6b){const _0x5400dc=_0x1d263b(0x174)+_0x185f6b+'_'+_0x32a836+_0x1d263b(0x162);console['log'](_0x5400dc);const _0xc9eefe=await fetch(_0x5400dc),_0x7604ea=await _0xc9eefe[_0x1d263b(0x19e)]();lut64=new Uint8Array(_0x7604ea),lut64Streng=_0x32a836,lut64Profile=_0x185f6b;}}async function loadShaderSource(_0x501450){const _0x37068d=a0_0x5bf003,_0x1abc8a=await fetch(_0x501450);return await _0x1abc8a[_0x37068d(0x148)]();}function setupStyle(_0x3244b7){const _0xad131c=a0_0x5bf003;clientWidth=document['documentElement'][_0xad131c(0x16d)];const _0x211b52=window[_0xad131c(0x13c)];systemType===_0xad131c(0x19a)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0xad131c(0x146)](clientWidth*_0x211b52/gameWidth),localStorage[_0xad131c(0x156)]('screenSize',_0xad131c(0x189)+gameWidth*(integerScaling/_0x211b52)+','+gameHeight*(integerScaling/_0x211b52))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0xad131c(0x146)](clientWidth*_0x211b52/gameWidth),localStorage[_0xad131c(0x156)](_0xad131c(0x16a),_0xad131c(0x189)+gameWidth*(integerScaling/_0x211b52)+','+gameHeight*(integerScaling/_0x211b52)));if(_0x3244b7==='2d')bufferCanvas[_0xad131c(0x18c)]=gameWidth,bufferCanvas[_0xad131c(0x18d)]=gameHeight,bufferCanvas['style'][_0xad131c(0x17f)]=''+integerScaling/_0x211b52,bufferCanvas[_0xad131c(0x159)]['imageRendering']='crisp-edges',canvasContainer[_0xad131c(0x159)][_0xad131c(0x18c)]=gameWidth*(integerScaling/_0x211b52)+'px',canvasContainer[_0xad131c(0x159)][_0xad131c(0x18d)]=gameHeight*(integerScaling/_0x211b52)+'px',textured[_0xad131c(0x159)][_0xad131c(0x18c)]=gameWidth*(integerScaling/_0x211b52)+'px',textured['style'][_0xad131c(0x18d)]=gameHeight*(integerScaling/_0x211b52)+'px',imgShader[_0xad131c(0x159)]['transform']=_0xad131c(0x181)+integerScaling/_0x211b52/upscaleShader+')',settingContainer[_0xad131c(0x158)](function(_0x5277a1){const _0x3ab8ca=_0xad131c;_0x5277a1[_0x3ab8ca(0x159)]['width']=gameWidth*(integerScaling/_0x211b52)+'px',_0x5277a1['style'][_0x3ab8ca(0x18d)]=gameHeight*(integerScaling/_0x211b52)+'px';}),messageContainer[_0xad131c(0x158)](function(_0x1a8552){const _0x570ce4=_0xad131c;_0x1a8552['style']['width']=gameWidth+'px',_0x1a8552[_0x570ce4(0x159)]['height']=gameHeight+'px',_0x1a8552[_0x570ce4(0x159)][_0x570ce4(0x17f)]=''+integerScaling/_0x211b52;}),stateTitle[_0xad131c(0x158)](function(_0x107dfe){const _0x9ccdfd=_0xad131c;_0x107dfe[_0x9ccdfd(0x14a)]['remove'](_0x9ccdfd(0x182));});else _0x3244b7===_0xad131c(0x188)&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0xad131c(0x159)][_0xad131c(0x17f)]=''+0x1/upscaleFactor,bufferCanvas[_0xad131c(0x159)]['imageRendering']='',canvasContainer['style']['width']=clientWidth+'px',canvasContainer[_0xad131c(0x159)]['height']=clientWidth*(gameHeight/gameWidth)+'px',textured[_0xad131c(0x159)][_0xad131c(0x18c)]=clientWidth+'px',textured[_0xad131c(0x159)][_0xad131c(0x18d)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0xad131c(0x159)][_0xad131c(0x152)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0xad131c(0x158)](function(_0x2d3fa2){const _0x3b0d80=_0xad131c;_0x2d3fa2[_0x3b0d80(0x159)]['width']=clientWidth+'px',_0x2d3fa2[_0x3b0d80(0x159)][_0x3b0d80(0x18d)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0xad131c(0x158)](function(_0x43b9cf){const _0x37c398=_0xad131c;_0x43b9cf['style'][_0x37c398(0x18c)]=gameWidth+'px',_0x43b9cf[_0x37c398(0x159)][_0x37c398(0x18d)]=gameHeight+'px',_0x43b9cf[_0x37c398(0x159)][_0x37c398(0x17f)]=''+clientWidth/gameWidth;}),stateTitle[_0xad131c(0x158)](function(_0x74ca3){const _0x40c6de=_0xad131c;_0x74ca3[_0x40c6de(0x14a)][_0x40c6de(0x145)](_0x40c6de(0x182));}));imgShader[_0xad131c(0x159)][_0xad131c(0x18c)]=gameWidth*upscaleShader+'px',imgShader['style'][_0xad131c(0x18d)]=gameHeight*upscaleShader+'px',imgShader['style']['transformOrigin']=_0xad131c(0x17b),imgShader[_0xad131c(0x159)][_0xad131c(0x168)]('--bg-size',upscaleShader+_0xad131c(0x147)+upscaleShader+'px');}function setupWebGL(){const _0x29f4f4=a0_0x5bf003;gl=bufferCanvas['getContext'](_0x29f4f4(0x188));if(!gl)return console[_0x29f4f4(0x190)](_0x29f4f4(0x141)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x29f4f4(0x18c)],bufferCanvas[_0x29f4f4(0x18d)]);}function createShader(_0x4c6c27,_0xb9048e){const _0x107cd7=a0_0x5bf003,_0x1ed594=gl['createShader'](_0x4c6c27);gl[_0x107cd7(0x16c)](_0x1ed594,_0xb9048e),gl['compileShader'](_0x1ed594);if(!gl[_0x107cd7(0x143)](_0x1ed594,gl[_0x107cd7(0x171)]))return console[_0x107cd7(0x190)](gl['getShaderInfoLog'](_0x1ed594)),gl['deleteShader'](_0x1ed594),null;return _0x1ed594;}async function setupShaders(){const _0x389385=a0_0x5bf003,_0x2eef40=await loadShaderSource(_0x389385(0x150)),_0x2d2626=await loadShaderSource(_0x389385(0x191)),_0x4390b4=createShader(gl['VERTEX_SHADER'],_0x2eef40),_0x2bf467=createShader(gl[_0x389385(0x13e)],_0x2d2626);return program=gl[_0x389385(0x17e)](),gl[_0x389385(0x179)](program,_0x4390b4),gl[_0x389385(0x179)](program,_0x2bf467),gl[_0x389385(0x19d)](program),gl['useProgram'](program),program;}function setupTexture(){const _0x151594=a0_0x5bf003;texture=gl[_0x151594(0x184)](),gl[_0x151594(0x173)](gl[_0x151594(0x193)],texture),gl[_0x151594(0x151)](gl[_0x151594(0x193)],gl[_0x151594(0x199)],gl[_0x151594(0x15f)]),gl[_0x151594(0x151)](gl['TEXTURE_2D'],gl['TEXTURE_MAG_FILTER'],gl[_0x151594(0x15f)]),gl[_0x151594(0x151)](gl[_0x151594(0x193)],gl[_0x151594(0x18f)],gl[_0x151594(0x185)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x151594(0x163)],gl['CLAMP_TO_EDGE']),gl[_0x151594(0x15c)](gl[_0x151594(0x16b)](program,_0x151594(0x157)),gameWidth,gameHeight),gl[_0x151594(0x15c)](gl[_0x151594(0x16b)](program,_0x151594(0x164)),gl[_0x151594(0x149)][_0x151594(0x18c)],gl[_0x151594(0x149)][_0x151594(0x18d)]),gl[_0x151594(0x1a1)](gl[_0x151594(0x16b)](program,'smooth_width'),gameWidth/gl[_0x151594(0x149)][_0x151594(0x18c)]),gl[_0x151594(0x1a1)](gl[_0x151594(0x16b)](program,_0x151594(0x178)),gameHeight/gl[_0x151594(0x149)][_0x151594(0x18d)]);}function setupBuffers(){const _0x58d03f=a0_0x5bf003,_0x141721=gl[_0x58d03f(0x19c)]();gl[_0x58d03f(0x18e)](gl['ARRAY_BUFFER'],_0x141721),gl[_0x58d03f(0x161)](gl[_0x58d03f(0x197)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x58d03f(0x15e)]);const _0x3d71ab=gl[_0x58d03f(0x167)](program,'position');gl[_0x58d03f(0x165)](_0x3d71ab),gl['vertexAttribPointer'](_0x3d71ab,0x2,gl['FLOAT'],![],0x0,0x0);const _0x47ba4f=gl[_0x58d03f(0x19c)]();gl[_0x58d03f(0x18e)](gl[_0x58d03f(0x197)],_0x47ba4f),gl[_0x58d03f(0x161)](gl[_0x58d03f(0x197)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x58d03f(0x15e)]);const _0x413d28=gl[_0x58d03f(0x167)](program,_0x58d03f(0x1a3));gl[_0x58d03f(0x165)](_0x413d28),gl[_0x58d03f(0x14d)](_0x413d28,0x2,gl[_0x58d03f(0x13f)],![],0x0,0x0);}function a0_0x2f7b(){const _0x258749=['COLOR_BUFFER_BIT','texcoord','devicePixelRatio','drawArrays','FRAGMENT_SHADER','FLOAT','2394LmZLtE','WebGL2\x20not\x20supported','188810cYeSDo','getShaderParameter','.setting-container','add','floor','px\x20','text','canvas','classList','close','gTable','vertexAttribPointer','1273975tSZmkC','texImage2D','./src/shaders/vertexShader.glsl','texParameteri','transform','UNSIGNED_BYTE','getElementById','rTable','setItem','game_size','forEach','style','textured','toLowerCase','uniform2f','imageSmoothingEnabled','STATIC_DRAW','NEAREST','.stateTitle,\x20.stateDate','bufferData','.bin','TEXTURE_WRAP_T','render_size','enableVertexAttribArray','DOMContentLoaded','getAttribLocation','setProperty','warm','screenSize','getUniformLocation','shaderSource','clientWidth','TRIANGLE_STRIP','getPixelData','322264ulpnBy','COMPILE_STATUS','_temperature','bindTexture','./src/lut/lut64_','canvas-container','img-shader','getItem','smooth_height','attachShader','data','top\x20center','764352bnJJla','querySelectorAll','createProgram','zoom','drawImage','scale(','fefs','then','createTexture','CLAMP_TO_EDGE','35ATBToN','341cXukZG','webgl2','0,0,','clearRect','_streng','width','height','bindBuffer','TEXTURE_WRAP_S','error','./src/shaders/fragmentShader.glsl','set','TEXTURE_2D','.message-container','771066HuTNuJ','393HRRuLV','ARRAY_BUFFER','RGBA','TEXTURE_MIN_FILTER','gbc','10612EYylmA','createBuffer','linkProgram','arrayBuffer','1ABFouT','slice','uniform1f'];a0_0x2f7b=function(){return _0x258749;};return a0_0x2f7b();}async function renderPixel(_0x2dc02d){const _0x4dccbc=a0_0x5bf003,_0x28bb05=a0_0x3c8370[_0x4dccbc(0x16f)]();if(!_0x28bb05)return;await loadLUT64();const _0x4f3058=new Uint8ClampedArray(gameWidth*gameHeight*0x4);if(!window[_0x4dccbc(0x155)]){window['rTable']=new Uint32Array(0x100),window[_0x4dccbc(0x14c)]=new Uint32Array(0x100),window['bTable']=new Uint32Array(0x100);for(let _0x1b38d0=0x0;_0x1b38d0<0x100;_0x1b38d0++){window['rTable'][_0x1b38d0]=(_0x1b38d0>>0x2)*0x40*0x40*0x3,window[_0x4dccbc(0x14c)][_0x1b38d0]=(_0x1b38d0>>0x2)*0x40*0x3,window['bTable'][_0x1b38d0]=(_0x1b38d0>>0x2)*0x3;}}let _0x3b78f6=0x0,_0x2c3035=0x0;for(let _0x152c95=0x0;_0x152c95<gameHeight;_0x152c95++){for(let _0x104df5=0x0;_0x104df5<gameWidth;_0x104df5++){const _0x113401=_0x28bb05[_0x2c3035+_0x104df5],_0x57ef21=_0x113401&0xff,_0x15c5af=_0x113401>>0x8&0xff,_0x5802c2=_0x113401>>0x10&0xff,_0x2bfed2=window['rTable'][_0x57ef21]+window[_0x4dccbc(0x14c)][_0x15c5af]+window['bTable'][_0x5802c2];_0x4f3058[_0x3b78f6]=lut64[_0x2bfed2],_0x4f3058[_0x3b78f6+0x1]=lut64[_0x2bfed2+0x1],_0x4f3058[_0x3b78f6+0x2]=lut64[_0x2bfed2+0x2],_0x4f3058[_0x3b78f6+0x3]=0xff,_0x3b78f6+=0x4;}_0x2c3035+=gameStride;}if(_0x2dc02d===_0x4dccbc(0x188))gl[_0x4dccbc(0x173)](gl[_0x4dccbc(0x193)],texture),gl[_0x4dccbc(0x14f)](gl[_0x4dccbc(0x193)],0x0,gl[_0x4dccbc(0x198)],gameWidth,gameHeight,0x0,gl[_0x4dccbc(0x198)],gl[_0x4dccbc(0x153)],_0x4f3058),gl['clear'](gl[_0x4dccbc(0x1a2)]),gl[_0x4dccbc(0x13d)](gl[_0x4dccbc(0x16e)],0x0,0x4);else _0x2dc02d==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas['getContext']('2d',{'alpha':![]}),ctx2d[_0x4dccbc(0x15d)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj[_0x4dccbc(0x17a)][_0x4dccbc(0x192)](_0x4f3058),createImageBitmap(imageDataObj)[_0x4dccbc(0x183)](_0x5b9e35=>{const _0x4b1789=_0x4dccbc;ctx2d[_0x4b1789(0x18a)](0x0,0x0,bufferCanvas[_0x4b1789(0x18c)],bufferCanvas[_0x4b1789(0x18d)]),ctx2d[_0x4b1789(0x180)](_0x5b9e35,0x0,0x0),_0x5b9e35[_0x4b1789(0x14b)]();}));requestAnimationFrame(()=>renderPixel(_0x2dc02d));}function a0_0x5332(_0x11bad4,_0x5161c3){const _0x2f7b0d=a0_0x2f7b();return a0_0x5332=function(_0x5332f9,_0x17a29e){_0x5332f9=_0x5332f9-0x13c;let _0xc24733=_0x2f7b0d[_0x5332f9];return _0xc24733;},a0_0x5332(_0x11bad4,_0x5161c3);}export async function switchRenderMode(_0x3865dc){const _0xac7ba0=a0_0x5bf003;systemType=gameName[_0xac7ba0(0x1a0)](-0x3);if(_0x3865dc==='2d')setupStyle('2d'),renderPixel('2d');else _0x3865dc===_0xac7ba0(0x188)&&(setupStyle('webgl2'),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0xac7ba0(0x188)));}document['addEventListener'](a0_0x5bf003(0x166),function(){});