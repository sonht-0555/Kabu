(function(_0x5ecf19,_0x21a620){const _0x7a96b4=a0_0x5c8d,_0x3370bd=_0x5ecf19();while(!![]){try{const _0x29c38b=-parseInt(_0x7a96b4(0x76))/0x1*(parseInt(_0x7a96b4(0xa3))/0x2)+parseInt(_0x7a96b4(0x95))/0x3*(-parseInt(_0x7a96b4(0xa5))/0x4)+parseInt(_0x7a96b4(0xad))/0x5*(parseInt(_0x7a96b4(0x94))/0x6)+parseInt(_0x7a96b4(0x8e))/0x7*(parseInt(_0x7a96b4(0x8c))/0x8)+parseInt(_0x7a96b4(0x71))/0x9*(parseInt(_0x7a96b4(0xb0))/0xa)+-parseInt(_0x7a96b4(0xaa))/0xb+-parseInt(_0x7a96b4(0x9b))/0xc;if(_0x29c38b===_0x21a620)break;else _0x3370bd['push'](_0x3370bd['shift']());}catch(_0xea17a4){_0x3370bd['push'](_0x3370bd['shift']());}}}(a0_0x15f2,0xc3c99));import*as a0_0x11e99f from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0x5c8d(_0x13171d,_0x385fc2){const _0x15f244=a0_0x15f2();return a0_0x5c8d=function(_0x5c8d16,_0x1914db){_0x5c8d16=_0x5c8d16-0x70;let _0xb503ab=_0x15f244[_0x5c8d16];return _0xb503ab;},a0_0x5c8d(_0x13171d,_0x385fc2);}async function loadLUT64(){const _0x3c82c4=a0_0x5c8d;systemType=gameName[_0x3c82c4(0x98)](-0x3);const _0x314456=(localStorage[_0x3c82c4(0x9a)](gameName+_0x3c82c4(0x85))||_0x3c82c4(0xae))[_0x3c82c4(0x7d)]();if(!lut64||lut64Profile!==_0x314456){const _0x10c123=_0x3c82c4(0x8f)+_0x314456+_0x3c82c4(0xa4);console[_0x3c82c4(0x8d)](_0x10c123);const _0x185e43=await fetch(_0x10c123),_0x16fbd8=await _0x185e43[_0x3c82c4(0x73)]();lut64=new Uint8Array(_0x16fbd8),lut64Profile=_0x314456;}}function a0_0x15f2(){const _0x3880e1=['9uzkvoW','attachShader','arrayBuffer','render_size','low-power','297979HSoBGG','width','viewport','getPixelData','getUniformLocation','webgl','enableVertexAttribArray','toLowerCase','putImageData','set','texParameteri','bufferData','TEXTURE_WRAP_T','linkProgram','clearRect','_temperature','bindBuffer','TEXTURE_MIN_FILTER','webgl_full','height','bindTexture','createBuffer','261320pzmDZR','log','140pargsd','./src/lut/lut64_','smooth_height','drawArrays','texcoord','STATIC_DRAW','6QuHaOH','1149dIkjbH','createTexture','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','slice','position','getItem','6930840PLFAlt','COLOR_BUFFER_BIT','game_size','clear','vertexAttribPointer','VERTEX_SHADER','TEXTURE_MAG_FILTER','getContext','2cSYqMk','_4.0.bin','3436qerJei','texImage2D','canvas','useProgram','uniform2f','3623664bmMBNd','shaderSource','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','834255ljudmm','none','imageSmoothingEnabled','15157640jlScqh','createShader','FLOAT','CLAMP_TO_EDGE','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','getAttribLocation','TEXTURE_2D','RGBA','ARRAY_BUFFER'];a0_0x15f2=function(){return _0x3880e1;};return a0_0x15f2();}function setupWebGL_Shader(_0x29f29e){const _0x5bcee8=a0_0x5c8d;gl=bufferCanvas[_0x5bcee8(0xa2)](_0x5bcee8(0x7b),{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x5bcee8(0x75)}),gl[_0x5bcee8(0x78)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x5bcee8(0x89)]);function _0x3b3d9e(_0x18cbf4,_0x2e2bc2){const _0x195f97=_0x5bcee8,_0x8bb120=gl[_0x195f97(0xb1)](_0x18cbf4);return gl[_0x195f97(0xab)](_0x8bb120,_0x2e2bc2),gl['compileShader'](_0x8bb120),_0x8bb120;}vs=_0x5bcee8(0xb4);if(_0x29f29e===_0x5bcee8(0x7b))fs=_0x5bcee8(0x97);else _0x29f29e==='webgl_full'&&(fs=_0x5bcee8(0xac));const _0x456492=_0x3b3d9e(gl[_0x5bcee8(0xa0)],vs),_0x1898c8=_0x3b3d9e(gl['FRAGMENT_SHADER'],fs);return program=gl['createProgram'](),gl[_0x5bcee8(0x72)](program,_0x456492),gl['attachShader'](program,_0x1898c8),gl[_0x5bcee8(0x83)](program),gl[_0x5bcee8(0xa8)](program),program;}function setupTexture_Buffer(_0x229329){const _0xc5784e=a0_0x5c8d;texture=gl[_0xc5784e(0x96)](),gl[_0xc5784e(0x8a)](gl[_0xc5784e(0xb6)],texture),gl[_0xc5784e(0x80)](gl[_0xc5784e(0xb6)],gl[_0xc5784e(0x87)],gl['NEAREST']),gl[_0xc5784e(0x80)](gl[_0xc5784e(0xb6)],gl[_0xc5784e(0xa1)],gl['NEAREST']),gl[_0xc5784e(0x80)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0xc5784e(0xb3)]),gl['texParameteri'](gl[_0xc5784e(0xb6)],gl[_0xc5784e(0x82)],gl[_0xc5784e(0xb3)]);_0x229329===_0xc5784e(0x88)&&(gl['uniform2f'](gl[_0xc5784e(0x7a)](program,_0xc5784e(0x9d)),gameWidth,gameHeight),gl[_0xc5784e(0xa9)](gl[_0xc5784e(0x7a)](program,_0xc5784e(0x74)),gl[_0xc5784e(0xa7)][_0xc5784e(0x77)],gl['canvas'][_0xc5784e(0x89)]),gl['uniform1f'](gl[_0xc5784e(0x7a)](program,'smooth_width'),gameWidth/gl[_0xc5784e(0xa7)][_0xc5784e(0x77)]),gl['uniform1f'](gl[_0xc5784e(0x7a)](program,_0xc5784e(0x90)),gameHeight/gl[_0xc5784e(0xa7)][_0xc5784e(0x89)]));const _0xd62124=gl[_0xc5784e(0x8b)]();gl[_0xc5784e(0x86)](gl[_0xc5784e(0x70)],_0xd62124),gl[_0xc5784e(0x81)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0xc5784e(0x93)]),gl[_0xc5784e(0x9f)](gl[_0xc5784e(0xb5)](program,_0xc5784e(0x99)),0x2,gl[_0xc5784e(0xb2)],![],0x0,0x0),gl[_0xc5784e(0x7c)](gl[_0xc5784e(0xb5)](program,'position'));const _0xf625b3=gl[_0xc5784e(0x8b)]();gl[_0xc5784e(0x86)](gl[_0xc5784e(0x70)],_0xf625b3),gl[_0xc5784e(0x81)](gl[_0xc5784e(0x70)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0xc5784e(0x93)]),gl['vertexAttribPointer'](gl[_0xc5784e(0xb5)](program,_0xc5784e(0x92)),0x2,gl[_0xc5784e(0xb2)],![],0x0,0x0),gl[_0xc5784e(0x7c)](gl['getAttribLocation'](program,'texcoord'));}function setup2DContext(){const _0xb1a97b=a0_0x5c8d;ctx2d=bufferCanvas[_0xb1a97b(0xa2)]('2d'),ctx2d[_0xb1a97b(0xaf)]=![];}async function renderPixel(_0x2379f8){const _0x4e3dad=a0_0x5c8d,_0x6ad786=a0_0x11e99f[_0x4e3dad(0x79)]();if(!_0x6ad786)return;await loadLUT64();const _0x5a848d=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x399165=0x0;_0x399165<gameHeight;_0x399165++){for(let _0x19537d=0x0;_0x19537d<gameWidth;_0x19537d++){const _0x27d5f4=_0x399165*gameStride+_0x19537d,_0x596c08=(_0x399165*gameWidth+_0x19537d)*0x4,_0x1cd952=_0x6ad786[_0x27d5f4];if(lut64Profile===_0x4e3dad(0xae))_0x5a848d[_0x596c08]=_0x1cd952&0xff,_0x5a848d[_0x596c08+0x1]=_0x1cd952>>0x8&0xff,_0x5a848d[_0x596c08+0x2]=_0x1cd952>>0x10&0xff,_0x5a848d[_0x596c08+0x3]=0xff;else{const _0x11334d=(_0x1cd952&0xff)>>0x2,_0x48681a=(_0x1cd952>>0x8&0xff)>>0x2,_0x58a116=(_0x1cd952>>0x10&0xff)>>0x2,_0x4ec819=(_0x11334d*0x40*0x40+_0x48681a*0x40+_0x58a116)*0x3;_0x5a848d[_0x596c08]=lut64[_0x4ec819],_0x5a848d[_0x596c08+0x1]=lut64[_0x4ec819+0x1],_0x5a848d[_0x596c08+0x2]=lut64[_0x4ec819+0x2],_0x5a848d[_0x596c08+0x3]=0xff;}}}if(_0x2379f8===_0x4e3dad(0x7b))gl[_0x4e3dad(0xa6)](gl[_0x4e3dad(0xb6)],0x0,gl[_0x4e3dad(0xb7)],gameWidth,gameHeight,0x0,gl[_0x4e3dad(0xb7)],gl['UNSIGNED_BYTE'],_0x5a848d),gl[_0x4e3dad(0x9e)](gl[_0x4e3dad(0x9c)]),gl[_0x4e3dad(0x91)](gl['TRIANGLE_STRIP'],0x0,0x4);else _0x2379f8==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x5a848d,gameWidth,gameHeight):imageDataObj['data'][_0x4e3dad(0x7f)](_0x5a848d),ctx2d[_0x4e3dad(0x84)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x4e3dad(0x89)]),ctx2d[_0x4e3dad(0x7e)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x2379f8));}export async function switchRenderMode(_0xd7a981){const _0x14faa2=a0_0x5c8d;systemType=gameName['slice'](-0x3);if(_0xd7a981==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0xd7a981==='webgl')setupStyle('2d'),setupWebGL_Shader(_0x14faa2(0x7b)),setupTexture_Buffer('webgl'),renderPixel(_0x14faa2(0x7b));else _0xd7a981===_0x14faa2(0x88)&&(setupStyle(_0x14faa2(0x88)),setupWebGL_Shader(_0x14faa2(0x88)),setupTexture_Buffer(_0x14faa2(0x88)),renderPixel(_0x14faa2(0x7b)));}}