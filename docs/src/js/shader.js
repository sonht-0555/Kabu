(function(_0x21b620,_0x3b0b70){const _0x5a24de=a0_0x5162,_0x1c296b=_0x21b620();while(!![]){try{const _0x30a7b3=-parseInt(_0x5a24de(0x1d2))/0x1+-parseInt(_0x5a24de(0x1a9))/0x2+-parseInt(_0x5a24de(0x19b))/0x3*(-parseInt(_0x5a24de(0x1d7))/0x4)+-parseInt(_0x5a24de(0x1b0))/0x5*(parseInt(_0x5a24de(0x1b7))/0x6)+-parseInt(_0x5a24de(0x1c3))/0x7+-parseInt(_0x5a24de(0x19f))/0x8*(-parseInt(_0x5a24de(0x1ac))/0x9)+parseInt(_0x5a24de(0x1dc))/0xa*(parseInt(_0x5a24de(0x1e2))/0xb);if(_0x30a7b3===_0x3b0b70)break;else _0x1c296b['push'](_0x1c296b['shift']());}catch(_0x13917f){_0x1c296b['push'](_0x1c296b['shift']());}}}(a0_0x3e82,0xae487));function a0_0x3e82(){const _0x446970=['getAttribLocation','COLOR_BUFFER_BIT','164810hValbA','TEXTURE_WRAP_T','TRIANGLE_STRIP','render_size','createBuffer','STATIC_DRAW','2277VngoTt','webgl_full','game_size','2700261bBmHsb','useProgram','.bin','getItem','3905416qWrRlN','4.0','clear','VERTEX_SHADER','CLAMP_TO_EDGE','width','bindTexture','getContext','createTexture','texImage2D','2718566jcUfvA','compileShader','viewport','9QuqfCB','smooth_height','RGBA','_temperature','5851015AwuGND','createProgram','then','texcoord','warm','_streng','enableVertexAttribArray','6CtvDtw','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','FRAGMENT_SHADER','log','slice','toLowerCase','ARRAY_BUFFER','height','UNSIGNED_BYTE','canvas','imageSmoothingEnabled','getPixelData','8213856EhSCms','bindBuffer','texParameteri','NEAREST','getUniformLocation','low-power','FLOAT','linkProgram','uniform1f','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','position','attachShader','shaderSource','TEXTURE_MAG_FILTER','383074XBaXrO','uniform2f','smooth_width','drawArrays','TEXTURE_2D','4dhpWEu','webgl','vertexAttribPointer'];a0_0x3e82=function(){return _0x446970;};return a0_0x3e82();}import*as a0_0x350791 from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x560d7b=a0_0x5162;systemType=gameName[_0x560d7b(0x1bb)](-0x3);const _0x217dce=localStorage[_0x560d7b(0x19e)](gameName+_0x560d7b(0x1b5))||_0x560d7b(0x1a0),_0x2147b6=(localStorage[_0x560d7b(0x19e)](gameName+_0x560d7b(0x1af))||_0x560d7b(0x1b4))[_0x560d7b(0x1bc)]();if(!lut64||lut64Streng!==_0x217dce||lut64Profile!==_0x2147b6){const _0x14e763='./src/lut/lut64_'+_0x2147b6+'_'+_0x217dce+_0x560d7b(0x19d);console[_0x560d7b(0x1ba)](_0x14e763);const _0x392b2a=await fetch(_0x14e763),_0x5d5823=await _0x392b2a['arrayBuffer']();lut64=new Uint8Array(_0x5d5823),lut64Streng=_0x217dce,lut64Profile=_0x2147b6;}}function setupWebGL_Shader(_0x168e83){const _0x3589a5=a0_0x5162;gl=bufferCanvas[_0x3589a5(0x1a6)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x3589a5(0x1c8)}),gl[_0x3589a5(0x1ab)](0x0,0x0,bufferCanvas[_0x3589a5(0x1a4)],bufferCanvas[_0x3589a5(0x1be)]);function _0x59adb0(_0x3a9725,_0x50acb0){const _0xeb4ab1=_0x3589a5,_0xac23e7=gl['createShader'](_0x3a9725);return gl[_0xeb4ab1(0x1d0)](_0xac23e7,_0x50acb0),gl[_0xeb4ab1(0x1aa)](_0xac23e7),_0xac23e7;}vs=_0x3589a5(0x1b8);if(_0x168e83==='webgl')fs=_0x3589a5(0x1cc);else _0x168e83===_0x3589a5(0x199)&&(fs=_0x3589a5(0x1cd));const _0x199574=_0x59adb0(gl[_0x3589a5(0x1a2)],vs),_0x2f702e=_0x59adb0(gl[_0x3589a5(0x1b9)],fs);return program=gl[_0x3589a5(0x1b1)](),gl[_0x3589a5(0x1cf)](program,_0x199574),gl[_0x3589a5(0x1cf)](program,_0x2f702e),gl[_0x3589a5(0x1ca)](program),gl[_0x3589a5(0x19c)](program),program;}function setupTexture_Buffer(_0x141149){const _0x365f4a=a0_0x5162;texture=gl[_0x365f4a(0x1a7)](),gl[_0x365f4a(0x1a5)](gl['TEXTURE_2D'],texture),gl[_0x365f4a(0x1c5)](gl[_0x365f4a(0x1d6)],gl['TEXTURE_MIN_FILTER'],gl[_0x365f4a(0x1c6)]),gl[_0x365f4a(0x1c5)](gl[_0x365f4a(0x1d6)],gl[_0x365f4a(0x1d1)],gl['NEAREST']),gl['texParameteri'](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_S'],gl[_0x365f4a(0x1a3)]),gl[_0x365f4a(0x1c5)](gl[_0x365f4a(0x1d6)],gl[_0x365f4a(0x1dd)],gl[_0x365f4a(0x1a3)]);_0x141149===_0x365f4a(0x199)&&(gl[_0x365f4a(0x1d3)](gl['getUniformLocation'](program,_0x365f4a(0x19a)),gameWidth,gameHeight),gl['uniform2f'](gl[_0x365f4a(0x1c7)](program,_0x365f4a(0x1df)),gl[_0x365f4a(0x1c0)][_0x365f4a(0x1a4)],gl['canvas'][_0x365f4a(0x1be)]),gl[_0x365f4a(0x1cb)](gl[_0x365f4a(0x1c7)](program,_0x365f4a(0x1d4)),gameWidth/gl[_0x365f4a(0x1c0)][_0x365f4a(0x1a4)]),gl['uniform1f'](gl['getUniformLocation'](program,_0x365f4a(0x1ad)),gameHeight/gl[_0x365f4a(0x1c0)]['height']));const _0x3892a2=gl['createBuffer']();gl[_0x365f4a(0x1c4)](gl[_0x365f4a(0x1bd)],_0x3892a2),gl['bufferData'](gl[_0x365f4a(0x1bd)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x365f4a(0x1e1)]),gl[_0x365f4a(0x1d9)](gl['getAttribLocation'](program,'position'),0x2,gl[_0x365f4a(0x1c9)],![],0x0,0x0),gl['enableVertexAttribArray'](gl[_0x365f4a(0x1da)](program,_0x365f4a(0x1ce)));const _0x3518e1=gl[_0x365f4a(0x1e0)]();gl[_0x365f4a(0x1c4)](gl[_0x365f4a(0x1bd)],_0x3518e1),gl['bufferData'](gl['ARRAY_BUFFER'],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x365f4a(0x1e1)]),gl[_0x365f4a(0x1d9)](gl[_0x365f4a(0x1da)](program,_0x365f4a(0x1b3)),0x2,gl[_0x365f4a(0x1c9)],![],0x0,0x0),gl[_0x365f4a(0x1b6)](gl['getAttribLocation'](program,_0x365f4a(0x1b3)));}function setup2DContext(){const _0x4b2b65=a0_0x5162;ctx2d=bufferCanvas[_0x4b2b65(0x1a6)]('2d'),ctx2d[_0x4b2b65(0x1c1)]=![];}function a0_0x5162(_0x419e7c,_0x3036bb){const _0x3e8204=a0_0x3e82();return a0_0x5162=function(_0x516260,_0x26ff28){_0x516260=_0x516260-0x199;let _0xbe6adb=_0x3e8204[_0x516260];return _0xbe6adb;},a0_0x5162(_0x419e7c,_0x3036bb);}async function renderPixel(_0x211586){const _0x50943c=a0_0x5162,_0x1438bf=a0_0x350791[_0x50943c(0x1c2)]();if(!_0x1438bf)return;await loadLUT64();const _0x4e3ba5=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x12bc10=0x0;_0x12bc10<gameHeight;_0x12bc10++){for(let _0x13561f=0x0;_0x13561f<gameWidth;_0x13561f++){const _0x28393c=_0x12bc10*gameStride+_0x13561f,_0x247b45=(_0x12bc10*gameWidth+_0x13561f)*0x4,_0x863828=_0x1438bf[_0x28393c],_0x26b4cb=(_0x863828&0xff)>>0x2,_0x222732=(_0x863828>>0x8&0xff)>>0x2,_0x213912=(_0x863828>>0x10&0xff)>>0x2,_0x417d85=(_0x26b4cb*0x40*0x40+_0x222732*0x40+_0x213912)*0x3;_0x4e3ba5[_0x247b45]=lut64[_0x417d85],_0x4e3ba5[_0x247b45+0x1]=lut64[_0x417d85+0x1],_0x4e3ba5[_0x247b45+0x2]=lut64[_0x417d85+0x2],_0x4e3ba5[_0x247b45+0x3]=0xff;}}if(_0x211586==='webgl')gl[_0x50943c(0x1a8)](gl[_0x50943c(0x1d6)],0x0,gl[_0x50943c(0x1ae)],gameWidth,gameHeight,0x0,gl[_0x50943c(0x1ae)],gl[_0x50943c(0x1bf)],_0x4e3ba5),gl[_0x50943c(0x1a1)](gl[_0x50943c(0x1db)]),gl[_0x50943c(0x1d5)](gl[_0x50943c(0x1de)],0x0,0x4);else _0x211586==='2d'&&(imageDataObj=new ImageData(_0x4e3ba5,gameWidth,gameHeight),createImageBitmap(imageDataObj)[_0x50943c(0x1b2)](_0x450534=>{const _0x581e78=_0x50943c;ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x581e78(0x1a4)],bufferCanvas['height']),ctx2d['drawImage'](_0x450534,0x0,0x0);}));requestAnimationFrame(()=>renderPixel(_0x211586));}export async function switchRenderMode(_0x2c2476){const _0x5d01a9=a0_0x5162;systemType=gameName[_0x5d01a9(0x1bb)](-0x3);if(_0x2c2476==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x2c2476===_0x5d01a9(0x1d8))setupStyle('2d'),setupWebGL_Shader(_0x5d01a9(0x1d8)),setupTexture_Buffer(_0x5d01a9(0x1d8)),renderPixel(_0x5d01a9(0x1d8));else _0x2c2476==='webgl_full'&&(setupStyle(_0x5d01a9(0x199)),setupWebGL_Shader(_0x5d01a9(0x199)),setupTexture_Buffer(_0x5d01a9(0x199)),renderPixel(_0x5d01a9(0x1d8)));}}