const a0_0x3adccf=a0_0x5124;(function(_0x2133d6,_0x5c8a98){const _0x159bd3=a0_0x5124,_0x27e288=_0x2133d6();while(!![]){try{const _0x3d02f9=parseInt(_0x159bd3(0x1ed))/0x1*(-parseInt(_0x159bd3(0x1f9))/0x2)+-parseInt(_0x159bd3(0x1ff))/0x3+parseInt(_0x159bd3(0x225))/0x4+-parseInt(_0x159bd3(0x217))/0x5*(parseInt(_0x159bd3(0x1f1))/0x6)+-parseInt(_0x159bd3(0x1e3))/0x7*(-parseInt(_0x159bd3(0x1d9))/0x8)+-parseInt(_0x159bd3(0x1e2))/0x9+parseInt(_0x159bd3(0x21d))/0xa;if(_0x3d02f9===_0x5c8a98)break;else _0x27e288['push'](_0x27e288['shift']());}catch(_0x2ba9bd){_0x27e288['push'](_0x27e288['shift']());}}}(a0_0x57ec,0xcaeb8));function a0_0x57ec(){const _0xaa0b68=['3998688MfQfek','getUniformLocation','setProperty','COMPILE_STATUS','log','TEXTURE_MIN_FILTER','drawArrays','scale(','height','text','COLOR_BUFFER_BIT','warm','getShaderParameter','clearRect','attachShader','TEXTURE_2D','TEXTURE_WRAP_T','FRAGMENT_SHADER','deleteShader','createProgram','getAttribLocation','remove','DOMContentLoaded','setItem','5aFMItn','fefs','RGBA','uniform1f','gbc','transform','41862520Rvlooq','createTexture','VERTEX_SHADER','WebGL2\x20not\x20supported','--bg-size','webgl2','enableVertexAttribArray','imageRendering','76940qnXCno','screenSize','createBuffer','CLAMP_TO_EDGE','vertexAttribPointer','getContext','top\x20center','.message-container','TEXTURE_WRAP_S','error','FLOAT','floor','./src/shaders/vertexShader.glsl','canvas-container','UNSIGNED_BYTE','viewport','bindTexture','STATIC_DRAW','.bin','bufferData','drawImage','.stateTitle,\x20.stateDate','clientWidth','classList','texImage2D','canvas','add','2455016QMKKdn','shaderSource','0,0,','zoom','NEAREST','devicePixelRatio','compileShader','crisp-edges','bindBuffer','3195081uBjRFb','14dYQZxj','TEXTURE_MAG_FILTER','render_size','querySelectorAll','transformOrigin','toLowerCase','smooth_height','getShaderInfoLog','game_size','getItem','199398aYOTzQ','textured','useProgram','addEventListener','9015504dtZxlI','getPixelData','uniform2f','_streng','ARRAY_BUFFER','style','getElementById','texcoord','8lUKzbr','./src/lut/lut64_','forEach','slice','width','texParameteri'];a0_0x57ec=function(){return _0xaa0b68;};return a0_0x57ec();}import*as a0_0x2e7601 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x3adccf(0x1f7)](a0_0x3adccf(0x1ee)),bufferCanvas=document[a0_0x3adccf(0x1f7)](a0_0x3adccf(0x1d7)),canvasContainer=document[a0_0x3adccf(0x1f7)](a0_0x3adccf(0x1cb)),imgShader=document['getElementById']('img-shader'),settingContainer=document[a0_0x3adccf(0x1e6)]('.setting-container'),messageContainer=document[a0_0x3adccf(0x1e6)](a0_0x3adccf(0x1c5)),stateTitle=document[a0_0x3adccf(0x1e6)](a0_0x3adccf(0x1d3));async function loadLUT64(){const _0x5696e6=a0_0x3adccf;systemType=gameName[_0x5696e6(0x1fc)](-0x3);const _0x95ef24=localStorage[_0x5696e6(0x1ec)](gameName+_0x5696e6(0x1f4))||'4.0',_0x30db90=(localStorage[_0x5696e6(0x1ec)](gameName+'_temperature')||_0x5696e6(0x20a))[_0x5696e6(0x1e8)]();if(!lut64||lut64Streng!==_0x95ef24||lut64Profile!==_0x30db90){const _0x27f96b=_0x5696e6(0x1fa)+_0x30db90+'_'+_0x95ef24+_0x5696e6(0x1d0);console[_0x5696e6(0x203)](_0x27f96b);const _0x3fbf0a=await fetch(_0x27f96b),_0x1da605=await _0x3fbf0a['arrayBuffer']();lut64=new Uint8Array(_0x1da605),lut64Streng=_0x95ef24,lut64Profile=_0x30db90;}}async function loadShaderSource(_0xbfcd6e){const _0x3b74ba=a0_0x3adccf,_0x28f991=await fetch(_0xbfcd6e);return await _0x28f991[_0x3b74ba(0x208)]();}function setupStyle(_0x9f523e){const _0x7ddc02=a0_0x3adccf;clientWidth=document['documentElement'][_0x7ddc02(0x1d4)];const _0x3bf441=window[_0x7ddc02(0x1de)];systemType===_0x7ddc02(0x21b)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x3bf441/gameWidth),localStorage[_0x7ddc02(0x216)](_0x7ddc02(0x1bf),_0x7ddc02(0x1db)+gameWidth*(integerScaling/_0x3bf441)+','+gameHeight*(integerScaling/_0x3bf441))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x7ddc02(0x1c9)](clientWidth*_0x3bf441/gameWidth),localStorage[_0x7ddc02(0x216)](_0x7ddc02(0x1bf),_0x7ddc02(0x1db)+gameWidth*(integerScaling/_0x3bf441)+','+gameHeight*(integerScaling/_0x3bf441)));if(_0x9f523e==='2d')bufferCanvas['width']=gameWidth,bufferCanvas[_0x7ddc02(0x207)]=gameHeight,bufferCanvas[_0x7ddc02(0x1f6)][_0x7ddc02(0x1dc)]=''+integerScaling/_0x3bf441,bufferCanvas[_0x7ddc02(0x1f6)][_0x7ddc02(0x224)]=_0x7ddc02(0x1e0),canvasContainer['style'][_0x7ddc02(0x1fd)]=gameWidth*(integerScaling/_0x3bf441)+'px',canvasContainer[_0x7ddc02(0x1f6)][_0x7ddc02(0x207)]=gameHeight*(integerScaling/_0x3bf441)+'px',textured[_0x7ddc02(0x1f6)][_0x7ddc02(0x1fd)]=gameWidth*(integerScaling/_0x3bf441)+'px',textured[_0x7ddc02(0x1f6)][_0x7ddc02(0x207)]=gameHeight*(integerScaling/_0x3bf441)+'px',imgShader['style'][_0x7ddc02(0x21c)]=_0x7ddc02(0x206)+integerScaling/_0x3bf441/upscaleShader+')',settingContainer[_0x7ddc02(0x1fb)](function(_0x3e93d5){const _0x133d4b=_0x7ddc02;_0x3e93d5[_0x133d4b(0x1f6)]['width']=gameWidth*(integerScaling/_0x3bf441)+'px',_0x3e93d5[_0x133d4b(0x1f6)][_0x133d4b(0x207)]=gameHeight*(integerScaling/_0x3bf441)+'px';}),messageContainer['forEach'](function(_0x2b101c){const _0x547091=_0x7ddc02;_0x2b101c[_0x547091(0x1f6)]['width']=gameWidth+'px',_0x2b101c[_0x547091(0x1f6)][_0x547091(0x207)]=gameHeight+'px',_0x2b101c['style'][_0x547091(0x1dc)]=''+integerScaling/_0x3bf441;}),stateTitle['forEach'](function(_0xa9f0d9){const _0x9d65a9=_0x7ddc02;_0xa9f0d9[_0x9d65a9(0x1d5)][_0x9d65a9(0x214)](_0x9d65a9(0x218));});else _0x9f523e===_0x7ddc02(0x222)&&(bufferCanvas['width']=clientWidth*upscaleFactor,bufferCanvas[_0x7ddc02(0x207)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x7ddc02(0x1f6)]['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x7ddc02(0x1f6)][_0x7ddc02(0x224)]='',canvasContainer[_0x7ddc02(0x1f6)][_0x7ddc02(0x1fd)]=clientWidth+'px',canvasContainer['style'][_0x7ddc02(0x207)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x7ddc02(0x1f6)][_0x7ddc02(0x1fd)]=clientWidth+'px',textured[_0x7ddc02(0x1f6)][_0x7ddc02(0x207)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style'][_0x7ddc02(0x21c)]=_0x7ddc02(0x206)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x7ddc02(0x1fb)](function(_0x521ce8){const _0x397dc6=_0x7ddc02;_0x521ce8[_0x397dc6(0x1f6)][_0x397dc6(0x1fd)]=clientWidth+'px',_0x521ce8[_0x397dc6(0x1f6)][_0x397dc6(0x207)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x7ddc02(0x1fb)](function(_0x4eb565){const _0x661f0e=_0x7ddc02;_0x4eb565['style']['width']=gameWidth+'px',_0x4eb565[_0x661f0e(0x1f6)]['height']=gameHeight+'px',_0x4eb565[_0x661f0e(0x1f6)][_0x661f0e(0x1dc)]=''+clientWidth/gameWidth;}),stateTitle[_0x7ddc02(0x1fb)](function(_0x3d6e4e){const _0x333f03=_0x7ddc02;_0x3d6e4e[_0x333f03(0x1d5)][_0x333f03(0x1d8)]('fefs');}));imgShader[_0x7ddc02(0x1f6)][_0x7ddc02(0x1fd)]=gameWidth*upscaleShader+'px',imgShader['style']['height']=gameHeight*upscaleShader+'px',imgShader[_0x7ddc02(0x1f6)][_0x7ddc02(0x1e7)]=_0x7ddc02(0x1c4),imgShader[_0x7ddc02(0x1f6)][_0x7ddc02(0x201)](_0x7ddc02(0x221),upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x440baf=a0_0x3adccf;gl=bufferCanvas[_0x440baf(0x1c3)]('webgl2');if(!gl)return console[_0x440baf(0x1c7)](_0x440baf(0x220)),null;gl[_0x440baf(0x1cd)](0x0,0x0,bufferCanvas[_0x440baf(0x1fd)],bufferCanvas[_0x440baf(0x207)]);}function createShader(_0x3a47f9,_0x1c263e){const _0x5818f6=a0_0x3adccf,_0x63f406=gl['createShader'](_0x3a47f9);gl[_0x5818f6(0x1da)](_0x63f406,_0x1c263e),gl[_0x5818f6(0x1df)](_0x63f406);if(!gl[_0x5818f6(0x20b)](_0x63f406,gl[_0x5818f6(0x202)]))return console['error'](gl[_0x5818f6(0x1ea)](_0x63f406)),gl[_0x5818f6(0x211)](_0x63f406),null;return _0x63f406;}async function setupShaders(){const _0x54e0d7=a0_0x3adccf,_0x28c66a=await loadShaderSource(_0x54e0d7(0x1ca)),_0x230b46=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x5b19dd=createShader(gl[_0x54e0d7(0x21f)],_0x28c66a),_0x185426=createShader(gl[_0x54e0d7(0x210)],_0x230b46);return program=gl[_0x54e0d7(0x212)](),gl['attachShader'](program,_0x5b19dd),gl[_0x54e0d7(0x20d)](program,_0x185426),gl['linkProgram'](program),gl[_0x54e0d7(0x1ef)](program),program;}function setupTexture(){const _0x6ce45e=a0_0x3adccf;texture=gl[_0x6ce45e(0x21e)](),gl[_0x6ce45e(0x1ce)](gl['TEXTURE_2D'],texture),gl[_0x6ce45e(0x1fe)](gl[_0x6ce45e(0x20e)],gl[_0x6ce45e(0x204)],gl[_0x6ce45e(0x1dd)]),gl[_0x6ce45e(0x1fe)](gl[_0x6ce45e(0x20e)],gl[_0x6ce45e(0x1e4)],gl[_0x6ce45e(0x1dd)]),gl[_0x6ce45e(0x1fe)](gl['TEXTURE_2D'],gl[_0x6ce45e(0x1c6)],gl[_0x6ce45e(0x1c1)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x6ce45e(0x20f)],gl[_0x6ce45e(0x1c1)]),gl['uniform2f'](gl[_0x6ce45e(0x200)](program,_0x6ce45e(0x1eb)),gameWidth,gameHeight),gl[_0x6ce45e(0x1f3)](gl['getUniformLocation'](program,_0x6ce45e(0x1e5)),gl[_0x6ce45e(0x1d7)][_0x6ce45e(0x1fd)],gl[_0x6ce45e(0x1d7)][_0x6ce45e(0x207)]),gl[_0x6ce45e(0x21a)](gl[_0x6ce45e(0x200)](program,'smooth_width'),gameWidth/gl[_0x6ce45e(0x1d7)][_0x6ce45e(0x1fd)]),gl['uniform1f'](gl['getUniformLocation'](program,_0x6ce45e(0x1e9)),gameHeight/gl[_0x6ce45e(0x1d7)][_0x6ce45e(0x207)]);}function a0_0x5124(_0x32e696,_0x7f63ae){const _0x57ec06=a0_0x57ec();return a0_0x5124=function(_0x512430,_0x59625a){_0x512430=_0x512430-0x1bf;let _0xe39a8e=_0x57ec06[_0x512430];return _0xe39a8e;},a0_0x5124(_0x32e696,_0x7f63ae);}function setupBuffers(){const _0x520cd0=a0_0x3adccf,_0x51e825=gl[_0x520cd0(0x1c0)]();gl[_0x520cd0(0x1e1)](gl['ARRAY_BUFFER'],_0x51e825),gl[_0x520cd0(0x1d1)](gl[_0x520cd0(0x1f5)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x520cd0(0x1cf)]);const _0xeae8cb=gl[_0x520cd0(0x213)](program,'position');gl[_0x520cd0(0x223)](_0xeae8cb),gl['vertexAttribPointer'](_0xeae8cb,0x2,gl[_0x520cd0(0x1c8)],![],0x0,0x0);const _0x33e095=gl[_0x520cd0(0x1c0)]();gl[_0x520cd0(0x1e1)](gl[_0x520cd0(0x1f5)],_0x33e095),gl['bufferData'](gl[_0x520cd0(0x1f5)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']);const _0x386316=gl[_0x520cd0(0x213)](program,_0x520cd0(0x1f8));gl['enableVertexAttribArray'](_0x386316),gl[_0x520cd0(0x1c2)](_0x386316,0x2,gl[_0x520cd0(0x1c8)],![],0x0,0x0);}async function renderPixel(_0x35f016){const _0x516a97=a0_0x3adccf,_0x2a47a8=a0_0x2e7601[_0x516a97(0x1f2)]();if(!_0x2a47a8)return;await loadLUT64();const _0x1682ee=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x13894d=0x0;_0x13894d<gameHeight;_0x13894d++){for(let _0x35a46c=0x0;_0x35a46c<gameWidth;_0x35a46c++){const _0x210169=_0x13894d*gameStride+_0x35a46c,_0x58f0b7=(_0x13894d*gameWidth+_0x35a46c)*0x4,_0x3c4f16=_0x2a47a8[_0x210169],_0x695100=(_0x3c4f16&0xff)>>0x2,_0x31d040=(_0x3c4f16>>0x8&0xff)>>0x2,_0x350662=(_0x3c4f16>>0x10&0xff)>>0x2,_0x50a456=(_0x695100*0x40*0x40+_0x31d040*0x40+_0x350662)*0x3;_0x1682ee[_0x58f0b7]=lut64[_0x50a456],_0x1682ee[_0x58f0b7+0x1]=lut64[_0x50a456+0x1],_0x1682ee[_0x58f0b7+0x2]=lut64[_0x50a456+0x2],_0x1682ee[_0x58f0b7+0x3]=0xff;}}if(_0x35f016===_0x516a97(0x222))gl[_0x516a97(0x1ce)](gl['TEXTURE_2D'],texture),gl[_0x516a97(0x1d6)](gl[_0x516a97(0x20e)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x516a97(0x219)],gl[_0x516a97(0x1cc)],_0x1682ee),gl['clear'](gl[_0x516a97(0x209)]),gl[_0x516a97(0x205)](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x35f016==='2d'){ctx2d=bufferCanvas[_0x516a97(0x1c3)]('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x1a5761=new ImageData(_0x1682ee,gameWidth,gameHeight);createImageBitmap(_0x1a5761)['then'](_0x5c33c7=>{const _0x1fadc8=_0x516a97;ctx2d[_0x1fadc8(0x20c)](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x1fadc8(0x207)]),ctx2d[_0x1fadc8(0x1d2)](_0x5c33c7,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x35f016));}export async function switchRenderMode(_0x433f98){const _0x40c3e5=a0_0x3adccf;systemType=gameName['slice'](-0x3);if(_0x433f98==='2d')setupStyle('2d'),renderPixel('2d');else _0x433f98===_0x40c3e5(0x222)&&(setupStyle(_0x40c3e5(0x222)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x40c3e5(0x222)));}document[a0_0x3adccf(0x1f0)](a0_0x3adccf(0x215),function(){});