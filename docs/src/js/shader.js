const a0_0x2abc8a=a0_0x92ff;(function(_0x3a530b,_0x24a548){const _0x4d2c1a=a0_0x92ff,_0x5809ea=_0x3a530b();while(!![]){try{const _0x172fae=parseInt(_0x4d2c1a(0x134))/0x1+-parseInt(_0x4d2c1a(0x10b))/0x2*(-parseInt(_0x4d2c1a(0x11e))/0x3)+-parseInt(_0x4d2c1a(0xe6))/0x4*(-parseInt(_0x4d2c1a(0x12b))/0x5)+parseInt(_0x4d2c1a(0x107))/0x6*(-parseInt(_0x4d2c1a(0x10f))/0x7)+parseInt(_0x4d2c1a(0xe0))/0x8*(parseInt(_0x4d2c1a(0x102))/0x9)+-parseInt(_0x4d2c1a(0xf2))/0xa*(parseInt(_0x4d2c1a(0x112))/0xb)+parseInt(_0x4d2c1a(0x108))/0xc;if(_0x172fae===_0x24a548)break;else _0x5809ea['push'](_0x5809ea['shift']());}catch(_0x144113){_0x5809ea['push'](_0x5809ea['shift']());}}}(a0_0xb236,0xb6907));import*as a0_0x14bd7e from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;function a0_0x92ff(_0x3370f2,_0x1768d1){const _0xb23681=a0_0xb236();return a0_0x92ff=function(_0x92ff9,_0x1ba93f){_0x92ff9=_0x92ff9-0xde;let _0x54216f=_0xb23681[_0x92ff9];return _0x54216f;},a0_0x92ff(_0x3370f2,_0x1768d1);}const textured=document['getElementById'](a0_0x2abc8a(0xf1)),bufferCanvas=document[a0_0x2abc8a(0xe7)](a0_0x2abc8a(0x11f)),canvasContainer=document[a0_0x2abc8a(0xe7)](a0_0x2abc8a(0x11a)),imgShader=document[a0_0x2abc8a(0xe7)](a0_0x2abc8a(0x13d)),settingContainer=document[a0_0x2abc8a(0xe4)](a0_0x2abc8a(0xf6)),messageContainer=document['querySelectorAll'](a0_0x2abc8a(0x124)),stateTitle=document[a0_0x2abc8a(0xe4)](a0_0x2abc8a(0x14a));let imageDataObj=null;async function loadLUT64(){const _0x3aee97=a0_0x2abc8a;systemType=gameName['slice'](-0x3);const _0xce95e8=localStorage[_0x3aee97(0x148)](gameName+_0x3aee97(0xe8))||_0x3aee97(0x131),_0x5a3300=(localStorage[_0x3aee97(0x148)](gameName+_0x3aee97(0xe1))||_0x3aee97(0x12f))[_0x3aee97(0x116)]();if(!lut64||lut64Streng!==_0xce95e8||lut64Profile!==_0x5a3300){const _0x267ffc=_0x3aee97(0x139)+_0x5a3300+'_'+_0xce95e8+_0x3aee97(0x121);console[_0x3aee97(0x109)](_0x267ffc);const _0x410303=await fetch(_0x267ffc),_0x40a287=await _0x410303[_0x3aee97(0x129)]();lut64=new Uint8Array(_0x40a287),lut64Streng=_0xce95e8,lut64Profile=_0x5a3300;}}async function loadShaderSource(_0x5bc2e0){const _0x3c79af=a0_0x2abc8a,_0x381e03=await fetch(_0x5bc2e0);return await _0x381e03[_0x3c79af(0x135)]();}function setupStyle(_0x186712){const _0x188ba4=a0_0x2abc8a;clientWidth=document['documentElement'][_0x188ba4(0xe2)];const _0x200b14=window[_0x188ba4(0xe3)];systemType===_0x188ba4(0x105)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x188ba4(0x114)](clientWidth*_0x200b14/gameWidth),localStorage[_0x188ba4(0xfa)](_0x188ba4(0x142),'0,0,'+gameWidth*(integerScaling/_0x200b14)+','+gameHeight*(integerScaling/_0x200b14))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x188ba4(0x114)](clientWidth*_0x200b14/gameWidth),localStorage[_0x188ba4(0xfa)]('screenSize',_0x188ba4(0x101)+gameWidth*(integerScaling/_0x200b14)+','+gameHeight*(integerScaling/_0x200b14)));if(_0x186712==='2d')bufferCanvas[_0x188ba4(0xea)]=gameWidth,bufferCanvas[_0x188ba4(0xf9)]=gameHeight,bufferCanvas[_0x188ba4(0x106)][_0x188ba4(0x11d)]=''+integerScaling/_0x200b14,bufferCanvas[_0x188ba4(0x106)][_0x188ba4(0x13a)]=_0x188ba4(0x146),canvasContainer[_0x188ba4(0x106)][_0x188ba4(0xea)]=gameWidth*(integerScaling/_0x200b14)+'px',canvasContainer[_0x188ba4(0x106)][_0x188ba4(0xf9)]=gameHeight*(integerScaling/_0x200b14)+'px',textured[_0x188ba4(0x106)][_0x188ba4(0xea)]=gameWidth*(integerScaling/_0x200b14)+'px',textured[_0x188ba4(0x106)]['height']=gameHeight*(integerScaling/_0x200b14)+'px',imgShader[_0x188ba4(0x106)][_0x188ba4(0xf8)]=_0x188ba4(0x137)+integerScaling/_0x200b14/upscaleShader+')',settingContainer[_0x188ba4(0xf3)](function(_0x34d978){const _0x416f8d=_0x188ba4;_0x34d978['style'][_0x416f8d(0xea)]=gameWidth*(integerScaling/_0x200b14)+'px',_0x34d978[_0x416f8d(0x106)][_0x416f8d(0xf9)]=gameHeight*(integerScaling/_0x200b14)+'px';}),messageContainer[_0x188ba4(0xf3)](function(_0x4df649){const _0x331a03=_0x188ba4;_0x4df649[_0x331a03(0x106)]['width']=gameWidth+'px',_0x4df649['style']['height']=gameHeight+'px',_0x4df649['style']['zoom']=''+integerScaling/_0x200b14;}),stateTitle[_0x188ba4(0xf3)](function(_0x3d7a0c){const _0x354eaa=_0x188ba4;_0x3d7a0c[_0x354eaa(0x11b)][_0x354eaa(0xde)](_0x354eaa(0x13e));});else _0x186712==='webgl2'&&(bufferCanvas[_0x188ba4(0xea)]=clientWidth*upscaleFactor,bufferCanvas[_0x188ba4(0xf9)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x188ba4(0x106)][_0x188ba4(0x11d)]=''+0x1/upscaleFactor,bufferCanvas['style']['imageRendering']='',canvasContainer[_0x188ba4(0x106)][_0x188ba4(0xea)]=clientWidth+'px',canvasContainer[_0x188ba4(0x106)][_0x188ba4(0xf9)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x188ba4(0x106)][_0x188ba4(0xea)]=clientWidth+'px',textured[_0x188ba4(0x106)][_0x188ba4(0xf9)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x188ba4(0x106)][_0x188ba4(0xf8)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer['forEach'](function(_0x33d2cf){const _0x101514=_0x188ba4;_0x33d2cf[_0x101514(0x106)][_0x101514(0xea)]=clientWidth+'px',_0x33d2cf[_0x101514(0x106)][_0x101514(0xf9)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x188ba4(0xf3)](function(_0x267b33){const _0x5c3009=_0x188ba4;_0x267b33['style'][_0x5c3009(0xea)]=gameWidth+'px',_0x267b33[_0x5c3009(0x106)][_0x5c3009(0xf9)]=gameHeight+'px',_0x267b33['style'][_0x5c3009(0x11d)]=''+clientWidth/gameWidth;}),stateTitle[_0x188ba4(0xf3)](function(_0x5eb15e){const _0x1f9beb=_0x188ba4;_0x5eb15e[_0x1f9beb(0x11b)][_0x1f9beb(0x12e)](_0x1f9beb(0x13e));}));imgShader[_0x188ba4(0x106)][_0x188ba4(0xea)]=gameWidth*upscaleShader+'px',imgShader[_0x188ba4(0x106)]['height']=gameHeight*upscaleShader+'px',imgShader[_0x188ba4(0x106)]['transformOrigin']='top\x20center',imgShader[_0x188ba4(0x106)][_0x188ba4(0x147)](_0x188ba4(0x119),upscaleShader+_0x188ba4(0xee)+upscaleShader+'px');}function setupWebGL(){const _0x6583b0=a0_0x2abc8a;gl=bufferCanvas[_0x6583b0(0x12d)]('webgl2');if(!gl)return console['error'](_0x6583b0(0x10e)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x6583b0(0xea)],bufferCanvas['height']);}function createShader(_0x1b9a27,_0x42440a){const _0x1922c8=a0_0x2abc8a,_0x41f840=gl[_0x1922c8(0x117)](_0x1b9a27);gl[_0x1922c8(0x10c)](_0x41f840,_0x42440a),gl[_0x1922c8(0x14d)](_0x41f840);if(!gl[_0x1922c8(0x132)](_0x41f840,gl[_0x1922c8(0x103)]))return console[_0x1922c8(0x145)](gl[_0x1922c8(0x110)](_0x41f840)),gl['deleteShader'](_0x41f840),null;return _0x41f840;}async function setupShaders(){const _0x2503e2=a0_0x2abc8a,_0x1c7143=await loadShaderSource(_0x2503e2(0x138)),_0x59947f=await loadShaderSource(_0x2503e2(0xfb)),_0x1c9019=createShader(gl[_0x2503e2(0x12c)],_0x1c7143),_0x5f52d2=createShader(gl['FRAGMENT_SHADER'],_0x59947f);return program=gl[_0x2503e2(0xfc)](),gl[_0x2503e2(0xf4)](program,_0x1c9019),gl['attachShader'](program,_0x5f52d2),gl[_0x2503e2(0x120)](program),gl[_0x2503e2(0x128)](program),program;}function a0_0xb236(){const _0x4fa89a=['toLowerCase','createShader','clearRect','--bg-size','canvas-container','classList','texImage2D','zoom','282630yqydbq','canvas','linkProgram','.bin','texParameteri','smooth_width','.message-container','FLOAT','DOMContentLoaded','position','useProgram','arrayBuffer','TEXTURE_MAG_FILTER','5TbwrSh','VERTEX_SHADER','getContext','add','warm','clear','4.0','getShaderParameter','NEAREST','64031pSnoaO','text','UNSIGNED_BYTE','scale(','./src/shaders/vertexShader.glsl','./src/lut/lut64_','imageRendering','TEXTURE_WRAP_S','getUniformLocation','img-shader','fefs','TEXTURE_2D','drawArrays','TRIANGLE_STRIP','screenSize','TEXTURE_WRAP_T','bindTexture','error','crisp-edges','setProperty','getItem','ARRAY_BUFFER','.stateTitle,\x20.stateDate','set','vertexAttribPointer','compileShader','remove','getPixelData','1347608DEBKEH','_temperature','clientWidth','devicePixelRatio','querySelectorAll','slice','182396JWThBU','getElementById','_streng','texcoord','width','game_size','uniform1f','drawImage','px\x20','bindBuffer','enableVertexAttribArray','textured','1705550UhvEOK','forEach','attachShader','createBuffer','.setting-container','bufferData','transform','height','setItem','./src/shaders/fragmentShader.glsl','createProgram','CLAMP_TO_EDGE','imageSmoothingEnabled','close','addEventListener','0,0,','9yAWntM','COMPILE_STATUS','COLOR_BUFFER_BIT','gbc','style','7683240HnZRdb','18800484ZIfFmp','log','uniform2f','22FnIAtN','shaderSource','getAttribLocation','WebGL2\x20not\x20supported','7wUKaMp','getShaderInfoLog','webgl2','55FMcuhZ','STATIC_DRAW','floor','data'];a0_0xb236=function(){return _0x4fa89a;};return a0_0xb236();}function setupTexture(){const _0x292e6f=a0_0x2abc8a;texture=gl['createTexture'](),gl[_0x292e6f(0x144)](gl[_0x292e6f(0x13f)],texture),gl[_0x292e6f(0x122)](gl[_0x292e6f(0x13f)],gl['TEXTURE_MIN_FILTER'],gl[_0x292e6f(0x133)]),gl[_0x292e6f(0x122)](gl[_0x292e6f(0x13f)],gl[_0x292e6f(0x12a)],gl[_0x292e6f(0x133)]),gl['texParameteri'](gl['TEXTURE_2D'],gl[_0x292e6f(0x13b)],gl[_0x292e6f(0xfd)]),gl[_0x292e6f(0x122)](gl['TEXTURE_2D'],gl[_0x292e6f(0x143)],gl[_0x292e6f(0xfd)]),gl[_0x292e6f(0x10a)](gl['getUniformLocation'](program,_0x292e6f(0xeb)),gameWidth,gameHeight),gl[_0x292e6f(0x10a)](gl[_0x292e6f(0x13c)](program,'render_size'),gl[_0x292e6f(0x11f)][_0x292e6f(0xea)],gl[_0x292e6f(0x11f)]['height']),gl[_0x292e6f(0xec)](gl['getUniformLocation'](program,_0x292e6f(0x123)),gameWidth/gl[_0x292e6f(0x11f)][_0x292e6f(0xea)]),gl['uniform1f'](gl[_0x292e6f(0x13c)](program,'smooth_height'),gameHeight/gl[_0x292e6f(0x11f)][_0x292e6f(0xf9)]);}function setupBuffers(){const _0x4663fa=a0_0x2abc8a,_0x115323=gl[_0x4663fa(0xf5)]();gl['bindBuffer'](gl[_0x4663fa(0x149)],_0x115323),gl[_0x4663fa(0xf7)](gl[_0x4663fa(0x149)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x4663fa(0x113)]);const _0x49cc2a=gl['getAttribLocation'](program,_0x4663fa(0x127));gl[_0x4663fa(0xf0)](_0x49cc2a),gl['vertexAttribPointer'](_0x49cc2a,0x2,gl[_0x4663fa(0x125)],![],0x0,0x0);const _0x111cb4=gl[_0x4663fa(0xf5)]();gl[_0x4663fa(0xef)](gl['ARRAY_BUFFER'],_0x111cb4),gl[_0x4663fa(0xf7)](gl[_0x4663fa(0x149)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4663fa(0x113)]);const _0x5412fe=gl[_0x4663fa(0x10d)](program,_0x4663fa(0xe9));gl['enableVertexAttribArray'](_0x5412fe),gl[_0x4663fa(0x14c)](_0x5412fe,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0x4af24a){const _0x217aa5=a0_0x2abc8a,_0x4312c2=a0_0x14bd7e[_0x217aa5(0xdf)]();if(!_0x4312c2)return;await loadLUT64();const _0x58ca97=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x5f33c0=0x0;_0x5f33c0<gameHeight;_0x5f33c0++){for(let _0x2dbd1a=0x0;_0x2dbd1a<gameWidth;_0x2dbd1a++){const _0x450a65=_0x5f33c0*gameStride+_0x2dbd1a,_0x5d61a4=(_0x5f33c0*gameWidth+_0x2dbd1a)*0x4,_0x5d0f8a=_0x4312c2[_0x450a65],_0x53913a=(_0x5d0f8a&0xff)>>0x2,_0x4e6095=(_0x5d0f8a>>0x8&0xff)>>0x2,_0x257f09=(_0x5d0f8a>>0x10&0xff)>>0x2,_0x100378=(_0x53913a*0x40*0x40+_0x4e6095*0x40+_0x257f09)*0x3;_0x58ca97[_0x5d61a4]=lut64[_0x100378],_0x58ca97[_0x5d61a4+0x1]=lut64[_0x100378+0x1],_0x58ca97[_0x5d61a4+0x2]=lut64[_0x100378+0x2],_0x58ca97[_0x5d61a4+0x3]=0xff;}}if(_0x4af24a===_0x217aa5(0x111))gl[_0x217aa5(0x144)](gl['TEXTURE_2D'],texture),gl[_0x217aa5(0x11c)](gl[_0x217aa5(0x13f)],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl['RGBA'],gl[_0x217aa5(0x136)],_0x58ca97),gl[_0x217aa5(0x130)](gl[_0x217aa5(0x104)]),gl[_0x217aa5(0x140)](gl[_0x217aa5(0x141)],0x0,0x4);else _0x4af24a==='2d'&&(!ctx2d&&(ctx2d=bufferCanvas[_0x217aa5(0x12d)]('2d',{'alpha':![]}),ctx2d[_0x217aa5(0xfe)]=![]),!imageDataObj?imageDataObj=new ImageData(gameWidth,gameHeight):imageDataObj[_0x217aa5(0x115)][_0x217aa5(0x14b)](_0x58ca97),createImageBitmap(imageDataObj)['then'](_0x5c7613=>{const _0x1e1db1=_0x217aa5;ctx2d[_0x1e1db1(0x118)](0x0,0x0,bufferCanvas[_0x1e1db1(0xea)],bufferCanvas['height']),ctx2d[_0x1e1db1(0xed)](_0x5c7613,0x0,0x0),_0x5c7613[_0x1e1db1(0xff)]();}));requestAnimationFrame(()=>renderPixel(_0x4af24a));}export async function switchRenderMode(_0x1bf76d){const _0xe4f8b0=a0_0x2abc8a;systemType=gameName[_0xe4f8b0(0xe5)](-0x3);if(_0x1bf76d==='2d')setupStyle('2d'),renderPixel('2d');else _0x1bf76d==='webgl2'&&(setupStyle(_0xe4f8b0(0x111)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0xe4f8b0(0x111)));}document[a0_0x2abc8a(0x100)](a0_0x2abc8a(0x126),function(){});