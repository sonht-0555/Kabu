const a0_0x35447c=a0_0x522f;(function(_0xba89d0,_0x114bbc){const _0x540b10=a0_0x522f,_0x33879a=_0xba89d0();while(!![]){try{const _0x4a9a4b=parseInt(_0x540b10(0xd8))/0x1+parseInt(_0x540b10(0xbc))/0x2+-parseInt(_0x540b10(0xbe))/0x3*(-parseInt(_0x540b10(0xa9))/0x4)+-parseInt(_0x540b10(0xba))/0x5+-parseInt(_0x540b10(0xd6))/0x6+-parseInt(_0x540b10(0xf9))/0x7*(parseInt(_0x540b10(0xd1))/0x8)+-parseInt(_0x540b10(0xa7))/0x9*(-parseInt(_0x540b10(0x100))/0xa);if(_0x4a9a4b===_0x114bbc)break;else _0x33879a['push'](_0x33879a['shift']());}catch(_0x179a09){_0x33879a['push'](_0x33879a['shift']());}}}(a0_0x17e7,0xbc86b));import*as a0_0x2bfd26 from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x35447c(0xde)](a0_0x35447c(0xff)),bufferCanvas=document['getElementById'](a0_0x35447c(0xcb)),canvasContainer=document['getElementById'](a0_0x35447c(0xd3)),imgShader=document['getElementById'](a0_0x35447c(0x106)),settingContainer=document[a0_0x35447c(0xea)](a0_0x35447c(0xfd)),messageContainer=document[a0_0x35447c(0xea)](a0_0x35447c(0xc9)),stateTitle=document[a0_0x35447c(0xea)](a0_0x35447c(0xb7));async function loadLUT64(){const _0x571440=a0_0x35447c;systemType=gameName[_0x571440(0xd4)](-0x3);const _0x5a5fe5=localStorage[_0x571440(0xf1)](gameName+'_streng')||'4.0',_0x17ab3a=(localStorage[_0x571440(0xf1)](gameName+_0x571440(0xe9))||_0x571440(0xfb))[_0x571440(0x109)]();if(!lut64||lut64Streng!==_0x5a5fe5||lut64Profile!==_0x17ab3a){const _0x3e3c12='./src/lut/lut64_'+_0x17ab3a+'_'+_0x5a5fe5+_0x571440(0xdf);console['log'](_0x3e3c12);const _0x5d533a=await fetch(_0x3e3c12),_0x1ac13f=await _0x5d533a['arrayBuffer']();lut64=new Uint8Array(_0x1ac13f),lut64Streng=_0x5a5fe5,lut64Profile=_0x17ab3a;}}async function loadShaderSource(_0xbbef21){const _0x8122d2=a0_0x35447c,_0xcca77d=await fetch(_0xbbef21);return await _0xcca77d[_0x8122d2(0x103)]();}function setupStyle(_0x50740b){const _0x36953e=a0_0x35447c;clientWidth=document[_0x36953e(0xab)][_0x36953e(0xac)];const _0x2358f9=window['devicePixelRatio'];systemType===_0x36953e(0xe3)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0x36953e(0xfc)](clientWidth*_0x2358f9/gameWidth),localStorage[_0x36953e(0xfe)](_0x36953e(0xc7),'0,0,'+gameWidth*(integerScaling/_0x2358f9)+','+gameHeight*(integerScaling/_0x2358f9))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0x36953e(0xfc)](clientWidth*_0x2358f9/gameWidth),localStorage[_0x36953e(0xfe)](_0x36953e(0xc7),_0x36953e(0xb8)+gameWidth*(integerScaling/_0x2358f9)+','+gameHeight*(integerScaling/_0x2358f9)));if(_0x50740b==='2d')bufferCanvas[_0x36953e(0xc0)]=gameWidth,bufferCanvas[_0x36953e(0xfa)]=gameHeight,bufferCanvas['style'][_0x36953e(0xd0)]=''+integerScaling/_0x2358f9,bufferCanvas['style'][_0x36953e(0xe4)]=_0x36953e(0xe6),canvasContainer[_0x36953e(0xf3)][_0x36953e(0xc0)]=gameWidth*(integerScaling/_0x2358f9)+'px',canvasContainer[_0x36953e(0xf3)][_0x36953e(0xfa)]=gameHeight*(integerScaling/_0x2358f9)+'px',textured[_0x36953e(0xf3)][_0x36953e(0xc0)]=gameWidth*(integerScaling/_0x2358f9)+'px',textured[_0x36953e(0xf3)][_0x36953e(0xfa)]=gameHeight*(integerScaling/_0x2358f9)+'px',imgShader[_0x36953e(0xf3)][_0x36953e(0x10a)]=_0x36953e(0xbf)+integerScaling/_0x2358f9/upscaleShader+')',settingContainer[_0x36953e(0xc4)](function(_0x2a1936){const _0x2ff72b=_0x36953e;_0x2a1936[_0x2ff72b(0xf3)][_0x2ff72b(0xc0)]=gameWidth*(integerScaling/_0x2358f9)+'px',_0x2a1936['style'][_0x2ff72b(0xfa)]=gameHeight*(integerScaling/_0x2358f9)+'px';}),messageContainer[_0x36953e(0xc4)](function(_0x317cc3){const _0x13fe5c=_0x36953e;_0x317cc3[_0x13fe5c(0xf3)][_0x13fe5c(0xc0)]=gameWidth+'px',_0x317cc3[_0x13fe5c(0xf3)][_0x13fe5c(0xfa)]=gameHeight+'px',_0x317cc3['style'][_0x13fe5c(0xd0)]=''+integerScaling/_0x2358f9;}),stateTitle[_0x36953e(0xc4)](function(_0x14543e){const _0x5e5e60=_0x36953e;_0x14543e['classList'][_0x5e5e60(0x108)]('fefs');});else _0x50740b===_0x36953e(0xc5)&&(bufferCanvas[_0x36953e(0xc0)]=clientWidth*upscaleFactor,bufferCanvas['height']=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0x36953e(0xf3)][_0x36953e(0xd0)]=''+0x1/upscaleFactor,bufferCanvas[_0x36953e(0xf3)][_0x36953e(0xe4)]='',canvasContainer[_0x36953e(0xf3)]['width']=clientWidth+'px',canvasContainer['style']['height']=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x36953e(0xf3)][_0x36953e(0xc0)]=clientWidth+'px',textured[_0x36953e(0xf3)][_0x36953e(0xfa)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x36953e(0xf3)][_0x36953e(0x10a)]='scale('+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x36953e(0xc4)](function(_0x34a33a){const _0x1be26f=_0x36953e;_0x34a33a[_0x1be26f(0xf3)][_0x1be26f(0xc0)]=clientWidth+'px',_0x34a33a[_0x1be26f(0xf3)][_0x1be26f(0xfa)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x36953e(0xc4)](function(_0x45cca8){const _0x2c28b3=_0x36953e;_0x45cca8[_0x2c28b3(0xf3)][_0x2c28b3(0xc0)]=gameWidth+'px',_0x45cca8['style'][_0x2c28b3(0xfa)]=gameHeight+'px',_0x45cca8[_0x2c28b3(0xf3)][_0x2c28b3(0xd0)]=''+clientWidth/gameWidth;}),stateTitle[_0x36953e(0xc4)](function(_0x175772){const _0x23a74e=_0x36953e;_0x175772[_0x23a74e(0xa5)]['add'](_0x23a74e(0xbd));}));imgShader[_0x36953e(0xf3)][_0x36953e(0xc0)]=gameWidth*upscaleShader+'px',imgShader[_0x36953e(0xf3)][_0x36953e(0xfa)]=gameHeight*upscaleShader+'px',imgShader[_0x36953e(0xf3)][_0x36953e(0xb0)]=_0x36953e(0xf7),imgShader[_0x36953e(0xf3)]['setProperty'](_0x36953e(0xae),upscaleShader+_0x36953e(0xb3)+upscaleShader+'px');}function setupWebGL(){const _0x51d9c=a0_0x35447c;gl=bufferCanvas[_0x51d9c(0xe5)]('webgl2');if(!gl)return console[_0x51d9c(0xee)](_0x51d9c(0xf4)),null;gl['viewport'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x51d9c(0xfa)]);}function createShader(_0x4fc049,_0x1f9c43){const _0x129274=a0_0x35447c,_0x2b09fd=gl[_0x129274(0xef)](_0x4fc049);gl[_0x129274(0xd9)](_0x2b09fd,_0x1f9c43),gl['compileShader'](_0x2b09fd);if(!gl[_0x129274(0xc3)](_0x2b09fd,gl[_0x129274(0xf6)]))return console[_0x129274(0xee)](gl[_0x129274(0xdb)](_0x2b09fd)),gl[_0x129274(0xa6)](_0x2b09fd),null;return _0x2b09fd;}function a0_0x17e7(){const _0x296307=['TRIANGLE_STRIP','px\x20','linkProgram','texParameteri','texcoord','.stateTitle,\x20.stateDate','0,0,','getUniformLocation','5866965ubETYp','useProgram','1239534jsSBab','fefs','3sQkCvd','scale(','width','CLAMP_TO_EDGE','DOMContentLoaded','getShaderParameter','forEach','webgl2','NEAREST','screenSize','uniform2f','.message-container','bindBuffer','canvas','ARRAY_BUFFER','createTexture','UNSIGNED_BYTE','drawImage','zoom','280nkfyyb','getAttribLocation','canvas-container','slice','bindTexture','7360320BezWrO','game_size','573748GVyUyw','shaderSource','uniform1f','getShaderInfoLog','clear','vertexAttribPointer','getElementById','.bin','TEXTURE_WRAP_T','then','TEXTURE_MAG_FILTER','gbc','imageRendering','getContext','crisp-edges','smooth_width','imageSmoothingEnabled','_temperature','querySelectorAll','./src/shaders/vertexShader.glsl','getPixelData','COLOR_BUFFER_BIT','error','createShader','FLOAT','getItem','attachShader','style','WebGL2\x20not\x20supported','STATIC_DRAW','COMPILE_STATUS','top\x20center','enableVertexAttribArray','47551sAkIzo','height','warm','floor','.setting-container','setItem','textured','1030zLAMWt','render_size','TEXTURE_MIN_FILTER','text','RGBA','VERTEX_SHADER','img-shader','smooth_height','remove','toLowerCase','transform','classList','deleteShader','148059zVbgJA','position','2088412wKhRGc','bufferData','documentElement','clientWidth','TEXTURE_2D','--bg-size','addEventListener','transformOrigin','createProgram'];a0_0x17e7=function(){return _0x296307;};return a0_0x17e7();}async function setupShaders(){const _0x52e1dd=a0_0x35447c,_0x23d1d6=await loadShaderSource(_0x52e1dd(0xeb)),_0x43dba5=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x4ae18e=createShader(gl[_0x52e1dd(0x105)],_0x23d1d6),_0x59b211=createShader(gl['FRAGMENT_SHADER'],_0x43dba5);return program=gl[_0x52e1dd(0xb1)](),gl[_0x52e1dd(0xf2)](program,_0x4ae18e),gl[_0x52e1dd(0xf2)](program,_0x59b211),gl[_0x52e1dd(0xb4)](program),gl[_0x52e1dd(0xbb)](program),program;}function setupTexture(){const _0xa99305=a0_0x35447c;texture=gl[_0xa99305(0xcd)](),gl[_0xa99305(0xd5)](gl[_0xa99305(0xad)],texture),gl['texParameteri'](gl[_0xa99305(0xad)],gl[_0xa99305(0x102)],gl['NEAREST']),gl[_0xa99305(0xb5)](gl['TEXTURE_2D'],gl[_0xa99305(0xe2)],gl[_0xa99305(0xc6)]),gl[_0xa99305(0xb5)](gl[_0xa99305(0xad)],gl['TEXTURE_WRAP_S'],gl[_0xa99305(0xc1)]),gl[_0xa99305(0xb5)](gl[_0xa99305(0xad)],gl[_0xa99305(0xe0)],gl[_0xa99305(0xc1)]),gl[_0xa99305(0xc8)](gl[_0xa99305(0xb9)](program,_0xa99305(0xd7)),gameWidth,gameHeight),gl[_0xa99305(0xc8)](gl['getUniformLocation'](program,_0xa99305(0x101)),gl[_0xa99305(0xcb)]['width'],gl['canvas']['height']),gl[_0xa99305(0xda)](gl[_0xa99305(0xb9)](program,_0xa99305(0xe7)),gameWidth/gl['canvas'][_0xa99305(0xc0)]),gl[_0xa99305(0xda)](gl[_0xa99305(0xb9)](program,_0xa99305(0x107)),gameHeight/gl[_0xa99305(0xcb)][_0xa99305(0xfa)]);}function a0_0x522f(_0x1f2fe2,_0x8b6e8a){const _0x17e7e6=a0_0x17e7();return a0_0x522f=function(_0x522f6a,_0x511794){_0x522f6a=_0x522f6a-0xa5;let _0x331133=_0x17e7e6[_0x522f6a];return _0x331133;},a0_0x522f(_0x1f2fe2,_0x8b6e8a);}function setupBuffers(){const _0x520a02=a0_0x35447c,_0x593617=gl['createBuffer']();gl[_0x520a02(0xca)](gl[_0x520a02(0xcc)],_0x593617),gl[_0x520a02(0xaa)](gl[_0x520a02(0xcc)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x520a02(0xf5)]);const _0x56b209=gl[_0x520a02(0xd2)](program,_0x520a02(0xa8));gl[_0x520a02(0xf8)](_0x56b209),gl['vertexAttribPointer'](_0x56b209,0x2,gl[_0x520a02(0xf0)],![],0x0,0x0);const _0x56d69e=gl['createBuffer']();gl[_0x520a02(0xca)](gl['ARRAY_BUFFER'],_0x56d69e),gl['bufferData'](gl[_0x520a02(0xcc)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x520a02(0xf5)]);const _0x26e1f4=gl[_0x520a02(0xd2)](program,_0x520a02(0xb6));gl[_0x520a02(0xf8)](_0x26e1f4),gl[_0x520a02(0xdd)](_0x26e1f4,0x2,gl['FLOAT'],![],0x0,0x0);}async function renderPixel(_0x23bbc4){const _0x1099c1=a0_0x35447c,_0x46d7b8=a0_0x2bfd26[_0x1099c1(0xec)]();if(!_0x46d7b8)return;await loadLUT64();const _0x4d2aaa=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x2abfe4=0x0;_0x2abfe4<gameHeight;_0x2abfe4++){for(let _0x1aae2b=0x0;_0x1aae2b<gameWidth;_0x1aae2b++){const _0x3f12d2=_0x2abfe4*gameStride+_0x1aae2b,_0x3ac6b0=(_0x2abfe4*gameWidth+_0x1aae2b)*0x4,_0x1f6267=_0x46d7b8[_0x3f12d2],_0x5f34c7=(_0x1f6267&0xff)>>0x2,_0x14c499=(_0x1f6267>>0x8&0xff)>>0x2,_0x2c8d1e=(_0x1f6267>>0x10&0xff)>>0x2,_0x5e80fd=(_0x5f34c7*0x40*0x40+_0x14c499*0x40+_0x2c8d1e)*0x3;_0x4d2aaa[_0x3ac6b0]=lut64[_0x5e80fd],_0x4d2aaa[_0x3ac6b0+0x1]=lut64[_0x5e80fd+0x1],_0x4d2aaa[_0x3ac6b0+0x2]=lut64[_0x5e80fd+0x2],_0x4d2aaa[_0x3ac6b0+0x3]=0xff;}}if(_0x23bbc4==='webgl2')gl[_0x1099c1(0xd5)](gl[_0x1099c1(0xad)],texture),gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x1099c1(0x104)],gameWidth,gameHeight,0x0,gl[_0x1099c1(0x104)],gl[_0x1099c1(0xce)],_0x4d2aaa),gl[_0x1099c1(0xdc)](gl[_0x1099c1(0xed)]),gl['drawArrays'](gl[_0x1099c1(0xb2)],0x0,0x4);else{if(_0x23bbc4==='2d'){ctx2d=bufferCanvas[_0x1099c1(0xe5)]('2d'),ctx2d[_0x1099c1(0xe8)]=![];const _0x5c5343=new ImageData(_0x4d2aaa,gameWidth,gameHeight);createImageBitmap(_0x5c5343)[_0x1099c1(0xe1)](_0x44e1c3=>{const _0x2db440=_0x1099c1;ctx2d['clearRect'](0x0,0x0,bufferCanvas['width'],bufferCanvas[_0x2db440(0xfa)]),ctx2d[_0x2db440(0xcf)](_0x44e1c3,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x23bbc4));}export async function switchRenderMode(_0xca5bfe){const _0x163ac0=a0_0x35447c;systemType=gameName[_0x163ac0(0xd4)](-0x3);if(_0xca5bfe==='2d')setupStyle('2d'),renderPixel('2d');else _0xca5bfe===_0x163ac0(0xc5)&&(setupStyle(_0x163ac0(0xc5)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x163ac0(0xc5)));}document[a0_0x35447c(0xaf)](a0_0x35447c(0xc2),function(){});