(function(_0x5b4513,_0x3eefcd){const _0x1979db=a0_0x4370,_0x12b67c=_0x5b4513();while(!![]){try{const _0x3b5553=parseInt(_0x1979db(0x1c9))/0x1*(-parseInt(_0x1979db(0x1f5))/0x2)+parseInt(_0x1979db(0x1f3))/0x3*(-parseInt(_0x1979db(0x1e2))/0x4)+parseInt(_0x1979db(0x1c2))/0x5*(parseInt(_0x1979db(0x1d2))/0x6)+parseInt(_0x1979db(0x1b8))/0x7+parseInt(_0x1979db(0x1c1))/0x8+parseInt(_0x1979db(0x1cb))/0x9+-parseInt(_0x1979db(0x1bc))/0xa*(-parseInt(_0x1979db(0x1d7))/0xb);if(_0x3b5553===_0x3eefcd)break;else _0x12b67c['push'](_0x12b67c['shift']());}catch(_0x1b0026){_0x12b67c['push'](_0x12b67c['shift']());}}}(a0_0xf91e,0xe5e96));import*as a0_0x2af9d5 from'./main.js';function a0_0x4370(_0x1d3de6,_0x300729){const _0xf91ec7=a0_0xf91e();return a0_0x4370=function(_0x4370c2,_0xf74dbd){_0x4370c2=_0x4370c2-0x1b6;let _0x2dcf2b=_0xf91ec7[_0x4370c2];return _0x2dcf2b;},a0_0x4370(_0x1d3de6,_0x300729);}let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;function a0_0xf91e(){const _0x28af47=['canvas','TEXTURE_WRAP_T','UNSIGNED_BYTE','6193TrOfel','useProgram','webgl_full','RGBA','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','vertexAttribPointer','ARRAY_BUFFER','toLowerCase','data','enableVertexAttribArray','COLOR_BUFFER_BIT','8mGWQcD','drawArrays','attachShader','texcoord','createProgram','CLAMP_TO_EDGE','TRIANGLE_STRIP','NEAREST','getContext','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','log','position','texParameteri','uniform1f','createTexture','_4.0.bin','createBuffer','2591367WjwAtL','none','101168aUXrLu','getAttribLocation','VERTEX_SHADER','TEXTURE_MAG_FILTER','9822666YCcqYs','putImageData','clear','_temperature','8410PlumpW','imageSmoothingEnabled','uniform2f','game_size','STATIC_DRAW','9693864caJUtE','2396885Hhlwcg','compileShader','getItem','width','viewport','TEXTURE_MIN_FILTER','TEXTURE_WRAP_S','26oWjLfk','height','3749841JlObCu','webgl','getUniformLocation','./src/lut/lut64_','TEXTURE_2D','slice','set','6iFjLyS','FLOAT'];a0_0xf91e=function(){return _0x28af47;};return a0_0xf91e();}async function loadLUT64(){const _0x3a0303=a0_0x4370;systemType=gameName[_0x3a0303(0x1d0)](-0x3);const _0x51222f=(localStorage[_0x3a0303(0x1c4)](gameName+_0x3a0303(0x1bb))||'none')[_0x3a0303(0x1de)]();if(!lut64||lut64Profile!==_0x51222f){const _0x4cd248=_0x3a0303(0x1ce)+_0x51222f+_0x3a0303(0x1f1);console[_0x3a0303(0x1ec)](_0x4cd248);const _0x26983c=await fetch(_0x4cd248),_0x16957=await _0x26983c['arrayBuffer']();lut64=new Uint8Array(_0x16957),lut64Profile=_0x51222f;}}function setupWebGL_Shader(_0x39d493){const _0xcd654f=a0_0x4370;gl=bufferCanvas[_0xcd654f(0x1ea)]('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':'low-power'}),gl[_0xcd654f(0x1c6)](0x0,0x0,bufferCanvas[_0xcd654f(0x1c5)],bufferCanvas['height']);function _0x49fe5a(_0x538baa,_0x1b5145){const _0x2863be=_0xcd654f,_0x53ad2c=gl['createShader'](_0x538baa);return gl['shaderSource'](_0x53ad2c,_0x1b5145),gl[_0x2863be(0x1c3)](_0x53ad2c),_0x53ad2c;}vs=_0xcd654f(0x1db);if(_0x39d493===_0xcd654f(0x1cc))fs=_0xcd654f(0x1eb);else _0x39d493===_0xcd654f(0x1d9)&&(fs='precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}');const _0x1256d3=_0x49fe5a(gl[_0xcd654f(0x1b6)],vs),_0x49e5d5=_0x49fe5a(gl['FRAGMENT_SHADER'],fs);return program=gl[_0xcd654f(0x1e6)](),gl[_0xcd654f(0x1e4)](program,_0x1256d3),gl[_0xcd654f(0x1e4)](program,_0x49e5d5),gl['linkProgram'](program),gl[_0xcd654f(0x1d8)](program),program;}function setupTexture_Buffer(_0x1ef942){const _0x4b6ab4=a0_0x4370;texture=gl[_0x4b6ab4(0x1f0)](),gl['bindTexture'](gl['TEXTURE_2D'],texture),gl['texParameteri'](gl[_0x4b6ab4(0x1cf)],gl[_0x4b6ab4(0x1c7)],gl[_0x4b6ab4(0x1e9)]),gl[_0x4b6ab4(0x1ee)](gl[_0x4b6ab4(0x1cf)],gl[_0x4b6ab4(0x1b7)],gl[_0x4b6ab4(0x1e9)]),gl[_0x4b6ab4(0x1ee)](gl[_0x4b6ab4(0x1cf)],gl[_0x4b6ab4(0x1c8)],gl['CLAMP_TO_EDGE']),gl[_0x4b6ab4(0x1ee)](gl[_0x4b6ab4(0x1cf)],gl[_0x4b6ab4(0x1d5)],gl[_0x4b6ab4(0x1e7)]);_0x1ef942==='webgl_full'&&(gl[_0x4b6ab4(0x1be)](gl[_0x4b6ab4(0x1cd)](program,_0x4b6ab4(0x1bf)),gameWidth,gameHeight),gl[_0x4b6ab4(0x1be)](gl[_0x4b6ab4(0x1cd)](program,'render_size'),gl[_0x4b6ab4(0x1d4)][_0x4b6ab4(0x1c5)],gl['canvas'][_0x4b6ab4(0x1ca)]),gl[_0x4b6ab4(0x1ef)](gl[_0x4b6ab4(0x1cd)](program,'smooth_width'),gameWidth/gl[_0x4b6ab4(0x1d4)]['width']),gl[_0x4b6ab4(0x1ef)](gl[_0x4b6ab4(0x1cd)](program,'smooth_height'),gameHeight/gl['canvas']['height']));const _0x3bb6e3=gl[_0x4b6ab4(0x1f2)]();gl['bindBuffer'](gl[_0x4b6ab4(0x1dd)],_0x3bb6e3),gl['bufferData'](gl[_0x4b6ab4(0x1dd)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']),gl[_0x4b6ab4(0x1dc)](gl[_0x4b6ab4(0x1f6)](program,_0x4b6ab4(0x1ed)),0x2,gl[_0x4b6ab4(0x1d3)],![],0x0,0x0),gl[_0x4b6ab4(0x1e0)](gl['getAttribLocation'](program,_0x4b6ab4(0x1ed)));const _0xdf6491=gl['createBuffer']();gl['bindBuffer'](gl[_0x4b6ab4(0x1dd)],_0xdf6491),gl['bufferData'](gl[_0x4b6ab4(0x1dd)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x4b6ab4(0x1c0)]),gl[_0x4b6ab4(0x1dc)](gl['getAttribLocation'](program,'texcoord'),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x4b6ab4(0x1e0)](gl[_0x4b6ab4(0x1f6)](program,_0x4b6ab4(0x1e5)));}function setup2DContext(){const _0x3c0fad=a0_0x4370;ctx2d=bufferCanvas['getContext']('2d'),ctx2d[_0x3c0fad(0x1bd)]=![];}async function renderPixel(_0x311824){const _0x4908e8=a0_0x4370,_0x2c5cd3=a0_0x2af9d5['getPixelData']();if(!_0x2c5cd3)return;await loadLUT64();const _0x1bf5db=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x27f7b7=0x0;_0x27f7b7<gameHeight;_0x27f7b7++){for(let _0x246306=0x0;_0x246306<gameWidth;_0x246306++){const _0xefc311=_0x27f7b7*gameStride+_0x246306,_0x51d2b1=(_0x27f7b7*gameWidth+_0x246306)*0x4,_0x6cb2e3=_0x2c5cd3[_0xefc311];if(lut64Profile===_0x4908e8(0x1f4))_0x1bf5db[_0x51d2b1]=_0x6cb2e3&0xff,_0x1bf5db[_0x51d2b1+0x1]=_0x6cb2e3>>0x8&0xff,_0x1bf5db[_0x51d2b1+0x2]=_0x6cb2e3>>0x10&0xff,_0x1bf5db[_0x51d2b1+0x3]=0xff;else{const _0x3ae421=(_0x6cb2e3&0xff)>>0x2,_0x4e474d=(_0x6cb2e3>>0x8&0xff)>>0x2,_0x5873f4=(_0x6cb2e3>>0x10&0xff)>>0x2,_0x52d9f4=(_0x3ae421*0x40*0x40+_0x4e474d*0x40+_0x5873f4)*0x3;_0x1bf5db[_0x51d2b1]=lut64[_0x52d9f4],_0x1bf5db[_0x51d2b1+0x1]=lut64[_0x52d9f4+0x1],_0x1bf5db[_0x51d2b1+0x2]=lut64[_0x52d9f4+0x2],_0x1bf5db[_0x51d2b1+0x3]=0xff;}}}if(_0x311824==='webgl')gl['texImage2D'](gl['TEXTURE_2D'],0x0,gl[_0x4908e8(0x1da)],gameWidth,gameHeight,0x0,gl[_0x4908e8(0x1da)],gl[_0x4908e8(0x1d6)],_0x1bf5db),gl[_0x4908e8(0x1ba)](gl[_0x4908e8(0x1e1)]),gl[_0x4908e8(0x1e3)](gl[_0x4908e8(0x1e8)],0x0,0x4);else _0x311824==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x1bf5db,gameWidth,gameHeight):imageDataObj[_0x4908e8(0x1df)][_0x4908e8(0x1d1)](_0x1bf5db),ctx2d['clearRect'](0x0,0x0,bufferCanvas[_0x4908e8(0x1c5)],bufferCanvas[_0x4908e8(0x1ca)]),ctx2d[_0x4908e8(0x1b9)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x311824));}export async function switchRenderMode(_0x33011b){const _0x1f4e0b=a0_0x4370;systemType=gameName[_0x1f4e0b(0x1d0)](-0x3);if(_0x33011b==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x33011b===_0x1f4e0b(0x1cc))setupStyle('2d'),setupWebGL_Shader(_0x1f4e0b(0x1cc)),setupTexture_Buffer(_0x1f4e0b(0x1cc)),renderPixel('webgl');else _0x33011b==='webgl_full'&&(setupStyle(_0x1f4e0b(0x1d9)),setupWebGL_Shader('webgl_full'),setupTexture_Buffer(_0x1f4e0b(0x1d9)),renderPixel(_0x1f4e0b(0x1cc)));}}