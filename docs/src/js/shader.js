const a0_0x348b69=a0_0x6483;(function(_0x305acc,_0x1e9124){const _0x311de6=a0_0x6483,_0x4368d8=_0x305acc();while(!![]){try{const _0x3eaa5a=parseInt(_0x311de6(0xff))/0x1*(parseInt(_0x311de6(0xf0))/0x2)+parseInt(_0x311de6(0x102))/0x3+parseInt(_0x311de6(0xfc))/0x4*(parseInt(_0x311de6(0x11c))/0x5)+-parseInt(_0x311de6(0x10b))/0x6+parseInt(_0x311de6(0xd6))/0x7+-parseInt(_0x311de6(0xd0))/0x8*(-parseInt(_0x311de6(0xf6))/0x9)+-parseInt(_0x311de6(0xe0))/0xa*(parseInt(_0x311de6(0x112))/0xb);if(_0x3eaa5a===_0x1e9124)break;else _0x4368d8['push'](_0x4368d8['shift']());}catch(_0x44c967){_0x4368d8['push'](_0x4368d8['shift']());}}}(a0_0x21ff,0xedeff));import*as a0_0x22dbbd from'./main.js';let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document[a0_0x348b69(0x113)](a0_0x348b69(0xec)),bufferCanvas=document[a0_0x348b69(0x113)](a0_0x348b69(0x11b)),canvasContainer=document[a0_0x348b69(0x113)]('canvas-container'),imgShader=document[a0_0x348b69(0x113)](a0_0x348b69(0x129)),settingContainer=document['querySelectorAll'](a0_0x348b69(0xe1)),messageContainer=document['querySelectorAll'](a0_0x348b69(0x12b)),stateTitle=document[a0_0x348b69(0x122)]('.stateTitle,\x20.stateDate');async function loadLUT64(){const _0x4da16d=a0_0x348b69;systemType=gameName['slice'](-0x3);const _0x558713=localStorage[_0x4da16d(0x12a)](gameName+_0x4da16d(0xd9))||_0x4da16d(0xfe),_0x462813=(localStorage[_0x4da16d(0x12a)](gameName+'_temperature')||_0x4da16d(0xe4))[_0x4da16d(0xd3)]();if(!lut64||lut64Streng!==_0x558713||lut64Profile!==_0x462813){const _0x3d008b=_0x4da16d(0x110)+_0x462813+'_'+_0x558713+_0x4da16d(0x123);console[_0x4da16d(0xd2)](_0x3d008b);const _0x411bfe=await fetch(_0x3d008b),_0x658e33=await _0x411bfe[_0x4da16d(0xf7)]();lut64=new Uint8Array(_0x658e33),lut64Streng=_0x558713,lut64Profile=_0x462813;}}async function loadShaderSource(_0x33ff27){const _0x11f5c7=a0_0x348b69,_0x43b332=await fetch(_0x33ff27);return await _0x43b332[_0x11f5c7(0xe6)]();}function a0_0x21ff(){const _0xa3fc1a=['3851349iTovbX','WebGL2\x20not\x20supported','style','fefs','drawImage','TEXTURE_MIN_FILTER','gbc','getShaderParameter','clearRect','10940142dXDBIn','createTexture','getUniformLocation','viewport','CLAMP_TO_EDGE','./src/lut/lut64_','./src/shaders/vertexShader.glsl','1782385lWiiAV','getElementById','webgl2','FLOAT','drawArrays','position','clear','transform','imageRendering','canvas','10yjjAjQ','NEAREST','0,0,','uniform1f','then','setProperty','querySelectorAll','.bin','bindTexture','linkProgram','TEXTURE_WRAP_S','game_size','screenSize','img-shader','getItem','.message-container','UNSIGNED_BYTE','enableVertexAttribArray','smooth_width','compileShader','scale(','createProgram','createBuffer','33776nlsSah','setItem','log','toLowerCase','getPixelData','texParameteri','7078925ObbSYa','remove','texImage2D','_streng','render_size','getContext','bindBuffer','deleteShader','COMPILE_STATUS','attachShader','110GRAgpx','.setting-container','TEXTURE_MAG_FILTER','DOMContentLoaded','warm','documentElement','text','ARRAY_BUFFER','createShader','--bg-size','STATIC_DRAW','forEach','textured','uniform2f','crisp-edges','height','778598GAmicK','devicePixelRatio','smooth_height','width','top\x20center','TEXTURE_2D','1746BOYXwd','arrayBuffer','FRAGMENT_SHADER','bufferData','RGBA','texcoord','2153816KjTRdv','useProgram','4.0','1zmtCrn','classList','px\x20'];a0_0x21ff=function(){return _0xa3fc1a;};return a0_0x21ff();}function setupStyle(_0x47f448){const _0x401288=a0_0x348b69;clientWidth=document[_0x401288(0xe5)]['clientWidth'];const _0x216157=window[_0x401288(0xf1)];systemType===_0x401288(0x108)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math['floor'](clientWidth*_0x216157/gameWidth),localStorage[_0x401288(0xd1)](_0x401288(0x128),_0x401288(0x11e)+gameWidth*(integerScaling/_0x216157)+','+gameHeight*(integerScaling/_0x216157))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math['floor'](clientWidth*_0x216157/gameWidth),localStorage[_0x401288(0xd1)](_0x401288(0x128),'0,0,'+gameWidth*(integerScaling/_0x216157)+','+gameHeight*(integerScaling/_0x216157)));if(_0x47f448==='2d')bufferCanvas[_0x401288(0xf3)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0x401288(0x104)]['zoom']=''+integerScaling/_0x216157,bufferCanvas[_0x401288(0x104)]['imageRendering']=_0x401288(0xee),canvasContainer[_0x401288(0x104)][_0x401288(0xf3)]=gameWidth*(integerScaling/_0x216157)+'px',canvasContainer[_0x401288(0x104)][_0x401288(0xef)]=gameHeight*(integerScaling/_0x216157)+'px',textured[_0x401288(0x104)][_0x401288(0xf3)]=gameWidth*(integerScaling/_0x216157)+'px',textured['style'][_0x401288(0xef)]=gameHeight*(integerScaling/_0x216157)+'px',imgShader[_0x401288(0x104)][_0x401288(0x119)]=_0x401288(0x130)+integerScaling/_0x216157/upscaleShader+')',settingContainer['forEach'](function(_0x611f71){const _0x35445b=_0x401288;_0x611f71['style'][_0x35445b(0xf3)]=gameWidth*(integerScaling/_0x216157)+'px',_0x611f71['style'][_0x35445b(0xef)]=gameHeight*(integerScaling/_0x216157)+'px';}),messageContainer[_0x401288(0xeb)](function(_0x5a0c49){const _0x5f56d4=_0x401288;_0x5a0c49[_0x5f56d4(0x104)][_0x5f56d4(0xf3)]=gameWidth+'px',_0x5a0c49['style']['height']=gameHeight+'px',_0x5a0c49[_0x5f56d4(0x104)]['zoom']=''+integerScaling/_0x216157;}),stateTitle[_0x401288(0xeb)](function(_0x559be2){const _0x27edcc=_0x401288;_0x559be2['classList'][_0x27edcc(0xd7)](_0x27edcc(0x105));});else _0x47f448===_0x401288(0x114)&&(bufferCanvas[_0x401288(0xf3)]=clientWidth*upscaleFactor,bufferCanvas[_0x401288(0xef)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas['style']['zoom']=''+0x1/upscaleFactor,bufferCanvas[_0x401288(0x104)][_0x401288(0x11a)]='',canvasContainer['style'][_0x401288(0xf3)]=clientWidth+'px',canvasContainer[_0x401288(0x104)]['height']=clientWidth*(gameHeight/gameWidth)+'px',textured[_0x401288(0x104)]['width']=clientWidth+'px',textured['style'][_0x401288(0xef)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader[_0x401288(0x104)][_0x401288(0x119)]=_0x401288(0x130)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0x401288(0xeb)](function(_0x4c6f1b){const _0x4859b5=_0x401288;_0x4c6f1b[_0x4859b5(0x104)]['width']=clientWidth+'px',_0x4c6f1b[_0x4859b5(0x104)][_0x4859b5(0xef)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0x401288(0xeb)](function(_0x62181b){const _0x1c9f7d=_0x401288;_0x62181b['style']['width']=gameWidth+'px',_0x62181b[_0x1c9f7d(0x104)]['height']=gameHeight+'px',_0x62181b['style']['zoom']=''+clientWidth/gameWidth;}),stateTitle['forEach'](function(_0x4b26fb){const _0x167c66=_0x401288;_0x4b26fb[_0x167c66(0x100)]['add']('fefs');}));imgShader[_0x401288(0x104)][_0x401288(0xf3)]=gameWidth*upscaleShader+'px',imgShader['style'][_0x401288(0xef)]=gameHeight*upscaleShader+'px',imgShader[_0x401288(0x104)]['transformOrigin']=_0x401288(0xf4),imgShader['style'][_0x401288(0x121)](_0x401288(0xe9),upscaleShader+_0x401288(0x101)+upscaleShader+'px');}function setupWebGL(){const _0x20cb6e=a0_0x348b69;gl=bufferCanvas['getContext'](_0x20cb6e(0x114));if(!gl)return console['error'](_0x20cb6e(0x103)),null;gl[_0x20cb6e(0x10e)](0x0,0x0,bufferCanvas[_0x20cb6e(0xf3)],bufferCanvas[_0x20cb6e(0xef)]);}function a0_0x6483(_0x34a29f,_0x150d11){const _0x21ff9e=a0_0x21ff();return a0_0x6483=function(_0x6483d4,_0xe272ec){_0x6483d4=_0x6483d4-0xcf;let _0xd0d791=_0x21ff9e[_0x6483d4];return _0xd0d791;},a0_0x6483(_0x34a29f,_0x150d11);}function createShader(_0x5c4258,_0x1f3994){const _0x2d6031=a0_0x348b69,_0x35a7d0=gl[_0x2d6031(0xe8)](_0x5c4258);gl['shaderSource'](_0x35a7d0,_0x1f3994),gl[_0x2d6031(0x12f)](_0x35a7d0);if(!gl[_0x2d6031(0x109)](_0x35a7d0,gl[_0x2d6031(0xde)]))return console['error'](gl['getShaderInfoLog'](_0x35a7d0)),gl[_0x2d6031(0xdd)](_0x35a7d0),null;return _0x35a7d0;}async function setupShaders(){const _0x2d10c3=a0_0x348b69,_0x495e86=await loadShaderSource(_0x2d10c3(0x111)),_0x5e4147=await loadShaderSource('./src/shaders/fragmentShader.glsl'),_0x152226=createShader(gl['VERTEX_SHADER'],_0x495e86),_0x1af275=createShader(gl[_0x2d10c3(0xf8)],_0x5e4147);return program=gl[_0x2d10c3(0x131)](),gl['attachShader'](program,_0x152226),gl[_0x2d10c3(0xdf)](program,_0x1af275),gl[_0x2d10c3(0x125)](program),gl[_0x2d10c3(0xfd)](program),program;}function setupTexture(){const _0x8c1af7=a0_0x348b69;texture=gl[_0x8c1af7(0x10c)](),gl[_0x8c1af7(0x124)](gl[_0x8c1af7(0xf5)],texture),gl[_0x8c1af7(0xd5)](gl[_0x8c1af7(0xf5)],gl[_0x8c1af7(0x107)],gl[_0x8c1af7(0x11d)]),gl[_0x8c1af7(0xd5)](gl[_0x8c1af7(0xf5)],gl[_0x8c1af7(0xe2)],gl[_0x8c1af7(0x11d)]),gl['texParameteri'](gl[_0x8c1af7(0xf5)],gl[_0x8c1af7(0x126)],gl[_0x8c1af7(0x10f)]),gl[_0x8c1af7(0xd5)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_T'],gl[_0x8c1af7(0x10f)]),gl['uniform2f'](gl['getUniformLocation'](program,_0x8c1af7(0x127)),gameWidth,gameHeight),gl[_0x8c1af7(0xed)](gl[_0x8c1af7(0x10d)](program,_0x8c1af7(0xda)),gl[_0x8c1af7(0x11b)]['width'],gl['canvas'][_0x8c1af7(0xef)]),gl[_0x8c1af7(0x11f)](gl['getUniformLocation'](program,_0x8c1af7(0x12e)),gameWidth/gl[_0x8c1af7(0x11b)][_0x8c1af7(0xf3)]),gl[_0x8c1af7(0x11f)](gl[_0x8c1af7(0x10d)](program,_0x8c1af7(0xf2)),gameHeight/gl[_0x8c1af7(0x11b)][_0x8c1af7(0xef)]);}function setupBuffers(){const _0x13544a=a0_0x348b69,_0xa7c55a=gl[_0x13544a(0xcf)]();gl['bindBuffer'](gl[_0x13544a(0xe7)],_0xa7c55a),gl[_0x13544a(0xf9)](gl['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x1d5f80=gl['getAttribLocation'](program,_0x13544a(0x117));gl['enableVertexAttribArray'](_0x1d5f80),gl['vertexAttribPointer'](_0x1d5f80,0x2,gl[_0x13544a(0x115)],![],0x0,0x0);const _0x4db0fb=gl['createBuffer']();gl[_0x13544a(0xdc)](gl[_0x13544a(0xe7)],_0x4db0fb),gl[_0x13544a(0xf9)](gl[_0x13544a(0xe7)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x13544a(0xea)]);const _0x9af049=gl['getAttribLocation'](program,_0x13544a(0xfb));gl[_0x13544a(0x12d)](_0x9af049),gl['vertexAttribPointer'](_0x9af049,0x2,gl[_0x13544a(0x115)],![],0x0,0x0);}async function renderPixel(_0x430167){const _0x478f4d=a0_0x348b69,_0xb539d7=a0_0x22dbbd[_0x478f4d(0xd4)]();if(!_0xb539d7)return;await loadLUT64();const _0x46175f=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x53a0e3=0x0;_0x53a0e3<gameHeight;_0x53a0e3++){for(let _0x11560e=0x0;_0x11560e<gameWidth;_0x11560e++){const _0xa80152=_0x53a0e3*gameStride+_0x11560e,_0x253cfb=(_0x53a0e3*gameWidth+_0x11560e)*0x4,_0x55f233=_0xb539d7[_0xa80152],_0x2df463=(_0x55f233&0xff)>>0x2,_0x11d7fa=(_0x55f233>>0x8&0xff)>>0x2,_0x31bb8c=(_0x55f233>>0x10&0xff)>>0x2,_0x96aade=(_0x2df463*0x40*0x40+_0x11d7fa*0x40+_0x31bb8c)*0x3;_0x46175f[_0x253cfb]=lut64[_0x96aade],_0x46175f[_0x253cfb+0x1]=lut64[_0x96aade+0x1],_0x46175f[_0x253cfb+0x2]=lut64[_0x96aade+0x2],_0x46175f[_0x253cfb+0x3]=0xff;}}if(_0x430167===_0x478f4d(0x114))gl[_0x478f4d(0x124)](gl['TEXTURE_2D'],texture),gl[_0x478f4d(0xd8)](gl[_0x478f4d(0xf5)],0x0,gl[_0x478f4d(0xfa)],gameWidth,gameHeight,0x0,gl[_0x478f4d(0xfa)],gl[_0x478f4d(0x12c)],_0x46175f),gl[_0x478f4d(0x118)](gl['COLOR_BUFFER_BIT']),gl[_0x478f4d(0x116)](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x430167==='2d'){ctx2d=bufferCanvas[_0x478f4d(0xdb)]('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x5e6f40=new ImageData(_0x46175f,gameWidth,gameHeight);createImageBitmap(_0x5e6f40)[_0x478f4d(0x120)](_0xa1ce50=>{const _0x2886c7=_0x478f4d;ctx2d[_0x2886c7(0x10a)](0x0,0x0,bufferCanvas[_0x2886c7(0xf3)],bufferCanvas[_0x2886c7(0xef)]),ctx2d[_0x2886c7(0x106)](_0xa1ce50,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x430167));}export async function switchRenderMode(_0x2913ba){const _0x297fdc=a0_0x348b69;systemType=gameName['slice'](-0x3);if(_0x2913ba==='2d')setupStyle('2d'),renderPixel('2d');else _0x2913ba===_0x297fdc(0x114)&&(setupStyle(_0x297fdc(0x114)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel('webgl2'));}document['addEventListener'](a0_0x348b69(0xe3),function(){});