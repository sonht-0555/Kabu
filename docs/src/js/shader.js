const a0_0x22ede3=a0_0x5dfe;(function(_0x2e52e4,_0x276e7d){const _0x3c4d00=a0_0x5dfe,_0x851dfa=_0x2e52e4();while(!![]){try{const _0x45189b=parseInt(_0x3c4d00(0x1b7))/0x1*(parseInt(_0x3c4d00(0x1a4))/0x2)+parseInt(_0x3c4d00(0x1c2))/0x3*(parseInt(_0x3c4d00(0x18c))/0x4)+parseInt(_0x3c4d00(0x19d))/0x5*(parseInt(_0x3c4d00(0x184))/0x6)+-parseInt(_0x3c4d00(0x193))/0x7*(parseInt(_0x3c4d00(0x1a5))/0x8)+parseInt(_0x3c4d00(0x1a7))/0x9*(parseInt(_0x3c4d00(0x183))/0xa)+parseInt(_0x3c4d00(0x1be))/0xb*(-parseInt(_0x3c4d00(0x188))/0xc)+parseInt(_0x3c4d00(0x1bc))/0xd*(-parseInt(_0x3c4d00(0x187))/0xe);if(_0x45189b===_0x276e7d)break;else _0x851dfa['push'](_0x851dfa['shift']());}catch(_0xbae12d){_0x851dfa['push'](_0x851dfa['shift']());}}}(a0_0x3206,0x34c6d));import*as a0_0x235b84 from'./main.js';function a0_0x5dfe(_0x121b14,_0x196ba3){const _0x32065e=a0_0x3206();return a0_0x5dfe=function(_0x5dfe92,_0x4b3f7e){_0x5dfe92=_0x5dfe92-0x168;let _0x5a81af=_0x32065e[_0x5dfe92];return _0x5a81af;},a0_0x5dfe(_0x121b14,_0x196ba3);}let gl=null,program=null,systemType,clientWidth,upscaleFactor=0x3,upscaleShader,gameWidth,gameHeight,gameStride,texture,integerScaling,ctx2d=null,lut64=null,lut64Streng=null,lut64Profile=null;const textured=document['getElementById'](a0_0x22ede3(0x171)),bufferCanvas=document['getElementById']('canvas'),canvasContainer=document[a0_0x22ede3(0x176)]('canvas-container'),imgShader=document[a0_0x22ede3(0x176)](a0_0x22ede3(0x1aa)),settingContainer=document[a0_0x22ede3(0x180)]('.setting-container'),messageContainer=document[a0_0x22ede3(0x180)](a0_0x22ede3(0x1b0)),stateTitle=document['querySelectorAll'](a0_0x22ede3(0x1a9));async function loadLUT64(){const _0x24292e=a0_0x22ede3;systemType=gameName['slice'](-0x3);const _0x13c480=localStorage[_0x24292e(0x196)](gameName+_0x24292e(0x185))||_0x24292e(0x1bd),_0x5a4c8b=(localStorage[_0x24292e(0x196)](gameName+'_temperature')||_0x24292e(0x170))[_0x24292e(0x18f)]();if(!lut64||lut64Streng!==_0x13c480||lut64Profile!==_0x5a4c8b){const _0x1dc905='./src/lut/lut64_'+_0x5a4c8b+'_'+_0x13c480+_0x24292e(0x1a8);console[_0x24292e(0x1a2)](_0x1dc905);const _0x26f038=await fetch(_0x1dc905),_0x21989d=await _0x26f038[_0x24292e(0x173)]();lut64=new Uint8Array(_0x21989d),lut64Streng=_0x13c480,lut64Profile=_0x5a4c8b;}}async function loadShaderSource(_0x3cd9d4){const _0x159d7e=a0_0x22ede3,_0x4a14af=await fetch(_0x3cd9d4);return await _0x4a14af[_0x159d7e(0x18e)]();}function setupStyle(_0x41b198){const _0xecda24=a0_0x22ede3;clientWidth=document[_0xecda24(0x16f)]['clientWidth'];const _0x487e66=window[_0xecda24(0x175)];systemType===_0xecda24(0x1c8)?(gameWidth=0xa0,gameHeight=0x90,gameStride=0x100,upscaleShader=0x3,integerScaling=Math[_0xecda24(0x1a1)](clientWidth*_0x487e66/gameWidth),localStorage[_0xecda24(0x16c)](_0xecda24(0x189),'0,0,'+gameWidth*(integerScaling/_0x487e66)+','+gameHeight*(integerScaling/_0x487e66))):(gameWidth=0xf0,gameHeight=0xa0,gameStride=0xf0,upscaleShader=0x2,integerScaling=Math[_0xecda24(0x1a1)](clientWidth*_0x487e66/gameWidth),localStorage[_0xecda24(0x16c)](_0xecda24(0x189),_0xecda24(0x178)+gameWidth*(integerScaling/_0x487e66)+','+gameHeight*(integerScaling/_0x487e66)));if(_0x41b198==='2d')bufferCanvas[_0xecda24(0x16b)]=gameWidth,bufferCanvas['height']=gameHeight,bufferCanvas[_0xecda24(0x1bb)][_0xecda24(0x1c0)]=''+integerScaling/_0x487e66,bufferCanvas[_0xecda24(0x1bb)][_0xecda24(0x19a)]=_0xecda24(0x1c1),canvasContainer[_0xecda24(0x1bb)][_0xecda24(0x16b)]=gameWidth*(integerScaling/_0x487e66)+'px',canvasContainer[_0xecda24(0x1bb)][_0xecda24(0x1b1)]=gameHeight*(integerScaling/_0x487e66)+'px',textured[_0xecda24(0x1bb)]['width']=gameWidth*(integerScaling/_0x487e66)+'px',textured[_0xecda24(0x1bb)][_0xecda24(0x1b1)]=gameHeight*(integerScaling/_0x487e66)+'px',imgShader[_0xecda24(0x1bb)][_0xecda24(0x1b9)]=_0xecda24(0x181)+integerScaling/_0x487e66/upscaleShader+')',settingContainer[_0xecda24(0x191)](function(_0xa900ec){const _0x45a2d8=_0xecda24;_0xa900ec[_0x45a2d8(0x1bb)][_0x45a2d8(0x16b)]=gameWidth*(integerScaling/_0x487e66)+'px',_0xa900ec['style'][_0x45a2d8(0x1b1)]=gameHeight*(integerScaling/_0x487e66)+'px';}),messageContainer['forEach'](function(_0x51a672){const _0x3c5952=_0xecda24;_0x51a672[_0x3c5952(0x1bb)]['width']=gameWidth+'px',_0x51a672[_0x3c5952(0x1bb)]['height']=gameHeight+'px',_0x51a672['style'][_0x3c5952(0x1c0)]=''+integerScaling/_0x487e66;}),stateTitle[_0xecda24(0x191)](function(_0x1a45f5){const _0x521e9a=_0xecda24;_0x1a45f5[_0x521e9a(0x17c)]['remove'](_0x521e9a(0x18b));});else _0x41b198===_0xecda24(0x16d)&&(bufferCanvas[_0xecda24(0x16b)]=clientWidth*upscaleFactor,bufferCanvas[_0xecda24(0x1b1)]=clientWidth*upscaleFactor*(gameHeight/gameWidth),bufferCanvas[_0xecda24(0x1bb)][_0xecda24(0x1c0)]=''+0x1/upscaleFactor,bufferCanvas[_0xecda24(0x1bb)][_0xecda24(0x19a)]='',canvasContainer[_0xecda24(0x1bb)][_0xecda24(0x16b)]=clientWidth+'px',canvasContainer['style'][_0xecda24(0x1b1)]=clientWidth*(gameHeight/gameWidth)+'px',textured[_0xecda24(0x1bb)][_0xecda24(0x16b)]=clientWidth+'px',textured['style'][_0xecda24(0x1b1)]=clientWidth*(gameHeight/gameWidth)+'px',imgShader['style'][_0xecda24(0x1b9)]=_0xecda24(0x181)+clientWidth/gameWidth/upscaleShader+')',settingContainer[_0xecda24(0x191)](function(_0x2dde84){const _0x2ce131=_0xecda24;_0x2dde84['style'][_0x2ce131(0x16b)]=clientWidth+'px',_0x2dde84['style'][_0x2ce131(0x1b1)]=clientWidth*(gameHeight/gameWidth)+'px';}),messageContainer[_0xecda24(0x191)](function(_0x428351){const _0x44c9f2=_0xecda24;_0x428351[_0x44c9f2(0x1bb)][_0x44c9f2(0x16b)]=gameWidth+'px',_0x428351[_0x44c9f2(0x1bb)]['height']=gameHeight+'px',_0x428351[_0x44c9f2(0x1bb)][_0x44c9f2(0x1c0)]=''+clientWidth/gameWidth;}),stateTitle[_0xecda24(0x191)](function(_0x1754de){const _0x19b822=_0xecda24;_0x1754de[_0x19b822(0x17c)][_0x19b822(0x1c6)](_0x19b822(0x18b));}));imgShader['style']['width']=gameWidth*upscaleShader+'px',imgShader['style']['height']=gameHeight*upscaleShader+'px',imgShader[_0xecda24(0x1bb)][_0xecda24(0x197)]=_0xecda24(0x1a0),imgShader[_0xecda24(0x1bb)][_0xecda24(0x1b4)](_0xecda24(0x182),upscaleShader+'px\x20'+upscaleShader+'px');}function setupWebGL(){const _0x4c65aa=a0_0x22ede3;gl=bufferCanvas[_0x4c65aa(0x1ac)](_0x4c65aa(0x16d));if(!gl)return console['error'](_0x4c65aa(0x1c4)),null;gl['viewport'](0x0,0x0,bufferCanvas[_0x4c65aa(0x16b)],bufferCanvas[_0x4c65aa(0x1b1)]);}function createShader(_0x1d0ad3,_0xb34f8e){const _0x275407=a0_0x22ede3,_0xdebfec=gl[_0x275407(0x198)](_0x1d0ad3);gl[_0x275407(0x1b3)](_0xdebfec,_0xb34f8e),gl['compileShader'](_0xdebfec);if(!gl[_0x275407(0x18d)](_0xdebfec,gl[_0x275407(0x19e)]))return console['error'](gl[_0x275407(0x195)](_0xdebfec)),gl['deleteShader'](_0xdebfec),null;return _0xdebfec;}async function setupShaders(){const _0x10fa21=a0_0x22ede3,_0x3d5d3b=await loadShaderSource(_0x10fa21(0x1ca)),_0x264657=await loadShaderSource(_0x10fa21(0x19b)),_0x4130f3=createShader(gl[_0x10fa21(0x174)],_0x3d5d3b),_0x49f25a=createShader(gl[_0x10fa21(0x1a6)],_0x264657);return program=gl['createProgram'](),gl['attachShader'](program,_0x4130f3),gl[_0x10fa21(0x179)](program,_0x49f25a),gl[_0x10fa21(0x1c7)](program),gl[_0x10fa21(0x1cb)](program),program;}function setupTexture(){const _0x4183a0=a0_0x22ede3;texture=gl[_0x4183a0(0x16a)](),gl[_0x4183a0(0x1c9)](gl[_0x4183a0(0x17d)],texture),gl[_0x4183a0(0x172)](gl[_0x4183a0(0x17d)],gl[_0x4183a0(0x1c5)],gl[_0x4183a0(0x1b5)]),gl[_0x4183a0(0x172)](gl[_0x4183a0(0x17d)],gl[_0x4183a0(0x1ad)],gl[_0x4183a0(0x1b5)]),gl[_0x4183a0(0x172)](gl[_0x4183a0(0x17d)],gl[_0x4183a0(0x194)],gl[_0x4183a0(0x19f)]),gl[_0x4183a0(0x172)](gl[_0x4183a0(0x17d)],gl[_0x4183a0(0x16e)],gl[_0x4183a0(0x19f)]),gl[_0x4183a0(0x1b6)](gl['getUniformLocation'](program,_0x4183a0(0x168)),gameWidth,gameHeight),gl[_0x4183a0(0x1b6)](gl[_0x4183a0(0x17e)](program,'render_size'),gl[_0x4183a0(0x18a)][_0x4183a0(0x16b)],gl[_0x4183a0(0x18a)][_0x4183a0(0x1b1)]),gl[_0x4183a0(0x169)](gl['getUniformLocation'](program,'smooth_width'),gameWidth/gl[_0x4183a0(0x18a)]['width']),gl['uniform1f'](gl[_0x4183a0(0x17e)](program,'smooth_height'),gameHeight/gl[_0x4183a0(0x18a)][_0x4183a0(0x1b1)]);}function setupBuffers(){const _0x44fb29=a0_0x22ede3,_0x1f8198=gl[_0x44fb29(0x1b2)]();gl[_0x44fb29(0x19c)](gl[_0x44fb29(0x177)],_0x1f8198),gl[_0x44fb29(0x17b)](gl[_0x44fb29(0x177)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl['STATIC_DRAW']);const _0x311712=gl[_0x44fb29(0x1b8)](program,'position');gl[_0x44fb29(0x1ba)](_0x311712),gl[_0x44fb29(0x186)](_0x311712,0x2,gl[_0x44fb29(0x1a3)],![],0x0,0x0);const _0x182a27=gl[_0x44fb29(0x1b2)]();gl[_0x44fb29(0x19c)](gl['ARRAY_BUFFER'],_0x182a27),gl[_0x44fb29(0x17b)](gl[_0x44fb29(0x177)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl[_0x44fb29(0x199)]);const _0x29e073=gl['getAttribLocation'](program,_0x44fb29(0x1bf));gl[_0x44fb29(0x1ba)](_0x29e073),gl[_0x44fb29(0x186)](_0x29e073,0x2,gl[_0x44fb29(0x1a3)],![],0x0,0x0);}async function renderPixel(_0x43b34){const _0x2c8a7a=a0_0x22ede3,_0x64a486=a0_0x235b84['getPixelData']();if(!_0x64a486)return;await loadLUT64();const _0x38ca40=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x4eb215=0x0;_0x4eb215<gameHeight;_0x4eb215++){for(let _0x11560f=0x0;_0x11560f<gameWidth;_0x11560f++){const _0x4244d6=_0x4eb215*gameStride+_0x11560f,_0x1244e9=(_0x4eb215*gameWidth+_0x11560f)*0x4,_0x2fa2d2=_0x64a486[_0x4244d6],_0x3eff91=(_0x2fa2d2&0xff)>>0x2,_0x4a78c2=(_0x2fa2d2>>0x8&0xff)>>0x2,_0x2976b9=(_0x2fa2d2>>0x10&0xff)>>0x2,_0x52cd91=(_0x3eff91*0x40*0x40+_0x4a78c2*0x40+_0x2976b9)*0x3;_0x38ca40[_0x1244e9]=lut64[_0x52cd91],_0x38ca40[_0x1244e9+0x1]=lut64[_0x52cd91+0x1],_0x38ca40[_0x1244e9+0x2]=lut64[_0x52cd91+0x2],_0x38ca40[_0x1244e9+0x3]=0xff;}}if(_0x43b34==='webgl2')gl[_0x2c8a7a(0x1c9)](gl[_0x2c8a7a(0x17d)],texture),gl['texImage2D'](gl[_0x2c8a7a(0x17d)],0x0,gl[_0x2c8a7a(0x1ab)],gameWidth,gameHeight,0x0,gl['RGBA'],gl['UNSIGNED_BYTE'],_0x38ca40),gl[_0x2c8a7a(0x1ae)](gl[_0x2c8a7a(0x1c3)]),gl[_0x2c8a7a(0x17a)](gl['TRIANGLE_STRIP'],0x0,0x4);else{if(_0x43b34==='2d'){ctx2d=bufferCanvas[_0x2c8a7a(0x1ac)]('2d'),ctx2d['imageSmoothingEnabled']=![];const _0x258adf=new ImageData(_0x38ca40,gameWidth,gameHeight);createImageBitmap(_0x258adf)[_0x2c8a7a(0x1af)](_0x4124c4=>{const _0x25dd77=_0x2c8a7a;ctx2d[_0x25dd77(0x190)](0x0,0x0,bufferCanvas[_0x25dd77(0x16b)],bufferCanvas[_0x25dd77(0x1b1)]),ctx2d['drawImage'](_0x4124c4,0x0,0x0);});}}requestAnimationFrame(()=>renderPixel(_0x43b34));}export async function switchRenderMode(_0x1f8eb8){const _0x2005db=a0_0x22ede3;systemType=gameName[_0x2005db(0x192)](-0x3);if(_0x1f8eb8==='2d')setupStyle('2d'),renderPixel('2d');else _0x1f8eb8===_0x2005db(0x16d)&&(setupStyle(_0x2005db(0x16d)),setupWebGL(),await setupShaders(),setupTexture(),setupBuffers(),renderPixel(_0x2005db(0x16d)));}document[a0_0x22ede3(0x17f)]('DOMContentLoaded',function(){});function a0_0x3206(){const _0x1c98f8=['style','299ljZGxK','4.0','440ZxueDs','texcoord','zoom','crisp-edges','46791zUWZSg','COLOR_BUFFER_BIT','WebGL2\x20not\x20supported','TEXTURE_MIN_FILTER','add','linkProgram','gbc','bindTexture','./src/shaders/vertexShader.glsl','useProgram','game_size','uniform1f','createTexture','width','setItem','webgl2','TEXTURE_WRAP_T','documentElement','warm','textured','texParameteri','arrayBuffer','VERTEX_SHADER','devicePixelRatio','getElementById','ARRAY_BUFFER','0,0,','attachShader','drawArrays','bufferData','classList','TEXTURE_2D','getUniformLocation','addEventListener','querySelectorAll','scale(','--bg-size','24170JXHMHc','1518TuFmAT','_streng','vertexAttribPointer','353206nqCdvU','74748iTDeko','screenSize','canvas','fefs','64OiZqhv','getShaderParameter','text','toLowerCase','clearRect','forEach','slice','35YNZJlh','TEXTURE_WRAP_S','getShaderInfoLog','getItem','transformOrigin','createShader','STATIC_DRAW','imageRendering','./src/shaders/fragmentShader.glsl','bindBuffer','6485mAjKOr','COMPILE_STATUS','CLAMP_TO_EDGE','top\x20center','floor','log','FLOAT','8QjWjSb','521608hkoUmc','FRAGMENT_SHADER','1548VNbfTX','.bin','.stateTitle,\x20.stateDate','img-shader','RGBA','getContext','TEXTURE_MAG_FILTER','clear','then','.message-container','height','createBuffer','shaderSource','setProperty','NEAREST','uniform2f','94547taftHo','getAttribLocation','transform','enableVertexAttribArray'];a0_0x3206=function(){return _0x1c98f8;};return a0_0x3206();}