(function(_0x5c434b,_0x3ee435){const _0x2878a1=a0_0x25de,_0x3bc15e=_0x5c434b();while(!![]){try{const _0x4d7eb4=parseInt(_0x2878a1(0x1b9))/0x1+-parseInt(_0x2878a1(0x1a7))/0x2*(parseInt(_0x2878a1(0x1d2))/0x3)+-parseInt(_0x2878a1(0x1ce))/0x4*(-parseInt(_0x2878a1(0x19d))/0x5)+-parseInt(_0x2878a1(0x1a4))/0x6+-parseInt(_0x2878a1(0x1ac))/0x7+parseInt(_0x2878a1(0x1c0))/0x8+parseInt(_0x2878a1(0x192))/0x9*(parseInt(_0x2878a1(0x1d1))/0xa);if(_0x4d7eb4===_0x3ee435)break;else _0x3bc15e['push'](_0x3bc15e['shift']());}catch(_0x3b7397){_0x3bc15e['push'](_0x3bc15e['shift']());}}}(a0_0x2094,0x3bba0));function a0_0x2094(){const _0x384362=['useProgram','smooth_width','4027743MaJsoB','render_size','webgl_full','width','viewport','_temperature','COLOR_BUFFER_BIT','arrayBuffer','UNSIGNED_BYTE','getAttribLocation','getContext','8945GVdQjw','imageSmoothingEnabled','drawArrays','STATIC_DRAW','TEXTURE_MIN_FILTER','set','height','2071242hsqfgZ','RGBA','enableVertexAttribArray','2KCNXco','TEXTURE_MAG_FILTER','texImage2D','bindTexture','_4.0.bin','731710KNGhKO','texcoord','putImageData','texParameteri','createBuffer','attachShader','uniform1f','createShader','TRIANGLE_STRIP','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texSampler;uniform\x20vec2\x20game_size;uniform\x20vec2\x20render_size;uniform\x20float\x20smooth_width;uniform\x20float\x20smooth_height;vec4\x20interpolate_color(vec2\x20tex_coord){vec2\x20ip=floor(tex_coord*game_size-0.5)+0.5;vec2\x20residual=fract(tex_coord*game_size+0.5);ip/=game_size;vec4\x20v0=texture2D(texSampler,ip);vec4\x20v1=texture2D(texSampler,ip+vec2(1.0,0.0)/game_size);vec4\x20v2=texture2D(texSampler,ip+vec2(0.0,1.0)/game_size);vec4\x20v3=texture2D(texSampler,ip+vec2(1.0,1.0)/game_size);vec2\x20smooth_dim=vec2(smooth_width,smooth_height);if(fract(render_size.x/game_size.x)*game_size.x<0.01)smooth_dim.x=0.01;if(fract(render_size.y/game_size.y)*game_size.y<0.01)smooth_dim.y=0.01;vec2\x20alpha=vec2(smoothstep(0.5-smooth_dim.x*0.5,0.5+smooth_dim.x*0.5,residual.x),smoothstep(0.5-smooth_dim.y*0.5,0.5+smooth_dim.y*0.5,residual.y));return\x20mix(mix(v0,v1,alpha.x),mix(v2,v3,alpha.x),alpha.y);}void\x20main(){gl_FragColor=interpolate_color(v_texcoord);}','slice','CLAMP_TO_EDGE','./src/lut/lut64_','189781LEzrkc','game_size','clearRect','getUniformLocation','uniform2f','bufferData','VERTEX_SHADER','394608KNTAez','FLOAT','getItem','bindBuffer','smooth_height','ARRAY_BUFFER','attribute\x20vec2\x20position;attribute\x20vec2\x20texcoord;varying\x20vec2\x20v_texcoord;void\x20main()\x20{gl_Position\x20=\x20vec4(position,\x200.0,\x201.0);v_texcoord\x20=\x20texcoord;}','precision\x20mediump\x20float;varying\x20vec2\x20v_texcoord;uniform\x20sampler2D\x20texture;void\x20main()\x20{gl_FragColor\x20=\x20texture2D(texture,\x20v_texcoord);}','log','TEXTURE_WRAP_S','canvas','vertexAttribPointer','none','TEXTURE_2D','692fxzerN','webgl','NEAREST','10xfhjmb','905262syLONi','linkProgram','shaderSource','createTexture','low-power'];a0_0x2094=function(){return _0x384362;};return a0_0x2094();}import*as a0_0xbf727b from'./main.js';let gl=null,program=null,texture=null,ctx2d=null,lut64=null,lut64Profile=null,imageDataObj=null,fs=null,vs=null;async function loadLUT64(){const _0x335d51=a0_0x25de;systemType=gameName[_0x335d51(0x1b6)](-0x3);const _0xeb951f=(localStorage[_0x335d51(0x1c2)](gameName+_0x335d51(0x197))||_0x335d51(0x1cc))['toLowerCase']();if(!lut64||lut64Profile!==_0xeb951f){const _0x2c6648=_0x335d51(0x1b8)+_0xeb951f+_0x335d51(0x1ab);console[_0x335d51(0x1c8)](_0x2c6648);const _0x18547d=await fetch(_0x2c6648),_0x80b147=await _0x18547d[_0x335d51(0x199)]();lut64=new Uint8Array(_0x80b147),lut64Profile=_0xeb951f;}}function setupWebGL_Shader(_0x5102d6){const _0x2c8f3b=a0_0x25de;gl=bufferCanvas['getContext']('webgl',{'alpha':![],'depth':![],'antialias':![],'premultipliedAlpha':![],'preserveDrawingBuffer':![],'powerPreference':_0x2c8f3b(0x1d6)}),gl[_0x2c8f3b(0x196)](0x0,0x0,bufferCanvas[_0x2c8f3b(0x195)],bufferCanvas[_0x2c8f3b(0x1a3)]);function _0x95aaa1(_0x498d9d,_0x427514){const _0x5de52f=_0x2c8f3b,_0x576daf=gl[_0x5de52f(0x1b3)](_0x498d9d);return gl[_0x5de52f(0x1d4)](_0x576daf,_0x427514),gl['compileShader'](_0x576daf),_0x576daf;}vs=_0x2c8f3b(0x1c6);if(_0x5102d6===_0x2c8f3b(0x1cf))fs=_0x2c8f3b(0x1c7);else _0x5102d6===_0x2c8f3b(0x194)&&(fs=_0x2c8f3b(0x1b5));const _0x26771f=_0x95aaa1(gl[_0x2c8f3b(0x1bf)],vs),_0x2608b5=_0x95aaa1(gl['FRAGMENT_SHADER'],fs);return program=gl['createProgram'](),gl['attachShader'](program,_0x26771f),gl[_0x2c8f3b(0x1b1)](program,_0x2608b5),gl[_0x2c8f3b(0x1d3)](program),gl[_0x2c8f3b(0x190)](program),program;}function setupTexture_Buffer(_0x8c7f67){const _0x1f4272=a0_0x25de;texture=gl[_0x1f4272(0x1d5)](),gl[_0x1f4272(0x1aa)](gl[_0x1f4272(0x1cd)],texture),gl[_0x1f4272(0x1af)](gl[_0x1f4272(0x1cd)],gl[_0x1f4272(0x1a1)],gl[_0x1f4272(0x1d0)]),gl[_0x1f4272(0x1af)](gl[_0x1f4272(0x1cd)],gl[_0x1f4272(0x1a8)],gl['NEAREST']),gl[_0x1f4272(0x1af)](gl[_0x1f4272(0x1cd)],gl[_0x1f4272(0x1c9)],gl[_0x1f4272(0x1b7)]),gl[_0x1f4272(0x1af)](gl['TEXTURE_2D'],gl['TEXTURE_WRAP_T'],gl[_0x1f4272(0x1b7)]);_0x8c7f67===_0x1f4272(0x194)&&(gl[_0x1f4272(0x1bd)](gl['getUniformLocation'](program,_0x1f4272(0x1ba)),gameWidth,gameHeight),gl[_0x1f4272(0x1bd)](gl[_0x1f4272(0x1bc)](program,_0x1f4272(0x193)),gl[_0x1f4272(0x1ca)][_0x1f4272(0x195)],gl[_0x1f4272(0x1ca)][_0x1f4272(0x1a3)]),gl['uniform1f'](gl['getUniformLocation'](program,_0x1f4272(0x191)),gameWidth/gl['canvas'][_0x1f4272(0x195)]),gl[_0x1f4272(0x1b2)](gl[_0x1f4272(0x1bc)](program,_0x1f4272(0x1c4)),gameHeight/gl['canvas']['height']));const _0x55d622=gl['createBuffer']();gl[_0x1f4272(0x1c3)](gl[_0x1f4272(0x1c5)],_0x55d622),gl[_0x1f4272(0x1be)](gl[_0x1f4272(0x1c5)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),gl[_0x1f4272(0x1a0)]),gl['vertexAttribPointer'](gl['getAttribLocation'](program,'position'),0x2,gl[_0x1f4272(0x1c1)],![],0x0,0x0),gl[_0x1f4272(0x1a6)](gl[_0x1f4272(0x19b)](program,'position'));const _0x2204a8=gl[_0x1f4272(0x1b0)]();gl['bindBuffer'](gl['ARRAY_BUFFER'],_0x2204a8),gl[_0x1f4272(0x1be)](gl[_0x1f4272(0x1c5)],new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x1,0x0]),gl['STATIC_DRAW']),gl[_0x1f4272(0x1cb)](gl[_0x1f4272(0x19b)](program,'texcoord'),0x2,gl['FLOAT'],![],0x0,0x0),gl[_0x1f4272(0x1a6)](gl['getAttribLocation'](program,_0x1f4272(0x1ad)));}function setup2DContext(){const _0x2f730e=a0_0x25de;ctx2d=bufferCanvas[_0x2f730e(0x19c)]('2d'),ctx2d[_0x2f730e(0x19e)]=![];}function a0_0x25de(_0x37270a,_0xb0eae){const _0x209458=a0_0x2094();return a0_0x25de=function(_0x25de5b,_0x568949){_0x25de5b=_0x25de5b-0x190;let _0x4a15b8=_0x209458[_0x25de5b];return _0x4a15b8;},a0_0x25de(_0x37270a,_0xb0eae);}async function renderPixel(_0x52ac4f){const _0x4183dc=a0_0x25de,_0x15eb53=a0_0xbf727b['getPixelData']();if(!_0x15eb53)return;await loadLUT64();const _0x4c7ed5=new Uint8ClampedArray(gameWidth*gameHeight*0x4);for(let _0x392ab6=0x0;_0x392ab6<gameHeight;_0x392ab6++){for(let _0x289ae0=0x0;_0x289ae0<gameWidth;_0x289ae0++){const _0x56b044=_0x392ab6*gameStride+_0x289ae0,_0x3981e2=(_0x392ab6*gameWidth+_0x289ae0)*0x4,_0x354534=_0x15eb53[_0x56b044];if(lut64Profile==='none')_0x4c7ed5[_0x3981e2]=_0x354534&0xff,_0x4c7ed5[_0x3981e2+0x1]=_0x354534>>0x8&0xff,_0x4c7ed5[_0x3981e2+0x2]=_0x354534>>0x10&0xff,_0x4c7ed5[_0x3981e2+0x3]=0xff;else{const _0x563485=(_0x354534&0xff)>>0x2,_0x2bdc84=(_0x354534>>0x8&0xff)>>0x2,_0x17bf78=(_0x354534>>0x10&0xff)>>0x2,_0x2bd77a=(_0x563485*0x40*0x40+_0x2bdc84*0x40+_0x17bf78)*0x3;_0x4c7ed5[_0x3981e2]=lut64[_0x2bd77a],_0x4c7ed5[_0x3981e2+0x1]=lut64[_0x2bd77a+0x1],_0x4c7ed5[_0x3981e2+0x2]=lut64[_0x2bd77a+0x2],_0x4c7ed5[_0x3981e2+0x3]=0xff;}}}if(_0x52ac4f===_0x4183dc(0x1cf))gl[_0x4183dc(0x1a9)](gl['TEXTURE_2D'],0x0,gl['RGBA'],gameWidth,gameHeight,0x0,gl[_0x4183dc(0x1a5)],gl[_0x4183dc(0x19a)],_0x4c7ed5),gl['clear'](gl[_0x4183dc(0x198)]),gl[_0x4183dc(0x19f)](gl[_0x4183dc(0x1b4)],0x0,0x4);else _0x52ac4f==='2d'&&(!imageDataObj?imageDataObj=new ImageData(_0x4c7ed5,gameWidth,gameHeight):imageDataObj['data'][_0x4183dc(0x1a2)](_0x4c7ed5),ctx2d[_0x4183dc(0x1bb)](0x0,0x0,bufferCanvas[_0x4183dc(0x195)],bufferCanvas[_0x4183dc(0x1a3)]),ctx2d[_0x4183dc(0x1ae)](imageDataObj,0x0,0x0));requestAnimationFrame(()=>renderPixel(_0x52ac4f));}export async function switchRenderMode(_0x23f0f8){const _0x271ce0=a0_0x25de;systemType=gameName[_0x271ce0(0x1b6)](-0x3);if(_0x23f0f8==='2d')setupStyle('2d'),setup2DContext(),renderPixel('2d');else{if(_0x23f0f8===_0x271ce0(0x1cf))setupStyle('2d'),setupWebGL_Shader(_0x271ce0(0x1cf)),setupTexture_Buffer('webgl'),renderPixel(_0x271ce0(0x1cf));else _0x23f0f8===_0x271ce0(0x194)&&(setupStyle(_0x271ce0(0x194)),setupWebGL_Shader(_0x271ce0(0x194)),setupTexture_Buffer('webgl_full'),renderPixel(_0x271ce0(0x1cf)));}}