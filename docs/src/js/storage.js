const a0_0x78581c=a0_0xc3c8;(function(_0x379af5,_0x9fea32){const _0x3781aa=a0_0xc3c8,_0x4f8a3a=_0x379af5();while(!![]){try{const _0x106628=-parseInt(_0x3781aa(0x16b))/0x1+parseInt(_0x3781aa(0x166))/0x2+-parseInt(_0x3781aa(0x168))/0x3+-parseInt(_0x3781aa(0x16c))/0x4+-parseInt(_0x3781aa(0x184))/0x5+parseInt(_0x3781aa(0x195))/0x6*(-parseInt(_0x3781aa(0x18e))/0x7)+parseInt(_0x3781aa(0x1a2))/0x8*(parseInt(_0x3781aa(0x17f))/0x9);if(_0x106628===_0x9fea32)break;else _0x4f8a3a['push'](_0x4f8a3a['shift']());}catch(_0x386791){_0x4f8a3a['push'](_0x4f8a3a['shift']());}}}(a0_0x320c,0xb4bb6));function a0_0x320c(){const _0x828043=['rom','6326270EHshNn','div','gap-10','delete','lastChild','span','addEventListener','createElement','storage','disable','7crAewq','editFile','YiB','_imageState','KiB','opacity0','right','7501098qwYCie','firstChild','downloadFile','remove','replace','listScreenshot','listGame','add','statesFile','mib','/data/saves/','romsFile','flex-1','47074264qUKmJT','_dateState','change','EiB','gap-16','abs','appendChild','dialog','close','actionDiv','getElementById','TiB','getItem','ZiB','classList','863772QKpyQT','/data/states/','3532488RmSGAj','onclick','textContent','402888eDYguE','5920280owhrJQ','download','active','rom-item','fileSize','removeItem','DOMContentLoaded','length','showModal','Edit\x20filename','screenshotsFile','onclose','/data/screenshots/','uId','prompt','GiB','toFixed','listSave','home','9LAuvBy','slice','PiB','mgba-storage'];a0_0x320c=function(){return _0x828043;};return a0_0x320c();}import*as a0_0x59543b from'./main.js';const mgbaStorage=document['getElementById'](a0_0x78581c(0x182)),savesFile=document[a0_0x78581c(0x161)]('savesFile'),romsFile=document[a0_0x78581c(0x161)](a0_0x78581c(0x1a0)),statesFile=document[a0_0x78581c(0x161)](a0_0x78581c(0x19d)),screenshotsFile=document['getElementById'](a0_0x78581c(0x176));function humanFileSize(_0x47cd8f,_0x471058=![],_0x16a3ea=0x1){const _0x547944=a0_0x78581c,_0x4521d9=_0x471058?0x3e8:0x400,_0x5c150e=_0x471058?['kB','MB','GB','TB','PB','EB','ZB','YB']:[_0x547944(0x192),'MiB',_0x547944(0x17b),_0x547944(0x162),_0x547944(0x181),_0x547944(0x1a5),_0x547944(0x164),_0x547944(0x190)];let _0x1393ac=-0x1;do{_0x47cd8f/=_0x4521d9,++_0x1393ac;}while(Math[_0x547944(0x15c)](_0x47cd8f)>=_0x4521d9&&_0x1393ac<_0x5c150e[_0x547944(0x173)]-0x1);return _0x47cd8f[_0x547944(0x17c)](_0x16a3ea)+'\x20'+_0x5c150e[_0x1393ac];}function createElementStorage(_0x2ab863,_0x3430df,_0x120b36){const _0xa84903=a0_0x78581c,_0x1df5bd=document[_0xa84903(0x18b)](_0xa84903(0x185));_0x1df5bd[_0xa84903(0x165)][_0xa84903(0x19c)](_0xa84903(0x1a1),'rom-item',_0xa84903(0x183)),_0x2ab863[_0xa84903(0x15d)](_0x1df5bd);const _0x4b7a8d=document[_0xa84903(0x18b)](_0xa84903(0x189));_0x4b7a8d[_0xa84903(0x16a)]=_0x3430df,_0x4b7a8d[_0xa84903(0x165)]['add'](_0xa84903(0x1a1)),_0x1df5bd[_0xa84903(0x15d)](_0x4b7a8d),_0x4b7a8d[_0xa84903(0x169)]=()=>{const _0x4fb14c=_0xa84903,_0x36aa01=document[_0x4fb14c(0x18b)](_0x4fb14c(0x15e));_0x36aa01[_0x4fb14c(0x177)]=()=>_0x36aa01['remove'](),_0x2ab863[_0x4fb14c(0x15d)](_0x36aa01);const _0x4bb534=document['createElement']('div');_0x4bb534['classList'][_0x4fb14c(0x19c)](_0x4fb14c(0x18c),_0x4fb14c(0x194),_0x4fb14c(0x186)),_0x36aa01[_0x4fb14c(0x15d)](_0x4bb534);const _0x1a6fe1=document[_0x4fb14c(0x18b)](_0x4fb14c(0x185));_0x1a6fe1[_0x4fb14c(0x165)][_0x4fb14c(0x19c)](_0x4fb14c(0x17e),'bc',_0x4fb14c(0x1a1)),_0x4bb534[_0x4fb14c(0x15d)](_0x1a6fe1);const _0x29dfd4=document[_0x4fb14c(0x18b)](_0x4fb14c(0x185));_0x29dfd4[_0x4fb14c(0x165)][_0x4fb14c(0x19c)]('flex-1'),_0x4bb534['appendChild'](_0x29dfd4);const _0x3918d9=document[_0x4fb14c(0x18b)](_0x4fb14c(0x185));_0x3918d9[_0x4fb14c(0x165)][_0x4fb14c(0x19c)](_0x4fb14c(0x1a1)),_0x4bb534[_0x4fb14c(0x15d)](_0x3918d9);const _0x3f634e=document[_0x4fb14c(0x18b)](_0x4fb14c(0x185));_0x3f634e[_0x4fb14c(0x165)]['add'](_0x4fb14c(0x1a1)),_0x4bb534[_0x4fb14c(0x15d)](_0x3f634e),mgbaStorage[_0x4fb14c(0x165)][_0x4fb14c(0x19c)](_0x4fb14c(0x193)),_0x1a6fe1[_0x4fb14c(0x169)]=()=>{const _0x384dd9=_0x4fb14c;_0x36aa01[_0x384dd9(0x15f)](),_0x36aa01[_0x384dd9(0x198)](),mgbaStorage[_0x384dd9(0x165)][_0x384dd9(0x198)](_0x384dd9(0x193));};const _0x3707be=document[_0x4fb14c(0x18b)]('div');_0x3707be[_0x4fb14c(0x165)][_0x4fb14c(0x19c)](_0x4fb14c(0x1a1),_0x4fb14c(0x16f),'hw','cw'),_0x3707be[_0x4fb14c(0x16a)]=_0x3430df,_0x36aa01['appendChild'](_0x3707be);const _0x480731=document[_0x4fb14c(0x18b)](_0x4fb14c(0x185));_0x480731['classList'][_0x4fb14c(0x19c)](_0x4fb14c(0x160),'hw','cw',_0x4fb14c(0x15b)),_0x36aa01['appendChild'](_0x480731);const _0x48c307=document['createElement']('div');_0x48c307[_0x4fb14c(0x165)][_0x4fb14c(0x19c)](_0x4fb14c(0x16d),'bc'),_0x480731[_0x4fb14c(0x15d)](_0x48c307),_0x48c307[_0x4fb14c(0x169)]=()=>{const _0x566cd9=_0x4fb14c;a0_0x59543b[_0x566cd9(0x197)](_0x120b36,_0x3430df);};const _0x172411=document[_0x4fb14c(0x18b)](_0x4fb14c(0x185));_0x172411[_0x4fb14c(0x165)]['add'](_0x4fb14c(0x187),'bc'),_0x480731[_0x4fb14c(0x15d)](_0x172411),_0x172411['onclick']=async()=>{const _0x257f3e=_0x4fb14c;if(window['confirm']('Delete\x20this\x20file?'+_0x3430df)){const _0x49a583=_0x3430df[_0x257f3e(0x199)](/\....$/,'.gba');a0_0x59543b['deleteFile'](_0x120b36),localStorage[_0x257f3e(0x171)](_0x49a583+_0x257f3e(0x1a3)+_0x3430df[_0x257f3e(0x180)](-0x1)),localStorage[_0x257f3e(0x171)](_0x49a583+_0x257f3e(0x191)+_0x3430df[_0x257f3e(0x180)](-0x1)),localStorageFile(),_0x36aa01[_0x257f3e(0x15f)](),_0x36aa01[_0x257f3e(0x198)](),mgbaStorage['classList'][_0x257f3e(0x198)](_0x257f3e(0x193));}};const _0x4ed4aa=document['createElement'](_0x4fb14c(0x185));_0x4ed4aa[_0x4fb14c(0x165)][_0x4fb14c(0x19c)]('rename','bc'),_0x480731['appendChild'](_0x4ed4aa),_0x4ed4aa['onclick']=async()=>{const _0x177dd5=_0x4fb14c,_0xc9db57=window[_0x177dd5(0x17a)](_0x177dd5(0x175),_0x3430df);_0xc9db57!==null&&(a0_0x59543b[_0x177dd5(0x18f)](_0x120b36,_0x3430df,_0xc9db57),localStorageFile(),_0x36aa01[_0x177dd5(0x15f)](),_0x36aa01['remove'](),mgbaStorage['classList'][_0x177dd5(0x198)]('opacity0'));},_0x36aa01[_0x4fb14c(0x174)]();};const _0x4bb577=document[_0xa84903(0x18b)](_0xa84903(0x189));_0x4bb577[_0xa84903(0x16a)]=humanFileSize(a0_0x59543b[_0xa84903(0x170)](_0x120b36)),_0x4bb577['classList']['add'](_0xa84903(0x19e)),_0x1df5bd[_0xa84903(0x15d)](_0x4bb577);}export function localStorageFile(){const _0x4d1d93=a0_0x78581c,_0xf2e1f9=a0_0x59543b[_0x4d1d93(0x19b)](),_0x42e118=a0_0x59543b[_0x4d1d93(0x17d)](),_0x31a96c=a0_0x59543b['listState'](),_0x128580=a0_0x59543b['listCheat'](),_0x591d99=a0_0x59543b[_0x4d1d93(0x19a)](),_0x24b314=[romsFile,savesFile,statesFile,cheatsFile,screenshotsFile];for(const _0x5e35d4 of _0x24b314){while(_0x5e35d4[_0x4d1d93(0x196)]){_0x5e35d4[_0x4d1d93(0x188)]['remove']();}}for(const _0x477b7b of _0xf2e1f9){createElementStorage(romsFile,_0x477b7b,'/data/games/'+_0x477b7b);}for(const _0x12fa9c of _0x31a96c){createElementStorage(statesFile,_0x12fa9c,_0x4d1d93(0x167)+_0x12fa9c);}for(const _0x20693c of _0x42e118){createElementStorage(savesFile,_0x20693c,_0x4d1d93(0x19f)+_0x20693c);}for(const _0x152950 of _0x128580){createElementStorage(cheatsFile,_0x152950,'/data/cheats/'+_0x152950);}for(const _0x84f3fe of _0x591d99){createElementStorage(screenshotsFile,_0x84f3fe,_0x4d1d93(0x178)+_0x84f3fe);}}function a0_0xc3c8(_0xded9c2,_0x2bc067){const _0x320c2e=a0_0x320c();return a0_0xc3c8=function(_0xc3c8b,_0x5e1e53){_0xc3c8b=_0xc3c8b-0x15b;let _0x3ac982=_0x320c2e[_0xc3c8b];return _0x3ac982;},a0_0xc3c8(_0xded9c2,_0x2bc067);}document['addEventListener'](a0_0x78581c(0x172),function(){const _0xcc510b=a0_0x78581c;upLoadFile[_0xcc510b(0x18a)](_0xcc510b(0x1a4),function(){a0_0x59543b['uploadFile'](upLoadFile);}),openLocalStorage['addEventListener']('click',function(){const _0x1a7b29=_0xcc510b,_0x5430db=localStorage[_0x1a7b29(0x163)](_0x1a7b29(0x179));storage[_0x1a7b29(0x165)][_0x1a7b29(0x198)](_0x1a7b29(0x18d)),intro[_0x1a7b29(0x165)][_0x1a7b29(0x19c)](_0x1a7b29(0x18d)),ingame[_0x1a7b29(0x165)]['add'](_0x1a7b29(0x18d)),_0x5430db===null||_0x5430db===''?(dropboxRestore['classList'][_0x1a7b29(0x198)](_0x1a7b29(0x16e)),dropboxBackup[_0x1a7b29(0x165)][_0x1a7b29(0x198)](_0x1a7b29(0x16e)),dropboxCloud[_0x1a7b29(0x165)]['remove'](_0x1a7b29(0x16e))):(dropboxRestore['classList'][_0x1a7b29(0x19c)]('active'),dropboxBackup[_0x1a7b29(0x165)][_0x1a7b29(0x19c)](_0x1a7b29(0x16e)),dropboxCloud[_0x1a7b29(0x165)]['add'](_0x1a7b29(0x16e)));}),setTimeout(()=>{localStorageFile();},0xbb8);});