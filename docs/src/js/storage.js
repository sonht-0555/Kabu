const a0_0x4aa9b6=a0_0x22b3;function a0_0x22b3(_0x5b98ef,_0x4542de){const _0x375cf4=a0_0x375c();return a0_0x22b3=function(_0x22b379,_0x174d98){_0x22b379=_0x22b379-0x79;let _0x45135b=_0x375cf4[_0x22b379];return _0x45135b;},a0_0x22b3(_0x5b98ef,_0x4542de);}(function(_0x2d8ae1,_0x18e633){const _0x42b4ec=a0_0x22b3,_0x21ddf3=_0x2d8ae1();while(!![]){try{const _0x49929e=parseInt(_0x42b4ec(0x8a))/0x1*(-parseInt(_0x42b4ec(0xae))/0x2)+-parseInt(_0x42b4ec(0xb8))/0x3*(-parseInt(_0x42b4ec(0xb5))/0x4)+-parseInt(_0x42b4ec(0x95))/0x5+-parseInt(_0x42b4ec(0x86))/0x6*(parseInt(_0x42b4ec(0xa9))/0x7)+parseInt(_0x42b4ec(0x8d))/0x8*(-parseInt(_0x42b4ec(0x88))/0x9)+-parseInt(_0x42b4ec(0xba))/0xa+parseInt(_0x42b4ec(0x80))/0xb*(parseInt(_0x42b4ec(0x9a))/0xc);if(_0x49929e===_0x18e633)break;else _0x21ddf3['push'](_0x21ddf3['shift']());}catch(_0x4208eb){_0x21ddf3['push'](_0x21ddf3['shift']());}}}(a0_0x375c,0xc3f7b));function a0_0x375c(){const _0x55d312=['GiB','609931ItjMxP','rename','rom-item','add','/data/states/','3002hYuIQH','showModal','downloadFile','abs','listFiles','savesFile','home','524532INXGEk','delete','right','18MyOPZr','uploadFile','4192340aOmUtG','screenshots','mgba-storage','removeItem','div','storage','span','onclick','active','close','length','textContent','22HGcVUl','flex-1','rom','remove','DOMContentLoaded','EiB','18amNOPE','games','9bJtPkD','romsFile','377ybUDSI','fileSize','gap-10','9679808rhjrjm','gap-16','disable','uId','/data/games/','download','Delete\x20this\x20file?','slice','1747915pYJDDv','createElement','lastChild','saves','cheats','16931724aHIwJN','opacity0','statesFile','/data/cheats/','classList','deleteFile','appendChild','YiB','change','actionDiv','confirm','click','getElementById','toFixed'];a0_0x375c=function(){return _0x55d312;};return a0_0x375c();}import*as a0_0x4ec598 from'./main.js';const mgbaStorage=document[a0_0x4aa9b6(0xa6)](a0_0x4aa9b6(0xbc)),savesFile=document['getElementById'](a0_0x4aa9b6(0xb3)),romsFile=document[a0_0x4aa9b6(0xa6)](a0_0x4aa9b6(0x89)),statesFile=document['getElementById'](a0_0x4aa9b6(0x9c)),screenshotsFile=document[a0_0x4aa9b6(0xa6)]('screenshotsFile');function humanFileSize(_0xddbe25,_0x2af345=![],_0x31d9a0=0x1){const _0x59a886=a0_0x4aa9b6,_0x1ce16e=_0x2af345?0x3e8:0x400,_0x431816=_0x2af345?['kB','MB','GB','TB','PB','EB','ZB','YB']:['KiB','MiB',_0x59a886(0xa8),'TiB','PiB',_0x59a886(0x85),'ZiB',_0x59a886(0xa1)];let _0x437a72=-0x1;do{_0xddbe25/=_0x1ce16e,++_0x437a72;}while(Math[_0x59a886(0xb1)](_0xddbe25)>=_0x1ce16e&&_0x437a72<_0x431816[_0x59a886(0x7e)]-0x1);return _0xddbe25[_0x59a886(0xa7)](_0x31d9a0)+'\x20'+_0x431816[_0x437a72];}function createElementStorage(_0x37d4da,_0x4e9ff9,_0x2b97b4){const _0x39af89=a0_0x4aa9b6,_0x5c9b7d=document['createElement']('div');_0x5c9b7d[_0x39af89(0x9e)][_0x39af89(0xac)]('flex-1','rom-item',_0x39af89(0x82)),_0x37d4da[_0x39af89(0xa0)](_0x5c9b7d);const _0x51b1d7=document[_0x39af89(0x96)]('span');_0x51b1d7['textContent']=_0x4e9ff9,_0x51b1d7[_0x39af89(0x9e)]['add'](_0x39af89(0x81)),_0x5c9b7d[_0x39af89(0xa0)](_0x51b1d7),_0x51b1d7['onclick']=()=>{const _0x365994=_0x39af89,_0x293eb2=document[_0x365994(0x96)]('dialog');_0x293eb2['onclose']=()=>_0x293eb2[_0x365994(0x83)](),_0x37d4da['appendChild'](_0x293eb2);const _0x9f48a6=document['createElement'](_0x365994(0xbe));_0x9f48a6['classList'][_0x365994(0xac)](_0x365994(0x79),_0x365994(0xb7),_0x365994(0x8c)),_0x293eb2['appendChild'](_0x9f48a6);const _0x976bb=document['createElement'](_0x365994(0xbe));_0x976bb[_0x365994(0x9e)][_0x365994(0xac)](_0x365994(0xb4),'bc','flex-1'),_0x9f48a6[_0x365994(0xa0)](_0x976bb);const _0x900800=document[_0x365994(0x96)](_0x365994(0xbe));_0x900800[_0x365994(0x9e)][_0x365994(0xac)](_0x365994(0x81)),_0x9f48a6[_0x365994(0xa0)](_0x900800);const _0x5a022d=document[_0x365994(0x96)](_0x365994(0xbe));_0x5a022d['classList'][_0x365994(0xac)](_0x365994(0x81)),_0x9f48a6[_0x365994(0xa0)](_0x5a022d);const _0x5c09f9=document[_0x365994(0x96)]('div');_0x5c09f9[_0x365994(0x9e)][_0x365994(0xac)](_0x365994(0x81)),_0x9f48a6[_0x365994(0xa0)](_0x5c09f9),mgbaStorage[_0x365994(0x9e)]['add'](_0x365994(0x9b)),_0x976bb[_0x365994(0x7b)]=()=>{const _0x240171=_0x365994;_0x293eb2[_0x240171(0x7d)](),_0x293eb2[_0x240171(0x83)](),mgbaStorage[_0x240171(0x9e)][_0x240171(0x83)]('opacity0');};const _0x532e1f=document[_0x365994(0x96)](_0x365994(0xbe));_0x532e1f['classList'][_0x365994(0xac)](_0x365994(0x81),_0x365994(0xab),'hw','cw'),_0x532e1f[_0x365994(0x7f)]=_0x4e9ff9,_0x293eb2['appendChild'](_0x532e1f);const _0x2d1c4b=document[_0x365994(0x96)](_0x365994(0xbe));_0x2d1c4b['classList'][_0x365994(0xac)](_0x365994(0xa3),'hw','cw',_0x365994(0x8e)),_0x293eb2['appendChild'](_0x2d1c4b);const _0x42f030=document[_0x365994(0x96)]('div');_0x42f030['classList']['add'](_0x365994(0x92),'bc'),_0x2d1c4b['appendChild'](_0x42f030),_0x42f030[_0x365994(0x7b)]=()=>{const _0x3b69bd=_0x365994;a0_0x4ec598[_0x3b69bd(0xb0)](_0x2b97b4,_0x4e9ff9);};const _0x4bf179=document[_0x365994(0x96)]('div');_0x4bf179[_0x365994(0x9e)][_0x365994(0xac)](_0x365994(0xb6),'bc'),_0x2d1c4b[_0x365994(0xa0)](_0x4bf179),_0x4bf179[_0x365994(0x7b)]=async()=>{const _0x1b0e0c=_0x365994;if(window[_0x1b0e0c(0xa4)](_0x1b0e0c(0x93)+_0x4e9ff9)){const _0x11ab24=_0x4e9ff9['replace'](/\....$/,'.gba');a0_0x4ec598[_0x1b0e0c(0x9f)](_0x2b97b4),localStorage[_0x1b0e0c(0xbd)](_0x11ab24+'_dateState'+_0x4e9ff9[_0x1b0e0c(0x94)](-0x1)),localStorage[_0x1b0e0c(0xbd)](_0x11ab24+'_imageState'+_0x4e9ff9[_0x1b0e0c(0x94)](-0x1)),localStorageFile(),_0x293eb2[_0x1b0e0c(0x7d)](),_0x293eb2[_0x1b0e0c(0x83)](),mgbaStorage[_0x1b0e0c(0x9e)][_0x1b0e0c(0x83)](_0x1b0e0c(0x9b));}};const _0x2747ed=document[_0x365994(0x96)](_0x365994(0xbe));_0x2747ed[_0x365994(0x9e)][_0x365994(0xac)](_0x365994(0xaa),'bc'),_0x2d1c4b[_0x365994(0xa0)](_0x2747ed),_0x2747ed[_0x365994(0x7b)]=async()=>{const _0x41dadb=_0x365994,_0x190539=window['prompt']('Edit\x20filename',_0x4e9ff9);_0x190539!==null&&(a0_0x4ec598['editFile'](_0x2b97b4,_0x4e9ff9,_0x190539),localStorageFile(),_0x293eb2[_0x41dadb(0x7d)](),_0x293eb2['remove'](),mgbaStorage[_0x41dadb(0x9e)][_0x41dadb(0x83)]('opacity0'));},_0x293eb2[_0x365994(0xaf)]();};const _0x41c344=document[_0x39af89(0x96)](_0x39af89(0x7a));_0x41c344[_0x39af89(0x7f)]=humanFileSize(a0_0x4ec598[_0x39af89(0x8b)](_0x2b97b4)),_0x41c344[_0x39af89(0x9e)][_0x39af89(0xac)]('mib'),_0x5c9b7d[_0x39af89(0xa0)](_0x41c344);}export function localStorageFile(){const _0x239f79=a0_0x4aa9b6,_0x44ce83=a0_0x4ec598[_0x239f79(0xb2)](_0x239f79(0x87)),_0x3eed68=a0_0x4ec598[_0x239f79(0xb2)](_0x239f79(0x98)),_0x48e315=a0_0x4ec598['listFiles']('states'),_0x426bb3=a0_0x4ec598[_0x239f79(0xb2)](_0x239f79(0x99)),_0x1ff5d2=a0_0x4ec598[_0x239f79(0xb2)](_0x239f79(0xbb)),_0x3c9d35=[romsFile,savesFile,statesFile,cheatsFile,screenshotsFile];for(const _0x570e25 of _0x3c9d35){while(_0x570e25['firstChild']){_0x570e25[_0x239f79(0x97)][_0x239f79(0x83)]();}}for(const _0x508165 of _0x44ce83){createElementStorage(romsFile,_0x508165,_0x239f79(0x91)+_0x508165);}for(const _0x1335fb of _0x48e315){createElementStorage(statesFile,_0x1335fb,_0x239f79(0xad)+_0x1335fb);}for(const _0x536405 of _0x3eed68){createElementStorage(savesFile,_0x536405,'/data/saves/'+_0x536405);}for(const _0x32857f of _0x426bb3){createElementStorage(cheatsFile,_0x32857f,_0x239f79(0x9d)+_0x32857f);}for(const _0x5095af of _0x1ff5d2){createElementStorage(screenshotsFile,_0x5095af,'/data/screenshots/'+_0x5095af);}}document['addEventListener'](a0_0x4aa9b6(0x84),function(){const _0x5e6fbd=a0_0x4aa9b6;upLoadFile['addEventListener'](_0x5e6fbd(0xa2),function(){const _0x530495=_0x5e6fbd;a0_0x4ec598[_0x530495(0xb9)](upLoadFile);}),openLocalStorage['addEventListener'](_0x5e6fbd(0xa5),function(){const _0x4b7d10=_0x5e6fbd,_0x1e46c3=localStorage['getItem'](_0x4b7d10(0x90));storage[_0x4b7d10(0x9e)]['remove'](_0x4b7d10(0x8f)),intro[_0x4b7d10(0x9e)]['add'](_0x4b7d10(0x8f)),ingame[_0x4b7d10(0x9e)][_0x4b7d10(0xac)]('disable'),_0x1e46c3===null||_0x1e46c3===''?(dropboxRestore[_0x4b7d10(0x9e)]['remove']('active'),dropboxBackup[_0x4b7d10(0x9e)]['remove']('active'),dropboxCloud['classList'][_0x4b7d10(0x83)]('active')):(dropboxRestore[_0x4b7d10(0x9e)][_0x4b7d10(0xac)]('active'),dropboxBackup['classList']['add'](_0x4b7d10(0x7c)),dropboxCloud[_0x4b7d10(0x9e)][_0x4b7d10(0xac)]('active'));}),setTimeout(()=>{localStorageFile();},0xbb8);});