const a0_0x201de4=a0_0x10a8;(function(_0x58722d,_0x24035f){const _0x49e8fa=a0_0x10a8,_0x5b079f=_0x58722d();while(!![]){try{const _0x580788=-parseInt(_0x49e8fa(0xa6))/0x1+parseInt(_0x49e8fa(0xb4))/0x2*(-parseInt(_0x49e8fa(0xa2))/0x3)+parseInt(_0x49e8fa(0xca))/0x4+parseInt(_0x49e8fa(0x9a))/0x5*(parseInt(_0x49e8fa(0x7f))/0x6)+-parseInt(_0x49e8fa(0xb6))/0x7+parseInt(_0x49e8fa(0xc1))/0x8*(-parseInt(_0x49e8fa(0x86))/0x9)+parseInt(_0x49e8fa(0xa9))/0xa;if(_0x580788===_0x24035f)break;else _0x5b079f['push'](_0x5b079f['shift']());}catch(_0x3a34b7){_0x5b079f['push'](_0x5b079f['shift']());}}}(a0_0x4ac0,0x352cc));import*as a0_0x150f71 from'./main.js';const mgbaStorage=document[a0_0x201de4(0x92)](a0_0x201de4(0xbe)),savesFile=document[a0_0x201de4(0x92)](a0_0x201de4(0xc4)),romsFile=document['getElementById'](a0_0x201de4(0x8d)),statesFile=document[a0_0x201de4(0x92)](a0_0x201de4(0xc2)),screenshotsFile=document[a0_0x201de4(0x92)](a0_0x201de4(0x90));function humanFileSize(_0x5dca3e,_0x3effff=![],_0x46d62a=0x1){const _0x3bef18=a0_0x201de4,_0x3b37f3=_0x3effff?0x3e8:0x400,_0xf5995f=_0x3effff?['kB','MB','GB','TB','PB','EB','ZB','YB']:['KiB','MiB',_0x3bef18(0x95),_0x3bef18(0xba),_0x3bef18(0x8b),'EiB',_0x3bef18(0xb5),_0x3bef18(0x97)];let _0x3e24bb=-0x1;do{_0x5dca3e/=_0x3b37f3,++_0x3e24bb;}while(Math[_0x3bef18(0xac)](_0x5dca3e)>=_0x3b37f3&&_0x3e24bb<_0xf5995f['length']-0x1);return _0x5dca3e[_0x3bef18(0x82)](_0x46d62a)+'\x20'+_0xf5995f[_0x3e24bb];}function createElementStorage(_0x3e76b6,_0x1dee6c,_0x2c5ef7){const _0xfc1c5f=a0_0x201de4,_0x4bcc5e=document[_0xfc1c5f(0xa1)](_0xfc1c5f(0xbf));_0x4bcc5e[_0xfc1c5f(0x81)][_0xfc1c5f(0x83)]('flex-1',_0xfc1c5f(0x9b),'rom'),_0x3e76b6['appendChild'](_0x4bcc5e);const _0x1118bd=document[_0xfc1c5f(0xa1)](_0xfc1c5f(0x87));_0x1118bd[_0xfc1c5f(0x80)]=_0x1dee6c,_0x1118bd['classList']['add'](_0xfc1c5f(0x94)),_0x4bcc5e['appendChild'](_0x1118bd),_0x1118bd['onclick']=()=>{const _0x3e1b09=_0xfc1c5f,_0x2f6c50=document[_0x3e1b09(0xa1)]('dialog');_0x2f6c50[_0x3e1b09(0x85)]=()=>_0x2f6c50[_0x3e1b09(0xc3)](),_0x3e76b6['appendChild'](_0x2f6c50);const _0x191443=document['createElement']('div');_0x191443[_0x3e1b09(0x81)][_0x3e1b09(0x83)](_0x3e1b09(0xb9),_0x3e1b09(0xb8),_0x3e1b09(0xbc)),_0x2f6c50[_0x3e1b09(0x88)](_0x191443);const _0x2c819e=document['createElement'](_0x3e1b09(0xbf));_0x2c819e[_0x3e1b09(0x81)][_0x3e1b09(0x83)]('home','bc',_0x3e1b09(0x94)),_0x191443[_0x3e1b09(0x88)](_0x2c819e);const _0x299563=document[_0x3e1b09(0xa1)](_0x3e1b09(0xbf));_0x299563['classList'][_0x3e1b09(0x83)](_0x3e1b09(0x94)),_0x191443[_0x3e1b09(0x88)](_0x299563);const _0x3f05ee=document[_0x3e1b09(0xa1)](_0x3e1b09(0xbf));_0x3f05ee['classList'][_0x3e1b09(0x83)](_0x3e1b09(0x94)),_0x191443[_0x3e1b09(0x88)](_0x3f05ee);const _0x156cb3=document[_0x3e1b09(0xa1)](_0x3e1b09(0xbf));_0x156cb3[_0x3e1b09(0x81)]['add'](_0x3e1b09(0x94)),_0x191443[_0x3e1b09(0x88)](_0x156cb3),mgbaStorage['classList'][_0x3e1b09(0x83)](_0x3e1b09(0xc9)),_0x2c819e[_0x3e1b09(0x8c)]=()=>{const _0x2e9d91=_0x3e1b09;_0x2f6c50['close'](),_0x2f6c50[_0x2e9d91(0xc3)](),mgbaStorage[_0x2e9d91(0x81)][_0x2e9d91(0xc3)](_0x2e9d91(0xc9));};const _0x463e90=document[_0x3e1b09(0xa1)]('div');_0x463e90[_0x3e1b09(0x81)][_0x3e1b09(0x83)](_0x3e1b09(0x94),_0x3e1b09(0x9b),'hw','cw'),_0x463e90[_0x3e1b09(0x80)]=_0x1dee6c,_0x2f6c50[_0x3e1b09(0x88)](_0x463e90);const _0x1a13f0=document[_0x3e1b09(0xa1)](_0x3e1b09(0xbf));_0x1a13f0['classList'][_0x3e1b09(0x83)](_0x3e1b09(0xa3),'hw','cw','gap-16'),_0x2f6c50[_0x3e1b09(0x88)](_0x1a13f0);const _0x5c45b7=document[_0x3e1b09(0xa1)](_0x3e1b09(0xbf));_0x5c45b7[_0x3e1b09(0x81)][_0x3e1b09(0x83)](_0x3e1b09(0xa5),'bc'),_0x1a13f0['appendChild'](_0x5c45b7),_0x5c45b7['onclick']=()=>{const _0x4318b9=_0x3e1b09;a0_0x150f71[_0x4318b9(0xc7)](_0x2c5ef7,_0x1dee6c);};const _0xdfec3d=document['createElement'](_0x3e1b09(0xbf));_0xdfec3d[_0x3e1b09(0x81)][_0x3e1b09(0x83)](_0x3e1b09(0xb2),'bc'),_0x1a13f0[_0x3e1b09(0x88)](_0xdfec3d),_0xdfec3d[_0x3e1b09(0x8c)]=async()=>{const _0x47f6af=_0x3e1b09;if(window[_0x47f6af(0xbd)](_0x47f6af(0x9d)+_0x1dee6c)){const _0x2a132e=_0x1dee6c[_0x47f6af(0x91)](/\....$/,_0x47f6af(0xa0));a0_0x150f71[_0x47f6af(0x84)](_0x2c5ef7),localStorage[_0x47f6af(0xc6)](_0x2a132e+_0x47f6af(0x8f)+_0x1dee6c[_0x47f6af(0xc8)](-0x1)),localStorage[_0x47f6af(0xc6)](_0x2a132e+'_imageState'+_0x1dee6c['slice'](-0x1)),localStorageFile(),_0x2f6c50['close'](),_0x2f6c50[_0x47f6af(0xc3)](),mgbaStorage['classList'][_0x47f6af(0xc3)](_0x47f6af(0xc9));}};const _0x11c3e4=document[_0x3e1b09(0xa1)](_0x3e1b09(0xbf));_0x11c3e4[_0x3e1b09(0x81)][_0x3e1b09(0x83)](_0x3e1b09(0xc0),'bc'),_0x1a13f0['appendChild'](_0x11c3e4),_0x11c3e4['onclick']=async()=>{const _0x1be1e8=_0x3e1b09,_0xb2256b=window['prompt']('Edit\x20filename',_0x1dee6c);if(_0xb2256b!==null){const _0x5afca3=_0x1dee6c[_0x1be1e8(0x91)](/\....$/,_0x1be1e8(0xa0)),_0x5d12fc=_0xb2256b['replace'](/\....$/,'.gba'),_0x203a07=_0x5afca3+'_dateState'+_0x1dee6c[_0x1be1e8(0xc8)](-0x1),_0x30b665=_0x5afca3+_0x1be1e8(0xae)+_0x1dee6c[_0x1be1e8(0xc8)](-0x1),_0x2e630d=_0x5d12fc+'_dateState'+_0xb2256b[_0x1be1e8(0xc8)](-0x1),_0x51a1d3=_0x5d12fc+_0x1be1e8(0xae)+_0xb2256b[_0x1be1e8(0xc8)](-0x1),_0x41c39f=localStorage[_0x1be1e8(0x96)](_0x203a07),_0x17898d=localStorage[_0x1be1e8(0x96)](_0x30b665);_0x41c39f!==null&&(localStorage[_0x1be1e8(0x9e)](_0x2e630d,_0x41c39f),localStorage['removeItem'](_0x203a07)),_0x17898d!==null&&(localStorage['setItem'](_0x51a1d3,_0x17898d),localStorage[_0x1be1e8(0xc6)](_0x30b665)),a0_0x150f71[_0x1be1e8(0x99)](_0x2c5ef7,_0x1dee6c,_0xb2256b),localStorageFile(),_0x2f6c50['close'](),_0x2f6c50[_0x1be1e8(0xc3)](),mgbaStorage[_0x1be1e8(0x81)][_0x1be1e8(0xc3)](_0x1be1e8(0xc9));}},_0x2f6c50['showModal']();};const _0x4bf272=document[_0xfc1c5f(0xa1)]('span');_0x4bf272[_0xfc1c5f(0x80)]=humanFileSize(a0_0x150f71[_0xfc1c5f(0xad)](_0x2c5ef7)),_0x4bf272[_0xfc1c5f(0x81)][_0xfc1c5f(0x83)](_0xfc1c5f(0x8a)),_0x4bcc5e['appendChild'](_0x4bf272);}function a0_0x4ac0(){const _0x54b114=['statesFile','remove','savesFile','.gbc','removeItem','downloadFile','slice','opacity0','1538708MjIfPX','/data/saves/','/data/games/','102hXHqJZ','textContent','classList','toFixed','add','deleteFile','onclose','3447dMvGHH','span','appendChild','listCheat','mib','PiB','onclick','romsFile','endsWith','_dateState','screenshotsFile','replace','getElementById','active','flex-1','GiB','getItem','YiB','uploadGame','editFile','59660MQrSBN','rom-item','/data/states/','Delete\x20this\x20file?','setItem','.bc','.gba','createElement','303FrRsCR','actionDiv','uId','download','11791xImPem','click','lastChild','4371520uEATuw','/data/screenshots/','addEventListener','abs','fileSize','_imageState','.cheats','listScreenshot','files','delete','listSave','3622FnqEnE','ZiB','2132326iOxApW','disable','right','storage','TiB','firstChild','gap-10','confirm','mgba-storage','div','rename','6424HCaPut'];a0_0x4ac0=function(){return _0x54b114;};return a0_0x4ac0();}function a0_0x10a8(_0x2181c5,_0x53a783){const _0x4ac0bc=a0_0x4ac0();return a0_0x10a8=function(_0x10a880,_0x53308b){_0x10a880=_0x10a880-0x7d;let _0x934eac=_0x4ac0bc[_0x10a880];return _0x934eac;},a0_0x10a8(_0x2181c5,_0x53a783);}export function localStorageFile(){const _0x506a00=a0_0x201de4,_0x399aa6=a0_0x150f71['listGame'](),_0x1a8206=a0_0x150f71[_0x506a00(0xb3)](),_0x48b89=a0_0x150f71['listState'](),_0x2e6540=a0_0x150f71[_0x506a00(0x89)](),_0x41a490=a0_0x150f71[_0x506a00(0xb0)](),_0x559103=[romsFile,savesFile,statesFile,cheatsFile,screenshotsFile];for(const _0x3cbd41 of _0x559103){while(_0x3cbd41[_0x506a00(0xbb)]){_0x3cbd41[_0x506a00(0xa8)]['remove']();}}for(const _0x390078 of _0x399aa6){createElementStorage(romsFile,_0x390078,_0x506a00(0x7e)+_0x390078);}for(const _0xd1773 of _0x48b89){createElementStorage(statesFile,_0xd1773,_0x506a00(0x9c)+_0xd1773);}for(const _0x8afa94 of _0x1a8206){createElementStorage(savesFile,_0x8afa94,_0x506a00(0x7d)+_0x8afa94);}for(const _0x32d356 of _0x2e6540){createElementStorage(cheatsFile,_0x32d356,'/data/cheats/'+_0x32d356);}for(const _0x218726 of _0x41a490){createElementStorage(screenshotsFile,_0x218726,_0x506a00(0xaa)+_0x218726);}}document['addEventListener']('DOMContentLoaded',function(){const _0x548993=a0_0x201de4;upLoadFile[_0x548993(0xab)]('change',function(){const _0x1487ec=_0x548993,_0x34821f=upLoadFile[_0x1487ec(0xb1)][0x0]['name'];if(_0x34821f[_0x1487ec(0x8e)](_0x1487ec(0xaf)))a0_0x150f71['uploadCheat'](upLoadFile);else _0x34821f[_0x1487ec(0x8e)](_0x1487ec(0xa0))||_0x34821f['endsWith'](_0x1487ec(0xc5))||_0x34821f[_0x1487ec(0x8e)](_0x1487ec(0x9f))?a0_0x150f71[_0x1487ec(0x98)](upLoadFile):a0_0x150f71['uploadSavSta'](upLoadFile);}),openLocalStorage[_0x548993(0xab)](_0x548993(0xa7),function(){const _0x45ac0a=_0x548993,_0x4f7522=localStorage[_0x45ac0a(0x96)](_0x45ac0a(0xa4));storage[_0x45ac0a(0x81)][_0x45ac0a(0xc3)](_0x45ac0a(0xb7)),intro['classList'][_0x45ac0a(0x83)]('disable'),ingame['classList'][_0x45ac0a(0x83)](_0x45ac0a(0xb7)),_0x4f7522===null||_0x4f7522===''?(dropboxRestore[_0x45ac0a(0x81)][_0x45ac0a(0xc3)](_0x45ac0a(0x93)),dropboxBackup[_0x45ac0a(0x81)][_0x45ac0a(0xc3)]('active'),dropboxCloud[_0x45ac0a(0x81)][_0x45ac0a(0xc3)](_0x45ac0a(0x93))):(dropboxRestore[_0x45ac0a(0x81)]['add'](_0x45ac0a(0x93)),dropboxBackup['classList'][_0x45ac0a(0x83)]('active'),dropboxCloud['classList']['add'](_0x45ac0a(0x93)));}),setTimeout(()=>{localStorageFile();},0xbb8);});