const a0_0x2ddfe6=a0_0x1734;(function(_0x42451c,_0x11744f){const _0xd02294=a0_0x1734,_0x2fc028=_0x42451c();while(!![]){try{const _0x13ad1c=parseInt(_0xd02294(0xea))/0x1*(-parseInt(_0xd02294(0xc8))/0x2)+parseInt(_0xd02294(0xe2))/0x3*(parseInt(_0xd02294(0xf6))/0x4)+parseInt(_0xd02294(0x10b))/0x5+parseInt(_0xd02294(0xce))/0x6+-parseInt(_0xd02294(0xf8))/0x7*(-parseInt(_0xd02294(0xc6))/0x8)+-parseInt(_0xd02294(0xde))/0x9+-parseInt(_0xd02294(0xcf))/0xa;if(_0x13ad1c===_0x11744f)break;else _0x2fc028['push'](_0x2fc028['shift']());}catch(_0x19c8d1){_0x2fc028['push'](_0x2fc028['shift']());}}}(a0_0x2a25,0x665af));import*as a0_0x4461ad from'./main.js';const mgbaStorage=document['getElementById'](a0_0x2ddfe6(0xf1)),savesFile=document[a0_0x2ddfe6(0xc9)](a0_0x2ddfe6(0x100)),romsFile=document[a0_0x2ddfe6(0xc9)](a0_0x2ddfe6(0x111)),statesFile=document[a0_0x2ddfe6(0xc9)]('statesFile'),screenshotsFile=document[a0_0x2ddfe6(0xc9)](a0_0x2ddfe6(0xdc));function humanFileSize(_0xa0d51a,_0xeca63b=![],_0x4ad741=0x1){const _0x26c5a8=a0_0x2ddfe6,_0x5d356f=_0xeca63b?0x3e8:0x400,_0x1b6f69=_0xeca63b?['kB','MB','GB','TB','PB','EB','ZB','YB']:[_0x26c5a8(0xed),'MiB',_0x26c5a8(0x110),_0x26c5a8(0xdb),_0x26c5a8(0xc2),_0x26c5a8(0xd0),_0x26c5a8(0xdd),_0x26c5a8(0x112)];let _0x2228c9=-0x1;do{_0xa0d51a/=_0x5d356f,++_0x2228c9;}while(Math[_0x26c5a8(0xf2)](_0xa0d51a)>=_0x5d356f&&_0x2228c9<_0x1b6f69['length']-0x1);return _0xa0d51a[_0x26c5a8(0x10e)](_0x4ad741)+'\x20'+_0x1b6f69[_0x2228c9];}function a0_0x1734(_0x33eba4,_0x28000c){const _0x2a256a=a0_0x2a25();return a0_0x1734=function(_0x173423,_0x315bca){_0x173423=_0x173423-0xbc;let _0x20297a=_0x2a256a[_0x173423];return _0x20297a;},a0_0x1734(_0x33eba4,_0x28000c);}function createElementStorage(_0x2d6bbd,_0x51193b,_0x4ee7ad){const _0x4ab256=a0_0x2ddfe6,_0x29e7de=document[_0x4ab256(0xc0)](_0x4ab256(0xe6));_0x29e7de['classList'][_0x4ab256(0xf5)]('flex-1','rom-item',_0x4ab256(0xbd)),_0x2d6bbd[_0x4ab256(0xff)](_0x29e7de);const _0x553dbe=document['createElement'](_0x4ab256(0x10f));_0x553dbe[_0x4ab256(0xe3)]=_0x51193b,_0x553dbe[_0x4ab256(0xbc)][_0x4ab256(0xf5)](_0x4ab256(0x10c)),_0x29e7de[_0x4ab256(0xff)](_0x553dbe),_0x553dbe[_0x4ab256(0xe4)]=()=>{const _0x288ccb=_0x4ab256,_0x1b733c=document[_0x288ccb(0xc0)](_0x288ccb(0xbf));_0x1b733c[_0x288ccb(0xd5)]=()=>_0x1b733c['remove'](),_0x2d6bbd[_0x288ccb(0xff)](_0x1b733c);const _0x4f5e89=document[_0x288ccb(0xc0)]('div');_0x4f5e89[_0x288ccb(0xbc)][_0x288ccb(0xf5)](_0x288ccb(0xda),_0x288ccb(0xf7),_0x288ccb(0xc3)),_0x1b733c[_0x288ccb(0xff)](_0x4f5e89);const _0x49e9e0=document[_0x288ccb(0xc0)](_0x288ccb(0xe6));_0x49e9e0[_0x288ccb(0xbc)][_0x288ccb(0xf5)](_0x288ccb(0xf0),'bc','flex-1'),_0x4f5e89[_0x288ccb(0xff)](_0x49e9e0);const _0x1dc82d=document[_0x288ccb(0xc0)](_0x288ccb(0xe6));_0x1dc82d['classList'][_0x288ccb(0xf5)]('flex-1'),_0x4f5e89['appendChild'](_0x1dc82d);const _0x2cc57a=document[_0x288ccb(0xc0)](_0x288ccb(0xe6));_0x2cc57a[_0x288ccb(0xbc)][_0x288ccb(0xf5)]('flex-1'),_0x4f5e89['appendChild'](_0x2cc57a);const _0x183359=document[_0x288ccb(0xc0)](_0x288ccb(0xe6));_0x183359[_0x288ccb(0xbc)][_0x288ccb(0xf5)]('flex-1'),_0x4f5e89['appendChild'](_0x183359),mgbaStorage[_0x288ccb(0xbc)]['add'](_0x288ccb(0xcb)),_0x49e9e0['onclick']=()=>{const _0x32a2c5=_0x288ccb;_0x1b733c[_0x32a2c5(0xd4)](),_0x1b733c['remove'](),mgbaStorage[_0x32a2c5(0xbc)][_0x32a2c5(0x10d)](_0x32a2c5(0xcb));};const _0x138a0b=document[_0x288ccb(0xc0)]('div');_0x138a0b[_0x288ccb(0xbc)][_0x288ccb(0xf5)](_0x288ccb(0x10c),'rom-item','hw','cw'),_0x138a0b[_0x288ccb(0xe3)]=_0x51193b,_0x1b733c[_0x288ccb(0xff)](_0x138a0b);const _0x154610=document[_0x288ccb(0xc0)]('div');_0x154610[_0x288ccb(0xbc)][_0x288ccb(0xf5)](_0x288ccb(0xeb),'hw','cw',_0x288ccb(0x108)),_0x1b733c[_0x288ccb(0xff)](_0x154610);const _0x5d48a5=document[_0x288ccb(0xc0)]('div');_0x5d48a5[_0x288ccb(0xbc)]['add'](_0x288ccb(0xfd),'bc'),_0x154610[_0x288ccb(0xff)](_0x5d48a5),_0x5d48a5[_0x288ccb(0xe4)]=()=>{a0_0x4461ad['downloadFile'](_0x4ee7ad,_0x51193b);};const _0xcc0d7c=document[_0x288ccb(0xc0)]('div');_0xcc0d7c[_0x288ccb(0xbc)][_0x288ccb(0xf5)](_0x288ccb(0xe1),'bc'),_0x154610[_0x288ccb(0xff)](_0xcc0d7c),_0xcc0d7c['onclick']=async()=>{const _0xcb098e=_0x288ccb;if(window[_0xcb098e(0x107)](_0xcb098e(0xd6)+_0x51193b)){const _0x1a7200=_0x51193b[_0xcb098e(0xe7)](/\....$/,'.gba');a0_0x4461ad[_0xcb098e(0x105)](_0x4ee7ad),localStorage[_0xcb098e(0xfe)](_0x1a7200+'_dateState'+_0x51193b[_0xcb098e(0xd9)](-0x1)),localStorage['removeItem'](_0x1a7200+'_imageState'+_0x51193b[_0xcb098e(0xd9)](-0x1)),localStorageFile(),_0x1b733c['close'](),_0x1b733c[_0xcb098e(0x10d)](),mgbaStorage['classList'][_0xcb098e(0x10d)](_0xcb098e(0xcb));}};const _0x542b3c=document[_0x288ccb(0xc0)](_0x288ccb(0xe6));_0x542b3c[_0x288ccb(0xbc)][_0x288ccb(0xf5)](_0x288ccb(0xe9),'bc'),_0x154610['appendChild'](_0x542b3c),_0x542b3c[_0x288ccb(0xe4)]=async()=>{const _0x91c85f=_0x288ccb,_0x58961d=window['prompt'](_0x91c85f(0xc5),_0x51193b);if(_0x58961d!==null){const _0x2de0b8=_0x51193b[_0x91c85f(0xe7)](/\....$/,_0x91c85f(0xe5)),_0x4f9088=_0x58961d[_0x91c85f(0xe7)](/\....$/,_0x91c85f(0xe5)),_0x162c62=_0x2de0b8+'_dateState'+_0x51193b[_0x91c85f(0xd9)](-0x1),_0x4a80b1=_0x2de0b8+_0x91c85f(0x103)+_0x51193b['slice'](-0x1),_0x83ce4d=_0x4f9088+_0x91c85f(0xbe)+_0x58961d['slice'](-0x1),_0x441a08=_0x4f9088+_0x91c85f(0x103)+_0x58961d[_0x91c85f(0xd9)](-0x1),_0x4301a8=localStorage['getItem'](_0x162c62),_0x17f844=localStorage[_0x91c85f(0x102)](_0x4a80b1);_0x4301a8!==null&&(localStorage[_0x91c85f(0xcc)](_0x83ce4d,_0x4301a8),localStorage[_0x91c85f(0xfe)](_0x162c62)),_0x17f844!==null&&(localStorage[_0x91c85f(0xcc)](_0x441a08,_0x17f844),localStorage[_0x91c85f(0xfe)](_0x4a80b1)),a0_0x4461ad[_0x91c85f(0xdf)](_0x4ee7ad,_0x51193b,_0x58961d),localStorageFile(),_0x1b733c[_0x91c85f(0xd4)](),_0x1b733c[_0x91c85f(0x10d)](),mgbaStorage[_0x91c85f(0xbc)][_0x91c85f(0x10d)]('opacity0');}},_0x1b733c['showModal']();};const _0x3a88aa=document[_0x4ab256(0xc0)](_0x4ab256(0x10f));_0x3a88aa['textContent']=humanFileSize(a0_0x4461ad[_0x4ab256(0xc4)](_0x4ee7ad)),_0x3a88aa[_0x4ab256(0xbc)][_0x4ab256(0xf5)]('mib'),_0x29e7de[_0x4ab256(0xff)](_0x3a88aa);}function a0_0x2a25(){const _0x54ec14=['classList','rom','_dateState','dialog','createElement','click','PiB','gap-10','fileSize','Edit\x20filename','120xouEyY','disable','1367522mHqgKB','getElementById','endsWith','opacity0','setItem','uploadGame','1802340RpAGRz','9280270jxZePm','EiB','name','listScreenshot','files','close','onclose','Delete\x20this\x20file?','DOMContentLoaded','lastChild','slice','storage','TiB','screenshotsFile','ZiB','753534yvrGBe','editFile','active','delete','9432aMwofk','textContent','onclick','.gba','div','replace','listSave','rename','1JMSvLr','actionDiv','.cheats','KiB','uId','uploadSavSta','home','mgba-storage','abs','/data/saves/','.gbc','add','984gFiUZV','right','327768wSaJnI','uploadCheat','firstChild','listCheat','/data/cheats/','download','removeItem','appendChild','savesFile','addEventListener','getItem','_imageState','.bc','deleteFile','listState','confirm','gap-16','change','/data/states/','1692935pWdVJI','flex-1','remove','toFixed','span','GiB','romsFile','YiB'];a0_0x2a25=function(){return _0x54ec14;};return a0_0x2a25();}export function localStorageFile(){const _0x58f97e=a0_0x2ddfe6,_0x2584cb=a0_0x4461ad['listGame'](),_0x50e4c7=a0_0x4461ad[_0x58f97e(0xe8)](),_0x2bbed0=a0_0x4461ad[_0x58f97e(0x106)](),_0x2ca4ce=a0_0x4461ad[_0x58f97e(0xfb)](),_0x530973=a0_0x4461ad[_0x58f97e(0xd2)](),_0x5aee86=[romsFile,savesFile,statesFile,cheatsFile,screenshotsFile];for(const _0x392358 of _0x5aee86){while(_0x392358[_0x58f97e(0xfa)]){_0x392358[_0x58f97e(0xd8)]['remove']();}}for(const _0x4c398e of _0x2584cb){createElementStorage(romsFile,_0x4c398e,'/data/games/'+_0x4c398e);}for(const _0x5f0ee6 of _0x2bbed0){createElementStorage(statesFile,_0x5f0ee6,_0x58f97e(0x10a)+_0x5f0ee6);}for(const _0x44d17c of _0x50e4c7){createElementStorage(savesFile,_0x44d17c,_0x58f97e(0xf3)+_0x44d17c);}for(const _0x1ab485 of _0x2ca4ce){createElementStorage(cheatsFile,_0x1ab485,_0x58f97e(0xfc)+_0x1ab485);}for(const _0x477577 of _0x530973){createElementStorage(screenshotsFile,_0x477577,'/data/screenshots/'+_0x477577);}}document['addEventListener'](a0_0x2ddfe6(0xd7),function(){const _0x48de3f=a0_0x2ddfe6;upLoadFile[_0x48de3f(0x101)](_0x48de3f(0x109),function(){const _0x3ad56e=_0x48de3f,_0x155a6a=upLoadFile[_0x3ad56e(0xd3)][0x0][_0x3ad56e(0xd1)];if(_0x155a6a[_0x3ad56e(0xca)](_0x3ad56e(0xec)))a0_0x4461ad[_0x3ad56e(0xf9)](upLoadFile);else _0x155a6a[_0x3ad56e(0xca)](_0x3ad56e(0xe5))||_0x155a6a[_0x3ad56e(0xca)](_0x3ad56e(0xf4))||_0x155a6a[_0x3ad56e(0xca)](_0x3ad56e(0x104))?a0_0x4461ad[_0x3ad56e(0xcd)](upLoadFile):a0_0x4461ad[_0x3ad56e(0xef)](upLoadFile);}),openLocalStorage['addEventListener'](_0x48de3f(0xc1),function(){const _0x431ea3=_0x48de3f,_0x4f1377=localStorage[_0x431ea3(0x102)](_0x431ea3(0xee));storage[_0x431ea3(0xbc)][_0x431ea3(0x10d)]('disable'),intro['classList']['add'](_0x431ea3(0xc7)),ingame['classList']['add'](_0x431ea3(0xc7)),_0x4f1377===null||_0x4f1377===''?(dropboxRestore[_0x431ea3(0xbc)]['remove']('active'),dropboxBackup[_0x431ea3(0xbc)]['remove'](_0x431ea3(0xe0)),dropboxCloud[_0x431ea3(0xbc)][_0x431ea3(0x10d)](_0x431ea3(0xe0))):(dropboxRestore[_0x431ea3(0xbc)]['add']('active'),dropboxBackup[_0x431ea3(0xbc)][_0x431ea3(0xf5)](_0x431ea3(0xe0)),dropboxCloud['classList'][_0x431ea3(0xf5)]('active'));}),setTimeout(()=>{localStorageFile();},0xbb8);});